<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="phet-sim-level" content="production" />
  <!-- MathQuill CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.css" />

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

  <!-- MathQuill JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.js"></script>
  <script src="https://unpkg.com/evaluatex/dist/evaluatex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
  <style>
    math-field::part(virtual-keyboard-toggle) {
      display: none;
    }

    .my-mathquill-input {
      min-width: 290px;
      /* Set the minimum width as needed */
      min-height: 60px;
      background: white;

    }

    .error {
      border-color: red;
      background: red;

    }

    .MLK__keyboard {
      display: none;
    }
  </style>
  <title>Coriolis Force</title>

  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const vq='<svg width="273" height="44.576" version="1.1" viewBox="0 0 273 44.576" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs><style> .cls-1 {fill: #faa51a;} .cls-2 {fill: #fff;} .cls-4 {stroke-width: .62px;} .cls-4, .cls-5 {fill: none;stroke: #1f3151;} .cls-4, .cls-5, .cls-6 {stroke-miterlimit: 10;} .cls-5 {stroke-width: .94px;} .cls-6 {fill: url(#b);stroke: url(#a);} .cls-7 {fill: #1f3151;} .cls-8 {fill: #ffca37;}</style><linearGradient id="b" x1="25.68" x2="25.68" y1="50.86" y2=".5" gradientUnits="userSpaceOnUse"><stop stop-color="#fff" offset="0"/><stop stop-color="#1f3151" offset="1"/></linearGradient><linearGradient id="a" x1="25.68" x2="25.68" y1="51.36" gradientUnits="userSpaceOnUse"><stop stop-color="#fff" offset="0"/><stop stop-color="#e7e9ed" offset=".05"/><stop stop-color="#b3b9c4" offset=".19"/><stop stop-color="#858fa0" offset=".33"/><stop stop-color="#606d84" offset=".46"/><stop stop-color="#43526d" offset=".6"/><stop stop-color="#2f405d" offset=".74"/><stop stop-color="#233454" offset=".87"/><stop stop-color="#1f3151" offset="1"/></linearGradient></defs><g transform="matrix(3.2803 0 0 3.2803 -228.67 -458.68)"><g transform="matrix(.26458 0 0 .26458 69.82 141.9)"><g transform="translate(-.41772 -7.8334)"><circle class="cls-6" cx="25.68" cy="25.68" r="25.18" fill="url(#b)" stroke="url(#a)"/><path class="cls-7" d="m36.75 35.44s-0.45 7.03-0.99 7.03c0 0-3.63-5.74-3.63-6.65h-0.03c0.2-0.44 0.31-0.93 0.31-1.43l0.74-5.76c0.61 1.03 3.59 6 3.59 6.81z"/><path class="cls-2" d="m33.16 28.63-0.74 5.76c0 0.5-0.11 0.99-0.31 1.42-0.5 1.18-1.64 2.01-2.97 2.11-0.08 0.01-0.17 0.01-0.26 0.01h-5.6c-1.55 0-2.89-1.01-3.35-2.42-0.12-0.35-0.19-0.73-0.19-1.12l-0.8-6.32-1.04-8.32c-0.5-4 0.45-8.05 2.72-11.39 2.12-3.08 4.63-6.08 5.68-6.08 0.53 0 1.4 0.77 2.4 1.93s2.12 2.72 3.13 4.28c2.12 3.27 2.97 7.2 2.49 11.08l-1.16 9.07zm-3.89-11.86c0-1.76-1.42-3.16-3.16-3.16s-3.16 1.4-3.16 3.16 1.42 3.15 3.16 3.15 3.16-1.4 3.16-3.15zm-1.05 9.37c0-1.14-0.92-2.04-2.04-2.04s-2.04 0.91-2.04 2.04 0.92 2.04 2.04 2.04 2.04-0.92 2.04-2.04z"/><path class="cls-8" d="m29.13 37.93c0.59 1.15 1.7 4.59 1.54 5.89-0.12 1.08-2.85 3.27-3.77 4.36-0.19 0.23-0.51 0.26-0.73 0.05-1.23-1.15-4.07-3.05-4.41-4.15-0.46-1.53 0.47-4.56 1.49-5.84 0.05 1.6 2.22 4.43 2.92 4.45 0.91 0 2.59-3.3 2.7-4.77 0.08 0 0.17 0 0.26-0.01v0.02z"/><path class="cls-1" d="m23.25 38.25c0-0.12 0.01-0.23 0.03-0.32h5.6c-0.11 1.47-1.8 4.77-2.7 4.77-0.7-0.01-2.87-2.85-2.92-4.45z"/><path class="cls-7" d="m26.11 13.6c1.74 0 3.16 1.4 3.16 3.16s-1.42 3.15-3.16 3.15-3.16-1.4-3.16-3.15 1.42-3.16 3.16-3.16z"/><path class="cls-7" d="m26.17 24.1c1.12 0 2.04 0.91 2.04 2.04s-0.92 2.04-2.04 2.04-2.04-0.92-2.04-2.04 0.92-2.04 2.04-2.04z"/><path class="cls-7" d="m19.74 34.39c0 0.39 0.07 0.77 0.19 1.12 0 0.91-4.19 6.65-4.19 6.65-0.63 0-1.14-7.04-1.14-7.04 0-0.91 4.32-7.05 4.32-7.05h0.01l0.8 6.32z"/><path class="cls-5" d="m28.88 37.93h-5.6c-1.55 0-2.89-1.01-3.35-2.42-0.12-0.35-0.19-0.73-0.19-1.12l-0.8-6.32-1.04-8.32c-0.5-4 0.45-8.05 2.72-11.39 2.12-3.08 4.63-6.08 5.68-6.08 0.53 0 1.4 0.77 2.4 1.93s2.12 2.72 3.13 4.28c2.12 3.27 2.97 7.2 2.49 11.08l-1.16 9.07-0.74 5.76c0 0.5-0.11 0.99-0.31 1.42-0.5 1.18-1.64 2.01-2.97 2.11-0.08 0.01-0.17 0.01-0.26 0.01z"/><path class="cls-5" d="m29.27 16.77c0 1.74-1.42 3.15-3.16 3.15s-3.16-1.4-3.16-3.15 1.42-3.16 3.16-3.16 3.16 1.4 3.16 3.16z"/><path class="cls-5" d="m28.22 26.14c0 1.12-0.92 2.04-2.04 2.04s-2.04-0.92-2.04-2.04 0.92-2.04 2.04-2.04 2.04 0.91 2.04 2.04z"/><path class="cls-5" d="m19.93 35.51c0 0.91-4.19 6.65-4.19 6.65-0.63 0-1.14-7.04-1.14-7.04 0-0.91 4.32-7.05 4.32-7.05"/><path class="cls-5" d="m32.13 35.82c0 0.91 3.63 6.65 3.63 6.65 0.54 0 0.99-7.03 0.99-7.03 0-0.81-2.98-5.78-3.59-6.81-0.08-0.12-0.12-0.19-0.12-0.19"/><path class="cls-5" d="m23.28 37.93c-0.01 0.09-0.03 0.2-0.03 0.32 0.05 1.6 2.22 4.43 2.92 4.45 0.91 0 2.59-3.3 2.7-4.77"/><path class="cls-5" d="m23.39 38.09c-0.04 0.05-0.08 0.09-0.13 0.16-1.01 1.28-1.95 4.31-1.49 5.84 0.34 1.1 3.18 3 4.41 4.15 0.22 0.2 0.54 0.17 0.73-0.05 0.92-1.1 3.65-3.28 3.77-4.36 0.16-1.3-0.95-4.74-1.54-5.89"/><circle class="cls-2" cx="27.57" cy="15.25" r="1.07"/><circle class="cls-2" cx="27.1" cy="25" r=".71"/><line class="cls-4" x1="19.74" x2="32" y1="34.19" y2="34.19"/><path class="cls-4" d="m18.93 11.84c2.04-1.63 4.65-2.53 7.27-2.5 2.61 0.03 5.2 0.98 7.21 2.65"/></g><g transform="translate(0 -.81836)"><path transform="translate(60.18,36.57)" d="m23.268-7.7135q0 1.579-0.74413 3.1217-0.72598 1.5427-2.0509 2.6135-1.452 1.1616-3.3939 1.8149-1.9238 0.65338-4.6462 0.65338-2.9221 0-5.2633-0.54448-2.3231-0.54448-4.737-1.6153v-4.5011h0.25409q2.0509 1.706 4.737 2.6317 2.6861 0.92562 5.0455 0.92562 3.3395 0 5.1907-1.2523 1.8694-1.2523 1.8694-3.3395 0-1.7968-0.88932-2.6498-0.87117-0.85302-2.668-1.3249-1.3612-0.36299-2.9584-0.59893-1.579-0.23594-3.3576-0.59893-3.5936-0.76228-5.3359-2.5954-1.7242-1.8512-1.7242-4.8096 0-3.3939 2.8676-5.5537 2.8676-2.1779 7.2779-2.1779 2.8495 0 5.227 0.54448t4.2107 1.3431v4.247h-0.25409q-1.5427-1.3068-4.0655-2.1598-2.5046-0.87117-5.1363-0.87117-2.8858 0-4.6463 1.1979-1.7423 1.1979-1.7423 3.0854 0 1.6879 0.87117 2.6498 0.87117 0.96192 3.0673 1.4701 1.1616 0.25409 3.3032 0.61708 2.1416 0.36299 3.6299 0.74413 3.0128 0.79857 4.5374 2.4139 1.5246 1.6153 1.5246 4.5192zm20.491 6.443q-1.706 0.81672-3.2487 1.2705-1.5246 0.45374-3.2487 0.45374-2.1961 0-4.0292-0.63523-1.8331-0.65338-3.1398-1.9601-1.3249-1.3068-2.0509-3.3032-0.72598-1.9964-0.72598-4.6644 0-4.9729 2.7224-7.8042 2.7406-2.8313 7.2235-2.8313 1.7423 0 3.4121 0.49003 1.6879 0.49003 3.0854 1.1979v3.7932h-0.18149q-1.5608-1.216-3.2306-1.8694-1.6516-0.65338-3.2306-0.65338-2.9039 0-4.5918 1.9601-1.6697 1.942-1.6697 5.7171 0 3.6662 1.6334 5.6445 1.6516 1.9601 4.6281 1.9601 1.0345 0 2.1053-0.27224 1.0708-0.27224 1.9238-0.70783 0.74413-0.38114 1.3975-0.79857 0.65338-0.43559 1.0345-0.74413h0.18149zm21.344-8.5121h-14.937q0 1.8694 0.56263 3.2669 0.56263 1.3794 1.5427 2.2687 0.94377 0.87117 2.2324 1.3068 1.3068 0.43559 2.8676 0.43559 2.069 0 4.1562-0.81672 2.1053-0.83487 2.9947-1.6334h0.18149v3.7206q-1.7242 0.72598-3.521 1.216-1.7968 0.49003-3.7751 0.49003-5.0455 0-7.8768-2.7224-2.8313-2.7406-2.8313-7.7679 0-4.9729 2.7043-7.895 2.7224-2.9221 7.1509-2.9221 4.1018 0 6.316 2.3957 2.2324 2.3957 2.2324 6.806zm-3.3213-2.6135q-0.01815-2.6861-1.3612-4.1562-1.3249-1.4701-4.0473-1.4701-2.7406 0-4.374 1.6153-1.6153 1.6153-1.8331 4.011zm25.445 12.396h-3.4121v-11.543q0-1.3975-0.16334-2.6135-0.16334-1.2342-0.59893-1.9238-0.45374-0.76228-1.3068-1.1253-0.85302-0.38114-2.2142-0.38114-1.3975 0-2.9221 0.68968-1.5246 0.68968-2.9221 1.7605v15.137h-3.4121v-20.273h3.4121v2.2505q1.5971-1.3249 3.3032-2.069t3.5028-0.74413q3.285 0 5.0092 1.9783 1.7242 1.9783 1.7242 5.6989zm23.54-9.7825h-14.937q0 1.8694 0.56263 3.2669 0.56263 1.3794 1.5427 2.2687 0.94377 0.87117 2.2324 1.3068 1.3068 0.43559 2.8676 0.43559 2.069 0 4.1562-0.81672 2.1053-0.83487 2.9946-1.6334h0.1815v3.7206q-1.7242 0.72598-3.521 1.216-1.7968 0.49003-3.7751 0.49003-5.0455 0-7.8768-2.7224-2.8313-2.7406-2.8313-7.7679 0-4.9729 2.7043-7.895 2.7224-2.9221 7.1509-2.9221 4.1018 0 6.316 2.3957 2.2324 2.3957 2.2324 6.806zm-3.3214-2.6135q-0.0181-2.6861-1.3612-4.1562-1.3249-1.4701-4.0473-1.4701-2.7406 0-4.374 1.6153-1.6153 1.6153-1.8331 4.011zm21.144-4.1562h-0.18149q-0.76228-0.18149-1.4882-0.25409-0.70783-0.09075-1.6879-0.09075-1.579 0-3.0491 0.70783-1.4701 0.68968-2.8313 1.7968v14.392h-3.4121v-20.273h3.4121v2.9947q2.0327-1.6334 3.5754-2.305 1.5608-0.68968 3.1761-0.68968 0.88932 0 1.2886 0.05445 0.39929 0.0363 1.1979 0.16334zm20.745-3.7206-11.833 27.75h-3.648l3.7751-8.4576-8.0765-19.293h3.7025l6.2252 15.028 6.2797-15.028zm24.375 12.559q0 1.579-0.74413 3.1217-0.72597 1.5427-2.0509 2.6135-1.452 1.1616-3.3939 1.8149-1.9238 0.65338-4.6462 0.65338-2.9221 0-5.2633-0.54448-2.3231-0.54448-4.737-1.6153v-4.5011h0.25409q2.0509 1.706 4.737 2.6317 2.6861 0.92562 5.0455 0.92562 3.3395 0 5.1907-1.2523 1.8694-1.2523 1.8694-3.3395 0-1.7968-0.88932-2.6498-0.87117-0.85302-2.668-1.3249-1.3612-0.36299-2.9584-0.59893-1.579-0.23594-3.3576-0.59893-3.5936-0.76228-5.3359-2.5954-1.7242-1.8512-1.7242-4.8096 0-3.3939 2.8676-5.5537 2.8676-2.1779 7.2779-2.1779 2.8495 0 5.227 0.54448t4.2107 1.3431v4.247h-0.25409q-1.5427-1.3068-4.0655-2.1598-2.5046-0.87117-5.1363-0.87117-2.8858 0-4.6462 1.1979-1.7423 1.1979-1.7423 3.0854 0 1.6879 0.87117 2.6498t3.0672 1.4701q1.1616 0.25409 3.3032 0.61708 2.1416 0.36299 3.6299 0.74413 3.0128 0.79857 4.5374 2.4139 1.5246 1.6153 1.5246 4.5192zm16.026 7.532q-0.96192 0.25409-2.1053 0.41744-1.1253 0.16334-2.0146 0.16334-3.1035 0-4.7188-1.6697-1.6153-1.6697-1.6153-5.3541v-10.781h-2.305v-2.8676h2.305v-5.826h3.4121v5.826h7.042v2.8676h-7.042v9.2381q0 1.5971 0.0726 2.5046 0.0726 0.88932 0.50818 1.6697 0.39929 0.72598 1.089 1.0708 0.70782 0.32669 2.1416 0.32669 0.83487 0 1.7423-0.23594 0.90747-0.25409 1.3068-0.41744h0.18149zm19.874 0.18149h-3.3939v-2.1598q-0.45374 0.30854-1.2342 0.87117-0.76228 0.54448-1.4882 0.87117-0.85303 0.41744-1.9601 0.68968-1.1071 0.29039-2.5954 0.29039-2.7406 0-4.6462-1.8149-1.9057-1.8149-1.9057-4.6281 0-2.305 0.98006-3.7206 0.99822-1.4338 2.8313-2.2505 1.8512-0.81672 4.4466-1.1071 2.5954-0.29039 5.5719-0.43559v-0.52633q0-1.1616-0.41744-1.9238-0.39929-0.76228-1.1616-1.1979-0.72598-0.41744-1.7423-0.56263-1.0164-0.1452-2.1235-0.1452-1.343 0-2.9946 0.36299-1.6516 0.34484-3.4121 1.0164h-0.18149v-3.4665q0.99821-0.27224 2.8858-0.59893 1.8875-0.32669 3.7206-0.32669 2.1416 0 3.7206 0.36299 1.5972 0.34484 2.7587 1.1979 1.1434 0.83487 1.7424 2.1598t0.59893 3.285zm-3.3939-4.9911v-5.6445q-1.5608 0.09075-3.6843 0.27224-2.1053 0.18149-3.3395 0.52633-1.4701 0.41744-2.3776 1.3068-0.90747 0.87117-0.90747 2.4139 0 1.7423 1.0527 2.6317 1.0527 0.87117 3.2124 0.87117 1.7968 0 3.285-0.68968 1.4882-0.70783 2.7587-1.6879zm24.955 3.7206q-1.706 0.81672-3.2488 1.2705-1.5246 0.45374-3.2487 0.45374-2.1961 0-4.0292-0.63523-1.8331-0.65338-3.1398-1.9601-1.3249-1.3068-2.0509-3.3032-0.72598-1.9964-0.72598-4.6644 0-4.9729 2.7224-7.8042 2.7406-2.8313 7.2235-2.8313 1.7423 0 3.4121 0.49003 1.6879 0.49003 3.0854 1.1979v3.7932h-0.18149q-1.5608-1.216-3.2306-1.8694-1.6516-0.65338-3.2306-0.65338-2.9039 0-4.5918 1.9601-1.6697 1.942-1.6697 5.7171 0 3.6662 1.6334 5.6445 1.6516 1.9601 4.6281 1.9601 1.0345 0 2.1053-0.27224 1.0708-0.27224 1.9238-0.70783 0.74413-0.38114 1.3975-0.79857 0.65338-0.43559 1.0345-0.74413h0.18149zm22.778 1.2705h-4.5011l-8.1309-8.8751-2.2142 2.1053v6.7697h-3.4121v-28.24h3.4121v18.113l9.8551-10.146h4.3014l-9.4196 9.3651z" fill="#fff" aria-label="SceneryStack"/><path transform="translate(-385.7 -519.22)" d="m456.08 521.62h-1.1602v-7.5176l-2.4258 5.1152h-0.69141l-2.4082-5.1152v7.5176h-1.084v-8.7246h1.582l2.3262 4.8574 2.25-4.8574h1.6113zm7.3418 0h-1.0957v-0.69726q-0.14649 0.0996-0.39844 0.28125-0.24609 0.17578-0.48047 0.28125-0.27539 0.13476-0.63281 0.22265-0.35742 0.0937-0.83789 0.0937-0.88477 0-1.5-0.58593-0.61524-0.58594-0.61524-1.4941 0-0.74415 0.31641-1.2012 0.32227-0.46289 0.91406-0.72656 0.59766-0.26367 1.4356-0.35742 0.83789-0.0937 1.7988-0.14063v-0.16992q0-0.375-0.13477-0.62109-0.1289-0.2461-0.375-0.38672-0.23437-0.13477-0.5625-0.18164-0.32812-0.0469-0.68554-0.0469-0.4336 0-0.9668 0.11719-0.5332 0.11133-1.1016 0.32813h-0.0586v-1.1191q0.32227-0.0879 0.93164-0.19336 0.60938-0.10547 1.2012-0.10547 0.6914 0 1.2012 0.11719 0.51562 0.11132 0.89062 0.38671 0.36914 0.26954 0.5625 0.69727t0.19336 1.0606zm-1.0957-1.6113v-1.8223q-0.50391 0.0293-1.1894 0.0879-0.67969 0.0586-1.0781 0.16992-0.47461 0.13477-0.76758 0.42188-0.29297 0.28125-0.29297 0.77929 0 0.5625 0.33985 0.84961 0.33984 0.28125 1.0371 0.28125 0.58007 0 1.0605-0.22265 0.48047-0.22852 0.89063-0.54493zm8.5254 1.6113h-1.1016v-0.68554q-0.47461 0.41015-0.99024 0.63867-0.51562 0.22851-1.1191 0.22851-1.1719 0-1.8633-0.90234-0.68555-0.90234-0.68555-2.502 0-0.83203 0.23438-1.4824 0.24023-0.65039 0.64453-1.1074 0.39844-0.44531 0.92578-0.67968 0.5332-0.23438 1.1016-0.23438 0.51563 0 0.91407 0.11133 0.39843 0.10547 0.83789 0.33398v-2.8359h1.1016zm-1.1016-1.6113v-3.7558q-0.44532-0.19922-0.79688-0.2754-0.35156-0.0762-0.76758-0.0762-0.92578 0-1.4414 0.64453-0.51563 0.64454-0.51563 1.8281 0 1.166 0.39844 1.7754 0.39844 0.60352 1.2773 0.60352 0.46875 0 0.94922-0.20508 0.48047-0.21094 0.89649-0.53907zm8.748-1.5469h-4.8223q0 0.60352 0.18164 1.0547 0.18164 0.44531 0.49805 0.73242 0.30468 0.28125 0.7207 0.42187 0.42187 0.14063 0.92578 0.14063 0.66797 0 1.3418-0.26367 0.67968-0.26953 0.96679-0.52735h0.0586v1.2012q-0.55664 0.23437-1.1367 0.39257-0.58008 0.15821-1.2188 0.15821-1.6289 0-2.543-0.87891-0.91406-0.88477-0.91406-2.5078 0-1.6055 0.87304-2.5488 0.87891-0.94336 2.3086-0.94336 1.3242 0 2.0391 0.77344 0.7207 0.77344 0.7207 2.1973zm-1.0723-0.84375q-6e-3 -0.86719-0.43946-1.3418-0.42773-0.47461-1.3066-0.47461-0.88476 0-1.4121 0.52149-0.52148 0.52148-0.59179 1.2949zm15.193-2.543-1.7051 6.5449h-1.0195l-1.6816-5.0449-1.6699 5.0449h-1.0137l-1.7226-6.5449h1.1484l1.2012 5.0684 1.6348-5.0684h0.90821l1.6758 5.0684 1.1367-5.0684zm2.7715-1.0957h-1.2422v-1.1426h1.2422zm-0.0703 7.6406h-1.1016v-6.5449h1.1016zm5.5781-0.0586q-0.31054 0.082-0.67968 0.13476-0.36328 0.0527-0.65039 0.0527-1.002 0-1.5234-0.53906-0.52149-0.53907-0.52149-1.7285v-3.4805h-0.74414v-0.92578h0.74414v-1.8809h1.1016v1.8809h2.2734v0.92578h-2.2734v2.9824q0 0.51563 0.0234 0.8086 0.0234 0.28711 0.16407 0.53906 0.1289 0.23438 0.35156 0.3457 0.22851 0.10547 0.69141 0.10547 0.26953 0 0.5625-0.0762 0.29296-0.082 0.42187-0.13477h0.0586zm6.8027 0.0586h-1.1016v-3.7266q0-0.45117-0.0527-0.84375-0.0527-0.39844-0.19336-0.62109-0.14648-0.2461-0.42187-0.36328-0.27539-0.12305-0.71485-0.12305-0.45117 0-0.94336 0.22265-0.49218 0.22266-0.94336 0.56836v4.8867h-1.1016v-9.1172h1.1016v3.2988q0.51563-0.42773 1.0664-0.66797 0.55078-0.24023 1.1309-0.24023 1.0606 0 1.6172 0.63867t0.55664 1.8398z" fill="#e7e7e7" fill-opacity=".75" style="white-space:pre" aria-label="Made with"/></g></g></g></svg>',bq=`data:image/svg+xml;base64,${btoa(vq)}`,_q=i=>{self.phet=self.phet||{},self.phet.chipper=self.phet.chipper||{},self.phet.chipper.project=i.name,self.phet.chipper.version=i.version,self.phet.chipper.brand=i.brand??"made-with-scenerystack",self.phet.chipper.locale=i.locale??"en",self.phet.chipper.isDebugBuild=!1,self.phet.chipper.isSceneryStack=!0,self.phet.chipper.allowLocaleSwitching=i.allowLocaleSwitching??!0,self.phet.chipper.availableLocales=i.availableLocales||["en"],self.phet.chipper.strings={};for(const t of self.phet.chipper.availableLocales)self.phet.chipper.strings[t]={};self.phet.chipper.packageObject={name:i.name,version:i.version,phet:{simulation:!0,runnable:!0,supportedBrands:[i.brand??"made-with-scenerystack"],simFeatures:{colorProfiles:i.colorProfiles??["default"],supportsDynamicLocale:self.phet.chipper.allowLocaleSwitching&&i.supportsDynamicLocale!==!1,supportsInteractiveDescription:i.supportsInteractiveDescription??!0,supportsInteractiveHighlights:i.supportsInteractiveHighlights??!0,supportsVoicing:i.supportsVoicing??!1,supportsTier1Voicing:!1,supportsPanAndZoom:i.supportsPanAndZoom??!0,supportedRegionsAndCultures:i.supportedRegionsAndCultures||["usa"],supportsSound:i.supportsSound??!1}}},self.PHET_SPLASH_DATA_URI=i.splashDataURI,phet.chipper.queryParameters&&console.log("init() ran after other modules, e.g. initialize-globals")};_q({name:"Coriolis Force",version:"1.0.0",brand:"made-with-scenerystack",locale:"en",availableLocales:["en"],splashDataURI:bq,allowLocaleSwitching:!0});const Aq=",",wq=()=>{try{return localStorage.getItem("phetTeamMember")==="true"}catch{return!1}};function Ia(i,e){return i.hasOwnProperty(e)}const A1=i=>i.length===0||i.startsWith("?"),w1=(i,e,t,n,s)=>{if(!i)if(n.public)if(ua.addWarning(e,t,s),Ia(n,"defaultValue"))t=n.defaultValue;else{const r=Rc[n.type];Us(Ia(r,"defaultValue"),"Type must have a default value if the provided schema does not have one."),t=r.defaultValue}else Us(i,s);return t},ua={warnings:[],get:function(i,e){return this.getForString(i,e,self.location.search)},getAll:function(i){return{...this.getAllForString(i,self.location.search),SCHEMA_MAP:i}},getForString:function(i,e,t){if(!A1(t))throw new Error(`Query strings should be either the empty string or start with a "?": ${t}`);const n=e.private&&!wq()?[]:lx(i,t);hD(i,e);let s=uD(i,e,n);if(Ia(e,"validValues")){const a=e.validValues;s=w1(i2(s,a),i,s,e,`Invalid value supplied for key "${i}": ${s} is not a member of valid values: ${a.join(", ")}`)}else Ia(e,"isValidValue")&&(s=w1(e.isValidValue(s),i,s,e,`Invalid value supplied for key "${i}": ${s}`));let r=Rc[e.type].isValidValue(s);if(e.type==="array"&&Array.isArray(s)){let a=!0;for(let o=0;o<s.length;o++){const l=s[o];if(!Rc[e.elementSchema.type].isValidValue(l)){a=!1;break}if(Ia(e.elementSchema,"isValidValue")&&!e.elementSchema.isValidValue(l)){a=!1;break}if(Ia(e.elementSchema,"validValues")&&!i2(l,e.elementSchema.validValues)){a=!1;break}}r=r&&a}return s=w1(r,i,s,e,`Invalid value for type, key: ${i}`),s},getAllForString:function(i,e){const t={};for(const n in i)i.hasOwnProperty(n)&&(t[n]=this.getForString(n,i[n],e));return t},containsKey:function(i){return this.containsKeyForString(i,self.location.search)},containsKeyForString:function(i,e){if(!A1(e))throw new Error(`Query strings should be either the empty string or start with a "?": ${e}`);return lx(i,e).length>0},deepEquals:function(i,e){if(typeof i!=typeof e)return!1;if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return i===e;if(i===null&&e===null||i===void 0&&e===void 0)return!0;if(i===null&&e===void 0||i===void 0&&e===null)return!1;const t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;if(t.length===0)return i===e;for(let s=0;s<t.length;s++){if(t[s]!==n[s])return!1;const r=i[t[s]],a=e[t[s]];if(!ua.deepEquals(r,a))return!1}return!0},removeKeyValuePair:function(i,e){if(Us(typeof i=="string",`url should be string, but it was: ${typeof i}`),Us(typeof e=="string",`url should be string, but it was: ${typeof e}`),Us(A1(i),"queryString should be length 0 or begin with ?"),Us(e.length>0,"url should be a string with length > 0"),i.startsWith("?")){const t=[],s=i.substring(1).split("&");for(let r=0;r<s.length;r++){const a=s[r],o=a.split("=");decodeURIComponent(o[0])!==e&&t.push(a)}return t.length>0?`?${t.join("&")}`:""}else return i},removeKeyValuePairs:function(i,e){for(let t=0;t<e.length;t++)i=this.removeKeyValuePair(i,e[t]);return i},appendQueryString:function(i,e){if((e.startsWith("?")||e.startsWith("&"))&&(e=e.substring(1)),e.length===0)return i;const t=i.includes("?")?"&":"?";return i+t+e},appendQueryStringArray:function(i,e){for(let t=0;t<e.length;t++)i=this.appendQueryString(i,e[t]);return i},getQueryString:function(i){const e=i.indexOf("?");return e>=0?i.substring(e):"?"},addWarning:function(i,e,t){let n=!1;for(let s=0;s<this.warnings.length;s++){const r=this.warnings[s];if(i===r.key&&e===r.value&&t===r.message){n=!0;break}}n||(console.warn(t),this.warnings.push({key:i,value:e,message:t}))},hasWarning:function(i){let e=!1;for(let t=0;t<this.warnings.length&&!e;t++)e=this.warnings[t].key===i;return e},getQueryParametersFromString:function(i){return i.startsWith("?")?i.substring(1).split("&"):[]},getSingleQueryParameterString:function(i,e){const t=this.getQueryString(e),n=this.getQueryParametersFromString(t);for(let s=0;s<n.length;s++){const r=n[s],a=r.split("=");if(decodeURIComponent(a[0])===i)return r}return null}},lx=function(i,e){const t=[],n=e.slice(1).split("&");for(let s=0;s<n.length;s++){const r=n[s].split("="),a=r[0],o=r.slice(1).join("=");a===i&&(o?t.push(decodeURIComponent(o)):t.push(null))}return t},hD=function(i,e){const t=Rc[e.type];Us(e.hasOwnProperty("type"),`type field is required for key: ${i}`),Us(Rc.hasOwnProperty(e.type),`invalid type: ${e.type} for key: ${i}`),Ia(e,"parse")&&Us(typeof e.parse=="function",`parse must be a function for key: ${i}`),Us(!(e.hasOwnProperty("validValues")&&e.hasOwnProperty("isValidValue")),`validValues and isValidValue are mutually exclusive for key: ${i}`),Ia(e,"validValues")&&Us(Array.isArray(e.validValues),`isValidValue must be an array for key: ${i}`),Ia(e,"isValidValue")&&Us(typeof e.isValidValue=="function",`isValidValue must be a function for key: ${i}`),Ia(e,"defaultValue")&&Us(t.isValidValue(e.defaultValue),`defaultValue incorrect type: ${i}`),Ia(e,"validValues")&&e.validValues.forEach(n=>Us(t.isValidValue(n),`validValue incorrect type for key: ${i}`)),Ia(e,"defaultValue")&&Ia(e,"validValues")&&Us(i2(e.defaultValue,e.validValues),`defaultValue must be a member of validValues, for key: ${i}`),Ia(e,"public")&&e.public&&e.type!=="flag"&&Us(e.hasOwnProperty("defaultValue"),`defaultValue is required when public: true for key: ${i}`),Pq(i,e,t.required,t.optional),e.type==="array"&&Sq(i,e)},Sq=function(i,e){e.hasOwnProperty("separator")&&Us(typeof e.separator=="string"&&e.separator.length===1,`invalid separator: ${e.separator}, for key: ${i}`),Us(!e.elementSchema.hasOwnProperty("public"),"Array elements should not declare public; it comes from the array schema itself."),hD(`${i}.element`,e.elementSchema)},Pq=function(i,e,t,n){const s=Object.getOwnPropertyNames(e);t.forEach(a=>{Us(s.includes(a),`missing required property: ${a} for key: ${i}`)});const r=t.concat(n);s.forEach(a=>{Us(a==="type"||r.includes(a),`unsupported property: ${a} for key: ${i}`)})},uD=function(i,e,t){let n;return Us(t.length<=1,`query parameter cannot occur multiple times: ${i}`),e.type==="flag"?n=Rc[e.type].parse(i,e,t[0]):(Us(t[0]!==void 0||e.hasOwnProperty("defaultValue"),`missing required query parameter: ${i}`),t[0]===void 0?n=e.defaultValue:n=Rc[e.type].parse(i,e,t[0])),n},Tq=function(i,e,t){return t===null?!0:t===void 0?!1:t},xq=function(i,e,t){return t==="true"?!0:t==="false"?!1:t},Eq=function(i,e,t){const n=Number(t);return t===null||isNaN(n)?t:n},Vq=function(i,e,t){return t},kq=function(i,e,t){let n;return t===null?n=[]:n=t.split(e.separator||Aq).map(s=>uD(i,e.elementSchema,[s])),n},Cq=function(i,e,t){return e.parse(t)},i2=function(i,e){let t=!1;for(let n=0;n<e.length&&!t;n++)t=ua.deepEquals(e[n],i);return t},Us=function(i,e){if(!i)throw console&&console.log&&console.log(e),new Error(`Query String Machine Assertion failed: ${e}`)},Rc={flag:{required:[],optional:["private","public"],parse:Tq,isValidValue:i=>i===!0||i===!1,defaultValue:!0},boolean:{required:[],optional:["defaultValue","private","public"],parse:xq,isValidValue:i=>i===!0||i===!1},number:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],parse:Eq,isValidValue:i=>typeof i=="number"&&!isNaN(i)},string:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],parse:Vq,isValidValue:i=>i===null||typeof i=="string"},array:{required:["elementSchema"],optional:["defaultValue","validValues","isValidValue","separator","validValues","private","public"],parse:kq,isValidValue:i=>Array.isArray(i)||i===null},custom:{required:["parse"],optional:["defaultValue","validValues","isValidValue","private","public"],parse:Cq,isValidValue:()=>!0}},Dq=1/4*1.042,Bu="http://www.w3.org/2000/svg",cD="splash-container",Iq=25,Lq=.435;let S1=0,P1=0;const n2=273,_f="3";function Mq(i,e){S1===0&&P1===0&&(S1=e.width,P1=e.height);const t=S1,n=P1,s=self.innerHeight,r=self.innerWidth,a=r/t,o=s/n,l=Math.min(a,o)*Dq,h=Math.round((r-t*l)/2),c=Math.round((s-n*l)*Lq),f=`translate(${h}px, ${c}px) scale3d(${l}, ${l}, 1)`;i.style["-webkit-transform"]=f,i.style["-ms-transform"]=f,i.style.transform=f}const qa=document.createElement("div");qa.style.position="fixed";qa.style.left="0px";qa.style.top="0px";qa.style.width="100%";qa.style.height="100%";qa.style.backgroundColor="black";qa.style.zIndex=1e4;qa.style["-webkit-transform-origin"]="0 0";qa.style["-ms-transform-origin"]="0 0";qa.style["transform-origin"]="0 0";const pl=document.createElement("div");pl.id=cD;pl.style.position="fixed";pl.style.left="0px";pl.style.top="0px";pl.style["-webkit-transform-origin"]="0 0";pl.style["-ms-transform-origin"]="0 0";pl.style["transform-origin"]="0 0";const Bc=document.createElement("img");Bc.style.display="block";Bc.alt="";const Bm=function(){Mq(pl,Bc)};Bc.onload=function(){Bm(),self.addEventListener("resize",Bm),self.addEventListener("load",Bm);const i=document.getElementById(cD);i&&i.parentNode.removeChild(i),qa.appendChild(pl),document.body.appendChild(qa)};const od=document.createElementNS(Bu,"svg");od.style.marginTop=`${Iq}px`;od.setAttribute("width",275);const Gw=document.createElementNS(Bu,"defs");od.appendChild(Gw);const Af=document.createElementNS(Bu,"linearGradient");Af.id="phetioGradient";Af.setAttribute("gradientTransform","rotate(10)");Gw.appendChild(Af);function Ww(i,e){const t=document.createElementNS(Bu,"stop");return t.setAttribute("offset",i),t.setAttribute("stop-color",e),t}Af.appendChild(Ww("0%","#992995"));Af.appendChild(Ww("50%","#e01e5a"));Af.appendChild(Ww("100%","#f15a24"));const Kw=document.createElementNS(Bu,"clipPath");Kw.id="progressBarClip";const qu=document.createElementNS(Bu,"rect");Kw.appendChild(qu);qu.id="progressBarClipArea";qu.setAttribute("x","1");qu.setAttribute("y","1");qu.setAttribute("width","0");qu.setAttribute("height","10");qu.setAttribute("rx",_f);qu.setAttribute("ry",_f);Gw.appendChild(Kw);od.style["margin-left"]="-1px";const fl=document.createElementNS(Bu,"rect");fl.setAttribute("id","progressBarBackground");fl.setAttribute("x","1");fl.setAttribute("y","1");fl.setAttribute("width",`${n2}px`);fl.setAttribute("height","10");fl.setAttribute("rx",_f);fl.setAttribute("ry",_f);fl.setAttribute("style","stroke: white;stroke-width:1");const cl=document.createElementNS(Bu,"rect");cl.setAttribute("id","progressBarForeground");cl.setAttribute("x","1");cl.setAttribute("y","1");cl.setAttribute("width","0");cl.setAttribute("height","10");cl.setAttribute("rx",_f);cl.setAttribute("ry",_f);cl.setAttribute("style","fill:#6acef5;");od.appendChild(fl);od.appendChild(cl);const Oq=setInterval(()=>{fl.style["stroke-width"]=(Math.sin(Date.now()/1e3*4)*.55+1).toFixed(2)},16),Nq=function(i){return clearInterval(Oq),fl.style["stroke-width"]=1,i==="phet-io"&&(cl.setAttribute("style","fill:url(#phetioGradient); clip-path:url(#progressBarClip);"),cl.setAttribute("width",`${n2}px`)),n2};pl.appendChild(Bc);pl.appendChild(od);if(self.PHET_SPLASH_DATA_URI)Bc.src=self.PHET_SPLASH_DATA_URI;else{const i=location.search.match(/brand=([^&]+)/),e=i?decodeURIComponent(i[1]):"adapted-from-phet";Bc.src=`../brand/${e}/images/splash.svg`}const dD=i=>i.preventDefault(),pD=["wheel","touchstart","gesturestart"];pD.forEach(i=>self.addEventListener(i,dD,{passive:!1}));const Rq={dispose:function(){self.PHET_SPLASH_DATA_URI&&delete self.PHET_SPLASH_DATA_URI,self.removeEventListener("resize",Bm),self.removeEventListener("load",Bm),pD.forEach(i=>self.removeEventListener(i,dD)),document.body.contains(qa)&&document.body.removeChild(qa),delete self.phetSplashScreen}};var $s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Bq(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),t}var Jy={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Jy.exports;(function(i,e){(function(){var t,n="4.17.21",s=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",h=500,c="__lodash_placeholder__",f=1,g=2,v=4,A=1,P=2,w=1,T=2,D=4,M=8,B=16,O=32,x=64,Z=128,de=256,$=512,me=30,ue="...",Se=800,Te=16,Re=1,We=2,Le=3,lt=1/0,st=9007199254740991,De=17976931348623157e292,et=NaN,Ke=4294967295,Ct=Ke-1,dt=Ke>>>1,Et=[["ary",Z],["bind",w],["bindKey",T],["curry",M],["curryRight",B],["flip",$],["partial",O],["partialRight",x],["rearg",de]],ut="[object Arguments]",Wt="[object Array]",Nt="[object AsyncFunction]",ci="[object Boolean]",Yt="[object Date]",Pe="[object DOMException]",pe="[object Error]",bt="[object Function]",wt="[object GeneratorFunction]",Gt="[object Map]",Ft="[object Number]",V="[object Null]",te="[object Object]",fe="[object Promise]",_e="[object Proxy]",ke="[object RegExp]",$e="[object Set]",Xe="[object String]",rt="[object Symbol]",Dn="[object Undefined]",Xt="[object WeakMap]",u="[object WeakSet]",d="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",S="[object Float64Array]",k="[object Int8Array]",I="[object Int16Array]",L="[object Int32Array]",N="[object Uint8Array]",q="[object Uint8ClampedArray]",W="[object Uint16Array]",K="[object Uint32Array]",G=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,ae=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,se=/[&<>"']/g,Y=RegExp(Q.source),ee=RegExp(se.source),F=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,re=/<%=([\s\S]+?)%>/g,ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,ye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,we=/[\\^$.*+?()[\]{}|]/g,Ve=RegExp(we.source),Be=/^\s+/,z=/\s/,j=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,xe=/,? & /,Ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ue=/[()=,{}\[\]\/\s]/,je=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yt=/\w*$/,Vt=/^[-+]0x[0-9a-f]+$/i,it=/^0b[01]+$/i,at=/^\[object .+?Constructor\]$/,Tt=/^0o[0-7]+$/i,At=/^(?:0|[1-9]\d*)$/,ft=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rt=/($^)/,Jt=/['\n\r\u2028\u2029\\]/g,hi="\\ud800-\\udfff",si="\\u0300-\\u036f",di="\\ufe20-\\ufe2f",$t="\\u20d0-\\u20ff",Nn=si+di+$t,Mi="\\u2700-\\u27bf",cs="a-z\\xdf-\\xf6\\xf8-\\xff",Bt="\\xac\\xb1\\xd7\\xf7",ls="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ds="\\u2000-\\u206f",Ds=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pr="A-Z\\xc0-\\xd6\\xd8-\\xde",Aa="\\ufe0e\\ufe0f",qr=Bt+ls+ds+Ds,Tr="['’]",ur="["+hi+"]",yr="["+qr+"]",zr="["+Nn+"]",Vs="\\d+",cr="["+Mi+"]",Uu="["+cs+"]",Zh="[^"+hi+qr+Vs+Mi+cs+Pr+"]",$h="\\ud83c[\\udffb-\\udfff]",bd="(?:"+zr+"|"+$h+")",Gu="[^"+hi+"]",ml="(?:\\ud83c[\\udde6-\\uddff]){2}",uo="[\\ud800-\\udbff][\\udc00-\\udfff]",wa="["+Pr+"]",gl="\\u200d",co="(?:"+Uu+"|"+Zh+")",Sa="(?:"+wa+"|"+Zh+")",Oi="(?:"+Tr+"(?:d|ll|m|re|s|t|ve))?",Fr="(?:"+Tr+"(?:D|LL|M|RE|S|T|VE))?",ia=bd+"?",Hr="["+Aa+"]?",No="(?:"+gl+"(?:"+[Gu,ml,uo].join("|")+")"+Hr+ia+")*",Wu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ku="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",eu=Hr+ia+No,y="(?:"+[cr,ml,uo].join("|")+")"+eu,C="(?:"+[Gu+zr+"?",zr,ml,uo,ur].join("|")+")",X=RegExp(Tr,"g"),oe=RegExp(zr,"g"),Ee=RegExp($h+"(?="+$h+")|"+C+eu,"g"),tt=RegExp([wa+"?"+Uu+"+"+Oi+"(?="+[yr,wa,"$"].join("|")+")",Sa+"+"+Fr+"(?="+[yr,wa+co,"$"].join("|")+")",wa+"?"+co+"+"+Oi,wa+"+"+Fr,Ku,Wu,Vs,y].join("|"),"g"),ot=RegExp("["+gl+hi+Nn+Aa+"]"),Ht=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wi=-1,ri={};ri[_]=ri[S]=ri[k]=ri[I]=ri[L]=ri[N]=ri[q]=ri[W]=ri[K]=!0,ri[ut]=ri[Wt]=ri[d]=ri[ci]=ri[m]=ri[Yt]=ri[pe]=ri[bt]=ri[Gt]=ri[Ft]=ri[te]=ri[ke]=ri[$e]=ri[Xe]=ri[Xt]=!1;var Hi={};Hi[ut]=Hi[Wt]=Hi[d]=Hi[m]=Hi[ci]=Hi[Yt]=Hi[_]=Hi[S]=Hi[k]=Hi[I]=Hi[L]=Hi[Gt]=Hi[Ft]=Hi[te]=Hi[ke]=Hi[$e]=Hi[Xe]=Hi[rt]=Hi[N]=Hi[q]=Hi[W]=Hi[K]=!0,Hi[pe]=Hi[bt]=Hi[Xt]=!1;var Ro={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ah={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},po={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yl=parseFloat,vl=parseInt,Uf=typeof $s=="object"&&$s&&$s.Object===Object&&$s,_d=typeof self=="object"&&self&&self.Object===Object&&self,dr=Uf||_d||Function("return this")(),Gf=e&&!e.nodeType&&e,bl=Gf&&!0&&i&&!i.nodeType&&i,b0=bl&&bl.exports===Gf,Ad=b0&&Uf.process,Pa=function(){try{var Ye=bl&&bl.require&&bl.require("util").types;return Ye||Ad&&Ad.binding&&Ad.binding("util")}catch{}}(),Yu=Pa&&Pa.isArrayBuffer,oh=Pa&&Pa.isDate,ju=Pa&&Pa.isMap,Wf=Pa&&Pa.isRegExp,_l=Pa&&Pa.isSet,Kf=Pa&&Pa.isTypedArray;function Un(Ye,vt,ht){switch(ht.length){case 0:return Ye.call(vt);case 1:return Ye.call(vt,ht[0]);case 2:return Ye.call(vt,ht[0],ht[1]);case 3:return Ye.call(vt,ht[0],ht[1],ht[2])}return Ye.apply(vt,ht)}function __(Ye,vt,ht,be){for(var Ie=-1,Ze=Ye==null?0:Ye.length;++Ie<Ze;){var mt=Ye[Ie];vt(be,mt,ht(mt),Ye)}return be}function Ur(Ye,vt){for(var ht=-1,be=Ye==null?0:Ye.length;++ht<be&&vt(Ye[ht],ht,Ye)!==!1;);return Ye}function tu(Ye,vt){for(var ht=Ye==null?0:Ye.length;ht--&&vt(Ye[ht],ht,Ye)!==!1;);return Ye}function _0(Ye,vt){for(var ht=-1,be=Ye==null?0:Ye.length;++ht<be;)if(!vt(Ye[ht],ht,Ye))return!1;return!0}function Al(Ye,vt){for(var ht=-1,be=Ye==null?0:Ye.length,Ie=0,Ze=[];++ht<be;){var mt=Ye[ht];vt(mt,ht,Ye)&&(Ze[Ie++]=mt)}return Ze}function wd(Ye,vt){var ht=Ye==null?0:Ye.length;return!!ht&&hh(Ye,vt,0)>-1}function Yf(Ye,vt,ht){for(var be=-1,Ie=Ye==null?0:Ye.length;++be<Ie;)if(ht(vt,Ye[be]))return!0;return!1}function As(Ye,vt){for(var ht=-1,be=Ye==null?0:Ye.length,Ie=Array(be);++ht<be;)Ie[ht]=vt(Ye[ht],ht,Ye);return Ie}function wl(Ye,vt){for(var ht=-1,be=vt.length,Ie=Ye.length;++ht<be;)Ye[Ie+ht]=vt[ht];return Ye}function jf(Ye,vt,ht,be){var Ie=-1,Ze=Ye==null?0:Ye.length;for(be&&Ze&&(ht=Ye[++Ie]);++Ie<Ze;)ht=vt(ht,Ye[Ie],Ie,Ye);return ht}function A_(Ye,vt,ht,be){var Ie=Ye==null?0:Ye.length;for(be&&Ie&&(ht=Ye[--Ie]);Ie--;)ht=vt(ht,Ye[Ie],Ie,Ye);return ht}function Xf(Ye,vt){for(var ht=-1,be=Ye==null?0:Ye.length;++ht<be;)if(vt(Ye[ht],ht,Ye))return!0;return!1}var lh=Pd("length");function er(Ye){return Ye.split("")}function A0(Ye){return Ye.match(Ce)||[]}function iu(Ye,vt,ht){var be;return ht(Ye,function(Ie,Ze,mt){if(vt(Ie,Ze,mt))return be=Ze,!1}),be}function Sd(Ye,vt,ht,be){for(var Ie=Ye.length,Ze=ht+(be?1:-1);be?Ze--:++Ze<Ie;)if(vt(Ye[Ze],Ze,Ye))return Ze;return-1}function hh(Ye,vt,ht){return vt===vt?Zf(Ye,vt,ht):Sd(Ye,Xu,ht)}function w_(Ye,vt,ht,be){for(var Ie=ht-1,Ze=Ye.length;++Ie<Ze;)if(be(Ye[Ie],vt))return Ie;return-1}function Xu(Ye){return Ye!==Ye}function uh(Ye,vt){var ht=Ye==null?0:Ye.length;return ht?xd(Ye,vt)/ht:et}function Pd(Ye){return function(vt){return vt==null?t:vt[Ye]}}function Td(Ye){return function(vt){return Ye==null?t:Ye[vt]}}function Pn(Ye,vt,ht,be,Ie){return Ie(Ye,function(Ze,mt,ei){ht=be?(be=!1,Ze):vt(ht,Ze,mt,ei)}),ht}function Qf(Ye,vt){var ht=Ye.length;for(Ye.sort(vt);ht--;)Ye[ht]=Ye[ht].value;return Ye}function xd(Ye,vt){for(var ht,be=-1,Ie=Ye.length;++be<Ie;){var Ze=vt(Ye[be]);Ze!==t&&(ht=ht===t?Ze:ht+Ze)}return ht}function Ed(Ye,vt){for(var ht=-1,be=Array(Ye);++ht<Ye;)be[ht]=vt(ht);return be}function pr(Ye,vt){return As(vt,function(ht){return[ht,Ye[ht]]})}function qo(Ye){return Ye&&Ye.slice(0,Cd(Ye)+1).replace(Be,"")}function Pi(Ye){return function(vt){return Ye(vt)}}function Qu(Ye,vt){return As(vt,function(ht){return Ye[ht]})}function is(Ye,vt){return Ye.has(vt)}function Ju(Ye,vt){for(var ht=-1,be=Ye.length;++ht<be&&hh(vt,Ye[ht],0)>-1;);return ht}function Sl(Ye,vt){for(var ht=Ye.length;ht--&&hh(vt,Ye[ht],0)>-1;);return ht}function qs(Ye,vt){for(var ht=Ye.length,be=0;ht--;)Ye[ht]===vt&&++be;return be}var zo=Td(Ro),Vd=Td(ah);function S_(Ye){return"\\"+po[Ye]}function Jf(Ye,vt){return Ye==null?t:Ye[vt]}function nu(Ye){return ot.test(Ye)}function Ga(Ye){return Ht.test(Ye)}function Zu(Ye){for(var vt,ht=[];!(vt=Ye.next()).done;)ht.push(vt.value);return ht}function ch(Ye){var vt=-1,ht=Array(Ye.size);return Ye.forEach(function(be,Ie){ht[++vt]=[Ie,be]}),ht}function kd(Ye,vt){return function(ht){return Ye(vt(ht))}}function Fo(Ye,vt){for(var ht=-1,be=Ye.length,Ie=0,Ze=[];++ht<be;){var mt=Ye[ht];(mt===vt||mt===c)&&(Ye[ht]=c,Ze[Ie++]=ht)}return Ze}function $u(Ye){var vt=-1,ht=Array(Ye.size);return Ye.forEach(function(be){ht[++vt]=be}),ht}function vr(Ye){var vt=-1,ht=Array(Ye.size);return Ye.forEach(function(be){ht[++vt]=[be,be]}),ht}function Zf(Ye,vt,ht){for(var be=ht-1,Ie=Ye.length;++be<Ie;)if(Ye[be]===vt)return be;return-1}function P_(Ye,vt,ht){for(var be=ht+1;be--;)if(Ye[be]===vt)return be;return be}function su(Ye){return nu(Ye)?ec(Ye):lh(Ye)}function na(Ye){return nu(Ye)?$f(Ye):er(Ye)}function Cd(Ye){for(var vt=Ye.length;vt--&&z.test(Ye.charAt(vt)););return vt}var T_=Td(Bo);function ec(Ye){for(var vt=Ee.lastIndex=0;Ee.test(Ye);)++vt;return vt}function $f(Ye){return Ye.match(Ee)||[]}function x_(Ye){return Ye.match(tt)||[]}var E_=function Ye(vt){vt=vt==null?dr:dh.defaults(dr.Object(),vt,dh.pick(dr,Kt));var ht=vt.Array,be=vt.Date,Ie=vt.Error,Ze=vt.Function,mt=vt.Math,ei=vt.Object,Ci=vt.RegExp,Ui=vt.String,Ji=vt.TypeError,Gr=ht.prototype,ph=Ze.prototype,Pl=ei.prototype,fh=vt["__core-js_shared__"],Dd=ph.toString,ns=Pl.hasOwnProperty,pO=0,bP=function(){var p=/[^.]+$/.exec(fh&&fh.keys&&fh.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),w0=Pl.toString,fO=Dd.call(ei),mO=dr._,gO=Ci("^"+Dd.call(ns).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S0=b0?vt.Buffer:t,ru=vt.Symbol,P0=vt.Uint8Array,_P=S0?S0.allocUnsafe:t,T0=kd(ei.getPrototypeOf,ei),AP=ei.create,wP=Pl.propertyIsEnumerable,x0=Gr.splice,SP=ru?ru.isConcatSpreadable:t,em=ru?ru.iterator:t,tc=ru?ru.toStringTag:t,E0=function(){try{var p=ac(ei,"defineProperty");return p({},"",{}),p}catch{}}(),yO=vt.clearTimeout!==dr.clearTimeout&&vt.clearTimeout,vO=be&&be.now!==dr.Date.now&&be.now,bO=vt.setTimeout!==dr.setTimeout&&vt.setTimeout,V0=mt.ceil,k0=mt.floor,V_=ei.getOwnPropertySymbols,_O=S0?S0.isBuffer:t,PP=vt.isFinite,AO=Gr.join,wO=kd(ei.keys,ei),fr=mt.max,Wr=mt.min,SO=be.now,PO=vt.parseInt,TP=mt.random,TO=Gr.reverse,k_=ac(vt,"DataView"),tm=ac(vt,"Map"),C_=ac(vt,"Promise"),Id=ac(vt,"Set"),im=ac(vt,"WeakMap"),nm=ac(ei,"create"),C0=im&&new im,Ld={},xO=oc(k_),EO=oc(tm),VO=oc(C_),kO=oc(Id),CO=oc(im),D0=ru?ru.prototype:t,sm=D0?D0.valueOf:t,xP=D0?D0.toString:t;function ge(p){if(zs(p)&&!sn(p)&&!(p instanceof Tn)){if(p instanceof fo)return p;if(ns.call(p,"__wrapped__"))return ET(p)}return new fo(p)}var Md=function(){function p(){}return function(b){if(!Is(b))return{};if(AP)return AP(b);p.prototype=b;var E=new p;return p.prototype=t,E}}();function I0(){}function fo(p,b){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=t}ge.templateSettings={escape:F,evaluate:J,interpolate:re,variable:"",imports:{_:ge}},ge.prototype=I0.prototype,ge.prototype.constructor=ge,fo.prototype=Md(I0.prototype),fo.prototype.constructor=fo;function Tn(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ke,this.__views__=[]}function DO(){var p=new Tn(this.__wrapped__);return p.__actions__=Ta(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Ta(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Ta(this.__views__),p}function IO(){if(this.__filtered__){var p=new Tn(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function LO(){var p=this.__wrapped__.value(),b=this.__dir__,E=sn(p),H=b<0,he=E?p.length:0,ve=WN(0,he,this.__views__),Me=ve.start,ze=ve.end,Je=ze-Me,St=H?ze:Me-1,Pt=this.__iteratees__,Lt=Pt.length,ti=0,yi=Wr(Je,this.__takeCount__);if(!E||!H&&he==Je&&yi==Je)return QP(p,this.__actions__);var Ni=[];e:for(;Je--&&ti<yi;){St+=b;for(var dn=-1,Ri=p[St];++dn<Lt;){var An=Pt[dn],In=An.iteratee,Ya=An.type,aa=In(Ri);if(Ya==We)Ri=aa;else if(!aa){if(Ya==Re)continue e;break e}}Ni[ti++]=Ri}return Ni}Tn.prototype=Md(I0.prototype),Tn.prototype.constructor=Tn;function ic(p){var b=-1,E=p==null?0:p.length;for(this.clear();++b<E;){var H=p[b];this.set(H[0],H[1])}}function MO(){this.__data__=nm?nm(null):{},this.size=0}function OO(p){var b=this.has(p)&&delete this.__data__[p];return this.size-=b?1:0,b}function NO(p){var b=this.__data__;if(nm){var E=b[p];return E===l?t:E}return ns.call(b,p)?b[p]:t}function RO(p){var b=this.__data__;return nm?b[p]!==t:ns.call(b,p)}function BO(p,b){var E=this.__data__;return this.size+=this.has(p)?0:1,E[p]=nm&&b===t?l:b,this}ic.prototype.clear=MO,ic.prototype.delete=OO,ic.prototype.get=NO,ic.prototype.has=RO,ic.prototype.set=BO;function mh(p){var b=-1,E=p==null?0:p.length;for(this.clear();++b<E;){var H=p[b];this.set(H[0],H[1])}}function qO(){this.__data__=[],this.size=0}function zO(p){var b=this.__data__,E=L0(b,p);if(E<0)return!1;var H=b.length-1;return E==H?b.pop():x0.call(b,E,1),--this.size,!0}function FO(p){var b=this.__data__,E=L0(b,p);return E<0?t:b[E][1]}function HO(p){return L0(this.__data__,p)>-1}function UO(p,b){var E=this.__data__,H=L0(E,p);return H<0?(++this.size,E.push([p,b])):E[H][1]=b,this}mh.prototype.clear=qO,mh.prototype.delete=zO,mh.prototype.get=FO,mh.prototype.has=HO,mh.prototype.set=UO;function gh(p){var b=-1,E=p==null?0:p.length;for(this.clear();++b<E;){var H=p[b];this.set(H[0],H[1])}}function GO(){this.size=0,this.__data__={hash:new ic,map:new(tm||mh),string:new ic}}function WO(p){var b=W0(this,p).delete(p);return this.size-=b?1:0,b}function KO(p){return W0(this,p).get(p)}function YO(p){return W0(this,p).has(p)}function jO(p,b){var E=W0(this,p),H=E.size;return E.set(p,b),this.size+=E.size==H?0:1,this}gh.prototype.clear=GO,gh.prototype.delete=WO,gh.prototype.get=KO,gh.prototype.has=YO,gh.prototype.set=jO;function nc(p){var b=-1,E=p==null?0:p.length;for(this.__data__=new gh;++b<E;)this.add(p[b])}function XO(p){return this.__data__.set(p,l),this}function QO(p){return this.__data__.has(p)}nc.prototype.add=nc.prototype.push=XO,nc.prototype.has=QO;function Ho(p){var b=this.__data__=new mh(p);this.size=b.size}function JO(){this.__data__=new mh,this.size=0}function ZO(p){var b=this.__data__,E=b.delete(p);return this.size=b.size,E}function $O(p){return this.__data__.get(p)}function eN(p){return this.__data__.has(p)}function tN(p,b){var E=this.__data__;if(E instanceof mh){var H=E.__data__;if(!tm||H.length<s-1)return H.push([p,b]),this.size=++E.size,this;E=this.__data__=new gh(H)}return E.set(p,b),this.size=E.size,this}Ho.prototype.clear=JO,Ho.prototype.delete=ZO,Ho.prototype.get=$O,Ho.prototype.has=eN,Ho.prototype.set=tN;function EP(p,b){var E=sn(p),H=!E&&lc(p),he=!E&&!H&&uu(p),ve=!E&&!H&&!he&&Bd(p),Me=E||H||he||ve,ze=Me?Ed(p.length,Ui):[],Je=ze.length;for(var St in p)(b||ns.call(p,St))&&!(Me&&(St=="length"||he&&(St=="offset"||St=="parent")||ve&&(St=="buffer"||St=="byteLength"||St=="byteOffset")||_h(St,Je)))&&ze.push(St);return ze}function VP(p){var b=p.length;return b?p[F_(0,b-1)]:t}function iN(p,b){return K0(Ta(p),sc(b,0,p.length))}function nN(p){return K0(Ta(p))}function D_(p,b,E){(E!==t&&!Uo(p[b],E)||E===t&&!(b in p))&&yh(p,b,E)}function rm(p,b,E){var H=p[b];(!(ns.call(p,b)&&Uo(H,E))||E===t&&!(b in p))&&yh(p,b,E)}function L0(p,b){for(var E=p.length;E--;)if(Uo(p[E][0],b))return E;return-1}function sN(p,b,E,H){return au(p,function(he,ve,Me){b(H,he,E(he),Me)}),H}function kP(p,b){return p&&xl(b,br(b),p)}function rN(p,b){return p&&xl(b,Ea(b),p)}function yh(p,b,E){b=="__proto__"&&E0?E0(p,b,{configurable:!0,enumerable:!0,value:E,writable:!0}):p[b]=E}function I_(p,b){for(var E=-1,H=b.length,he=ht(H),ve=p==null;++E<H;)he[E]=ve?t:d1(p,b[E]);return he}function sc(p,b,E){return p===p&&(E!==t&&(p=p<=E?p:E),b!==t&&(p=p>=b?p:b)),p}function mo(p,b,E,H,he,ve){var Me,ze=b&f,Je=b&g,St=b&v;if(E&&(Me=he?E(p,H,he,ve):E(p)),Me!==t)return Me;if(!Is(p))return p;var Pt=sn(p);if(Pt){if(Me=YN(p),!ze)return Ta(p,Me)}else{var Lt=Kr(p),ti=Lt==bt||Lt==wt;if(uu(p))return $P(p,ze);if(Lt==te||Lt==ut||ti&&!he){if(Me=Je||ti?{}:vT(p),!ze)return Je?NN(p,rN(Me,p)):ON(p,kP(Me,p))}else{if(!Hi[Lt])return he?p:{};Me=jN(p,Lt,ze)}}ve||(ve=new Ho);var yi=ve.get(p);if(yi)return yi;ve.set(p,Me),YT(p)?p.forEach(function(Ri){Me.add(mo(Ri,b,E,Ri,p,ve))}):WT(p)&&p.forEach(function(Ri,An){Me.set(An,mo(Ri,b,E,An,p,ve))});var Ni=St?Je?Z_:J_:Je?Ea:br,dn=Pt?t:Ni(p);return Ur(dn||p,function(Ri,An){dn&&(An=Ri,Ri=p[An]),rm(Me,An,mo(Ri,b,E,An,p,ve))}),Me}function aN(p){var b=br(p);return function(E){return CP(E,p,b)}}function CP(p,b,E){var H=E.length;if(p==null)return!H;for(p=ei(p);H--;){var he=E[H],ve=b[he],Me=p[he];if(Me===t&&!(he in p)||!ve(Me))return!1}return!0}function DP(p,b,E){if(typeof p!="function")throw new Ji(a);return dm(function(){p.apply(t,E)},b)}function am(p,b,E,H){var he=-1,ve=wd,Me=!0,ze=p.length,Je=[],St=b.length;if(!ze)return Je;E&&(b=As(b,Pi(E))),H?(ve=Yf,Me=!1):b.length>=s&&(ve=is,Me=!1,b=new nc(b));e:for(;++he<ze;){var Pt=p[he],Lt=E==null?Pt:E(Pt);if(Pt=H||Pt!==0?Pt:0,Me&&Lt===Lt){for(var ti=St;ti--;)if(b[ti]===Lt)continue e;Je.push(Pt)}else ve(b,Lt,H)||Je.push(Pt)}return Je}var au=sT(Tl),IP=sT(M_,!0);function oN(p,b){var E=!0;return au(p,function(H,he,ve){return E=!!b(H,he,ve),E}),E}function M0(p,b,E){for(var H=-1,he=p.length;++H<he;){var ve=p[H],Me=b(ve);if(Me!=null&&(ze===t?Me===Me&&!Ka(Me):E(Me,ze)))var ze=Me,Je=ve}return Je}function lN(p,b,E,H){var he=p.length;for(E=ln(E),E<0&&(E=-E>he?0:he+E),H=H===t||H>he?he:ln(H),H<0&&(H+=he),H=E>H?0:XT(H);E<H;)p[E++]=b;return p}function LP(p,b){var E=[];return au(p,function(H,he,ve){b(H,he,ve)&&E.push(H)}),E}function xr(p,b,E,H,he){var ve=-1,Me=p.length;for(E||(E=QN),he||(he=[]);++ve<Me;){var ze=p[ve];b>0&&E(ze)?b>1?xr(ze,b-1,E,H,he):wl(he,ze):H||(he[he.length]=ze)}return he}var L_=rT(),MP=rT(!0);function Tl(p,b){return p&&L_(p,b,br)}function M_(p,b){return p&&MP(p,b,br)}function O0(p,b){return Al(b,function(E){return Ah(p[E])})}function rc(p,b){b=lu(b,p);for(var E=0,H=b.length;p!=null&&E<H;)p=p[El(b[E++])];return E&&E==H?p:t}function OP(p,b,E){var H=b(p);return sn(p)?H:wl(H,E(p))}function sa(p){return p==null?p===t?Dn:V:tc&&tc in ei(p)?GN(p):nR(p)}function O_(p,b){return p>b}function hN(p,b){return p!=null&&ns.call(p,b)}function uN(p,b){return p!=null&&b in ei(p)}function cN(p,b,E){return p>=Wr(b,E)&&p<fr(b,E)}function N_(p,b,E){for(var H=E?Yf:wd,he=p[0].length,ve=p.length,Me=ve,ze=ht(ve),Je=1/0,St=[];Me--;){var Pt=p[Me];Me&&b&&(Pt=As(Pt,Pi(b))),Je=Wr(Pt.length,Je),ze[Me]=!E&&(b||he>=120&&Pt.length>=120)?new nc(Me&&Pt):t}Pt=p[0];var Lt=-1,ti=ze[0];e:for(;++Lt<he&&St.length<Je;){var yi=Pt[Lt],Ni=b?b(yi):yi;if(yi=E||yi!==0?yi:0,!(ti?is(ti,Ni):H(St,Ni,E))){for(Me=ve;--Me;){var dn=ze[Me];if(!(dn?is(dn,Ni):H(p[Me],Ni,E)))continue e}ti&&ti.push(Ni),St.push(yi)}}return St}function dN(p,b,E,H){return Tl(p,function(he,ve,Me){b(H,E(he),ve,Me)}),H}function om(p,b,E){b=lu(b,p),p=wT(p,b);var H=p==null?p:p[El(yo(b))];return H==null?t:Un(H,p,E)}function NP(p){return zs(p)&&sa(p)==ut}function pN(p){return zs(p)&&sa(p)==d}function fN(p){return zs(p)&&sa(p)==Yt}function lm(p,b,E,H,he){return p===b?!0:p==null||b==null||!zs(p)&&!zs(b)?p!==p&&b!==b:mN(p,b,E,H,lm,he)}function mN(p,b,E,H,he,ve){var Me=sn(p),ze=sn(b),Je=Me?Wt:Kr(p),St=ze?Wt:Kr(b);Je=Je==ut?te:Je,St=St==ut?te:St;var Pt=Je==te,Lt=St==te,ti=Je==St;if(ti&&uu(p)){if(!uu(b))return!1;Me=!0,Pt=!1}if(ti&&!Pt)return ve||(ve=new Ho),Me||Bd(p)?mT(p,b,E,H,he,ve):HN(p,b,Je,E,H,he,ve);if(!(E&A)){var yi=Pt&&ns.call(p,"__wrapped__"),Ni=Lt&&ns.call(b,"__wrapped__");if(yi||Ni){var dn=yi?p.value():p,Ri=Ni?b.value():b;return ve||(ve=new Ho),he(dn,Ri,E,H,ve)}}return ti?(ve||(ve=new Ho),UN(p,b,E,H,he,ve)):!1}function gN(p){return zs(p)&&Kr(p)==Gt}function R_(p,b,E,H){var he=E.length,ve=he,Me=!H;if(p==null)return!ve;for(p=ei(p);he--;){var ze=E[he];if(Me&&ze[2]?ze[1]!==p[ze[0]]:!(ze[0]in p))return!1}for(;++he<ve;){ze=E[he];var Je=ze[0],St=p[Je],Pt=ze[1];if(Me&&ze[2]){if(St===t&&!(Je in p))return!1}else{var Lt=new Ho;if(H)var ti=H(St,Pt,Je,p,b,Lt);if(!(ti===t?lm(Pt,St,A|P,H,Lt):ti))return!1}}return!0}function RP(p){if(!Is(p)||ZN(p))return!1;var b=Ah(p)?gO:at;return b.test(oc(p))}function yN(p){return zs(p)&&sa(p)==ke}function vN(p){return zs(p)&&Kr(p)==$e}function bN(p){return zs(p)&&Z0(p.length)&&!!ri[sa(p)]}function BP(p){return typeof p=="function"?p:p==null?Va:typeof p=="object"?sn(p)?FP(p[0],p[1]):zP(p):ax(p)}function B_(p){if(!cm(p))return wO(p);var b=[];for(var E in ei(p))ns.call(p,E)&&E!="constructor"&&b.push(E);return b}function _N(p){if(!Is(p))return iR(p);var b=cm(p),E=[];for(var H in p)H=="constructor"&&(b||!ns.call(p,H))||E.push(H);return E}function q_(p,b){return p<b}function qP(p,b){var E=-1,H=xa(p)?ht(p.length):[];return au(p,function(he,ve,Me){H[++E]=b(he,ve,Me)}),H}function zP(p){var b=e1(p);return b.length==1&&b[0][2]?_T(b[0][0],b[0][1]):function(E){return E===p||R_(E,p,b)}}function FP(p,b){return i1(p)&&bT(b)?_T(El(p),b):function(E){var H=d1(E,p);return H===t&&H===b?p1(E,p):lm(b,H,A|P)}}function N0(p,b,E,H,he){p!==b&&L_(b,function(ve,Me){if(he||(he=new Ho),Is(ve))AN(p,b,Me,E,N0,H,he);else{var ze=H?H(s1(p,Me),ve,Me+"",p,b,he):t;ze===t&&(ze=ve),D_(p,Me,ze)}},Ea)}function AN(p,b,E,H,he,ve,Me){var ze=s1(p,E),Je=s1(b,E),St=Me.get(Je);if(St){D_(p,E,St);return}var Pt=ve?ve(ze,Je,E+"",p,b,Me):t,Lt=Pt===t;if(Lt){var ti=sn(Je),yi=!ti&&uu(Je),Ni=!ti&&!yi&&Bd(Je);Pt=Je,ti||yi||Ni?sn(ze)?Pt=ze:Xs(ze)?Pt=Ta(ze):yi?(Lt=!1,Pt=$P(Je,!0)):Ni?(Lt=!1,Pt=eT(Je,!0)):Pt=[]:pm(Je)||lc(Je)?(Pt=ze,lc(ze)?Pt=QT(ze):(!Is(ze)||Ah(ze))&&(Pt=vT(Je))):Lt=!1}Lt&&(Me.set(Je,Pt),he(Pt,Je,H,ve,Me),Me.delete(Je)),D_(p,E,Pt)}function HP(p,b){var E=p.length;if(E)return b+=b<0?E:0,_h(b,E)?p[b]:t}function UP(p,b,E){b.length?b=As(b,function(ve){return sn(ve)?function(Me){return rc(Me,ve.length===1?ve[0]:ve)}:ve}):b=[Va];var H=-1;b=As(b,Pi(Li()));var he=qP(p,function(ve,Me,ze){var Je=As(b,function(St){return St(ve)});return{criteria:Je,index:++H,value:ve}});return Qf(he,function(ve,Me){return MN(ve,Me,E)})}function wN(p,b){return GP(p,b,function(E,H){return p1(p,H)})}function GP(p,b,E){for(var H=-1,he=b.length,ve={};++H<he;){var Me=b[H],ze=rc(p,Me);E(ze,Me)&&hm(ve,lu(Me,p),ze)}return ve}function SN(p){return function(b){return rc(b,p)}}function z_(p,b,E,H){var he=H?w_:hh,ve=-1,Me=b.length,ze=p;for(p===b&&(b=Ta(b)),E&&(ze=As(p,Pi(E)));++ve<Me;)for(var Je=0,St=b[ve],Pt=E?E(St):St;(Je=he(ze,Pt,Je,H))>-1;)ze!==p&&x0.call(ze,Je,1),x0.call(p,Je,1);return p}function WP(p,b){for(var E=p?b.length:0,H=E-1;E--;){var he=b[E];if(E==H||he!==ve){var ve=he;_h(he)?x0.call(p,he,1):G_(p,he)}}return p}function F_(p,b){return p+k0(TP()*(b-p+1))}function PN(p,b,E,H){for(var he=-1,ve=fr(V0((b-p)/(E||1)),0),Me=ht(ve);ve--;)Me[H?ve:++he]=p,p+=E;return Me}function H_(p,b){var E="";if(!p||b<1||b>st)return E;do b%2&&(E+=p),b=k0(b/2),b&&(p+=p);while(b);return E}function mn(p,b){return r1(AT(p,b,Va),p+"")}function TN(p){return VP(qd(p))}function xN(p,b){var E=qd(p);return K0(E,sc(b,0,E.length))}function hm(p,b,E,H){if(!Is(p))return p;b=lu(b,p);for(var he=-1,ve=b.length,Me=ve-1,ze=p;ze!=null&&++he<ve;){var Je=El(b[he]),St=E;if(Je==="__proto__"||Je==="constructor"||Je==="prototype")return p;if(he!=Me){var Pt=ze[Je];St=H?H(Pt,Je,ze):t,St===t&&(St=Is(Pt)?Pt:_h(b[he+1])?[]:{})}rm(ze,Je,St),ze=ze[Je]}return p}var KP=C0?function(p,b){return C0.set(p,b),p}:Va,EN=E0?function(p,b){return E0(p,"toString",{configurable:!0,enumerable:!1,value:m1(b),writable:!0})}:Va;function VN(p){return K0(qd(p))}function go(p,b,E){var H=-1,he=p.length;b<0&&(b=-b>he?0:he+b),E=E>he?he:E,E<0&&(E+=he),he=b>E?0:E-b>>>0,b>>>=0;for(var ve=ht(he);++H<he;)ve[H]=p[H+b];return ve}function kN(p,b){var E;return au(p,function(H,he,ve){return E=b(H,he,ve),!E}),!!E}function R0(p,b,E){var H=0,he=p==null?H:p.length;if(typeof b=="number"&&b===b&&he<=dt){for(;H<he;){var ve=H+he>>>1,Me=p[ve];Me!==null&&!Ka(Me)&&(E?Me<=b:Me<b)?H=ve+1:he=ve}return he}return U_(p,b,Va,E)}function U_(p,b,E,H){var he=0,ve=p==null?0:p.length;if(ve===0)return 0;b=E(b);for(var Me=b!==b,ze=b===null,Je=Ka(b),St=b===t;he<ve;){var Pt=k0((he+ve)/2),Lt=E(p[Pt]),ti=Lt!==t,yi=Lt===null,Ni=Lt===Lt,dn=Ka(Lt);if(Me)var Ri=H||Ni;else St?Ri=Ni&&(H||ti):ze?Ri=Ni&&ti&&(H||!yi):Je?Ri=Ni&&ti&&!yi&&(H||!dn):yi||dn?Ri=!1:Ri=H?Lt<=b:Lt<b;Ri?he=Pt+1:ve=Pt}return Wr(ve,Ct)}function YP(p,b){for(var E=-1,H=p.length,he=0,ve=[];++E<H;){var Me=p[E],ze=b?b(Me):Me;if(!E||!Uo(ze,Je)){var Je=ze;ve[he++]=Me===0?0:Me}}return ve}function jP(p){return typeof p=="number"?p:Ka(p)?et:+p}function Wa(p){if(typeof p=="string")return p;if(sn(p))return As(p,Wa)+"";if(Ka(p))return xP?xP.call(p):"";var b=p+"";return b=="0"&&1/p==-1/0?"-0":b}function ou(p,b,E){var H=-1,he=wd,ve=p.length,Me=!0,ze=[],Je=ze;if(E)Me=!1,he=Yf;else if(ve>=s){var St=b?null:zN(p);if(St)return $u(St);Me=!1,he=is,Je=new nc}else Je=b?[]:ze;e:for(;++H<ve;){var Pt=p[H],Lt=b?b(Pt):Pt;if(Pt=E||Pt!==0?Pt:0,Me&&Lt===Lt){for(var ti=Je.length;ti--;)if(Je[ti]===Lt)continue e;b&&Je.push(Lt),ze.push(Pt)}else he(Je,Lt,E)||(Je!==ze&&Je.push(Lt),ze.push(Pt))}return ze}function G_(p,b){return b=lu(b,p),p=wT(p,b),p==null||delete p[El(yo(b))]}function XP(p,b,E,H){return hm(p,b,E(rc(p,b)),H)}function B0(p,b,E,H){for(var he=p.length,ve=H?he:-1;(H?ve--:++ve<he)&&b(p[ve],ve,p););return E?go(p,H?0:ve,H?ve+1:he):go(p,H?ve+1:0,H?he:ve)}function QP(p,b){var E=p;return E instanceof Tn&&(E=E.value()),jf(b,function(H,he){return he.func.apply(he.thisArg,wl([H],he.args))},E)}function W_(p,b,E){var H=p.length;if(H<2)return H?ou(p[0]):[];for(var he=-1,ve=ht(H);++he<H;)for(var Me=p[he],ze=-1;++ze<H;)ze!=he&&(ve[he]=am(ve[he]||Me,p[ze],b,E));return ou(xr(ve,1),b,E)}function JP(p,b,E){for(var H=-1,he=p.length,ve=b.length,Me={};++H<he;){var ze=H<ve?b[H]:t;E(Me,p[H],ze)}return Me}function K_(p){return Xs(p)?p:[]}function Y_(p){return typeof p=="function"?p:Va}function lu(p,b){return sn(p)?p:i1(p,b)?[p]:xT(ts(p))}var CN=mn;function hu(p,b,E){var H=p.length;return E=E===t?H:E,!b&&E>=H?p:go(p,b,E)}var ZP=yO||function(p){return dr.clearTimeout(p)};function $P(p,b){if(b)return p.slice();var E=p.length,H=_P?_P(E):new p.constructor(E);return p.copy(H),H}function j_(p){var b=new p.constructor(p.byteLength);return new P0(b).set(new P0(p)),b}function DN(p,b){var E=b?j_(p.buffer):p.buffer;return new p.constructor(E,p.byteOffset,p.byteLength)}function IN(p){var b=new p.constructor(p.source,yt.exec(p));return b.lastIndex=p.lastIndex,b}function LN(p){return sm?ei(sm.call(p)):{}}function eT(p,b){var E=b?j_(p.buffer):p.buffer;return new p.constructor(E,p.byteOffset,p.length)}function tT(p,b){if(p!==b){var E=p!==t,H=p===null,he=p===p,ve=Ka(p),Me=b!==t,ze=b===null,Je=b===b,St=Ka(b);if(!ze&&!St&&!ve&&p>b||ve&&Me&&Je&&!ze&&!St||H&&Me&&Je||!E&&Je||!he)return 1;if(!H&&!ve&&!St&&p<b||St&&E&&he&&!H&&!ve||ze&&E&&he||!Me&&he||!Je)return-1}return 0}function MN(p,b,E){for(var H=-1,he=p.criteria,ve=b.criteria,Me=he.length,ze=E.length;++H<Me;){var Je=tT(he[H],ve[H]);if(Je){if(H>=ze)return Je;var St=E[H];return Je*(St=="desc"?-1:1)}}return p.index-b.index}function iT(p,b,E,H){for(var he=-1,ve=p.length,Me=E.length,ze=-1,Je=b.length,St=fr(ve-Me,0),Pt=ht(Je+St),Lt=!H;++ze<Je;)Pt[ze]=b[ze];for(;++he<Me;)(Lt||he<ve)&&(Pt[E[he]]=p[he]);for(;St--;)Pt[ze++]=p[he++];return Pt}function nT(p,b,E,H){for(var he=-1,ve=p.length,Me=-1,ze=E.length,Je=-1,St=b.length,Pt=fr(ve-ze,0),Lt=ht(Pt+St),ti=!H;++he<Pt;)Lt[he]=p[he];for(var yi=he;++Je<St;)Lt[yi+Je]=b[Je];for(;++Me<ze;)(ti||he<ve)&&(Lt[yi+E[Me]]=p[he++]);return Lt}function Ta(p,b){var E=-1,H=p.length;for(b||(b=ht(H));++E<H;)b[E]=p[E];return b}function xl(p,b,E,H){var he=!E;E||(E={});for(var ve=-1,Me=b.length;++ve<Me;){var ze=b[ve],Je=H?H(E[ze],p[ze],ze,E,p):t;Je===t&&(Je=p[ze]),he?yh(E,ze,Je):rm(E,ze,Je)}return E}function ON(p,b){return xl(p,t1(p),b)}function NN(p,b){return xl(p,gT(p),b)}function q0(p,b){return function(E,H){var he=sn(E)?__:sN,ve=b?b():{};return he(E,p,Li(H,2),ve)}}function Od(p){return mn(function(b,E){var H=-1,he=E.length,ve=he>1?E[he-1]:t,Me=he>2?E[2]:t;for(ve=p.length>3&&typeof ve=="function"?(he--,ve):t,Me&&ra(E[0],E[1],Me)&&(ve=he<3?t:ve,he=1),b=ei(b);++H<he;){var ze=E[H];ze&&p(b,ze,H,ve)}return b})}function sT(p,b){return function(E,H){if(E==null)return E;if(!xa(E))return p(E,H);for(var he=E.length,ve=b?he:-1,Me=ei(E);(b?ve--:++ve<he)&&H(Me[ve],ve,Me)!==!1;);return E}}function rT(p){return function(b,E,H){for(var he=-1,ve=ei(b),Me=H(b),ze=Me.length;ze--;){var Je=Me[p?ze:++he];if(E(ve[Je],Je,ve)===!1)break}return b}}function RN(p,b,E){var H=b&w,he=um(p);function ve(){var Me=this&&this!==dr&&this instanceof ve?he:p;return Me.apply(H?E:this,arguments)}return ve}function aT(p){return function(b){b=ts(b);var E=nu(b)?na(b):t,H=E?E[0]:b.charAt(0),he=E?hu(E,1).join(""):b.slice(1);return H[p]()+he}}function Nd(p){return function(b){return jf(sx(nx(b).replace(X,"")),p,"")}}function um(p){return function(){var b=arguments;switch(b.length){case 0:return new p;case 1:return new p(b[0]);case 2:return new p(b[0],b[1]);case 3:return new p(b[0],b[1],b[2]);case 4:return new p(b[0],b[1],b[2],b[3]);case 5:return new p(b[0],b[1],b[2],b[3],b[4]);case 6:return new p(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new p(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var E=Md(p.prototype),H=p.apply(E,b);return Is(H)?H:E}}function BN(p,b,E){var H=um(p);function he(){for(var ve=arguments.length,Me=ht(ve),ze=ve,Je=Rd(he);ze--;)Me[ze]=arguments[ze];var St=ve<3&&Me[0]!==Je&&Me[ve-1]!==Je?[]:Fo(Me,Je);if(ve-=St.length,ve<E)return cT(p,b,z0,he.placeholder,t,Me,St,t,t,E-ve);var Pt=this&&this!==dr&&this instanceof he?H:p;return Un(Pt,this,Me)}return he}function oT(p){return function(b,E,H){var he=ei(b);if(!xa(b)){var ve=Li(E,3);b=br(b),E=function(ze){return ve(he[ze],ze,he)}}var Me=p(b,E,H);return Me>-1?he[ve?b[Me]:Me]:t}}function lT(p){return bh(function(b){var E=b.length,H=E,he=fo.prototype.thru;for(p&&b.reverse();H--;){var ve=b[H];if(typeof ve!="function")throw new Ji(a);if(he&&!Me&&G0(ve)=="wrapper")var Me=new fo([],!0)}for(H=Me?H:E;++H<E;){ve=b[H];var ze=G0(ve),Je=ze=="wrapper"?$_(ve):t;Je&&n1(Je[0])&&Je[1]==(Z|M|O|de)&&!Je[4].length&&Je[9]==1?Me=Me[G0(Je[0])].apply(Me,Je[3]):Me=ve.length==1&&n1(ve)?Me[ze]():Me.thru(ve)}return function(){var St=arguments,Pt=St[0];if(Me&&St.length==1&&sn(Pt))return Me.plant(Pt).value();for(var Lt=0,ti=E?b[Lt].apply(this,St):Pt;++Lt<E;)ti=b[Lt].call(this,ti);return ti}})}function z0(p,b,E,H,he,ve,Me,ze,Je,St){var Pt=b&Z,Lt=b&w,ti=b&T,yi=b&(M|B),Ni=b&$,dn=ti?t:um(p);function Ri(){for(var An=arguments.length,In=ht(An),Ya=An;Ya--;)In[Ya]=arguments[Ya];if(yi)var aa=Rd(Ri),ja=qs(In,aa);if(H&&(In=iT(In,H,he,yi)),ve&&(In=nT(In,ve,Me,yi)),An-=ja,yi&&An<St){var Qs=Fo(In,aa);return cT(p,b,z0,Ri.placeholder,E,In,Qs,ze,Je,St-An)}var Go=Lt?E:this,Sh=ti?Go[p]:p;return An=In.length,ze?In=sR(In,ze):Ni&&An>1&&In.reverse(),Pt&&Je<An&&(In.length=Je),this&&this!==dr&&this instanceof Ri&&(Sh=dn||um(Sh)),Sh.apply(Go,In)}return Ri}function hT(p,b){return function(E,H){return dN(E,p,b(H),{})}}function F0(p,b){return function(E,H){var he;if(E===t&&H===t)return b;if(E!==t&&(he=E),H!==t){if(he===t)return H;typeof E=="string"||typeof H=="string"?(E=Wa(E),H=Wa(H)):(E=jP(E),H=jP(H)),he=p(E,H)}return he}}function X_(p){return bh(function(b){return b=As(b,Pi(Li())),mn(function(E){var H=this;return p(b,function(he){return Un(he,H,E)})})})}function H0(p,b){b=b===t?" ":Wa(b);var E=b.length;if(E<2)return E?H_(b,p):b;var H=H_(b,V0(p/su(b)));return nu(b)?hu(na(H),0,p).join(""):H.slice(0,p)}function qN(p,b,E,H){var he=b&w,ve=um(p);function Me(){for(var ze=-1,Je=arguments.length,St=-1,Pt=H.length,Lt=ht(Pt+Je),ti=this&&this!==dr&&this instanceof Me?ve:p;++St<Pt;)Lt[St]=H[St];for(;Je--;)Lt[St++]=arguments[++ze];return Un(ti,he?E:this,Lt)}return Me}function uT(p){return function(b,E,H){return H&&typeof H!="number"&&ra(b,E,H)&&(E=H=t),b=wh(b),E===t?(E=b,b=0):E=wh(E),H=H===t?b<E?1:-1:wh(H),PN(b,E,H,p)}}function U0(p){return function(b,E){return typeof b=="string"&&typeof E=="string"||(b=vo(b),E=vo(E)),p(b,E)}}function cT(p,b,E,H,he,ve,Me,ze,Je,St){var Pt=b&M,Lt=Pt?Me:t,ti=Pt?t:Me,yi=Pt?ve:t,Ni=Pt?t:ve;b|=Pt?O:x,b&=~(Pt?x:O),b&D||(b&=-4);var dn=[p,b,he,yi,Lt,Ni,ti,ze,Je,St],Ri=E.apply(t,dn);return n1(p)&&ST(Ri,dn),Ri.placeholder=H,PT(Ri,p,b)}function Q_(p){var b=mt[p];return function(E,H){if(E=vo(E),H=H==null?0:Wr(ln(H),292),H&&PP(E)){var he=(ts(E)+"e").split("e"),ve=b(he[0]+"e"+(+he[1]+H));return he=(ts(ve)+"e").split("e"),+(he[0]+"e"+(+he[1]-H))}return b(E)}}var zN=Id&&1/$u(new Id([,-0]))[1]==lt?function(p){return new Id(p)}:v1;function dT(p){return function(b){var E=Kr(b);return E==Gt?ch(b):E==$e?vr(b):pr(b,p(b))}}function vh(p,b,E,H,he,ve,Me,ze){var Je=b&T;if(!Je&&typeof p!="function")throw new Ji(a);var St=H?H.length:0;if(St||(b&=-97,H=he=t),Me=Me===t?Me:fr(ln(Me),0),ze=ze===t?ze:ln(ze),St-=he?he.length:0,b&x){var Pt=H,Lt=he;H=he=t}var ti=Je?t:$_(p),yi=[p,b,E,H,he,Pt,Lt,ve,Me,ze];if(ti&&tR(yi,ti),p=yi[0],b=yi[1],E=yi[2],H=yi[3],he=yi[4],ze=yi[9]=yi[9]===t?Je?0:p.length:fr(yi[9]-St,0),!ze&&b&(M|B)&&(b&=-25),!b||b==w)var Ni=RN(p,b,E);else b==M||b==B?Ni=BN(p,b,ze):(b==O||b==(w|O))&&!he.length?Ni=qN(p,b,E,H):Ni=z0.apply(t,yi);var dn=ti?KP:ST;return PT(dn(Ni,yi),p,b)}function pT(p,b,E,H){return p===t||Uo(p,Pl[E])&&!ns.call(H,E)?b:p}function fT(p,b,E,H,he,ve){return Is(p)&&Is(b)&&(ve.set(b,p),N0(p,b,t,fT,ve),ve.delete(b)),p}function FN(p){return pm(p)?t:p}function mT(p,b,E,H,he,ve){var Me=E&A,ze=p.length,Je=b.length;if(ze!=Je&&!(Me&&Je>ze))return!1;var St=ve.get(p),Pt=ve.get(b);if(St&&Pt)return St==b&&Pt==p;var Lt=-1,ti=!0,yi=E&P?new nc:t;for(ve.set(p,b),ve.set(b,p);++Lt<ze;){var Ni=p[Lt],dn=b[Lt];if(H)var Ri=Me?H(dn,Ni,Lt,b,p,ve):H(Ni,dn,Lt,p,b,ve);if(Ri!==t){if(Ri)continue;ti=!1;break}if(yi){if(!Xf(b,function(An,In){if(!is(yi,In)&&(Ni===An||he(Ni,An,E,H,ve)))return yi.push(In)})){ti=!1;break}}else if(!(Ni===dn||he(Ni,dn,E,H,ve))){ti=!1;break}}return ve.delete(p),ve.delete(b),ti}function HN(p,b,E,H,he,ve,Me){switch(E){case m:if(p.byteLength!=b.byteLength||p.byteOffset!=b.byteOffset)return!1;p=p.buffer,b=b.buffer;case d:return!(p.byteLength!=b.byteLength||!ve(new P0(p),new P0(b)));case ci:case Yt:case Ft:return Uo(+p,+b);case pe:return p.name==b.name&&p.message==b.message;case ke:case Xe:return p==b+"";case Gt:var ze=ch;case $e:var Je=H&A;if(ze||(ze=$u),p.size!=b.size&&!Je)return!1;var St=Me.get(p);if(St)return St==b;H|=P,Me.set(p,b);var Pt=mT(ze(p),ze(b),H,he,ve,Me);return Me.delete(p),Pt;case rt:if(sm)return sm.call(p)==sm.call(b)}return!1}function UN(p,b,E,H,he,ve){var Me=E&A,ze=J_(p),Je=ze.length,St=J_(b),Pt=St.length;if(Je!=Pt&&!Me)return!1;for(var Lt=Je;Lt--;){var ti=ze[Lt];if(!(Me?ti in b:ns.call(b,ti)))return!1}var yi=ve.get(p),Ni=ve.get(b);if(yi&&Ni)return yi==b&&Ni==p;var dn=!0;ve.set(p,b),ve.set(b,p);for(var Ri=Me;++Lt<Je;){ti=ze[Lt];var An=p[ti],In=b[ti];if(H)var Ya=Me?H(In,An,ti,b,p,ve):H(An,In,ti,p,b,ve);if(!(Ya===t?An===In||he(An,In,E,H,ve):Ya)){dn=!1;break}Ri||(Ri=ti=="constructor")}if(dn&&!Ri){var aa=p.constructor,ja=b.constructor;aa!=ja&&"constructor"in p&&"constructor"in b&&!(typeof aa=="function"&&aa instanceof aa&&typeof ja=="function"&&ja instanceof ja)&&(dn=!1)}return ve.delete(p),ve.delete(b),dn}function bh(p){return r1(AT(p,t,CT),p+"")}function J_(p){return OP(p,br,t1)}function Z_(p){return OP(p,Ea,gT)}var $_=C0?function(p){return C0.get(p)}:v1;function G0(p){for(var b=p.name+"",E=Ld[b],H=ns.call(Ld,b)?E.length:0;H--;){var he=E[H],ve=he.func;if(ve==null||ve==p)return he.name}return b}function Rd(p){var b=ns.call(ge,"placeholder")?ge:p;return b.placeholder}function Li(){var p=ge.iteratee||g1;return p=p===g1?BP:p,arguments.length?p(arguments[0],arguments[1]):p}function W0(p,b){var E=p.__data__;return JN(b)?E[typeof b=="string"?"string":"hash"]:E.map}function e1(p){for(var b=br(p),E=b.length;E--;){var H=b[E],he=p[H];b[E]=[H,he,bT(he)]}return b}function ac(p,b){var E=Jf(p,b);return RP(E)?E:t}function GN(p){var b=ns.call(p,tc),E=p[tc];try{p[tc]=t;var H=!0}catch{}var he=w0.call(p);return H&&(b?p[tc]=E:delete p[tc]),he}var t1=V_?function(p){return p==null?[]:(p=ei(p),Al(V_(p),function(b){return wP.call(p,b)}))}:b1,gT=V_?function(p){for(var b=[];p;)wl(b,t1(p)),p=T0(p);return b}:b1,Kr=sa;(k_&&Kr(new k_(new ArrayBuffer(1)))!=m||tm&&Kr(new tm)!=Gt||C_&&Kr(C_.resolve())!=fe||Id&&Kr(new Id)!=$e||im&&Kr(new im)!=Xt)&&(Kr=function(p){var b=sa(p),E=b==te?p.constructor:t,H=E?oc(E):"";if(H)switch(H){case xO:return m;case EO:return Gt;case VO:return fe;case kO:return $e;case CO:return Xt}return b});function WN(p,b,E){for(var H=-1,he=E.length;++H<he;){var ve=E[H],Me=ve.size;switch(ve.type){case"drop":p+=Me;break;case"dropRight":b-=Me;break;case"take":b=Wr(b,p+Me);break;case"takeRight":p=fr(p,b-Me);break}}return{start:p,end:b}}function KN(p){var b=p.match(le);return b?b[1].split(xe):[]}function yT(p,b,E){b=lu(b,p);for(var H=-1,he=b.length,ve=!1;++H<he;){var Me=El(b[H]);if(!(ve=p!=null&&E(p,Me)))break;p=p[Me]}return ve||++H!=he?ve:(he=p==null?0:p.length,!!he&&Z0(he)&&_h(Me,he)&&(sn(p)||lc(p)))}function YN(p){var b=p.length,E=new p.constructor(b);return b&&typeof p[0]=="string"&&ns.call(p,"index")&&(E.index=p.index,E.input=p.input),E}function vT(p){return typeof p.constructor=="function"&&!cm(p)?Md(T0(p)):{}}function jN(p,b,E){var H=p.constructor;switch(b){case d:return j_(p);case ci:case Yt:return new H(+p);case m:return DN(p,E);case _:case S:case k:case I:case L:case N:case q:case W:case K:return eT(p,E);case Gt:return new H;case Ft:case Xe:return new H(p);case ke:return IN(p);case $e:return new H;case rt:return LN(p)}}function XN(p,b){var E=b.length;if(!E)return p;var H=E-1;return b[H]=(E>1?"& ":"")+b[H],b=b.join(E>2?", ":" "),p.replace(j,`{
/* [wrapped with `+b+`] */
`)}function QN(p){return sn(p)||lc(p)||!!(SP&&p&&p[SP])}function _h(p,b){var E=typeof p;return b=b??st,!!b&&(E=="number"||E!="symbol"&&At.test(p))&&p>-1&&p%1==0&&p<b}function ra(p,b,E){if(!Is(E))return!1;var H=typeof b;return(H=="number"?xa(E)&&_h(b,E.length):H=="string"&&b in E)?Uo(E[b],p):!1}function i1(p,b){if(sn(p))return!1;var E=typeof p;return E=="number"||E=="symbol"||E=="boolean"||p==null||Ka(p)?!0:ne.test(p)||!ce.test(p)||b!=null&&p in ei(b)}function JN(p){var b=typeof p;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?p!=="__proto__":p===null}function n1(p){var b=G0(p),E=ge[b];if(typeof E!="function"||!(b in Tn.prototype))return!1;if(p===E)return!0;var H=$_(E);return!!H&&p===H[0]}function ZN(p){return!!bP&&bP in p}var $N=fh?Ah:_1;function cm(p){var b=p&&p.constructor,E=typeof b=="function"&&b.prototype||Pl;return p===E}function bT(p){return p===p&&!Is(p)}function _T(p,b){return function(E){return E==null?!1:E[p]===b&&(b!==t||p in ei(E))}}function eR(p){var b=Q0(p,function(H){return E.size===h&&E.clear(),H}),E=b.cache;return b}function tR(p,b){var E=p[1],H=b[1],he=E|H,ve=he<(w|T|Z),Me=H==Z&&E==M||H==Z&&E==de&&p[7].length<=b[8]||H==(Z|de)&&b[7].length<=b[8]&&E==M;if(!(ve||Me))return p;H&w&&(p[2]=b[2],he|=E&w?0:D);var ze=b[3];if(ze){var Je=p[3];p[3]=Je?iT(Je,ze,b[4]):ze,p[4]=Je?Fo(p[3],c):b[4]}return ze=b[5],ze&&(Je=p[5],p[5]=Je?nT(Je,ze,b[6]):ze,p[6]=Je?Fo(p[5],c):b[6]),ze=b[7],ze&&(p[7]=ze),H&Z&&(p[8]=p[8]==null?b[8]:Wr(p[8],b[8])),p[9]==null&&(p[9]=b[9]),p[0]=b[0],p[1]=he,p}function iR(p){var b=[];if(p!=null)for(var E in ei(p))b.push(E);return b}function nR(p){return w0.call(p)}function AT(p,b,E){return b=fr(b===t?p.length-1:b,0),function(){for(var H=arguments,he=-1,ve=fr(H.length-b,0),Me=ht(ve);++he<ve;)Me[he]=H[b+he];he=-1;for(var ze=ht(b+1);++he<b;)ze[he]=H[he];return ze[b]=E(Me),Un(p,this,ze)}}function wT(p,b){return b.length<2?p:rc(p,go(b,0,-1))}function sR(p,b){for(var E=p.length,H=Wr(b.length,E),he=Ta(p);H--;){var ve=b[H];p[H]=_h(ve,E)?he[ve]:t}return p}function s1(p,b){if(!(b==="constructor"&&typeof p[b]=="function")&&b!="__proto__")return p[b]}var ST=TT(KP),dm=bO||function(p,b){return dr.setTimeout(p,b)},r1=TT(EN);function PT(p,b,E){var H=b+"";return r1(p,XN(H,rR(KN(H),E)))}function TT(p){var b=0,E=0;return function(){var H=SO(),he=Te-(H-E);if(E=H,he>0){if(++b>=Se)return arguments[0]}else b=0;return p.apply(t,arguments)}}function K0(p,b){var E=-1,H=p.length,he=H-1;for(b=b===t?H:b;++E<b;){var ve=F_(E,he),Me=p[ve];p[ve]=p[E],p[E]=Me}return p.length=b,p}var xT=eR(function(p){var b=[];return p.charCodeAt(0)===46&&b.push(""),p.replace(ye,function(E,H,he,ve){b.push(he?ve.replace(je,"$1"):H||E)}),b});function El(p){if(typeof p=="string"||Ka(p))return p;var b=p+"";return b=="0"&&1/p==-1/0?"-0":b}function oc(p){if(p!=null){try{return Dd.call(p)}catch{}try{return p+""}catch{}}return""}function rR(p,b){return Ur(Et,function(E){var H="_."+E[0];b&E[1]&&!wd(p,H)&&p.push(H)}),p.sort()}function ET(p){if(p instanceof Tn)return p.clone();var b=new fo(p.__wrapped__,p.__chain__);return b.__actions__=Ta(p.__actions__),b.__index__=p.__index__,b.__values__=p.__values__,b}function aR(p,b,E){(E?ra(p,b,E):b===t)?b=1:b=fr(ln(b),0);var H=p==null?0:p.length;if(!H||b<1)return[];for(var he=0,ve=0,Me=ht(V0(H/b));he<H;)Me[ve++]=go(p,he,he+=b);return Me}function oR(p){for(var b=-1,E=p==null?0:p.length,H=0,he=[];++b<E;){var ve=p[b];ve&&(he[H++]=ve)}return he}function lR(){var p=arguments.length;if(!p)return[];for(var b=ht(p-1),E=arguments[0],H=p;H--;)b[H-1]=arguments[H];return wl(sn(E)?Ta(E):[E],xr(b,1))}var hR=mn(function(p,b){return Xs(p)?am(p,xr(b,1,Xs,!0)):[]}),uR=mn(function(p,b){var E=yo(b);return Xs(E)&&(E=t),Xs(p)?am(p,xr(b,1,Xs,!0),Li(E,2)):[]}),cR=mn(function(p,b){var E=yo(b);return Xs(E)&&(E=t),Xs(p)?am(p,xr(b,1,Xs,!0),t,E):[]});function dR(p,b,E){var H=p==null?0:p.length;return H?(b=E||b===t?1:ln(b),go(p,b<0?0:b,H)):[]}function pR(p,b,E){var H=p==null?0:p.length;return H?(b=E||b===t?1:ln(b),b=H-b,go(p,0,b<0?0:b)):[]}function fR(p,b){return p&&p.length?B0(p,Li(b,3),!0,!0):[]}function mR(p,b){return p&&p.length?B0(p,Li(b,3),!0):[]}function gR(p,b,E,H){var he=p==null?0:p.length;return he?(E&&typeof E!="number"&&ra(p,b,E)&&(E=0,H=he),lN(p,b,E,H)):[]}function VT(p,b,E){var H=p==null?0:p.length;if(!H)return-1;var he=E==null?0:ln(E);return he<0&&(he=fr(H+he,0)),Sd(p,Li(b,3),he)}function kT(p,b,E){var H=p==null?0:p.length;if(!H)return-1;var he=H-1;return E!==t&&(he=ln(E),he=E<0?fr(H+he,0):Wr(he,H-1)),Sd(p,Li(b,3),he,!0)}function CT(p){var b=p==null?0:p.length;return b?xr(p,1):[]}function yR(p){var b=p==null?0:p.length;return b?xr(p,lt):[]}function vR(p,b){var E=p==null?0:p.length;return E?(b=b===t?1:ln(b),xr(p,b)):[]}function bR(p){for(var b=-1,E=p==null?0:p.length,H={};++b<E;){var he=p[b];H[he[0]]=he[1]}return H}function DT(p){return p&&p.length?p[0]:t}function _R(p,b,E){var H=p==null?0:p.length;if(!H)return-1;var he=E==null?0:ln(E);return he<0&&(he=fr(H+he,0)),hh(p,b,he)}function AR(p){var b=p==null?0:p.length;return b?go(p,0,-1):[]}var wR=mn(function(p){var b=As(p,K_);return b.length&&b[0]===p[0]?N_(b):[]}),SR=mn(function(p){var b=yo(p),E=As(p,K_);return b===yo(E)?b=t:E.pop(),E.length&&E[0]===p[0]?N_(E,Li(b,2)):[]}),PR=mn(function(p){var b=yo(p),E=As(p,K_);return b=typeof b=="function"?b:t,b&&E.pop(),E.length&&E[0]===p[0]?N_(E,t,b):[]});function TR(p,b){return p==null?"":AO.call(p,b)}function yo(p){var b=p==null?0:p.length;return b?p[b-1]:t}function xR(p,b,E){var H=p==null?0:p.length;if(!H)return-1;var he=H;return E!==t&&(he=ln(E),he=he<0?fr(H+he,0):Wr(he,H-1)),b===b?P_(p,b,he):Sd(p,Xu,he,!0)}function ER(p,b){return p&&p.length?HP(p,ln(b)):t}var VR=mn(IT);function IT(p,b){return p&&p.length&&b&&b.length?z_(p,b):p}function kR(p,b,E){return p&&p.length&&b&&b.length?z_(p,b,Li(E,2)):p}function CR(p,b,E){return p&&p.length&&b&&b.length?z_(p,b,t,E):p}var DR=bh(function(p,b){var E=p==null?0:p.length,H=I_(p,b);return WP(p,As(b,function(he){return _h(he,E)?+he:he}).sort(tT)),H});function IR(p,b){var E=[];if(!(p&&p.length))return E;var H=-1,he=[],ve=p.length;for(b=Li(b,3);++H<ve;){var Me=p[H];b(Me,H,p)&&(E.push(Me),he.push(H))}return WP(p,he),E}function a1(p){return p==null?p:TO.call(p)}function LR(p,b,E){var H=p==null?0:p.length;return H?(E&&typeof E!="number"&&ra(p,b,E)?(b=0,E=H):(b=b==null?0:ln(b),E=E===t?H:ln(E)),go(p,b,E)):[]}function MR(p,b){return R0(p,b)}function OR(p,b,E){return U_(p,b,Li(E,2))}function NR(p,b){var E=p==null?0:p.length;if(E){var H=R0(p,b);if(H<E&&Uo(p[H],b))return H}return-1}function RR(p,b){return R0(p,b,!0)}function BR(p,b,E){return U_(p,b,Li(E,2),!0)}function qR(p,b){var E=p==null?0:p.length;if(E){var H=R0(p,b,!0)-1;if(Uo(p[H],b))return H}return-1}function zR(p){return p&&p.length?YP(p):[]}function FR(p,b){return p&&p.length?YP(p,Li(b,2)):[]}function HR(p){var b=p==null?0:p.length;return b?go(p,1,b):[]}function UR(p,b,E){return p&&p.length?(b=E||b===t?1:ln(b),go(p,0,b<0?0:b)):[]}function GR(p,b,E){var H=p==null?0:p.length;return H?(b=E||b===t?1:ln(b),b=H-b,go(p,b<0?0:b,H)):[]}function WR(p,b){return p&&p.length?B0(p,Li(b,3),!1,!0):[]}function KR(p,b){return p&&p.length?B0(p,Li(b,3)):[]}var YR=mn(function(p){return ou(xr(p,1,Xs,!0))}),jR=mn(function(p){var b=yo(p);return Xs(b)&&(b=t),ou(xr(p,1,Xs,!0),Li(b,2))}),XR=mn(function(p){var b=yo(p);return b=typeof b=="function"?b:t,ou(xr(p,1,Xs,!0),t,b)});function QR(p){return p&&p.length?ou(p):[]}function JR(p,b){return p&&p.length?ou(p,Li(b,2)):[]}function ZR(p,b){return b=typeof b=="function"?b:t,p&&p.length?ou(p,t,b):[]}function o1(p){if(!(p&&p.length))return[];var b=0;return p=Al(p,function(E){if(Xs(E))return b=fr(E.length,b),!0}),Ed(b,function(E){return As(p,Pd(E))})}function LT(p,b){if(!(p&&p.length))return[];var E=o1(p);return b==null?E:As(E,function(H){return Un(b,t,H)})}var $R=mn(function(p,b){return Xs(p)?am(p,b):[]}),eB=mn(function(p){return W_(Al(p,Xs))}),tB=mn(function(p){var b=yo(p);return Xs(b)&&(b=t),W_(Al(p,Xs),Li(b,2))}),iB=mn(function(p){var b=yo(p);return b=typeof b=="function"?b:t,W_(Al(p,Xs),t,b)}),nB=mn(o1);function sB(p,b){return JP(p||[],b||[],rm)}function rB(p,b){return JP(p||[],b||[],hm)}var aB=mn(function(p){var b=p.length,E=b>1?p[b-1]:t;return E=typeof E=="function"?(p.pop(),E):t,LT(p,E)});function MT(p){var b=ge(p);return b.__chain__=!0,b}function oB(p,b){return b(p),p}function Y0(p,b){return b(p)}var lB=bh(function(p){var b=p.length,E=b?p[0]:0,H=this.__wrapped__,he=function(ve){return I_(ve,p)};return b>1||this.__actions__.length||!(H instanceof Tn)||!_h(E)?this.thru(he):(H=H.slice(E,+E+(b?1:0)),H.__actions__.push({func:Y0,args:[he],thisArg:t}),new fo(H,this.__chain__).thru(function(ve){return b&&!ve.length&&ve.push(t),ve}))});function hB(){return MT(this)}function uB(){return new fo(this.value(),this.__chain__)}function cB(){this.__values__===t&&(this.__values__=jT(this.value()));var p=this.__index__>=this.__values__.length,b=p?t:this.__values__[this.__index__++];return{done:p,value:b}}function dB(){return this}function pB(p){for(var b,E=this;E instanceof I0;){var H=ET(E);H.__index__=0,H.__values__=t,b?he.__wrapped__=H:b=H;var he=H;E=E.__wrapped__}return he.__wrapped__=p,b}function fB(){var p=this.__wrapped__;if(p instanceof Tn){var b=p;return this.__actions__.length&&(b=new Tn(this)),b=b.reverse(),b.__actions__.push({func:Y0,args:[a1],thisArg:t}),new fo(b,this.__chain__)}return this.thru(a1)}function mB(){return QP(this.__wrapped__,this.__actions__)}var gB=q0(function(p,b,E){ns.call(p,E)?++p[E]:yh(p,E,1)});function yB(p,b,E){var H=sn(p)?_0:oN;return E&&ra(p,b,E)&&(b=t),H(p,Li(b,3))}function vB(p,b){var E=sn(p)?Al:LP;return E(p,Li(b,3))}var bB=oT(VT),_B=oT(kT);function AB(p,b){return xr(j0(p,b),1)}function wB(p,b){return xr(j0(p,b),lt)}function SB(p,b,E){return E=E===t?1:ln(E),xr(j0(p,b),E)}function OT(p,b){var E=sn(p)?Ur:au;return E(p,Li(b,3))}function NT(p,b){var E=sn(p)?tu:IP;return E(p,Li(b,3))}var PB=q0(function(p,b,E){ns.call(p,E)?p[E].push(b):yh(p,E,[b])});function TB(p,b,E,H){p=xa(p)?p:qd(p),E=E&&!H?ln(E):0;var he=p.length;return E<0&&(E=fr(he+E,0)),$0(p)?E<=he&&p.indexOf(b,E)>-1:!!he&&hh(p,b,E)>-1}var xB=mn(function(p,b,E){var H=-1,he=typeof b=="function",ve=xa(p)?ht(p.length):[];return au(p,function(Me){ve[++H]=he?Un(b,Me,E):om(Me,b,E)}),ve}),EB=q0(function(p,b,E){yh(p,E,b)});function j0(p,b){var E=sn(p)?As:qP;return E(p,Li(b,3))}function VB(p,b,E,H){return p==null?[]:(sn(b)||(b=b==null?[]:[b]),E=H?t:E,sn(E)||(E=E==null?[]:[E]),UP(p,b,E))}var kB=q0(function(p,b,E){p[E?0:1].push(b)},function(){return[[],[]]});function CB(p,b,E){var H=sn(p)?jf:Pn,he=arguments.length<3;return H(p,Li(b,4),E,he,au)}function DB(p,b,E){var H=sn(p)?A_:Pn,he=arguments.length<3;return H(p,Li(b,4),E,he,IP)}function IB(p,b){var E=sn(p)?Al:LP;return E(p,J0(Li(b,3)))}function LB(p){var b=sn(p)?VP:TN;return b(p)}function MB(p,b,E){(E?ra(p,b,E):b===t)?b=1:b=ln(b);var H=sn(p)?iN:xN;return H(p,b)}function OB(p){var b=sn(p)?nN:VN;return b(p)}function NB(p){if(p==null)return 0;if(xa(p))return $0(p)?su(p):p.length;var b=Kr(p);return b==Gt||b==$e?p.size:B_(p).length}function RB(p,b,E){var H=sn(p)?Xf:kN;return E&&ra(p,b,E)&&(b=t),H(p,Li(b,3))}var BB=mn(function(p,b){if(p==null)return[];var E=b.length;return E>1&&ra(p,b[0],b[1])?b=[]:E>2&&ra(b[0],b[1],b[2])&&(b=[b[0]]),UP(p,xr(b,1),[])}),X0=vO||function(){return dr.Date.now()};function qB(p,b){if(typeof b!="function")throw new Ji(a);return p=ln(p),function(){if(--p<1)return b.apply(this,arguments)}}function RT(p,b,E){return b=E?t:b,b=p&&b==null?p.length:b,vh(p,Z,t,t,t,t,b)}function BT(p,b){var E;if(typeof b!="function")throw new Ji(a);return p=ln(p),function(){return--p>0&&(E=b.apply(this,arguments)),p<=1&&(b=t),E}}var l1=mn(function(p,b,E){var H=w;if(E.length){var he=Fo(E,Rd(l1));H|=O}return vh(p,H,b,E,he)}),qT=mn(function(p,b,E){var H=w|T;if(E.length){var he=Fo(E,Rd(qT));H|=O}return vh(b,H,p,E,he)});function zT(p,b,E){b=E?t:b;var H=vh(p,M,t,t,t,t,t,b);return H.placeholder=zT.placeholder,H}function FT(p,b,E){b=E?t:b;var H=vh(p,B,t,t,t,t,t,b);return H.placeholder=FT.placeholder,H}function HT(p,b,E){var H,he,ve,Me,ze,Je,St=0,Pt=!1,Lt=!1,ti=!0;if(typeof p!="function")throw new Ji(a);b=vo(b)||0,Is(E)&&(Pt=!!E.leading,Lt="maxWait"in E,ve=Lt?fr(vo(E.maxWait)||0,b):ve,ti="trailing"in E?!!E.trailing:ti);function yi(Qs){var Go=H,Sh=he;return H=he=t,St=Qs,Me=p.apply(Sh,Go),Me}function Ni(Qs){return St=Qs,ze=dm(An,b),Pt?yi(Qs):Me}function dn(Qs){var Go=Qs-Je,Sh=Qs-St,ox=b-Go;return Lt?Wr(ox,ve-Sh):ox}function Ri(Qs){var Go=Qs-Je,Sh=Qs-St;return Je===t||Go>=b||Go<0||Lt&&Sh>=ve}function An(){var Qs=X0();if(Ri(Qs))return In(Qs);ze=dm(An,dn(Qs))}function In(Qs){return ze=t,ti&&H?yi(Qs):(H=he=t,Me)}function Ya(){ze!==t&&ZP(ze),St=0,H=Je=he=ze=t}function aa(){return ze===t?Me:In(X0())}function ja(){var Qs=X0(),Go=Ri(Qs);if(H=arguments,he=this,Je=Qs,Go){if(ze===t)return Ni(Je);if(Lt)return ZP(ze),ze=dm(An,b),yi(Je)}return ze===t&&(ze=dm(An,b)),Me}return ja.cancel=Ya,ja.flush=aa,ja}var zB=mn(function(p,b){return DP(p,1,b)}),FB=mn(function(p,b,E){return DP(p,vo(b)||0,E)});function HB(p){return vh(p,$)}function Q0(p,b){if(typeof p!="function"||b!=null&&typeof b!="function")throw new Ji(a);var E=function(){var H=arguments,he=b?b.apply(this,H):H[0],ve=E.cache;if(ve.has(he))return ve.get(he);var Me=p.apply(this,H);return E.cache=ve.set(he,Me)||ve,Me};return E.cache=new(Q0.Cache||gh),E}Q0.Cache=gh;function J0(p){if(typeof p!="function")throw new Ji(a);return function(){var b=arguments;switch(b.length){case 0:return!p.call(this);case 1:return!p.call(this,b[0]);case 2:return!p.call(this,b[0],b[1]);case 3:return!p.call(this,b[0],b[1],b[2])}return!p.apply(this,b)}}function UB(p){return BT(2,p)}var GB=CN(function(p,b){b=b.length==1&&sn(b[0])?As(b[0],Pi(Li())):As(xr(b,1),Pi(Li()));var E=b.length;return mn(function(H){for(var he=-1,ve=Wr(H.length,E);++he<ve;)H[he]=b[he].call(this,H[he]);return Un(p,this,H)})}),h1=mn(function(p,b){var E=Fo(b,Rd(h1));return vh(p,O,t,b,E)}),UT=mn(function(p,b){var E=Fo(b,Rd(UT));return vh(p,x,t,b,E)}),WB=bh(function(p,b){return vh(p,de,t,t,t,b)});function KB(p,b){if(typeof p!="function")throw new Ji(a);return b=b===t?b:ln(b),mn(p,b)}function YB(p,b){if(typeof p!="function")throw new Ji(a);return b=b==null?0:fr(ln(b),0),mn(function(E){var H=E[b],he=hu(E,0,b);return H&&wl(he,H),Un(p,this,he)})}function jB(p,b,E){var H=!0,he=!0;if(typeof p!="function")throw new Ji(a);return Is(E)&&(H="leading"in E?!!E.leading:H,he="trailing"in E?!!E.trailing:he),HT(p,b,{leading:H,maxWait:b,trailing:he})}function XB(p){return RT(p,1)}function QB(p,b){return h1(Y_(b),p)}function JB(){if(!arguments.length)return[];var p=arguments[0];return sn(p)?p:[p]}function ZB(p){return mo(p,v)}function $B(p,b){return b=typeof b=="function"?b:t,mo(p,v,b)}function e5(p){return mo(p,f|v)}function t5(p,b){return b=typeof b=="function"?b:t,mo(p,f|v,b)}function i5(p,b){return b==null||CP(p,b,br(b))}function Uo(p,b){return p===b||p!==p&&b!==b}var n5=U0(O_),s5=U0(function(p,b){return p>=b}),lc=NP(function(){return arguments}())?NP:function(p){return zs(p)&&ns.call(p,"callee")&&!wP.call(p,"callee")},sn=ht.isArray,r5=Yu?Pi(Yu):pN;function xa(p){return p!=null&&Z0(p.length)&&!Ah(p)}function Xs(p){return zs(p)&&xa(p)}function a5(p){return p===!0||p===!1||zs(p)&&sa(p)==ci}var uu=_O||_1,o5=oh?Pi(oh):fN;function l5(p){return zs(p)&&p.nodeType===1&&!pm(p)}function h5(p){if(p==null)return!0;if(xa(p)&&(sn(p)||typeof p=="string"||typeof p.splice=="function"||uu(p)||Bd(p)||lc(p)))return!p.length;var b=Kr(p);if(b==Gt||b==$e)return!p.size;if(cm(p))return!B_(p).length;for(var E in p)if(ns.call(p,E))return!1;return!0}function u5(p,b){return lm(p,b)}function c5(p,b,E){E=typeof E=="function"?E:t;var H=E?E(p,b):t;return H===t?lm(p,b,t,E):!!H}function u1(p){if(!zs(p))return!1;var b=sa(p);return b==pe||b==Pe||typeof p.message=="string"&&typeof p.name=="string"&&!pm(p)}function d5(p){return typeof p=="number"&&PP(p)}function Ah(p){if(!Is(p))return!1;var b=sa(p);return b==bt||b==wt||b==Nt||b==_e}function GT(p){return typeof p=="number"&&p==ln(p)}function Z0(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=st}function Is(p){var b=typeof p;return p!=null&&(b=="object"||b=="function")}function zs(p){return p!=null&&typeof p=="object"}var WT=ju?Pi(ju):gN;function p5(p,b){return p===b||R_(p,b,e1(b))}function f5(p,b,E){return E=typeof E=="function"?E:t,R_(p,b,e1(b),E)}function m5(p){return KT(p)&&p!=+p}function g5(p){if($N(p))throw new Ie(r);return RP(p)}function y5(p){return p===null}function v5(p){return p==null}function KT(p){return typeof p=="number"||zs(p)&&sa(p)==Ft}function pm(p){if(!zs(p)||sa(p)!=te)return!1;var b=T0(p);if(b===null)return!0;var E=ns.call(b,"constructor")&&b.constructor;return typeof E=="function"&&E instanceof E&&Dd.call(E)==fO}var c1=Wf?Pi(Wf):yN;function b5(p){return GT(p)&&p>=-9007199254740991&&p<=st}var YT=_l?Pi(_l):vN;function $0(p){return typeof p=="string"||!sn(p)&&zs(p)&&sa(p)==Xe}function Ka(p){return typeof p=="symbol"||zs(p)&&sa(p)==rt}var Bd=Kf?Pi(Kf):bN;function _5(p){return p===t}function A5(p){return zs(p)&&Kr(p)==Xt}function w5(p){return zs(p)&&sa(p)==u}var S5=U0(q_),P5=U0(function(p,b){return p<=b});function jT(p){if(!p)return[];if(xa(p))return $0(p)?na(p):Ta(p);if(em&&p[em])return Zu(p[em]());var b=Kr(p),E=b==Gt?ch:b==$e?$u:qd;return E(p)}function wh(p){if(!p)return p===0?p:0;if(p=vo(p),p===lt||p===-1/0){var b=p<0?-1:1;return b*De}return p===p?p:0}function ln(p){var b=wh(p),E=b%1;return b===b?E?b-E:b:0}function XT(p){return p?sc(ln(p),0,Ke):0}function vo(p){if(typeof p=="number")return p;if(Ka(p))return et;if(Is(p)){var b=typeof p.valueOf=="function"?p.valueOf():p;p=Is(b)?b+"":b}if(typeof p!="string")return p===0?p:+p;p=qo(p);var E=it.test(p);return E||Tt.test(p)?vl(p.slice(2),E?2:8):Vt.test(p)?et:+p}function QT(p){return xl(p,Ea(p))}function T5(p){return p?sc(ln(p),-9007199254740991,st):p===0?p:0}function ts(p){return p==null?"":Wa(p)}var x5=Od(function(p,b){if(cm(b)||xa(b)){xl(b,br(b),p);return}for(var E in b)ns.call(b,E)&&rm(p,E,b[E])}),JT=Od(function(p,b){xl(b,Ea(b),p)}),ey=Od(function(p,b,E,H){xl(b,Ea(b),p,H)}),E5=Od(function(p,b,E,H){xl(b,br(b),p,H)}),V5=bh(I_);function k5(p,b){var E=Md(p);return b==null?E:kP(E,b)}var C5=mn(function(p,b){p=ei(p);var E=-1,H=b.length,he=H>2?b[2]:t;for(he&&ra(b[0],b[1],he)&&(H=1);++E<H;)for(var ve=b[E],Me=Ea(ve),ze=-1,Je=Me.length;++ze<Je;){var St=Me[ze],Pt=p[St];(Pt===t||Uo(Pt,Pl[St])&&!ns.call(p,St))&&(p[St]=ve[St])}return p}),D5=mn(function(p){return p.push(t,fT),Un(ZT,t,p)});function I5(p,b){return iu(p,Li(b,3),Tl)}function L5(p,b){return iu(p,Li(b,3),M_)}function M5(p,b){return p==null?p:L_(p,Li(b,3),Ea)}function O5(p,b){return p==null?p:MP(p,Li(b,3),Ea)}function N5(p,b){return p&&Tl(p,Li(b,3))}function R5(p,b){return p&&M_(p,Li(b,3))}function B5(p){return p==null?[]:O0(p,br(p))}function q5(p){return p==null?[]:O0(p,Ea(p))}function d1(p,b,E){var H=p==null?t:rc(p,b);return H===t?E:H}function z5(p,b){return p!=null&&yT(p,b,hN)}function p1(p,b){return p!=null&&yT(p,b,uN)}var F5=hT(function(p,b,E){b!=null&&typeof b.toString!="function"&&(b=w0.call(b)),p[b]=E},m1(Va)),H5=hT(function(p,b,E){b!=null&&typeof b.toString!="function"&&(b=w0.call(b)),ns.call(p,b)?p[b].push(E):p[b]=[E]},Li),U5=mn(om);function br(p){return xa(p)?EP(p):B_(p)}function Ea(p){return xa(p)?EP(p,!0):_N(p)}function G5(p,b){var E={};return b=Li(b,3),Tl(p,function(H,he,ve){yh(E,b(H,he,ve),H)}),E}function W5(p,b){var E={};return b=Li(b,3),Tl(p,function(H,he,ve){yh(E,he,b(H,he,ve))}),E}var K5=Od(function(p,b,E){N0(p,b,E)}),ZT=Od(function(p,b,E,H){N0(p,b,E,H)}),Y5=bh(function(p,b){var E={};if(p==null)return E;var H=!1;b=As(b,function(ve){return ve=lu(ve,p),H||(H=ve.length>1),ve}),xl(p,Z_(p),E),H&&(E=mo(E,f|g|v,FN));for(var he=b.length;he--;)G_(E,b[he]);return E});function j5(p,b){return $T(p,J0(Li(b)))}var X5=bh(function(p,b){return p==null?{}:wN(p,b)});function $T(p,b){if(p==null)return{};var E=As(Z_(p),function(H){return[H]});return b=Li(b),GP(p,E,function(H,he){return b(H,he[0])})}function Q5(p,b,E){b=lu(b,p);var H=-1,he=b.length;for(he||(he=1,p=t);++H<he;){var ve=p==null?t:p[El(b[H])];ve===t&&(H=he,ve=E),p=Ah(ve)?ve.call(p):ve}return p}function J5(p,b,E){return p==null?p:hm(p,b,E)}function Z5(p,b,E,H){return H=typeof H=="function"?H:t,p==null?p:hm(p,b,E,H)}var ex=dT(br),tx=dT(Ea);function $5(p,b,E){var H=sn(p),he=H||uu(p)||Bd(p);if(b=Li(b,4),E==null){var ve=p&&p.constructor;he?E=H?new ve:[]:Is(p)?E=Ah(ve)?Md(T0(p)):{}:E={}}return(he?Ur:Tl)(p,function(Me,ze,Je){return b(E,Me,ze,Je)}),E}function e4(p,b){return p==null?!0:G_(p,b)}function t4(p,b,E){return p==null?p:XP(p,b,Y_(E))}function i4(p,b,E,H){return H=typeof H=="function"?H:t,p==null?p:XP(p,b,Y_(E),H)}function qd(p){return p==null?[]:Qu(p,br(p))}function n4(p){return p==null?[]:Qu(p,Ea(p))}function s4(p,b,E){return E===t&&(E=b,b=t),E!==t&&(E=vo(E),E=E===E?E:0),b!==t&&(b=vo(b),b=b===b?b:0),sc(vo(p),b,E)}function r4(p,b,E){return b=wh(b),E===t?(E=b,b=0):E=wh(E),p=vo(p),cN(p,b,E)}function a4(p,b,E){if(E&&typeof E!="boolean"&&ra(p,b,E)&&(b=E=t),E===t&&(typeof b=="boolean"?(E=b,b=t):typeof p=="boolean"&&(E=p,p=t)),p===t&&b===t?(p=0,b=1):(p=wh(p),b===t?(b=p,p=0):b=wh(b)),p>b){var H=p;p=b,b=H}if(E||p%1||b%1){var he=TP();return Wr(p+he*(b-p+yl("1e-"+((he+"").length-1))),b)}return F_(p,b)}var o4=Nd(function(p,b,E){return b=b.toLowerCase(),p+(E?ix(b):b)});function ix(p){return f1(ts(p).toLowerCase())}function nx(p){return p=ts(p),p&&p.replace(ft,zo).replace(oe,"")}function l4(p,b,E){p=ts(p),b=Wa(b);var H=p.length;E=E===t?H:sc(ln(E),0,H);var he=E;return E-=b.length,E>=0&&p.slice(E,he)==b}function h4(p){return p=ts(p),p&&ee.test(p)?p.replace(se,Vd):p}function u4(p){return p=ts(p),p&&Ve.test(p)?p.replace(we,"\\$&"):p}var c4=Nd(function(p,b,E){return p+(E?"-":"")+b.toLowerCase()}),d4=Nd(function(p,b,E){return p+(E?" ":"")+b.toLowerCase()}),p4=aT("toLowerCase");function f4(p,b,E){p=ts(p),b=ln(b);var H=b?su(p):0;if(!b||H>=b)return p;var he=(b-H)/2;return H0(k0(he),E)+p+H0(V0(he),E)}function m4(p,b,E){p=ts(p),b=ln(b);var H=b?su(p):0;return b&&H<b?p+H0(b-H,E):p}function g4(p,b,E){p=ts(p),b=ln(b);var H=b?su(p):0;return b&&H<b?H0(b-H,E)+p:p}function y4(p,b,E){return E||b==null?b=0:b&&(b=+b),PO(ts(p).replace(Be,""),b||0)}function v4(p,b,E){return(E?ra(p,b,E):b===t)?b=1:b=ln(b),H_(ts(p),b)}function b4(){var p=arguments,b=ts(p[0]);return p.length<3?b:b.replace(p[1],p[2])}var _4=Nd(function(p,b,E){return p+(E?"_":"")+b.toLowerCase()});function A4(p,b,E){return E&&typeof E!="number"&&ra(p,b,E)&&(b=E=t),E=E===t?Ke:E>>>0,E?(p=ts(p),p&&(typeof b=="string"||b!=null&&!c1(b))&&(b=Wa(b),!b&&nu(p))?hu(na(p),0,E):p.split(b,E)):[]}var w4=Nd(function(p,b,E){return p+(E?" ":"")+f1(b)});function S4(p,b,E){return p=ts(p),E=E==null?0:sc(ln(E),0,p.length),b=Wa(b),p.slice(E,E+b.length)==b}function P4(p,b,E){var H=ge.templateSettings;E&&ra(p,b,E)&&(b=t),p=ts(p),b=ey({},b,H,pT);var he=ey({},b.imports,H.imports,pT),ve=br(he),Me=Qu(he,ve),ze,Je,St=0,Pt=b.interpolate||Rt,Lt="__p += '",ti=Ci((b.escape||Rt).source+"|"+Pt.source+"|"+(Pt===re?nt:Rt).source+"|"+(b.evaluate||Rt).source+"|$","g"),yi="//# sourceURL="+(ns.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wi+"]")+`
`;p.replace(ti,function(Ri,An,In,Ya,aa,ja){return In||(In=Ya),Lt+=p.slice(St,ja).replace(Jt,S_),An&&(ze=!0,Lt+=`' +
__e(`+An+`) +
'`),aa&&(Je=!0,Lt+=`';
`+aa+`;
__p += '`),In&&(Lt+=`' +
((__t = (`+In+`)) == null ? '' : __t) +
'`),St=ja+Ri.length,Ri}),Lt+=`';
`;var Ni=ns.call(b,"variable")&&b.variable;if(!Ni)Lt=`with (obj) {
`+Lt+`
}
`;else if(Ue.test(Ni))throw new Ie(o);Lt=(Je?Lt.replace(G,""):Lt).replace(U,"$1").replace(ae,"$1;"),Lt="function("+(Ni||"obj")+`) {
`+(Ni?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ze?", __e = _.escape":"")+(Je?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Lt+`return __p
}`;var dn=rx(function(){return Ze(ve,yi+"return "+Lt).apply(t,Me)});if(dn.source=Lt,u1(dn))throw dn;return dn}function T4(p){return ts(p).toLowerCase()}function x4(p){return ts(p).toUpperCase()}function E4(p,b,E){if(p=ts(p),p&&(E||b===t))return qo(p);if(!p||!(b=Wa(b)))return p;var H=na(p),he=na(b),ve=Ju(H,he),Me=Sl(H,he)+1;return hu(H,ve,Me).join("")}function V4(p,b,E){if(p=ts(p),p&&(E||b===t))return p.slice(0,Cd(p)+1);if(!p||!(b=Wa(b)))return p;var H=na(p),he=Sl(H,na(b))+1;return hu(H,0,he).join("")}function k4(p,b,E){if(p=ts(p),p&&(E||b===t))return p.replace(Be,"");if(!p||!(b=Wa(b)))return p;var H=na(p),he=Ju(H,na(b));return hu(H,he).join("")}function C4(p,b){var E=me,H=ue;if(Is(b)){var he="separator"in b?b.separator:he;E="length"in b?ln(b.length):E,H="omission"in b?Wa(b.omission):H}p=ts(p);var ve=p.length;if(nu(p)){var Me=na(p);ve=Me.length}if(E>=ve)return p;var ze=E-su(H);if(ze<1)return H;var Je=Me?hu(Me,0,ze).join(""):p.slice(0,ze);if(he===t)return Je+H;if(Me&&(ze+=Je.length-ze),c1(he)){if(p.slice(ze).search(he)){var St,Pt=Je;for(he.global||(he=Ci(he.source,ts(yt.exec(he))+"g")),he.lastIndex=0;St=he.exec(Pt);)var Lt=St.index;Je=Je.slice(0,Lt===t?ze:Lt)}}else if(p.indexOf(Wa(he),ze)!=ze){var ti=Je.lastIndexOf(he);ti>-1&&(Je=Je.slice(0,ti))}return Je+H}function D4(p){return p=ts(p),p&&Y.test(p)?p.replace(Q,T_):p}var I4=Nd(function(p,b,E){return p+(E?" ":"")+b.toUpperCase()}),f1=aT("toUpperCase");function sx(p,b,E){return p=ts(p),b=E?t:b,b===t?Ga(p)?x_(p):A0(p):p.match(b)||[]}var rx=mn(function(p,b){try{return Un(p,t,b)}catch(E){return u1(E)?E:new Ie(E)}}),L4=bh(function(p,b){return Ur(b,function(E){E=El(E),yh(p,E,l1(p[E],p))}),p});function M4(p){var b=p==null?0:p.length,E=Li();return p=b?As(p,function(H){if(typeof H[1]!="function")throw new Ji(a);return[E(H[0]),H[1]]}):[],mn(function(H){for(var he=-1;++he<b;){var ve=p[he];if(Un(ve[0],this,H))return Un(ve[1],this,H)}})}function O4(p){return aN(mo(p,f))}function m1(p){return function(){return p}}function N4(p,b){return p==null||p!==p?b:p}var R4=lT(),B4=lT(!0);function Va(p){return p}function g1(p){return BP(typeof p=="function"?p:mo(p,f))}function q4(p){return zP(mo(p,f))}function z4(p,b){return FP(p,mo(b,f))}var F4=mn(function(p,b){return function(E){return om(E,p,b)}}),H4=mn(function(p,b){return function(E){return om(p,E,b)}});function y1(p,b,E){var H=br(b),he=O0(b,H);E==null&&!(Is(b)&&(he.length||!H.length))&&(E=b,b=p,p=this,he=O0(b,br(b)));var ve=!(Is(E)&&"chain"in E)||!!E.chain,Me=Ah(p);return Ur(he,function(ze){var Je=b[ze];p[ze]=Je,Me&&(p.prototype[ze]=function(){var St=this.__chain__;if(ve||St){var Pt=p(this.__wrapped__),Lt=Pt.__actions__=Ta(this.__actions__);return Lt.push({func:Je,args:arguments,thisArg:p}),Pt.__chain__=St,Pt}return Je.apply(p,wl([this.value()],arguments))})}),p}function U4(){return dr._===this&&(dr._=mO),this}function v1(){}function G4(p){return p=ln(p),mn(function(b){return HP(b,p)})}var W4=X_(As),K4=X_(_0),Y4=X_(Xf);function ax(p){return i1(p)?Pd(El(p)):SN(p)}function j4(p){return function(b){return p==null?t:rc(p,b)}}var X4=uT(),Q4=uT(!0);function b1(){return[]}function _1(){return!1}function J4(){return{}}function Z4(){return""}function $4(){return!0}function eq(p,b){if(p=ln(p),p<1||p>st)return[];var E=Ke,H=Wr(p,Ke);b=Li(b),p-=Ke;for(var he=Ed(H,b);++E<p;)b(E);return he}function tq(p){return sn(p)?As(p,El):Ka(p)?[p]:Ta(xT(ts(p)))}function iq(p){var b=++pO;return ts(p)+b}var nq=F0(function(p,b){return p+b},0),sq=Q_("ceil"),rq=F0(function(p,b){return p/b},1),aq=Q_("floor");function oq(p){return p&&p.length?M0(p,Va,O_):t}function lq(p,b){return p&&p.length?M0(p,Li(b,2),O_):t}function hq(p){return uh(p,Va)}function uq(p,b){return uh(p,Li(b,2))}function cq(p){return p&&p.length?M0(p,Va,q_):t}function dq(p,b){return p&&p.length?M0(p,Li(b,2),q_):t}var pq=F0(function(p,b){return p*b},1),fq=Q_("round"),mq=F0(function(p,b){return p-b},0);function gq(p){return p&&p.length?xd(p,Va):0}function yq(p,b){return p&&p.length?xd(p,Li(b,2)):0}return ge.after=qB,ge.ary=RT,ge.assign=x5,ge.assignIn=JT,ge.assignInWith=ey,ge.assignWith=E5,ge.at=V5,ge.before=BT,ge.bind=l1,ge.bindAll=L4,ge.bindKey=qT,ge.castArray=JB,ge.chain=MT,ge.chunk=aR,ge.compact=oR,ge.concat=lR,ge.cond=M4,ge.conforms=O4,ge.constant=m1,ge.countBy=gB,ge.create=k5,ge.curry=zT,ge.curryRight=FT,ge.debounce=HT,ge.defaults=C5,ge.defaultsDeep=D5,ge.defer=zB,ge.delay=FB,ge.difference=hR,ge.differenceBy=uR,ge.differenceWith=cR,ge.drop=dR,ge.dropRight=pR,ge.dropRightWhile=fR,ge.dropWhile=mR,ge.fill=gR,ge.filter=vB,ge.flatMap=AB,ge.flatMapDeep=wB,ge.flatMapDepth=SB,ge.flatten=CT,ge.flattenDeep=yR,ge.flattenDepth=vR,ge.flip=HB,ge.flow=R4,ge.flowRight=B4,ge.fromPairs=bR,ge.functions=B5,ge.functionsIn=q5,ge.groupBy=PB,ge.initial=AR,ge.intersection=wR,ge.intersectionBy=SR,ge.intersectionWith=PR,ge.invert=F5,ge.invertBy=H5,ge.invokeMap=xB,ge.iteratee=g1,ge.keyBy=EB,ge.keys=br,ge.keysIn=Ea,ge.map=j0,ge.mapKeys=G5,ge.mapValues=W5,ge.matches=q4,ge.matchesProperty=z4,ge.memoize=Q0,ge.merge=K5,ge.mergeWith=ZT,ge.method=F4,ge.methodOf=H4,ge.mixin=y1,ge.negate=J0,ge.nthArg=G4,ge.omit=Y5,ge.omitBy=j5,ge.once=UB,ge.orderBy=VB,ge.over=W4,ge.overArgs=GB,ge.overEvery=K4,ge.overSome=Y4,ge.partial=h1,ge.partialRight=UT,ge.partition=kB,ge.pick=X5,ge.pickBy=$T,ge.property=ax,ge.propertyOf=j4,ge.pull=VR,ge.pullAll=IT,ge.pullAllBy=kR,ge.pullAllWith=CR,ge.pullAt=DR,ge.range=X4,ge.rangeRight=Q4,ge.rearg=WB,ge.reject=IB,ge.remove=IR,ge.rest=KB,ge.reverse=a1,ge.sampleSize=MB,ge.set=J5,ge.setWith=Z5,ge.shuffle=OB,ge.slice=LR,ge.sortBy=BB,ge.sortedUniq=zR,ge.sortedUniqBy=FR,ge.split=A4,ge.spread=YB,ge.tail=HR,ge.take=UR,ge.takeRight=GR,ge.takeRightWhile=WR,ge.takeWhile=KR,ge.tap=oB,ge.throttle=jB,ge.thru=Y0,ge.toArray=jT,ge.toPairs=ex,ge.toPairsIn=tx,ge.toPath=tq,ge.toPlainObject=QT,ge.transform=$5,ge.unary=XB,ge.union=YR,ge.unionBy=jR,ge.unionWith=XR,ge.uniq=QR,ge.uniqBy=JR,ge.uniqWith=ZR,ge.unset=e4,ge.unzip=o1,ge.unzipWith=LT,ge.update=t4,ge.updateWith=i4,ge.values=qd,ge.valuesIn=n4,ge.without=$R,ge.words=sx,ge.wrap=QB,ge.xor=eB,ge.xorBy=tB,ge.xorWith=iB,ge.zip=nB,ge.zipObject=sB,ge.zipObjectDeep=rB,ge.zipWith=aB,ge.entries=ex,ge.entriesIn=tx,ge.extend=JT,ge.extendWith=ey,y1(ge,ge),ge.add=nq,ge.attempt=rx,ge.camelCase=o4,ge.capitalize=ix,ge.ceil=sq,ge.clamp=s4,ge.clone=ZB,ge.cloneDeep=e5,ge.cloneDeepWith=t5,ge.cloneWith=$B,ge.conformsTo=i5,ge.deburr=nx,ge.defaultTo=N4,ge.divide=rq,ge.endsWith=l4,ge.eq=Uo,ge.escape=h4,ge.escapeRegExp=u4,ge.every=yB,ge.find=bB,ge.findIndex=VT,ge.findKey=I5,ge.findLast=_B,ge.findLastIndex=kT,ge.findLastKey=L5,ge.floor=aq,ge.forEach=OT,ge.forEachRight=NT,ge.forIn=M5,ge.forInRight=O5,ge.forOwn=N5,ge.forOwnRight=R5,ge.get=d1,ge.gt=n5,ge.gte=s5,ge.has=z5,ge.hasIn=p1,ge.head=DT,ge.identity=Va,ge.includes=TB,ge.indexOf=_R,ge.inRange=r4,ge.invoke=U5,ge.isArguments=lc,ge.isArray=sn,ge.isArrayBuffer=r5,ge.isArrayLike=xa,ge.isArrayLikeObject=Xs,ge.isBoolean=a5,ge.isBuffer=uu,ge.isDate=o5,ge.isElement=l5,ge.isEmpty=h5,ge.isEqual=u5,ge.isEqualWith=c5,ge.isError=u1,ge.isFinite=d5,ge.isFunction=Ah,ge.isInteger=GT,ge.isLength=Z0,ge.isMap=WT,ge.isMatch=p5,ge.isMatchWith=f5,ge.isNaN=m5,ge.isNative=g5,ge.isNil=v5,ge.isNull=y5,ge.isNumber=KT,ge.isObject=Is,ge.isObjectLike=zs,ge.isPlainObject=pm,ge.isRegExp=c1,ge.isSafeInteger=b5,ge.isSet=YT,ge.isString=$0,ge.isSymbol=Ka,ge.isTypedArray=Bd,ge.isUndefined=_5,ge.isWeakMap=A5,ge.isWeakSet=w5,ge.join=TR,ge.kebabCase=c4,ge.last=yo,ge.lastIndexOf=xR,ge.lowerCase=d4,ge.lowerFirst=p4,ge.lt=S5,ge.lte=P5,ge.max=oq,ge.maxBy=lq,ge.mean=hq,ge.meanBy=uq,ge.min=cq,ge.minBy=dq,ge.stubArray=b1,ge.stubFalse=_1,ge.stubObject=J4,ge.stubString=Z4,ge.stubTrue=$4,ge.multiply=pq,ge.nth=ER,ge.noConflict=U4,ge.noop=v1,ge.now=X0,ge.pad=f4,ge.padEnd=m4,ge.padStart=g4,ge.parseInt=y4,ge.random=a4,ge.reduce=CB,ge.reduceRight=DB,ge.repeat=v4,ge.replace=b4,ge.result=Q5,ge.round=fq,ge.runInContext=Ye,ge.sample=LB,ge.size=NB,ge.snakeCase=_4,ge.some=RB,ge.sortedIndex=MR,ge.sortedIndexBy=OR,ge.sortedIndexOf=NR,ge.sortedLastIndex=RR,ge.sortedLastIndexBy=BR,ge.sortedLastIndexOf=qR,ge.startCase=w4,ge.startsWith=S4,ge.subtract=mq,ge.sum=gq,ge.sumBy=yq,ge.template=P4,ge.times=eq,ge.toFinite=wh,ge.toInteger=ln,ge.toLength=XT,ge.toLower=T4,ge.toNumber=vo,ge.toSafeInteger=T5,ge.toString=ts,ge.toUpper=x4,ge.trim=E4,ge.trimEnd=V4,ge.trimStart=k4,ge.truncate=C4,ge.unescape=D4,ge.uniqueId=iq,ge.upperCase=I4,ge.upperFirst=f1,ge.each=OT,ge.eachRight=NT,ge.first=DT,y1(ge,function(){var p={};return Tl(ge,function(b,E){ns.call(ge.prototype,E)||(p[E]=b)}),p}(),{chain:!1}),ge.VERSION=n,Ur(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){ge[p].placeholder=ge}),Ur(["drop","take"],function(p,b){Tn.prototype[p]=function(E){E=E===t?1:fr(ln(E),0);var H=this.__filtered__&&!b?new Tn(this):this.clone();return H.__filtered__?H.__takeCount__=Wr(E,H.__takeCount__):H.__views__.push({size:Wr(E,Ke),type:p+(H.__dir__<0?"Right":"")}),H},Tn.prototype[p+"Right"]=function(E){return this.reverse()[p](E).reverse()}}),Ur(["filter","map","takeWhile"],function(p,b){var E=b+1,H=E==Re||E==Le;Tn.prototype[p]=function(he){var ve=this.clone();return ve.__iteratees__.push({iteratee:Li(he,3),type:E}),ve.__filtered__=ve.__filtered__||H,ve}}),Ur(["head","last"],function(p,b){var E="take"+(b?"Right":"");Tn.prototype[p]=function(){return this[E](1).value()[0]}}),Ur(["initial","tail"],function(p,b){var E="drop"+(b?"":"Right");Tn.prototype[p]=function(){return this.__filtered__?new Tn(this):this[E](1)}}),Tn.prototype.compact=function(){return this.filter(Va)},Tn.prototype.find=function(p){return this.filter(p).head()},Tn.prototype.findLast=function(p){return this.reverse().find(p)},Tn.prototype.invokeMap=mn(function(p,b){return typeof p=="function"?new Tn(this):this.map(function(E){return om(E,p,b)})}),Tn.prototype.reject=function(p){return this.filter(J0(Li(p)))},Tn.prototype.slice=function(p,b){p=ln(p);var E=this;return E.__filtered__&&(p>0||b<0)?new Tn(E):(p<0?E=E.takeRight(-p):p&&(E=E.drop(p)),b!==t&&(b=ln(b),E=b<0?E.dropRight(-b):E.take(b-p)),E)},Tn.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Tn.prototype.toArray=function(){return this.take(Ke)},Tl(Tn.prototype,function(p,b){var E=/^(?:filter|find|map|reject)|While$/.test(b),H=/^(?:head|last)$/.test(b),he=ge[H?"take"+(b=="last"?"Right":""):b],ve=H||/^find/.test(b);he&&(ge.prototype[b]=function(){var Me=this.__wrapped__,ze=H?[1]:arguments,Je=Me instanceof Tn,St=ze[0],Pt=Je||sn(Me),Lt=function(An){var In=he.apply(ge,wl([An],ze));return H&&ti?In[0]:In};Pt&&E&&typeof St=="function"&&St.length!=1&&(Je=Pt=!1);var ti=this.__chain__,yi=!!this.__actions__.length,Ni=ve&&!ti,dn=Je&&!yi;if(!ve&&Pt){Me=dn?Me:new Tn(this);var Ri=p.apply(Me,ze);return Ri.__actions__.push({func:Y0,args:[Lt],thisArg:t}),new fo(Ri,ti)}return Ni&&dn?p.apply(this,ze):(Ri=this.thru(Lt),Ni?H?Ri.value()[0]:Ri.value():Ri)})}),Ur(["pop","push","shift","sort","splice","unshift"],function(p){var b=Gr[p],E=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",H=/^(?:pop|shift)$/.test(p);ge.prototype[p]=function(){var he=arguments;if(H&&!this.__chain__){var ve=this.value();return b.apply(sn(ve)?ve:[],he)}return this[E](function(Me){return b.apply(sn(Me)?Me:[],he)})}}),Tl(Tn.prototype,function(p,b){var E=ge[b];if(E){var H=E.name+"";ns.call(Ld,H)||(Ld[H]=[]),Ld[H].push({name:b,func:E})}}),Ld[z0(t,T).name]=[{name:"wrapper",func:t}],Tn.prototype.clone=DO,Tn.prototype.reverse=IO,Tn.prototype.value=LO,ge.prototype.at=lB,ge.prototype.chain=hB,ge.prototype.commit=uB,ge.prototype.next=cB,ge.prototype.plant=pB,ge.prototype.reverse=fB,ge.prototype.toJSON=ge.prototype.valueOf=ge.prototype.value=mB,ge.prototype.first=ge.prototype.head,em&&(ge.prototype[em]=dB),ge},dh=E_();bl?((bl.exports=dh)._=dh,Gf._=dh):dr._=dh}).call($s)})(Jy,Jy.exports);var qq=Jy.exports;const ie=t0(qq);self.phet=self.phet||{};self.phet.chipper=self.phet.chipper||{};const zq={aa:{locale3:"aar",englishName:"Afar",localizedName:"Qafar af",direction:"ltr"},ab:{locale3:"abk",englishName:"Abkhazian",localizedName:"аҧсуа бызшәа",direction:"ltr"},ac:{locale3:"ace",englishName:"Achinese",localizedName:"بهسا اچيه",direction:"rtl"},ad:{locale3:"ady",englishName:"Adyghe",localizedName:"Адыгабзэ",direction:"ltr"},af:{locale3:"afr",englishName:"Afrikaans",localizedName:"Afrikaans",direction:"ltr"},ag:{locale3:"anp",englishName:"Angika",localizedName:"अंगिका",direction:"ltr"},ah:{locale3:"mas",englishName:"Masai",localizedName:"ɔl Maa",direction:"ltr"},ai:{locale3:"ain",englishName:"Ainu",localizedName:"アイヌ・イタㇰ",direction:"ltr"},aj:{locale3:"nog",englishName:"Nogai",localizedName:"Ногай тили",direction:"ltr"},ak:{locale3:"aka",englishName:"Akan",localizedName:"Akan",direction:"ltr"},ak_FT:{locale3:"fat",englishName:"Fanti",localizedName:"Mfantse",direction:"ltr",fallbackLocales:["ak"]},al:{locale3:"ale",englishName:"Aleut",localizedName:"Уна́ӈам тунуу́",direction:"ltr"},am:{locale3:"amh",englishName:"Amharic",localizedName:"አማርኛ",direction:"ltr"},an:{locale3:"arg",englishName:"Aragonese",localizedName:"aragonés",direction:"ltr"},ao:{locale3:"mak",englishName:"Makasar",localizedName:"ᨅᨔ ᨆᨀᨔᨑ",direction:"ltr"},ap:{locale3:"arp",englishName:"Arapaho",localizedName:"Hinónoʼeitíít",direction:"ltr"},ar:{locale3:"ara",englishName:"Arabic",localizedName:"العربية",direction:"rtl"},ar_AE:{englishName:"Arabic (U.A.E.)",localizedName:"العربية (الإمارات العربية المتحدة)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_BH:{englishName:"Arabic (Bahrain)",localizedName:"العربية (البحرين)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_DJ:{englishName:"Arabic (Djibouti)",localizedName:"العربية (جيبوتي)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_DZ:{englishName:"Arabic (Algeria)",localizedName:"العربية (الجزائر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_EG:{englishName:"Arabic (Egypt)",localizedName:"العربية (مصر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_EH:{englishName:"Arabic (Sahrawi Republic)",localizedName:"العربية (الجمهورية الصحراوية)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_ER:{englishName:"Arabic (Eritrea)",localizedName:"العربية (إريتريا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_IQ:{englishName:"Arabic (Iraq)",localizedName:"العربية (العراق)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_JO:{englishName:"Arabic (Jordan)",localizedName:"العربية (الأردن)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_KM:{englishName:"Arabic (Comoros)",localizedName:"العربية (جزر القمر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_KW:{englishName:"Arabic (Kuwait)",localizedName:"العربية (الكويت)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_LB:{englishName:"Arabic (Lebanon)",localizedName:"العربية (لبنان)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_LY:{englishName:"Arabic (Libya)",localizedName:"العربية (ليبيا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_MA:{locale3:"ary",englishName:"Arabic, Morocco",localizedName:"العربية (المغرب)",direction:"rtl",fallbackLocales:["ar"]},ar_MR:{englishName:"Arabic (Mauritania)",localizedName:"العربية (موريتانيا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_OM:{englishName:"Arabic (Oman)",localizedName:"العربية (عُمان)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_QA:{englishName:"Arabic (Qatar)",localizedName:"العربية (قطر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SA:{englishName:"Arabic, Saudi Arabia",localizedName:"العربية (السعودية)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SD:{englishName:"Arabic (Sudan)",localizedName:"العربية (السودان)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SO:{englishName:"Arabic (Somalia)",localizedName:"العربية (الصومال)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SY:{englishName:"Arabic (Syria)",localizedName:"العربية (سوريا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_TD:{englishName:"Arabic (Chad)",localizedName:"العربية (تشاد)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_TN:{englishName:"Arabic (Tunisia)",localizedName:"العربية (تونس)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_YE:{englishName:"Arabic (Yemen)",localizedName:"العربية (اليمن)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},as:{locale3:"asm",englishName:"Assamese",localizedName:"অসমীয়া",direction:"ltr"},at:{locale3:"ast",englishName:"Asturian",localizedName:"Asturianu",direction:"ltr"},au:{locale3:"awa",englishName:"Awadhi",localizedName:"अवधी",direction:"ltr"},av:{locale3:"ava",englishName:"Avaric",localizedName:"авар мацӀ",direction:"ltr"},aw:{locale3:"arw",englishName:"Arawak",localizedName:"Lokono",direction:"ltr"},ax:{locale3:"mai",englishName:"Maithili",localizedName:"मैथिली",direction:"ltr"},ay:{locale3:"aym",englishName:"Aymara",localizedName:"aymar aru",direction:"ltr"},az:{locale3:"aze",englishName:"Azerbaijani",localizedName:"azərbaycan dili",direction:"ltr"},ba:{locale3:"bak",englishName:"Bashkir",localizedName:"башҡорт теле",direction:"ltr"},bb:{locale3:"bem",englishName:"Bemba",localizedName:"Chibemba",direction:"ltr"},bc:{locale3:"bal",englishName:"Baluchi",localizedName:"بلۏچی",direction:"rtl"},bd:{locale3:"kmb",englishName:"Kimbundu",localizedName:"North Mbundu",direction:"ltr"},be:{locale3:"bel",englishName:"Belarusian",localizedName:"беларуская мова",direction:"ltr"},bg:{locale3:"bul",englishName:"Bulgarian",localizedName:"български език",direction:"ltr"},bi:{locale3:"bis",englishName:"Bislama",localizedName:"Bislama",direction:"ltr"},bj:{locale3:"bej",englishName:"Beja",localizedName:"Bidhaawyeet",direction:"ltr"},bk:{locale3:"bik",englishName:"Bikol",localizedName:"Bikol",direction:"ltr"},bl:{locale3:"ban",englishName:"Balinese",localizedName:"ᬪᬵᬱᬩᬮᬶ",direction:"ltr"},bm:{locale3:"bam",englishName:"Bambara",localizedName:"bamanankan",direction:"ltr"},bn:{locale3:"ben",englishName:"Bengali",localizedName:"বাংলা",direction:"ltr"},bo:{locale3:"bod",englishName:"Tibetan",localizedName:"བོད་ཡིག",direction:"ltr"},bp:{locale3:"bho",englishName:"Bhojpuri",localizedName:"भोजपुरी",direction:"ltr"},bq:{locale3:"bug",englishName:"Buginese",localizedName:"ᨅᨔ ᨕᨘᨁᨗ",direction:"ltr"},br:{locale3:"bre",englishName:"Breton",localizedName:"brezhoneg",direction:"ltr"},bs:{locale3:"bos",englishName:"Bosnian",localizedName:"bosanski jezik",direction:"ltr"},bt:{locale3:"min",englishName:"Minangkabau",localizedName:"Baso Minang",direction:"ltr"},bu:{locale3:"bua",englishName:"Buriat",localizedName:"буряад хэлэн",direction:"ltr"},bx:{locale3:"bnc",englishName:"Bontok",localizedName:"Finallig",direction:"ltr"},by:{locale3:"byn",englishName:"Blin",localizedName:"ብሊና",direction:"ltr"},ca:{locale3:"cat",englishName:"Catalan",localizedName:"Català",direction:"ltr"},cb:{locale3:"ceb",englishName:"Cebuano",localizedName:"Sinugbuanong Binisayâ",direction:"ltr"},cc:{locale3:"chk",englishName:"Chuukese",localizedName:"Trukese",direction:"ltr"},cd:{locale3:"cad",englishName:"Caddo",localizedName:"Hasí:nay",direction:"ltr"},ce:{locale3:"che",englishName:"Chechen",localizedName:"нохчийн мотт",direction:"ltr"},ch:{locale3:"cha",englishName:"Chamorro",localizedName:"Chamoru",direction:"ltr"},ci:{locale3:"scn",englishName:"Sicilian",localizedName:"Sicilianu",direction:"ltr"},cj:{locale3:"chy",englishName:"Cheyenne",localizedName:"Tsėhésenėstsestȯtse",direction:"ltr"},ck:{locale3:"chr",englishName:"Cherokee",localizedName:"ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ",direction:"ltr"},cl:{locale3:"lun",englishName:"Lunda",localizedName:"Chilunda",direction:"ltr"},cm:{locale3:"chm",englishName:"Mari",localizedName:"марий йылме",direction:"ltr"},cn:{locale3:"chn",englishName:"Chinook jargon",localizedName:"chinuk wawa",direction:"ltr"},co:{locale3:"cos",englishName:"Corsican",localizedName:"corsu",direction:"ltr"},cp:{locale3:"chp",englishName:"Chipewyan",localizedName:"ᑌᓀᓱᒼᕄᓀ (Dënesųłiné)",direction:"ltr"},cq:{locale3:"cak",englishName:"kaqchikel",localizedName:"Kaqchikel Chʼabʼäl",direction:"ltr"},cr:{locale3:"cre",englishName:"Cree",localizedName:"ᓀᐦᐃᔭᐍᐏᐣ",direction:"ltr"},cs:{locale3:"ces",englishName:"Czech",localizedName:"čeština",direction:"ltr"},ct:{locale3:"crh",englishName:"Crimean Tatar",localizedName:"Къырымтатарджа",direction:"ltr"},cv:{locale3:"chv",englishName:"Chuvash",localizedName:"чӑваш чӗлхи",direction:"ltr"},cw:{locale3:"cho",englishName:"Choctaw",localizedName:"Chahta'",direction:"ltr"},cy:{locale3:"cym",englishName:"Welsh",localizedName:"Cymraeg",direction:"ltr"},cz:{locale3:"coz",englishName:"Chocho",localizedName:"Ngiwa",direction:"ltr"},da:{locale3:"dan",englishName:"Danish",localizedName:"dansk",direction:"ltr"},db:{locale3:"dgr",englishName:"Dogrib",localizedName:"Tlicho",direction:"ltr"},de:{locale3:"deu",englishName:"German",localizedName:"Deutsch",direction:"ltr"},de_AT:{englishName:"German (Austria)",localizedName:"Deutsch (Österreich)",direction:"ltr",fallbackLocales:["de"]},de_CH:{englishName:"German (Switzerland)",localizedName:"Deutsch (Schweiz)",direction:"ltr",fallbackLocales:["de"]},de_LI:{englishName:"German (Liechtenstein)",localizedName:"Deutsch (Liechtenstein)",direction:"ltr",fallbackLocales:["de"]},de_LU:{englishName:"German (Luxembourg)",localizedName:"Deutsch (Luxemburg)",direction:"ltr",fallbackLocales:["de"]},dg:{locale3:"ada",englishName:"Adangme",localizedName:"Dangme",direction:"ltr"},di:{locale3:"doi",englishName:"Dogri",localizedName:"डोगरी; ڈوگرى",direction:"rtl"},dk:{locale3:"dak",englishName:"Dakota",localizedName:"Dakhótiyapi",direction:"ltr"},dl:{locale3:"del",englishName:"Delaware",localizedName:"Lënapei èlixsuwakàn",direction:"ltr"},dm:{locale3:"sid",englishName:"Sidamo",localizedName:"Sidaamu Afoo",direction:"ltr"},dn:{locale3:"din",englishName:"Dinka",localizedName:"Thuɔŋjäŋ",direction:"ltr"},dr:{locale3:"dar",englishName:"Dargwa",localizedName:"дарган мез",direction:"ltr"},ds:{locale3:"dsb",englishName:"Lower Sorbian",localizedName:"Dolnoserbski",direction:"ltr"},du:{locale3:"dua",englishName:"Duala",localizedName:"Duālā",direction:"ltr"},dv:{locale3:"div",englishName:"Divehi",localizedName:"ދިވެހި,",direction:"rtl"},dw:{locale3:"sad",englishName:"Sandawe",localizedName:"Sandaweeki",direction:"ltr"},dy:{locale3:"dyu",englishName:"Dyula",localizedName:"Julakan",direction:"ltr"},dz:{locale3:"dzo",englishName:"Dzongkha",localizedName:"རྫོང་ཁ",direction:"ltr"},ed:{locale3:"bin",englishName:"Bini",localizedName:"Ẹ̀dó",direction:"ltr"},ee:{locale3:"ewe",englishName:"Ewe",localizedName:"Eʋegbe",direction:"ltr"},ef:{locale3:"efi",englishName:"Efik",localizedName:"Usem Efịk",direction:"ltr"},ek:{locale3:"eka",englishName:"Ekajuk",localizedName:"Ekajuk",direction:"ltr"},el:{locale3:"ell",englishName:"Greek",localizedName:"Ελληνικά",direction:"ltr"},em:{locale3:"den",englishName:"Slave (Athapascan)",localizedName:"Dene K'e",direction:"ltr"},en:{locale3:"eng",englishName:"English",localizedName:"English",direction:"ltr"},en_AU:{englishName:"English (Australia)",localizedName:"English (Australia)",direction:"ltr"},en_BI:{englishName:"English (Burundi)",localizedName:"English (Burundi)",direction:"ltr"},en_BW:{englishName:"English (Botswana)",localizedName:"English (Botswana)",direction:"ltr"},en_BZ:{englishName:"English (Belize)",localizedName:"English (Belize)",direction:"ltr"},en_CA:{englishName:"English, Canada",localizedName:"English (Canada)",direction:"ltr"},en_CB:{englishName:"English (Caribbean)",localizedName:"English (Caribbean)",direction:"ltr"},en_CM:{englishName:"English (Cameroon)",localizedName:"English (Cameroon)",direction:"ltr"},en_ER:{englishName:"English (Eritrea)",localizedName:"English (Eritrea)",direction:"ltr"},en_ET:{englishName:"English (Ethiopia)",localizedName:"English (Ethiopia)",direction:"ltr"},en_GB:{englishName:"English, United Kingdom",localizedName:"English (United Kingdom)",direction:"ltr"},en_GH:{englishName:"English (Ghana)",localizedName:"English (Ghana)",direction:"ltr"},en_GM:{englishName:"English (Gambia)",localizedName:"English (Gambia)",direction:"ltr"},en_IE:{englishName:"English (Ireland)",localizedName:"English (Ireland)",direction:"ltr"},en_IN:{englishName:"English (India)",localizedName:"English (India)",direction:"ltr"},en_JM:{englishName:"English (Jamaica)",localizedName:"English (Jamaica)",direction:"ltr"},en_KE:{englishName:"English (Kenya)",localizedName:"English (Kenya)",direction:"ltr"},en_LR:{englishName:"English (Liberia)",localizedName:"English (Liberia)",direction:"ltr"},en_LS:{englishName:"English (Lesotho)",localizedName:"English (Lesotho)",direction:"ltr"},en_MU:{englishName:"English (Mauritius)",localizedName:"English (Mauritius)",direction:"ltr"},en_MW:{englishName:"English (Malawi)",localizedName:"English (Malawi)",direction:"ltr"},en_MY:{englishName:"English (Malaysia)",localizedName:"English (Malaysia)",direction:"ltr"},en_NA:{englishName:"English (Namibia)",localizedName:"English (Namibia)",direction:"ltr"},en_NG:{englishName:"English (Nigeria)",localizedName:"English (Nigeria)",direction:"ltr"},en_NZ:{englishName:"English (New Zealand)",localizedName:"English (New Zealand)",direction:"ltr"},en_PH:{englishName:"English (Republic of the Philippines)",localizedName:"English (Republic of the Philippines)",direction:"ltr"},en_RW:{englishName:"English (Rwanda)",localizedName:"English (Rwanda)",direction:"ltr"},en_SC:{englishName:"English (Seychelles)",localizedName:"English (Seychelles)",direction:"ltr"},en_SL:{englishName:"English (Sierra Leone)",localizedName:"English (Sierra Leone)",direction:"ltr"},en_SS:{englishName:"English (South Sudan)",localizedName:"English (South Sudan)",direction:"ltr"},en_SZ:{englishName:"English (Eswatini)",localizedName:"English (Eswatini)",direction:"ltr"},en_TT:{englishName:"English (Trinidad and Tobago)",localizedName:"English (Trinidad and Tobago)",direction:"ltr"},en_TZ:{englishName:"English (Tanzania)",localizedName:"English (Tanzania)",direction:"ltr"},en_UG:{englishName:"English (Uganda)",localizedName:"English (Uganda)",direction:"ltr"},en_ZA:{englishName:"English (South Africa)",localizedName:"English (South Africa)",direction:"ltr"},en_ZM:{englishName:"English (Zambia)",localizedName:"English (Zambia)",direction:"ltr"},en_ZW:{englishName:"English (Zimbabwe)",localizedName:"English (Zimbabwe)",direction:"ltr"},er:{locale3:"srr",englishName:"Serer",localizedName:"Seereer",direction:"ltr"},es:{locale3:"spa",englishName:"Spanish",localizedName:"español",direction:"ltr"},es_AR:{englishName:"Spanish (Argentina)",localizedName:"español (Argentina)",direction:"ltr",fallbackLocales:["es"]},es_BO:{englishName:"Spanish (Bolivia)",localizedName:"español (Bolivia)",direction:"ltr",fallbackLocales:["es"]},es_CL:{englishName:"Spanish (Chile)",localizedName:"español (Chile)",direction:"ltr",fallbackLocales:["es"]},es_CO:{englishName:"Spanish, Colombia",localizedName:"español (Colombia)",direction:"ltr",fallbackLocales:["es"]},es_CR:{englishName:"Spanish, Costa Rica",localizedName:"español (Costa Rica)",direction:"ltr",fallbackLocales:["es"]},es_DO:{englishName:"Spanish (Dominican Republic)",localizedName:"español (Dominican Republic)",direction:"ltr",fallbackLocales:["es"]},es_EC:{englishName:"Spanish (Ecuador)",localizedName:"español (Ecuador)",direction:"ltr",fallbackLocales:["es"]},es_ES:{englishName:"Spanish, Spain",localizedName:"español (España)",direction:"ltr",fallbackLocales:["es"]},es_GQ:{englishName:"Spanish (Equatorial Guinea)",localizedName:"español (Equatorial Guinea)",direction:"ltr",fallbackLocales:["es"]},es_GT:{englishName:"Spanish (Guatemala)",localizedName:"español (Guatemala)",direction:"ltr",fallbackLocales:["es"]},es_HN:{englishName:"Spanish (Honduras)",localizedName:"español (Honduras)",direction:"ltr",fallbackLocales:["es"]},es_MX:{englishName:"Spanish, Mexico",localizedName:"español (México)",direction:"ltr",fallbackLocales:["es"]},es_NI:{englishName:"Spanish (Nicaragua)",localizedName:"español (Nicaragua)",direction:"ltr",fallbackLocales:["es"]},es_PA:{englishName:"Spanish (Panama)",localizedName:"español (Panama)",direction:"ltr",fallbackLocales:["es"]},es_PE:{englishName:"Spanish, Peru",localizedName:"español (Perú)",direction:"ltr",fallbackLocales:["es"]},es_PR:{englishName:"Spanish (Puerto Rico)",localizedName:"español (Puerto Rico)",direction:"ltr",fallbackLocales:["es"]},es_PY:{englishName:"Spanish (Paraguay)",localizedName:"español (Paraguay)",direction:"ltr",fallbackLocales:["es"]},es_SV:{englishName:"Spanish (El Salvador)",localizedName:"español (El Salvador)",direction:"ltr",fallbackLocales:["es"]},es_US:{englishName:"Spanish (United States)",localizedName:"español (United States)",direction:"ltr",fallbackLocales:["es"]},es_UY:{englishName:"Spanish (Uruguay)",localizedName:"español (Uruguay)",direction:"ltr",fallbackLocales:["es"]},es_VE:{englishName:"Spanish (Venezuela)",localizedName:"español (Venezuela)",direction:"ltr",fallbackLocales:["es"]},et:{locale3:"est",englishName:"Estonian",localizedName:"eesti",direction:"ltr"},eu:{locale3:"eus",englishName:"Basque",localizedName:"euskara",direction:"ltr"},ew:{locale3:"ewo",englishName:"Ewondo",localizedName:"Beti",direction:"ltr"},fa:{locale3:"fas",englishName:"Persian",localizedName:"فارسی",direction:"rtl"},fa_DA:{locale3:"prs",englishName:"Persian (Dari)",localizedName:"دری",direction:"rtl"},ff:{locale3:"ful",englishName:"Fulah",localizedName:"Fulfulde",direction:"ltr"},fg:{locale3:"fon",englishName:"Fon",localizedName:"Fon gbè",direction:"ltr"},fi:{locale3:"fin",englishName:"Finnish",localizedName:"suomi",direction:"ltr"},fj:{locale3:"fij",englishName:"Fijian",localizedName:"Vakaviti",direction:"ltr"},fl:{locale3:"fil",englishName:"Filipino",localizedName:"Wikang Filipino",direction:"ltr"},fn:{locale3:"fan",englishName:"Fang",localizedName:"Pangwe",direction:"ltr"},fo:{locale3:"fao",englishName:"Faroese",localizedName:"føroyskt",direction:"ltr"},fr:{locale3:"fra",englishName:"French",localizedName:"français",direction:"ltr"},fr_BE:{englishName:"French (Belgium)",localizedName:"français (Belgium)",direction:"ltr",fallbackLocales:["fr"]},fr_BF:{englishName:"French (Burkina Faso)",localizedName:"français (Burkina Faso)",direction:"ltr",fallbackLocales:["fr"]},fr_BI:{englishName:"French (Burundi)",localizedName:"français (Burundi)",direction:"ltr",fallbackLocales:["fr"]},fr_BJ:{englishName:"French (Benin)",localizedName:"français (Bénin)",direction:"ltr",fallbackLocales:["fr"]},fr_CA:{englishName:"French (Canada)",localizedName:"français (Canada)",direction:"ltr",fallbackLocales:["fr"]},fr_CD:{englishName:"French (DR Congo)",localizedName:"français (RD Congo)",direction:"ltr",fallbackLocales:["fr"]},fr_CF:{englishName:"French (Central African Republic)",localizedName:"français (République centrafricaine)",direction:"ltr",fallbackLocales:["fr"]},fr_CG:{englishName:"French (Congo Republic)",localizedName:"français (République du Congo)",direction:"ltr",fallbackLocales:["fr"]},fr_CH:{englishName:"French (Switzerland)",localizedName:"français (Suisse)",direction:"ltr",fallbackLocales:["fr"]},fr_CI:{englishName:"French (Côte d’Ivoire)",localizedName:"français (Côte d'Ivoire)",direction:"ltr",fallbackLocales:["fr"]},fr_CM:{englishName:"French (Cameroon)",localizedName:"français (Cameroon)",direction:"ltr",fallbackLocales:["fr"]},fr_DJ:{englishName:"French (Djibouti)",localizedName:"français (Djibouti)",direction:"ltr",fallbackLocales:["fr"]},fr_EH:{englishName:"French (Sahrawi Republic)",localizedName:"français (République sahraouie)",direction:"ltr",fallbackLocales:["fr"]},fr_GA:{englishName:"French (Gabon)",localizedName:"français (Gabon)",direction:"ltr",fallbackLocales:["fr"]},fr_GN:{englishName:"French (Guinea)",localizedName:"français (Guinée)",direction:"ltr",fallbackLocales:["fr"]},fr_GQ:{englishName:"French (Equatorial Guinea)",localizedName:"français (Guinée Équatoriale)",direction:"ltr",fallbackLocales:["fr"]},fr_KM:{englishName:"French (Comoros)",localizedName:"français (Comores)",direction:"ltr",fallbackLocales:["fr"]},fr_LU:{englishName:"French (Luxembourg)",localizedName:"français (Luxembourg)",direction:"ltr",fallbackLocales:["fr"]},fr_MC:{englishName:"French (Monaco)",localizedName:"français (Monaco)",direction:"ltr",fallbackLocales:["fr"]},fr_MG:{englishName:"French (Madagascar)",localizedName:"français (Madagascar)",direction:"ltr",fallbackLocales:["fr"]},fr_ML:{englishName:"French (Mali)",localizedName:"français (Mali)",direction:"ltr",fallbackLocales:["fr"]},fr_NE:{englishName:"French (Niger)",localizedName:"français (Niger)",direction:"ltr",fallbackLocales:["fr"]},fr_RW:{englishName:"French (Rwanda)",localizedName:"français (Rwanda)",direction:"ltr",fallbackLocales:["fr"]},fr_SC:{englishName:"French (Seychelles)",localizedName:"français (les Seychelles)",direction:"ltr",fallbackLocales:["fr"]},fr_SN:{englishName:"French (Senegal)",localizedName:"français (Sénégal)",direction:"ltr",fallbackLocales:["fr"]},fr_TD:{englishName:"French (Chad)",localizedName:"français (Tchad)",direction:"ltr",fallbackLocales:["fr"]},fr_TG:{englishName:"French (Togo)",localizedName:"français (Togo)",direction:"ltr",fallbackLocales:["fr"]},fs:{locale3:"frs",englishName:"East Frisian Low Saxon",localizedName:"Oostfreesk",direction:"ltr"},fu:{locale3:"fur",englishName:"Friulian",localizedName:"furlan",direction:"ltr"},fy:{locale3:"fry",englishName:"Western Frisian",localizedName:"Frysk",direction:"ltr"},ga:{locale3:"gle",englishName:"Irish",localizedName:"Gaeilge",direction:"ltr"},gb:{locale3:"gba",englishName:"Gbaya",localizedName:"Gbaya–Manza–Ngbaka",direction:"ltr"},gc:{locale3:"car",englishName:"Galibi Carib",localizedName:"Kari'nja",direction:"ltr"},gd:{locale3:"gla",englishName:"Scottish Gaelic",localizedName:"Gàidhlig",direction:"ltr"},gf:{locale3:"cab",englishName:"Garifuna",localizedName:"Garifuna",direction:"ltr"},gg:{locale3:"gaa",englishName:"Ga",localizedName:"Gã",direction:"ltr"},gk:{locale3:"tkl",englishName:"Tokelau",localizedName:"gagana Tokelau",direction:"ltr"},gl:{locale3:"glg",englishName:"Galician",localizedName:"galego",direction:"ltr"},gn:{locale3:"grn",englishName:"Guarani",localizedName:"avañeʼẽ",direction:"ltr"},go:{locale3:"gon",englishName:"Gondi",localizedName:"గోండి",direction:"ltr"},gr:{locale3:"gor",englishName:"Gorontalo",localizedName:"Bahasa Hulontalo",direction:"ltr"},gs:{locale3:"gsw",englishName:"Swiss German",localizedName:"Schwiizerdütsch",direction:"ltr"},gt:{locale3:"gil",englishName:"Gilbertese",localizedName:"Taetae ni Kiribati",direction:"ltr"},gu:{locale3:"guj",englishName:"Gujarati",localizedName:"ગુજરાતી",direction:"ltr"},gv:{locale3:"glv",englishName:"Manx",localizedName:"Gaelg",direction:"ltr"},gw:{locale3:"gwi",englishName:"Gwich'in",localizedName:"Dinjii Zhu’ Ginjik",direction:"ltr"},gy:{locale3:"gay",englishName:"Gayo",localizedName:"Basa Gayo",direction:"ltr"},ha:{locale3:"hau",englishName:"Hausa",localizedName:"Hausa",direction:"ltr"},hd:{locale3:"mdr",englishName:"Mandar",localizedName:"Mandar",direction:"ltr"},hh:{locale3:"moh",englishName:"Mohawk",localizedName:"Kanien’kéha",direction:"ltr"},hi:{locale3:"hin",englishName:"Hindi",localizedName:"हिन्दी",direction:"ltr"},hk:{locale3:"kru",englishName:"Kurukh",localizedName:"कुड़ुख़",direction:"ltr"},hl:{locale3:"hil",englishName:"Hiligaynon",localizedName:"Ilonggo",direction:"ltr"},hm:{locale3:"hmn",englishName:"Hmong",localizedName:"𖬇𖬰𖬞 𖬌𖬣𖬵",direction:"ltr"},hn:{locale3:"shn",englishName:"Shan",localizedName:"ၵႂၢမ်းတႆးယႂ်",direction:"ltr"},ho:{locale3:"hmo",englishName:"Hiri Motu",localizedName:"Hiri Motu",direction:"ltr"},hp:{locale3:"hup",englishName:"Hupa",localizedName:"Na:tinixwe Mixine:whe'",direction:"ltr"},hr:{locale3:"hrv",englishName:"Croatian",localizedName:"Hrvatski",direction:"ltr"},hr_BA:{englishName:"Croatian (Latin, Bosnia, and Herzegovina)",localizedName:"hrvatski (Latinica, Bosna i Hercegovina)",direction:"ltr",fallbackLocales:["hr"]},hs:{locale3:"hsb",englishName:"Upper Sorbian",localizedName:"hornjoserbšćina",direction:"ltr"},ht:{locale3:"hat",englishName:"Haitian",localizedName:"Kreyòl ayisyen",direction:"ltr"},hu:{locale3:"hun",englishName:"Hungarian",localizedName:"magyar",direction:"ltr"},hw:{locale3:"haw",englishName:"Hawaiian",localizedName:"ʻŌlelo Hawaiʻi",direction:"ltr"},hx:{locale3:"hai",englishName:"Haida",localizedName:"X̱aat Kíl",direction:"ltr"},hy:{locale3:"hye",englishName:"Armenian",localizedName:"Հայերեն",direction:"ltr"},hz:{locale3:"her",englishName:"Herero",localizedName:"Otjiherero",direction:"ltr"},ib:{locale3:"iba",englishName:"Iban",localizedName:"Jaku Iban",direction:"ltr"},ig:{locale3:"ibo",englishName:"Igbo",localizedName:"Asụsụ Igbo",direction:"ltr"},ih:{locale3:"inh",englishName:"Ingush",localizedName:"ГӀалгӀай мотт",direction:"ltr"},ii:{locale3:"iii",englishName:"Sichuan Yi",localizedName:"ꆈꌠ꒿ Nuosuhxop",direction:"ltr"},ik:{locale3:"ipk",englishName:"Inupiaq",localizedName:"Iñupiaq",direction:"ltr"},il:{locale3:"ilo",englishName:"Iloko",localizedName:"Pagsasao nga Ilokano",direction:"ltr"},im:{locale3:"sma",englishName:"Southern Sami",localizedName:"Åarjelsaemien gïele",direction:"ltr"},in:{locale3:"ind",englishName:"Indonesian",localizedName:"Bahasa Indonesia",direction:"ltr"},iq:{locale3:"miq",englishName:"Miskito",localizedName:"Miskitu",direction:"ltr"},is:{locale3:"isl",englishName:"Icelandic",localizedName:"Íslenska",direction:"ltr"},it:{locale3:"ita",englishName:"Italian",localizedName:"italiano",direction:"ltr"},it_CH:{englishName:"Italian (Switzerland)",localizedName:"italiano(Svizzera)",direction:"ltr",fallbackLocales:["it"]},iu:{locale3:"iku",englishName:"Inuktitut",localizedName:"ᐃᓄᒃᑎᑐᑦ",direction:"ltr"},iv:{locale3:"tiv",englishName:"Tiv",localizedName:"Tiv",direction:"ltr"},iw:{locale3:"heb",englishName:"Hebrew",localizedName:"עברית",direction:"rtl"},ix:{locale3:"ixl",englishName:"ixil",localizedName:"Ixhil",direction:"ltr"},ja:{locale3:"jpn",englishName:"Japanese",localizedName:"日本語",direction:"ltr"},jb:{locale3:"kjb",englishName:"q'anjob'al",localizedName:"Kanjobal",direction:"ltr"},jp:{locale3:"jpr",englishName:"Judeo-Persian",localizedName:"Dzhidi",direction:"ltr"},jr:{locale3:"jrb",englishName:"Judeo-Arabic",localizedName:"عربية يهودية",direction:"rtl"},jv:{locale3:"jav",englishName:"Javanese",localizedName:"basa Jawa",direction:"ltr"},ka:{locale3:"kat",englishName:"Georgian",localizedName:"ქართული ენა",direction:"ltr"},kb:{locale3:"kab",englishName:"Kabyle",localizedName:"Taqbaylit",direction:"ltr"},kc:{locale3:"kac",englishName:"Kachin",localizedName:"Jingpho",direction:"ltr"},kd:{locale3:"kbd",englishName:"Kabardian",localizedName:"Къэбэрдейбзэ",direction:"ltr"},ke:{locale3:"kpe",englishName:"Kpelle",localizedName:"Kpɛlɛwoo",direction:"ltr"},kf:{locale3:"krc",englishName:"Karachay-Balkar",localizedName:"Къарачай-Малкъар тил",direction:"ltr"},kg:{locale3:"kon",englishName:"Kongo",localizedName:"Kikongo",direction:"ltr"},kh:{locale3:"kha",englishName:"Khasi",localizedName:"কা কতিয়েন খাশি",direction:"ltr"},ki:{locale3:"kik",englishName:"Kikuyu",localizedName:"Gĩkũyũ",direction:"ltr"},kj:{locale3:"kua",englishName:"Kwanyama",localizedName:"Oshikwanyama",direction:"ltr"},kk:{locale3:"kaz",englishName:"Kazakh",localizedName:"қазақ тілі",direction:"ltr"},kl:{locale3:"kal",englishName:"Kalaallisut",localizedName:"kalaallisut",direction:"ltr"},km:{locale3:"khm",englishName:"Khmer",localizedName:"ខេមរភាសា",direction:"ltr"},kn:{locale3:"kan",englishName:"Kannada",localizedName:"ಕನ್ನಡ",direction:"ltr"},ko:{locale3:"kor",englishName:"Korean",localizedName:"한국어",direction:"ltr"},kp:{locale3:"kaa",englishName:"Kara-Kalpak",localizedName:"Qaraqalpaq tili",direction:"ltr"},kq:{locale3:"kln",englishName:"Kalenjin",localizedName:"Kalenjin",direction:"ltr"},kr:{locale3:"kau",englishName:"Kanuri",localizedName:"Kanuri",direction:"ltr"},ks:{locale3:"kas",englishName:"Kashmiri",localizedName:"कश्मीरी",direction:"ltr"},kt:{locale3:"kut",englishName:"Kutenai",localizedName:"Ktunaxa",direction:"ltr"},ku:{locale3:"kur",englishName:"Kurdish (Sorani)",localizedName:"سۆرانی",direction:"rtl"},ku_TR:{locale3:"ckb",englishName:"Kurdish (Kurmanji)",localizedName:"Kurmancî",direction:"ltr"},kv:{locale3:"kom",englishName:"Komi",localizedName:"коми кыв",direction:"ltr"},kw:{locale3:"cor",englishName:"Cornish",localizedName:"Kernewek",direction:"ltr"},kx:{locale3:"kam",englishName:"Kamba",localizedName:"Kikamba",direction:"ltr"},ky:{locale3:"kir",englishName:"Kirghiz",localizedName:"Кыргыз тили",direction:"ltr"},kz:{locale3:"kos",englishName:"Kosraean",localizedName:"Kosraean",direction:"ltr"},lb:{locale3:"ltz",englishName:"Luxembourgish",localizedName:"Lëtzebuergesch",direction:"ltr"},ld:{locale3:"lad",englishName:"Ladino",localizedName:"Judeo-español",direction:"ltr"},lg:{locale3:"lug",englishName:"Ganda",localizedName:"Luganda",direction:"ltr"},lh:{locale3:"lah",englishName:"Lahnda",localizedName:"بھارت کا",direction:"rtl"},li:{locale3:"lim",englishName:"Limburgish",localizedName:"Limburgs",direction:"ltr"},lk:{locale3:"lak",englishName:"Lakota",localizedName:"Lakȟótiyapi",direction:"ltr"},ll:{locale3:"luo",englishName:"Luo (Kenya and Tanzania)",localizedName:"Dholuo",direction:"ltr"},lm:{locale3:"lam",englishName:"Lamba",localizedName:"Ichilamba",direction:"ltr"},ln:{locale3:"lin",englishName:"Lingala",localizedName:"Lingála",direction:"ltr"},lo:{locale3:"lao",englishName:"Lao",localizedName:"ພາສາລາວ",direction:"ltr"},lp:{locale3:"sel",englishName:"Selkup",localizedName:"чу́мэл шэ",direction:"ltr"},ls:{locale3:"lus",englishName:"Lushai",localizedName:"Mizo ṭawng",direction:"ltr"},lt:{locale3:"lit",englishName:"Lithuanian",localizedName:"lietuvių kalba",direction:"ltr"},lu:{locale3:"lub",englishName:"Luba-Katanga",localizedName:"Kiluba",direction:"ltr"},lv:{locale3:"lav",englishName:"Latvian",localizedName:"latviešu valoda",direction:"ltr"},lw:{locale3:"ach",englishName:"Acoli",localizedName:"Lwo",direction:"ltr"},lx:{locale3:"lua",englishName:"Luba-Lulua",localizedName:"Cilubà",direction:"ltr"},ly:{locale3:"luy",englishName:"Luyia",localizedName:"Luyia",direction:"ltr"},lz:{locale3:"lez",englishName:"Lezghian",localizedName:"Лезги чӏал",direction:"ltr"},ma:{locale3:"mag",englishName:"Magahi",localizedName:"मगही",direction:"ltr"},mb:{locale3:"bas",englishName:"Basa",localizedName:"Mbene",direction:"ltr"},mc:{locale3:"mnc",englishName:"Manchu",localizedName:"Manju gisun",direction:"ltr"},md:{locale3:"mad",englishName:"Madurese",localizedName:"Madhura",direction:"ltr"},me:{locale3:"men",englishName:"Mende",localizedName:"Mɛnde yia",direction:"ltr"},mf:{locale3:"mdf",englishName:"Moksha",localizedName:"мокшень кяль",direction:"ltr"},mg:{locale3:"mlg",englishName:"Malagasy",localizedName:"malagasy",direction:"ltr"},mh:{locale3:"mah",englishName:"Marshallese",localizedName:"Kajin M̧ajeļ",direction:"ltr"},mi:{locale3:"mri",englishName:"Maori",localizedName:"reo Māori",direction:"ltr"},mk:{locale3:"mkd",englishName:"Macedonian",localizedName:"македонски јазик",direction:"ltr"},ml:{locale3:"mal",englishName:"Malayalam",localizedName:"മലയാളം",direction:"ltr"},mm:{locale3:"tem",englishName:"Timne",localizedName:"KʌThemnɛ",direction:"ltr"},mn:{locale3:"mon",englishName:"Mongolian",localizedName:"Монгол хэл",direction:"ltr"},mo:{locale3:"mol",englishName:"Moldavian",localizedName:"Moldavian",direction:"ltr"},mq:{locale3:"mic",englishName:"Mi'kmaq",localizedName:"Míkmawísimk",direction:"ltr"},mr:{locale3:"mar",englishName:"Marathi",localizedName:"मराठी",direction:"ltr"},ms:{locale3:"msa",englishName:"Malay",localizedName:"Bahasa Malaysia",direction:"ltr"},ms_MY:{englishName:"Malay (Standard)",localizedName:"بهاس ملايو مليسيا",direction:"rtl",fallbackLocales:["ms"]},mt:{locale3:"mlt",englishName:"Maltese",localizedName:"Malti",direction:"ltr"},mu:{locale3:"mus",englishName:"Creek",localizedName:"Mvskoke",direction:"ltr"},mv:{locale3:"myv",englishName:"Erzya",localizedName:"эрзянь кель",direction:"ltr"},mw:{locale3:"mwl",englishName:"Mirandese",localizedName:"mirandés",direction:"ltr"},mx:{locale3:"mam",englishName:"mam",localizedName:"Qyool Mam",direction:"ltr"},my:{locale3:"mya",englishName:"Burmese",localizedName:"ဗမာစာ",direction:"ltr"},mz:{locale3:"mau",englishName:"Mazateco",localizedName:"En Ngixo",direction:"ltr"},na:{locale3:"nau",englishName:"Nauru",localizedName:"Ekakairũ Naoero",direction:"ltr"},nb:{locale3:"nob",englishName:"Norwegian Bokmal",localizedName:"Norwegian Bokmål",direction:"ltr"},nc:{locale3:"nyn",englishName:"Nyankole",localizedName:"Orunyankore",direction:"ltr"},nd:{locale3:"nde",englishName:"North Ndebele",localizedName:"North Ndebele",direction:"ltr"},ne:{locale3:"nep",englishName:"Nepali",localizedName:"नेपाली",direction:"ltr"},nf:{locale3:"frr",englishName:"Northern Frisian",localizedName:"Frasch",direction:"ltr"},ng:{locale3:"ndo",englishName:"Ndonga",localizedName:"Owambo",direction:"ltr"},nh:{locale3:"nyo",englishName:"Nyoro",localizedName:"Orunyoro",direction:"ltr"},ni:{locale3:"nia",englishName:"Nias",localizedName:"Li Niha",direction:"ltr"},nk:{locale3:"nor",englishName:"Norwegian",localizedName:"norsk",direction:"ltr"},nl:{locale3:"nld",englishName:"Dutch",localizedName:"Nederlands",direction:"ltr"},nl_BE:{englishName:"Dutch (Belgium)",localizedName:"Nederlands (België)",direction:"ltr",fallbackLocales:["nl"]},nm:{locale3:"smn",englishName:"Inari Sami",localizedName:"anarâškielâ",direction:"ltr"},nn:{locale3:"nno",englishName:"Norwegian Nynorsk",localizedName:"Norsk nynorsk",direction:"ltr"},np:{locale3:"nap",englishName:"Neapolitan",localizedName:"napulitano",direction:"ltr"},nq:{locale3:"nqo",englishName:"N'Ko",localizedName:"ߒߞߏ",direction:"rtl"},nr:{locale3:"nbl",englishName:"South Ndebele",localizedName:"South Ndebele",direction:"ltr"},ns:{locale3:"nds",englishName:"Low German",localizedName:"Plattdütsch",direction:"ltr"},nt:{locale3:"sat",englishName:"Santali",localizedName:"ᱥᱟᱱᱛᱟᱲᱤ",direction:"ltr"},nu:{locale3:"niu",englishName:"Niuean",localizedName:"ko e vagahau Niuē",direction:"ltr"},nv:{locale3:"nav",englishName:"Navajo",localizedName:"Diné bizaad",direction:"ltr"},nw:{locale3:"new",englishName:"Nepal Bhasa",localizedName:"नेपाल भाषा",direction:"ltr"},nx:{locale3:"nym",englishName:"Nyamwezi",localizedName:"Nyamwezi",direction:"ltr"},ny:{locale3:"nya",englishName:"Chichewa",localizedName:"Nyanja",direction:"ltr"},nz:{locale3:"nzi",englishName:"Nzima",localizedName:"Nzima",direction:"ltr"},oa:{locale3:"osa",englishName:"Osage",localizedName:"Wazhazhe ie / 𐓏𐓘𐓻𐓘𐓻𐓟 𐒻𐓟",direction:"ltr"},oc:{locale3:"oci",englishName:"Occitan",localizedName:"occitan",direction:"ltr"},oe:{locale3:"cnr",englishName:"Montenegrin",localizedName:"crnogorski / црногорски",direction:"ltr"},og:{locale3:"man",englishName:"Mandingo",localizedName:"Mandi'nka kango",direction:"ltr"},oi:{locale3:"snk",englishName:"Soninke",localizedName:"Sooninkanxanne",direction:"ltr"},oj:{locale3:"oji",englishName:"Ojibwa",localizedName:"Ojibwa",direction:"ltr"},ok:{locale3:"kok",englishName:"Konkani",localizedName:"कोंकणी",direction:"ltr"},ol:{locale3:"sms",englishName:"Skolt Sami",localizedName:"sääʹmǩiõll",direction:"ltr"},om:{locale3:"orm",englishName:"Oromo",localizedName:"Afaan Oromoo",direction:"ltr"},oo:{locale3:"mos",englishName:"Mossi",localizedName:"Mooré",direction:"ltr"},op:{locale3:"top",englishName:"Totonaca",localizedName:"Totonac–Tepehua",direction:"ltr"},or:{locale3:"ori",englishName:"Oriya",localizedName:"ଓଡ଼ିଆ",direction:"ltr"},os:{locale3:"oss",englishName:"Ossetian",localizedName:"ирон æвзаг",direction:"ltr"},ot:{locale3:"sco",englishName:"Scots",localizedName:"Lallans",direction:"ltr"},ou:{locale3:"alt",englishName:"Southern Altai",localizedName:"Алтай тили",direction:"ltr"},pa:{locale3:"pan",englishName:"Panjabi",localizedName:"ਪੰਜਾਬੀ",direction:"ltr"},pg:{locale3:"pag",englishName:"Pangasinan",localizedName:"Salitan Pangasinan",direction:"ltr"},pl:{locale3:"pol",englishName:"Polish",localizedName:"Polski",direction:"ltr"},pm:{locale3:"pam",englishName:"Pampanga",localizedName:"Amánung Kapampangan",direction:"ltr"},pn:{locale3:"pon",englishName:"Pohnpeian",localizedName:"Lokaiahn Pohnpei",direction:"ltr"},pp:{locale3:"pap",englishName:"Papiamento",localizedName:"Papiamentu",direction:"ltr"},ps:{locale3:"pus",englishName:"Pashto",localizedName:"پښتو",direction:"ltr"},pt:{locale3:"por",englishName:"Portuguese",localizedName:"Português",direction:"ltr",fallbackLocales:["pt_BR"]},pt_AO:{englishName:"Portuguese(Angola)",localizedName:"português(Angola)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_BR:{englishName:"Portuguese, Brazil",localizedName:"português (Brasil)",direction:"ltr"},pt_CV:{englishName:"Portuguese(Cabo verde)",localizedName:"português(Cabo verde)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_GQ:{englishName:"Portuguese(Equatorial Guinea)",localizedName:"português(Guiné Equatorial)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_GW:{englishName:"Portuguese(Guinea-Bissau)",localizedName:"português(Guiné-Bissau)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_MZ:{englishName:"Portuguese(Mozambique)",localizedName:"português(Moçambique)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_ST:{englishName:"Portuguese(São Tomé and Príncipe)",localizedName:"português(São Tomé e Príncipe)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pu:{locale3:"pau",englishName:"Palauan",localizedName:"a tekoi er a Belau",direction:"ltr"},qc:{locale3:"quc",englishName:"k'iche'",localizedName:"Qatzijobʼal",direction:"ltr"},qe:{locale3:"kek",englishName:"q'eqchi'",localizedName:"Kekchi",direction:"ltr"},qu:{locale3:"que",englishName:"Quechua",localizedName:"Qhichwa",direction:"ltr"},ra:{locale3:"bra",englishName:"Braj",localizedName:"ब्रजभाषा",direction:"ltr"},rb:{locale3:"grb",englishName:"Grebo",localizedName:"Kréébo",direction:"ltr"},rc:{locale3:"acr",englishName:"Achi",localizedName:"Achiʼ",direction:"ltr"},re:{locale3:"ter",englishName:"Tereno",localizedName:"Terêna",direction:"ltr"},rh:{locale3:"roh",englishName:"Romansh",localizedName:"Rumantsch",direction:"ltr"},ri:{locale3:"rap",englishName:"Rapanui",localizedName:"Vananga rapa nui",direction:"ltr"},rj:{locale3:"raj",englishName:"Rajasthani",localizedName:"राजस्थानी",direction:"ltr"},rl:{locale3:"krl",englishName:"Karelian",localizedName:"karjal",direction:"ltr"},rn:{locale3:"run",englishName:"Kirundi",localizedName:"Ikirundi",direction:"ltr"},ro:{locale3:"ron",englishName:"Romanian",localizedName:"Română",direction:"ltr"},rp:{locale3:"rup",englishName:"Aromanian",localizedName:"armãneashce",direction:"ltr"},rr:{locale3:"rar",englishName:"Rarotongan (Cook Islands Māori)",localizedName:"Māori Kūki 'Āirani",direction:"ltr"},ru:{locale3:"rus",englishName:"Russian",localizedName:"Русский",direction:"ltr"},rw:{locale3:"kin",englishName:"Kinyarwanda",localizedName:"Ikinyarwanda",direction:"ltr"},ry:{locale3:"rom",englishName:"Romany",localizedName:"romani čhib",direction:"ltr"},rz:{locale3:"loz",englishName:"Lozi",localizedName:"siLozi",direction:"ltr"},sb:{locale3:"csb",englishName:"Kashubian",localizedName:"Kaszëbsczi jãzëk",direction:"ltr"},sc:{locale3:"srd",englishName:"Sardinian",localizedName:"sardu",direction:"ltr"},sd:{locale3:"snd",englishName:"Sindhi",localizedName:"सिन्धी",direction:"ltr"},se:{locale3:"sme",englishName:"Northern Sami",localizedName:"Davvisámegiella",direction:"ltr"},sg:{locale3:"sag",englishName:"Sango",localizedName:"yângâ tî sängö",direction:"ltr"},sh:{locale3:"hbs",englishName:"Serbo-Croatian",localizedName:"Serbo-Croatian",direction:"ltr"},si:{locale3:"sin",englishName:"Sinhalese",localizedName:"සිංහල",direction:"ltr"},sj:{locale3:"smj",englishName:"Lule Sami",localizedName:"julevsámegiella",direction:"ltr"},sk:{locale3:"slk",englishName:"Slovak",localizedName:"slovenčina",direction:"ltr"},sl:{locale3:"slv",englishName:"Slovenian",localizedName:"slovenščina",direction:"ltr"},sm:{locale3:"smo",englishName:"Samoan",localizedName:"Gagana faʻa Sāmoa",direction:"ltr"},sn:{locale3:"sna",englishName:"Shona",localizedName:"chiShona",direction:"ltr"},so:{locale3:"som",englishName:"Somali",localizedName:"Af Soomaali",direction:"ltr"},sp:{locale3:"nso",englishName:"Sepedi",localizedName:"Sesotho sa Leboa",direction:"ltr"},sq:{locale3:"sqi",englishName:"Albanian",localizedName:"Shqip",direction:"ltr"},sr:{locale3:"srp",englishName:"Serbian",localizedName:"српски језик",direction:"ltr"},sr_BA:{englishName:"Serbian (Bosnia and Herzegovina)",localizedName:"Српски (Босна и Херцеговина)",direction:"ltr",fallbackLocales:["sr"]},ss:{locale3:"ssw",englishName:"Swati",localizedName:"SiSwati",direction:"ltr"},st:{locale3:"sot",englishName:"Sotho",localizedName:"Sesotho",direction:"ltr"},su:{locale3:"sun",englishName:"Sundanese",localizedName:"Basa Sunda",direction:"ltr"},sv:{locale3:"swe",englishName:"Swedish",localizedName:"Svenska",direction:"ltr"},sv_FI:{englishName:"Swedish (Finland)",localizedName:"svenska (Finland)",direction:"ltr",fallbackLocales:["sv"]},sw:{locale3:"swa",englishName:"Swahili",localizedName:"Kiswahili",direction:"ltr"},sx:{locale3:"sus",englishName:"Susu",localizedName:"Sosoxui",direction:"ltr"},sy:{locale3:"syr",englishName:"Syriac",localizedName:"ܠܫܢܐ ܣܘܪܝܝܐ Lešānā Suryāyā",direction:"rtl"},sz:{locale3:"sas",englishName:"Sasak",localizedName:"ᬪᬵᬲᬵᬲᬓ᭄ᬱᬓ᭄",direction:"ltr"},ta:{locale3:"tam",englishName:"Tamil",localizedName:"தமிழ்",direction:"ltr"},tc:{locale3:"tog",englishName:"Tonga (Nyasa)",localizedName:"chiTonga",direction:"ltr"},te:{locale3:"tel",englishName:"Telugu",localizedName:"తెలుగు",direction:"ltr"},tg:{locale3:"tgk",englishName:"Tajik",localizedName:"тоҷикӣ",direction:"ltr"},th:{locale3:"tha",englishName:"Thai",localizedName:"ไทย",direction:"ltr"},ti:{locale3:"tir",englishName:"Tigrinya",localizedName:"ትግርኛ",direction:"ltr"},tj:{locale3:"tli",englishName:"Tlingit",localizedName:"Lingít",direction:"ltr"},tk:{locale3:"tuk",englishName:"Turkmen",localizedName:"Türkmen",direction:"ltr"},tl:{locale3:"tgl",englishName:"Tagalog",localizedName:"Wikang Tagalog",direction:"ltr"},tm:{locale3:"tmh",englishName:"Tamashek",localizedName:"Tafaghist",direction:"ltr"},tn:{locale3:"tsn",englishName:"Tswana",localizedName:"Setswana",direction:"ltr"},to:{locale3:"ton",englishName:"Tonga",localizedName:"faka Tonga",direction:"ltr"},tp:{locale3:"tpi",englishName:"Tok Pisin",localizedName:"Tok Pisin",direction:"ltr"},tq:{locale3:"tig",englishName:"Tigre",localizedName:"ትግረ",direction:"ltr"},tr:{locale3:"tur",englishName:"Turkish",localizedName:"Türkçe",direction:"ltr"},ts:{locale3:"tso",englishName:"Tsonga",localizedName:"Xitsonga",direction:"ltr"},tt:{locale3:"tat",englishName:"Tatar",localizedName:"татар теле",direction:"ltr"},tu:{locale3:"tum",englishName:"Tumbuka",localizedName:"chiTumbuka",direction:"ltr"},tv:{locale3:"tvl",englishName:"Tuvalu",localizedName:"Te Ggana Tuuvalu",direction:"ltr"},tw:{locale3:"twi",englishName:"Twi",localizedName:"Twi",direction:"ltr",fallbackLocales:["ak"]},tx:{locale3:"tyv",englishName:"Tuvinian",localizedName:"тыва дыл",direction:"ltr"},ty:{locale3:"tah",englishName:"Tahitian",localizedName:"Reo Tahiti",direction:"ltr"},tz:{locale3:"tsi",englishName:"Tsimshian",localizedName:"Tsmksian",direction:"ltr"},ua:{locale3:"nah",englishName:"Náhuatl",localizedName:"Náhuatl",direction:"ltr"},ud:{locale3:"udm",englishName:"Udmurt",localizedName:"удмурт кыл",direction:"ltr"},ug:{locale3:"uig",englishName:"Uighur",localizedName:"ئۇيغۇرچە‎",direction:"rtl"},ui:{locale3:"mni",englishName:"Manipuri",localizedName:"Meitei",direction:"ltr"},uk:{locale3:"ukr",englishName:"Ukrainian",localizedName:"Українська",direction:"ltr"},um:{locale3:"umb",englishName:"Umbundu",localizedName:"Úmbúndú",direction:"ltr"},un:{locale3:"arn",englishName:"Mapudungun",localizedName:"Mapuche",direction:"ltr"},ur:{locale3:"urd",englishName:"Urdu",localizedName:"اردو",direction:"rtl"},ut:{locale3:"tet",englishName:"Tetum",localizedName:"Lia-Tetun",direction:"ltr"},uy:{locale3:"kum",englishName:"Kumyk",localizedName:"къумукъ тил/qumuq til",direction:"ltr"},uz:{locale3:"uzb",englishName:"Uzbek",localizedName:"ЎзбекЎзбек тили",direction:"ltr"},va:{locale3:"vai",englishName:"Vai",localizedName:"ꕙꔤ",direction:"ltr"},ve:{locale3:"ven",englishName:"Venda",localizedName:"Tshivenḓa",direction:"ltr"},vi:{locale3:"vie",englishName:"Vietnamese",localizedName:"Tiếng Việt",direction:"ltr"},vs:{locale3:"bla",englishName:"Siksika",localizedName:"ᓱᖽᐧᖿ",direction:"ltr"},vt:{locale3:"vot",englishName:"Votic",localizedName:"vađđa ceeli",direction:"ltr"},wa:{locale3:"wln",englishName:"Walloon",localizedName:"walon",direction:"ltr"},wl:{locale3:"wal",englishName:"Wolaitta",localizedName:"Wolayttatto Doonaa",direction:"ltr"},wo:{locale3:"wol",englishName:"Wolof",localizedName:"Wollof",direction:"ltr"},wr:{locale3:"war",englishName:"Waray",localizedName:"Winaray",direction:"ltr"},ws:{locale3:"was",englishName:"Washo",localizedName:"wá:šiw ʔítlu",direction:"ltr"},xa:{locale3:"xal",englishName:"Kalmyk",localizedName:"Хальмг келн",direction:"ltr"},xh:{locale3:"xho",englishName:"Xhosa",localizedName:"isiXhosa",direction:"ltr"},xl:{locale3:"lol",englishName:"Mongo",localizedName:"Lomongo",direction:"ltr"},xr:{locale3:"mwr",englishName:"Marwari",localizedName:"मारवाड़ी",direction:"ltr"},xs:{locale3:"suk",englishName:"Sukuma",localizedName:"Kɪsukuma",direction:"ltr"},xt:{locale3:"srn",englishName:"Sranan Tongo",localizedName:"Sranan Tongo",direction:"ltr"},ya:{locale3:"yao",englishName:"Yao",localizedName:"chiYao",direction:"ltr"},yi:{locale3:"yid",englishName:"Yiddish",localizedName:"ייִדיש",direction:"ltr"},yk:{locale3:"sah",englishName:"Yakut",localizedName:"Сахалыы",direction:"ltr"},yn:{locale3:"myn",englishName:"Mayan",localizedName:"Maya",direction:"ltr"},yo:{locale3:"yor",englishName:"Yoruba",localizedName:"Yorùbá",direction:"ltr"},yp:{locale3:"yap",englishName:"Yapese",localizedName:"Thin nu Wa’ab",direction:"ltr"},za:{locale3:"zha",englishName:"Zhuang",localizedName:"Saɯ cueŋƅ",direction:"ltr"},ze:{locale3:"zen",englishName:"Zenaga",localizedName:"Tuẓẓungiyya",direction:"ltr"},zg:{locale3:"zgh",englishName:"Standard Moroccan Tamazight",localizedName:"ⵜⴰⵎⴰⵣⵉⵖⵜ ⵜⴰⵏⴰⵡⴰⵢⵜ",direction:"ltr"},zh_CN:{locale3:"zho",englishName:"Chinese, Simplified",localizedName:"中文 (中国)",direction:"ltr"},zh_HK:{englishName:"Chinese, Hong Kong",localizedName:"中文 (香港)",direction:"ltr"},zh_MO:{englishName:"Chinese (Macau)",localizedName:"中文（澳门）",direction:"ltr"},zh_SG:{englishName:"Chinese (Singapore)",localizedName:"中文（新加坡）",direction:"ltr"},zh_TW:{englishName:"Chinese, Traditional",localizedName:"中文 (台灣)",direction:"ltr"},zn:{locale3:"zun",englishName:"Zuni",localizedName:"Shiwi'ma",direction:"ltr"},zp:{locale3:"zap",englishName:"Zapotec",localizedName:"Diidxazá",direction:"ltr"},zt:{locale3:"tzj",englishName:"tz'utujil",localizedName:"Tzʼutujiil",direction:"ltr"},zu:{locale3:"zul",englishName:"Zulu",localizedName:"isiZulu",direction:"ltr"},zz:{locale3:"zza",englishName:"Zaza",localizedName:"kirmanckî",direction:"ltr"}};phet.chipper.localeData=zq;self.phet=self.phet||{};self.phet.chipper=self.phet.chipper||{};const s2={aa:{},ab:{},ac:{},ad:{},af:{},ag:{},ah:{},ai:{},aj:{},ak:{},ak_FT:{},al:{},am:{},an:{},ao:{},ap:{},ar:{},ar_AE:{},ar_BH:{},ar_DJ:{},ar_DZ:{},ar_EG:{},ar_EH:{},ar_ER:{},ar_IQ:{},ar_JO:{},ar_KM:{},ar_KW:{},ar_LB:{},ar_LY:{},ar_MA:{},ar_MR:{},ar_OM:{},ar_QA:{},ar_SA:{},ar_SD:{},ar_SO:{},ar_SY:{},ar_TD:{},ar_TN:{},ar_YE:{},as:{},at:{},au:{},av:{},aw:{},ax:{},ay:{},az:{},ba:{},bb:{},bc:{},bd:{},be:{},bg:{},bi:{},bj:{},bk:{},bl:{},bm:{},bn:{},bo:{},bp:{},bq:{},br:{},bs:{},bt:{},bu:{},bx:{},by:{},ca:{},cb:{},cc:{},cd:{},ce:{},ch:{},ci:{},cj:{},ck:{},cl:{},cm:{},cn:{},co:{},cp:{},cq:{},cr:{},cs:{},ct:{},cv:{},cw:{},cy:{},cz:{},da:{},db:{},de:{},de_AT:{},de_CH:{},de_LI:{},de_LU:{},dg:{},di:{},dk:{},dl:{},dm:{},dn:{},dr:{},ds:{},du:{},dv:{},dw:{},dy:{},dz:{},ed:{},ee:{},ef:{},ek:{},el:{},em:{},en:{},en_AU:{},en_BI:{},en_BW:{},en_BZ:{},en_CA:{},en_CB:{},en_CM:{},en_ER:{},en_ET:{},en_GB:{},en_GH:{},en_GM:{},en_IE:{},en_IN:{},en_JM:{},en_KE:{},en_LR:{},en_LS:{},en_MU:{},en_MW:{},en_MY:{},en_NA:{},en_NG:{},en_NZ:{},en_PH:{},en_RW:{},en_SC:{},en_SL:{},en_SS:{},en_SZ:{},en_TT:{},en_TZ:{},en_UG:{},en_ZA:{},en_ZM:{},en_ZW:{},er:{},es:{},es_AR:{},es_BO:{},es_CL:{},es_CO:{},es_CR:{},es_DO:{},es_EC:{},es_ES:{},es_GQ:{},es_GT:{},es_HN:{},es_MX:{},es_NI:{},es_PA:{},es_PE:{},es_PR:{},es_PY:{},es_SV:{},es_US:{},es_UY:{},es_VE:{},et:{},eu:{},ew:{},fa:{},fa_DA:{},ff:{},fg:{},fi:{},fj:{},fl:{},fn:{},fo:{},fr:{},fr_BE:{},fr_BF:{},fr_BI:{},fr_BJ:{},fr_CA:{},fr_CD:{},fr_CF:{},fr_CG:{},fr_CH:{},fr_CI:{},fr_CM:{},fr_DJ:{},fr_EH:{},fr_GA:{},fr_GN:{},fr_GQ:{},fr_KM:{},fr_LU:{},fr_MC:{},fr_MG:{},fr_ML:{},fr_NE:{},fr_RW:{},fr_SC:{},fr_SN:{},fr_TD:{},fr_TG:{},fs:{},fu:{},fy:{},ga:{},gb:{},gc:{},gd:{},gf:{},gg:{},gk:{},gl:{},gn:{},go:{},gr:{},gs:{},gt:{},gu:{},gv:{},gw:{},gy:{},ha:{},hd:{},hh:{},hi:{},hk:{},hl:{},hm:{},hn:{},ho:{},hp:{},hr:{},hr_BA:{},hs:{},ht:{},hu:{},hw:{},hx:{},hy:{},hz:{},ib:{},ig:{},ih:{},ii:{},ik:{},il:{},im:{},in:{},iq:{},is:{},it:{},it_CH:{},iu:{},iv:{},iw:{},ix:{},ja:{},jb:{},jp:{},jr:{},jv:{},ka:{},kb:{},kc:{},kd:{},ke:{},kf:{},kg:{},kh:{},ki:{},kj:{},kk:{},kl:{},km:{},kn:{},ko:{},kp:{},kq:{},kr:{},ks:{},kt:{},ku:{},ku_TR:{},kv:{},kw:{},kx:{},ky:{},kz:{},lb:{},ld:{},lg:{},lh:{},li:{},lk:{},ll:{},lm:{},ln:{},lo:{},lp:{},ls:{},lt:{},lu:{},lv:{},lw:{},lx:{},ly:{},lz:{},ma:{},mb:{},mc:{},md:{},me:{},mf:{},mg:{},mh:{},mi:{},mk:{},ml:{},mm:{},mn:{},mo:{},mq:{},mr:{},ms:{},ms_MY:{},mt:{},mu:{},mv:{},mw:{},mx:{},my:{},mz:{},na:{},nb:{},nc:{},nd:{},ne:{},nf:{},ng:{},nh:{},ni:{},nk:{},nl:{},nl_BE:{},nm:{},nn:{},np:{},nq:{},nr:{},ns:{},nt:{},nu:{},nv:{},nw:{},nx:{},ny:{},nz:{},oa:{},oc:{},oe:{},og:{},oi:{},oj:{},ok:{},ol:{},om:{},oo:{},op:{},or:{},os:{},ot:{},ou:{},pa:{},pg:{},pl:{},pm:{},pn:{},pp:{},ps:{},pt:{},pt_AO:{},pt_BR:{},pt_CV:{},pt_GQ:{},pt_GW:{},pt_MZ:{},pt_ST:{},pu:{},qc:{},qe:{},qu:{},ra:{},rb:{},rc:{},re:{},rh:{},ri:{},rj:{},rl:{},rn:{},ro:{},rp:{},rr:{},ru:{},rw:{},ry:{},rz:{},sb:{},sc:{},sd:{},se:{},sg:{},sh:{},si:{},sj:{},sk:{},sl:{},sm:{},sn:{},so:{},sp:{},sq:{},sr:{},sr_BA:{},ss:{},st:{},su:{},sv:{},sv_FI:{},sw:{},sx:{},sy:{},sz:{},ta:{},tc:{},te:{},tg:{},th:{},ti:{},tj:{},tk:{},tl:{},tm:{},tn:{},to:{},tp:{},tq:{},tr:{},ts:{},tt:{},tu:{},tv:{},tw:{},tx:{},ty:{},tz:{},ua:{},ud:{},ug:{},ui:{},uk:{},um:{},un:{},ur:{},ut:{},uy:{},uz:{},va:{},ve:{},vi:{},vs:{},vt:{},wa:{},wl:{},wo:{},wr:{},ws:{},xa:{},xh:{},xl:{},xr:{},xs:{},xt:{},ya:{},yi:{},yk:{},yn:{},yo:{},yp:{},za:{},ze:{},zg:{},zh_CN:{},zh_HK:{},zh_MO:{},zh_SG:{},zh_TW:{},zn:{},zp:{},zt:{},zu:{},zz:{}};phet.chipper.strings=s2;phet.chipper.availableLocales&&Object.keys(s2).forEach(i=>{phet.chipper.availableLocales.includes(i)||delete s2[i]});(function(){self.phet=self.phet??{},self.phet.preloads=self.phet.preloads||{},self.phet.chipper=self.phet.chipper??{};const e=(phet.chipper.packageObject??{}).phet??{},t=phet.chipper.allowLocaleSwitching??!0,n=e.simFeatures??{},s="default",r="en",a=n.colorProfiles??[s],o={allowLinks:{type:"boolean",defaultValue:!0,public:!0},audio:{type:"string",defaultValue:"enabled",validValues:["enabled","disabled","muted"],public:!0},binder:{type:"flag"},brand:{type:"string",defaultValue:"adapted-from-phet"},buildCompatible:{type:"flag"},continuousTest:{type:"string",defaultValue:""},colorProfile:{type:"string",defaultValue:a[0],validValues:a,public:!0},launchCounter:{type:"flag"},debugger:{type:"flag"},deprecationWarnings:{type:"flag"},dev:{type:"flag"},disableModals:{type:"flag"},ea:{type:"flag"},eall:{type:"flag"},extraSoundInitiallyEnabled:{type:"flag",public:!0},forceSVGRefresh:{type:"flag"},fuzz:{type:"flag"},fuzzBoard:{type:"flag"},fuzzMouse:{type:"flag"},fuzzPointers:{type:"number",defaultValue:1},fuzzTouch:{type:"flag"},fuzzRate:{type:"number",defaultValue:100,isValidValue:function(l){return l>0}},ga4:{type:"string",defaultValue:null,public:!0},gameUp:{type:"flag"},gameUpTestHarness:{type:"flag"},gameUpLogging:{type:"flag"},gaPage:{type:"string",defaultValue:null},homeScreen:{type:"boolean",defaultValue:!0,public:!0},initialScreen:{type:"number",defaultValue:0,public:!0},interruptMultitouch:{type:"boolean",defaultValue:e?.simFeatures?.interruptMultitouch??!1},legendsOfLearning:{type:"flag"},listenerLimit:{type:"number",defaultValue:Number.POSITIVE_INFINITY,public:!1},locale:{type:"string",defaultValue:self.phet.chipper.locale??r},supportsDynamicLocale:{type:"boolean",defaultValue:t&&!!n.supportsDynamicLocale},log:{type:"flag"},memoryLimit:{type:"number",defaultValue:0},mobileA11yTest:{type:"flag"},"phet-android-app":{type:"flag"},"phet-app":{type:"flag"},playbackMode:{type:"boolean",defaultValue:!1},postMessageOnBeforeUnload:{type:"flag"},postMessageOnError:{type:"flag"},postMessageOnLoad:{type:"flag"},postMessageOnReady:{type:"flag"},preventFullScreen:{type:"flag"},preventMultitouch:{type:"boolean",defaultValue:e?.simFeatures?.preventMultitouch??!1},profiler:{type:"flag"},qrCode:{type:"flag"},randomSeed:{type:"number",defaultValue:Math.random()},regionAndCulture:{public:!0,type:"string",defaultValue:e?.simFeatures?.defaultRegionAndCulture??"usa"},rootRenderer:{type:"string",defaultValue:null,validValues:[null,"canvas","svg","dom","webgl","vello"]},sceneryLog:{type:"array",elementSchema:{type:"string"},defaultValue:null},sceneryStringLog:{type:"flag"},screens:{type:"array",elementSchema:{type:"number",isValidValue:Number.isInteger},defaultValue:null,isValidValue:function(l){return l===null||l.length===ie.uniq(l).length&&l.length>0},public:!0},showAnswers:{type:"flag",private:!0},showCanvasNodeBounds:{type:"flag"},showFittedBlockBounds:{type:"flag"},showHitAreas:{type:"flag"},showPointerAreas:{type:"flag"},showPointers:{type:"flag"},showVisibleBounds:{type:"flag"},listenerOrder:{type:"string",defaultValue:"default",isValidValue:function(l){const h=/random(?:%28|\()(\d+)(?:%29|\))/;return l==="default"||l==="random"||l==="reverse"||l.match(h)}},speechSynthesisFromParent:{type:"flag"},speed:{type:"number",defaultValue:1,isValidValue:function(l){return l>0}},stringTest:{type:"string",defaultValue:null},keyboardLocaleSwitcher:{type:"flag"},supportsDescriptionPlugin:{type:"boolean",defaultValue:!!n.supportsDescriptionPlugin},supportsInteractiveDescription:{type:"boolean",defaultValue:!!n.supportsInteractiveDescription},supportsInteractiveHighlights:{type:"boolean",defaultValue:n.hasOwnProperty("supportsInteractiveHighlights")?!!n.supportsInteractiveHighlights:!!n.supportsInteractiveDescription},interactiveHighlightsInitiallyEnabled:{type:"flag",public:!0},supportsGestureControl:{type:"boolean",defaultValue:!!n.supportsGestureControl},supportsVoicing:{type:"boolean",defaultValue:!!n.supportsVoicing},supportsTier1Voicing:{type:"boolean",defaultValue:!!n.supportsTier1Voicing},swashText:{type:"boolean",defaultValue:!0},swashTextColor:{type:"string",defaultValue:""},voicingInitiallyEnabled:{type:"flag",public:!0},preferencesStorage:{type:"flag"},printVoicingResponses:{type:"flag"},supportsPanAndZoom:{type:"boolean",public:!0,defaultValue:!n.hasOwnProperty("supportsPanAndZoom")||n.supportsPanAndZoom},supportsSound:{type:"boolean",defaultValue:!!n.supportsSound},supportsExtraSound:{type:"boolean",defaultValue:!!n.supportsExtraSound},vibrationParadigm:{type:"string",defaultValue:null},voicingAddObjectResponses:{type:"flag",public:!0},voicingAddContextResponses:{type:"flag",public:!0},voicingAddHintResponses:{type:"flag",public:!0},voicingCollapseToolbar:{type:"flag",public:!0},voicingRemoveToolbar:{type:"flag",public:!0},webgl:{type:"boolean",defaultValue:!0},yotta:{type:"boolean",defaultValue:!0,public:!0}};self.phet.chipper.queryParameters=ua.getAll(o),self.phet.chipper.isProduction=self.document?self.document.querySelector('meta[name="phet-sim-level"]')?.content==="production":!0,self.phet.chipper.isApp=phet.chipper.queryParameters["phet-app"]||phet.chipper.queryParameters["phet-android-app"],function(){const l=!phet.chipper.isProduction&&phet.chipper.queryParameters.eall;l||!phet.chipper.isProduction&&phet.chipper.queryParameters.ea||phet.chipper.isDebugBuild,l&&enableAssertSlow()}();{self.phet.chipper.colorProfiles=a,self.phet.chipper.isFuzzEnabled=()=>self.phet.chipper.queryParameters.fuzz||self.phet.chipper.queryParameters.fuzzMouse||self.phet.chipper.queryParameters.fuzzTouch||self.phet.chipper.queryParameters.fuzzBoard,self.phet.chipper.supportsAnyVoicing=()=>self.phet.chipper.queryParameters.supportsVoicing||self.phet.chipper.queryParameters.supportsTier1Voicing,self.phet.chipper.queryParameters.log&&(self.phet.log=function(h,c){c=ie.assignIn({color:"#009900"},c),console.log(`%c${h}`,`color: ${c.color}`)}),self.phet.chipper.brand=self.phet.chipper.brand||phet.chipper.queryParameters.brand||"adapted-from-phet";const l=typeof self<"u"&&phet.chipper.queryParameters.stringTest?phet.chipper.queryParameters.stringTest:null;self.phet.chipper.mapString=function(h){const c="script";return l===null?h:l==="double"?`${h}:${h}`:l==="long"?"12345678901234567890123456789012345678901234567890":l==="rtl"?"‫تست (زبان)‬":l==="xss"?`${h}<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg==" onload="window.location.href=atob('aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQ==')" />`:l==="xss2"?`${h}<${c}>alert('XSS')</${c}>`:l==="none"||l==="dynamic"?h:l},phet.chipper.remapLocale=(h,c=!1)=>{const f=h;if(h.length<5)h=h.toLowerCase();else{h=h.replace(/-/,"_");const P=h.split("_");P.length===2&&(h=P[0].toLowerCase()+"_"+P[1].toUpperCase())}if(h.length===3){for(const P of Object.keys(phet.chipper.localeData))if(phet.chipper.localeData[P].locale3===h){h=P;break}}const g=/^[a-zA-Z]{2}$/,v=/^[a-zA-Z]{3}$/,A=/^[a-zA-Z]{2}[_-][a-zA-Z]{2}$/;if(!phet.chipper.localeData[h]){const P=f;!g.test(P)&&!v.test(P)&&!A.test(P)&&(c||ua.addWarning("locale",f,`Invalid locale format received: ${P}. ?locale query parameter accepts the following formats: "xx" for ISO-639-1, "xx_XX" for ISO-639-1 and a 2-letter country code, "xxx" for ISO-639-2`)),h=r}return h},phet.chipper.getValidRuntimeLocale=h=>[h,...phet.chipper.localeData[h]?.fallbackLocales??[],r].find(g=>!!phet.chipper.strings[g]),phet.chipper.checkAndRemapLocale=(h=phet.chipper.queryParameters.locale,c=!1)=>{if(!phet.chipper.localeData||!phet.chipper.strings?.hasOwnProperty(r)||!h)return h;const f=phet.chipper.remapLocale(h,c),g=phet.chipper.getValidRuntimeLocale(f);return phet.chipper.remappedLocale=f,phet.chipper.locale=g,g},phet.chipper.queryParameters.locale===null&&(phet.chipper.queryParameters.locale=r),phet.chipper.checkAndRemapLocale()}self.phet.chipper.makeEverythingSlow=function(){self.setInterval(()=>{},16)},self.phet.chipper.makeRandomSlowness=function(){self.setInterval(()=>{},Math.ceil(100+Math.random()*200))},function(){self.phet.chipper.reportContinuousTestResult=l=>{self.parent&&self.parent.postMessage(JSON.stringify(ie.assignIn({continuousTest:JSON.parse(phet.chipper.queryParameters.continuousTest),url:self.location.href},l)),"*")},phet.chipper.queryParameters.continuousTest&&(self.addEventListener("error",l=>{let h="",c="";l&&l.message&&(h=l.message),l&&l.error&&l.error.stack&&(c=l.error.stack),phet.chipper.reportContinuousTestResult({type:"continuous-test-error",message:h,stack:c})}),self.addEventListener("beforeunload",l=>{phet.chipper.reportContinuousTestResult({type:"continuous-test-unload"})}),self.open=()=>({focus:()=>{},blur:()=>{}})),phet.chipper.queryParameters.postMessageOnError&&self.addEventListener("error",l=>{let h="",c="";l&&l.message&&(h=l.message),l&&l.error&&l.error.stack&&(c=l.error.stack),self.parent&&self.parent.postMessage(JSON.stringify({type:"error",url:self.location.href,message:h,stack:c}),"*")}),phet.chipper.queryParameters.postMessageOnBeforeUnload&&self.addEventListener("beforeunload",l=>{self.parent&&self.parent.postMessage(JSON.stringify({type:"beforeUnload"}),"*")})}(),(()=>{const l={supportsInteractiveDescription:{type:"boolean"},supportsVoicing:{type:"boolean"},supportsTier1Voicing:{type:"boolean"},supportsInteractiveHighlights:{type:"boolean"},supportsDescriptionPlugin:{type:"boolean"},supportsSound:{type:"boolean"},supportsExtraSound:{type:"boolean"},supportsDynamicLocale:{type:"boolean"},supportsPanAndZoom:{type:"boolean"},colorProfiles:{type:"array"},supportedRegionsAndCultures:{type:"array"},defaultRegionAndCulture:{type:"string"},preventMultitouch:{type:"boolean"},interruptMultitouch:{type:"boolean"}};if(Object.keys(l).forEach(h=>{}),e.hasOwnProperty("simFeatures")){const h=e.simFeatures;Object.keys(h).forEach(c=>{h[c],l[c]&&(l[c.type]==="boolean"||l[c.type])})}})()})();const Fq=globalThis.hasOwnProperty("window"),Hq=!Fq;function Yr(){return Hq||!!globalThis.assert}function jt(i,...e){if(Yr()&&!i){const t=e.length>0?"Affirmation failed: ":"Affirmation failed";console.error(t,...e),Uq.forEach(r=>r());const n=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");throw n&&(n.writable||n.set&&typeof n.set=="function")&&(Error.stackTraceLimit=20),new Error(t+e.join(`
 `))}}const Uq=[];class ld{constructor(e){if(this.name=e,!!globalThis.self&&globalThis.phet){if(e==="chipper")return globalThis.phet.chipper=globalThis.phet.chipper||{},globalThis.phet.chipper.name="chipper",globalThis.phet.chipper.register=this.register.bind(globalThis.phet.chipper),globalThis.phet.chipper;{const t=!globalThis.phet?.chipper?.brand||e==="joist";Yr()&&!t&&jt(!globalThis.phet[e],`namespace ${e} already exists`),globalThis.phet[e]=this}}}register(e,t){if(!globalThis.self)return t;if(e.includes("."))jt(!this[e],`${e} is already registered for namespace ${this.name}`),this[e]=t;else{const n=e.split(".");let s=this;for(let a=0;a<n.length-1;a++)jt(!!s[n[a]],`${[this.name].concat(n.slice(0,a+1)).join(".")} needs to be defined to register ${e}`),s=s[n[a]];const r=n[n.length-1];jt(!s[r],`${e} is already registered for namespace ${this.name}`),s[r]=t}return t}}const Gq=new ld("brand");var Yw={exports:{}};Yw.exports;(function(i){(function(e,t,n){function s(l){var h=this,c=o();h.next=function(){var f=2091639*h.s0+h.c*23283064365386963e-26;return h.s0=h.s1,h.s1=h.s2,h.s2=f-(h.c=f|0)},h.c=1,h.s0=c(" "),h.s1=c(" "),h.s2=c(" "),h.s0-=c(l),h.s0<0&&(h.s0+=1),h.s1-=c(l),h.s1<0&&(h.s1+=1),h.s2-=c(l),h.s2<0&&(h.s2+=1),c=null}function r(l,h){return h.c=l.c,h.s0=l.s0,h.s1=l.s1,h.s2=l.s2,h}function a(l,h){var c=new s(l),f=h&&h.state,g=c.next;return g.int32=function(){return c.next()*4294967296|0},g.double=function(){return g()+(g()*2097152|0)*11102230246251565e-32},g.quick=g,f&&(typeof f=="object"&&r(f,c),g.state=function(){return r(c,{})}),g}function o(){var l=4022871197,h=function(c){c=c.toString();for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var g=.02519603282416938*l;l=g>>>0,g-=l,g*=l,l=g>>>0,g-=l,l+=g*4294967296}return(l>>>0)*23283064365386963e-26};return h}t&&t.exports?t.exports=a:this.alea=a})($s,i)})(Yw);var Wq=Yw.exports,jw={exports:{}};jw.exports;(function(i){(function(e,t,n){function s(o){var l=this,h="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},o===(o|0)?l.x=o:h+=o;for(var c=0;c<h.length+64;c++)l.x^=h.charCodeAt(c)|0,l.next()}function r(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var h=new s(o),c=l&&l.state,f=function(){return(h.next()>>>0)/4294967296};return f.double=function(){do var g=h.next()>>>11,v=(h.next()>>>0)/4294967296,A=(g+v)/(1<<21);while(A===0);return A},f.int32=h.next,f.quick=f,c&&(typeof c=="object"&&r(c,h),f.state=function(){return r(h,{})}),f}t&&t.exports?t.exports=a:this.xor128=a})($s,i)})(jw);var Kq=jw.exports,Xw={exports:{}};Xw.exports;(function(i){(function(e,t,n){function s(o){var l=this,h="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:h+=o;for(var c=0;c<h.length+64;c++)l.x^=h.charCodeAt(c)|0,c==h.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var h=new s(o),c=l&&l.state,f=function(){return(h.next()>>>0)/4294967296};return f.double=function(){do var g=h.next()>>>11,v=(h.next()>>>0)/4294967296,A=(g+v)/(1<<21);while(A===0);return A},f.int32=h.next,f.quick=f,c&&(typeof c=="object"&&r(c,h),f.state=function(){return r(h,{})}),f}t&&t.exports?t.exports=a:this.xorwow=a})($s,i)})(Xw);var Yq=Xw.exports,Qw={exports:{}};Qw.exports;(function(i){(function(e,t,n){function s(o){var l=this;l.next=function(){var c=l.x,f=l.i,g,v;return g=c[f],g^=g>>>7,v=g^g<<24,g=c[f+1&7],v^=g^g>>>10,g=c[f+3&7],v^=g^g>>>3,g=c[f+4&7],v^=g^g<<7,g=c[f+7&7],g=g^g<<13,v^=g^g<<9,c[f]=v,l.i=f+1&7,v};function h(c,f){var g,v=[];if(f===(f|0))v[0]=f;else for(f=""+f,g=0;g<f.length;++g)v[g&7]=v[g&7]<<15^f.charCodeAt(g)+v[g+1&7]<<13;for(;v.length<8;)v.push(0);for(g=0;g<8&&v[g]===0;++g);for(g==8?v[7]=-1:v[g],c.x=v,c.i=0,g=256;g>0;--g)c.next()}h(l,o)}function r(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var h=new s(o),c=l&&l.state,f=function(){return(h.next()>>>0)/4294967296};return f.double=function(){do var g=h.next()>>>11,v=(h.next()>>>0)/4294967296,A=(g+v)/(1<<21);while(A===0);return A},f.int32=h.next,f.quick=f,c&&(c.x&&r(c,h),f.state=function(){return r(h,{})}),f}t&&t.exports?t.exports=a:this.xorshift7=a})($s,i)})(Qw);var jq=Qw.exports,Jw={exports:{}};Jw.exports;(function(i){(function(e,t,n){function s(o){var l=this;l.next=function(){var c=l.w,f=l.X,g=l.i,v,A;return l.w=c=c+1640531527|0,A=f[g+34&127],v=f[g=g+1&127],A^=A<<13,v^=v<<17,A^=A>>>15,v^=v>>>12,A=f[g]=A^v,l.i=g,A+(c^c>>>16)|0};function h(c,f){var g,v,A,P,w,T=[],D=128;for(f===(f|0)?(v=f,f=null):(f=f+"\0",v=0,D=Math.max(D,f.length)),A=0,P=-32;P<D;++P)f&&(v^=f.charCodeAt((P+32)%f.length)),P===0&&(w=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,P>=0&&(w=w+1640531527|0,g=T[P&127]^=v+w,A=g==0?A+1:0);for(A>=128&&(T[(f&&f.length||0)&127]=-1),A=127,P=4*128;P>0;--P)v=T[A+34&127],g=T[A=A+1&127],v^=v<<13,g^=g<<17,v^=v>>>15,g^=g>>>12,T[A]=v^g;c.w=w,c.X=T,c.i=A}h(l,o)}function r(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var h=new s(o),c=l&&l.state,f=function(){return(h.next()>>>0)/4294967296};return f.double=function(){do var g=h.next()>>>11,v=(h.next()>>>0)/4294967296,A=(g+v)/(1<<21);while(A===0);return A},f.int32=h.next,f.quick=f,c&&(c.X&&r(c,h),f.state=function(){return r(h,{})}),f}t&&t.exports?t.exports=a:this.xor4096=a})($s,i)})(Jw);var Xq=Jw.exports,Zw={exports:{}};Zw.exports;(function(i){(function(e,t,n){function s(o){var l=this,h="";l.next=function(){var f=l.b,g=l.c,v=l.d,A=l.a;return f=f<<25^f>>>7^g,g=g-v|0,v=v<<24^v>>>8^A,A=A-f|0,l.b=f=f<<20^f>>>12^g,l.c=g=g-v|0,l.d=v<<16^g>>>16^A,l.a=A-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):h+=o;for(var c=0;c<h.length+20;c++)l.b^=h.charCodeAt(c)|0,l.next()}function r(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var h=new s(o),c=l&&l.state,f=function(){return(h.next()>>>0)/4294967296};return f.double=function(){do var g=h.next()>>>11,v=(h.next()>>>0)/4294967296,A=(g+v)/(1<<21);while(A===0);return A},f.int32=h.next,f.quick=f,c&&(typeof c=="object"&&r(c,h),f.state=function(){return r(h,{})}),f}t&&t.exports?t.exports=a:this.tychei=a})($s,i)})(Zw);var Qq=Zw.exports,fD={exports:{}};const Jq={},Zq=Object.freeze(Object.defineProperty({__proto__:null,default:Jq},Symbol.toStringTag,{value:"Module"})),r2=Bq(Zq);(function(i){(function(e,t){var n=(0,eval)("this"),s=256,r=6,a=52,o="random",l=t.pow(s,r),h=t.pow(2,a),c=h*2,f=s-1,g;function v(B,O,x){var Z=[];O=O==!0?{entropy:!0}:O||{};var de=T(w(O.entropy?[B,M(e)]:B??D(),3),Z),$=new A(Z),me=function(){for(var ue=$.g(r),Se=l,Te=0;ue<h;)ue=(ue+Te)*s,Se*=s,Te=$.g(1);for(;ue>=c;)ue/=2,Se/=2,Te>>>=1;return(ue+Te)/Se};return me.int32=function(){return $.g(4)|0},me.quick=function(){return $.g(4)/4294967296},me.double=me,T(M($.S),e),(O.pass||x||function(ue,Se,Te,Re){return Re&&(Re.S&&P(Re,$),ue.state=function(){return P($,{})}),Te?(t[o]=ue,Se):ue})(me,de,"global"in O?O.global:this==t,O.state)}t["seed"+o]=v;function A(B){var O,x=B.length,Z=this,de=0,$=Z.i=Z.j=0,me=Z.S=[];for(x||(B=[x++]);de<s;)me[de]=de++;for(de=0;de<s;de++)me[de]=me[$=f&$+B[de%x]+(O=me[de])],me[$]=O;(Z.g=function(ue){for(var Se,Te=0,Re=Z.i,We=Z.j,Le=Z.S;ue--;)Se=Le[Re=f&Re+1],Te=Te*s+Le[f&(Le[Re]=Le[We=f&We+Se])+(Le[We]=Se)];return Z.i=Re,Z.j=We,Te})(s)}function P(B,O){return O.i=B.i,O.j=B.j,O.S=B.S.slice(),O}function w(B,O){var x=[],Z=typeof B,de;if(O&&Z=="object")for(de in B)try{x.push(w(B[de],O-1))}catch{}return x.length?x:Z=="string"?B:B+"\0"}function T(B,O){for(var x=B+"",Z,de=0;de<x.length;)O[f&de]=f&(Z^=O[f&de]*19)+x.charCodeAt(de++);return M(O)}function D(){try{var B;return g&&(B=g.randomBytes)?B=B(s):(B=new Uint8Array(s),(n.crypto||n.msCrypto).getRandomValues(B)),M(B)}catch{var O=n.navigator,x=O&&O.plugins;return[+new Date,n,x,n.screen,M(e)]}}function M(B){return String.fromCharCode.apply(0,B)}if(T(t.random(),e),i.exports){i.exports=v;try{g=r2}catch{}}})([],Math)})(fD);var $q=fD.exports,ez=Wq,tz=Kq,iz=Yq,nz=jq,sz=Xq,rz=Qq,wf=$q;wf.alea=ez;wf.xor128=tz;wf.xorwow=iz;wf.xorshift7=nz;wf.xor4096=sz;wf.tychei=rz;const hx="Options";function an(i,...e){Yr()&&ux(i),jt(i!==null,"target should not be null"),jt(e.length>0,"at least one source expected");for(let t=0;t<e.length;t++){const n=e[t];if(n){Yr()&&ux(n);for(const s in n)if(n.hasOwnProperty(s)&&n[s]!==void 0){const r=n[s];s.endsWith(hx)&&s!==hx?(jt(r!==void 0,"nested *Options should not be undefined"),i[s]=an(i[s]||{},r)):i[s]=r}}}return i}function ux(i){jt(i===null||i&&typeof i=="object"&&Object.getPrototypeOf(i)===Object.prototype,"object is not compatible with merge"),i!==null&&Object.keys(i).forEach(e=>{const t=Object.getOwnPropertyDescriptor(i,e);jt(!t.hasOwnProperty("set"),"cannot use merge with an object that has a setter"),jt(!t.hasOwnProperty("get"),"cannot use merge with an object that has a getter")})}const $w=(i,e,t,n)=>an(i,e,t,n);function Ne(){return $w}function so(){return $w}function Ut(i,...e){return $w(i,...e)}class us{constructor(e,...t){this.objects=[];const n=Ne()({defaultArguments:[],initialize:e.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},t[0]);for(jt(n.maxSize>=0),jt(n.initialSize>=0),this._maxPoolSize=n.maxSize,this.partialConstructor=Function.prototype.bind.bind(e,e),this.DefaultConstructor=this.partialConstructor(...n.defaultArguments),this.initialize=n.initialize,jt(this.initialize,"Either pass in an initialize option, or provide a method named initialize on the type with the proper signature"),this.useDefaultConstruction=n.useDefaultConstruction;this.objects.length<n.initialSize;)this.objects.push(this.createDefaultObject())}createDefaultObject(){return new this.DefaultConstructor}fetch(){return this.objects.length?this.objects.pop():this.createDefaultObject()}create(...e){let t;return this.objects.length?(t=this.objects.pop(),this.initialize.apply(t,e)):this.useDefaultConstruction?(t=this.createDefaultObject(),this.initialize.apply(t,e)):t=new(this.partialConstructor(...e)),t}get poolSize(){return this.objects.length}set maxPoolSize(e){jt(e===Number.POSITIVE_INFINITY||Number.isInteger(e)&&e>=0,"maxPoolSize should be a non-negative integer or infinity"),this._maxPoolSize=e}get maxPoolSize(){return this._maxPoolSize}freeToPool(e){this.objects.length<this.maxPoolSize&&this.objects.push(e)}forEach(e){this.objects.forEach(e)}}const i0=(i,e,t)=>{},cx={},mD=(i,e=self.phet&&self.phet.chipper&&self.phet.chipper.queryParameters&&phet.chipper.queryParameters.deprecationWarnings)=>{e&&!cx.hasOwnProperty(i)&&(cx[i]=!0,console.warn(`Deprecation warning: ${i}`))};class Km{constructor(e){mD("EnumerationDeprecated should be exchanged for classes that extend EnumerationValue, see WilderEnumerationPatterns for examples."),jt(e,"config must be provided");const t=!!e.keys,n=!!e.map;jt(t!==n,"must provide one or the other but not both of keys/map");const s=e.keys||Object.keys(e.map),r=e.map||{};e=an({phetioDocumentation:null,beforeFreeze:null},e),jt(Array.isArray(s),"Values should be an array"),jt(ie.uniq(s).length===s.length,"There should be no duplicated values provided"),Yr()&&s.forEach(a=>jt(typeof a=="string","Each value should be a string")),Yr()&&s.forEach(a=>jt(/^[A-Z][A-Z0-9_]*$/g.test(a),"EnumerationDeprecated values should be uppercase alphanumeric with underscores and begin with a letter")),jt(!ie.includes(s,"VALUES"),"This is the name of a built-in provided value, so it cannot be included as an enumeration value"),jt(!ie.includes(s,"KEYS"),"This is the name of a built-in provided value, so it cannot be included as an enumeration value"),jt(!ie.includes(s,"includes"),"This is the name of a built-in provided value, so it cannot be included as an enumeration value"),this.phetioDocumentation=e.phetioDocumentation,this.KEYS=s,this.VALUES=[],s.forEach(a=>{const o=r[a]||{};jt(o.name===void 0,'"rich" enumeration values cannot provide their own name attribute'),jt(o.toString===Object.prototype.toString,'"rich" enumeration values cannot provide their own toString'),o.name=a,o.toString=()=>a,this[a]=o,this.VALUES.push(o)}),e.beforeFreeze&&e.beforeFreeze(this),Yr()&&Object.freeze(this),Yr()&&Object.freeze(this.VALUES),Yr()&&Object.freeze(this.KEYS),Yr()&&s.forEach(a=>Yr()&&Object.freeze(r[a]))}toString(){return this.KEYS.join(", ")}includes(e){return ie.includes(this.VALUES,e)}getValue(e){return this[e]}getKey(e){return e.name}get values(){return this.VALUES}get keys(){return this.KEYS}get enumeration(){return this}static byKeys(e,t){return jt(Array.isArray(e),"keys must be an array"),jt(!t||t.keys===void 0),new Km(an({keys:e},t))}static byMap(e,t){if(jt(!t||t.map===void 0),Yr()){const n=ie.values(e);jt(n.length>=1,"must have at least 2 entries in an enumeration"),jt(ie.every(n,s=>s.constructor===n[0].constructor),"Values must have same constructor")}return new Km(an({map:e},t))}}const az=["string","number","boolean","function"],By=["valueType","validValues","valueComparisonStrategy","isValidValue","phetioType","validators"];class qn{static getValidatorValidationError(e){if(!(e instanceof Object))return"validator must be an Object";if(!(e.hasOwnProperty("isValidValue")||e.hasOwnProperty("valueType")||e.hasOwnProperty("validValues")||e.hasOwnProperty("valueComparisonStrategy")||e.hasOwnProperty("phetioType")||e.hasOwnProperty("validators")))return this.combineErrorMessages(`validator must have at least one of: ${By.join(",")}`,e.validationMessage);if(e.hasOwnProperty("valueType")){const t=qn.getValueOrElementTypeValidationError(e.valueType);if(t)return this.combineErrorMessages(`Invalid valueType: ${e.valueType}, error: ${t}`,e.validationMessage)}if(e.hasOwnProperty("isValidValue")&&!(typeof e.isValidValue=="function"||e.isValidValue===null||e.isValidValue===void 0))return this.combineErrorMessages(`isValidValue must be a function: ${e.isValidValue}`,e.validationMessage);if(e.hasOwnProperty("valueComparisonStrategy")&&!(e.valueComparisonStrategy==="reference"||e.valueComparisonStrategy==="lodashDeep"||e.valueComparisonStrategy==="equalsFunction"||typeof e.valueComparisonStrategy=="function"))return this.combineErrorMessages(`valueComparisonStrategy must be "reference", "lodashDeep", 
        "equalsFunction", or a comparison function: ${e.valueComparisonStrategy}`,e.validationMessage);if(e.validValues!==void 0&&e.validValues!==null){if(!Array.isArray(e.validValues))return this.combineErrorMessages(`validValues must be an array: ${e.validValues}`,e.validationMessage);const t=ie.omit(e,"validValues");if(qn.containsValidatorKey(t))for(let n=0;n<e.validValues.length;n++){const s=e.validValues[n],r=qn.getValidationError(s,t);if(r)return this.combineErrorMessages(`Item not valid in validValues: ${s}, error: ${r}`,e.validationMessage)}}if(e.hasOwnProperty("phetioType")){if(!e.phetioType)return this.combineErrorMessages("falsey phetioType provided",e.validationMessage);if(!e.phetioType.validator)return this.combineErrorMessages(`validator needed for phetioType: ${e.phetioType.typeName}`,e.validationMessage);const t=qn.getValidatorValidationError(e.phetioType.validator);if(t)return this.combineErrorMessages(t,e.validationMessage)}if(e.hasOwnProperty("validators")){const t=e.validators;for(let n=0;n<t.length;n++){const s=t[n],r=qn.getValidatorValidationError(s);if(r)return this.combineErrorMessages(`validators[${n}] invalid: ${r}`,e.validationMessage)}}return null}static getValueTypeValidatorValidationError(e){return typeof e=="function"||typeof e=="string"||e instanceof Km||e===null||e===void 0?typeof e=="string"&&!ie.includes(az,e)?`valueType not a supported primitive types: ${e}`:null:`valueType must be {function|string|EnumerationDeprecated|null|undefined}, valueType=${e}`}static validateValidator(e){}static containsValidatorKey(e){if(!(e instanceof Object))return!1;for(let t=0;t<By.length;t++)if(e.hasOwnProperty(By[t]))return!0;return!1}static combineErrorMessages(e,t){return t&&(e=`${typeof t=="function"?t():t}: ${e}`),e}static isValueValid(e,t,n){return this.getValidationError(e,t,n)===null}static getValidationError(e,t,n){const s=Ne()({validateValidator:!0},n);if(s.validateValidator){const r=qn.getValidatorValidationError(t);if(r)return r}if(t.hasOwnProperty("valueType")){const r=t.valueType;if(Array.isArray(r)){if(!ie.some(r.map(a=>!qn.getValueTypeValidationError(e,a,t.validationMessage))))return this.combineErrorMessages(`value not valid for any valueType in ${r.toString().substring(0,100)}, value: ${e}`,t.validationMessage)}else if(r){const a=qn.getValueTypeValidationError(e,r,t.validationMessage);if(a)return a}}if(t.validValues){const r=t.valueComparisonStrategy||"reference";if(!t.validValues.some(o=>qn.equalsForValidationStrategy(o,e,r)))return this.combineErrorMessages(`value not in validValues: ${e}`,t.validationMessage)}if(t.hasOwnProperty("isValidValue")&&!t.isValidValue(e))return this.combineErrorMessages(`value failed isValidValue: ${e}`,t.validationMessage);if(t.hasOwnProperty("phetioType")){const r=qn.getValidationError(e,t.phetioType.validator,s);if(r)return this.combineErrorMessages(`value failed phetioType validator: ${e}, error: ${r}`,t.validationMessage)}if(t.hasOwnProperty("validators")){const r=t.validators;for(let a=0;a<r.length;a++){const o=r[a],l=qn.getValidationError(e,o,s);if(l)return this.combineErrorMessages(`Failed validation for validators[${a}]: ${l}`,t.validationMessage)}}return null}static getValueTypeValidationError(e,t,n){return typeof t=="string"&&typeof e!==t?this.combineErrorMessages(`value should have typeof ${t}, value=${e}`,n):t===Array&&!Array.isArray(e)?this.combineErrorMessages(`value should have been an array, value=${e}`,n):t instanceof Km&&!t.includes(e)?this.combineErrorMessages(`value is not a member of EnumerationDeprecated ${t}`,n):typeof t=="function"&&!(e instanceof t)?this.combineErrorMessages(`value should be instanceof ${t.name}, value=${e}`,n):t===null&&e!==null?this.combineErrorMessages(`value should be null, value=${e}`,n):null}static getValueOrElementTypeValidationError(e){if(Array.isArray(e))for(let t=0;t<e.length;t++){const n=e[t],s=qn.getValueTypeValidatorValidationError(n);if(s)return`Array value invalid: ${s}`}else if(e){const t=qn.getValueTypeValidatorValidationError(e);if(t)return`Value type invalid: ${t}`}return null}static equalsForValidationStrategy(e,t,n="reference"){if(n==="reference")return e===t;if(n==="equalsFunction"){if(e!=null&&t!=null){const s=e,r=t,a=s.equals(r);return e.constructor===t.constructor?a:a&&r.equals(e)}return e===t}return n==="lodashDeep"?ie.isEqual(e,t):n(e,t)}}qn.VALIDATOR_KEYS=By;qn.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR={valueType:"string",isValidValue:i=>!/\{\{\w*\}\}/.test(i)};const oz={IO_TYPE_SUFFIX:"IO"},gD="ObjectIO",yD="MODEL",lz={phetioTypeName:gD,phetioDocumentation:"",phetioState:!0,phetioReadOnly:!1,phetioEventType:yD,phetioHighFrequency:!1,phetioPlayback:!1,phetioDynamicElement:!1,phetioIsArchetype:!1,phetioFeatured:!1,phetioDesigned:!1,phetioArchetypePhetioID:null},vD="a-zA-Z0-9[\\],",bD=`${vD}_`,hz=`${bD}\\-`,jr={OBJECT_IO_TYPE_NAME:gD,EVENT_TYPE_MODEL:yD,PHET_IO_OBJECT_METADATA_DEFAULTS:lz,BASE_TANDEM_CHARACTER_CLASS:vD,BASE_DYNAMIC_TANDEM_CHARACTER_CLASS:bD,BASE_DERIVED_TANDEM_CHARACTER_CLASS:hz};class za{constructor(e){const t=Ne()({displayString:"",validator:null,compositeSchema:null,apiStateKeys:null},e);this.displayString=t.displayString,this.validator=t.validator,this.compositeSchema=t.compositeSchema,this.apiStateKeys=t.apiStateKeys}defaultApplyState(e,t){for(const n in this.compositeSchema)if(this.compositeSchema.hasOwnProperty(n)){const s=this.compositeSchema[n],r=this.getCoreObjectAccessorName(n,e);s.defaultDeserializationMethod==="fromStateObject"?e[r]=this.compositeSchema[n].fromStateObject(t[n]):this.compositeSchema[n].applyState(e[r],t[n])}}defaultToStateObject(e){const t={};for(const n in this.compositeSchema)if(this.compositeSchema.hasOwnProperty(n)){const s=this.getCoreObjectAccessorName(n,e);t[n]=this.compositeSchema[n].toStateObject(e[s])}return t}getCoreObjectAccessorName(e,t){const n=e.startsWith("_")?e.substring(1):e,s=`_${n}`;let r;return t.hasOwnProperty(s)?r=s:r=n,r}isComposite(){return!!this.compositeSchema}checkStateObjectValid(e,t,n){if(this.isComposite()){const s=e,r=this.compositeSchema;let a=null;return s?(Object.keys(r).forEach(l=>{typeof l=="string"?(s.hasOwnProperty(l)&&r[l].isStateObjectValid(s[l],!1)||(a=!1),n.push(l)):console.error("key should be a string",l)}),a):(a=!1,a)}else{const s=e;return qn.isValueValid(s,this.validator)}}getRelatedTypes(){const e=[];return this.compositeSchema&&Object.keys(this.compositeSchema).forEach(n=>{e.push(this.compositeSchema[n])}),e}getStateSchemaAPI(){return this.isComposite()?ie.mapValues(this.compositeSchema,e=>e.typeName):this.displayString}static asValue(e,t){return new za({validator:t,displayString:e})}}const uz=i=>!!i;let T1=!1,x1=0;const cz=i=>{const e=i.indexOf(oz.IO_TYPE_SUFFIX);return i.substring(0,e)};class ui{constructor(e,t){this.typeName=e;const n=t.supertype||ui.ObjectIO,s=!!t.toStateObject,r=!!t.applyState,a=!!t.stateSchema,o=Ne()({supertype:ui.ObjectIO,methods:{},events:[],metadataDefaults:{},dataDefaults:{},methodOrder:[],parameterTypes:[],documentation:`PhET-iO Type for ${cz(e)}`,isFunctionType:!1,fuzzElement:null,toStateObject:null,fromStateObject:null,stateObjectToCreateElementArguments:null,applyState:null,stateSchema:null,apiStateKeys:null,defaultDeserializationMethod:"fromStateObject",addChildElement:n&&n.addChildElement},t);if(this.supertype=n,this.documentation=o.documentation,this.methods=o.methods,this.events=o.events,this.metadataDefaults=o.metadataDefaults,this.dataDefaults=o.dataDefaults,this.methodOrder=o.methodOrder,this.parameterTypes=o.parameterTypes,this.fuzzElement=o.fuzzElement,this.validator=ie.pick(o,qn.VALIDATOR_KEYS),this.validator.validationMessage=this.validator.validationMessage||`Validation failed IOType Validator: ${this.typeName}`,this.defaultDeserializationMethod=o.defaultDeserializationMethod,o.stateSchema===null||o.stateSchema instanceof za)this.stateSchema=o.stateSchema;else{const l=typeof o.stateSchema=="function"?o.stateSchema(this):o.stateSchema;this.stateSchema=new za({compositeSchema:l,apiStateKeys:o.apiStateKeys})}this.toStateObjectOption=o.toStateObject,this.fromStateObjectOption=o.fromStateObject,this.applyStateOption=o.applyState,this.stateObjectToCreateElementArgumentsOption=o.stateObjectToCreateElementArguments,this.toStateObjectSupplied=s,this.applyStateSupplied=r,this.stateSchemaSupplied=a,this.isFunctionType=o.isFunctionType,this.addChildElement=o.addChildElement}toStateObject(e){x1++;let t;!this.toStateObjectSupplied&&this.stateSchemaSupplied&&this.stateSchema&&this.stateSchema.isComposite()?t=this.defaultToStateObject(e):t=this.toStateObjectOption?this.toStateObjectOption(e):this.supertype.toStateObject(e);let n;return T1&&this.isCompositeStateSchema()&&!(x1>1&&this.apiStateKeysProvided())?n=ie.pick(t,this.getAllAPIStateKeys()):n=t,x1--,n}fromStateObject(e){return this.fromStateObjectOption?this.fromStateObjectOption(e):this.supertype.fromStateObject(e)}applyState(e,t){i0(e,this.validator),this.applyStateSupplied||this.stateSchemaSupplied,!this.applyStateSupplied&&this.stateSchemaSupplied&&this.stateSchema&&this.stateSchema.isComposite()?this.defaultApplyState(e,t):this.applyStateOption?this.applyStateOption(e,t):this.supertype.applyState(e,t)}stateObjectToCreateElementArguments(e){return this.stateObjectToCreateElementArgumentsOption?this.stateObjectToCreateElementArgumentsOption(e):this.supertype.stateObjectToCreateElementArguments(e)}defaultToStateObject(e){let t={};return this.supertype&&(t=this.supertype.defaultToStateObject(e)),this.stateSchema&&this.stateSchema.isComposite()?ie.merge(t,this.stateSchema.defaultToStateObject(e)):t}defaultApplyState(e,t){this.supertype&&this.supertype.defaultApplyState(e,t),this.stateSchema&&this.stateSchema.isComposite()&&this.stateSchema.defaultApplyState(e,t)}getTypeHierarchy(){const e=[];let t=this;for(;t;)e.push(t),t=t.supertype;return e}extends(e){return this.getTypeHierarchy().includes(e)}getAllMetadataDefaults(){return ie.merge({},this.supertype?this.supertype.getAllMetadataDefaults():{},this.metadataDefaults)}getAllDataDefaults(){return ie.merge({},this.supertype?this.supertype.getAllDataDefaults():{},this.dataDefaults)}isCompositeStateSchema(){return this.supertype?.isCompositeStateSchema()||!!this.stateSchema?.compositeSchema}getAllAPIStateKeyValues(e=[]){return this.supertype&&this.supertype.getAllAPIStateKeyValues(e),e.push(this.stateSchema?.apiStateKeys||null),e}apiStateKeysProvided(){return this.getAllAPIStateKeyValues().filter(uz).length===0}getAllAPIStateKeys(){return ie.concat(...this.getAllAPIStateKeyValues().map(e=>e||[]))}toStateObjectForAPI(e){T1=!0;const t=this.toStateObject(e);return T1=!1,t}isStateObjectValid(e,t=!1,n=[]){let s=!0;if(this.stateSchema){const r=this.stateSchema.checkStateObjectValid(e,t,n);if(r!==null)return r}return this.supertype?s&&this.supertype.isStateObjectValid(e,t,n):!this.supertype&&e&&typeof e!="string"&&!Array.isArray(e)?(Object.keys(e).forEach(r=>{n.includes(r)||(s=!1)}),s):!0}validateStateObject(e){this.isStateObjectValid(e,!0)}toString(){return this.typeName}getAPI(){const e={},t=ie.keys(this.methods);for(let r=0;r<t.length;r++){const a=t[r],o=this.methods[a],l={returnType:o.returnType.typeName,parameterTypes:o.parameterTypes.map(dx),documentation:o.documentation};o.invocableForReadOnlyElements===!1&&(l.invocableForReadOnlyElements=!1),e[a]=l}const n=this.supertype,s={methods:e,supertype:n&&n.typeName,typeName:this.typeName,documentation:this.documentation,events:this.events,metadataDefaults:this.metadataDefaults,dataDefaults:this.dataDefaults,methodOrder:this.methodOrder};return this.stateSchema&&(s.stateSchema=this.stateSchema.getStateSchemaAPI(),this.stateSchema.apiStateKeys&&this.stateSchema.apiStateKeys.length>0&&(s.apiStateKeys=this.stateSchema.apiStateKeys)),this.parameterTypes&&(s.parameterTypes=this.parameterTypes.map(dx)),s}}const dx=i=>i.typeName,px=null;ui.ObjectIO=new ui(jr.OBJECT_IO_TYPE_NAME,{isValidValue:()=>!0,supertype:null,documentation:"The root of the PhET-iO Type hierarchy",toStateObject:i=>(phet&&phet.tandem&&phet.tandem.Tandem.VALIDATION,px),fromStateObject:()=>{throw new Error("ObjectIO.fromStateObject should not be called")},stateObjectToCreateElementArguments:()=>[],applyState:ie.noop,metadataDefaults:jr.PHET_IO_OBJECT_METADATA_DEFAULTS,dataDefaults:{initialState:px},stateSchema:null});const Ii=new ui("NumberIO",{valueType:"number",documentation:"PhET-iO Type for Javascript's number primitive type",toStateObject:ie.identity,fromStateObject:i=>i,stateSchema:za.asValue("number",{isValidValue:i=>typeof i=="number"&&!isNaN(i)&&i!==Number.POSITIVE_INFINITY&&i!==Number.NEGATIVE_INFINITY})});function ws(i){return(i<0?-1:1)*Math.round(Math.abs(i))}function Xn(i,e,t){return i<e?e:i>t?t:i}const dz=(i,e)=>i.add(e);let Oe=class km{constructor(e,t){this.x=e,this.y=t}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.x*this.x+this.y*this.y}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceXY(e,t){const n=this.x-e,s=this.y-t;return Math.sqrt(n*n+s*s)}distanceSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}distanceSquaredXY(e,t){const n=this.x-e,s=this.y-t;return n*n+s*s}dot(e){return this.x*e.x+this.y*e.y}dotXY(e,t){return this.x*e+this.y*t}getAngle(){return Math.atan2(this.y,this.x)}get angle(){return this.getAngle()}angleBetween(e){const t=this.magnitude,n=e.magnitude;return Math.acos(Xn((this.x*e.x+this.y*e.y)/(t*n),-1,1))}equals(e){return this.x===e.x&&this.y===e.y}equalsEpsilon(e,t){return t||(t=0),Math.max(Math.abs(this.x-e.x),Math.abs(this.y-e.y))<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)}copy(e){return e?e.set(this):Er(this.x,this.y)}crossScalar(e){return this.x*e.y-this.y*e.x}normalized(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return Er(this.x/e,this.y/e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return Er(this.x*e,this.y*e)}times(e){return this.timesScalar(e)}componentTimes(e){return Er(this.x*e.x,this.y*e.y)}plus(e){return Er(this.x+e.x,this.y+e.y)}plusXY(e,t){return Er(this.x+e,this.y+t)}plusScalar(e){return Er(this.x+e,this.y+e)}minus(e){return Er(this.x-e.x,this.y-e.y)}minusXY(e,t){return Er(this.x-e,this.y-t)}minusScalar(e){return Er(this.x-e,this.y-e)}dividedScalar(e){return Er(this.x/e,this.y/e)}negated(){return Er(-this.x,-this.y)}getPerpendicular(){return Er(this.y,-this.x)}get perpendicular(){return this.getPerpendicular()}rotated(e){const t=this.angle+e,n=this.magnitude;return Er(n*Math.cos(t),n*Math.sin(t))}rotateAboutXY(e,t,n){const s=this.x-e,r=this.y-t,a=Math.cos(n),o=Math.sin(n);return this.x=e+s*a-r*o,this.y=t+s*o+r*a,this}rotateAboutPoint(e,t){return this.rotateAboutXY(e.x,e.y,t)}rotatedAboutXY(e,t,n){return Er(this.x,this.y).rotateAboutXY(e,t,n)}rotatedAboutPoint(e,t){return this.rotatedAboutXY(e.x,e.y,t)}blend(e,t){return Er(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}average(e){return this.blend(e,.5)}static average(e){return ie.reduce(e,dz,new km(0,0)).divideScalar(e.length)}toString(){return`Vector2(${this.x}, ${this.y})`}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}set(e){return this.setXY(e.x,e.y)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXY(this.x+e.x,this.y+e.y)}addXY(e,t){return this.setXY(this.x+e,this.y+t)}addScalar(e){return this.setXY(this.x+e,this.y+e)}subtract(e){return this.setXY(this.x-e.x,this.y-e.y)}subtractXY(e,t){return this.setXY(this.x-e,this.y-t)}subtractScalar(e){return this.setXY(this.x-e,this.y-e)}multiplyScalar(e){return this.setXY(this.x*e,this.y*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXY(this.x*e.x,this.y*e.y)}divideScalar(e){return this.setXY(this.x/e,this.y/e)}negate(){return this.setXY(-this.x,-this.y)}normalize(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXY(ws(this.x),ws(this.y))}rotate(e){const t=this.angle+e,n=this.magnitude;return this.setXY(n*Math.cos(t),n*Math.sin(t))}setPolar(e,t){return this.setXY(e*Math.cos(t),e*Math.sin(t))}toStateObject(){return{x:this.x,y:this.y}}freeToPool(){km.pool.freeToPool(this)}static createPolar(e,t){return new km(0,0).setPolar(e,t)}static fromStateObject(e){return km.from(e)}static from(e){return Er(e.x||0,e.y||0)}static getAngleBetweenVectors(e,t){const n=t.x-e.x,s=t.y-e.y;return Math.atan2(s,n)}static getDistanceBetweenVectors(e,t){const n=t.x-e.x,s=t.y-e.y;return Math.sqrt(n*n+s*s)}};Oe.pool=new us(Oe,{maxSize:1e3,initialize:Oe.prototype.setXY,defaultArguments:[0,0]});Oe.ZERO=new Oe(0,0);Oe.X_UNIT=new Oe(1,0);Oe.Y_UNIT=new Oe(0,1);Oe.prototype.isVector2=!0;Oe.prototype.dimension=2;const Er=Oe.pool.create.bind(Oe.pool);class n0 extends Oe{static mutableOverrideHelper(e){n0.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector2`)}}}n0.mutableOverrideHelper("setXY");n0.mutableOverrideHelper("setX");n0.mutableOverrideHelper("setY");const pz={x:Ii,y:Ii};Oe.Vector2IO=new ui("Vector2IO",{valueType:Oe,stateSchema:pz,toStateObject:i=>i.toStateObject(),fromStateObject:i=>Oe.fromStateObject(i),documentation:"A numerical object with x and y properties, like {x:3,y:4}"});let E1=!1,fx=0,mx=0;const gx=2*Math.PI;function fz(i,e,t){if(E1=!E1,!E1)return mx*e+i;let n,s;do n=t.nextDouble(),s=t.nextDouble();while(n<=Number.MIN_VALUE);return fx=Math.sqrt(-2*Math.log(n))*Math.cos(gx*s),mx=Math.sqrt(-2*Math.log(n))*Math.sin(gx*s),fx*e+i}class Vu{constructor(e){this.seed=null,this.seedrandom=null,this.numberOfCalls=0;const t=Ne()({seed:null},e);this.setSeed(t.seed),Vu.allRandomInstances.add(this)}dispose(){Vu.allRandomInstances.delete(this)}getSeed(){return this.seed}nextBoolean(){return this.nextDouble()>=.5}nextInt(e){const t=this.nextDouble()*e;return Math.floor(t)}nextIntBetween(e,t){const n=t-e;return this.nextInt(n+1)+e}sample(e){const t=this.nextIntBetween(0,e.length-1);return e[t]}shuffle(e){let t=-1;const n=new Array(e.length);return ie.forEach(e,s=>{const r=this.nextIntBetween(0,++t);n[t]=n[r],n[r]=s}),n}nextDouble(){return this.numberOfCalls++,this.seedrandom()}nextDoubleBetween(e,t){return e+this.nextDouble()*(t-e)}nextGaussian(){return fz(0,1,this)}nextDoubleInRange(e){return e.min<e.max?this.nextDoubleBetween(e.min,e.max):e.min}nextPointInBounds(e){return new Oe(this.nextDoubleBetween(e.minX,e.maxX),this.nextDoubleBetween(e.minY,e.maxY))}setSeed(e){typeof e=="number"||(e=Math.random()),this.seed=e,this.seedrandom=Math.seedrandom?new Math.seedrandom(`${e}`):()=>Math.random()}sampleProbabilities(e){const n=ie.sum(e)*this.nextDouble();let s=0;for(let r=0;r<e.length;r++)if(s+=e[r],s>=n)return r;return e.length-1}}Vu.allRandomInstances=new Set;const ol=new Vu({seed:ie.hasIn(self,"phet.chipper.queryParameters.randomSeed")?self.phet.chipper.queryParameters.randomSeed:null}),V1=ie.hasIn(self,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.listenerOrder;ie.hasIn(self,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.listenerLimit;if(V1&&V1.startsWith("random")){const i=V1.match(/random(?:%28|\()(\d+)(?:%29|\))/),e=i?Number(i[1]):ol.nextInt(1e6);new Vu({seed:e}),console.log("listenerOrder random seed: "+e)}class un{constructor(e,t,n){this.emitContexts=[],e&&(this.onBeforeNotify=e),t&&(this.hasListenerOrderDependencies=t),n&&(this.reentrantNotificationStrategy=n),this.listeners=new Set}dispose(){this.removeAllListeners()}emit(...e){if(this.onBeforeNotify&&this.onBeforeNotify.apply(null,e),this.listeners.size>0){const t=Ac.create(0,e);if(this.emitContexts.push(t),this.reentrantNotificationStrategy==="queue"){if(this.emitContexts.length===1)for(;this.emitContexts.length;){const n=this.emitContexts[0],s=n.hasListenerArray?n.listenerArray:this.listeners;this.notifyLoop(n,s),this.emitContexts.shift()?.freeToPool()}}else(!this.reentrantNotificationStrategy||this.reentrantNotificationStrategy==="stack")&&(this.notifyLoop(t,this.listeners),this.emitContexts.pop()?.freeToPool())}}notifyLoop(e,t){const n=e.args;for(const s of t)if(s(...n),e.index++,e.hasListenerArray)break;if(e.hasListenerArray)for(let s=e.index;s<e.listenerArray.length;s++)e.listenerArray[s](...n)}addListener(e){this.guardListeners(),this.listeners.add(e),this.changeCount&&this.changeCount(1)}removeListener(e){this.guardListeners(),this.listeners.delete(e),this.changeCount&&this.changeCount(-1)}removeAllListeners(){const e=this.listeners.size;this.guardListeners(),this.listeners.clear(),this.changeCount&&this.changeCount(-e)}guardListeners(){for(let e=this.emitContexts.length-1;e>=0;e--){const t=this.emitContexts[e];if(t.hasListenerArray)break;t.listenerArray.push(...this.listeners),t.hasListenerArray=!0}}hasListener(e){return this.listeners.has(e)}hasListeners(){return this.listeners.size>0}getListenerCount(){return this.listeners.size}forEachListener(e){this.listeners.forEach(e)}}class Ac{constructor(e,t){this.hasListenerArray=!1,this.listenerArray=[],this.initialize(e,t)}initialize(e,t){return this.index=e,this.args=t,this.hasListenerArray=!1,this}freeToPool(){Ac.pool.freeToPool(this),this.args=null,this.listenerArray.length=0}static create(e,t){return Ac.pool.create(e,t)}}Ac.pool=new us(Ac,{initialize:Ac.prototype.initialize});class oi extends un{constructor(e,t,n,s){super(t,n,s||"queue"),this._value=e}get(){return this._value}get value(){return this.get()}set value(e){this.set(e)}set(e){if(!this.equalsValue(e)){const t=this._value;this.setPropertyValue(e),this.notifyListeners(t)}}setPropertyValue(e){this._value=e}equalsValue(e){return this.areValuesEqual(e,this._value)}areValuesEqual(e,t){return qn.equalsForValidationStrategy(e,t,this.valueComparisonStrategy)}notifyListeners(e){this.emit(this._value,e,this)}link(e){this.addListener(e),e(this._value,null,this)}lazyLink(e){this.addListener(e)}unlink(e){this.removeListener(e)}unlinkAll(){this.removeAllListeners()}linkAttribute(e,t){const n=s=>{e[t]=s};return this.link(n),n}isSettable(){return!0}get valueComparisonStrategy(){return this._valueComparisonStrategy||"reference"}set valueComparisonStrategy(e){this._valueComparisonStrategy=e}dispose(){this.unlinkAll(),super.dispose()}}class ea extends Map{constructor(e){super(e),ea.caches.push(this)}static clearAll(){ea.caches.forEach(e=>e.clear())}}ea.caches=[];const mz=new oi(!1),gz=new oi(!1);class th{constructor(e){if(this._disposeEmitter=new un,this._isDisposable=!0,this._isDisposed=!1,e&&this.initializeDisposable(e),Yr()){const t=this.dispose;this.dispose=()=>{jt(!this._isDisposed,"This Disposable has already been disposed, and cannot be disposed again"),t.call(this),jt(this._isDisposed,"Disposable.dispose() call is missing from an overridden dispose method")}}}getDisposeEmitter(){return this._disposeEmitter}get disposeEmitter(){return this.getDisposeEmitter()}get isDisposed(){return this._isDisposed}get isDisposable(){return this._isDisposable}set isDisposable(e){this._isDisposable=e}initializeDisposable(e){e&&e.hasOwnProperty("isDisposable")&&(this._isDisposable=e.isDisposable)}addDisposable(...e){this.disposeEmitter.addListener(()=>{for(let t=0;t<e.length;t++)e[t].dispose()})}dispose(){if(Yr()&&!this._isDisposable&&th.assertNotDisposable(),jt(!this._isDisposed,"Disposable can only be disposed once"),this.disposerMap)for(const[e]of this.disposerMap)this.removeAllDisposerActions(e);this._disposeEmitter.emit(),this._disposeEmitter.dispose(),this._isDisposed=!0}addDisposerAction(e,t,n,s){this.disposerMap=this.disposerMap||new Map,this.disposerMap.has(e)||this.disposerMap.set(e,new Map);const r=this.disposerMap.get(e);jt(!r.has(t),`Target already registered for disposer action type: ${e}`,t);const a=()=>{r.delete(t),s()};r.set(t,{disposer:n,unregisterCallback:a}),n.disposeEmitter.addListener(a)}removeDisposerAction(e,t){if(this.disposerMap){const n=this.disposerMap.get(e);if(n){const s=n.get(t);s&&(s.disposer.disposeEmitter.removeListener(s.unregisterCallback),n.delete(t))}}}removeAllDisposerActions(e){if(this.disposerMap){const t=this.disposerMap.get(e);t&&t.forEach((n,s)=>this.removeDisposerAction(e,s))}}static assertNotDisposable(){jt(!1,"dispose is not supported, exists for the lifetime of the sim")}}function gs(i,e){jt(Array.isArray(i),"arrayRemove takes an Array");const t=ie.indexOf(i,e);jt(t>=0,"item not found in Array"),i.splice(t,1)}class Cr{static add(e,t){if(!Cr.ENABLED)return;Cr.map.set(e.phetioID,t);const n=e.phetioID.split(".");let s=Cr.root;for(let r=0;r<n.length;r++){const a=n[r];s[a]||(s[a]={}),s=s[a]}s._value=t,Cr.addedEmitter.emit(e.phetioID,t)}static remove(e){if(!Cr.ENABLED)return;const t=e.phetioID;if(Cr.map.has(t)){Cr.removedEmitter.emit(t,e),Cr.map.delete(t);const n=t.split("."),s=[];let r=Cr.root;for(let a=0;a<n.length;a++){const o=n[a];r&&(r=r[o],r&&s.push(r))}s.length===n.length&&delete r._value;for(let a=s.length-1;a>=0;a--){const o=s[a];o&&Object.keys(o).length===0&&delete s[a]}}}}Cr.ENABLED=!!self?.phet?.chipper?.queryParameters?.supportsDescriptionPlugin;Cr.root={};Cr.map=new Map;Cr.addedEmitter=new un;Cr.removedEmitter=new un;class js{toString(){return this.name}isEnumerationValue(){return!0}constructor(){const e=this.constructor;jt(!js.sealedCache.has(e),"cannot create instanceof of a sealed constructor"),this._name=null,this._enumeration=null}set name(e){jt(!this._name,"name cannot be changed once defined."),this._name=e}get name(){return jt(this._name,"name cannot be retrieved until it has been filled in by Enumeration."),this._name}set enumeration(e){jt(!this._enumeration,"enumeration cannot be changed once defined."),this._enumeration=e}get enumeration(){return jt(this._enumeration,"enumeration cannot be retrieved until it has been filled in by Enumeration."),this._enumeration}}js.sealedCache=new Set;function eS(i){const e=[i];let t=i.prototype;for(;t&&(t=Object.getPrototypeOf(t));)t.constructor&&e.push(t.constructor);return e}class Sr{constructor(e,t){const n=Ne()({phetioDocumentation:"",instanceType:e},t);this.phetioDocumentation=n.phetioDocumentation;const s=n.instanceType,r=ie.reverse(eS(e));jt(r.includes(s),"the specified type should be in its own hierarchy"),this.keys=[],this.values=[],r.forEach(a=>{Object.keys(a).forEach(o=>{const l=a[o];l instanceof s&&(jt(o===o.toUpperCase(),"keys should be upper case by convention"),this.keys.push(o),this.values.push(l),l instanceof e&&(l.name=o,l.enumeration=this))})}),jt(this.keys.length>0,"no keys found"),jt(this.values.length>0,"no values found"),this.Enumeration=e,js.sealedCache.add(e)}getKey(e){return e.name}getValue(e){return this.Enumeration[e]}includes(e){return this.values.includes(e)}}const k1=new ea,yx=i=>i.join("|"),tS=i=>{const e=i.enumeration;if(!k1.has(e)){const t=e.phetioDocumentation?` ${e.phetioDocumentation}`:"",n=e.keys,s=e.values,r=`EnumerationIO(${yx(n)})`;k1.set(e,new ui(r,{validValues:s,documentation:`Possible values: ${n.join(", ")}.${t}`,toStateObject:a=>e.getKey(a),fromStateObject:a=>e.getValue(a),stateSchema:za.asValue(`${yx(n)}`,{isValidValue:a=>n.includes(a)})}))}return k1.get(e)};var _D;class vi extends js{}_D=jr.EVENT_TYPE_MODEL;vi.USER=new vi;vi[_D]=new vi;vi.WRAPPER=new vi;vi.OPT_OUT=new vi;vi.enumeration=new Sr(vi);vi.phetioType=tS(vi);const iS=new ui("ValueIO",{isValidValue:ie.stubTrue,supertype:ui.ObjectIO,toStateObject:i=>i,fromStateObject:i=>i,stateSchema:za.asValue("*",{isValidValue:ie.stubTrue})}),xi=new ui("StringIO",{supertype:iS,valueType:"string",documentation:"PhET-iO Type for Javascript's string primitive type",stateSchema:za.asValue("string",{valueType:"string"}),toStateObject:ie.identity}),yz=new ui("LinkedElementIO",{isValidValue:()=>!0,documentation:"A LinkedElement",toStateObject:i=>({elementID:i.element.tandem.phetioID}),applyState:ie.noop,stateSchema:{elementID:xi},apiStateKeys:["elementID"]}),Xo=".",AD="_",a2="-",vz="general",bz="global",_z="homeScreen",Az="model",wz="view",Sz="colors",Pz="strings",Tz="controller",vx="Screen",o2="archetype",wD="Capsule";class Fn{constructor(){jt(!1,"should not construct a PhetioIDUtils")}static append(e,...t){return t.forEach(n=>{if(jt(!n.includes(Xo),`separator appears in componentName: ${n}`),n==="")return;e+=(e===""?"":Xo)+n}),e}static getComponentName(e){jt(e.length>0);const t=e.lastIndexOf(Xo);return t===-1?e:e.substring(t+1,e.length)}static getParentID(e){const t=e.lastIndexOf(Xo);return t===-1?null:e.substring(0,t)}static getDOMElementID(e){return`phetioID:${e}`}static getScreenID(e){const t=[],n=e.split(Xo);for(let s=0;s<n.length;s++){const r=n[s];t.push(r);const a=r.indexOf(vx);if(a>0&&a+vx.length===r.length)return t.join(Xo)}return null}static getGroupElementIndex(e){return jt(e.includes(this.GROUP_SEPARATOR),"component name for phetioID should have group element syntax"),Number(e.split(this.GROUP_SEPARATOR)[1])}static isAncestor(e,t){const n=e.split(Xo),s=t.split(Xo);for(let r=0;r<n.length;r++)if(n[r]!==s[r])return!1;return t!==e}static getArchetypalPhetioID(e){const t=e.split(Xo);for(let n=0;n<t.length;n++){const s=t[n];if(s.endsWith(wD)&&n<t.length-1)t[n+1]=o2,n++;else{const r=s.split(a2).map(a=>a.includes(AD)?o2:a);t[n]=r.join(a2)}}return t.join(Xo)}}Fn.SEPARATOR=Xo;Fn.GROUP_SEPARATOR=AD;Fn.INTER_TERM_SEPARATOR=a2;Fn.GENERAL_COMPONENT_NAME=vz;Fn.GLOBAL_COMPONENT_NAME=bz;Fn.HOME_SCREEN_COMPONENT_NAME=_z;Fn.MODEL_COMPONENT_NAME=Az;Fn.VIEW_COMPONENT_NAME=wz;Fn.CONTROLLER_COMPONENT_NAME=Tz;Fn.COLORS_COMPONENT_NAME=Sz;Fn.STRINGS_COMPONENT_NAME=Pz;Fn.ARCHETYPE=o2;Fn.CAPSULE_SUFFIX=wD;const xz=ie.hasIn(self,"phet.preloads.phetio"),l2=ie.hasIn(self,"phet.chipper.packageObject")?phet.chipper.packageObject:{name:"placeholder"},qc=xz,nS=qc&&phet.preloads.phetio.queryParameters.phetioPrintMissingTandems,Ez=ie.hasIn(l2,"phet.phet-io.validation")?!!l2.phet["phet-io"].validation:!0,Vz=ua.containsKey("phetioValidation"),kz=qc&&Vz?!!phet.preloads.phetio.queryParameters.phetioValidation:qc&&Ez,SD=qc&&kz&&!nS,PD="requiredTandem",TD="optionalTandem",xD="test",Cz=Fn.INTER_TERM_SEPARATOR,sS=Fn.ARCHETYPE;let Dz=!1;const h2={required:[],optional:[]},fm=[],ty=[];class R{constructor(e,t,n){this.children={},this.isDisposed=!1,this.parentTandem=e,this.name=t,this.phetioID=this.parentTandem?Fn.append(this.parentTandem.phetioID,this.name):this.name;const s=Ne()({required:!0,supplied:!0,isValidTandemName:r=>R.getRegexFromCharacterClass().test(r)},n);this.children={},this.parentTandem&&this.parentTandem.addChild(t,this),this.required=s.required,this.supplied=s.supplied}static getRegexFromCharacterClass(e=jr.BASE_TANDEM_CHARACTER_CLASS){return new RegExp(`^[${e}]+$`)}static onMissingTandem(e){if(nS&&!e.supplied){const t=R.captureStackTrace();e.required?h2.required.push({phetioID:e.phetioID,stack:t}):t.includes("Font")||h2.optional.push({phetioID:e.phetioID,stack:t})}}static captureStackTrace(e=1/0){const t=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");if(t&&(t.writable||t.set&&typeof t.set=="function")){const s=Error.stackTraceLimit;Error.stackTraceLimit=e;const r=new Error().stack;return Error.stackTraceLimit=s,r}else return new Error().stack}addPhetioObject(e){if(qc){if(!this.required&&!this.supplied)return;if(!R.launched)R.bufferedPhetioObjects.push(e);else for(let t=0;t<fm.length;t++)fm[t].addPhetioObject(e)}}hasAncestor(e){return this.parentTandem===e||!!(this.parentTandem&&this.parentTandem.hasAncestor(e))}removePhetioObject(e){if(this.supplied){if(qc)if(!R.launched)gs(R.bufferedPhetioObjects,e);else for(let t=0;t<fm.length;t++)fm[t].removePhetioObject(e);e.tandem.dispose()}}getExtendedOptions(e){return an({supplied:this.supplied,required:this.required},e)}createTandem(e,t){return t=this.getExtendedOptions(t),this.hasChild(e)?this.children[e]:new R(this,e,t)}createTandem1Indexed(e,t,n){return this.createTandem(`${e}${t+1}`,n)}hasChild(e){return this.children.hasOwnProperty(e)}addChild(e,t){this.children[e]=t}iterateDescendants(e){for(const t in this.children)this.children.hasOwnProperty(t)&&(e(this.children[t]),this.children[t].iterateDescendants(e))}removeChild(e){delete this.children[e]}dispose(){this.parentTandem.removeChild(this.name),this.parentTandem=null,this.isDisposed=!0}getArchetypalPhetioID(){return Fn.getArchetypalPhetioID(this.phetioID)}createGroupTandem(e,t=1){return this.children[e]?this.children[e]:new Iz(this,e,t)}equals(e){return this.phetioID===e.phetioID}static addPhetioObjectListener(e){fm.push(e)}static launch(){for(R.launched=!0;ty.length>0;)ty.shift()()}static unlaunch(){R.launched=!1,R.bufferedPhetioObjects.length=0,ty.length=0}static addLaunchListener(e){ty.push(e)}createTandemFromPhetioID(e){return this.createTandem(e.split(Fn.SEPARATOR).join(Cz),{isValidTandemName:t=>R.getRegexFromCharacterClass(jr.BASE_DERIVED_TANDEM_CHARACTER_CLASS).test(t)})}static getStringsTandem(e=R.ROOT.name){return R.STRINGS.createTandem(e)}static getDerivedStringsTandem(e=R.ROOT.name){return R.getStringsTandem(e).createTandem("derivedStrings")}}R.SCREEN_TANDEM_NAME_SUFFIX="Screen";R.missingTandems=h2;R.PHET_IO_ENABLED=qc;R.VALIDATION=SD;R.apiValidationEnabled=Dz;R.METADATA_KEY="_metadata";R.DATA_KEY="_data";R.launched=!1;R.bufferedPhetioObjects=[];R.RootTandem=class extends R{createTandem(e,t){return R.VALIDATION&&(e===Fn.GLOBAL_COMPONENT_NAME||e===PD||e===TD||e===xD||e===Fn.GENERAL_COMPONENT_NAME||ie.endsWith(e,R.SCREEN_TANDEM_NAME_SUFFIX)),super.createTandem(e,t)}};R.ROOT=new R.RootTandem(null,ie.camelCase(l2.name));R.GENERAL=R.ROOT.createTandem(Fn.GENERAL_COMPONENT_NAME);R.ROOT_TEST=R.ROOT.createTandem(xD);R.GENERAL_MODEL=R.GENERAL.createTandem(Fn.MODEL_COMPONENT_NAME);R.GENERAL_VIEW=R.GENERAL.createTandem(Fn.VIEW_COMPONENT_NAME);R.GENERAL_CONTROLLER=R.GENERAL.createTandem(Fn.CONTROLLER_COMPONENT_NAME);R.GLOBAL=R.ROOT.createTandem(Fn.GLOBAL_COMPONENT_NAME);R.GLOBAL_MODEL=R.GLOBAL.createTandem(Fn.MODEL_COMPONENT_NAME);R.GLOBAL_VIEW=R.GLOBAL.createTandem(Fn.VIEW_COMPONENT_NAME);R.COLORS=R.GLOBAL_VIEW.createTandem(Fn.COLORS_COMPONENT_NAME);R.STRINGS=R.GENERAL_MODEL.createTandem(Fn.STRINGS_COMPONENT_NAME);R.OPTIONAL=R.ROOT.createTandem(TD,{required:!1,supplied:!1});R.OPT_OUT=R.OPTIONAL;R.REQUIRED=R.ROOT.createTandem(PD,{required:SD||nS,supplied:!1});R.PREFERENCES=R.GLOBAL_MODEL.createTandem("preferences");R.addLaunchListener(()=>{for(;R.bufferedPhetioObjects.length>0;){const i=R.bufferedPhetioObjects.shift();i.tandem.addPhetioObject(i)}});class Iz extends R{constructor(e,t,n){super(e,t),this.groupName=t,this.groupMemberIndex=n}createNextTandem(){const e=this.parentTandem.createTandem(`${this.groupName}${this.groupMemberIndex}`);return this.groupMemberIndex++,e}}const iy=R.PHET_IO_ENABLED,Lz=i=>i.tandem.phetioID,C1=-1,bx=!!self.phet?.chipper?.queryParameters?.supportsDescriptionPlugin,u2={tandem:R.OPTIONAL,phetioType:ui.ObjectIO,phetioDocumentation:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDocumentation,phetioState:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioState,phetioReadOnly:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioReadOnly,phetioEventType:vi.MODEL,phetioHighFrequency:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioHighFrequency,phetioPlayback:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioPlayback,phetioFeatured:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioFeatured,phetioDynamicElement:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDynamicElement,phetioDesigned:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDesigned,phetioEventMetadata:null,tandemNameSuffix:null,descriptionTandem:R.OPTIONAL};class rn extends th{constructor(e){super(),this.tandem=u2.tandem,this.phetioID=this.tandem.phetioID,this.phetioObjectInitialized=!1,e&&this.initializePhetioObject({},e)}initializePhetioObject(e,t){if(this.initializeDisposable(t),t.tandem&&R.onMissingTandem(t.tandem),bx&&t.tandem&&t.tandem.supplied&&Cr.add(t.tandem,this),!(iy&&t.tandem&&t.tandem.supplied)){t.tandem&&(this.tandem=t.tandem,this.phetioID=this.tandem.phetioID);return}const n=Ut({},u2,e);let s=Ne()(n,t);this.phetioIsArchetype=!1,this.phetioBaselineMetadata=R.apiValidationEnabled||phet.preloads.phetio.queryParameters.phetioEmitAPIBaseline?this.getMetadata(an({phetioIsArchetype:this.phetioIsArchetype,phetioArchetypePhetioID:this.phetioArchetypePhetioID},s)):null;const r=s.tandem.getArchetypalPhetioID();if(self.phet.preloads.phetio.phetioElementsOverrides){const a=self.phet.preloads.phetio.phetioElementsOverrides[r];a&&(s=Ne()(s,a))}this.tandem=s.tandem,this.phetioID=this.tandem.phetioID,this._phetioType=s.phetioType,this._phetioState=s.phetioState,this._phetioReadOnly=s.phetioReadOnly,this._phetioDocumentation=s.phetioDocumentation,this._phetioEventType=s.phetioEventType,this._phetioHighFrequency=s.phetioHighFrequency,this._phetioPlayback=s.phetioPlayback,this._phetioDynamicElement=s.phetioDynamicElement,this._phetioFeatured=s.phetioFeatured,this._phetioEventMetadata=s.phetioEventMetadata,this._phetioDesigned=s.phetioDesigned,this.phetioArchetypePhetioID=null,this.linkedElements=[],this.phetioNotifiedObjectCreated=!1,this.phetioMessageStack=[],this._phetioPlayback&&(this._phetioEventMetadata=this._phetioEventMetadata||{},this._phetioEventMetadata.playback=!0),this.tandem.addPhetioObject(this),this.phetioObjectInitialized=!0}static swapCaseOfFirstCharacter(e){const t=e[0];return(t===t.toLowerCase()?t.toUpperCase():t.toLowerCase())+e.substring(1)}get phetioType(){return this._phetioType}get phetioState(){return this._phetioState}get phetioReadOnly(){return this._phetioReadOnly}get phetioDocumentation(){return this._phetioDocumentation}get phetioEventType(){return this._phetioEventType}get phetioHighFrequency(){return this._phetioHighFrequency}get phetioPlayback(){return this._phetioPlayback}get phetioDynamicElement(){return this._phetioDynamicElement}get phetioFeatured(){return this._phetioFeatured}get phetioEventMetadata(){return this._phetioEventMetadata}get phetioDesigned(){return this._phetioDesigned}phetioStartEvent(e,t){if(iy&&this.isPhetioInstrumented()){const n=Ne()({data:null,getData:null},t);if(!ie.hasIn(self,"phet.phetio.dataStream")){this.phetioMessageStack.push(C1);return}const s=this.phetioHighFrequency&&ie.hasIn(self,"phet.preloads.phetio.queryParameters")&&!self.phet.preloads.phetio.queryParameters.phetioEmitHighFrequencyEvents&&!phet.phetio.dataStream.isEmittingLowFrequencyEvent();let r=!ie.hasIn(self,"phet.phetio.dataStream");if(s||this.phetioEventType===vi.OPT_OUT||r){this.phetioMessageStack.push(C1);return}const a=n.getData?n.getData():n.data;this.phetioMessageStack.push(phet.phetio.dataStream.start(this.phetioEventType,this.tandem.phetioID,this.phetioType,e,a,this.phetioEventMetadata,this.phetioHighFrequency)),this.phetioPlayback&&phet.phetio.dataStream.pushNonPlaybackable()}}phetioEndEvent(e=!1){if(iy&&this.isPhetioInstrumented()){const t=this.phetioMessageStack.pop();if(t===C1)return;this.phetioPlayback&&phet.phetio.dataStream.popNonPlaybackable(),phet.phetio.dataStream.end(t,e)}}propagateDynamicFlagsToDescendants(){const e=phet.phetio.phetioEngine,t=R.launched?[]:R.bufferedPhetioObjects.map(Lz);this.tandem.iterateDescendants(n=>{const s=n.phetioID;if(e.hasPhetioObject(s)||!R.launched&&t.includes(s)){const r=e.hasPhetioObject(s)?e.getPhetioElement(s):R.bufferedPhetioObjects[t.indexOf(s)];r.phetioIsArchetype=this.phetioIsArchetype,r.setPhetioDynamicElement(this.phetioDynamicElement),r.phetioBaselineMetadata&&(r.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype)}})}setPhetioDynamicElement(e){this._phetioDynamicElement=this.phetioIsArchetype?!1:e,this.phetioArchetypePhetioID=e?this.tandem.getArchetypalPhetioID():null,this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioDynamicElement=this.phetioDynamicElement)}markDynamicElementArchetype(){this.phetioIsArchetype=!0,this.setPhetioDynamicElement(!1),this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype),R.PHET_IO_ENABLED&&this.propagateDynamicFlagsToDescendants()}isPhetioInstrumented(){return this.tandem&&this.tandem.supplied}addLinkedElement(e,t){if(!this.isPhetioInstrumented()){this.linkedElements=null;return}if(iy&&e.isPhetioInstrumented()){const n=Ne()({},t);let s=null;t&&t.tandem?s=t.tandem:t&&t.tandemName?s=this.tandem.createTandem(t.tandemName):!t&&e.tandem&&(s=this.tandem.createTandem(e.tandem.name)),s&&(n.tandem=s),this.linkedElements.push(new _x(e,n))}}removeLinkedElements(e){this.isPhetioInstrumented()&&this.linkedElements&&this.linkedElements.filter(n=>n.element===e).forEach(n=>{n.dispose(),gs(this.linkedElements,n)})}onSimulationConstructionCompleted(){this.phetioBaselineMetadata=null}getPhetioMouseHitTarget(e=!1){if(!e&&phet.tandem.phetioElementSelectionProperty.value==="linked"){const t=this.getCorrespondingLinkedElement();if(t!=="noCorrespondingLinkedElement")return t.getPhetioMouseHitTarget(!0);if(this.tandem.parentTandem){const n=phet.phetio.phetioEngine.phetioElementMap[this.tandem.parentTandem.phetioID];if(n){const s=n.getCorrespondingLinkedElement();if(s!=="noCorrespondingLinkedElement")return s.getPhetioMouseHitTarget(!0)}}}return phet.tandem.phetioElementSelectionProperty.value==="string"?"phetioNotSelectable":this.getPhetioMouseHitTargetSelf()}getPhetioMouseHitTargetSelf(){return this.isPhetioMouseHitSelectable()?this:"phetioNotSelectable"}isPhetioMouseHitSelectable(){const e=phet.tandem.phetioElementsDisplayProperty.value!=="featured"||this.isDisplayedInFeaturedTree();return this.isPhetioInstrumented()&&e}isDisplayedInFeaturedTree(){if(this.isPhetioInstrumented()&&this.phetioFeatured)return!0;let e=!1;return this.tandem.iterateDescendants(t=>{const n=phet.phetio.phetioEngine.phetioElementMap[t.phetioID];n&&n.isPhetioInstrumented()&&n.phetioFeatured&&(e=!0)}),e}getCorrespondingLinkedElement(){const e=Object.keys(this.tandem.children),t=[];e.forEach(r=>{const a=Fn.append(this.tandem.phetioID,r),o=phet.phetio.phetioEngine.phetioElementMap[a];o instanceof _x&&t.push(o)});const n=t.map(r=>Fn.getComponentName(r.phetioID));let s=null;if(t.length===1)s=t[0];else if(n.includes("property"))s=t[n.indexOf("property")];else if(n.includes("valueProperty"))s=t[n.indexOf("valueProperty")];else return"noCorrespondingLinkedElement";return s.element}dispose(){bx&&this.tandem&&this.tandem.supplied&&Cr.remove(this),this.tandem.removePhetioObject(this),this.linkedElements&&(this.linkedElements.forEach(e=>e.dispose()),this.linkedElements.length=0),super.dispose()}getMetadata(e){e=e||this;const t={phetioTypeName:e.phetioType.typeName,phetioDocumentation:e.phetioDocumentation,phetioState:e.phetioState,phetioReadOnly:e.phetioReadOnly,phetioEventType:vi.phetioType.toStateObject(e.phetioEventType),phetioHighFrequency:e.phetioHighFrequency,phetioPlayback:e.phetioPlayback,phetioDynamicElement:e.phetioDynamicElement,phetioIsArchetype:e.phetioIsArchetype,phetioFeatured:e.phetioFeatured,phetioDesigned:e.phetioDesigned};return e.phetioArchetypePhetioID&&(t.phetioArchetypePhetioID=e.phetioArchetypePhetioID),t}static create(e){return new rn(e)}}rn.DEFAULT_OPTIONS=u2;rn.METADATA_DOCUMENTATION=`Get metadata about the PhET-iO Element. This includes the following keys:<ul><li><strong>phetioTypeName:</strong> The name of the PhET-iO Type
</li><li><strong>phetioDocumentation:</strong> default - null. Useful notes about a PhET-iO Element, shown in the PhET-iO Studio Wrapper</li><li><strong>phetioState:</strong> default - true. When true, includes the PhET-iO Element in the PhET-iO state
</li><li><strong>phetioReadOnly:</strong> default - false. When true, you can only get values from the PhET-iO Element; no setting allowed.
</li><li><strong>phetioEventType:</strong> default - MODEL. The category of event that this element emits to the PhET-iO Data Stream.
</li><li><strong>phetioDynamicElement:</strong> default - false. If this element is a "dynamic element" that can be created and destroyed throughout the lifetime of the sim (as opposed to existing forever).
</li><li><strong>phetioIsArchetype:</strong> default - false. If this element is an archetype for a dynamic element.
</li><li><strong>phetioFeatured:</strong> default - false. If this is a featured PhET-iO Element.
</li><li><strong>phetioArchetypePhetioID:</strong> default - ''. If an applicable dynamic element, this is the phetioID of its archetype.
</li></ul>`;class _x extends rn{constructor(e,t){const n=Ne()({phetioType:yz,phetioState:!0,phetioFeatured:e.phetioFeatured},t);n.phetioReadOnly=!0,super(n),this.element=e}}const D1=new ea,Kl=i=>(D1.has(i)||D1.set(i,new ui(`ArrayIO<${i.typeName}>`,{valueType:Array,isValidValue:e=>ie.every(e,t=>qn.isValueValid(t,i.validator)),parameterTypes:[i],toStateObject:e=>e.map(t=>i.toStateObject(t)),fromStateObject:e=>e.map(t=>i.fromStateObject(t)),documentation:"PhET-iO Type for the built-in JS array type, with the element type specified.",stateSchema:za.asValue(`Array<${i.typeName}>`,{isValidValue:e=>ie.every(e,t=>i.isStateObjectValid(t))})})),D1.get(i)),Fs=new ui("BooleanIO",{supertype:iS,valueType:"boolean",documentation:"PhET-iO Type for Javascript's boolean primitive type",stateSchema:za.asValue("boolean",{valueType:"boolean"}),toStateObject:ie.identity}),I1=new ea,pp=(i,e)=>{for(let n=0;n<e.length;n++);const t=`${i.typeName}.${e.map(n=>n.typeName).join(",")}`;if(!I1.has(t)){let n=e.map(r=>r.typeName).join(", ");n===""&&(n="none");const s=e.map(r=>r.typeName).join(",");I1.set(t,new ui(`FunctionIO(${s})=>${i.typeName}`,{valueType:"function",isFunctionType:!0,parameterTypes:e.concat([i]),documentation:`Wrapper for the built-in JS function type.<br><strong>Arguments:</strong> ${n}<br><strong>Return Type:</strong> ${i.typeName}`}))}return I1.get(t)},L1=new ea,fi=i=>(L1.has(i)||L1.set(i,new ui(`NullableIO<${i.typeName}>`,{documentation:"A PhET-iO Type adding support for null in addition to the behavior of its parameter.",isValidValue:e=>e===null||qn.isValueValid(e,i.validator),parameterTypes:[i],toStateObject:e=>e===null?null:i.toStateObject(e),fromStateObject:e=>e===null?null:i.fromStateObject(e),stateSchema:za.asValue(`null|<${i.typeName}>`,{isValidValue:e=>e===null||i.isStateObjectValid(e)})})),L1.get(i)),rr=new ui("VoidIO",{isValidValue:()=>!0,documentation:"Type for which there is no instance, usually to mark functions without a return value",toStateObject:()=>{}});class Ts extends js{}Ts.UNDEFER=new Ts;Ts.NOTIFY=new Ts;Ts.enumeration=new Sr(Ts);class Mz{constructor(){this.initialized=!1,this.phaseCallbackSets=new Oz,this.undeferBeforeUndeferMapPair=new ny(Ts.UNDEFER,Ts.UNDEFER),this.undeferBeforeNotifyMapPair=new ny(Ts.UNDEFER,Ts.NOTIFY),this.notifyBeforeUndeferMapPair=new ny(Ts.NOTIFY,Ts.UNDEFER),this.notifyBeforeNotifyMapPair=new ny(Ts.NOTIFY,Ts.NOTIFY),this.mapPairs=[this.undeferBeforeUndeferMapPair,this.undeferBeforeNotifyMapPair,this.notifyBeforeUndeferMapPair,this.notifyBeforeNotifyMapPair]}initialize(e,t){e.onBeforeApplyStateEmitter.addListener(n=>{if(n instanceof t&&!n.isDeferred){n.setDeferred(!0);const s=n.tandem.phetioID,r=()=>{const a=n.setDeferred(!1);this.phaseCallbackSets.addNotifyPhaseCallback(new Ax(s,Ts.NOTIFY,a||ie.noop))};this.phaseCallbackSets.addUndeferPhaseCallback(new Ax(s,Ts.UNDEFER,r))}}),e.undeferEmitter.addListener(n=>{this.undeferAndNotifyProperties(new Set(Object.keys(n)))}),e.isSettingStateProperty.lazyLink(n=>{}),this.initialized=!0}static validateInstrumentedProperty(e){}validatePropertyPhasePair(e,t){}getMapPairFromPhases(e,t){return this.mapPairs.filter(s=>e===s.beforePhase&&t===s.afterPhase)[0]}registerPhetioOrderDependency(e,t,n,s){R.PHET_IO_ENABLED&&(this.validatePropertyPhasePair(e,t),this.validatePropertyPhasePair(n,s),this.getMapPairFromPhases(t,s).addOrderDependency(e.tandem.phetioID,n.tandem.phetioID))}propertyInAnOrderDependency(e){return ie.some(this.mapPairs,t=>t.usesPhetioID(e.tandem.phetioID))}unregisterOrderDependenciesForProperty(e){R.PHET_IO_ENABLED&&this.propertyInAnOrderDependency(e)&&this.mapPairs.forEach(t=>t.unregisterOrderDependenciesForProperty(e))}undeferAndNotifyProperties(e){const t={};let n=0;for(;this.phaseCallbackSets.size>0;)n++,n>5e3&&this.errorInUndeferAndNotifyStep(t),this.attemptToApplyPhases(Ts.UNDEFER,t,e),this.attemptToApplyPhases(Ts.NOTIFY,t,e)}errorInUndeferAndNotifyStep(e){const t=[];this.phaseCallbackSets.forEach(a=>t.push(a.getTerm()));const n=[];this.mapPairs.forEach(a=>{const o=a.beforeMap;for(const[l,h]of o)h.forEach(c=>{const f=l+o.beforePhase,g=c+o.afterPhase;(t.includes(f)||t.includes(g))&&n.push({beforeTerm:f,afterTerm:g})})});let s="";console.log("still to be undeferred",this.phaseCallbackSets.undeferSet),console.log("still to be notified",this.phaseCallbackSets.notifySet),console.log("order dependencies that apply to the still todos",n),n.forEach(a=>{s+=`${a.beforeTerm}	${a.afterTerm}
`}),console.log(`

in graphable form:

`,s);const r="Impossible set state: from undeferAndNotifyProperties; ordering constraints cannot be satisfied";throw new Error(r)}getNumberOfOrderDependencies(){let e=0;return this.mapPairs.forEach(t=>{t.afterMap.forEach(n=>{e+=n.size})}),e}attemptToApplyPhases(e,t,n){const s=this.phaseCallbackSets.getSetFromPhase(e);for(const r of s)this.phetioIDCanApplyPhase(r.phetioID,e,t,n)&&(r.listener(),s.delete(r),t[r.getTerm()]=!0)}phetioIDCanApplyPhase(e,t,n,s){if(t===Ts.NOTIFY&&!n[e+Ts.UNDEFER])return!1;const r=[];this.mapPairs.forEach(a=>{a.afterPhase===t&&r.push(a.afterMap)});for(let a=0;a<r.length;a++){const o=r[a];if(!o.has(e))return!0;const l=o.get(e);for(const h of l)if(!n[h+o.beforePhase]&&s.has(h)&&s.has(e))return!1}return!0}}class Ax{constructor(e,t,n=ie.noop){this.phetioID=e,this.phase=t,this.listener=n}getTerm(){return this.phetioID+this.phase}}class ny{constructor(e,t){this.beforeMap=new Map,this.beforeMap.beforePhase=e,this.beforeMap.afterPhase=t,this.afterMap=new Map,this.afterMap.beforePhase=e,this.afterMap.afterPhase=t,this.beforeMap.otherMap=this.afterMap,this.afterMap.otherMap=this.beforeMap,this.beforePhase=e,this.afterPhase=t}addOrderDependency(e,t){this.beforeMap.has(e)||this.beforeMap.set(e,new Set),this.beforeMap.get(e).add(t),this.afterMap.has(t)||this.afterMap.set(t,new Set),this.afterMap.get(t).add(e)}unregisterOrderDependenciesForProperty(e){const t=e.tandem.phetioID;[this.beforeMap,this.afterMap].forEach(n=>{n.has(t)&&n.get(t).forEach(s=>{const r=n.otherMap.get(s);r&&r.delete(t),r.size===0&&n.otherMap.delete(s)}),n.delete(t)})}usesPhetioID(e){return this.beforeMap.has(e)||this.afterMap.has(e)}}class Oz{constructor(){this.undeferSet=new Set,this.notifySet=new Set}get size(){return this.undeferSet.size+this.notifySet.size}forEach(e){this.undeferSet.forEach(e),this.notifySet.forEach(e)}addUndeferPhaseCallback(e){this.undeferSet.add(e)}addNotifyPhaseCallback(e){this.notifySet.add(e)}getSetFromPhase(e){return e===Ts.NOTIFY?this.notifySet:this.undeferSet}}const c2=new Mz,Nz={validateValidator:!1};let Rz=0;const M1=new ea;class ks extends rn{constructor(e,t){const n=Ne()({units:null,reentrant:!1,hasListenerOrderDependencies:!1,reentrantNotificationStrategy:"queue",valueComparisonStrategy:"reference",tandemNameSuffix:["Property",sS],phetioOuterType:ks.PropertyIO,phetioValueType:ui.ObjectIO},t);n.units&&(n.phetioEventMetadata=n.phetioEventMetadata||{},n.phetioEventMetadata.units=n.units),n.phetioOuterType&&n.phetioValueType&&(n.phetioType=n.phetioOuterType(n.phetioValueType)),qn.containsValidatorKey(n)||(n.isValidValue=()=>!0),super(n),this.id=Rz++,this.units=n.units,this.isPhetioInstrumented(),this.validValues=n.validValues,this.tinyProperty=new oi(e,null,n.hasListenerOrderDependencies,n.reentrantNotificationStrategy),this.tinyProperty.valueComparisonStrategy=n.valueComparisonStrategy,this.notifying=!1,this.reentrant=n.reentrant,this.isDeferred=!1,this.deferredValue=null,this.hasDeferredValue=!1,this.phetioValueType=n.phetioValueType,this.valueValidator=ie.pick(n,qn.VALIDATOR_KEYS),this.valueValidator.validationMessage=this.valueValidator.validationMessage||"Property value not valid",this.valueValidator.phetioType&&(this.valueValidator.phetioType=this.valueValidator.phetioType.parameterTypes[0])}isSettable(){return!1}get(){return this.tinyProperty.get()}set(e){gz.value&&!mz.value&&this.isPhetioInstrumented()&&this.phetioState&&this.isSettable()||this.unguardedSet(e)}unguardedSet(e){if(!this.isDisposed){if(this.isDeferred)this.deferredValue=e,this.hasDeferredValue=!0;else if(!this.equalsValue(e)){const t=this.get();this.setPropertyValue(e),this._notifyListeners(t)}}}setPropertyValue(e){this.tinyProperty.setPropertyValue(e)}equalsValue(e){return this.areValuesEqual(e,this.get())}areValuesEqual(e,t){return this.tinyProperty.areValuesEqual(e,t)}_notifyListeners(e){const t=this.get();R.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent(ks.CHANGED_EVENT_NAME,{getData:()=>{const n=this.phetioType.parameterTypes[0];return{oldValue:fi(n).toStateObject(e),newValue:n.toStateObject(t)}}}),this.notifying=!0,this.tinyProperty.emit(t,e,this),this.notifying=!1,R.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}notifyListenersStatic(){this._notifyListeners(null)}setDeferred(e){if(e)this.isDeferred=!0;else{this.isDeferred=!1;const t=this.get();if(this.hasDeferredValue&&(this.setPropertyValue(this.deferredValue),this.hasDeferredValue=!1,this.deferredValue=null),!this.equalsValue(t))return()=>!this.isDisposed&&this._notifyListeners(t)}return null}get value(){return this.get()}set value(e){this.set(e)}addPhetioStateDependencies(e){for(let t=0;t<e.length;t++){const n=e[t];n instanceof ks&&n.isPhetioInstrumented()&&this.isPhetioInstrumented()&&c2.registerPhetioOrderDependency(n,Ts.UNDEFER,this,Ts.NOTIFY)}}link(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.addListener(e),this.addPropertyDisposerAction(e,t),e(this.get(),null,this)}lazyLink(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.lazyLink(e),this.addPropertyDisposerAction(e,t)}unlink(e){this.tinyProperty.unlink(e),this.removeDisposerAction("link",e)}unlinkAll(){this.tinyProperty.unlinkAll(),this.removeAllDisposerActions("link")}linkAttribute(e,t){const n=s=>{e[t]=s};return this.link(n),n}toString(){return`Property#${this.id}{${this.get()}}`}debug(e){const t=n=>console.log(e,n);return this.link(t),t}isValueValid(e){return this.getValidationError(e)===null}getValidationError(e){return qn.getValidationError(e,this.valueValidator,Nz)}addPropertyDisposerAction(e,t){t?.disposer&&this.addDisposerAction("link",e,t.disposer,()=>this.unlink(e))}dispose(){this.isPhetioInstrumented()&&c2.unregisterOrderDependenciesForProperty(this),super.dispose(),this.tinyProperty.dispose()}hasListener(e){return this.tinyProperty.hasListener(e)}getListenerCount(){return this.tinyProperty.getListenerCount()}forEachListener(e){this.tinyProperty.forEachListener(e)}hasListeners(){return this.tinyProperty.hasListeners()}get valueComparisonStrategy(){return this.tinyProperty.valueComparisonStrategy}set valueComparisonStrategy(e){this.tinyProperty.valueComparisonStrategy=e}toStateObject(){return{value:this.phetioValueType.toStateObject(this.value),validValues:fi(Kl(this.phetioValueType)).toStateObject(this.validValues===void 0?null:this.validValues),units:fi(xi).toStateObject(this.units)}}applyState(e){fi(xi).fromStateObject(e.units),this.unguardedSet(this.phetioValueType.fromStateObject(e.value))}static PropertyIO(e){return M1.has(e)||M1.set(e,new ui(`PropertyIO<${e.typeName}>`,{valueType:ks,documentation:"Observable values that send out notifications when the value changes. This differs from the traditional listener pattern in that added listeners also receive a callback with the current value when the listeners are registered. This is a widely-used pattern in PhET-iO simulations.",methodOrder:["link","lazyLink"],events:[ks.CHANGED_EVENT_NAME],parameterTypes:[e],toStateObject:t=>t.toStateObject(),applyState:(t,n)=>{t.applyState(n)},stateSchema:{value:e,validValues:fi(Kl(e)),units:fi(xi)},apiStateKeys:["validValues","units"],methods:{getValue:{returnType:e,parameterTypes:[],implementation:ks.prototype.get,documentation:"Gets the current value."},getValidationError:{returnType:fi(xi),parameterTypes:[e],implementation:function(t){return this.getValidationError(t)},documentation:"Checks to see if a proposed value is valid. Returns the first validation error, or null if the value is valid."},setValue:{returnType:rr,parameterTypes:[e],implementation:function(t){this.set(t)},documentation:"Sets the value of the Property. If the value differs from the previous value, listeners are notified with the new value.",invocableForReadOnlyElements:!1},link:{returnType:rr,parameterTypes:[pp(rr,[e,fi(e)])],implementation:ks.prototype.link,documentation:"Adds a listener which will be called when the value changes. On registration, the listener is also called with the current value. The listener takes two arguments, the new value and the previous value."},lazyLink:{returnType:rr,parameterTypes:[pp(rr,[e,fi(e)])],implementation:ks.prototype.lazyLink,documentation:'Adds a listener which will be called when the value changes. This method is like "link", but without the current-value callback on registration. The listener takes two arguments, the new value and the previous value.'},unlink:{returnType:rr,parameterTypes:[pp(rr,[e])],implementation:ks.prototype.unlink,documentation:"Removes a listener."}},fuzzElement:(t,n)=>{if(t.phetioType.parameterTypes?.length===1&&t.phetioType.parameterTypes[0]===Fs&&t.isSettable()){const s=t.value,r=!s;n&&console.log(`${t.phetioID}:`,s,"->",r),t.value=r}}})),M1.get(e)}getPhetioMouseHitTarget(e=!1){return phet.tandem.phetioElementSelectionProperty.value==="string"?this.getPhetioMouseHitTargetSelf():super.getPhetioMouseHitTarget(e)}}ks.CHANGED_EVENT_NAME="changed";class Mt extends ks{constructor(e,t){super(e,t),this._initialValue=e}getInitialValue(){return this._initialValue}get initialValue(){return this.getInitialValue()}setInitialValue(e){this._initialValue=e}get value(){return super.value}set value(e){super.set(e)}reset(){this.set(this._initialValue)}set(e){super.set(e)}isSettable(){return!0}}const sy="‪",ry="‫",zd="‬",Gn={format:function(i){const e=arguments;return i.replace(/{(\d)}/g,(t,n)=>e[+n+1])},fillIn:function(i,e){i=i&&i.get?i.get():i;let t=i;const n=i.match(/\{\{[^{}]+\}\}/g)||[];for(let s=0;s<n.length;s++){const r=n[s],a=r.replace("{{","").replace("}}","");if(e[a]!==void 0){const o=e[a]&&e[a].get?e[a].get():e[a];t=t.replace(r,o)}}return t},isEmbeddingMark:function(i){return i===sy||i===ry||i===zd},embeddedSlice:function(i,e,t){const n=[];let s;for(t===void 0&&(t=i.length),t<0&&(t+=i.length);e<i.length&&Gn.isEmbeddingMark(i.charAt(e));)e++;for(;t>=1&&Gn.isEmbeddingMark(i.charAt(t-1));)t--;if(e>=t||e>=i.length)return"";for(let g=0;g<e;g++)s=i.charAt(g),s===sy||s===ry?n.push(s):s===zd&&n.pop();let r=n.length,a=n.slice();const o=i.slice(e,t);for(let g=0;g<o.length;g++)s=o.charAt(g),s===sy||s===ry?n.push(s):s===zd&&(n.pop(),r=Math.min(n.length,r));let l=n;const h=Math.max(0,r-1);a=a.slice(h),l=l.slice(h);const c=a.join(""),f=l.join("").replace(/./g,zd);return c+o+f},embeddedSplit:function(i,e,t){if(e===void 0)return[i];let n=[],s,r=i;function a(){let l,h;if(e instanceof self.RegExp){const c=r.match(e);c?(l=c.index,h=c[0].length):l=-1}else l=r.indexOf(e),h=e.length;return{index:l,length:h}}let o=0;for(;(s=a()).index>=0;){n.push(Gn.embeddedSlice(i,o,o+s.index));const l=s.index+s.length;r=r.slice(l),o+=l}return n.push(Gn.embeddedSlice(i,o)),t!==void 0&&(n=ie.first(n,t)),n},embeddedDebugString:function(i){return i.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")},wrapLTR:function(i){return sy+i+zd},wrapRTL:function(i){return ry+i+zd},wrapDirection:function(i,e){return e==="ltr"?Gn.wrapLTR(i):Gn.wrapRTL(i)},localeToLocalizedName:function(i){return Gn.wrapDirection(phet.chipper.localeData[i].localizedName,phet.chipper.localeData[i].direction)},capitalize(i){const e=i.search(/[A-Za-z0-9]/);if(e===-1)return i.slice(0);const t=e>0?i.slice(0,e):"",n=i.charAt(e).toUpperCase(),s=e+1<i.length?i.slice(e+1):"";return t+n+s}},Bz={validateValidator:!1},qz=[];["name","phetioType","phetioDocumentation","phetioPrivate"].concat(qn.VALIDATOR_KEYS);const wx=i=>i.phetioType,zz=i=>i.name;class Lb extends rn{constructor(e){const t=Ne()({parameters:qz,hasListenerOrderDependencies:!1,phetioPlayback:rn.DEFAULT_OPTIONS.phetioPlayback,phetioEventMetadata:rn.DEFAULT_OPTIONS.phetioEventMetadata,phetioDocumentation:""},e),n=t.parameters.filter(wx);t.phetioType=t.phetioOuterType(n.map(wx)),t.phetioPlayback&&(t.phetioEventMetadata=t.phetioEventMetadata||{},t.phetioEventMetadata.dataKeys=t.parameters.map(zz)),t.phetioDocumentation=Lb.getPhetioDocumentation(t.phetioDocumentation,n),super(t),this.parameters=t.parameters}static validateParameters(e,t){let n=!1;for(let s=0;s<e.length;s++){const r=e[s];n=n||r.phetioPrivate,qn.validateValidator(r)}}validateArguments(...e){for(let t=0;t<this.parameters.length;t++){const n=this.parameters[t];n.phetioType&&n.valueType}}getValidationErrors(...e){return this.parameters.map((t,n)=>qn.getValidationError(e[n],t,Bz))}getPhetioData(...e){let t=null;if(this.parameters.length>0){t={};for(let n=0;n<this.parameters.length;n++){const s=this.parameters[n];s.phetioPrivate||(t[s.name]=s.phetioType.toStateObject(e[n]))}}return t}static getPhetioDocumentation(e,t){const n=s=>{const r=s.phetioDocumentation?` - ${s.phetioDocumentation}`:"";return`<li>${s.name}: ${ie.escape(s.phetioType.typeName)}${r}</li>`};return e+(t.length===0?"<br>No parameters.":`<br>The parameters are:<br/><ol>${t.map(n).join("<br/>")}</ol>`)}}const ED=!1;class kn extends Lb{constructor(e){const t=Ne()({reentrantNotificationStrategy:"stack",phetioOuterType:kn.EmitterIO,phetioState:ED},e);super(t),this.tinyEmitter=new un(null,t.hasListenerOrderDependencies,t.reentrantNotificationStrategy)}emit(...e){R.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("emitted",{data:this.getPhetioData(...e)}),this.tinyEmitter.emit(...e),R.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}dispose(){this.tinyEmitter.dispose(),super.dispose()}addListener(e,t){this.tinyEmitter.addListener(e),t?.disposer&&this.addDisposerAction("listener",e,t.disposer,()=>this.removeListener(e))}removeListener(e){this.tinyEmitter.removeListener(e),this.removeDisposerAction("listener",e)}removeAllListeners(){this.tinyEmitter.removeAllListeners(),this.removeAllDisposerActions("listener")}hasListener(e){return this.tinyEmitter.hasListener(e)}hasListeners(){return this.tinyEmitter.hasListeners()}getListenerCount(){return this.tinyEmitter.getListenerCount()}debug(e){const t=(...n)=>console.log(e,...n);return this.addListener(t),t}}kn.EmitterIO=i=>{const e=i.map(Sx).join(",");return O1.has(e)||O1.set(e,new ui(`EmitterIO<${i.map(Sx).join(", ")}>`,{valueType:kn,documentation:"Emits when an event occurs and calls added listeners.",parameterTypes:i,events:["emitted"],metadataDefaults:{phetioState:ED},methods:{addListener:{returnType:rr,parameterTypes:[pp(rr,i)],implementation:kn.prototype.addListener,documentation:"Adds a listener which will be called when the emitter emits."},removeListener:{returnType:rr,parameterTypes:[pp(rr,i)],implementation:kn.prototype.removeListener,documentation:"Remove a listener."},emit:{returnType:rr,parameterTypes:i,implementation:function(...t){this.emit(...t)},documentation:"Emits a single event to all listeners.",invocableForReadOnlyElements:!1},getValidationErrors:{returnType:Kl(fi(xi)),parameterTypes:i,implementation:function(...t){return this.getValidationErrors(...t)},documentation:"Checks to see if the proposed values are valid. Returns an array of length N where each element is an error (string) or null if the value is valid."}}})),O1.get(e)};const Sx=i=>i.typeName,O1=new ea;class VD extends un{setTimeout(e,t){let n=0;const s=r=>{n+=r,n*1e3>=t&&this.hasListener(s)&&(e(),this.removeListener(s))};return this.addListener(s),s}clearTimeout(e){this.hasListener(e)&&this.removeListener(e)}setInterval(e,t){let n=0;const s=r=>{for(n+=r;n*1e3>=t&&this.hasListener(s);)e(),n=n-t/1e3};return this.addListener(s),s}clearInterval(e){this.hasListener(e)&&this.removeListener(e)}runOnNextTick(e){this.setTimeout(e,0)}}const zn=new VD,Yn=navigator.userAgent;function N1(i){return kD()===i}function Px(){return!!(self.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters["phet-app"]||(Yn.match(/(iPod|iPhone|iPad)/)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>=2)&&Yn.match(/AppleWebKit/))}function kD(){let i=-1,e=null;return navigator.appName==="Microsoft Internet Explorer"?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),e.exec(Yn)!==null&&(i=parseFloat(RegExp.$1))):navigator.appName==="Netscape"&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),e.exec(Yn)!==null&&(i=parseFloat(RegExp.$1))),i}const Zn={firefox:Yn.toLowerCase().includes("firefox"),mobileSafari:Px(),safari5:!!(Yn.match(/Version\/5\./)&&Yn.match(/Safari\//)&&Yn.match(/AppleWebKit/)),safari6:!!(Yn.match(/Version\/6\./)&&Yn.match(/Safari\//)&&Yn.match(/AppleWebKit/)),safari7:!!(Yn.match(/Version\/7\./)&&Yn.match(/Safari\//)&&Yn.match(/AppleWebKit/)),safari10:!!(Yn.match(/Version\/10\./)&&Yn.match(/Safari\//)&&Yn.match(/AppleWebKit/)),safari11:!!(Yn.match(/Version\/11\./)&&Yn.match(/Safari\//)&&Yn.match(/AppleWebKit/)),safari9:!!(Yn.match(/Version\/9\./)&&Yn.match(/Safari\//)&&Yn.match(/AppleWebKit/)),safari:Px()||!!(Yn.match(/Version\//)&&Yn.match(/Safari\//)&&Yn.match(/AppleWebKit/)),ie:kD()!==-1,ie9:N1(9),ie10:N1(10),ie11:N1(11),android:Yn.indexOf("Android")>0,edge:!!Yn.match(/Edge\//),chromium:/chrom(e|ium)/.test(Yn.toLowerCase())&&!Yn.match(/Edge\//),chromeOS:Yn.indexOf("CrOS")>0,mac:navigator.platform.includes("Mac")},Fz=[],CD=!1;class Zi extends Lb{constructor(e,t){const n=Ne()({parameters:Fz,phetioOuterType:Zi.PhetioActionIO,phetioState:CD,phetioReadOnly:rn.DEFAULT_OPTIONS.phetioReadOnly,phetioHighFrequency:rn.DEFAULT_OPTIONS.phetioHighFrequency,phetioEventType:rn.DEFAULT_OPTIONS.phetioEventType,phetioDocumentation:"A class that wraps a function, adding API to execute that function and data stream capture."},t);super(n),this.action=e,this.isExecutingCount=0,this.disposeOnExecuteCompletion=!1,this.executedEmitter=new kn({parameters:n.parameters,tandem:n.tandem?.createTandem("executedEmitter"),hasListenerOrderDependencies:n.hasListenerOrderDependencies,phetioState:n.phetioState,phetioReadOnly:n.phetioReadOnly,phetioHighFrequency:n.phetioHighFrequency,phetioEventType:n.phetioEventType,phetioDocumentation:"Emitter that emits when this actions work is complete"}),this.disposePhetioAction=()=>{this.executedEmitter.dispose()}}execute(...e){this.isExecutingCount++,R.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("executed",{data:this.getPhetioData(...e)}),this.action.apply(null,e),this.executedEmitter.emit(...e),R.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent(),this.isExecutingCount--,this.disposeOnExecuteCompletion&&this.isExecutingCount===0&&(this.disposePhetioAction(),this.disposeOnExecuteCompletion=!1)}dispose(){this.isExecutingCount>0?this.disposeOnExecuteCompletion=!0:this.disposePhetioAction(),super.dispose()}}Zi.PhetioActionIO=i=>{const e=i.map(Tx).join(",");return R1.has(e)||R1.set(e,new ui(`PhetioActionIO<${i.map(Tx).join(", ")}>`,{valueType:Zi,documentation:"Executes when an event occurs",events:["executed"],parameterTypes:i,metadataDefaults:{phetioState:CD},methods:{execute:{returnType:rr,parameterTypes:i,implementation:function(...t){this.execute(...t)},documentation:"Executes the function the PhetioAction is wrapping.",invocableForReadOnlyElements:!1},getValidationErrors:{returnType:Kl(fi(xi)),parameterTypes:i,implementation:function(...t){return this.getValidationErrors(...t)},documentation:"Checks to see if the proposed values are valid. Returns an array of length N where each element is an error (string) or null if the value is valid."}}})),R1.get(e)};const Tx=i=>i.typeName,R1=new ea,DD="ArrowRight",ID="ArrowLeft",LD="ArrowUp",MD="ArrowDown",rS="ShiftRight",aS="ShiftLeft",oS="ControlLeft",lS="ControlRight",hS="AltLeft",uS="AltRight",cS="MetaLeft",dS="MetaRight",pS="OSLeft",fS="OSRight",Hz="KeyW",Uz="KeyA",Gz="KeyS",Wz="KeyD",OD="Digit0",ND="Digit1",RD="Digit2",BD="Digit3",qD="Digit4",zD="Digit5",FD="Digit6",HD="Digit7",UD="Digit8",GD="Digit9",d2="Alt",p2="Shift",f2="Control",B1=[DD,ID,LD,MD],q1=[Hz,Gz,Uz,Wz],Kz=[OD,ND,RD,BD,qD,zD,FD,HD,UD,GD],z1=[aS,rS],F1=[oS,lS],H1=[hS,uS],xx=[cS,dS,pS,fS],Yz=[d2,f2,p2],jz=[hS,uS,oS,lS,aS,rS,cS,dS,pS,fS],m2=[],Qe={KEY_SPACE:"Space",KEY_ENTER:"Enter",KEY_TAB:"Tab",KEY_RIGHT_ARROW:DD,KEY_LEFT_ARROW:ID,KEY_UP_ARROW:LD,KEY_DOWN_ARROW:MD,KEY_SHIFT_LEFT:aS,KEY_SHIFT_RIGHT:rS,KEY_ALT_LEFT:hS,KEY_ALT_RIGHT:uS,KEY_CONTROL_LEFT:oS,KEY_CONTROL_RIGHT:lS,KEY_META_LEFT:cS,KEY_META_RIGHT:dS,KEY_META_LEFT_FIREFOX:pS,KEY_META_RIGHT_FIREFOX:fS,KEY_SHIFT:p2,KEY_ALT:d2,KEY_CONTROL:f2,KEY_ESCAPE:"Escape",KEY_DELETE:"Delete",KEY_BACKSPACE:"Backspace",KEY_PAGE_UP:"PageUp",KEY_PAGE_DOWN:"PageDown",KEY_END:"End",KEY_HOME:"Home",KEY_0:OD,KEY_1:ND,KEY_2:RD,KEY_3:BD,KEY_4:qD,KEY_5:zD,KEY_6:FD,KEY_7:HD,KEY_8:UD,KEY_9:GD,KEY_NUMPAD_0:"Numpad0",KEY_NUMPAD_1:"Numpad1",KEY_NUMPAD_2:"Numpad2",KEY_NUMPAD_3:"Numpad3",KEY_NUMPAD_4:"Numpad4",KEY_NUMPAD_5:"Numpad5",KEY_NUMPAD_6:"Numpad6",KEY_NUMPAD_7:"Numpad7",KEY_NUMPAD_8:"Numpad8",KEY_NUMPAD_9:"Numpad9",KEY_NUMPAD_DECIMAL:"NumpadDecimal",KEY_NUMPAD_PLUS:"NumpadAdd",KEY_NUMPAD_MINUS:"NumpadSubtract",KEY_A:"KeyA",KEY_B:"KeyB",KEY_C:"KeyC",KEY_D:"KeyD",KEY_E:"KeyE",KEY_F:"KeyF",KEY_G:"KeyG",KEY_H:"KeyH",KEY_I:"KeyI",KEY_J:"KeyJ",KEY_K:"KeyK",KEY_L:"KeyL",KEY_M:"KeyM",KEY_N:"KeyN",KEY_O:"KeyO",KEY_P:"KeyP",KEY_Q:"KeyQ",KEY_R:"KeyR",KEY_S:"KeyS",KEY_T:"KeyT",KEY_U:"KeyU",KEY_V:"KeyV",KEY_W:"KeyW",KEY_X:"KeyX",KEY_Y:"KeyY",KEY_Z:"KeyZ",KEY_EQUALS:"Equal",KEY_PLUS:"Equal",KEY_MINUS:"Minus",KEY_PERIOD:"Period",ARROW_KEYS:B1,WASD_KEYS:q1,MOVEMENT_KEYS:B1.concat(q1),SHIFT_KEYS:z1,CONTROL_KEYS:F1,ALT_KEYS:H1,META_KEYS:xx,MODIFIER_KEY_CODES:jz,MODIFIER_KEY_TO_CODE_MAP:new Map([[d2,H1],[p2,z1],[f2,F1]]),isArrowKey(i){return Qe.isAnyKeyEvent(i,B1)},isRangeKey(i){return Qe.isArrowKey(i)||Qe.isAnyKeyEvent(i,[Qe.KEY_PAGE_UP,Qe.KEY_PAGE_DOWN,Qe.KEY_HOME,Qe.KEY_END])},isNumberKey(i){return Qe.isAnyKeyEvent(i,Kz)},getNumberFromCode(i){return Qe.isNumberKey(i)&&i instanceof KeyboardEvent?Number(i.code.replace("Digit","")):null},isShiftKey(i){return Qe.isAnyKeyEvent(i,z1)},isAltKey(i){return Qe.isAnyKeyEvent(i,H1)},isControlKey(i){return Qe.isAnyKeyEvent(i,F1)},isMetaKey(i){return Qe.isAnyKeyEvent(i,xx)},isWASDKey(i){return Qe.isAnyKeyEvent(i,q1)},isMovementKey(i){return Qe.isAnyKeyEvent(i,Qe.MOVEMENT_KEYS)},isAnyKeyEvent(i,e){const t=Qe.getEventCode(i);return t?e.includes(t):!1},isKeyEvent(i,e){return Qe.getEventCode(i)===e},getEventCode(i){let e=null;return i instanceof KeyboardEvent&&i.code&&(e=i.code,e.startsWith("Numpad")&&m2.includes(i.key)&&(e=i.key)),e},isModifierKey(i){return Yz.includes(i)},ALL_KEYS:m2};for(const i in Qe)Qe.hasOwnProperty(i)&&typeof Qe[i]=="string"&&m2.push(Qe[i]);const qy={q:[Qe.KEY_Q],w:[Qe.KEY_W],e:[Qe.KEY_E],r:[Qe.KEY_R],t:[Qe.KEY_T],y:[Qe.KEY_Y],u:[Qe.KEY_U],i:[Qe.KEY_I],o:[Qe.KEY_O],p:[Qe.KEY_P],a:[Qe.KEY_A],s:[Qe.KEY_S],d:[Qe.KEY_D],f:[Qe.KEY_F],g:[Qe.KEY_G],h:[Qe.KEY_H],j:[Qe.KEY_J],k:[Qe.KEY_K],l:[Qe.KEY_L],z:[Qe.KEY_Z],x:[Qe.KEY_X],c:[Qe.KEY_C],v:[Qe.KEY_V],b:[Qe.KEY_B],n:[Qe.KEY_N],m:[Qe.KEY_M],0:[Qe.KEY_0,Qe.KEY_NUMPAD_0],1:[Qe.KEY_1,Qe.KEY_NUMPAD_1],2:[Qe.KEY_2,Qe.KEY_NUMPAD_2],3:[Qe.KEY_3,Qe.KEY_NUMPAD_3],4:[Qe.KEY_4,Qe.KEY_NUMPAD_4],5:[Qe.KEY_5,Qe.KEY_NUMPAD_5],6:[Qe.KEY_6,Qe.KEY_NUMPAD_6],7:[Qe.KEY_7,Qe.KEY_NUMPAD_7],8:[Qe.KEY_8,Qe.KEY_NUMPAD_8],9:[Qe.KEY_9,Qe.KEY_NUMPAD_9],enter:[Qe.KEY_ENTER],tab:[Qe.KEY_TAB],equals:[Qe.KEY_EQUALS],plus:[Qe.KEY_PLUS,Qe.KEY_NUMPAD_PLUS],minus:[Qe.KEY_MINUS,Qe.KEY_NUMPAD_MINUS],period:[Qe.KEY_PERIOD,Qe.KEY_NUMPAD_DECIMAL],escape:[Qe.KEY_ESCAPE],delete:[Qe.KEY_DELETE],backspace:[Qe.KEY_BACKSPACE],pageUp:[Qe.KEY_PAGE_UP],pageDown:[Qe.KEY_PAGE_DOWN],end:[Qe.KEY_END],home:[Qe.KEY_HOME],space:[Qe.KEY_SPACE],arrowLeft:[Qe.KEY_LEFT_ARROW],arrowRight:[Qe.KEY_RIGHT_ARROW],arrowUp:[Qe.KEY_UP_ARROW],arrowDown:[Qe.KEY_DOWN_ARROW],ctrl:Qe.CONTROL_KEYS,alt:Qe.ALT_KEYS,shift:Qe.SHIFT_KEYS,meta:Qe.META_KEYS},WD=["ctrl","alt","shift","meta"],Zy=i=>{for(const e in qy)if(qy.hasOwnProperty(e)&&qy[e].includes(i))return e;return null},Ex=i=>Object.getPrototypeOf(i)===Object.prototype,$y=new ui("ObjectLiteralIO",{documentation:"PhET-iO Type for object literals",isValidValue:Ex,supertype:iS,stateSchema:za.asValue("object",{valueType:Object,isValidValue:Ex}),toStateObject:ie.identity});function ai(i){return i instanceof ks||i instanceof oi}function Mb(i){return i.replace(/\u202a|\u202b|\u202c/g,"")}function g2(i,...e){return ie.each(e,t=>{if(t)for(const n in t)Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))}),i}let bo=null,mm="";const fu=new ld("scenery");function Xz(i){fu.logString+=`${i.replace(/%c/g,"")}
`}function Qz(...i){self.console&&self.console.log&&self.console.log(...Array.prototype.slice.call(i,0))}const Jz={dirty:{name:"dirty",style:"color: #888;"},bounds:{name:"bounds",style:"color: #888;"},hitTest:{name:"hitTest",style:"color: #888;"},hitTestInternal:{name:"hitTestInternal",style:"color: #888;"},PerfCritical:{name:"Perf",style:"color: #f00;"},PerfMajor:{name:"Perf",style:"color: #aa0;"},PerfMinor:{name:"Perf",style:"color: #088;"},PerfVerbose:{name:"Perf",style:"color: #888;"},Cursor:{name:"Cursor",style:""},Stitch:{name:"Stitch",style:""},StitchDrawables:{name:"Stitch",style:""},GreedyStitcher:{name:"Greedy",style:"color: #088;"},GreedyVerbose:{name:"Greedy",style:"color: #888;"},RelativeTransform:{name:"RelativeTransform",style:"color: #606;"},BackboneDrawable:{name:"Backbone",style:"color: #a00;"},CanvasBlock:{name:"Canvas",style:""},WebGLBlock:{name:"WebGL",style:""},Display:{name:"Display",style:""},DOMBlock:{name:"DOM",style:""},Drawable:{name:"",style:""},FittedBlock:{name:"FittedBlock",style:""},Instance:{name:"Instance",style:""},InstanceTree:{name:"InstanceTree",style:""},ChangeInterval:{name:"ChangeInterval",style:"color: #0a0;"},SVGBlock:{name:"SVG",style:""},SVGGroup:{name:"SVGGroup",style:""},ImageSVGDrawable:{name:"ImageSVGDrawable",style:""},Paints:{name:"Paints",style:""},Filters:{name:"Filters",style:""},AlignBox:{name:"AlignBox",style:""},AlignGroup:{name:"AlignGroup",style:""},RichText:{name:"RichText",style:""},Sim:{name:"Sim",style:""},ParallelDOM:{name:"ParallelDOM",style:""},PDOMInstance:{name:"PDOMInstance",style:""},PDOMTree:{name:"PDOMTree",style:""},PDOMDisplaysInfo:{name:"PDOMDisplaysInfo",style:""},KeyboardFuzzer:{name:"KeyboardFuzzer",style:""},InputListener:{name:"InputListener",style:""},InputEvent:{name:"InputEvent",style:""},OnInput:{name:"OnInput",style:""},Pointer:{name:"Pointer",style:""},Input:{name:"Input",style:""},EventDispatch:{name:"EventDispatch",style:""},EventPath:{name:"EventPath",style:""}};g2(fu,{logString:"",logFunction:function(...i){self.console&&self.console.log&&self.console.log(...Array.prototype.slice.call(i,0))},switchLogToConsole:function(){fu.logFunction=Qz},switchLogToString:function(){self.console&&self.console.log("switching to string log"),fu.logFunction=Xz},enableIndividualLog:function(i){if(i==="stitch"){this.enableIndividualLog("Stitch"),this.enableIndividualLog("StitchDrawables"),this.enableIndividualLog("GreedyStitcher"),this.enableIndividualLog("GreedyVerbose");return}if(i==="perf"){this.enableIndividualLog("PerfCritical"),this.enableIndividualLog("PerfMajor"),this.enableIndividualLog("PerfMinor"),this.enableIndividualLog("PerfVerbose");return}if(i==="input"){this.enableIndividualLog("InputListener"),this.enableIndividualLog("InputEvent"),this.enableIndividualLog("OnInput"),this.enableIndividualLog("Pointer"),this.enableIndividualLog("Input"),this.enableIndividualLog("EventDispatch"),this.enableIndividualLog("EventPath");return}if(i==="a11y"||i==="pdom"){this.enableIndividualLog("ParallelDOM"),this.enableIndividualLog("PDOMInstance"),this.enableIndividualLog("PDOMTree"),this.enableIndividualLog("PDOMDisplaysInfo");return}i&&(bo[i]=bo[i]||function(e,t){const n=Jz[i],s=n.name?`[${n.name}] `:"";fu.logFunction(`%c${mm}%c${s}${e}`,"color: #ddd;",t||n.style)})},disableIndividualLog:function(i){i&&delete bo[i]},enableLogging:function(i){bo=function(e){fu.logFunction(e)},bo.push=function(){mm+="| "},bo.pop=function(){mm=mm.slice(0,-2)},bo.getDepth=function(){return mm.length/2};for(let e=0;e<i.length;e++)this.enableIndividualLog(i[e])},disableLogging:function(){bo=null},isLoggingPerformance:function(){return bo.PerfCritical||bo.PerfMajor||bo.PerfMinor||bo.PerfVerbose}});let U1,zy;const Zz=()=>{U1=document.createElement("style"),document.head.appendChild(U1),zy=U1.sheet};Zz();const $z=i=>{try{zy.insertRule(i,0)}catch{try{zy.insertRule(i,zy.cssRules.length)}catch{console.log("Error adding CSS rule: "+i)}}},mS=i=>{$z(i)},KD="a11y-pdom-element",YD="a11y-pdom-root",eF="a11y-pdom-list-item",jD="position: fixed;top: 0px;left: 0px;transform-origin: left top 0px;border-width: 0px;border: 0px;padding: 1px 1px;margin: 0px;white-space: nowrap;outline: none;box-shadow:none;border-color:transparent;font-size: 1px;clip: rect(1px, 1px, 1px, 1px);";mS(`.${KD}{${jD}}`);mS(`.${YD}{position: absolute;pointer-events: none;z-index: 1;opacity: 0.0001;}`);mS(`.${eF}{list-style: none;`);const gS={SIBLING_CLASS_NAME:KD,ROOT_CLASS_NAME:YD},XD="NEXT",tF="PREVIOUS",ev="INPUT",iF="LABEL",y2="BUTTON",v2="TEXTAREA",b2="SELECT",Vx="OPTGROUP",kx="DATALIST",Cx="OUTPUT",Dx="DIV",_2="A",nF="AREA",G1="P",sF="IFRAME",QD="B",JD="STRONG",ZD="I",$D="EM",eI="MARK",tI="SMALL",iI="DEL",nI="INS",sI="SUB",rI="SUP",rF="BR",aF=[_2,nF,ev,b2,v2,y2,sF],Ix=[QD,JD,ZD,$D,eI,tI,iI,nI,sI,rI,rF],oF=[ev],lF=["focusin","focusout","input","change","click","keydown","keyup"],hF=["input","change","click","keydown","keyup"],uF=["touchstart","touchend","touchmove","touchcancel","mousedown","mouseup","mousemove","mouseover","mouseout","pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"],cF="aria-labelledby",dF="aria-describedby",pF="aria-activedescendant",Lx="data-focusable",fF="data-unique-id",mF=[cF,dF,pF];function A2(i){const e=i.getElementsByTagName("*"),t=[];for(let n=0;n<e.length;n++)e[n].nodeType===Node.ELEMENT_NODE&&(t[n]=e[n]);return t}function aI(i){return i.hidden?!0:i===document.body?!1:aI(i.parentElement)}function Mx(i,e){const t=e||document.body,n=A2(t),s=document.activeElement,r=n.indexOf(s),a=i===XD?1:-1;let o=r+a;for(;o<n.length&&o>=0;){const l=n[o];if(o+=a,Ti.isElementFocusable(l))return l}return s}function gF(i){return i.replace(/^\s+/,"")}function Ox(i){return!ie.includes(oF,i.toUpperCase())}const Ti={unwrapStringProperty(i){return i===null?null:typeof i=="string"?i:i.value},getNextFocusable(i){return Mx(XD,i)},getPreviousFocusable(i){return Mx(tF,i)},getFirstFocusable(i){const e=i||document.body,t=A2(e);let n=document.body,s=0;for(;s<t.length;){const r=t[s];if(s++,Ti.isElementFocusable(r)){n=r;break}}return n},getRandomFocusable(i){const e=A2(document.body),t=[];for(let n=0;n<e.length;n++)Ti.isElementFocusable(e[n])&&t.push(e[n]);return t[i.nextInt(t.length)]},unwrapProperty(i){return ai(i)?i.value:i},containsFormattingTags(i){if(i===null)return!1;let e=0;const t=[],n=[];for(;e<i.length;){const a=i.indexOf("<",e),o=i.indexOf(">",e);a>-1&&(t.push(a),e=a+1),o>-1?(n.push(o),e=o+1):e++}if(t.length!==n.length||t.length===0)return!1;let s=!0;const r=i.toUpperCase();for(let a=0;a<t.length;a++){let o=r.substring(t[a]+1,n[a]);o=o.replace("/","");const l=gF(o);o.length-l.length>0||ie.includes(Ix,o)||(s=!1)}return s},setTextContent(i,e){if(e===null)i.innerHTML="";else{const t=e.replaceAll("<br>","<br/>"),n=Mb(t);i0(n,qn.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR),Ox(i.tagName)&&(Ti.containsFormattingTags(n)?i.innerHTML=n:i.textContent=n)}},tagIsDefaultFocusable(i){return ie.includes(aF,i.toUpperCase())},isElementFocusable(i){return!document.body.contains(i)||aI(i)||ie.includes(Ix,i.tagName)?!1:i.getAttribute(Lx)==="true"},tagNameSupportsContent(i){return Ox(i)},removeElements(i,e){for(let t=0;t<e.length;t++){const n=e[t];i.removeChild(n)}},insertElements(i,e,t){for(let n=0;n<e.length;n++){const s=e[n];i.insertBefore(s,t||null)}},createElement(i,e,t){t=an({namespace:null,id:null},t);const n=t.namespace?document.createElementNS(t.namespace,i):document.createElement(i);return t.id&&(n.id=t.id),Ti.overrideFocusWithTabIndex(n,e),n.classList.add(gS.SIBLING_CLASS_NAME),n},overrideFocusWithTabIndex(i,e){Ti.tagIsDefaultFocusable(i.tagName)!==e?i.tabIndex=e?0:-1:i.removeAttribute("tabindex"),i.setAttribute(Lx,e)},TAGS:{INPUT:ev,LABEL:iF,BUTTON:y2,TEXTAREA:v2,SELECT:b2,OPTGROUP:Vx,DATALIST:kx,OUTPUT:Cx,DIV:Dx,A:_2,P:G1,B:QD,STRONG:JD,I:ZD,EM:$D,MARK:eI,SMALL:tI,DEL:iI,INS:nI,SUB:sI,SUP:rI},FORM_ELEMENTS:[ev,y2,v2,b2,Vx,kx,Cx,_2],DEFAULT_CONTAINER_TAG_NAME:Dx,DEFAULT_DESCRIPTION_TAG_NAME:G1,DEFAULT_LABEL_TAG_NAME:G1,ASSOCIATION_ATTRIBUTES:mF,INPUT_TYPES_THAT_SUPPORT_CHECKED:["RADIO","CHECKBOX"],DOM_EVENTS:lF,USER_GESTURE_EVENTS:hF,BLOCKED_DOM_EVENTS:uF,DATA_PDOM_UNIQUE_ID:fF,PDOM_UNIQUE_ID_SEPARATOR:"-",DATA_EXCLUDE_FROM_INPUT:"data-exclude-from-input"},tv="targetSubstitute",yF=["altKey","button","charCode","clientX","clientY","code","ctrlKey","deltaMode","deltaX","deltaY","deltaZ","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","scale","shiftKey","target","type","relatedTarget","which"],Nx=["deltaMode","deltaX","deltaY","deltaZ","altKey","button","charCode","clientX","clientY","code","ctrlKey","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","shiftKey","type","relatedTarget","which"],vF=["target","relatedTarget"],oI=i=>{const e={constructorName:i.constructor.name};return yF.forEach(t=>{const n=i[t];n==null?e[t]=null:n instanceof Element&&vF.includes(t)&&typeof n.getAttribute=="function"&&n.hasAttribute(Ti.DATA_PDOM_UNIQUE_ID)?e[t]={[Ti.DATA_PDOM_UNIQUE_ID]:n.getAttribute(Ti.DATA_PDOM_UNIQUE_ID),id:n.getAttribute("id")}:e[t]=typeof n=="object"?{}:JSON.parse(JSON.stringify(n))}),e},lI=i=>{const e=i.constructorName||"Event",t=ie.pick(i,Nx);if(t.relatedTarget){const s=document.getElementById(t.relatedTarget.id);t.relatedTarget=s}const n=new window[e](e,t);for(const s in i)i.hasOwnProperty(s)&&!Nx.includes(s)&&(s==="target"?(n[tv]=ie.clone(i[s])||{},n[tv].getAttribute=function(r){return this[r]}):n[s]=i[s]);return n},zc=new ui("EventIO",{valueType:self.Event,documentation:"A DOM Event",toStateObject:i=>oI(i),fromStateObject:i=>lI(i),stateSchema:()=>({constructorName:xi,altKey:fi(Fs),button:fi(Ii),charCode:fi(Ii),clientX:fi(Ii),clientY:fi(Ii),code:fi(xi),ctrlKey:fi(Fs),deltaMode:fi(Ii),deltaX:fi(Ii),deltaY:fi(Ii),deltaZ:fi(Ii),key:fi(xi),keyCode:fi(Ii),metaKey:fi(Fs),pageX:fi(Ii),pageY:fi(Ii),pointerId:fi(Ii),pointerType:fi(xi),scale:fi(Ii),shiftKey:fi(Fs),target:fi($y),type:fi(xi),relatedTarget:fi($y),which:fi(Ii)})});class bF{constructor(e){this.keyState={},this._lastKeyDown=null,this.attachedToDocument=!1,this.documentKeyupListener=null,this.documentKeydownListener=null,this.documentBlurListener=null,this._enabled=!0,this.keydownEmitter=new kn({parameters:[{valueType:KeyboardEvent}]}),this.keyupEmitter=new kn({parameters:[{valueType:KeyboardEvent}]}),this.keyDownStateChangedEmitter=new kn({parameters:[{valueType:[KeyboardEvent,null]}]}),this.keydownUpdateAction=new Zi(n=>{const s=Qe.getEventCode(n);if(s){if(this.correctModifierKeys(n),!this.isKeyDown(s)){const r=Qe.getEventCode(n);this.keyState[r]={key:r,timeDown:0}}this._lastKeyDown=s,this.keydownEmitter.emit(n),this.keyDownStateChangedEmitter.emit(n)}},{phetioPlayback:!0,tandem:e?.tandem?.createTandem("keydownUpdateAction"),parameters:[{name:"event",phetioType:zc}],phetioEventType:vi.USER,phetioDocumentation:"Action that executes whenever a keydown occurs from the input listeners this keyStateTracker adds (most likely to the document)."}),this.keyupUpdateAction=new Zi(n=>{const s=Qe.getEventCode(n);s&&(this.correctModifierKeys(n),this.isKeyDown(s)&&delete this.keyState[s],Zn.mac&&Qe.isMetaKey(n)&&this.clearState(!0),this.keyupEmitter.emit(n),this.keyDownStateChangedEmitter.emit(n))},{phetioPlayback:!0,tandem:e?.tandem?.createTandem("keyupUpdateAction"),parameters:[{name:"event",phetioType:zc}],phetioEventType:vi.USER,phetioDocumentation:"Action that executes whenever a keyup occurs from the input listeners this keyStateTracker adds (most likely to the document)."});const t=this.step.bind(this);zn.addListener(t),this.disposeKeyStateTracker=()=>{zn.removeListener(t),this.attachedToDocument&&this.detachFromDocument()}}keydownUpdate(e){this.enabled&&this.keydownUpdateAction.execute(e)}correctModifierKeys(e){const t=Qe.getEventCode(e);let n=!1;e.shiftKey&&!Qe.isShiftKey(e)&&!this.shiftKeyDown&&(n=n||!this.keyState[Qe.KEY_SHIFT_LEFT],this.keyState[Qe.KEY_SHIFT_LEFT]={key:t,timeDown:0}),e.altKey&&!Qe.isAltKey(e)&&!this.altKeyDown&&(n=n||!this.keyState[Qe.KEY_ALT_LEFT],this.keyState[Qe.KEY_ALT_LEFT]={key:t,timeDown:0}),e.ctrlKey&&!Qe.isControlKey(e)&&!this.ctrlKeyDown&&(n=n||!this.keyState[Qe.KEY_CONTROL_LEFT],this.keyState[Qe.KEY_CONTROL_LEFT]={key:t,timeDown:0}),e.metaKey&&!Qe.isMetaKey(e)&&!this.metaKeyDown&&(n=n||!this.keyState[Qe.KEY_META_LEFT],this.keyState[Qe.KEY_META_LEFT]={key:t,timeDown:0}),!e.shiftKey&&this.shiftKeyDown&&(n=n||!!this.keyState[Qe.KEY_SHIFT_LEFT]||!!this.keyState[Qe.KEY_SHIFT_RIGHT],delete this.keyState[Qe.KEY_SHIFT_LEFT],delete this.keyState[Qe.KEY_SHIFT_RIGHT]),!e.altKey&&this.altKeyDown&&(n=n||!!this.keyState[Qe.KEY_ALT_LEFT]||!!this.keyState[Qe.KEY_ALT_RIGHT],delete this.keyState[Qe.KEY_ALT_LEFT],delete this.keyState[Qe.KEY_ALT_RIGHT]),!e.ctrlKey&&this.ctrlKeyDown&&(n=n||!!this.keyState[Qe.KEY_CONTROL_LEFT]||!!this.keyState[Qe.KEY_CONTROL_RIGHT],delete this.keyState[Qe.KEY_CONTROL_LEFT],delete this.keyState[Qe.KEY_CONTROL_RIGHT]),!e.metaKey&&this.metaKeyDown&&(n=n||Qe.META_KEYS.some(s=>!!this.keyState[s]),Qe.META_KEYS.forEach(s=>{delete this.keyState[s]})),n&&this.keyDownStateChangedEmitter.emit(e)}keyupUpdate(e){this.enabled&&this.keyupUpdateAction.execute(e)}get movementKeysDown(){return this.isAnyKeyInListDown(Qe.MOVEMENT_KEYS)}getLastKeyDown(){return this._lastKeyDown}isKeyDown(e){return!!this.keyState[e]}isEnglishKeyDown(e){return this.isAnyKeyInListDown(qy[e])}getKeysDown(){return Object.keys(this.keyState)}getEnglishKeysDown(){const e=new Set;for(const t of this.getKeysDown()){const n=Zy(t);n&&e.add(n)}return e}isAnyKeyInListDown(e){for(let t=0;t<e.length;t++)if(this.isKeyDown(e[t]))return!0;return!1}areKeysDown(e){for(let n=0;n<e.length;n++)if(!this.isKeyDown(e[n]))return!1;return!0}areKeysExclusivelyDown(e){const t=Object.keys(this.keyState);if(t.length!==e.length)return!1;let n=!0;for(let s=0;s<e.length;s++){const r=e[s];let a=[r];Qe.isModifierKey(r)&&(a=Qe.MODIFIER_KEY_TO_CODE_MAP.get(r)),ie.intersection(t,a).length===0&&(n=!1)}return n}areKeysDownWithoutExtraModifiers(e){for(let t=0;t<Qe.MODIFIER_KEY_CODES.length;t++){const n=Qe.MODIFIER_KEY_CODES[t];if(this.isKeyDown(n)&&!e.includes(n))return!1}return this.areKeysDown(e)}keysAreDown(){return Object.keys(this.keyState).length>0}get enterKeyDown(){return this.isKeyDown(Qe.KEY_ENTER)}get shiftKeyDown(){return this.isAnyKeyInListDown(Qe.SHIFT_KEYS)}get altKeyDown(){return this.isAnyKeyInListDown(Qe.ALT_KEYS)}get ctrlKeyDown(){return this.isAnyKeyInListDown(Qe.CONTROL_KEYS)}get metaKeyDown(){return this.isAnyKeyInListDown(Qe.META_KEYS)}timeDownForKey(e){return this.keyState[e].timeDown}clearState(e){this.keyState={},e||this.keyDownStateChangedEmitter.emit(null)}step(e){if(this.keysAreDown()){const t=e*1e3;for(const n in this.keyState)this.keyState[n]&&(this.keyState[n].timeDown+=t)}}attachToWindow(){this.documentKeydownListener=t=>{this.keydownUpdate(t)},this.documentKeyupListener=t=>{this.keyupUpdate(t)},this.documentBlurListener=t=>{this.clearState()};const e=()=>{self.addEventListener("keyup",this.documentKeyupListener,{capture:!0}),self.addEventListener("keydown",this.documentKeydownListener,{capture:!0}),self.addEventListener("blur",this.documentBlurListener,{capture:!0}),this.attachedToDocument=!0};if(document)e();else{const t=()=>{e(),self.removeEventListener("load",t)};self.addEventListener("load",t)}}setEnabled(e){this._enabled!==e&&(this._enabled=e,!e&&this.clearState())}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabled}detachFromDocument(){self.removeEventListener("keyup",this.documentKeyupListener),self.removeEventListener("keydown",this.documentKeydownListener),self.removeEventListener("blur",this.documentBlurListener),this.documentKeyupListener=null,this.documentKeydownListener=null,this.documentBlurListener=null,this.attachedToDocument=!1}dispose(){this.disposeKeyStateTracker()}}class _F extends bF{constructor(e){super(e)}}const or=new _F({tandem:R.GENERAL_CONTROLLER.createTandem("keyStateTracker")}),Cm=Object.keys(phet.chipper.strings).sort((i,e)=>{const t=Gn.localeToLocalizedName(i).toLowerCase(),n=Gn.localeToLocalizedName(e).toLowerCase();return t.localeCompare(n,"en-US",{sensitivity:"base"})});class AF extends Mt{constructor(e,t){const n=Ne()({valueType:"string",phetioValueType:xi},t);super(e,n),this.availableRuntimeLocales=Cm}unguardedSet(e){super.unguardedSet(phet.chipper.checkAndRemapLocale(e,!0))}toStateObject(){const e=super.toStateObject();return e.validValues=[...this.availableRuntimeLocales].sort(),e}get supportsDynamicLocale(){return this.availableRuntimeLocales.length>1}}const Mr=new AF(phet.chipper.locale,{tandem:R.GENERAL_MODEL.createTandem("localeProperty"),phetioFeatured:!0,phetioDocumentation:"Specifies language currently displayed in the simulation"});if(self.phet?.chipper?.queryParameters?.keyboardLocaleSwitcher){const i=Qe.KEY_I,e=Qe.KEY_U;or.keydownEmitter.addListener(t=>{const n=s=>{t.preventDefault();const a=(Cm.indexOf(Mr.value)+s+Cm.length)%Cm.length;Mr.value=Cm[a],console.log(Mr.value)};t.ctrlKey&&!t.shiftKey&&!t.metaKey&&!t.altKey&&(Qe.isKeyEvent(t,i)?n(1):Qe.isKeyEvent(t,e)&&n(-1))})}class Ob extends ks{constructor(e,t){const n=Ne()({bidirectional:!1,defaultValue:null,derive:ie.identity,map:ie.identity,inverseMap:ie.identity},t),s=n.derive,r=n.map,a=n.inverseMap,o=typeof s=="function"?s:f=>f[s],l=typeof r=="function"?r:f=>f[r],h=typeof a=="function"?a:f=>f[a],c=e.value===null?l(n.defaultValue):l(o(e.value).value);super(c,n),this.defaultValue=n.defaultValue,this.derive=o,this.map=l,this.inverseMap=h,this.bidirectional=n.bidirectional,this.valuePropertyProperty=e,this.isExternallyChanging=!1,this.propertyPropertyListener=this.onPropertyPropertyChange.bind(this),this.propertyListener=this.onPropertyChange.bind(this),e.link(this.propertyListener),n.bidirectional&&this.lazyLink(this.onSelfChange.bind(this))}onPropertyPropertyChange(e,t,n){this.bidirectional&&this.valuePropertyProperty.value!==null&&n&&this.derive(this.valuePropertyProperty.value)===n&&n.areValuesEqual(this.inverseMap(this.value),n.get())||super.set(this.map(e))}onPropertyChange(e,t){t&&this.derive(t).unlink(this.propertyPropertyListener),e?this.derive(e).link(this.propertyPropertyListener):this.onPropertyPropertyChange(this.defaultValue,null,null)}onSelfChange(e){if(this.valuePropertyProperty.value!==null){const t=this.derive(this.valuePropertyProperty.value);this.areValuesEqual(e,this.map(t.value))||(t.value=this.inverseMap(e))}}dispose(){this.valuePropertyProperty.unlink(this.propertyListener),this.valuePropertyProperty.value!==null&&this.derive(this.valuePropertyProperty.value).unlink(this.propertyPropertyListener),super.dispose()}reset(){this.valuePropertyProperty.value!==null&&this.derive(this.valuePropertyProperty.value).reset()}set(e){this.isExternallyChanging=!0,super.set(e),this.isExternallyChanging=!1}get value(){return super.value}set value(e){this.set(e)}isSettable(){return super.isSettable()||this.bidirectional}}class Fe extends Ob{constructor(e,t,n){const s=n&&typeof n.phetioReadOnly=="boolean"?n.phetioReadOnly:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioReadOnly,r=n&&typeof n.phetioFeatured=="boolean"?n.phetioFeatured:!0,a=n&&typeof n.phetioDocumentation=="string"?n.phetioDocumentation:jr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDocumentation;super(Mr,{derive:o=>e.getLocaleSpecificProperty(o),bidirectional:!0,phetioValueType:xi,phetioState:!1,tandem:t,phetioFeatured:r,phetioReadOnly:s,phetioDocumentation:a}),this.localizedString=e}get stringKey(){return this.localizedString.stringKey}getTranslatedStringProperty(e){return this.localizedString.getLocaleSpecificProperty(e)}}const iv=[],W1="en",wF=phet.chipper.localeData;class He{constructor(e,t,n,s){this.stringKey=e,this.localeToTranslationMap=t,this.localePropertyMap=new Map,this.initialValues={},this.property=new Fe(this,n,s),iv.push(this)}getStateDelta(){const e={};return this.usedLocales.forEach(t=>{const n=this.initialValues[t],s=this.getLocaleSpecificProperty(t).value;s!==n&&(e[t]=s)}),e}setStateDelta(e){Object.keys(e).forEach(t=>this.getLocaleSpecificProperty(t)),this.usedLocales.forEach(t=>{const n=this.getLocaleSpecificProperty(t),s=this.initialValues[t],r=e[t]!==void 0?e[t]:null;n.value=r??s})}get usedLocales(){return[...this.localePropertyMap.keys()]}getLocaleSpecificProperty(e){if(!this.localePropertyMap.has(e)){const t=He.getLocaleFallbacks(e);let n=null;for(const s of t)if(this.localeToTranslationMap[s]!==void 0){n=this.localeToTranslationMap[s];break}this.initialValues[e]=n,this.localePropertyMap.set(e,new oi(n))}return this.localePropertyMap.get(e)}dispose(){this.property.dispose(),gs(iv,this)}restoreInitialValue(e){this.property.value=this.initialValues[e]}static getLocaleFallbacks(e=Mr.value){return ie.uniq([e,...wF[e].fallbackLocales||[],W1])}static getNestedStringProperties(e){const t=Object.keys(e),n={},s=(a,o)=>{let l=e[o];for(const h of a)l&&(l=l[h]);return l},r=a=>{const o=ie.sortBy(ie.uniq(t.map(l=>{const h=s(a,l);return h?Object.keys(h):[]}).flat()));for(const l of o){const h=[...a,l];let c=!0;const f=[];for(const g of t){const v=s(a,g);v&&(typeof v[l]=="string"?f.push(g):c=!1)}if(c){const g={};for(const A of f)g[A]=s(h,A);f.includes(W1)||(g[W1]=g[f[0]]);const v=new Fe(new He(h.join("."),g,R.OPT_OUT),R.OPT_OUT);ie.set(n,[...a,`${l}StringProperty`],v)}else r(h)}};return r([]),n}}class SF{constructor(){this.pendingLocks=[],this.loadComplete=!1,this.listeners=[],this.stageComplete=this.createLock("stage")}reset(){this.loadComplete=!1,this.stageComplete=this.createLock("stage")}addListener(e){this.listeners.push(e)}proceedIfReady(){this.pendingLocks.length===0&&(jt(!this.loadComplete,"cannot complete load twice without a reset() in-between"),this.loadComplete=!0,this.listeners.forEach(e=>e()))}createLock(e){return jt(!this.loadComplete,"Cannot create more locks after a stage has completed unless reset() is called"),this.pendingLocks.push(e),()=>{jt(this.pendingLocks.includes(e),"invalid lock"),gs(this.pendingLocks,e),this.proceedIfReady()}}}const _n=new SF,PF='<svg width="570.43" height="108" version="1.1" viewBox="0 0 570.43 108" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs><style>.cls-1 {fill: #faa51a;} .cls-2, .cls-3 {fill: #fff;} .cls-4 {stroke-width: .62px;} .cls-4, .cls-5 {fill: none;stroke: #1f3151;} .cls-4, .cls-5, .cls-6 {stroke-miterlimit: 10;} .cls-5 {stroke-width: .94px;} .cls-6 {fill: url(#b);stroke: url(#a);} .cls-7 {fill: #1f3151;} .cls-8 {fill: #ffca37;}</style><linearGradient id="b" x1="25.68" x2="25.68" y1="50.86" y2=".5" gradientUnits="userSpaceOnUse"><stop stop-color="#fff" offset="0"/><stop stop-color="#1f3151" offset="1"/></linearGradient><linearGradient id="a" x1="25.68" x2="25.68" y1="51.36" gradientUnits="userSpaceOnUse"><stop stop-color="#fff" offset="0"/><stop stop-color="#e7e9ed" offset=".05"/><stop stop-color="#b3b9c4" offset=".19"/><stop stop-color="#858fa0" offset=".33"/><stop stop-color="#606d84" offset=".46"/><stop stop-color="#43526d" offset=".6"/><stop stop-color="#2f405d" offset=".74"/><stop stop-color="#233454" offset=".87"/><stop stop-color="#1f3151" offset="1"/></linearGradient></defs><g transform="matrix(6.6229 0 0 6.6229 -442.44 -909.24)"><g transform="matrix(.26458 0 0 .26458 69.82 141.9)"><g transform="matrix(1.2 0 0 1.2 -11.402 -17.432)"><circle class="cls-6" cx="25.68" cy="25.68" r="25.18" fill="url(#b)" stroke="url(#a)"/><path class="cls-7" d="m36.75 35.44s-0.45 7.03-0.99 7.03c0 0-3.63-5.74-3.63-6.65h-0.03c0.2-0.44 0.31-0.93 0.31-1.43l0.74-5.76c0.61 1.03 3.59 6 3.59 6.81z"/><path class="cls-2" d="m33.16 28.63-0.74 5.76c0 0.5-0.11 0.99-0.31 1.42-0.5 1.18-1.64 2.01-2.97 2.11-0.08 0.01-0.17 0.01-0.26 0.01h-5.6c-1.55 0-2.89-1.01-3.35-2.42-0.12-0.35-0.19-0.73-0.19-1.12l-0.8-6.32-1.04-8.32c-0.5-4 0.45-8.05 2.72-11.39 2.12-3.08 4.63-6.08 5.68-6.08 0.53 0 1.4 0.77 2.4 1.93s2.12 2.72 3.13 4.28c2.12 3.27 2.97 7.2 2.49 11.08l-1.16 9.07zm-3.89-11.86c0-1.76-1.42-3.16-3.16-3.16s-3.16 1.4-3.16 3.16 1.42 3.15 3.16 3.15 3.16-1.4 3.16-3.15zm-1.05 9.37c0-1.14-0.92-2.04-2.04-2.04s-2.04 0.91-2.04 2.04 0.92 2.04 2.04 2.04 2.04-0.92 2.04-2.04z"/><path class="cls-8" d="m29.13 37.93c0.59 1.15 1.7 4.59 1.54 5.89-0.12 1.08-2.85 3.27-3.77 4.36-0.19 0.23-0.51 0.26-0.73 0.05-1.23-1.15-4.07-3.05-4.41-4.15-0.46-1.53 0.47-4.56 1.49-5.84 0.05 1.6 2.22 4.43 2.92 4.45 0.91 0 2.59-3.3 2.7-4.77 0.08 0 0.17 0 0.26-0.01v0.02z"/><path class="cls-1" d="m23.25 38.25c0-0.12 0.01-0.23 0.03-0.32h5.6c-0.11 1.47-1.8 4.77-2.7 4.77-0.7-0.01-2.87-2.85-2.92-4.45z"/><path class="cls-7" d="m26.11 13.6c1.74 0 3.16 1.4 3.16 3.16s-1.42 3.15-3.16 3.15-3.16-1.4-3.16-3.15 1.42-3.16 3.16-3.16z"/><path class="cls-7" d="m26.17 24.1c1.12 0 2.04 0.91 2.04 2.04s-0.92 2.04-2.04 2.04-2.04-0.92-2.04-2.04 0.92-2.04 2.04-2.04z"/><path class="cls-7" d="m19.74 34.39c0 0.39 0.07 0.77 0.19 1.12 0 0.91-4.19 6.65-4.19 6.65-0.63 0-1.14-7.04-1.14-7.04 0-0.91 4.32-7.05 4.32-7.05h0.01l0.8 6.32z"/><path class="cls-5" d="m28.88 37.93h-5.6c-1.55 0-2.89-1.01-3.35-2.42-0.12-0.35-0.19-0.73-0.19-1.12l-0.8-6.32-1.04-8.32c-0.5-4 0.45-8.05 2.72-11.39 2.12-3.08 4.63-6.08 5.68-6.08 0.53 0 1.4 0.77 2.4 1.93s2.12 2.72 3.13 4.28c2.12 3.27 2.97 7.2 2.49 11.08l-1.16 9.07-0.74 5.76c0 0.5-0.11 0.99-0.31 1.42-0.5 1.18-1.64 2.01-2.97 2.11-0.08 0.01-0.17 0.01-0.26 0.01z"/><path class="cls-5" d="m29.27 16.77c0 1.74-1.42 3.15-3.16 3.15s-3.16-1.4-3.16-3.15 1.42-3.16 3.16-3.16 3.16 1.4 3.16 3.16z"/><path class="cls-5" d="m28.22 26.14c0 1.12-0.92 2.04-2.04 2.04s-2.04-0.92-2.04-2.04 0.92-2.04 2.04-2.04 2.04 0.91 2.04 2.04z"/><path class="cls-5" d="m19.93 35.51c0 0.91-4.19 6.65-4.19 6.65-0.63 0-1.14-7.04-1.14-7.04 0-0.91 4.32-7.05 4.32-7.05"/><path class="cls-5" d="m32.13 35.82c0 0.91 3.63 6.65 3.63 6.65 0.54 0 0.99-7.03 0.99-7.03 0-0.81-2.98-5.78-3.59-6.81-0.08-0.12-0.12-0.19-0.12-0.19"/><path class="cls-5" d="m23.28 37.93c-0.01 0.09-0.03 0.2-0.03 0.32 0.05 1.6 2.22 4.43 2.92 4.45 0.91 0 2.59-3.3 2.7-4.77"/><path class="cls-5" d="m23.39 38.09c-0.04 0.05-0.08 0.09-0.13 0.16-1.01 1.28-1.95 4.31-1.49 5.84 0.34 1.1 3.18 3 4.41 4.15 0.22 0.2 0.54 0.17 0.73-0.05 0.92-1.1 3.65-3.28 3.77-4.36 0.16-1.3-0.95-4.74-1.54-5.89"/><circle class="cls-2" cx="27.57" cy="15.25" r="1.07"/><circle class="cls-2" cx="27.1" cy="25" r=".71"/><line class="cls-4" x1="19.74" x2="32" y1="34.19" y2="34.19"/><path class="cls-4" d="m18.93 11.84c2.04-1.63 4.65-2.53 7.27-2.5 2.61 0.03 5.2 0.98 7.21 2.65"/></g><g transform="translate(0 -1.5051)"><path class="cls-3" transform="translate(60.18,36.57)" d="m23.268-7.7135q0 1.579-0.74413 3.1217-0.72598 1.5427-2.0509 2.6135-1.452 1.1616-3.3939 1.8149-1.9238 0.65338-4.6462 0.65338-2.9221 0-5.2633-0.54448-2.3231-0.54448-4.737-1.6153v-4.5011h0.25409q2.0509 1.706 4.737 2.6317 2.6861 0.92562 5.0455 0.92562 3.3395 0 5.1907-1.2523 1.8694-1.2523 1.8694-3.3395 0-1.7968-0.88932-2.6498-0.87117-0.85302-2.668-1.3249-1.3612-0.36299-2.9584-0.59893-1.579-0.23594-3.3576-0.59893-3.5936-0.76228-5.3359-2.5954-1.7242-1.8512-1.7242-4.8096 0-3.3939 2.8676-5.5537 2.8676-2.1779 7.2779-2.1779 2.8495 0 5.227 0.54448t4.2107 1.3431v4.247h-0.25409q-1.5427-1.3068-4.0655-2.1598-2.5046-0.87117-5.1363-0.87117-2.8858 0-4.6463 1.1979-1.7423 1.1979-1.7423 3.0854 0 1.6879 0.87117 2.6498 0.87117 0.96192 3.0673 1.4701 1.1616 0.25409 3.3032 0.61708 2.1416 0.36299 3.6299 0.74413 3.0128 0.79857 4.5374 2.4139 1.5246 1.6153 1.5246 4.5192zm20.491 6.443q-1.706 0.81672-3.2487 1.2705-1.5246 0.45374-3.2487 0.45374-2.1961 0-4.0292-0.63523-1.8331-0.65338-3.1398-1.9601-1.3249-1.3068-2.0509-3.3032-0.72598-1.9964-0.72598-4.6644 0-4.9729 2.7224-7.8042 2.7406-2.8313 7.2235-2.8313 1.7423 0 3.4121 0.49003 1.6879 0.49003 3.0854 1.1979v3.7932h-0.18149q-1.5608-1.216-3.2306-1.8694-1.6516-0.65338-3.2306-0.65338-2.9039 0-4.5918 1.9601-1.6697 1.942-1.6697 5.7171 0 3.6662 1.6334 5.6445 1.6516 1.9601 4.6281 1.9601 1.0345 0 2.1053-0.27224 1.0708-0.27224 1.9238-0.70783 0.74413-0.38114 1.3975-0.79857 0.65338-0.43559 1.0345-0.74413h0.18149zm21.344-8.5121h-14.937q0 1.8694 0.56263 3.2669 0.56263 1.3794 1.5427 2.2687 0.94377 0.87117 2.2324 1.3068 1.3068 0.43559 2.8676 0.43559 2.069 0 4.1562-0.81672 2.1053-0.83487 2.9947-1.6334h0.18149v3.7206q-1.7242 0.72598-3.521 1.216-1.7968 0.49003-3.7751 0.49003-5.0455 0-7.8768-2.7224-2.8313-2.7406-2.8313-7.7679 0-4.9729 2.7043-7.895 2.7224-2.9221 7.1509-2.9221 4.1018 0 6.316 2.3957 2.2324 2.3957 2.2324 6.806zm-3.3213-2.6135q-0.01815-2.6861-1.3612-4.1562-1.3249-1.4701-4.0473-1.4701-2.7406 0-4.374 1.6153-1.6153 1.6153-1.8331 4.011zm25.445 12.396h-3.4121v-11.543q0-1.3975-0.16334-2.6135-0.16334-1.2342-0.59893-1.9238-0.45374-0.76228-1.3068-1.1253-0.85302-0.38114-2.2142-0.38114-1.3975 0-2.9221 0.68968-1.5246 0.68968-2.9221 1.7605v15.137h-3.4121v-20.273h3.4121v2.2505q1.5971-1.3249 3.3032-2.069t3.5028-0.74413q3.285 0 5.0092 1.9783 1.7242 1.9783 1.7242 5.6989zm23.54-9.7825h-14.937q0 1.8694 0.56263 3.2669 0.56263 1.3794 1.5427 2.2687 0.94377 0.87117 2.2324 1.3068 1.3068 0.43559 2.8676 0.43559 2.069 0 4.1562-0.81672 2.1053-0.83487 2.9946-1.6334h0.1815v3.7206q-1.7242 0.72598-3.521 1.216-1.7968 0.49003-3.7751 0.49003-5.0455 0-7.8768-2.7224-2.8313-2.7406-2.8313-7.7679 0-4.9729 2.7043-7.895 2.7224-2.9221 7.1509-2.9221 4.1018 0 6.316 2.3957 2.2324 2.3957 2.2324 6.806zm-3.3214-2.6135q-0.0181-2.6861-1.3612-4.1562-1.3249-1.4701-4.0473-1.4701-2.7406 0-4.374 1.6153-1.6153 1.6153-1.8331 4.011zm21.144-4.1562h-0.18149q-0.76228-0.18149-1.4882-0.25409-0.70783-0.09075-1.6879-0.09075-1.579 0-3.0491 0.70783-1.4701 0.68968-2.8313 1.7968v14.392h-3.4121v-20.273h3.4121v2.9947q2.0327-1.6334 3.5754-2.305 1.5608-0.68968 3.1761-0.68968 0.88932 0 1.2886 0.05445 0.39929 0.0363 1.1979 0.16334zm20.745-3.7206-11.833 27.75h-3.648l3.7751-8.4576-8.0765-19.293h3.7025l6.2252 15.028 6.2797-15.028zm24.375 12.559q0 1.579-0.74413 3.1217-0.72597 1.5427-2.0509 2.6135-1.452 1.1616-3.3939 1.8149-1.9238 0.65338-4.6462 0.65338-2.9221 0-5.2633-0.54448-2.3231-0.54448-4.737-1.6153v-4.5011h0.25409q2.0509 1.706 4.737 2.6317 2.6861 0.92562 5.0455 0.92562 3.3395 0 5.1907-1.2523 1.8694-1.2523 1.8694-3.3395 0-1.7968-0.88932-2.6498-0.87117-0.85302-2.668-1.3249-1.3612-0.36299-2.9584-0.59893-1.579-0.23594-3.3576-0.59893-3.5936-0.76228-5.3359-2.5954-1.7242-1.8512-1.7242-4.8096 0-3.3939 2.8676-5.5537 2.8676-2.1779 7.2779-2.1779 2.8495 0 5.227 0.54448t4.2107 1.3431v4.247h-0.25409q-1.5427-1.3068-4.0655-2.1598-2.5046-0.87117-5.1363-0.87117-2.8858 0-4.6462 1.1979-1.7423 1.1979-1.7423 3.0854 0 1.6879 0.87117 2.6498t3.0672 1.4701q1.1616 0.25409 3.3032 0.61708 2.1416 0.36299 3.6299 0.74413 3.0128 0.79857 4.5374 2.4139 1.5246 1.6153 1.5246 4.5192zm16.026 7.532q-0.96192 0.25409-2.1053 0.41744-1.1253 0.16334-2.0146 0.16334-3.1035 0-4.7188-1.6697-1.6153-1.6697-1.6153-5.3541v-10.781h-2.305v-2.8676h2.305v-5.826h3.4121v5.826h7.042v2.8676h-7.042v9.2381q0 1.5971 0.0726 2.5046 0.0726 0.88932 0.50818 1.6697 0.39929 0.72598 1.089 1.0708 0.70782 0.32669 2.1416 0.32669 0.83487 0 1.7423-0.23594 0.90747-0.25409 1.3068-0.41744h0.18149zm19.874 0.18149h-3.3939v-2.1598q-0.45374 0.30854-1.2342 0.87117-0.76228 0.54448-1.4882 0.87117-0.85303 0.41744-1.9601 0.68968-1.1071 0.29039-2.5954 0.29039-2.7406 0-4.6462-1.8149-1.9057-1.8149-1.9057-4.6281 0-2.305 0.98006-3.7206 0.99822-1.4338 2.8313-2.2505 1.8512-0.81672 4.4466-1.1071 2.5954-0.29039 5.5719-0.43559v-0.52633q0-1.1616-0.41744-1.9238-0.39929-0.76228-1.1616-1.1979-0.72598-0.41744-1.7423-0.56263-1.0164-0.1452-2.1235-0.1452-1.343 0-2.9946 0.36299-1.6516 0.34484-3.4121 1.0164h-0.18149v-3.4665q0.99821-0.27224 2.8858-0.59893 1.8875-0.32669 3.7206-0.32669 2.1416 0 3.7206 0.36299 1.5972 0.34484 2.7587 1.1979 1.1434 0.83487 1.7424 2.1598t0.59893 3.285zm-3.3939-4.9911v-5.6445q-1.5608 0.09075-3.6843 0.27224-2.1053 0.18149-3.3395 0.52633-1.4701 0.41744-2.3776 1.3068-0.90747 0.87117-0.90747 2.4139 0 1.7423 1.0527 2.6317 1.0527 0.87117 3.2124 0.87117 1.7968 0 3.285-0.68968 1.4882-0.70783 2.7587-1.6879zm24.955 3.7206q-1.706 0.81672-3.2488 1.2705-1.5246 0.45374-3.2487 0.45374-2.1961 0-4.0292-0.63523-1.8331-0.65338-3.1398-1.9601-1.3249-1.3068-2.0509-3.3032-0.72598-1.9964-0.72598-4.6644 0-4.9729 2.7224-7.8042 2.7406-2.8313 7.2235-2.8313 1.7423 0 3.4121 0.49003 1.6879 0.49003 3.0854 1.1979v3.7932h-0.18149q-1.5608-1.216-3.2306-1.8694-1.6516-0.65338-3.2306-0.65338-2.9039 0-4.5918 1.9601-1.6697 1.942-1.6697 5.7171 0 3.6662 1.6334 5.6445 1.6516 1.9601 4.6281 1.9601 1.0345 0 2.1053-0.27224 1.0708-0.27224 1.9238-0.70783 0.74413-0.38114 1.3975-0.79857 0.65338-0.43559 1.0345-0.74413h0.18149zm22.778 1.2705h-4.5011l-8.1309-8.8751-2.2142 2.1053v6.7697h-3.4121v-28.24h3.4121v18.113l9.8551-10.146h4.3014l-9.4196 9.3651z" fill="#fff" aria-label="SceneryStack"/><path transform="translate(-386.48 -527.99)" d="m462.04 528.91h-1.9336v-12.529l-4.043 8.5254h-1.1523l-4.0137-8.5254v12.529h-1.8066v-14.541h2.6367l3.877 8.0957 3.75-8.0957h2.6855zm12.236 0h-1.8262v-1.1621q-0.24414 0.16601-0.66406 0.46875-0.41016 0.29296-0.80079 0.46875-0.45898 0.22461-1.0547 0.37109-0.59571 0.15625-1.3965 0.15625-1.4746 0-2.5-0.97656-1.0254-0.97657-1.0254-2.4902 0-1.2402 0.52735-2.002 0.53711-0.77148 1.5234-1.2109 0.9961-0.43945 2.3926-0.5957 1.3965-0.15625 2.998-0.23438v-0.2832q0-0.625-0.22461-1.0352-0.21484-0.41015-0.625-0.64453-0.39063-0.22461-0.9375-0.30273-0.54688-0.0781-1.1426-0.0781-0.72266 0-1.6113 0.19532-0.88867 0.18554-1.8359 0.54687h-0.0977v-1.8652q0.53711-0.14649 1.5527-0.32227 1.0156-0.17578 2.002-0.17578 1.1523 0 2.002 0.19531 0.85937 0.18555 1.4844 0.64453 0.61524 0.44922 0.9375 1.1621 0.32227 0.71289 0.32227 1.7676zm-1.8262-2.6856v-3.0371q-0.83985 0.0488-1.9824 0.14648-1.1328 0.0977-1.7969 0.28321-0.79101 0.22461-1.2793 0.70312-0.48828 0.46875-0.48828 1.2988 0 0.9375 0.56641 1.416 0.56641 0.46875 1.7285 0.46875 0.96679 0 1.7676-0.3711 0.80078-0.38086 1.4844-0.9082zm14.209 2.6856h-1.8359v-1.1426q-0.79102 0.68359-1.6504 1.0644-0.85937 0.38086-1.8652 0.38086-1.9531 0-3.1055-1.5039-1.1426-1.5039-1.1426-4.1699 0-1.3867 0.39063-2.4707 0.40039-1.084 1.0742-1.8457 0.66406-0.74219 1.543-1.1328 0.88867-0.39062 1.8359-0.39062 0.85938 0 1.5234 0.18554 0.66406 0.17579 1.3965 0.55665v-4.7266h1.8359zm-1.8359-2.6856v-6.2598q-0.74219-0.33203-1.3281-0.45898t-1.2793-0.12695q-1.543 0-2.4023 1.0742-0.85938 1.0742-0.85938 3.0469 0 1.9434 0.66407 2.959 0.66406 1.0059 2.1289 1.0059 0.78125 0 1.582-0.34179 0.80079-0.35157 1.4942-0.89844zm14.58-2.5781h-8.0371q0 1.0059 0.30274 1.7578 0.30273 0.74218 0.83008 1.2207 0.50781 0.46875 1.2012 0.70312 0.70312 0.23438 1.543 0.23438 1.1133 0 2.2363-0.43945 1.1328-0.44922 1.6113-0.87891h0.0977v2.002q-0.92773 0.39063-1.8945 0.6543t-2.0312 0.26367q-2.7148 0-4.2383-1.4648-1.5234-1.4746-1.5234-4.1797 0-2.6758 1.4551-4.248 1.4648-1.5723 3.8476-1.5723 2.207 0 3.3984 1.2891 1.2012 1.2891 1.2012 3.6621zm-1.7871-1.4062q-0.01-1.4453-0.73242-2.2363-0.71289-0.79102-2.1777-0.79102-1.4746 0-2.3535 0.86914-0.86914 0.86914-0.98633 2.1582zm25.322-4.2383-2.8418 10.908h-1.6992l-2.8027-8.4082-2.7832 8.4082h-1.6895l-2.8711-10.908h1.9141l2.002 8.4473 2.7246-8.4473h1.5137l2.793 8.4473 1.8945-8.4473zm4.6191-1.8262h-2.0703v-1.9043h2.0703zm-0.11719 12.734h-1.8359v-10.908h1.8359zm9.2969-0.0977q-0.51758 0.13672-1.1328 0.22461-0.60547 0.0879-1.084 0.0879-1.6699 0-2.5391-0.89844t-0.86914-2.8809v-5.8008h-1.2402v-1.543h1.2402v-3.1348h1.8359v3.1348h3.7891v1.543h-3.7891v4.9707q0 0.85938 0.0391 1.3477 0.0391 0.47852 0.27344 0.89844 0.21484 0.39062 0.58593 0.57617 0.38086 0.17578 1.1524 0.17578 0.44922 0 0.9375-0.12695 0.48828-0.13672 0.70312-0.22461h0.0977zm11.338 0.0977h-1.8359v-6.2109q0-0.75196-0.0879-1.4062-0.0879-0.66406-0.32227-1.0352-0.24414-0.41015-0.70312-0.60547-0.45898-0.20508-1.1914-0.20508-0.75195 0-1.5723 0.3711-0.82031 0.37109-1.5723 0.94726v8.1445h-1.8359v-15.195h1.8359v5.498q0.85938-0.71289 1.7774-1.1133 0.91796-0.40039 1.8848-0.40039 1.7676 0 2.6953 1.0644 0.92774 1.0644 0.92774 3.0664z" fill="#e7e7e7" fill-opacity=".75" style="white-space:pre" aria-label="Made with"/></g></g></g></svg>',TF=`data:image/svg+xml;base64,${btoa(PF)}`,Nb=new Image,xF=_n.createLock(Nb);Nb.onload=xF;Nb.src=TF;const EF='<svg width="570.43" height="108" version="1.1" viewBox="0 0 570.43 108" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs><style> .cls-1 {fill: #faa51a;} .cls-2, .cls-3 {fill: #fff;} .cls-3 {fill: #1f3151ff} .cls-4 {stroke-width: .62px;} .cls-4, .cls-5 {fill: none;stroke: #1f3151;} .cls-4, .cls-5, .cls-6 {stroke-miterlimit: 10;} .cls-5 {stroke-width: .94px;} .cls-6 {fill: url(#b);stroke: url(#a);} .cls-7 {fill: #1f3151;} .cls-8 {fill: #ffca37;}</style><linearGradient id="b" x1="25.68" x2="25.68" y1="50.86" y2=".5" gradientUnits="userSpaceOnUse"><stop stop-color="#fff" offset="0"/><stop stop-color="#1f3151" offset="1"/></linearGradient><linearGradient id="a" x1="25.68" x2="25.68" y1="51.36" gradientUnits="userSpaceOnUse"><stop stop-color="#fff" offset="0"/><stop stop-color="#e7e9ed" offset=".05"/><stop stop-color="#b3b9c4" offset=".19"/><stop stop-color="#858fa0" offset=".33"/><stop stop-color="#606d84" offset=".46"/><stop stop-color="#43526d" offset=".6"/><stop stop-color="#2f405d" offset=".74"/><stop stop-color="#233454" offset=".87"/><stop stop-color="#1f3151" offset="1"/></linearGradient></defs><g transform="matrix(6.6229 0 0 6.6229 -442.44 -909.24)"><g transform="matrix(.26458 0 0 .26458 69.82 141.9)"><g transform="matrix(1.2 0 0 1.2 -11.402 -17.432)"><circle class="cls-6" cx="25.68" cy="25.68" r="25.18" fill="url(#b)" stroke="url(#a)"/><path class="cls-7" d="m36.75 35.44s-0.45 7.03-0.99 7.03c0 0-3.63-5.74-3.63-6.65h-0.03c0.2-0.44 0.31-0.93 0.31-1.43l0.74-5.76c0.61 1.03 3.59 6 3.59 6.81z"/><path class="cls-2" d="m33.16 28.63-0.74 5.76c0 0.5-0.11 0.99-0.31 1.42-0.5 1.18-1.64 2.01-2.97 2.11-0.08 0.01-0.17 0.01-0.26 0.01h-5.6c-1.55 0-2.89-1.01-3.35-2.42-0.12-0.35-0.19-0.73-0.19-1.12l-0.8-6.32-1.04-8.32c-0.5-4 0.45-8.05 2.72-11.39 2.12-3.08 4.63-6.08 5.68-6.08 0.53 0 1.4 0.77 2.4 1.93s2.12 2.72 3.13 4.28c2.12 3.27 2.97 7.2 2.49 11.08l-1.16 9.07zm-3.89-11.86c0-1.76-1.42-3.16-3.16-3.16s-3.16 1.4-3.16 3.16 1.42 3.15 3.16 3.15 3.16-1.4 3.16-3.15zm-1.05 9.37c0-1.14-0.92-2.04-2.04-2.04s-2.04 0.91-2.04 2.04 0.92 2.04 2.04 2.04 2.04-0.92 2.04-2.04z"/><path class="cls-8" d="m29.13 37.93c0.59 1.15 1.7 4.59 1.54 5.89-0.12 1.08-2.85 3.27-3.77 4.36-0.19 0.23-0.51 0.26-0.73 0.05-1.23-1.15-4.07-3.05-4.41-4.15-0.46-1.53 0.47-4.56 1.49-5.84 0.05 1.6 2.22 4.43 2.92 4.45 0.91 0 2.59-3.3 2.7-4.77 0.08 0 0.17 0 0.26-0.01v0.02z"/><path class="cls-1" d="m23.25 38.25c0-0.12 0.01-0.23 0.03-0.32h5.6c-0.11 1.47-1.8 4.77-2.7 4.77-0.7-0.01-2.87-2.85-2.92-4.45z"/><path class="cls-7" d="m26.11 13.6c1.74 0 3.16 1.4 3.16 3.16s-1.42 3.15-3.16 3.15-3.16-1.4-3.16-3.15 1.42-3.16 3.16-3.16z"/><path class="cls-7" d="m26.17 24.1c1.12 0 2.04 0.91 2.04 2.04s-0.92 2.04-2.04 2.04-2.04-0.92-2.04-2.04 0.92-2.04 2.04-2.04z"/><path class="cls-7" d="m19.74 34.39c0 0.39 0.07 0.77 0.19 1.12 0 0.91-4.19 6.65-4.19 6.65-0.63 0-1.14-7.04-1.14-7.04 0-0.91 4.32-7.05 4.32-7.05h0.01l0.8 6.32z"/><path class="cls-5" d="m28.88 37.93h-5.6c-1.55 0-2.89-1.01-3.35-2.42-0.12-0.35-0.19-0.73-0.19-1.12l-0.8-6.32-1.04-8.32c-0.5-4 0.45-8.05 2.72-11.39 2.12-3.08 4.63-6.08 5.68-6.08 0.53 0 1.4 0.77 2.4 1.93s2.12 2.72 3.13 4.28c2.12 3.27 2.97 7.2 2.49 11.08l-1.16 9.07-0.74 5.76c0 0.5-0.11 0.99-0.31 1.42-0.5 1.18-1.64 2.01-2.97 2.11-0.08 0.01-0.17 0.01-0.26 0.01z"/><path class="cls-5" d="m29.27 16.77c0 1.74-1.42 3.15-3.16 3.15s-3.16-1.4-3.16-3.15 1.42-3.16 3.16-3.16 3.16 1.4 3.16 3.16z"/><path class="cls-5" d="m28.22 26.14c0 1.12-0.92 2.04-2.04 2.04s-2.04-0.92-2.04-2.04 0.92-2.04 2.04-2.04 2.04 0.91 2.04 2.04z"/><path class="cls-5" d="m19.93 35.51c0 0.91-4.19 6.65-4.19 6.65-0.63 0-1.14-7.04-1.14-7.04 0-0.91 4.32-7.05 4.32-7.05"/><path class="cls-5" d="m32.13 35.82c0 0.91 3.63 6.65 3.63 6.65 0.54 0 0.99-7.03 0.99-7.03 0-0.81-2.98-5.78-3.59-6.81-0.08-0.12-0.12-0.19-0.12-0.19"/><path class="cls-5" d="m23.28 37.93c-0.01 0.09-0.03 0.2-0.03 0.32 0.05 1.6 2.22 4.43 2.92 4.45 0.91 0 2.59-3.3 2.7-4.77"/><path class="cls-5" d="m23.39 38.09c-0.04 0.05-0.08 0.09-0.13 0.16-1.01 1.28-1.95 4.31-1.49 5.84 0.34 1.1 3.18 3 4.41 4.15 0.22 0.2 0.54 0.17 0.73-0.05 0.92-1.1 3.65-3.28 3.77-4.36 0.16-1.3-0.95-4.74-1.54-5.89"/><circle class="cls-2" cx="27.57" cy="15.25" r="1.07"/><circle class="cls-2" cx="27.1" cy="25" r=".71"/><line class="cls-4" x1="19.74" x2="32" y1="34.19" y2="34.19"/><path class="cls-4" d="m18.93 11.84c2.04-1.63 4.65-2.53 7.27-2.5 2.61 0.03 5.2 0.98 7.21 2.65"/></g><g transform="translate(0 -1.5051)"><path class="cls-3" transform="translate(60.18,36.57)" d="m23.268-7.7135q0 1.579-0.74413 3.1217-0.72598 1.5427-2.0509 2.6135-1.452 1.1616-3.3939 1.8149-1.9238 0.65338-4.6462 0.65338-2.9221 0-5.2633-0.54448-2.3231-0.54448-4.737-1.6153v-4.5011h0.25409q2.0509 1.706 4.737 2.6317 2.6861 0.92562 5.0455 0.92562 3.3395 0 5.1907-1.2523 1.8694-1.2523 1.8694-3.3395 0-1.7968-0.88932-2.6498-0.87117-0.85302-2.668-1.3249-1.3612-0.36299-2.9584-0.59893-1.579-0.23594-3.3576-0.59893-3.5936-0.76228-5.3359-2.5954-1.7242-1.8512-1.7242-4.8096 0-3.3939 2.8676-5.5537 2.8676-2.1779 7.2779-2.1779 2.8495 0 5.227 0.54448t4.2107 1.3431v4.247h-0.25409q-1.5427-1.3068-4.0655-2.1598-2.5046-0.87117-5.1363-0.87117-2.8858 0-4.6463 1.1979-1.7423 1.1979-1.7423 3.0854 0 1.6879 0.87117 2.6498 0.87117 0.96192 3.0673 1.4701 1.1616 0.25409 3.3032 0.61708 2.1416 0.36299 3.6299 0.74413 3.0128 0.79857 4.5374 2.4139 1.5246 1.6153 1.5246 4.5192zm20.491 6.443q-1.706 0.81672-3.2487 1.2705-1.5246 0.45374-3.2487 0.45374-2.1961 0-4.0292-0.63523-1.8331-0.65338-3.1398-1.9601-1.3249-1.3068-2.0509-3.3032-0.72598-1.9964-0.72598-4.6644 0-4.9729 2.7224-7.8042 2.7406-2.8313 7.2235-2.8313 1.7423 0 3.4121 0.49003 1.6879 0.49003 3.0854 1.1979v3.7932h-0.18149q-1.5608-1.216-3.2306-1.8694-1.6516-0.65338-3.2306-0.65338-2.9039 0-4.5918 1.9601-1.6697 1.942-1.6697 5.7171 0 3.6662 1.6334 5.6445 1.6516 1.9601 4.6281 1.9601 1.0345 0 2.1053-0.27224 1.0708-0.27224 1.9238-0.70783 0.74413-0.38114 1.3975-0.79857 0.65338-0.43559 1.0345-0.74413h0.18149zm21.344-8.5121h-14.937q0 1.8694 0.56263 3.2669 0.56263 1.3794 1.5427 2.2687 0.94377 0.87117 2.2324 1.3068 1.3068 0.43559 2.8676 0.43559 2.069 0 4.1562-0.81672 2.1053-0.83487 2.9947-1.6334h0.18149v3.7206q-1.7242 0.72598-3.521 1.216-1.7968 0.49003-3.7751 0.49003-5.0455 0-7.8768-2.7224-2.8313-2.7406-2.8313-7.7679 0-4.9729 2.7043-7.895 2.7224-2.9221 7.1509-2.9221 4.1018 0 6.316 2.3957 2.2324 2.3957 2.2324 6.806zm-3.3213-2.6135q-0.01815-2.6861-1.3612-4.1562-1.3249-1.4701-4.0473-1.4701-2.7406 0-4.374 1.6153-1.6153 1.6153-1.8331 4.011zm25.445 12.396h-3.4121v-11.543q0-1.3975-0.16334-2.6135-0.16334-1.2342-0.59893-1.9238-0.45374-0.76228-1.3068-1.1253-0.85302-0.38114-2.2142-0.38114-1.3975 0-2.9221 0.68968-1.5246 0.68968-2.9221 1.7605v15.137h-3.4121v-20.273h3.4121v2.2505q1.5971-1.3249 3.3032-2.069t3.5028-0.74413q3.285 0 5.0092 1.9783 1.7242 1.9783 1.7242 5.6989zm23.54-9.7825h-14.937q0 1.8694 0.56263 3.2669 0.56263 1.3794 1.5427 2.2687 0.94377 0.87117 2.2324 1.3068 1.3068 0.43559 2.8676 0.43559 2.069 0 4.1562-0.81672 2.1053-0.83487 2.9946-1.6334h0.1815v3.7206q-1.7242 0.72598-3.521 1.216-1.7968 0.49003-3.7751 0.49003-5.0455 0-7.8768-2.7224-2.8313-2.7406-2.8313-7.7679 0-4.9729 2.7043-7.895 2.7224-2.9221 7.1509-2.9221 4.1018 0 6.316 2.3957 2.2324 2.3957 2.2324 6.806zm-3.3214-2.6135q-0.0181-2.6861-1.3612-4.1562-1.3249-1.4701-4.0473-1.4701-2.7406 0-4.374 1.6153-1.6153 1.6153-1.8331 4.011zm21.144-4.1562h-0.18149q-0.76228-0.18149-1.4882-0.25409-0.70783-0.09075-1.6879-0.09075-1.579 0-3.0491 0.70783-1.4701 0.68968-2.8313 1.7968v14.392h-3.4121v-20.273h3.4121v2.9947q2.0327-1.6334 3.5754-2.305 1.5608-0.68968 3.1761-0.68968 0.88932 0 1.2886 0.05445 0.39929 0.0363 1.1979 0.16334zm20.745-3.7206-11.833 27.75h-3.648l3.7751-8.4576-8.0765-19.293h3.7025l6.2252 15.028 6.2797-15.028zm24.375 12.559q0 1.579-0.74413 3.1217-0.72597 1.5427-2.0509 2.6135-1.452 1.1616-3.3939 1.8149-1.9238 0.65338-4.6462 0.65338-2.9221 0-5.2633-0.54448-2.3231-0.54448-4.737-1.6153v-4.5011h0.25409q2.0509 1.706 4.737 2.6317 2.6861 0.92562 5.0455 0.92562 3.3395 0 5.1907-1.2523 1.8694-1.2523 1.8694-3.3395 0-1.7968-0.88932-2.6498-0.87117-0.85302-2.668-1.3249-1.3612-0.36299-2.9584-0.59893-1.579-0.23594-3.3576-0.59893-3.5936-0.76228-5.3359-2.5954-1.7242-1.8512-1.7242-4.8096 0-3.3939 2.8676-5.5537 2.8676-2.1779 7.2779-2.1779 2.8495 0 5.227 0.54448t4.2107 1.3431v4.247h-0.25409q-1.5427-1.3068-4.0655-2.1598-2.5046-0.87117-5.1363-0.87117-2.8858 0-4.6462 1.1979-1.7423 1.1979-1.7423 3.0854 0 1.6879 0.87117 2.6498t3.0672 1.4701q1.1616 0.25409 3.3032 0.61708 2.1416 0.36299 3.6299 0.74413 3.0128 0.79857 4.5374 2.4139 1.5246 1.6153 1.5246 4.5192zm16.026 7.532q-0.96192 0.25409-2.1053 0.41744-1.1253 0.16334-2.0146 0.16334-3.1035 0-4.7188-1.6697-1.6153-1.6697-1.6153-5.3541v-10.781h-2.305v-2.8676h2.305v-5.826h3.4121v5.826h7.042v2.8676h-7.042v9.2381q0 1.5971 0.0726 2.5046 0.0726 0.88932 0.50818 1.6697 0.39929 0.72598 1.089 1.0708 0.70782 0.32669 2.1416 0.32669 0.83487 0 1.7423-0.23594 0.90747-0.25409 1.3068-0.41744h0.18149zm19.874 0.18149h-3.3939v-2.1598q-0.45374 0.30854-1.2342 0.87117-0.76228 0.54448-1.4882 0.87117-0.85303 0.41744-1.9601 0.68968-1.1071 0.29039-2.5954 0.29039-2.7406 0-4.6462-1.8149-1.9057-1.8149-1.9057-4.6281 0-2.305 0.98006-3.7206 0.99822-1.4338 2.8313-2.2505 1.8512-0.81672 4.4466-1.1071 2.5954-0.29039 5.5719-0.43559v-0.52633q0-1.1616-0.41744-1.9238-0.39929-0.76228-1.1616-1.1979-0.72598-0.41744-1.7423-0.56263-1.0164-0.1452-2.1235-0.1452-1.343 0-2.9946 0.36299-1.6516 0.34484-3.4121 1.0164h-0.18149v-3.4665q0.99821-0.27224 2.8858-0.59893 1.8875-0.32669 3.7206-0.32669 2.1416 0 3.7206 0.36299 1.5972 0.34484 2.7587 1.1979 1.1434 0.83487 1.7424 2.1598t0.59893 3.285zm-3.3939-4.9911v-5.6445q-1.5608 0.09075-3.6843 0.27224-2.1053 0.18149-3.3395 0.52633-1.4701 0.41744-2.3776 1.3068-0.90747 0.87117-0.90747 2.4139 0 1.7423 1.0527 2.6317 1.0527 0.87117 3.2124 0.87117 1.7968 0 3.285-0.68968 1.4882-0.70783 2.7587-1.6879zm24.955 3.7206q-1.706 0.81672-3.2488 1.2705-1.5246 0.45374-3.2487 0.45374-2.1961 0-4.0292-0.63523-1.8331-0.65338-3.1398-1.9601-1.3249-1.3068-2.0509-3.3032-0.72598-1.9964-0.72598-4.6644 0-4.9729 2.7224-7.8042 2.7406-2.8313 7.2235-2.8313 1.7423 0 3.4121 0.49003 1.6879 0.49003 3.0854 1.1979v3.7932h-0.18149q-1.5608-1.216-3.2306-1.8694-1.6516-0.65338-3.2306-0.65338-2.9039 0-4.5918 1.9601-1.6697 1.942-1.6697 5.7171 0 3.6662 1.6334 5.6445 1.6516 1.9601 4.6281 1.9601 1.0345 0 2.1053-0.27224 1.0708-0.27224 1.9238-0.70783 0.74413-0.38114 1.3975-0.79857 0.65338-0.43559 1.0345-0.74413h0.18149zm22.778 1.2705h-4.5011l-8.1309-8.8751-2.2142 2.1053v6.7697h-3.4121v-28.24h3.4121v18.113l9.8551-10.146h4.3014l-9.4196 9.3651z" fill="#1f3151" aria-label="SceneryStack"/><path transform="translate(-386.48 -527.99)" d="m462.04 528.91h-1.9336v-12.529l-4.043 8.5254h-1.1523l-4.0137-8.5254v12.529h-1.8066v-14.541h2.6367l3.877 8.0957 3.75-8.0957h2.6855zm12.236 0h-1.8262v-1.1621q-0.24414 0.16601-0.66406 0.46875-0.41016 0.29296-0.80079 0.46875-0.45898 0.22461-1.0547 0.37109-0.59571 0.15625-1.3965 0.15625-1.4746 0-2.5-0.97656-1.0254-0.97657-1.0254-2.4902 0-1.2402 0.52735-2.002 0.53711-0.77148 1.5234-1.2109 0.9961-0.43945 2.3926-0.5957 1.3965-0.15625 2.998-0.23438v-0.2832q0-0.625-0.22461-1.0352-0.21484-0.41015-0.625-0.64453-0.39063-0.22461-0.9375-0.30273-0.54688-0.0781-1.1426-0.0781-0.72266 0-1.6113 0.19532-0.88867 0.18554-1.8359 0.54687h-0.0977v-1.8652q0.53711-0.14649 1.5527-0.32227 1.0156-0.17578 2.002-0.17578 1.1523 0 2.002 0.19531 0.85937 0.18555 1.4844 0.64453 0.61524 0.44922 0.9375 1.1621 0.32227 0.71289 0.32227 1.7676zm-1.8262-2.6856v-3.0371q-0.83985 0.0488-1.9824 0.14648-1.1328 0.0977-1.7969 0.28321-0.79101 0.22461-1.2793 0.70312-0.48828 0.46875-0.48828 1.2988 0 0.9375 0.56641 1.416 0.56641 0.46875 1.7285 0.46875 0.96679 0 1.7676-0.3711 0.80078-0.38086 1.4844-0.9082zm14.209 2.6856h-1.8359v-1.1426q-0.79102 0.68359-1.6504 1.0644-0.85937 0.38086-1.8652 0.38086-1.9531 0-3.1055-1.5039-1.1426-1.5039-1.1426-4.1699 0-1.3867 0.39063-2.4707 0.40039-1.084 1.0742-1.8457 0.66406-0.74219 1.543-1.1328 0.88867-0.39062 1.8359-0.39062 0.85938 0 1.5234 0.18554 0.66406 0.17579 1.3965 0.55665v-4.7266h1.8359zm-1.8359-2.6856v-6.2598q-0.74219-0.33203-1.3281-0.45898t-1.2793-0.12695q-1.543 0-2.4023 1.0742-0.85938 1.0742-0.85938 3.0469 0 1.9434 0.66407 2.959 0.66406 1.0059 2.1289 1.0059 0.78125 0 1.582-0.34179 0.80079-0.35157 1.4942-0.89844zm14.58-2.5781h-8.0371q0 1.0059 0.30274 1.7578 0.30273 0.74218 0.83008 1.2207 0.50781 0.46875 1.2012 0.70312 0.70312 0.23438 1.543 0.23438 1.1133 0 2.2363-0.43945 1.1328-0.44922 1.6113-0.87891h0.0977v2.002q-0.92773 0.39063-1.8945 0.6543t-2.0312 0.26367q-2.7148 0-4.2383-1.4648-1.5234-1.4746-1.5234-4.1797 0-2.6758 1.4551-4.248 1.4648-1.5723 3.8476-1.5723 2.207 0 3.3984 1.2891 1.2012 1.2891 1.2012 3.6621zm-1.7871-1.4062q-0.01-1.4453-0.73242-2.2363-0.71289-0.79102-2.1777-0.79102-1.4746 0-2.3535 0.86914-0.86914 0.86914-0.98633 2.1582zm25.322-4.2383-2.8418 10.908h-1.6992l-2.8027-8.4082-2.7832 8.4082h-1.6895l-2.8711-10.908h1.9141l2.002 8.4473 2.7246-8.4473h1.5137l2.793 8.4473 1.8945-8.4473zm4.6191-1.8262h-2.0703v-1.9043h2.0703zm-0.11719 12.734h-1.8359v-10.908h1.8359zm9.2969-0.0977q-0.51758 0.13672-1.1328 0.22461-0.60547 0.0879-1.084 0.0879-1.6699 0-2.5391-0.89844t-0.86914-2.8809v-5.8008h-1.2402v-1.543h1.2402v-3.1348h1.8359v3.1348h3.7891v1.543h-3.7891v4.9707q0 0.85938 0.0391 1.3477 0.0391 0.47852 0.27344 0.89844 0.21484 0.39062 0.58593 0.57617 0.38086 0.17578 1.1524 0.17578 0.44922 0 0.9375-0.12695 0.48828-0.13672 0.70312-0.22461h0.0977zm11.338 0.0977h-1.8359v-6.2109q0-0.75196-0.0879-1.4062-0.0879-0.66406-0.32227-1.0352-0.24414-0.41015-0.70312-0.60547-0.45898-0.20508-1.1914-0.20508-0.75195 0-1.5723 0.3711-0.82031 0.37109-1.5723 0.94726v8.1445h-1.8359v-15.195h1.8359v5.498q0.85938-0.71289 1.7774-1.1133 0.91796-0.40039 1.8848-0.40039 1.7676 0 2.6953 1.0644 0.92774 1.0644 0.92774 3.0664z" fill="#121c2f" fill-opacity=".75" style="white-space:pre" aria-label="Made with"/></g></g></g></svg>',VF=`data:image/svg+xml;base64,${btoa(EF)}`,Rb=new Image,kF=_n.createLock(Rb);Rb.onload=kF;Rb.src=VF;const CF={id:"made-with-scenerystack",name:null,copyright:null,getLinks:function(){return[]},logoOnBlackBackground:Nb,logoOnWhiteBackground:Rb};Gq.register("Brand",CF);class Ot extends js{static fromLayoutOrientation(e){return e==="horizontal"?Ot.HORIZONTAL:Ot.VERTICAL}constructor(e,t,n,s,r,a,o,l,h,c,f,g,v,A,P,w,T,D,M){super(),this.coordinate=e,this.centerCoordinate=t,this.minCoordinate=n,this.maxCoordinate=s,this.minSide=r,this.maxSide=a,this.minSize=o,this.maxSize=l,this.rectCoordinate=h,this.rectSize=c,this.flowBoxOrientation=f,this.size=g,this.line=v,this.preferredSize=A,this.localPreferredSize=P,this.sizable=w,this.ariaOrientation=f,this.modelToView=T,this.viewToModel=D,this.toVector=M}}Ot.HORIZONTAL=new Ot("x","centerX","minX","maxX","left","right","minWidth","maxWidth","rectX","rectWidth","horizontal","width","column","preferredWidth","localPreferredWidth","widthSizable",(i,e)=>i.modelToViewX(e),(i,e)=>i.viewToModelX(e),(i,e,t)=>new t(i,e,0,0));Ot.VERTICAL=new Ot("y","centerY","minY","maxY","top","bottom","minHeight","maxHeight","rectY","rectHeight","vertical","height","row","preferredHeight","localPreferredHeight","heightSizable",(i,e)=>i.modelToViewY(e),(i,e)=>i.viewToModelY(e),(i,e,t)=>new t(e,i,0,0));Ot.enumeration=new Sr(Ot,{phetioDocumentation:"Horizontal or vertical orientation"});Ot.HORIZONTAL.opposite=Ot.VERTICAL;Ot.VERTICAL.opposite=Ot.HORIZONTAL;const sr=new ui("InfiniteNumberIO",{valueType:"number",documentation:"PhET-iO Type for Javascript's number primitive type",toStateObject:i=>i===Number.POSITIVE_INFINITY?"POSITIVE_INFINITY":i===Number.NEGATIVE_INFINITY?"NEGATIVE_INFINITY":i,fromStateObject:i=>i==="POSITIVE_INFINITY"?Number.POSITIVE_INFINITY:i==="NEGATIVE_INFINITY"?Number.NEGATIVE_INFINITY:i,stateSchema:za.asValue("'POSITIVE_INFINITY'|'NEGATIVE_INFINITY'|number",{isValidValue:i=>i==="POSITIVE_INFINITY"||i==="NEGATIVE_INFINITY"||typeof i=="number"&&!isNaN(i)})}),DF={min:sr,max:sr};class qi{constructor(e,t){this._min=e,this._max=t}getMin(){return this._min}get min(){return this.getMin()}set min(e){this.setMin(e)}setMin(e){this._min=e}getMax(){return this._max}get max(){return this.getMax()}set max(e){this.setMax(e)}setMax(e){this._max=e}setMinMax(e,t){return this._min=e,this._max=t,this}set(e){return this.setMinMax(e.min,e.max),this}addValue(e){this._min=Math.min(this._min,e),this._max=Math.max(this._max,e)}withValue(e){return new qi(Math.min(this._min,e),Math.max(this._max,e))}copy(){return new qi(this._min,this._max)}getLength(){return this._max-this._min}getCenter(){return(this._max+this._min)/2}contains(e){return e>=this._min&&e<=this._max}containsRange(e){return this._min<=e.min&&this._max>=e.max}intersects(e){return this._max>=e.min&&e.max>=this._min}intersectsExclusive(e){return this._max>e.min&&e.max>this._min}union(e){return new qi(Math.min(this.min,e.min),Math.max(this.max,e.max))}intersection(e){return new qi(Math.max(this.min,e.min),Math.min(this.max,e.max))}includeRange(e){return this.setMinMax(Math.min(this.min,e.min),Math.max(this.max,e.max))}constrainRange(e){return this.setMinMax(Math.max(this.min,e.min),Math.min(this.max,e.max))}shifted(e){return new qi(this.min+e,this.max+e)}toString(){return`[Range (min:${this._min} max:${this._max})]`}constrainValue(e){return Math.min(Math.max(e,this._min),this._max)}times(e){return new qi(this._min*e,this._max*e)}multiply(e){return this.setMinMax(this._min*e,this._max*e),this}equals(e){return this.constructor===e.constructor&&this._min===e.min&&this._max===e.max}equalsEpsilon(e,t){return this.constructor===e.constructor&&Math.abs(this._min-e.min)<=t&&Math.abs(this._max-e.max)<=t}getNormalizedValue(e){return(e-this.min)/this.getLength()}expandNormalizedValue(e){return e*this.getLength()+this.min}get defaultValue(){throw new Error("defaultValue is undefined, did you mean to use RangeWithValue?")}toStateObject(){return{min:sr.toStateObject(this.min),max:sr.toStateObject(this.max)}}clampDelta(e,t){return e+t<this.min?this.min-e:e+t>this.max?this.max-e:t}static fromStateObject(e){return new qi(sr.fromStateObject(e.min),sr.fromStateObject(e.max))}}qi.RangeIO=new ui("RangeIO",{valueType:qi,documentation:'A range with "min" and "max" members.',stateSchema:DF,toStateObject:i=>i.toStateObject(),fromStateObject:i=>qi.fromStateObject(i)});qi.EVERYTHING=new qi(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY);qi.NOTHING=new qi(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);const ay=new Oe(0,0);class pt{constructor(e,t,n,s){this.minX=e,this.minY=t,this.maxX=n,this.maxY=s}getWidth(){return this.maxX-this.minX}get width(){return this.getWidth()}getHeight(){return this.maxY-this.minY}get height(){return this.getHeight()}getX(){return this.minX}get x(){return this.getX()}getY(){return this.minY}get y(){return this.getY()}getMinX(){return this.minX}getMinY(){return this.minY}getMaxX(){return this.maxX}getMaxY(){return this.maxY}getLeft(){return this.minX}get left(){return this.minX}getTop(){return this.minY}get top(){return this.minY}getRight(){return this.maxX}get right(){return this.maxX}getBottom(){return this.maxY}get bottom(){return this.maxY}getCenterX(){return(this.maxX+this.minX)/2}get centerX(){return this.getCenterX()}getCenterY(){return(this.maxY+this.minY)/2}get centerY(){return this.getCenterY()}getLeftTop(){return new Oe(this.minX,this.minY)}get leftTop(){return this.getLeftTop()}getCenterTop(){return new Oe(this.getCenterX(),this.minY)}get centerTop(){return this.getCenterTop()}getRightTop(){return new Oe(this.maxX,this.minY)}get rightTop(){return this.getRightTop()}getLeftCenter(){return new Oe(this.minX,this.getCenterY())}get leftCenter(){return this.getLeftCenter()}getCenter(){return new Oe(this.getCenterX(),this.getCenterY())}get center(){return this.getCenter()}getRightCenter(){return new Oe(this.maxX,this.getCenterY())}get rightCenter(){return this.getRightCenter()}getLeftBottom(){return new Oe(this.minX,this.maxY)}get leftBottom(){return this.getLeftBottom()}getCenterBottom(){return new Oe(this.getCenterX(),this.maxY)}get centerBottom(){return this.getCenterBottom()}getRightBottom(){return new Oe(this.maxX,this.maxY)}get rightBottom(){return this.getRightBottom()}isEmpty(){return this.getWidth()<0||this.getHeight()<0}isFinite(){return isFinite(this.minX)&&isFinite(this.minY)&&isFinite(this.maxX)&&isFinite(this.maxY)}hasNonzeroArea(){return this.getWidth()>0&&this.getHeight()>0}isValid(){return!this.isEmpty()&&this.isFinite()}closestPointTo(e){return this.containsCoordinates(e.x,e.y)?e:this.getConstrainedPoint(e)}closestBoundaryPointTo(e){if(this.containsCoordinates(e.x,e.y)){const t=e.x<this.centerX?this.minX:this.maxX,n=e.y<this.centerY?this.minY:this.maxY;return Math.abs(t-e.x)<Math.abs(n-e.y)?new Oe(t,e.y):new Oe(e.x,n)}else return this.getConstrainedPoint(e)}getConstrainedPoint(e){const t=Math.max(Math.min(e.x,this.maxX),this.x),n=Math.max(Math.min(e.y,this.maxY),this.y);return new Oe(t,n)}containsCoordinates(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}containsPoint(e){return this.containsCoordinates(e.x,e.y)}containsBounds(e){return this.minX<=e.minX&&this.maxX>=e.maxX&&this.minY<=e.minY&&this.maxY>=e.maxY}intersectsBounds(e){const t=Math.max(this.minX,e.minX),n=Math.max(this.minY,e.minY),s=Math.min(this.maxX,e.maxX),r=Math.min(this.maxY,e.maxY);return s-t>=0&&r-n>=0}minimumDistanceToPointSquared(e){const t=e.x<this.minX?this.minX:e.x>this.maxX?this.maxX:null,n=e.y<this.minY?this.minY:e.y>this.maxY?this.maxY:null;let s;if(t===null&&n===null)return 0;if(t===null)return s=n-e.y,s*s;if(n===null)return s=t-e.x,s*s;{const r=t-e.x,a=n-e.y;return r*r+a*a}}maximumDistanceToPointSquared(e){let t=e.x>this.getCenterX()?this.minX:this.maxX,n=e.y>this.getCenterY()?this.minY:this.maxY;return t-=e.x,n-=e.y,t*t+n*n}toString(){return`[x:(${this.minX},${this.maxX}),y:(${this.minY},${this.maxY})]`}equals(e){return this.minX===e.minX&&this.minY===e.minY&&this.maxX===e.maxX&&this.maxY===e.maxY}equalsEpsilon(e,t){t=t!==void 0?t:0;const n=this.isFinite(),s=e.isFinite();return n&&s?Math.abs(this.minX-e.minX)<t&&Math.abs(this.minY-e.minY)<t&&Math.abs(this.maxX-e.maxX)<t&&Math.abs(this.maxY-e.maxY)<t:n!==s?!1:this===e?!0:(isFinite(this.minX+e.minX)?Math.abs(this.minX-e.minX)<t:this.minX===e.minX)&&(isFinite(this.minY+e.minY)?Math.abs(this.minY-e.minY)<t:this.minY===e.minY)&&(isFinite(this.maxX+e.maxX)?Math.abs(this.maxX-e.maxX)<t:this.maxX===e.maxX)&&(isFinite(this.maxY+e.maxY)?Math.abs(this.maxY-e.maxY)<t:this.maxY===e.maxY)}copy(e){return e?e.set(this):Ls(this.minX,this.minY,this.maxX,this.maxY)}static create(e){return Ls(e.minX,e.minY,e.maxX,e.maxY)}union(e){return Ls(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}intersection(e){return Ls(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}withCoordinates(e,t){return Ls(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}withPoint(e){return this.withCoordinates(e.x,e.y)}withX(e){return this.copy().addX(e)}withY(e){return this.copy().addY(e)}withMinX(e){return Ls(e,this.minY,this.maxX,this.maxY)}withMinY(e){return Ls(this.minX,e,this.maxX,this.maxY)}withMaxX(e){return Ls(this.minX,this.minY,e,this.maxY)}withMaxY(e){return Ls(this.minX,this.minY,this.maxX,e)}roundedOut(){return Ls(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}roundedIn(){return Ls(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}transformed(e){return this.copy().transform(e)}dilated(e){return this.dilatedXY(e,e)}dilatedX(e){return Ls(this.minX-e,this.minY,this.maxX+e,this.maxY)}dilatedY(e){return Ls(this.minX,this.minY-e,this.maxX,this.maxY+e)}dilatedXY(e,t){return Ls(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}eroded(e){return this.dilated(-e)}erodedX(e){return this.dilatedX(-e)}erodedY(e){return this.dilatedY(-e)}erodedXY(e,t){return this.dilatedXY(-e,-t)}withOffsets(e,t,n,s){return Ls(this.minX-e,this.minY-t,this.maxX+n,this.maxY+s)}shiftedX(e){return Ls(this.minX+e,this.minY,this.maxX+e,this.maxY)}shiftedY(e){return Ls(this.minX,this.minY+e,this.maxX,this.maxY+e)}shiftedXY(e,t){return Ls(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}shifted(e){return this.shiftedXY(e.x,e.y)}blend(e,t){const n=1-t;return Ls(n*this.minX+t*e.minX,n*this.minY+t*e.minY,n*this.maxX+t*e.maxX,n*this.maxY+t*e.maxY)}setMinMax(e,t,n,s){return this.minX=e,this.minY=t,this.maxX=n,this.maxY=s,this}setMinX(e){return this.minX=e,this}setMinY(e){return this.minY=e,this}setMaxX(e){return this.maxX=e,this}setMaxY(e){return this.maxY=e,this}set(e){return this.setMinMax(e.minX,e.minY,e.maxX,e.maxY)}includeBounds(e){return this.setMinMax(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}constrainBounds(e){return this.setMinMax(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}addCoordinates(e,t){return this.setMinMax(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}addPoint(e){return this.addCoordinates(e.x,e.y)}addX(e){return this.minX=Math.min(e,this.minX),this.maxX=Math.max(e,this.maxX),this}addY(e){return this.minY=Math.min(e,this.minY),this.maxY=Math.max(e,this.maxY),this}roundOut(){return this.setMinMax(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}roundIn(){return this.setMinMax(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}transform(e){if(this.isEmpty())return this;if(e.isIdentity())return this;const t=this.minX,n=this.minY,s=this.maxX,r=this.maxY;return this.set(pt.NOTHING),this.addPoint(e.multiplyVector2(ay.setXY(t,n))),this.addPoint(e.multiplyVector2(ay.setXY(t,r))),this.addPoint(e.multiplyVector2(ay.setXY(s,n))),this.addPoint(e.multiplyVector2(ay.setXY(s,r))),this}dilate(e){return this.dilateXY(e,e)}dilateX(e){return this.setMinMax(this.minX-e,this.minY,this.maxX+e,this.maxY)}dilateY(e){return this.setMinMax(this.minX,this.minY-e,this.maxX,this.maxY+e)}dilateXY(e,t){return this.setMinMax(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}erode(e){return this.dilate(-e)}erodeX(e){return this.dilateX(-e)}erodeY(e){return this.dilateY(-e)}erodeXY(e,t){return this.dilateXY(-e,-t)}offset(e,t,n,s){return Ls(this.minX-e,this.minY-t,this.maxX+n,this.maxY+s)}shiftX(e){return this.setMinMax(this.minX+e,this.minY,this.maxX+e,this.maxY)}shiftY(e){return this.setMinMax(this.minX,this.minY+e,this.maxX,this.maxY+e)}shiftXY(e,t){return this.setMinMax(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}shift(e){return this.shiftXY(e.x,e.y)}getXRange(){return new qi(this.minX,this.maxX)}setXRange(e){return this.setMinMax(e.min,this.minY,e.max,this.maxY)}get xRange(){return this.getXRange()}set xRange(e){this.setXRange(e)}getYRange(){return new qi(this.minY,this.maxY)}setYRange(e){return this.setMinMax(this.minX,e.min,this.maxX,e.max)}get yRange(){return this.getYRange()}set yRange(e){this.setYRange(e)}getClosestPoint(e,t,n){return n?n.setXY(e,t):n=new Oe(e,t),n.x<this.minX&&(n.x=this.minX),n.x>this.maxX&&(n.x=this.maxX),n.y<this.minY&&(n.y=this.minY),n.y>this.maxY&&(n.y=this.maxY),n}freeToPool(){pt.pool.freeToPool(this)}static rect(e,t,n,s){return Ls(e,t,e+n,t+s)}static oriented(e,t,n,s,r){return e===Ot.HORIZONTAL?new pt(t,n,s,r):new pt(n,t,r,s)}static point(e,t){if(e instanceof Oe){const n=e;return Ls(n.x,n.y,n.x,n.y)}else return Ls(e,t,e,t)}}pt.pool=new us(pt,{maxSize:1e3,initialize:pt.prototype.setMinMax,defaultArguments:[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]});pt.NOTHING=new pt(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);pt.EVERYTHING=new pt(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);pt.Bounds2IO=new ui("Bounds2IO",{valueType:pt,documentation:"a 2-dimensional bounds rectangle",toStateObject:i=>({minX:i.minX,minY:i.minY,maxX:i.maxX,maxY:i.maxY}),fromStateObject:i=>new pt(sr.fromStateObject(i.minX),sr.fromStateObject(i.minY),sr.fromStateObject(i.maxX),sr.fromStateObject(i.maxY)),stateSchema:{minX:sr,maxX:sr,minY:sr,maxY:sr}});const Ls=pt.pool.create.bind(pt.pool);pt.prototype.isBounds=!0;pt.prototype.dimension=2;function Bb(i,e,t){jt(i),jt(Array.isArray(e)),t&&(jt(Object.getPrototypeOf(t)===Object.prototype,"Extra prototype on options object is a code smell"),ie.each(e,n=>{jt(!t.hasOwnProperty(n)||t[n]!==void 0,`Undefined not allowed for key: ${n}`),t[n]!==void 0&&(i[n]=t[n])}))}function gr(i){const e=new Map;return t=>{if(e.has(t))return e.get(t);{const n=i(t);return e.set(t,n),n}}}const IF=["left","right","center","origin"],LF=["top","bottom","center","origin"],MF=["left","right","center"],OF=["top","bottom","center"];class wn extends js{constructor(e,t,n=Number.POSITIVE_INFINITY){super(),this.horizontal=e,this.vertical=t,this.padRatio=n}static getAllowedAligns(e){return[...e===Ot.HORIZONTAL?IF:LF,null]}static getAllowedRestrictedAligns(e){return[...e===Ot.HORIZONTAL?MF:OF,null]}static alignToInternal(e,t){return e===Ot.HORIZONTAL?wn.horizontalAlignToInternal(t):wn.verticalAlignToInternal(t)}static horizontalAlignToInternal(e){return e===null?null:NF[e]}static verticalAlignToInternal(e){return e===null?null:RF[e]}static internalToAlign(e,t){return t===null?null:e===Ot.HORIZONTAL?t.horizontal:t.vertical}}wn.START=new wn("left","top",0);wn.END=new wn("right","bottom",1);wn.CENTER=new wn("center","center",.5);wn.ORIGIN=new wn("origin","origin");wn.enumeration=new Sr(wn,{phetioDocumentation:"Alignment for layout containers"});const NF={left:wn.START,right:wn.END,center:wn.CENTER,origin:wn.ORIGIN},RF={top:wn.START,bottom:wn.END,center:wn.CENTER,origin:wn.ORIGIN},Na=function(i,...e){if(Yr()&&i){const t=e.map(n=>Object.keys(ie.pick(i,...n)));t.filter(n=>n.length>0).length>1&&jt(!1,`Cannot simultaneously specify ${t.join(" and ")}`)}},hI=["margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","minContentWidth","minContentHeight","maxContentWidth","maxContentHeight"],uI=gr(i=>class extends i{constructor(...t){super(...t),this._leftMargin=null,this._rightMargin=null,this._topMargin=null,this._bottomMargin=null,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter=new un}mutateConfigurable(t){Na(t,["margin"],["xMargin","yMargin"]),Na(t,["xMargin"],["leftMargin","rightMargin"]),Na(t,["yMargin"],["topMargin","bottomMargin"])}setConfigToBaseDefault(){this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter.emit()}setConfigToInherit(t){(!t||t.leftMargin===void 0)&&(this._leftMargin=null),(!t||t.rightMargin===void 0)&&(this._rightMargin=null),(!t||t.topMargin===void 0)&&(this._topMargin=null),(!t||t.bottomMargin===void 0)&&(this._bottomMargin=null),(!t||t.minContentWidth===void 0)&&(this._minContentWidth=null),(!t||t.minContentHeight===void 0)&&(this._minContentHeight=null),(!t||t.maxContentWidth===void 0)&&(this._maxContentWidth=null),(!t||t.maxContentHeight===void 0)&&(this._maxContentHeight=null),this.changedEmitter.emit()}get leftMargin(){return this._leftMargin}set leftMargin(t){this._leftMargin!==t&&(this._leftMargin=t,this.changedEmitter.emit())}get rightMargin(){return this._rightMargin}set rightMargin(t){this._rightMargin!==t&&(this._rightMargin=t,this.changedEmitter.emit())}get topMargin(){return this._topMargin}set topMargin(t){this._topMargin!==t&&(this._topMargin=t,this.changedEmitter.emit())}get bottomMargin(){return this._bottomMargin}set bottomMargin(t){this._bottomMargin!==t&&(this._bottomMargin=t,this.changedEmitter.emit())}get xMargin(){return this._leftMargin}set xMargin(t){(this._leftMargin!==t||this._rightMargin!==t)&&(this._leftMargin=t,this._rightMargin=t,this.changedEmitter.emit())}get yMargin(){return this._topMargin}set yMargin(t){(this._topMargin!==t||this._bottomMargin!==t)&&(this._topMargin=t,this._bottomMargin=t,this.changedEmitter.emit())}get margin(){return this._topMargin}set margin(t){(this._leftMargin!==t||this._rightMargin!==t||this._topMargin!==t||this._bottomMargin!==t)&&(this._leftMargin=t,this._rightMargin=t,this._topMargin=t,this._bottomMargin=t,this.changedEmitter.emit())}get minContentWidth(){return this._minContentWidth}set minContentWidth(t){this._minContentWidth!==t&&(this._minContentWidth=t,this.changedEmitter.emit())}get minContentHeight(){return this._minContentHeight}set minContentHeight(t){this._minContentHeight!==t&&(this._minContentHeight=t,this.changedEmitter.emit())}get maxContentWidth(){return this._maxContentWidth}set maxContentWidth(t){this._maxContentWidth!==t&&(this._maxContentWidth=t,this.changedEmitter.emit())}get maxContentHeight(){return this._maxContentHeight}set maxContentHeight(t){this._maxContentHeight!==t&&(this._maxContentHeight=t,this.changedEmitter.emit())}}),yS=["orientation","align","cellAlign","stretch","grow"].concat(hI),cI=gr(i=>class extends uI(i){constructor(...t){super(...t),this._orientation=Ot.HORIZONTAL,this._align=null,this._cellAlign=null,this._stretch=null,this._grow=null,this.orientationChangedEmitter=new un}mutateConfigurable(t){super.mutateConfigurable(t),Bb(this,yS,t)}setConfigToBaseDefault(){this._align=wn.CENTER,this._cellAlign=wn.START,this._stretch=!1,this._grow=0,super.setConfigToBaseDefault()}setConfigToInherit(t){(!t||t.align===void 0)&&(this._align=null),(!t||t.cellAlign===void 0)&&(this._cellAlign=null),(!t||t.stretch===void 0)&&(this._stretch=null),(!t||t.grow===void 0)&&(this._grow=null),super.setConfigToInherit(t)}get orientation(){return this._orientation===Ot.HORIZONTAL?"horizontal":"vertical"}set orientation(t){const n=t==="horizontal"?Ot.HORIZONTAL:Ot.VERTICAL;this._orientation!==n&&(this._orientation=n,this.orientationChangedEmitter.emit(),this.changedEmitter.emit())}get align(){return wn.internalToAlign(this._orientation.opposite,this._align)}set align(t){const n=wn.alignToInternal(this._orientation.opposite,t);this._align!==n&&(this._align=n,this.changedEmitter.emit())}get cellAlign(){return wn.internalToAlign(this._orientation,this._cellAlign)}set cellAlign(t){const n=wn.alignToInternal(this._orientation,t);this._cellAlign!==n&&(this._cellAlign=n,this.changedEmitter.emit())}get stretch(){return this._stretch}set stretch(t){this._stretch!==t&&(this._stretch=t,this.changedEmitter.emit())}get grow(){return this._grow}set grow(t){this._grow!==t&&(this._grow=t,this.changedEmitter.emit())}});class dI{initializeLayoutLine(){this.min=0,this.max=Number.POSITIVE_INFINITY,this.minOrigin=Number.POSITIVE_INFINITY,this.maxOrigin=Number.NEGATIVE_INFINITY,this.size=0,this.position=0}hasOrigin(){return isFinite(this.minOrigin)&&isFinite(this.maxOrigin)}}class wc extends dI{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return this.orientation=e,this.cells=t,this.initializeLayoutLine(),this}getMinimumSize(e){return(this.cells.length-1)*e+ie.sum(this.cells.map(t=>t.getMinimumSize(this.orientation)))}freeToPool(){wc.pool.freeToPool(this)}clean(){this.cells.length=0,this.freeToPool()}}wc.pool=new us(wc,{defaultArguments:[Ot.HORIZONTAL,[]]});const BF=["left","right","center","spaceBetween","spaceAround","spaceEvenly"],qF=["top","bottom","center","spaceBetween","spaceAround","spaceEvenly"];class Qn extends js{constructor(e,t,n){super(),this.spacingFunctionFactory=e,this.horizontal=t,this.vertical=n}static getAllowedJustificationValues(e){return e===Ot.HORIZONTAL?BF:qF}static justifyToInternal(e,t){return e===Ot.HORIZONTAL?zF[t]:FF[t]}static internalToJustify(e,t){return e===Ot.HORIZONTAL?t.horizontal:t.vertical}}Qn.START=new Qn(()=>()=>0,"left","top");Qn.END=new Qn(i=>e=>e===0?i:0,"right","bottom");Qn.CENTER=new Qn(i=>e=>e===0?i/2:0,"center","center");Qn.SPACE_BETWEEN=new Qn((i,e)=>t=>t!==0?i/(e-1):0,"spaceBetween","spaceBetween");Qn.SPACE_AROUND=new Qn((i,e)=>t=>(t!==0?2:1)*i/(2*e),"spaceAround","spaceAround");Qn.SPACE_EVENLY=new Qn((i,e)=>t=>i/(e+1),"spaceEvenly","spaceEvenly");Qn.enumeration=new Sr(Qn,{phetioDocumentation:"Justify for layout containers"});const zF={left:Qn.START,right:Qn.END,center:Qn.CENTER,spaceBetween:Qn.SPACE_BETWEEN,spaceAround:Qn.SPACE_AROUND,spaceEvenly:Qn.SPACE_EVENLY},FF={top:Qn.START,bottom:Qn.END,center:Qn.CENTER,spaceBetween:Qn.SPACE_BETWEEN,spaceAround:Qn.SPACE_AROUND,spaceEvenly:Qn.SPACE_EVENLY},qh=i=>i.widthSizable,Ym=i=>i.heightSizable,Fc=i=>i.extendsWidthSizable,jm=i=>i.extendsHeightSizable;class Ap{constructor(e){this.initialize(e)}initialize(e){return this.trail=e,this}checkPreconditions(){}get node(){return this.trail.lastNode()}get bounds(){return this.trail.parentToGlobalBounds(this.node.bounds)}get visibleBounds(){return this.trail.parentToGlobalBounds(this.node.visibleBounds)}get width(){return this.bounds.width}get height(){return this.bounds.height}get x(){return this.trail.getParentTransform().transformX(this.node.x)}set x(e){this.node.x=this.trail.getParentTransform().inverseX(e)}get y(){return this.trail.getParentTransform().transformY(this.node.y)}set y(e){this.node.y=this.trail.getParentTransform().inverseY(e)}get translation(){return this.trail.getParentTransform().transformPosition2(this.node.translation)}set translation(e){this.node.translation=this.trail.getParentTransform().inversePosition2(e)}get left(){return this.trail.getParentTransform().transformX(this.node.left)}set left(e){this.node.left=this.trail.getParentTransform().inverseX(e)}get right(){return this.trail.getParentTransform().transformX(this.node.right)}set right(e){this.node.right=this.trail.getParentTransform().inverseX(e)}get centerX(){return this.trail.getParentTransform().transformX(this.node.centerX)}set centerX(e){this.node.centerX=this.trail.getParentTransform().inverseX(e)}get top(){return this.trail.getParentTransform().transformY(this.node.top)}set top(e){this.node.top=this.trail.getParentTransform().inverseY(e)}get bottom(){return this.trail.getParentTransform().transformY(this.node.bottom)}set bottom(e){this.node.bottom=this.trail.getParentTransform().inverseY(e)}get centerY(){return this.trail.getParentTransform().transformY(this.node.centerY)}set centerY(e){this.node.centerY=this.trail.getParentTransform().inverseY(e)}get leftTop(){return this.trail.getParentTransform().transformPosition2(this.node.leftTop)}set leftTop(e){this.node.leftTop=this.trail.getParentTransform().inversePosition2(e)}get centerTop(){return this.trail.getParentTransform().transformPosition2(this.node.centerTop)}set centerTop(e){this.node.centerTop=this.trail.getParentTransform().inversePosition2(e)}get rightTop(){return this.trail.getParentTransform().transformPosition2(this.node.rightTop)}set rightTop(e){this.node.rightTop=this.trail.getParentTransform().inversePosition2(e)}get leftCenter(){return this.trail.getParentTransform().transformPosition2(this.node.leftCenter)}set leftCenter(e){this.node.leftCenter=this.trail.getParentTransform().inversePosition2(e)}get center(){return this.trail.getParentTransform().transformPosition2(this.node.center)}set center(e){this.node.center=this.trail.getParentTransform().inversePosition2(e)}get rightCenter(){return this.trail.getParentTransform().transformPosition2(this.node.rightCenter)}set rightCenter(e){this.node.rightCenter=this.trail.getParentTransform().inversePosition2(e)}get leftBottom(){return this.trail.getParentTransform().transformPosition2(this.node.leftBottom)}set leftBottom(e){this.node.leftBottom=this.trail.getParentTransform().inversePosition2(e)}get centerBottom(){return this.trail.getParentTransform().transformPosition2(this.node.centerBottom)}set centerBottom(e){this.node.centerBottom=this.trail.getParentTransform().inversePosition2(e)}get rightBottom(){return this.trail.getParentTransform().transformPosition2(this.node.rightBottom)}set rightBottom(e){this.node.rightBottom=this.trail.getParentTransform().inversePosition2(e)}get widthSizable(){return this.node.widthSizable}get heightSizable(){return this.node.heightSizable}isSizable(e){return e===Ot.HORIZONTAL?this.widthSizable:this.heightSizable}get minimumWidth(){const e=qh(this.node)?this.node.minimumWidth??0:this.node.width;return Math.abs(this.trail.getParentTransform().transformDeltaX(e))}get minimumHeight(){const e=Ym(this.node)?this.node.minimumHeight??0:this.node.height;return Math.abs(this.trail.getParentTransform().transformDeltaY(e))}getMinimum(e){return e===Ot.HORIZONTAL?this.minimumWidth:this.minimumHeight}get maxWidth(){return this.node.maxWidth===null?null:Math.abs(this.trail.getParentTransform().transformDeltaX(this.node.maxWidth))}set maxWidth(e){this.node.maxWidth=e===null?null:Math.abs(this.trail.getParentTransform().inverseDeltaX(e))}get maxHeight(){return this.node.maxHeight===null?null:Math.abs(this.trail.getParentTransform().transformDeltaY(this.node.maxHeight))}set maxHeight(e){this.node.maxHeight=e===null?null:Math.abs(this.trail.getParentTransform().inverseDeltaY(e))}getMax(e){return e===Ot.HORIZONTAL?this.maxWidth:this.maxHeight}attemptPreferredSize(e,t){if(this.isSizable(e))if(t===null)this.node[e.preferredSize]=null;else{t=Math.abs(this.trail.getParentTransform()[e===Ot.HORIZONTAL?"inverseDeltaX":"inverseDeltaY"](t));const n=this.getMinimum(e);t=Math.max(n,t);const s=this.getMax(e);s!==null&&(t=Math.min(s,t)),this.node[e.preferredSize]=t}}get preferredWidth(){if(qh(this.node)){const e=this.node.preferredWidth;return e===null?null:Math.abs(this.trail.getParentTransform().transformDeltaX(e))}else return null}set preferredWidth(e){this.attemptPreferredSize(Ot.HORIZONTAL,e)}get preferredHeight(){if(Ym(this.node)){const e=this.node.preferredHeight;return e===null?null:Math.abs(this.trail.getParentTransform().transformDeltaY(e))}else return null}set preferredHeight(e){this.attemptPreferredSize(Ot.VERTICAL,e)}get visible(){return this.node.visible}set visible(e){this.node.visible=e}dispose(){this.trail=null,this.freeToPool()}freeToPool(){Ap.pool.freeToPool(this)}}Ap.pool=new us(Ap,{maxSize:1e3});class Oo{constructor(e){this._layoutLockCount=0,this._layoutAttemptDuringLock=!1,this._enabled=!0,this._listenedNodes=new Set,this.finishedLayoutEmitter=new un,this.ancestorNode=e,this._updateLayoutListener=this.updateLayoutAutomatically.bind(this)}addNode(e,t=!0){t&&(e._activeParentLayoutConstraint=this),e.boundsProperty.lazyLink(this._updateLayoutListener),e.visibleProperty.lazyLink(this._updateLayoutListener),Fc(e)&&(e.minimumWidthProperty.lazyLink(this._updateLayoutListener),e.isWidthResizableProperty.lazyLink(this._updateLayoutListener)),jm(e)&&(e.minimumHeightProperty.lazyLink(this._updateLayoutListener),e.isHeightResizableProperty.lazyLink(this._updateLayoutListener)),this._listenedNodes.add(e)}removeNode(e){e._activeParentLayoutConstraint===this&&(e._activeParentLayoutConstraint=null),e.boundsProperty.unlink(this._updateLayoutListener),e.visibleProperty.unlink(this._updateLayoutListener),Fc(e)&&(e.minimumWidthProperty.unlink(this._updateLayoutListener),e.isWidthResizableProperty.unlink(this._updateLayoutListener)),jm(e)&&(e.minimumHeightProperty.unlink(this._updateLayoutListener),e.isHeightResizableProperty.unlink(this._updateLayoutListener)),this._listenedNodes.delete(e)}layout(){}get isLocked(){return this._layoutLockCount>0}lock(){this._layoutLockCount++}unlock(){this._layoutLockCount--}validateLocalPreferredWidth(e){}validateLocalPreferredHeight(e){}validateLocalPreferredSize(e){}updateLayout(){if(this.isLocked)this._layoutAttemptDuringLock=!0;else{this.lock();do this._layoutAttemptDuringLock=!1,this.layout();while(this._layoutAttemptDuringLock);this.unlock()}}updateLayoutAutomatically(){this._enabled&&this.updateLayout()}createLayoutProxy(e){const t=e.getTrails(n=>n===this.ancestorNode);return t.length===1?Ap.pool.create(t[0].removeAncestor()):null}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.updateLayoutAutomatically())}dispose(){const e=[...this._listenedNodes.keys()];for(let t=0;t<e.length;t++)this.removeNode(e[t]);this.finishedLayoutEmitter.dispose()}}const Rx=1e-9;class pI extends Oo{constructor(e,t){const n=Ne()({preferredWidthProperty:new oi(null),preferredHeightProperty:new oi(null),minimumWidthProperty:new oi(null),minimumHeightProperty:new oi(null),layoutOriginProperty:new oi(Oe.ZERO)},t);super(e),this._excludeInvisible=!0,this.layoutBoundsProperty=new Mt(pt.NOTHING,{valueComparisonStrategy:"equalsFunction"}),this.preferredWidthProperty=n.preferredWidthProperty,this.preferredHeightProperty=n.preferredHeightProperty,this.minimumWidthProperty=n.minimumWidthProperty,this.minimumHeightProperty=n.minimumHeightProperty,this.layoutOriginProperty=n.layoutOriginProperty,this.preferredWidthProperty.lazyLink(this._updateLayoutListener),this.preferredHeightProperty.lazyLink(this._updateLayoutListener),this.layoutOriginProperty.lazyLink(this._updateLayoutListener)}filterLayoutCells(e){return e.filter(t=>t.isConnected()&&t.proxy.bounds.isValid()&&(!this.excludeInvisible||t.node.visible))}get excludeInvisible(){return this._excludeInvisible}set excludeInvisible(e){this._excludeInvisible!==e&&(this._excludeInvisible=e,this.updateLayoutAutomatically())}setProxyPreferredSize(e,t,n){t[e.preferredSize]=n}setProxyMinSide(e,t,n){Math.abs(t[e.minSide]-n)>Rx&&(t[e.minSide]=n)}setProxyOrigin(e,t,n){Math.abs(t[e.coordinate]-n)>Rx&&(t[e.coordinate]=n)}dispose(){this.preferredWidthProperty.unlink(this._updateLayoutListener),this.preferredHeightProperty.unlink(this._updateLayoutListener),this.layoutOriginProperty.unlink(this._updateLayoutListener),super.dispose()}}const fI=[...yS,"spacing","lineSpacing","justify","justifyLines","wrap","excludeInvisible"];class vS extends cI(pI){constructor(e,t){super(e,t),this.cells=[],this._justify=Qn.SPACE_BETWEEN,this._justifyLines=null,this._wrap=!1,this._spacing=0,this._lineSpacing=0,this.displayedCells=[],this.setConfigToBaseDefault(),this.mutateConfigurable(t),Bb(this,fI,t),this.changedEmitter.addListener(this._updateLayoutListener),this.orientationChangedEmitter.addListener(()=>this.cells.forEach(n=>{n.orientation=this.orientation}))}updateSeparatorVisibility(){let e=0;for(;e<this.cells.length;e++){const n=this.cells[e];if(n._isSeparator)n.node.visible=!1;else if(n.node.visible&&n.node.boundsProperty.value.isValid())break}let t=!1;for(let n=this.cells.length-1;n>e;n--){const s=this.cells[n];s._isSeparator?(s.node.visible=t,t=!1):s.node.visible&&s.node.boundsProperty.value.isValid()&&(t=!0)}}layout(){super.layout();const e=this._orientation,t=this._orientation.opposite;this.updateSeparatorVisibility();const n=this.filterLayoutCells(this.cells);if(this.displayedCells=n,!n.length){this.layoutBoundsProperty.value=pt.NOTHING,this.minimumWidthProperty.value=null,this.minimumHeightProperty.value=null;return}let s=this.getPreferredProperty(e).value;const r=this.getPreferredProperty(t).value,a=Math.max(...n.map(x=>x.getMinimumSize(e)||0));a>(s||Number.POSITIVE_INFINITY)&&(s=a);const o=[];if(this.wrap){let x=[],Z=s||Number.POSITIVE_INFINITY;for(;n.length;){const de=n.shift(),$=de.getMinimumSize(e);x.length===0?(x.push(de),Z-=$):this.spacing+$<=Z+1e-7?(x.push(de),Z-=this.spacing+$):(o.push(wc.pool.create(e,x)),Z=s||Number.POSITIVE_INFINITY,x=[de],Z-=$)}x.length&&o.push(wc.pool.create(e,x))}else o.push(wc.pool.create(e,n));o.forEach(x=>{x.cells.forEach(Z=>{if(x.min=Math.max(x.min,Z.getMinimumSize(t)),x.max=Math.min(x.max,Z.getMaximumSize(t)),Z.effectiveAlign===wn.ORIGIN){const de=Z.getOriginBounds();x.minOrigin=Math.min(de[t.minCoordinate],x.minOrigin),x.maxOrigin=Math.max(de[t.maxCoordinate],x.maxOrigin)}}),isFinite(x.minOrigin)&&isFinite(x.maxOrigin)?x.size=Math.max(x.min,x.maxOrigin-x.minOrigin):x.size=x.min});const l=Math.max(...o.map(x=>x.getMinimumSize(this.spacing))),h=ie.sum(o.map(x=>x.size))+(o.length-1)*this.lineSpacing,c=this.wrap?a:l,f=Math.max(l,s||0),g=Math.max(h,r||0),v=this.layoutOriginProperty.value[e.coordinate],A=this.layoutOriginProperty.value[e.opposite.coordinate];o.forEach(x=>{const Z=ie.sum(x.cells.map(Te=>Te.getMinimumSize(e))),de=this.spacing*(x.cells.length-1);let $=f-Z-de;x.cells.forEach(Te=>{Te.size=Te.getMinimumSize(e)});let me;for(;$>1e-7&&(me=x.cells.filter(Te=>Te.effectiveGrow!==0&&Te.size<Te.getMaximumSize(e)-1e-7)).length;){const Te=ie.sum(me.map(We=>We.effectiveGrow)),Re=Math.min(Math.min(...me.map(We=>(We.getMaximumSize(e)-We.size)/We.effectiveGrow)),$/Te);me.forEach(We=>{We.size+=Re*We.effectiveGrow}),$-=Re*Te}const ue=this._justify.spacingFunctionFactory($,x.cells.length);let Se=v;x.cells.forEach((Te,Re)=>{Se+=ue(Re),Re>0&&(Se+=this.spacing),Te.reposition(e,Te.size,Se,!0,0,Te.effectiveCellAlign),Se+=Te.size})});const P=g-h,w=(o[0].hasOrigin()?o[0].minOrigin:0)+A;let T=w;if(this._justifyLines===null)o.forEach(x=>{x.size+=P/o.length}),o.forEach(x=>{x.position=T,T+=x.size+this.lineSpacing});else{const x=this._justifyLines.spacingFunctionFactory(P,o.length);o.forEach((Z,de)=>{T+=x(de),Z.position=T,T+=Z.size+this.lineSpacing})}o.forEach(x=>x.cells.forEach(Z=>{Z.reposition(t,x.size,x.position,Z.effectiveStretch,-x.minOrigin,Z.effectiveAlign)}));const D=v,M=v+f,B=w,O=w+g;this.layoutBoundsProperty.value=pt.oriented(e,D,B,M,O),this.minimumWidthProperty.value=e===Ot.HORIZONTAL?c:h,this.minimumHeightProperty.value=e===Ot.HORIZONTAL?h:c,this.finishedLayoutEmitter.emit(),o.forEach(x=>x.clean())}get justify(){return Qn.internalToJustify(this._orientation,this._justify)}set justify(e){const t=Qn.justifyToInternal(this._orientation,e);this._justify!==t&&(this._justify=t,this.updateLayoutAutomatically())}get justifyLines(){return this._justifyLines===null?null:Qn.internalToJustify(this._orientation,this._justifyLines)}set justifyLines(e){const t=e===null?null:Qn.justifyToInternal(this._orientation.opposite,e);this._justifyLines!==t&&(this._justifyLines=t,this.updateLayoutAutomatically())}get wrap(){return this._wrap}set wrap(e){this._wrap!==e&&(this._wrap=e,this.updateLayoutAutomatically())}get spacing(){return this._spacing}set spacing(e){this._spacing!==e&&(this._spacing=e,this.updateLayoutAutomatically())}get lineSpacing(){return this._lineSpacing}set lineSpacing(e){this._lineSpacing!==e&&(this._lineSpacing=e,this.updateLayoutAutomatically())}insertCell(e,t){t.orientation=this.orientation,this.cells.splice(e,0,t),this.addNode(t.node),t.changedEmitter.addListener(this._updateLayoutListener),this.updateLayoutAutomatically()}removeCell(e){gs(this.cells,e),this.removeNode(e.node),e.changedEmitter.removeListener(this._updateLayoutListener),this.updateLayoutAutomatically()}getCellQuantity(){return this.cells.length}reorderCells(e,t,n){this.cells.splice(t,n-t+1,...e),this.updateLayoutAutomatically()}getPreferredProperty(e){return e===Ot.HORIZONTAL?this.preferredWidthProperty:this.preferredHeightProperty}dispose(){this.lock(),this.cells.forEach(e=>this.removeCell(e)),this.displayedCells=[],super.dispose(),this.unlock()}static create(e,t){return new vS(e,t)}}const K1=new ld("dot"),HF=(i,e)=>i.add(e);let Wn=class Fy{constructor(e,t,n){this.x=e,this.y=t,this.z=n}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.dot(this)}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceXYZ(e,t,n){const s=this.x-e,r=this.y-t,a=this.z-n;return Math.sqrt(s*s+r*r+a*a)}distanceSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}distanceSquaredXYZ(e,t,n){const s=this.x-e,r=this.y-t,a=this.z-n;return s*s+r*r+a*a}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}dotXYZ(e,t,n){return this.x*e+this.y*t+this.z*n}angleBetween(e){return Math.acos(Xn(this.normalized().dot(e.normalized()),-1,1))}equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}equalsEpsilon(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)}copy(e){return e?e.set(this):ka(this.x,this.y,this.z)}cross(e){return ka(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}normalized(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return ka(this.x/e,this.y/e,this.z/e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return ka(this.x*e,this.y*e,this.z*e)}times(e){return this.timesScalar(e)}componentTimes(e){return ka(this.x*e.x,this.y*e.y,this.z*e.z)}plus(e){return ka(this.x+e.x,this.y+e.y,this.z+e.z)}plusXYZ(e,t,n){return ka(this.x+e,this.y+t,this.z+n)}plusScalar(e){return ka(this.x+e,this.y+e,this.z+e)}minus(e){return ka(this.x-e.x,this.y-e.y,this.z-e.z)}minusXYZ(e,t,n){return ka(this.x-e,this.y-t,this.z-n)}minusScalar(e){return ka(this.x-e,this.y-e,this.z-e)}dividedScalar(e){return ka(this.x/e,this.y/e,this.z/e)}negated(){return ka(-this.x,-this.y,-this.z)}blend(e,t){return this.plus(e.minus(this).times(t))}average(e){return this.blend(e,.5)}static average(e){return ie.reduce(e,HF,new Fy(0,0,0)).divideScalar(e.length)}toString(){return`Vector3(${this.x}, ${this.y}, ${this.z})`}setXYZ(e,t,n){return this.x=e,this.y=t,this.z=n,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}set(e){return this.setXYZ(e.x,e.y,e.z)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXYZ(this.x+e.x,this.y+e.y,this.z+e.z)}addXYZ(e,t,n){return this.setXYZ(this.x+e,this.y+t,this.z+n)}addScalar(e){return this.setXYZ(this.x+e,this.y+e,this.z+e)}subtract(e){return this.setXYZ(this.x-e.x,this.y-e.y,this.z-e.z)}subtractXYZ(e,t,n){return this.setXYZ(this.x-e,this.y-t,this.z-n)}subtractScalar(e){return this.setXYZ(this.x-e,this.y-e,this.z-e)}multiplyScalar(e){return this.setXYZ(this.x*e,this.y*e,this.z*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXYZ(this.x*e.x,this.y*e.y,this.z*e.z)}divideScalar(e){return this.setXYZ(this.x/e,this.y/e,this.z/e)}negate(){return this.setXYZ(-this.x,-this.y,-this.z)}setCross(e){return this.setXYZ(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}normalize(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXYZ(ws(this.x),ws(this.y),ws(this.z))}toStateObject(){return{x:this.x,y:this.y,z:this.z}}freeToPool(){Fy.pool.freeToPool(this)}static slerp(e,t,n){return K1.Quaternion.slerp(new K1.Quaternion,K1.Quaternion.getRotationQuaternion(e,t),n).timesVector3(e)}static fromStateObject(e){return Fy.from(e)}static from(e){return ka(e.x||0,e.y||0,e.z||0)}};Wn.pool=new us(Wn,{maxSize:1e3,initialize:Wn.prototype.setXYZ,defaultArguments:[0,0,0]});Wn.ZERO=new Wn(0,0,0);Wn.X_UNIT=new Wn(1,0,0);Wn.Y_UNIT=new Wn(0,1,0);Wn.Z_UNIT=new Wn(0,0,1);Wn.prototype.isVector3=!0;Wn.prototype.dimension=3;const ka=Wn.pool.create.bind(Wn.pool);class Sf extends Wn{static mutableOverrideHelper(e){Sf.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector3`)}}}Sf.mutableOverrideHelper("setXYZ");Sf.mutableOverrideHelper("setX");Sf.mutableOverrideHelper("setY");Sf.mutableOverrideHelper("setZ");Wn.Vector3IO=new ui("Vector3IO",{valueType:Wn,documentation:"Basic 3-dimensional vector, represented as (x,y,z)",toStateObject:i=>i.toStateObject(),fromStateObject:i=>Wn.fromStateObject(i),stateSchema:{x:Ii,y:Ii,z:Ii}});let Bs=class w2{constructor(e,t,n,s){this.x=e,this.y=t,this.z=n,this.w=s}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.dot(this)}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return this.minus(e).magnitude}distanceXYZW(e,t,n,s){const r=this.x-e,a=this.y-t,o=this.z-n,l=this.w-s;return Math.sqrt(r*r+a*a+o*o+l*l)}distanceSquared(e){return this.minus(e).magnitudeSquared}distanceSquaredXYZW(e,t,n,s){const r=this.x-e,a=this.y-t,o=this.z-n,l=this.w-s;return r*r+a*a+o*o+l*l}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}dotXYZW(e,t,n,s){return this.x*e+this.y*t+this.z*n+this.w*s}angleBetween(e){return Math.acos(Xn(this.normalized().dot(e.normalized()),-1,1))}equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}equalsEpsilon(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)+Math.abs(this.w-e.w)<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)&&isFinite(this.w)}copy(e){return e?e.set(this):_o(this.x,this.y,this.z,this.w)}normalized(){const e=this.magnitude;return this.dividedScalar(e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return _o(this.x*e,this.y*e,this.z*e,this.w*e)}times(e){return this.timesScalar(e)}componentTimes(e){return _o(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}plus(e){return _o(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}plusXYZW(e,t,n,s){return _o(this.x+e,this.y+t,this.z+n,this.w+s)}plusScalar(e){return _o(this.x+e,this.y+e,this.z+e,this.w+e)}minus(e){return _o(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}minusXYZW(e,t,n,s){return _o(this.x-e,this.y-t,this.z-n,this.w-s)}minusScalar(e){return _o(this.x-e,this.y-e,this.z-e,this.w-e)}dividedScalar(e){return _o(this.x/e,this.y/e,this.z/e,this.w/e)}negated(){return _o(-this.x,-this.y,-this.z,-this.w)}blend(e,t){return this.plus(e.minus(this).times(t))}average(e){return this.blend(e,.5)}toString(){return`Vector4(${this.x}, ${this.y}, ${this.z}, ${this.w})`}setXYZW(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}set(e){return this.setXYZW(e.x,e.y,e.z,e.w)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXYZW(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}addXYZW(e,t,n,s){return this.setXYZW(this.x+e,this.y+t,this.z+n,this.w+s)}addScalar(e){return this.setXYZW(this.x+e,this.y+e,this.z+e,this.w+e)}subtract(e){return this.setXYZW(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}subtractXYZW(e,t,n,s){return this.setXYZW(this.x-e,this.y-t,this.z-n,this.w-s)}subtractScalar(e){return this.setXYZW(this.x-e,this.y-e,this.z-e,this.w-e)}multiplyScalar(e){return this.setXYZW(this.x*e,this.y*e,this.z*e,this.w*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXYZW(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}divideScalar(e){return this.setXYZW(this.x/e,this.y/e,this.z/e,this.w/e)}negate(){return this.setXYZW(-this.x,-this.y,-this.z,-this.w)}normalize(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXYZW(ws(this.x),ws(this.y),ws(this.z),ws(this.w))}toStateObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}freeToPool(){w2.pool.freeToPool(this)}static fromStateObject(e){return w2.from(e)}static from(e,t=1){return _o(e.x||0,e.y||0,e.z||0,e.w||t)}};Bs.pool=new us(Bs,{maxSize:1e3,initialize:Bs.prototype.setXYZW,defaultArguments:[0,0,0,0]});Bs.ZERO=new Bs(0,0,0,0);Bs.X_UNIT=new Bs(1,0,0,0);Bs.Y_UNIT=new Bs(0,1,0,0);Bs.Z_UNIT=new Bs(0,0,1,0);Bs.W_UNIT=new Bs(0,0,0,1);Bs.prototype.isVector4=!0;Bs.prototype.dimension=4;const _o=Bs.pool.create.bind(Bs.pool);class hd extends Bs{static mutableOverrideHelper(e){hd.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector3`)}}}hd.mutableOverrideHelper("setXYZW");hd.mutableOverrideHelper("setX");hd.mutableOverrideHelper("setY");hd.mutableOverrideHelper("setZ");hd.mutableOverrideHelper("setW");const UF=self.Float32Array||Array;let Xm=class Os{constructor(e,t,n,s,r,a,o,l,h,c,f,g,v,A,P,w,T){this.entries=new UF(16),this.type=hn.OTHER,this.rowMajor(e!==void 0?e:1,t!==void 0?t:0,n!==void 0?n:0,s!==void 0?s:0,r!==void 0?r:0,a!==void 0?a:1,o!==void 0?o:0,l!==void 0?l:0,h!==void 0?h:0,c!==void 0?c:0,f!==void 0?f:1,g!==void 0?g:0,v!==void 0?v:0,A!==void 0?A:0,P!==void 0?P:0,w!==void 0?w:1,T)}rowMajor(e,t,n,s,r,a,o,l,h,c,f,g,v,A,P,w,T){return this.entries[0]=e,this.entries[1]=r,this.entries[2]=h,this.entries[3]=v,this.entries[4]=t,this.entries[5]=a,this.entries[6]=c,this.entries[7]=A,this.entries[8]=n,this.entries[9]=o,this.entries[10]=f,this.entries[11]=P,this.entries[12]=s,this.entries[13]=l,this.entries[14]=g,this.entries[15]=w,this.type=T===void 0?v===0&&A===0&&P===0&&w===1?hn.AFFINE:hn.OTHER:T,this}columnMajor(e,t,n,s,r,a,o,l,h,c,f,g,v,A,P,w,T){return this.rowMajor(e,r,h,v,t,a,c,A,n,o,f,P,s,l,g,w,T)}set(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m03(),e.m10(),e.m11(),e.m12(),e.m13(),e.m20(),e.m21(),e.m22(),e.m23(),e.m30(),e.m31(),e.m32(),e.m33(),e.type)}m00(){return this.entries[0]}m01(){return this.entries[4]}m02(){return this.entries[8]}m03(){return this.entries[12]}m10(){return this.entries[1]}m11(){return this.entries[5]}m12(){return this.entries[9]}m13(){return this.entries[13]}m20(){return this.entries[2]}m21(){return this.entries[6]}m22(){return this.entries[10]}m23(){return this.entries[14]}m30(){return this.entries[3]}m31(){return this.entries[7]}m32(){return this.entries[11]}m33(){return this.entries[15]}isIdentity(){return this.type===hn.IDENTITY||this.equals(Os.IDENTITY)}isFinite(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m03())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m13())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())&&isFinite(this.m23())&&isFinite(this.m30())&&isFinite(this.m31())&&isFinite(this.m32())&&isFinite(this.m33())}getTranslation(){return new Wn(this.m03(),this.m13(),this.m23())}get translation(){return this.getTranslation()}getScaleVector(){const e=this.m00()+this.m03(),t=this.m10()+this.m13(),n=this.m20()+this.m23(),s=this.m30()+this.m33(),r=this.m01()+this.m03(),a=this.m11()+this.m13(),o=this.m21()+this.m23(),l=this.m31()+this.m33(),h=this.m02()+this.m03(),c=this.m12()+this.m13(),f=this.m22()+this.m23(),g=this.m32()+this.m33();return new Wn(Math.sqrt(e*e+t*t+n*n+s*s),Math.sqrt(r*r+a*a+o*o+l*l),Math.sqrt(h*h+c*c+f*f+g*g))}get scaleVector(){return this.getScaleVector()}getCSSTransform(){return`matrix3d(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[2].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[5].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)},${this.entries[8].toFixed(20)},${this.entries[9].toFixed(20)},${this.entries[10].toFixed(20)},${this.entries[11].toFixed(20)},${this.entries[12].toFixed(20)},${this.entries[13].toFixed(20)},${this.entries[14].toFixed(20)},${this.entries[15].toFixed(20)})`}get cssTransform(){return this.getCSSTransform()}equals(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m03()===e.m03()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m13()===e.m13()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()&&this.m23()===e.m23()&&this.m30()===e.m30()&&this.m31()===e.m31()&&this.m32()===e.m32()&&this.m33()===e.m33()}equalsEpsilon(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m03()-e.m03())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m13()-e.m13())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t&&Math.abs(this.m23()-e.m23())<t&&Math.abs(this.m30()-e.m30())<t&&Math.abs(this.m31()-e.m31())<t&&Math.abs(this.m32()-e.m32())<t&&Math.abs(this.m33()-e.m33())<t}copy(){return new Os(this.m00(),this.m01(),this.m02(),this.m03(),this.m10(),this.m11(),this.m12(),this.m13(),this.m20(),this.m21(),this.m22(),this.m23(),this.m30(),this.m31(),this.m32(),this.m33(),this.type)}plus(e){return new Os(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m03()+e.m03(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m13()+e.m13(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22(),this.m23()+e.m23(),this.m30()+e.m30(),this.m31()+e.m31(),this.m32()+e.m32(),this.m33()+e.m33())}minus(e){return new Os(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m03()-e.m03(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m13()-e.m13(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22(),this.m23()-e.m23(),this.m30()-e.m30(),this.m31()-e.m31(),this.m32()-e.m32(),this.m33()-e.m33())}transposed(){return new Os(this.m00(),this.m10(),this.m20(),this.m30(),this.m01(),this.m11(),this.m21(),this.m31(),this.m02(),this.m12(),this.m22(),this.m32(),this.m03(),this.m13(),this.m23(),this.m33())}negated(){return new Os(-this.m00(),-this.m01(),-this.m02(),-this.m03(),-this.m10(),-this.m11(),-this.m12(),-this.m13(),-this.m20(),-this.m21(),-this.m22(),-this.m23(),-this.m30(),-this.m31(),-this.m32(),-this.m33())}inverted(){let e;switch(this.type){case hn.IDENTITY:return this;case hn.TRANSLATION_3D:return new Os(1,0,0,-this.m03(),0,1,0,-this.m13(),0,0,1,-this.m23(),0,0,0,1,hn.TRANSLATION_3D);case hn.SCALING:return new Os(1/this.m00(),0,0,0,0,1/this.m11(),0,0,0,0,1/this.m22(),0,0,0,0,1/this.m33(),hn.SCALING);case hn.AFFINE:case hn.OTHER:if(e=this.getDeterminant(),e!==0)return new Os((-this.m31()*this.m22()*this.m13()+this.m21()*this.m32()*this.m13()+this.m31()*this.m12()*this.m23()-this.m11()*this.m32()*this.m23()-this.m21()*this.m12()*this.m33()+this.m11()*this.m22()*this.m33())/e,(this.m31()*this.m22()*this.m03()-this.m21()*this.m32()*this.m03()-this.m31()*this.m02()*this.m23()+this.m01()*this.m32()*this.m23()+this.m21()*this.m02()*this.m33()-this.m01()*this.m22()*this.m33())/e,(-this.m31()*this.m12()*this.m03()+this.m11()*this.m32()*this.m03()+this.m31()*this.m02()*this.m13()-this.m01()*this.m32()*this.m13()-this.m11()*this.m02()*this.m33()+this.m01()*this.m12()*this.m33())/e,(this.m21()*this.m12()*this.m03()-this.m11()*this.m22()*this.m03()-this.m21()*this.m02()*this.m13()+this.m01()*this.m22()*this.m13()+this.m11()*this.m02()*this.m23()-this.m01()*this.m12()*this.m23())/e,(this.m30()*this.m22()*this.m13()-this.m20()*this.m32()*this.m13()-this.m30()*this.m12()*this.m23()+this.m10()*this.m32()*this.m23()+this.m20()*this.m12()*this.m33()-this.m10()*this.m22()*this.m33())/e,(-this.m30()*this.m22()*this.m03()+this.m20()*this.m32()*this.m03()+this.m30()*this.m02()*this.m23()-this.m00()*this.m32()*this.m23()-this.m20()*this.m02()*this.m33()+this.m00()*this.m22()*this.m33())/e,(this.m30()*this.m12()*this.m03()-this.m10()*this.m32()*this.m03()-this.m30()*this.m02()*this.m13()+this.m00()*this.m32()*this.m13()+this.m10()*this.m02()*this.m33()-this.m00()*this.m12()*this.m33())/e,(-this.m20()*this.m12()*this.m03()+this.m10()*this.m22()*this.m03()+this.m20()*this.m02()*this.m13()-this.m00()*this.m22()*this.m13()-this.m10()*this.m02()*this.m23()+this.m00()*this.m12()*this.m23())/e,(-this.m30()*this.m21()*this.m13()+this.m20()*this.m31()*this.m13()+this.m30()*this.m11()*this.m23()-this.m10()*this.m31()*this.m23()-this.m20()*this.m11()*this.m33()+this.m10()*this.m21()*this.m33())/e,(this.m30()*this.m21()*this.m03()-this.m20()*this.m31()*this.m03()-this.m30()*this.m01()*this.m23()+this.m00()*this.m31()*this.m23()+this.m20()*this.m01()*this.m33()-this.m00()*this.m21()*this.m33())/e,(-this.m30()*this.m11()*this.m03()+this.m10()*this.m31()*this.m03()+this.m30()*this.m01()*this.m13()-this.m00()*this.m31()*this.m13()-this.m10()*this.m01()*this.m33()+this.m00()*this.m11()*this.m33())/e,(this.m20()*this.m11()*this.m03()-this.m10()*this.m21()*this.m03()-this.m20()*this.m01()*this.m13()+this.m00()*this.m21()*this.m13()+this.m10()*this.m01()*this.m23()-this.m00()*this.m11()*this.m23())/e,(this.m30()*this.m21()*this.m12()-this.m20()*this.m31()*this.m12()-this.m30()*this.m11()*this.m22()+this.m10()*this.m31()*this.m22()+this.m20()*this.m11()*this.m32()-this.m10()*this.m21()*this.m32())/e,(-this.m30()*this.m21()*this.m02()+this.m20()*this.m31()*this.m02()+this.m30()*this.m01()*this.m22()-this.m00()*this.m31()*this.m22()-this.m20()*this.m01()*this.m32()+this.m00()*this.m21()*this.m32())/e,(this.m30()*this.m11()*this.m02()-this.m10()*this.m31()*this.m02()-this.m30()*this.m01()*this.m12()+this.m00()*this.m31()*this.m12()+this.m10()*this.m01()*this.m32()-this.m00()*this.m11()*this.m32())/e,(-this.m20()*this.m11()*this.m02()+this.m10()*this.m21()*this.m02()+this.m20()*this.m01()*this.m12()-this.m00()*this.m21()*this.m12()-this.m10()*this.m01()*this.m22()+this.m00()*this.m11()*this.m22())/e);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error(`Matrix4.inverted with unknown type: ${this.type}`)}}timesMatrix(e){if(this.type===hn.IDENTITY||e.type===hn.IDENTITY)return this.type===hn.IDENTITY?e:this;if(this.type===e.type){if(this.type===hn.TRANSLATION_3D)return new Os(1,0,0,this.m03()+e.m02(),0,1,0,this.m13()+e.m12(),0,0,1,this.m23()+e.m23(),0,0,0,1,hn.TRANSLATION_3D);if(this.type===hn.SCALING)return new Os(this.m00()*e.m00(),0,0,0,0,this.m11()*e.m11(),0,0,0,0,this.m22()*e.m22(),0,0,0,0,1,hn.SCALING)}return this.type!==hn.OTHER&&e.type!==hn.OTHER?new Os(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m00()*e.m03()+this.m01()*e.m13()+this.m02()*e.m23()+this.m03(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m10()*e.m03()+this.m11()*e.m13()+this.m12()*e.m23()+this.m13(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22(),this.m20()*e.m03()+this.m21()*e.m13()+this.m22()*e.m23()+this.m23(),0,0,0,1,hn.AFFINE):new Os(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20()+this.m03()*e.m30(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21()+this.m03()*e.m31(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22()+this.m03()*e.m32(),this.m00()*e.m03()+this.m01()*e.m13()+this.m02()*e.m23()+this.m03()*e.m33(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20()+this.m13()*e.m30(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21()+this.m13()*e.m31(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22()+this.m13()*e.m32(),this.m10()*e.m03()+this.m11()*e.m13()+this.m12()*e.m23()+this.m13()*e.m33(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20()+this.m23()*e.m30(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21()+this.m23()*e.m31(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22()+this.m23()*e.m32(),this.m20()*e.m03()+this.m21()*e.m13()+this.m22()*e.m23()+this.m23()*e.m33(),this.m30()*e.m00()+this.m31()*e.m10()+this.m32()*e.m20()+this.m33()*e.m30(),this.m30()*e.m01()+this.m31()*e.m11()+this.m32()*e.m21()+this.m33()*e.m31(),this.m30()*e.m02()+this.m31()*e.m12()+this.m32()*e.m22()+this.m33()*e.m32(),this.m30()*e.m03()+this.m31()*e.m13()+this.m32()*e.m23()+this.m33()*e.m33())}timesVector4(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z+this.m03()*e.w,n=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z+this.m13()*e.w,s=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z+this.m23()*e.w,r=this.m30()*e.x+this.m31()*e.y+this.m32()*e.z+this.m33()*e.w;return new Bs(t,n,s,r)}timesVector3(e){return Wn.from(this.timesVector4(Bs.from(e)))}timesTransposeVector4(e){const t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z+this.m30()*e.w,n=this.m01()*e.x+this.m11()*e.y+this.m21()*e.z+this.m31()*e.w,s=this.m02()*e.x+this.m12()*e.y+this.m22()*e.z+this.m32()*e.w,r=this.m03()*e.x+this.m13()*e.y+this.m23()*e.z+this.m33()*e.w;return new Bs(t,n,s,r)}timesTransposeVector3(e){return Wn.from(this.timesTransposeVector4(Bs.from(e)))}timesRelativeVector3(e){const t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z,n=this.m01()*e.y+this.m11()*e.y+this.m21()*e.z,s=this.m02()*e.z+this.m12()*e.y+this.m22()*e.z;return new Wn(t,n,s)}getDeterminant(){return this.m03()*this.m12()*this.m21()*this.m30()-this.m02()*this.m13()*this.m21()*this.m30()-this.m03()*this.m11()*this.m22()*this.m30()+this.m01()*this.m13()*this.m22()*this.m30()+this.m02()*this.m11()*this.m23()*this.m30()-this.m01()*this.m12()*this.m23()*this.m30()-this.m03()*this.m12()*this.m20()*this.m31()+this.m02()*this.m13()*this.m20()*this.m31()+this.m03()*this.m10()*this.m22()*this.m31()-this.m00()*this.m13()*this.m22()*this.m31()-this.m02()*this.m10()*this.m23()*this.m31()+this.m00()*this.m12()*this.m23()*this.m31()+this.m03()*this.m11()*this.m20()*this.m32()-this.m01()*this.m13()*this.m20()*this.m32()-this.m03()*this.m10()*this.m21()*this.m32()+this.m00()*this.m13()*this.m21()*this.m32()+this.m01()*this.m10()*this.m23()*this.m32()-this.m00()*this.m11()*this.m23()*this.m32()-this.m02()*this.m11()*this.m20()*this.m33()+this.m01()*this.m12()*this.m20()*this.m33()+this.m02()*this.m10()*this.m21()*this.m33()-this.m00()*this.m12()*this.m21()*this.m33()-this.m01()*this.m10()*this.m22()*this.m33()+this.m00()*this.m11()*this.m22()*this.m33()}get determinant(){return this.getDeterminant()}toString(){return`${this.m00()} ${this.m01()} ${this.m02()} ${this.m03()}
${this.m10()} ${this.m11()} ${this.m12()} ${this.m13()}
${this.m20()} ${this.m21()} ${this.m22()} ${this.m23()}
${this.m30()} ${this.m31()} ${this.m32()} ${this.m33()}`}makeImmutable(){return this}copyToArray(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m30(),e[4]=this.m01(),e[5]=this.m11(),e[6]=this.m21(),e[7]=this.m31(),e[8]=this.m02(),e[9]=this.m12(),e[10]=this.m22(),e[11]=this.m32(),e[12]=this.m03(),e[13]=this.m13(),e[14]=this.m23(),e[15]=this.m33(),e}static identity(){return new Os(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,hn.IDENTITY)}static translation(e,t,n){return new Os(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1,hn.TRANSLATION_3D)}static translationFromVector(e){return Os.translation(e.x,e.y,e.z)}static scaling(e,t,n){return t=t===void 0?e:t,n=n===void 0?e:n,new Os(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1,hn.SCALING)}static rotationAxisAngle(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n;return new Os(e.x*e.x*r+n,e.x*e.y*r-e.z*s,e.x*e.z*r+e.y*s,0,e.y*e.x*r+e.z*s,e.y*e.y*r+n,e.y*e.z*r-e.x*s,0,e.z*e.x*r-e.y*s,e.z*e.y*r+e.x*s,e.z*e.z*r+n,0,0,0,0,1,hn.AFFINE)}static rotationX(e){const t=Math.cos(e),n=Math.sin(e);return new Os(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1,hn.AFFINE)}static rotationY(e){const t=Math.cos(e),n=Math.sin(e);return new Os(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1,hn.AFFINE)}static rotationZ(e){const t=Math.cos(e),n=Math.sin(e);return new Os(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1,hn.AFFINE)}static gluPerspective(e,t,n,s){const r=Math.cos(e)/Math.sin(e);return new Os(r/t,0,0,0,0,r,0,0,0,0,(s+n)/(n-s),2*s*n/(n-s),0,0,-1,0)}};class hn extends js{}hn.OTHER=new hn;hn.IDENTITY=new hn;hn.TRANSLATION_3D=new hn;hn.SCALING=new hn;hn.AFFINE=new hn;hn.enumeration=new Sr(hn);Xm.Types=hn;Xm.IDENTITY=new Xm().makeImmutable();function En(i){return i.toFixed(20)}class qt extends js{}qt.OTHER=new qt;qt.IDENTITY=new qt;qt.TRANSLATION_2D=new qt;qt.SCALING=new qt;qt.AFFINE=new qt;qt.enumeration=new Sr(qt);let It=class Cl{constructor(){this.entries=[1,0,0,0,1,0,0,0,1],this.type=qt.IDENTITY}initialize(){return this}m00(){return this.entries[0]}m01(){return this.entries[3]}m02(){return this.entries[6]}m10(){return this.entries[1]}m11(){return this.entries[4]}m12(){return this.entries[7]}m20(){return this.entries[2]}m21(){return this.entries[5]}m22(){return this.entries[8]}isIdentity(){return this.type===qt.IDENTITY||this.equals(Cl.IDENTITY)}isFastIdentity(){return this.type===qt.IDENTITY}isTranslation(){return this.type===qt.TRANSLATION_2D||this.m00()===1&&this.m11()===1&&this.m22()===1&&this.m01()===0&&this.m10()===0&&this.m20()===0&&this.m21()===0}isAffine(){return this.type===qt.AFFINE||this.m20()===0&&this.m21()===0&&this.m22()===1}isAligned(){return this.isAffine()&&this.m01()===0&&this.m10()===0}isAxisAligned(){return this.isAffine()&&(this.m01()===0&&this.m10()===0||this.m00()===0&&this.m11()===0)}isFinite(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())}getDeterminant(){return this.m00()*this.m11()*this.m22()+this.m01()*this.m12()*this.m20()+this.m02()*this.m10()*this.m21()-this.m02()*this.m11()*this.m20()-this.m01()*this.m10()*this.m22()-this.m00()*this.m12()*this.m21()}get determinant(){return this.getDeterminant()}getTranslation(){return new Oe(this.m02(),this.m12())}get translation(){return this.getTranslation()}getScaleVector(){return new Oe(Math.sqrt(this.m00()*this.m00()+this.m10()*this.m10()),Math.sqrt(this.m01()*this.m01()+this.m11()*this.m11()))}get scaleVector(){return this.getScaleVector()}getSignedScale(){return this.m00()*this.m11()-this.m10()*this.m01()}getRotation(){return Math.atan2(this.m10(),this.m00())}get rotation(){return this.getRotation()}toMatrix4(){return new Xm(this.m00(),this.m01(),this.m02(),0,this.m10(),this.m11(),this.m12(),0,this.m20(),this.m21(),this.m22(),0,0,0,0,1)}toAffineMatrix4(){return new Xm(this.m00(),this.m01(),0,this.m02(),this.m10(),this.m11(),0,this.m12(),0,0,1,0,0,0,0,1)}toString(){return`${this.m00()} ${this.m01()} ${this.m02()}
${this.m10()} ${this.m11()} ${this.m12()}
${this.m20()} ${this.m21()} ${this.m22()}`}toSVGMatrix(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix();return e.a=this.m00(),e.b=this.m10(),e.c=this.m01(),e.d=this.m11(),e.e=this.m02(),e.f=this.m12(),e}getCSSTransform(){return`matrix(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)})`}get cssTransform(){return this.getCSSTransform()}getSVGTransform(){switch(this.type){case qt.IDENTITY:return"";case qt.TRANSLATION_2D:return`translate(${En(this.entries[6])},${En(this.entries[7])})`;case qt.SCALING:return`scale(${En(this.entries[0])}${this.entries[0]===this.entries[4]?"":`,${En(this.entries[4])}`})`;default:return`matrix(${En(this.entries[0])},${En(this.entries[1])},${En(this.entries[3])},${En(this.entries[4])},${En(this.entries[6])},${En(this.entries[7])})`}}get svgTransform(){return this.getSVGTransform()}getCSSTransformStyles(){const e=this.getCSSTransform();return{"-webkit-perspective":"1000","-webkit-backface-visibility":"hidden","-webkit-transform":`${e} translateZ(0)`,"-moz-transform":`${e} translateZ(0)`,"-ms-transform":e,"-o-transform":e,transform:e,"transform-origin":"top left","-ms-transform-origin":"top left"}}get cssTransformStyles(){return this.getCSSTransformStyles()}equals(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()}equalsEpsilon(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t}copy(){return _r(this.m00(),this.m01(),this.m02(),this.m10(),this.m11(),this.m12(),this.m20(),this.m21(),this.m22(),this.type)}plus(e){return _r(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}minus(e){return _r(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}transposed(){return _r(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===qt.IDENTITY||this.type===qt.SCALING?this.type:void 0)}negated(){return _r(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}inverted(){let e;switch(this.type){case qt.IDENTITY:return this;case qt.TRANSLATION_2D:return _r(1,0,-this.m02(),0,1,-this.m12(),0,0,1,qt.TRANSLATION_2D);case qt.SCALING:return _r(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),qt.SCALING);case qt.AFFINE:if(e=this.getDeterminant(),e!==0)return _r((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,qt.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case qt.OTHER:if(e=this.getDeterminant(),e!==0)return _r((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,qt.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error(`Matrix3.inverted with unknown type: ${this.type}`)}}timesMatrix(e){if(this.type===qt.IDENTITY||e.type===qt.IDENTITY)return this.type===qt.IDENTITY?e:this;if(this.type===e.type){if(this.type===qt.TRANSLATION_2D)return _r(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,qt.TRANSLATION_2D);if(this.type===qt.SCALING)return _r(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,qt.SCALING)}return this.type!==qt.OTHER&&e.type!==qt.OTHER?_r(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,qt.AFFINE):_r(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}timesVector2(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02(),n=this.m10()*e.x+this.m11()*e.y+this.m12();return new Oe(t,n)}timesVector3(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,n=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,s=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z;return new Wn(t,n,s)}timesTransposeVector2(e){const t=this.m00()*e.x+this.m10()*e.y,n=this.m01()*e.x+this.m11()*e.y;return new Oe(t,n)}timesRelativeVector2(e){const t=this.m00()*e.x+this.m01()*e.y,n=this.m10()*e.y+this.m11()*e.y;return new Oe(t,n)}rowMajor(e,t,n,s,r,a,o,l,h,c){return this.entries[0]=e,this.entries[1]=s,this.entries[2]=o,this.entries[3]=t,this.entries[4]=r,this.entries[5]=l,this.entries[6]=n,this.entries[7]=a,this.entries[8]=h,this.type=c===void 0?o===0&&l===0&&h===1?qt.AFFINE:qt.OTHER:c,this}set(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m10(),e.m11(),e.m12(),e.m20(),e.m21(),e.m22(),e.type)}setArray(e){return this.rowMajor(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}set00(e){return this.entries[0]=e,this}set01(e){return this.entries[3]=e,this}set02(e){return this.entries[6]=e,this}set10(e){return this.entries[1]=e,this}set11(e){return this.entries[4]=e,this}set12(e){return this.entries[7]=e,this}set20(e){return this.entries[2]=e,this}set21(e){return this.entries[5]=e,this}set22(e){return this.entries[8]=e,this}makeImmutable(){return this}columnMajor(e,t,n,s,r,a,o,l,h,c){return this.rowMajor(e,s,o,t,r,l,n,a,h,c)}add(e){return this.rowMajor(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}subtract(e){return this.rowMajor(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}transpose(){return this.rowMajor(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===qt.IDENTITY||this.type===qt.SCALING?this.type:void 0)}negate(){return this.rowMajor(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}invert(){let e;switch(this.type){case qt.IDENTITY:return this;case qt.TRANSLATION_2D:return this.rowMajor(1,0,-this.m02(),0,1,-this.m12(),0,0,1,qt.TRANSLATION_2D);case qt.SCALING:return this.rowMajor(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),qt.SCALING);case qt.AFFINE:if(e=this.getDeterminant(),e!==0)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,qt.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case qt.OTHER:if(e=this.getDeterminant(),e!==0)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,qt.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error(`Matrix3.inverted with unknown type: ${this.type}`)}}multiplyMatrix(e){if(e.type===qt.IDENTITY)return this;if(this.type===qt.IDENTITY)return this.set(e);if(this.type===e.type){if(this.type===qt.TRANSLATION_2D)return this.rowMajor(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,qt.TRANSLATION_2D);if(this.type===qt.SCALING)return this.rowMajor(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,qt.SCALING)}return this.type!==qt.OTHER&&e.type!==qt.OTHER?this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,qt.AFFINE):this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}prependTranslation(e,t){return this.set02(this.m02()+e),this.set12(this.m12()+t),this.type===qt.IDENTITY||this.type===qt.TRANSLATION_2D?this.type=qt.TRANSLATION_2D:this.type===qt.OTHER?this.type=qt.OTHER:this.type=qt.AFFINE,this}setToIdentity(){return this.rowMajor(1,0,0,0,1,0,0,0,1,qt.IDENTITY)}setToTranslation(e,t){return this.rowMajor(1,0,e,0,1,t,0,0,1,qt.TRANSLATION_2D)}setToScale(e,t){return t=t===void 0?e:t,this.rowMajor(e,0,0,0,t,0,0,0,1,qt.SCALING)}setToAffine(e,t,n,s,r,a){return this.rowMajor(e,t,n,s,r,a,0,0,1,qt.AFFINE)}setToRotationAxisAngle(e,t){let n=Math.cos(t),s=Math.sin(t);Math.abs(n)<1e-15&&(n=0),Math.abs(s)<1e-15&&(s=0);const r=1-n;return this.rowMajor(e.x*e.x*r+n,e.x*e.y*r-e.z*s,e.x*e.z*r+e.y*s,e.y*e.x*r+e.z*s,e.y*e.y*r+n,e.y*e.z*r-e.x*s,e.z*e.x*r-e.y*s,e.z*e.y*r+e.x*s,e.z*e.z*r+n,qt.OTHER)}setToRotationX(e){let t=Math.cos(e),n=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(n)<1e-15&&(n=0),this.rowMajor(1,0,0,0,t,-n,0,n,t,qt.OTHER)}setToRotationY(e){let t=Math.cos(e),n=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(n)<1e-15&&(n=0),this.rowMajor(t,0,n,0,1,0,-n,0,t,qt.OTHER)}setToRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(n)<1e-15&&(n=0),this.rowMajor(t,-n,0,n,t,0,0,0,1,qt.AFFINE)}setToTranslationRotation(e,t,n){let s=Math.cos(n),r=Math.sin(n);return Math.abs(s)<1e-15&&(s=0),Math.abs(r)<1e-15&&(r=0),this.rowMajor(s,-r,e,r,s,t,0,0,1,qt.AFFINE)}setToTranslationRotationPoint(e,t){return this.setToTranslationRotation(e.x,e.y,t)}setToScaleTranslationRotation(e,t,n,s){let r=Math.cos(s),a=Math.sin(s);return Math.abs(r)<1e-15&&(r=0),Math.abs(a)<1e-15&&(a=0),r*=e,a*=e,this.rowMajor(r,-a,t,a,r,n,0,0,1,qt.AFFINE)}setToScaleTranslationRotationPoint(e,t,n){return this.setToScaleTranslationRotation(e,t.x,t.y,n)}setToSVGMatrix(e){return this.rowMajor(e.a,e.c,e.e,e.b,e.d,e.f,0,0,1,qt.AFFINE)}setRotationAToB(e,t){const n=e,s=t,r=1e-4;let a=n.cross(s);const o=n.dot(s);if((o<0?-o:o)>1-r){let h=new Wn(n.x>0?n.x:-n.x,n.y>0?n.y:-n.y,n.z>0?n.z:-n.z);h.x<h.y?h.x<h.z?h=Wn.X_UNIT:h=Wn.Z_UNIT:h.y<h.z?h=Wn.Y_UNIT:h=Wn.Z_UNIT;const c=h.minus(n);a=h.minus(s);const f=2/c.dot(c),g=2/a.dot(a),v=f*g*c.dot(a);return this.rowMajor(-f*c.x*c.x-g*a.x*a.x+v*a.x*c.x+1,-f*c.x*c.y-g*a.x*a.y+v*a.x*c.y,-f*c.x*c.z-g*a.x*a.z+v*a.x*c.z,-f*c.y*c.x-g*a.y*a.x+v*a.y*c.x,-f*c.y*c.y-g*a.y*a.y+v*a.y*c.y+1,-f*c.y*c.z-g*a.y*a.z+v*a.y*c.z,-f*c.z*c.x-g*a.z*a.x+v*a.z*c.x,-f*c.z*c.y-g*a.z*a.y+v*a.z*c.y,-f*c.z*c.z-g*a.z*a.z+v*a.z*c.z+1)}else{const h=1/(1+o),c=h*a.x,f=h*a.z,g=c*a.y,v=c*a.z,A=f*a.y;return this.rowMajor(o+c*a.x,g-a.z,v+a.y,g+a.z,o+h*a.y*a.y,A-a.x,v-a.y,A+a.x,o+f*a.z)}}multiplyVector2(e){return e.setXY(this.m00()*e.x+this.m01()*e.y+this.m02(),this.m10()*e.x+this.m11()*e.y+this.m12())}multiplyVector3(e){return e.setXYZ(this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,this.m20()*e.x+this.m21()*e.y+this.m22()*e.z)}multiplyTransposeVector2(e){return e.setXY(this.m00()*e.x+this.m10()*e.y,this.m01()*e.x+this.m11()*e.y)}multiplyRelativeVector2(e){return e.setXY(this.m00()*e.x+this.m01()*e.y,this.m10()*e.y+this.m11()*e.y)}canvasSetTransform(e){e.setTransform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}canvasAppendTransform(e){this.type!==qt.IDENTITY&&e.transform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}copyToArray(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m01(),e[4]=this.m11(),e[5]=this.m21(),e[6]=this.m02(),e[7]=this.m12(),e[8]=this.m22(),e}freeToPool(){Cl.pool.freeToPool(this)}static identity(){return Ca().setToIdentity()}static translation(e,t){return Ca().setToTranslation(e,t)}static translationFromVector(e){return Cl.translation(e.x,e.y)}static scaling(e,t){return Ca().setToScale(e,t)}static scale(e,t){return Cl.scaling(e,t)}static affine(e,t,n,s,r,a){return Ca().setToAffine(e,t,n,s,r,a)}static rowMajor(e,t,n,s,r,a,o,l,h,c){return Ca().rowMajor(e,t,n,s,r,a,o,l,h,c)}static rotationAxisAngle(e,t){return Ca().setToRotationAxisAngle(e,t)}static rotationX(e){return Ca().setToRotationX(e)}static rotationY(e){return Ca().setToRotationY(e)}static rotationZ(e){return Ca().setToRotationZ(e)}static translationRotation(e,t,n){return Ca().setToTranslationRotation(e,t,n)}static rotation2(e){return Ca().setToRotationZ(e)}static rotationAround(e,t,n){return Cl.translation(t,n).timesMatrix(Cl.rotation2(e)).timesMatrix(Cl.translation(-t,-n))}static rotationAroundPoint(e,t){return Cl.rotationAround(e,t.x,t.y)}static fromSVGMatrix(e){return Ca().setToSVGMatrix(e)}static rotateAToB(e,t){return Ca().setRotationAToB(e,t)}static translationTimesMatrix(e,t,n){let s;return n.type===qt.IDENTITY||n.type===qt.TRANSLATION_2D?_r(1,0,n.m02()+e,0,1,n.m12()+t,0,0,1,qt.TRANSLATION_2D):(n.type===qt.OTHER?s=qt.OTHER:s=qt.AFFINE,_r(n.m00(),n.m01(),n.m02()+e,n.m10(),n.m11(),n.m12()+t,n.m20(),n.m21(),n.m22(),s))}static toStateObject(e){return{entries:e.entries,type:e.type.name}}static fromStateObject(e){const t=Cl.identity();return t.entries=e.entries,t.type=qt.enumeration.getValue(e.type),t}};It.pool=new us(It,{initialize:It.prototype.initialize,useDefaultConstruction:!0,maxSize:300});const Ca=It.pool.fetch.bind(It.pool),_r=(i,e,t,n,s,r,a,o,l,h)=>Ca().rowMajor(i,e,t,n,s,r,a,o,l,h);It.IDENTITY=It.identity().makeImmutable();It.X_REFLECTION=_r(-1,0,0,0,1,0,0,0,1,qt.AFFINE).makeImmutable();It.Y_REFLECTION=_r(1,0,0,0,-1,0,0,0,1,qt.AFFINE).makeImmutable();It.Matrix3IO=new ui("Matrix3IO",{valueType:It,documentation:"A 3x3 matrix often used for holding transform data.",toStateObject:i=>It.toStateObject(i),fromStateObject:i=>It.fromStateObject(i),stateSchema:{entries:Kl(Ii),type:tS(qt)}});class Y1{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let n=this.length++;for(;n>0;){const s=n-1>>1,r=this.values[s];if(t>=r)break;this.ids[n]=this.ids[s],this.values[n]=r,n=s}this.ids[n]=e,this.values[n]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],n=this.values[0]=this.values[this.length],s=this.length>>1;let r=0;for(;r<s;){let a=(r<<1)+1;const o=a+1;let l=this.ids[a],h=this.values[a];const c=this.values[o];if(o<this.length&&c<h&&(a=o,l=this.ids[o],h=c),h>=n)break;this.ids[r]=l,this.values[r]=h,r=a}this.ids[r]=t,this.values[r]=n}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}class Po{constructor(e,t){this.position=e,this.direction=t}shifted(e){return new Po(this.pointAtDistance(e),this.direction)}pointAtDistance(e){return this.position.plus(this.direction.timesScalar(e))}toString(){return`${this.position.toString()} => ${this.direction.toString()}`}}function GF(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mI={exports:{}},oy={exports:{}},Bx;function WF(){return Bx||(Bx=1,function(i,e){(function(t,n){n(e)})($s,function(t){var n=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],s=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],r="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",a="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",o={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},l="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",h={5:l,"5module":l+" export import",6:l+" const class extends export import super"},c=/^in(stanceof)?$/,f=new RegExp("["+a+"]"),g=new RegExp("["+a+r+"]");function v(y,C){for(var X=65536,oe=0;oe<C.length;oe+=2){if(X+=C[oe],X>y)return!1;if(X+=C[oe+1],X>=y)return!0}return!1}function A(y,C){return y<65?y===36:y<91?!0:y<97?y===95:y<123?!0:y<=65535?y>=170&&f.test(String.fromCharCode(y)):C===!1?!1:v(y,s)}function P(y,C){return y<48?y===36:y<58?!0:y<65?!1:y<91?!0:y<97?y===95:y<123?!0:y<=65535?y>=170&&g.test(String.fromCharCode(y)):C===!1?!1:v(y,s)||v(y,n)}var w=function(C,X){X===void 0&&(X={}),this.label=C,this.keyword=X.keyword,this.beforeExpr=!!X.beforeExpr,this.startsExpr=!!X.startsExpr,this.isLoop=!!X.isLoop,this.isAssign=!!X.isAssign,this.prefix=!!X.prefix,this.postfix=!!X.postfix,this.binop=X.binop||null,this.updateContext=null};function T(y,C){return new w(y,{beforeExpr:!0,binop:C})}var D={beforeExpr:!0},M={startsExpr:!0},B={};function O(y,C){return C===void 0&&(C={}),C.keyword=y,B[y]=new w(y,C)}var x={num:new w("num",M),regexp:new w("regexp",M),string:new w("string",M),name:new w("name",M),privateId:new w("privateId",M),eof:new w("eof"),bracketL:new w("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new w("]"),braceL:new w("{",{beforeExpr:!0,startsExpr:!0}),braceR:new w("}"),parenL:new w("(",{beforeExpr:!0,startsExpr:!0}),parenR:new w(")"),comma:new w(",",D),semi:new w(";",D),colon:new w(":",D),dot:new w("."),question:new w("?",D),questionDot:new w("?."),arrow:new w("=>",D),template:new w("template"),invalidTemplate:new w("invalidTemplate"),ellipsis:new w("...",D),backQuote:new w("`",M),dollarBraceL:new w("${",{beforeExpr:!0,startsExpr:!0}),eq:new w("=",{beforeExpr:!0,isAssign:!0}),assign:new w("_=",{beforeExpr:!0,isAssign:!0}),incDec:new w("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new w("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:T("||",1),logicalAND:T("&&",2),bitwiseOR:T("|",3),bitwiseXOR:T("^",4),bitwiseAND:T("&",5),equality:T("==/!=/===/!==",6),relational:T("</>/<=/>=",7),bitShift:T("<</>>/>>>",8),plusMin:new w("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:T("%",10),star:T("*",10),slash:T("/",10),starstar:new w("**",{beforeExpr:!0}),coalesce:T("??",1),_break:O("break"),_case:O("case",D),_catch:O("catch"),_continue:O("continue"),_debugger:O("debugger"),_default:O("default",D),_do:O("do",{isLoop:!0,beforeExpr:!0}),_else:O("else",D),_finally:O("finally"),_for:O("for",{isLoop:!0}),_function:O("function",M),_if:O("if"),_return:O("return",D),_switch:O("switch"),_throw:O("throw",D),_try:O("try"),_var:O("var"),_const:O("const"),_while:O("while",{isLoop:!0}),_with:O("with"),_new:O("new",{beforeExpr:!0,startsExpr:!0}),_this:O("this",M),_super:O("super",M),_class:O("class",M),_extends:O("extends",D),_export:O("export"),_import:O("import",M),_null:O("null",M),_true:O("true",M),_false:O("false",M),_in:O("in",{beforeExpr:!0,binop:7}),_instanceof:O("instanceof",{beforeExpr:!0,binop:7}),_typeof:O("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:O("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:O("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Z=/\r\n?|\n|\u2028|\u2029/,de=new RegExp(Z.source,"g");function $(y){return y===10||y===13||y===8232||y===8233}function me(y,C,X){X===void 0&&(X=y.length);for(var oe=C;oe<X;oe++){var Ee=y.charCodeAt(oe);if($(Ee))return oe<X-1&&Ee===13&&y.charCodeAt(oe+1)===10?oe+2:oe+1}return-1}var ue=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Se=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Te=Object.prototype,Re=Te.hasOwnProperty,We=Te.toString,Le=Object.hasOwn||function(y,C){return Re.call(y,C)},lt=Array.isArray||function(y){return We.call(y)==="[object Array]"},st=Object.create(null);function De(y){return st[y]||(st[y]=new RegExp("^(?:"+y.replace(/ /g,"|")+")$"))}function et(y){return y<=65535?String.fromCharCode(y):(y-=65536,String.fromCharCode((y>>10)+55296,(y&1023)+56320))}var Ke=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ct=function(C,X){this.line=C,this.column=X};Ct.prototype.offset=function(C){return new Ct(this.line,this.column+C)};var dt=function(C,X,oe){this.start=X,this.end=oe,C.sourceFile!==null&&(this.source=C.sourceFile)};function Et(y,C){for(var X=1,oe=0;;){var Ee=me(y,oe,C);if(Ee<0)return new Ct(X,C-oe);++X,oe=Ee}}var ut={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Wt=!1;function Nt(y){var C={};for(var X in ut)C[X]=y&&Le(y,X)?y[X]:ut[X];if(C.ecmaVersion==="latest"?C.ecmaVersion=1e8:C.ecmaVersion==null?(!Wt&&typeof console=="object"&&console.warn&&(Wt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),C.ecmaVersion=11):C.ecmaVersion>=2015&&(C.ecmaVersion-=2009),C.allowReserved==null&&(C.allowReserved=C.ecmaVersion<5),(!y||y.allowHashBang==null)&&(C.allowHashBang=C.ecmaVersion>=14),lt(C.onToken)){var oe=C.onToken;C.onToken=function(Ee){return oe.push(Ee)}}return lt(C.onComment)&&(C.onComment=ci(C,C.onComment)),C}function ci(y,C){return function(X,oe,Ee,tt,ot,Ht){var Kt={type:X?"Block":"Line",value:oe,start:Ee,end:tt};y.locations&&(Kt.loc=new dt(this,ot,Ht)),y.ranges&&(Kt.range=[Ee,tt]),C.push(Kt)}}var Yt=1,Pe=2,pe=4,bt=8,wt=16,Gt=32,Ft=64,V=128,te=256,fe=512,_e=Yt|Pe|te;function ke(y,C){return Pe|(y?pe:0)|(C?bt:0)}var $e=0,Xe=1,rt=2,Dn=3,Xt=4,u=5,d=function(C,X,oe){this.options=C=Nt(C),this.sourceFile=C.sourceFile,this.keywords=De(h[C.ecmaVersion>=6?6:C.sourceType==="module"?"5module":5]);var Ee="";C.allowReserved!==!0&&(Ee=o[C.ecmaVersion>=6?6:C.ecmaVersion===5?5:3],C.sourceType==="module"&&(Ee+=" await")),this.reservedWords=De(Ee);var tt=(Ee?Ee+" ":"")+o.strict;this.reservedWordsStrict=De(tt),this.reservedWordsStrictBind=De(tt+" "+o.strictBind),this.input=String(X),this.containsEsc=!1,oe?(this.pos=oe,this.lineStart=this.input.lastIndexOf(`
`,oe-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Z).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=x.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=C.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&C.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Yt),this.regexpState=null,this.privateNameStack=[]},m={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};d.prototype.parse=function(){var C=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(C)},m.inFunction.get=function(){return(this.currentVarScope().flags&Pe)>0},m.inGenerator.get=function(){return(this.currentVarScope().flags&bt)>0},m.inAsync.get=function(){return(this.currentVarScope().flags&pe)>0},m.canAwait.get=function(){for(var y=this.scopeStack.length-1;y>=0;y--){var C=this.scopeStack[y],X=C.flags;if(X&(te|fe))return!1;if(X&Pe)return(X&pe)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},m.allowSuper.get=function(){var y=this.currentThisScope(),C=y.flags;return(C&Ft)>0||this.options.allowSuperOutsideMethod},m.allowDirectSuper.get=function(){return(this.currentThisScope().flags&V)>0},m.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},m.allowNewDotTarget.get=function(){for(var y=this.scopeStack.length-1;y>=0;y--){var C=this.scopeStack[y],X=C.flags;if(X&(te|fe)||X&Pe&&!(X&wt))return!0}return!1},m.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&te)>0},d.extend=function(){for(var C=[],X=arguments.length;X--;)C[X]=arguments[X];for(var oe=this,Ee=0;Ee<C.length;Ee++)oe=C[Ee](oe);return oe},d.parse=function(C,X){return new this(X,C).parse()},d.parseExpressionAt=function(C,X,oe){var Ee=new this(oe,C,X);return Ee.nextToken(),Ee.parseExpression()},d.tokenizer=function(C,X){return new this(X,C)},Object.defineProperties(d.prototype,m);var _=d.prototype,S=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;_.strictDirective=function(y){if(this.options.ecmaVersion<5)return!1;for(;;){Se.lastIndex=y,y+=Se.exec(this.input)[0].length;var C=S.exec(this.input.slice(y));if(!C)return!1;if((C[1]||C[2])==="use strict"){Se.lastIndex=y+C[0].length;var X=Se.exec(this.input),oe=X.index+X[0].length,Ee=this.input.charAt(oe);return Ee===";"||Ee==="}"||Z.test(X[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(Ee)||Ee==="!"&&this.input.charAt(oe+1)==="=")}y+=C[0].length,Se.lastIndex=y,y+=Se.exec(this.input)[0].length,this.input[y]===";"&&y++}},_.eat=function(y){return this.type===y?(this.next(),!0):!1},_.isContextual=function(y){return this.type===x.name&&this.value===y&&!this.containsEsc},_.eatContextual=function(y){return this.isContextual(y)?(this.next(),!0):!1},_.expectContextual=function(y){this.eatContextual(y)||this.unexpected()},_.canInsertSemicolon=function(){return this.type===x.eof||this.type===x.braceR||Z.test(this.input.slice(this.lastTokEnd,this.start))},_.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},_.semicolon=function(){!this.eat(x.semi)&&!this.insertSemicolon()&&this.unexpected()},_.afterTrailingComma=function(y,C){if(this.type===y)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),C||this.next(),!0},_.expect=function(y){this.eat(y)||this.unexpected()},_.unexpected=function(y){this.raise(y??this.start,"Unexpected token")};var k=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};_.checkPatternErrors=function(y,C){if(y){y.trailingComma>-1&&this.raiseRecoverable(y.trailingComma,"Comma is not permitted after the rest element");var X=C?y.parenthesizedAssign:y.parenthesizedBind;X>-1&&this.raiseRecoverable(X,C?"Assigning to rvalue":"Parenthesized pattern")}},_.checkExpressionErrors=function(y,C){if(!y)return!1;var X=y.shorthandAssign,oe=y.doubleProto;if(!C)return X>=0||oe>=0;X>=0&&this.raise(X,"Shorthand property assignments are valid only in destructuring patterns"),oe>=0&&this.raiseRecoverable(oe,"Redefinition of __proto__ property")},_.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},_.isSimpleAssignTarget=function(y){return y.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(y.expression):y.type==="Identifier"||y.type==="MemberExpression"};var I=d.prototype;I.parseTopLevel=function(y){var C=Object.create(null);for(y.body||(y.body=[]);this.type!==x.eof;){var X=this.parseStatement(null,!0,C);y.body.push(X)}if(this.inModule)for(var oe=0,Ee=Object.keys(this.undefinedExports);oe<Ee.length;oe+=1){var tt=Ee[oe];this.raiseRecoverable(this.undefinedExports[tt].start,"Export '"+tt+"' is not defined")}return this.adaptDirectivePrologue(y.body),this.next(),y.sourceType=this.options.sourceType,this.finishNode(y,"Program")};var L={kind:"loop"},N={kind:"switch"};I.isLet=function(y){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Se.lastIndex=this.pos;var C=Se.exec(this.input),X=this.pos+C[0].length,oe=this.input.charCodeAt(X);if(oe===91||oe===92)return!0;if(y)return!1;if(oe===123||oe>55295&&oe<56320)return!0;if(A(oe,!0)){for(var Ee=X+1;P(oe=this.input.charCodeAt(Ee),!0);)++Ee;if(oe===92||oe>55295&&oe<56320)return!0;var tt=this.input.slice(X,Ee);if(!c.test(tt))return!0}return!1},I.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Se.lastIndex=this.pos;var y=Se.exec(this.input),C=this.pos+y[0].length,X;return!Z.test(this.input.slice(this.pos,C))&&this.input.slice(C,C+8)==="function"&&(C+8===this.input.length||!(P(X=this.input.charCodeAt(C+8))||X>55295&&X<56320))},I.parseStatement=function(y,C,X){var oe=this.type,Ee=this.startNode(),tt;switch(this.isLet(y)&&(oe=x._var,tt="let"),oe){case x._break:case x._continue:return this.parseBreakContinueStatement(Ee,oe.keyword);case x._debugger:return this.parseDebuggerStatement(Ee);case x._do:return this.parseDoStatement(Ee);case x._for:return this.parseForStatement(Ee);case x._function:return y&&(this.strict||y!=="if"&&y!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(Ee,!1,!y);case x._class:return y&&this.unexpected(),this.parseClass(Ee,!0);case x._if:return this.parseIfStatement(Ee);case x._return:return this.parseReturnStatement(Ee);case x._switch:return this.parseSwitchStatement(Ee);case x._throw:return this.parseThrowStatement(Ee);case x._try:return this.parseTryStatement(Ee);case x._const:case x._var:return tt=tt||this.value,y&&tt!=="var"&&this.unexpected(),this.parseVarStatement(Ee,tt);case x._while:return this.parseWhileStatement(Ee);case x._with:return this.parseWithStatement(Ee);case x.braceL:return this.parseBlock(!0,Ee);case x.semi:return this.parseEmptyStatement(Ee);case x._export:case x._import:if(this.options.ecmaVersion>10&&oe===x._import){Se.lastIndex=this.pos;var ot=Se.exec(this.input),Ht=this.pos+ot[0].length,Kt=this.input.charCodeAt(Ht);if(Kt===40||Kt===46)return this.parseExpressionStatement(Ee,this.parseExpression())}return this.options.allowImportExportEverywhere||(C||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),oe===x._import?this.parseImport(Ee):this.parseExport(Ee,X);default:if(this.isAsyncFunction())return y&&this.unexpected(),this.next(),this.parseFunctionStatement(Ee,!0,!y);var Wi=this.value,ri=this.parseExpression();return oe===x.name&&ri.type==="Identifier"&&this.eat(x.colon)?this.parseLabeledStatement(Ee,Wi,ri,y):this.parseExpressionStatement(Ee,ri)}},I.parseBreakContinueStatement=function(y,C){var X=C==="break";this.next(),this.eat(x.semi)||this.insertSemicolon()?y.label=null:this.type!==x.name?this.unexpected():(y.label=this.parseIdent(),this.semicolon());for(var oe=0;oe<this.labels.length;++oe){var Ee=this.labels[oe];if((y.label==null||Ee.name===y.label.name)&&(Ee.kind!=null&&(X||Ee.kind==="loop")||y.label&&X))break}return oe===this.labels.length&&this.raise(y.start,"Unsyntactic "+C),this.finishNode(y,X?"BreakStatement":"ContinueStatement")},I.parseDebuggerStatement=function(y){return this.next(),this.semicolon(),this.finishNode(y,"DebuggerStatement")},I.parseDoStatement=function(y){return this.next(),this.labels.push(L),y.body=this.parseStatement("do"),this.labels.pop(),this.expect(x._while),y.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(x.semi):this.semicolon(),this.finishNode(y,"DoWhileStatement")},I.parseForStatement=function(y){this.next();var C=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(L),this.enterScope(0),this.expect(x.parenL),this.type===x.semi)return C>-1&&this.unexpected(C),this.parseFor(y,null);var X=this.isLet();if(this.type===x._var||this.type===x._const||X){var oe=this.startNode(),Ee=X?"let":this.value;return this.next(),this.parseVar(oe,!0,Ee),this.finishNode(oe,"VariableDeclaration"),(this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&oe.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===x._in?C>-1&&this.unexpected(C):y.await=C>-1),this.parseForIn(y,oe)):(C>-1&&this.unexpected(C),this.parseFor(y,oe))}var tt=this.isContextual("let"),ot=!1,Ht=this.containsEsc,Kt=new k,Wi=this.start,ri=C>-1?this.parseExprSubscripts(Kt,"await"):this.parseExpression(!0,Kt);return this.type===x._in||(ot=this.options.ecmaVersion>=6&&this.isContextual("of"))?(C>-1?(this.type===x._in&&this.unexpected(C),y.await=!0):ot&&this.options.ecmaVersion>=8&&(ri.start===Wi&&!Ht&&ri.type==="Identifier"&&ri.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(y.await=!1)),tt&&ot&&this.raise(ri.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(ri,!1,Kt),this.checkLValPattern(ri),this.parseForIn(y,ri)):(this.checkExpressionErrors(Kt,!0),C>-1&&this.unexpected(C),this.parseFor(y,ri))},I.parseFunctionStatement=function(y,C,X){return this.next(),this.parseFunction(y,W|(X?0:K),!1,C)},I.parseIfStatement=function(y){return this.next(),y.test=this.parseParenExpression(),y.consequent=this.parseStatement("if"),y.alternate=this.eat(x._else)?this.parseStatement("if"):null,this.finishNode(y,"IfStatement")},I.parseReturnStatement=function(y){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(x.semi)||this.insertSemicolon()?y.argument=null:(y.argument=this.parseExpression(),this.semicolon()),this.finishNode(y,"ReturnStatement")},I.parseSwitchStatement=function(y){this.next(),y.discriminant=this.parseParenExpression(),y.cases=[],this.expect(x.braceL),this.labels.push(N),this.enterScope(0);for(var C,X=!1;this.type!==x.braceR;)if(this.type===x._case||this.type===x._default){var oe=this.type===x._case;C&&this.finishNode(C,"SwitchCase"),y.cases.push(C=this.startNode()),C.consequent=[],this.next(),oe?C.test=this.parseExpression():(X&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),X=!0,C.test=null),this.expect(x.colon)}else C||this.unexpected(),C.consequent.push(this.parseStatement(null));return this.exitScope(),C&&this.finishNode(C,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(y,"SwitchStatement")},I.parseThrowStatement=function(y){return this.next(),Z.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),y.argument=this.parseExpression(),this.semicolon(),this.finishNode(y,"ThrowStatement")};var q=[];I.parseCatchClauseParam=function(){var y=this.parseBindingAtom(),C=y.type==="Identifier";return this.enterScope(C?Gt:0),this.checkLValPattern(y,C?Xt:rt),this.expect(x.parenR),y},I.parseTryStatement=function(y){if(this.next(),y.block=this.parseBlock(),y.handler=null,this.type===x._catch){var C=this.startNode();this.next(),this.eat(x.parenL)?C.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),C.param=null,this.enterScope(0)),C.body=this.parseBlock(!1),this.exitScope(),y.handler=this.finishNode(C,"CatchClause")}return y.finalizer=this.eat(x._finally)?this.parseBlock():null,!y.handler&&!y.finalizer&&this.raise(y.start,"Missing catch or finally clause"),this.finishNode(y,"TryStatement")},I.parseVarStatement=function(y,C,X){return this.next(),this.parseVar(y,!1,C,X),this.semicolon(),this.finishNode(y,"VariableDeclaration")},I.parseWhileStatement=function(y){return this.next(),y.test=this.parseParenExpression(),this.labels.push(L),y.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(y,"WhileStatement")},I.parseWithStatement=function(y){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),y.object=this.parseParenExpression(),y.body=this.parseStatement("with"),this.finishNode(y,"WithStatement")},I.parseEmptyStatement=function(y){return this.next(),this.finishNode(y,"EmptyStatement")},I.parseLabeledStatement=function(y,C,X,oe){for(var Ee=0,tt=this.labels;Ee<tt.length;Ee+=1){var ot=tt[Ee];ot.name===C&&this.raise(X.start,"Label '"+C+"' is already declared")}for(var Ht=this.type.isLoop?"loop":this.type===x._switch?"switch":null,Kt=this.labels.length-1;Kt>=0;Kt--){var Wi=this.labels[Kt];if(Wi.statementStart===y.start)Wi.statementStart=this.start,Wi.kind=Ht;else break}return this.labels.push({name:C,kind:Ht,statementStart:this.start}),y.body=this.parseStatement(oe?oe.indexOf("label")===-1?oe+"label":oe:"label"),this.labels.pop(),y.label=X,this.finishNode(y,"LabeledStatement")},I.parseExpressionStatement=function(y,C){return y.expression=C,this.semicolon(),this.finishNode(y,"ExpressionStatement")},I.parseBlock=function(y,C,X){for(y===void 0&&(y=!0),C===void 0&&(C=this.startNode()),C.body=[],this.expect(x.braceL),y&&this.enterScope(0);this.type!==x.braceR;){var oe=this.parseStatement(null);C.body.push(oe)}return X&&(this.strict=!1),this.next(),y&&this.exitScope(),this.finishNode(C,"BlockStatement")},I.parseFor=function(y,C){return y.init=C,this.expect(x.semi),y.test=this.type===x.semi?null:this.parseExpression(),this.expect(x.semi),y.update=this.type===x.parenR?null:this.parseExpression(),this.expect(x.parenR),y.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(y,"ForStatement")},I.parseForIn=function(y,C){var X=this.type===x._in;return this.next(),C.type==="VariableDeclaration"&&C.declarations[0].init!=null&&(!X||this.options.ecmaVersion<8||this.strict||C.kind!=="var"||C.declarations[0].id.type!=="Identifier")&&this.raise(C.start,(X?"for-in":"for-of")+" loop variable declaration may not have an initializer"),y.left=C,y.right=X?this.parseExpression():this.parseMaybeAssign(),this.expect(x.parenR),y.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(y,X?"ForInStatement":"ForOfStatement")},I.parseVar=function(y,C,X,oe){for(y.declarations=[],y.kind=X;;){var Ee=this.startNode();if(this.parseVarId(Ee,X),this.eat(x.eq)?Ee.init=this.parseMaybeAssign(C):!oe&&X==="const"&&!(this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!oe&&Ee.id.type!=="Identifier"&&!(C&&(this.type===x._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):Ee.init=null,y.declarations.push(this.finishNode(Ee,"VariableDeclarator")),!this.eat(x.comma))break}return y},I.parseVarId=function(y,C){y.id=this.parseBindingAtom(),this.checkLValPattern(y.id,C==="var"?Xe:rt,!1)};var W=1,K=2,G=4;I.parseFunction=function(y,C,X,oe,Ee){this.initFunction(y),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!oe)&&(this.type===x.star&&C&K&&this.unexpected(),y.generator=this.eat(x.star)),this.options.ecmaVersion>=8&&(y.async=!!oe),C&W&&(y.id=C&G&&this.type!==x.name?null:this.parseIdent(),y.id&&!(C&K)&&this.checkLValSimple(y.id,this.strict||y.generator||y.async?this.treatFunctionsAsVar?Xe:rt:Dn));var tt=this.yieldPos,ot=this.awaitPos,Ht=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ke(y.async,y.generator)),C&W||(y.id=this.type===x.name?this.parseIdent():null),this.parseFunctionParams(y),this.parseFunctionBody(y,X,!1,Ee),this.yieldPos=tt,this.awaitPos=ot,this.awaitIdentPos=Ht,this.finishNode(y,C&W?"FunctionDeclaration":"FunctionExpression")},I.parseFunctionParams=function(y){this.expect(x.parenL),y.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},I.parseClass=function(y,C){this.next();var X=this.strict;this.strict=!0,this.parseClassId(y,C),this.parseClassSuper(y);var oe=this.enterClassBody(),Ee=this.startNode(),tt=!1;for(Ee.body=[],this.expect(x.braceL);this.type!==x.braceR;){var ot=this.parseClassElement(y.superClass!==null);ot&&(Ee.body.push(ot),ot.type==="MethodDefinition"&&ot.kind==="constructor"?(tt&&this.raiseRecoverable(ot.start,"Duplicate constructor in the same class"),tt=!0):ot.key&&ot.key.type==="PrivateIdentifier"&&U(oe,ot)&&this.raiseRecoverable(ot.key.start,"Identifier '#"+ot.key.name+"' has already been declared"))}return this.strict=X,this.next(),y.body=this.finishNode(Ee,"ClassBody"),this.exitClassBody(),this.finishNode(y,C?"ClassDeclaration":"ClassExpression")},I.parseClassElement=function(y){if(this.eat(x.semi))return null;var C=this.options.ecmaVersion,X=this.startNode(),oe="",Ee=!1,tt=!1,ot="method",Ht=!1;if(this.eatContextual("static")){if(C>=13&&this.eat(x.braceL))return this.parseClassStaticBlock(X),X;this.isClassElementNameStart()||this.type===x.star?Ht=!0:oe="static"}if(X.static=Ht,!oe&&C>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===x.star)&&!this.canInsertSemicolon()?tt=!0:oe="async"),!oe&&(C>=9||!tt)&&this.eat(x.star)&&(Ee=!0),!oe&&!tt&&!Ee){var Kt=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?ot=Kt:oe=Kt)}if(oe?(X.computed=!1,X.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),X.key.name=oe,this.finishNode(X.key,"Identifier")):this.parseClassElementName(X),C<13||this.type===x.parenL||ot!=="method"||Ee||tt){var Wi=!X.static&&ae(X,"constructor"),ri=Wi&&y;Wi&&ot!=="method"&&this.raise(X.key.start,"Constructor can't have get/set modifier"),X.kind=Wi?"constructor":ot,this.parseClassMethod(X,Ee,tt,ri)}else this.parseClassField(X);return X},I.isClassElementNameStart=function(){return this.type===x.name||this.type===x.privateId||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword},I.parseClassElementName=function(y){this.type===x.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),y.computed=!1,y.key=this.parsePrivateIdent()):this.parsePropertyName(y)},I.parseClassMethod=function(y,C,X,oe){var Ee=y.key;y.kind==="constructor"?(C&&this.raise(Ee.start,"Constructor can't be a generator"),X&&this.raise(Ee.start,"Constructor can't be an async method")):y.static&&ae(y,"prototype")&&this.raise(Ee.start,"Classes may not have a static property named prototype");var tt=y.value=this.parseMethod(C,X,oe);return y.kind==="get"&&tt.params.length!==0&&this.raiseRecoverable(tt.start,"getter should have no params"),y.kind==="set"&&tt.params.length!==1&&this.raiseRecoverable(tt.start,"setter should have exactly one param"),y.kind==="set"&&tt.params[0].type==="RestElement"&&this.raiseRecoverable(tt.params[0].start,"Setter cannot use rest params"),this.finishNode(y,"MethodDefinition")},I.parseClassField=function(y){return ae(y,"constructor")?this.raise(y.key.start,"Classes can't have a field named 'constructor'"):y.static&&ae(y,"prototype")&&this.raise(y.key.start,"Classes can't have a static field named 'prototype'"),this.eat(x.eq)?(this.enterScope(fe|Ft),y.value=this.parseMaybeAssign(),this.exitScope()):y.value=null,this.semicolon(),this.finishNode(y,"PropertyDefinition")},I.parseClassStaticBlock=function(y){y.body=[];var C=this.labels;for(this.labels=[],this.enterScope(te|Ft);this.type!==x.braceR;){var X=this.parseStatement(null);y.body.push(X)}return this.next(),this.exitScope(),this.labels=C,this.finishNode(y,"StaticBlock")},I.parseClassId=function(y,C){this.type===x.name?(y.id=this.parseIdent(),C&&this.checkLValSimple(y.id,rt,!1)):(C===!0&&this.unexpected(),y.id=null)},I.parseClassSuper=function(y){y.superClass=this.eat(x._extends)?this.parseExprSubscripts(null,!1):null},I.enterClassBody=function(){var y={declared:Object.create(null),used:[]};return this.privateNameStack.push(y),y.declared},I.exitClassBody=function(){var y=this.privateNameStack.pop(),C=y.declared,X=y.used;if(this.options.checkPrivateFields)for(var oe=this.privateNameStack.length,Ee=oe===0?null:this.privateNameStack[oe-1],tt=0;tt<X.length;++tt){var ot=X[tt];Le(C,ot.name)||(Ee?Ee.used.push(ot):this.raiseRecoverable(ot.start,"Private field '#"+ot.name+"' must be declared in an enclosing class"))}};function U(y,C){var X=C.key.name,oe=y[X],Ee="true";return C.type==="MethodDefinition"&&(C.kind==="get"||C.kind==="set")&&(Ee=(C.static?"s":"i")+C.kind),oe==="iget"&&Ee==="iset"||oe==="iset"&&Ee==="iget"||oe==="sget"&&Ee==="sset"||oe==="sset"&&Ee==="sget"?(y[X]="true",!1):oe?!0:(y[X]=Ee,!1)}function ae(y,C){var X=y.computed,oe=y.key;return!X&&(oe.type==="Identifier"&&oe.name===C||oe.type==="Literal"&&oe.value===C)}I.parseExportAllDeclaration=function(y,C){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(y.exported=this.parseModuleExportName(),this.checkExport(C,y.exported,this.lastTokStart)):y.exported=null),this.expectContextual("from"),this.type!==x.string&&this.unexpected(),y.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(y,"ExportAllDeclaration")},I.parseExport=function(y,C){if(this.next(),this.eat(x.star))return this.parseExportAllDeclaration(y,C);if(this.eat(x._default))return this.checkExport(C,"default",this.lastTokStart),y.declaration=this.parseExportDefaultDeclaration(),this.finishNode(y,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())y.declaration=this.parseExportDeclaration(y),y.declaration.type==="VariableDeclaration"?this.checkVariableExport(C,y.declaration.declarations):this.checkExport(C,y.declaration.id,y.declaration.id.start),y.specifiers=[],y.source=null,this.options.ecmaVersion>=16&&(y.attributes=[]);else{if(y.declaration=null,y.specifiers=this.parseExportSpecifiers(C),this.eatContextual("from"))this.type!==x.string&&this.unexpected(),y.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause());else{for(var X=0,oe=y.specifiers;X<oe.length;X+=1){var Ee=oe[X];this.checkUnreserved(Ee.local),this.checkLocalExport(Ee.local),Ee.local.type==="Literal"&&this.raise(Ee.local.start,"A string literal cannot be used as an exported binding without `from`.")}y.source=null,this.options.ecmaVersion>=16&&(y.attributes=[])}this.semicolon()}return this.finishNode(y,"ExportNamedDeclaration")},I.parseExportDeclaration=function(y){return this.parseStatement(null)},I.parseExportDefaultDeclaration=function(){var y;if(this.type===x._function||(y=this.isAsyncFunction())){var C=this.startNode();return this.next(),y&&this.next(),this.parseFunction(C,W|G,!1,y)}else if(this.type===x._class){var X=this.startNode();return this.parseClass(X,"nullableID")}else{var oe=this.parseMaybeAssign();return this.semicolon(),oe}},I.checkExport=function(y,C,X){y&&(typeof C!="string"&&(C=C.type==="Identifier"?C.name:C.value),Le(y,C)&&this.raiseRecoverable(X,"Duplicate export '"+C+"'"),y[C]=!0)},I.checkPatternExport=function(y,C){var X=C.type;if(X==="Identifier")this.checkExport(y,C,C.start);else if(X==="ObjectPattern")for(var oe=0,Ee=C.properties;oe<Ee.length;oe+=1){var tt=Ee[oe];this.checkPatternExport(y,tt)}else if(X==="ArrayPattern")for(var ot=0,Ht=C.elements;ot<Ht.length;ot+=1){var Kt=Ht[ot];Kt&&this.checkPatternExport(y,Kt)}else X==="Property"?this.checkPatternExport(y,C.value):X==="AssignmentPattern"?this.checkPatternExport(y,C.left):X==="RestElement"&&this.checkPatternExport(y,C.argument)},I.checkVariableExport=function(y,C){if(y)for(var X=0,oe=C;X<oe.length;X+=1){var Ee=oe[X];this.checkPatternExport(y,Ee.id)}},I.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},I.parseExportSpecifier=function(y){var C=this.startNode();return C.local=this.parseModuleExportName(),C.exported=this.eatContextual("as")?this.parseModuleExportName():C.local,this.checkExport(y,C.exported,C.exported.start),this.finishNode(C,"ExportSpecifier")},I.parseExportSpecifiers=function(y){var C=[],X=!0;for(this.expect(x.braceL);!this.eat(x.braceR);){if(X)X=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;C.push(this.parseExportSpecifier(y))}return C},I.parseImport=function(y){return this.next(),this.type===x.string?(y.specifiers=q,y.source=this.parseExprAtom()):(y.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),y.source=this.type===x.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(y,"ImportDeclaration")},I.parseImportSpecifier=function(){var y=this.startNode();return y.imported=this.parseModuleExportName(),this.eatContextual("as")?y.local=this.parseIdent():(this.checkUnreserved(y.imported),y.local=y.imported),this.checkLValSimple(y.local,rt),this.finishNode(y,"ImportSpecifier")},I.parseImportDefaultSpecifier=function(){var y=this.startNode();return y.local=this.parseIdent(),this.checkLValSimple(y.local,rt),this.finishNode(y,"ImportDefaultSpecifier")},I.parseImportNamespaceSpecifier=function(){var y=this.startNode();return this.next(),this.expectContextual("as"),y.local=this.parseIdent(),this.checkLValSimple(y.local,rt),this.finishNode(y,"ImportNamespaceSpecifier")},I.parseImportSpecifiers=function(){var y=[],C=!0;if(this.type===x.name&&(y.push(this.parseImportDefaultSpecifier()),!this.eat(x.comma)))return y;if(this.type===x.star)return y.push(this.parseImportNamespaceSpecifier()),y;for(this.expect(x.braceL);!this.eat(x.braceR);){if(C)C=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;y.push(this.parseImportSpecifier())}return y},I.parseWithClause=function(){var y=[];if(!this.eat(x._with))return y;this.expect(x.braceL);for(var C={},X=!0;!this.eat(x.braceR);){if(X)X=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;var oe=this.parseImportAttribute(),Ee=oe.key.type==="Identifier"?oe.key.name:oe.key.value;Le(C,Ee)&&this.raiseRecoverable(oe.key.start,"Duplicate attribute key '"+Ee+"'"),C[Ee]=!0,y.push(oe)}return y},I.parseImportAttribute=function(){var y=this.startNode();return y.key=this.type===x.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(x.colon),this.type!==x.string&&this.unexpected(),y.value=this.parseExprAtom(),this.finishNode(y,"ImportAttribute")},I.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===x.string){var y=this.parseLiteral(this.value);return Ke.test(y.value)&&this.raise(y.start,"An export name cannot include a lone surrogate."),y}return this.parseIdent(!0)},I.adaptDirectivePrologue=function(y){for(var C=0;C<y.length&&this.isDirectiveCandidate(y[C]);++C)y[C].directive=y[C].expression.raw.slice(1,-1)},I.isDirectiveCandidate=function(y){return this.options.ecmaVersion>=5&&y.type==="ExpressionStatement"&&y.expression.type==="Literal"&&typeof y.expression.value=="string"&&(this.input[y.start]==='"'||this.input[y.start]==="'")};var Q=d.prototype;Q.toAssignable=function(y,C,X){if(this.options.ecmaVersion>=6&&y)switch(y.type){case"Identifier":this.inAsync&&y.name==="await"&&this.raise(y.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":y.type="ObjectPattern",X&&this.checkPatternErrors(X,!0);for(var oe=0,Ee=y.properties;oe<Ee.length;oe+=1){var tt=Ee[oe];this.toAssignable(tt,C),tt.type==="RestElement"&&(tt.argument.type==="ArrayPattern"||tt.argument.type==="ObjectPattern")&&this.raise(tt.argument.start,"Unexpected token")}break;case"Property":y.kind!=="init"&&this.raise(y.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(y.value,C);break;case"ArrayExpression":y.type="ArrayPattern",X&&this.checkPatternErrors(X,!0),this.toAssignableList(y.elements,C);break;case"SpreadElement":y.type="RestElement",this.toAssignable(y.argument,C),y.argument.type==="AssignmentPattern"&&this.raise(y.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":y.operator!=="="&&this.raise(y.left.end,"Only '=' operator can be used for specifying default value."),y.type="AssignmentPattern",delete y.operator,this.toAssignable(y.left,C);break;case"ParenthesizedExpression":this.toAssignable(y.expression,C,X);break;case"ChainExpression":this.raiseRecoverable(y.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!C)break;default:this.raise(y.start,"Assigning to rvalue")}else X&&this.checkPatternErrors(X,!0);return y},Q.toAssignableList=function(y,C){for(var X=y.length,oe=0;oe<X;oe++){var Ee=y[oe];Ee&&this.toAssignable(Ee,C)}if(X){var tt=y[X-1];this.options.ecmaVersion===6&&C&&tt&&tt.type==="RestElement"&&tt.argument.type!=="Identifier"&&this.unexpected(tt.argument.start)}return y},Q.parseSpread=function(y){var C=this.startNode();return this.next(),C.argument=this.parseMaybeAssign(!1,y),this.finishNode(C,"SpreadElement")},Q.parseRestBinding=function(){var y=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==x.name&&this.unexpected(),y.argument=this.parseBindingAtom(),this.finishNode(y,"RestElement")},Q.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case x.bracketL:var y=this.startNode();return this.next(),y.elements=this.parseBindingList(x.bracketR,!0,!0),this.finishNode(y,"ArrayPattern");case x.braceL:return this.parseObj(!0)}return this.parseIdent()},Q.parseBindingList=function(y,C,X,oe){for(var Ee=[],tt=!0;!this.eat(y);)if(tt?tt=!1:this.expect(x.comma),C&&this.type===x.comma)Ee.push(null);else{if(X&&this.afterTrailingComma(y))break;if(this.type===x.ellipsis){var ot=this.parseRestBinding();this.parseBindingListItem(ot),Ee.push(ot),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(y);break}else Ee.push(this.parseAssignableListItem(oe))}return Ee},Q.parseAssignableListItem=function(y){var C=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(C),C},Q.parseBindingListItem=function(y){return y},Q.parseMaybeDefault=function(y,C,X){if(X=X||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(x.eq))return X;var oe=this.startNodeAt(y,C);return oe.left=X,oe.right=this.parseMaybeAssign(),this.finishNode(oe,"AssignmentPattern")},Q.checkLValSimple=function(y,C,X){C===void 0&&(C=$e);var oe=C!==$e;switch(y.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(y.name)&&this.raiseRecoverable(y.start,(oe?"Binding ":"Assigning to ")+y.name+" in strict mode"),oe&&(C===rt&&y.name==="let"&&this.raiseRecoverable(y.start,"let is disallowed as a lexically bound name"),X&&(Le(X,y.name)&&this.raiseRecoverable(y.start,"Argument name clash"),X[y.name]=!0),C!==u&&this.declareName(y.name,C,y.start));break;case"ChainExpression":this.raiseRecoverable(y.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":oe&&this.raiseRecoverable(y.start,"Binding member expression");break;case"ParenthesizedExpression":return oe&&this.raiseRecoverable(y.start,"Binding parenthesized expression"),this.checkLValSimple(y.expression,C,X);default:this.raise(y.start,(oe?"Binding":"Assigning to")+" rvalue")}},Q.checkLValPattern=function(y,C,X){switch(C===void 0&&(C=$e),y.type){case"ObjectPattern":for(var oe=0,Ee=y.properties;oe<Ee.length;oe+=1){var tt=Ee[oe];this.checkLValInnerPattern(tt,C,X)}break;case"ArrayPattern":for(var ot=0,Ht=y.elements;ot<Ht.length;ot+=1){var Kt=Ht[ot];Kt&&this.checkLValInnerPattern(Kt,C,X)}break;default:this.checkLValSimple(y,C,X)}},Q.checkLValInnerPattern=function(y,C,X){switch(C===void 0&&(C=$e),y.type){case"Property":this.checkLValInnerPattern(y.value,C,X);break;case"AssignmentPattern":this.checkLValPattern(y.left,C,X);break;case"RestElement":this.checkLValPattern(y.argument,C,X);break;default:this.checkLValPattern(y,C,X)}};var se=function(C,X,oe,Ee,tt){this.token=C,this.isExpr=!!X,this.preserveSpace=!!oe,this.override=Ee,this.generator=!!tt},Y={b_stat:new se("{",!1),b_expr:new se("{",!0),b_tmpl:new se("${",!1),p_stat:new se("(",!1),p_expr:new se("(",!0),q_tmpl:new se("`",!0,!0,function(y){return y.tryReadTemplateToken()}),f_stat:new se("function",!1),f_expr:new se("function",!0),f_expr_gen:new se("function",!0,!1,null,!0),f_gen:new se("function",!1,!1,null,!0)},ee=d.prototype;ee.initialContext=function(){return[Y.b_stat]},ee.curContext=function(){return this.context[this.context.length-1]},ee.braceIsBlock=function(y){var C=this.curContext();return C===Y.f_expr||C===Y.f_stat?!0:y===x.colon&&(C===Y.b_stat||C===Y.b_expr)?!C.isExpr:y===x._return||y===x.name&&this.exprAllowed?Z.test(this.input.slice(this.lastTokEnd,this.start)):y===x._else||y===x.semi||y===x.eof||y===x.parenR||y===x.arrow?!0:y===x.braceL?C===Y.b_stat:y===x._var||y===x._const||y===x.name?!1:!this.exprAllowed},ee.inGeneratorContext=function(){for(var y=this.context.length-1;y>=1;y--){var C=this.context[y];if(C.token==="function")return C.generator}return!1},ee.updateContext=function(y){var C,X=this.type;X.keyword&&y===x.dot?this.exprAllowed=!1:(C=X.updateContext)?C.call(this,y):this.exprAllowed=X.beforeExpr},ee.overrideContext=function(y){this.curContext()!==y&&(this.context[this.context.length-1]=y)},x.parenR.updateContext=x.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var y=this.context.pop();y===Y.b_stat&&this.curContext().token==="function"&&(y=this.context.pop()),this.exprAllowed=!y.isExpr},x.braceL.updateContext=function(y){this.context.push(this.braceIsBlock(y)?Y.b_stat:Y.b_expr),this.exprAllowed=!0},x.dollarBraceL.updateContext=function(){this.context.push(Y.b_tmpl),this.exprAllowed=!0},x.parenL.updateContext=function(y){var C=y===x._if||y===x._for||y===x._with||y===x._while;this.context.push(C?Y.p_stat:Y.p_expr),this.exprAllowed=!0},x.incDec.updateContext=function(){},x._function.updateContext=x._class.updateContext=function(y){y.beforeExpr&&y!==x._else&&!(y===x.semi&&this.curContext()!==Y.p_stat)&&!(y===x._return&&Z.test(this.input.slice(this.lastTokEnd,this.start)))&&!((y===x.colon||y===x.braceL)&&this.curContext()===Y.b_stat)?this.context.push(Y.f_expr):this.context.push(Y.f_stat),this.exprAllowed=!1},x.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},x.backQuote.updateContext=function(){this.curContext()===Y.q_tmpl?this.context.pop():this.context.push(Y.q_tmpl),this.exprAllowed=!1},x.star.updateContext=function(y){if(y===x._function){var C=this.context.length-1;this.context[C]===Y.f_expr?this.context[C]=Y.f_expr_gen:this.context[C]=Y.f_gen}this.exprAllowed=!0},x.name.updateContext=function(y){var C=!1;this.options.ecmaVersion>=6&&y!==x.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(C=!0),this.exprAllowed=C};var F=d.prototype;F.checkPropClash=function(y,C,X){if(!(this.options.ecmaVersion>=9&&y.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(y.computed||y.method||y.shorthand))){var oe=y.key,Ee;switch(oe.type){case"Identifier":Ee=oe.name;break;case"Literal":Ee=String(oe.value);break;default:return}var tt=y.kind;if(this.options.ecmaVersion>=6){Ee==="__proto__"&&tt==="init"&&(C.proto&&(X?X.doubleProto<0&&(X.doubleProto=oe.start):this.raiseRecoverable(oe.start,"Redefinition of __proto__ property")),C.proto=!0);return}Ee="$"+Ee;var ot=C[Ee];if(ot){var Ht;tt==="init"?Ht=this.strict&&ot.init||ot.get||ot.set:Ht=ot.init||ot[tt],Ht&&this.raiseRecoverable(oe.start,"Redefinition of property")}else ot=C[Ee]={init:!1,get:!1,set:!1};ot[tt]=!0}},F.parseExpression=function(y,C){var X=this.start,oe=this.startLoc,Ee=this.parseMaybeAssign(y,C);if(this.type===x.comma){var tt=this.startNodeAt(X,oe);for(tt.expressions=[Ee];this.eat(x.comma);)tt.expressions.push(this.parseMaybeAssign(y,C));return this.finishNode(tt,"SequenceExpression")}return Ee},F.parseMaybeAssign=function(y,C,X){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(y);this.exprAllowed=!1}var oe=!1,Ee=-1,tt=-1,ot=-1;C?(Ee=C.parenthesizedAssign,tt=C.trailingComma,ot=C.doubleProto,C.parenthesizedAssign=C.trailingComma=-1):(C=new k,oe=!0);var Ht=this.start,Kt=this.startLoc;(this.type===x.parenL||this.type===x.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=y==="await");var Wi=this.parseMaybeConditional(y,C);if(X&&(Wi=X.call(this,Wi,Ht,Kt)),this.type.isAssign){var ri=this.startNodeAt(Ht,Kt);return ri.operator=this.value,this.type===x.eq&&(Wi=this.toAssignable(Wi,!1,C)),oe||(C.parenthesizedAssign=C.trailingComma=C.doubleProto=-1),C.shorthandAssign>=Wi.start&&(C.shorthandAssign=-1),this.type===x.eq?this.checkLValPattern(Wi):this.checkLValSimple(Wi),ri.left=Wi,this.next(),ri.right=this.parseMaybeAssign(y),ot>-1&&(C.doubleProto=ot),this.finishNode(ri,"AssignmentExpression")}else oe&&this.checkExpressionErrors(C,!0);return Ee>-1&&(C.parenthesizedAssign=Ee),tt>-1&&(C.trailingComma=tt),Wi},F.parseMaybeConditional=function(y,C){var X=this.start,oe=this.startLoc,Ee=this.parseExprOps(y,C);if(this.checkExpressionErrors(C))return Ee;if(this.eat(x.question)){var tt=this.startNodeAt(X,oe);return tt.test=Ee,tt.consequent=this.parseMaybeAssign(),this.expect(x.colon),tt.alternate=this.parseMaybeAssign(y),this.finishNode(tt,"ConditionalExpression")}return Ee},F.parseExprOps=function(y,C){var X=this.start,oe=this.startLoc,Ee=this.parseMaybeUnary(C,!1,!1,y);return this.checkExpressionErrors(C)||Ee.start===X&&Ee.type==="ArrowFunctionExpression"?Ee:this.parseExprOp(Ee,X,oe,-1,y)},F.parseExprOp=function(y,C,X,oe,Ee){var tt=this.type.binop;if(tt!=null&&(!Ee||this.type!==x._in)&&tt>oe){var ot=this.type===x.logicalOR||this.type===x.logicalAND,Ht=this.type===x.coalesce;Ht&&(tt=x.logicalAND.binop);var Kt=this.value;this.next();var Wi=this.start,ri=this.startLoc,Hi=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,Ee),Wi,ri,tt,Ee),Ro=this.buildBinary(C,X,y,Hi,Kt,ot||Ht);return(ot&&this.type===x.coalesce||Ht&&(this.type===x.logicalOR||this.type===x.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Ro,C,X,oe,Ee)}return y},F.buildBinary=function(y,C,X,oe,Ee,tt){oe.type==="PrivateIdentifier"&&this.raise(oe.start,"Private identifier can only be left side of binary expression");var ot=this.startNodeAt(y,C);return ot.left=X,ot.operator=Ee,ot.right=oe,this.finishNode(ot,tt?"LogicalExpression":"BinaryExpression")},F.parseMaybeUnary=function(y,C,X,oe){var Ee=this.start,tt=this.startLoc,ot;if(this.isContextual("await")&&this.canAwait)ot=this.parseAwait(oe),C=!0;else if(this.type.prefix){var Ht=this.startNode(),Kt=this.type===x.incDec;Ht.operator=this.value,Ht.prefix=!0,this.next(),Ht.argument=this.parseMaybeUnary(null,!0,Kt,oe),this.checkExpressionErrors(y,!0),Kt?this.checkLValSimple(Ht.argument):this.strict&&Ht.operator==="delete"&&J(Ht.argument)?this.raiseRecoverable(Ht.start,"Deleting local variable in strict mode"):Ht.operator==="delete"&&re(Ht.argument)?this.raiseRecoverable(Ht.start,"Private fields can not be deleted"):C=!0,ot=this.finishNode(Ht,Kt?"UpdateExpression":"UnaryExpression")}else if(!C&&this.type===x.privateId)(oe||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),ot=this.parsePrivateIdent(),this.type!==x._in&&this.unexpected();else{if(ot=this.parseExprSubscripts(y,oe),this.checkExpressionErrors(y))return ot;for(;this.type.postfix&&!this.canInsertSemicolon();){var Wi=this.startNodeAt(Ee,tt);Wi.operator=this.value,Wi.prefix=!1,Wi.argument=ot,this.checkLValSimple(ot),this.next(),ot=this.finishNode(Wi,"UpdateExpression")}}if(!X&&this.eat(x.starstar))if(C)this.unexpected(this.lastTokStart);else return this.buildBinary(Ee,tt,ot,this.parseMaybeUnary(null,!1,!1,oe),"**",!1);else return ot};function J(y){return y.type==="Identifier"||y.type==="ParenthesizedExpression"&&J(y.expression)}function re(y){return y.type==="MemberExpression"&&y.property.type==="PrivateIdentifier"||y.type==="ChainExpression"&&re(y.expression)||y.type==="ParenthesizedExpression"&&re(y.expression)}F.parseExprSubscripts=function(y,C){var X=this.start,oe=this.startLoc,Ee=this.parseExprAtom(y,C);if(Ee.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return Ee;var tt=this.parseSubscripts(Ee,X,oe,!1,C);return y&&tt.type==="MemberExpression"&&(y.parenthesizedAssign>=tt.start&&(y.parenthesizedAssign=-1),y.parenthesizedBind>=tt.start&&(y.parenthesizedBind=-1),y.trailingComma>=tt.start&&(y.trailingComma=-1)),tt},F.parseSubscripts=function(y,C,X,oe,Ee){for(var tt=this.options.ecmaVersion>=8&&y.type==="Identifier"&&y.name==="async"&&this.lastTokEnd===y.end&&!this.canInsertSemicolon()&&y.end-y.start===5&&this.potentialArrowAt===y.start,ot=!1;;){var Ht=this.parseSubscript(y,C,X,oe,tt,ot,Ee);if(Ht.optional&&(ot=!0),Ht===y||Ht.type==="ArrowFunctionExpression"){if(ot){var Kt=this.startNodeAt(C,X);Kt.expression=Ht,Ht=this.finishNode(Kt,"ChainExpression")}return Ht}y=Ht}},F.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(x.arrow)},F.parseSubscriptAsyncArrow=function(y,C,X,oe){return this.parseArrowExpression(this.startNodeAt(y,C),X,!0,oe)},F.parseSubscript=function(y,C,X,oe,Ee,tt,ot){var Ht=this.options.ecmaVersion>=11,Kt=Ht&&this.eat(x.questionDot);oe&&Kt&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Wi=this.eat(x.bracketL);if(Wi||Kt&&this.type!==x.parenL&&this.type!==x.backQuote||this.eat(x.dot)){var ri=this.startNodeAt(C,X);ri.object=y,Wi?(ri.property=this.parseExpression(),this.expect(x.bracketR)):this.type===x.privateId&&y.type!=="Super"?ri.property=this.parsePrivateIdent():ri.property=this.parseIdent(this.options.allowReserved!=="never"),ri.computed=!!Wi,Ht&&(ri.optional=Kt),y=this.finishNode(ri,"MemberExpression")}else if(!oe&&this.eat(x.parenL)){var Hi=new k,Ro=this.yieldPos,ah=this.awaitPos,Bo=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var po=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1,Hi);if(Ee&&!Kt&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Hi,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Ro,this.awaitPos=ah,this.awaitIdentPos=Bo,this.parseSubscriptAsyncArrow(C,X,po,ot);this.checkExpressionErrors(Hi,!0),this.yieldPos=Ro||this.yieldPos,this.awaitPos=ah||this.awaitPos,this.awaitIdentPos=Bo||this.awaitIdentPos;var yl=this.startNodeAt(C,X);yl.callee=y,yl.arguments=po,Ht&&(yl.optional=Kt),y=this.finishNode(yl,"CallExpression")}else if(this.type===x.backQuote){(Kt||tt)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var vl=this.startNodeAt(C,X);vl.tag=y,vl.quasi=this.parseTemplate({isTagged:!0}),y=this.finishNode(vl,"TaggedTemplateExpression")}return y},F.parseExprAtom=function(y,C,X){this.type===x.slash&&this.readRegexp();var oe,Ee=this.potentialArrowAt===this.start;switch(this.type){case x._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),oe=this.startNode(),this.next(),this.type===x.parenL&&!this.allowDirectSuper&&this.raise(oe.start,"super() call outside constructor of a subclass"),this.type!==x.dot&&this.type!==x.bracketL&&this.type!==x.parenL&&this.unexpected(),this.finishNode(oe,"Super");case x._this:return oe=this.startNode(),this.next(),this.finishNode(oe,"ThisExpression");case x.name:var tt=this.start,ot=this.startLoc,Ht=this.containsEsc,Kt=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Ht&&Kt.name==="async"&&!this.canInsertSemicolon()&&this.eat(x._function))return this.overrideContext(Y.f_expr),this.parseFunction(this.startNodeAt(tt,ot),0,!1,!0,C);if(Ee&&!this.canInsertSemicolon()){if(this.eat(x.arrow))return this.parseArrowExpression(this.startNodeAt(tt,ot),[Kt],!1,C);if(this.options.ecmaVersion>=8&&Kt.name==="async"&&this.type===x.name&&!Ht&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Kt=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(x.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(tt,ot),[Kt],!0,C)}return Kt;case x.regexp:var Wi=this.value;return oe=this.parseLiteral(Wi.value),oe.regex={pattern:Wi.pattern,flags:Wi.flags},oe;case x.num:case x.string:return this.parseLiteral(this.value);case x._null:case x._true:case x._false:return oe=this.startNode(),oe.value=this.type===x._null?null:this.type===x._true,oe.raw=this.type.keyword,this.next(),this.finishNode(oe,"Literal");case x.parenL:var ri=this.start,Hi=this.parseParenAndDistinguishExpression(Ee,C);return y&&(y.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Hi)&&(y.parenthesizedAssign=ri),y.parenthesizedBind<0&&(y.parenthesizedBind=ri)),Hi;case x.bracketL:return oe=this.startNode(),this.next(),oe.elements=this.parseExprList(x.bracketR,!0,!0,y),this.finishNode(oe,"ArrayExpression");case x.braceL:return this.overrideContext(Y.b_expr),this.parseObj(!1,y);case x._function:return oe=this.startNode(),this.next(),this.parseFunction(oe,0);case x._class:return this.parseClass(this.startNode(),!1);case x._new:return this.parseNew();case x.backQuote:return this.parseTemplate();case x._import:return this.options.ecmaVersion>=11?this.parseExprImport(X):this.unexpected();default:return this.parseExprAtomDefault()}},F.parseExprAtomDefault=function(){this.unexpected()},F.parseExprImport=function(y){var C=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===x.parenL&&!y)return this.parseDynamicImport(C);if(this.type===x.dot){var X=this.startNodeAt(C.start,C.loc&&C.loc.start);return X.name="import",C.meta=this.finishNode(X,"Identifier"),this.parseImportMeta(C)}else this.unexpected()},F.parseDynamicImport=function(y){if(this.next(),y.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(x.parenR)?y.options=null:(this.expect(x.comma),this.afterTrailingComma(x.parenR)?y.options=null:(y.options=this.parseMaybeAssign(),this.eat(x.parenR)||(this.expect(x.comma),this.afterTrailingComma(x.parenR)||this.unexpected())));else if(!this.eat(x.parenR)){var C=this.start;this.eat(x.comma)&&this.eat(x.parenR)?this.raiseRecoverable(C,"Trailing comma is not allowed in import()"):this.unexpected(C)}return this.finishNode(y,"ImportExpression")},F.parseImportMeta=function(y){this.next();var C=this.containsEsc;return y.property=this.parseIdent(!0),y.property.name!=="meta"&&this.raiseRecoverable(y.property.start,"The only valid meta property for import is 'import.meta'"),C&&this.raiseRecoverable(y.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(y.start,"Cannot use 'import.meta' outside a module"),this.finishNode(y,"MetaProperty")},F.parseLiteral=function(y){var C=this.startNode();return C.value=y,C.raw=this.input.slice(this.start,this.end),C.raw.charCodeAt(C.raw.length-1)===110&&(C.bigint=C.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(C,"Literal")},F.parseParenExpression=function(){this.expect(x.parenL);var y=this.parseExpression();return this.expect(x.parenR),y},F.shouldParseArrow=function(y){return!this.canInsertSemicolon()},F.parseParenAndDistinguishExpression=function(y,C){var X=this.start,oe=this.startLoc,Ee,tt=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var ot=this.start,Ht=this.startLoc,Kt=[],Wi=!0,ri=!1,Hi=new k,Ro=this.yieldPos,ah=this.awaitPos,Bo;for(this.yieldPos=0,this.awaitPos=0;this.type!==x.parenR;)if(Wi?Wi=!1:this.expect(x.comma),tt&&this.afterTrailingComma(x.parenR,!0)){ri=!0;break}else if(this.type===x.ellipsis){Bo=this.start,Kt.push(this.parseParenItem(this.parseRestBinding())),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Kt.push(this.parseMaybeAssign(!1,Hi,this.parseParenItem));var po=this.lastTokEnd,yl=this.lastTokEndLoc;if(this.expect(x.parenR),y&&this.shouldParseArrow(Kt)&&this.eat(x.arrow))return this.checkPatternErrors(Hi,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Ro,this.awaitPos=ah,this.parseParenArrowList(X,oe,Kt,C);(!Kt.length||ri)&&this.unexpected(this.lastTokStart),Bo&&this.unexpected(Bo),this.checkExpressionErrors(Hi,!0),this.yieldPos=Ro||this.yieldPos,this.awaitPos=ah||this.awaitPos,Kt.length>1?(Ee=this.startNodeAt(ot,Ht),Ee.expressions=Kt,this.finishNodeAt(Ee,"SequenceExpression",po,yl)):Ee=Kt[0]}else Ee=this.parseParenExpression();if(this.options.preserveParens){var vl=this.startNodeAt(X,oe);return vl.expression=Ee,this.finishNode(vl,"ParenthesizedExpression")}else return Ee},F.parseParenItem=function(y){return y},F.parseParenArrowList=function(y,C,X,oe){return this.parseArrowExpression(this.startNodeAt(y,C),X,!1,oe)};var ce=[];F.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var y=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===x.dot){var C=this.startNodeAt(y.start,y.loc&&y.loc.start);C.name="new",y.meta=this.finishNode(C,"Identifier"),this.next();var X=this.containsEsc;return y.property=this.parseIdent(!0),y.property.name!=="target"&&this.raiseRecoverable(y.property.start,"The only valid meta property for new is 'new.target'"),X&&this.raiseRecoverable(y.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(y.start,"'new.target' can only be used in functions and class static block"),this.finishNode(y,"MetaProperty")}var oe=this.start,Ee=this.startLoc;return y.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),oe,Ee,!0,!1),this.eat(x.parenL)?y.arguments=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1):y.arguments=ce,this.finishNode(y,"NewExpression")},F.parseTemplateElement=function(y){var C=y.isTagged,X=this.startNode();return this.type===x.invalidTemplate?(C||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),X.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):X.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),X.tail=this.type===x.backQuote,this.finishNode(X,"TemplateElement")},F.parseTemplate=function(y){y===void 0&&(y={});var C=y.isTagged;C===void 0&&(C=!1);var X=this.startNode();this.next(),X.expressions=[];var oe=this.parseTemplateElement({isTagged:C});for(X.quasis=[oe];!oe.tail;)this.type===x.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(x.dollarBraceL),X.expressions.push(this.parseExpression()),this.expect(x.braceR),X.quasis.push(oe=this.parseTemplateElement({isTagged:C}));return this.next(),this.finishNode(X,"TemplateLiteral")},F.isAsyncProp=function(y){return!y.computed&&y.key.type==="Identifier"&&y.key.name==="async"&&(this.type===x.name||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===x.star)&&!Z.test(this.input.slice(this.lastTokEnd,this.start))},F.parseObj=function(y,C){var X=this.startNode(),oe=!0,Ee={};for(X.properties=[],this.next();!this.eat(x.braceR);){if(oe)oe=!1;else if(this.expect(x.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(x.braceR))break;var tt=this.parseProperty(y,C);y||this.checkPropClash(tt,Ee,C),X.properties.push(tt)}return this.finishNode(X,y?"ObjectPattern":"ObjectExpression")},F.parseProperty=function(y,C){var X=this.startNode(),oe,Ee,tt,ot;if(this.options.ecmaVersion>=9&&this.eat(x.ellipsis))return y?(X.argument=this.parseIdent(!1),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(X,"RestElement")):(X.argument=this.parseMaybeAssign(!1,C),this.type===x.comma&&C&&C.trailingComma<0&&(C.trailingComma=this.start),this.finishNode(X,"SpreadElement"));this.options.ecmaVersion>=6&&(X.method=!1,X.shorthand=!1,(y||C)&&(tt=this.start,ot=this.startLoc),y||(oe=this.eat(x.star)));var Ht=this.containsEsc;return this.parsePropertyName(X),!y&&!Ht&&this.options.ecmaVersion>=8&&!oe&&this.isAsyncProp(X)?(Ee=!0,oe=this.options.ecmaVersion>=9&&this.eat(x.star),this.parsePropertyName(X)):Ee=!1,this.parsePropertyValue(X,y,oe,Ee,tt,ot,C,Ht),this.finishNode(X,"Property")},F.parseGetterSetter=function(y){var C=y.key.name;this.parsePropertyName(y),y.value=this.parseMethod(!1),y.kind=C;var X=y.kind==="get"?0:1;if(y.value.params.length!==X){var oe=y.value.start;y.kind==="get"?this.raiseRecoverable(oe,"getter should have no params"):this.raiseRecoverable(oe,"setter should have exactly one param")}else y.kind==="set"&&y.value.params[0].type==="RestElement"&&this.raiseRecoverable(y.value.params[0].start,"Setter cannot use rest params")},F.parsePropertyValue=function(y,C,X,oe,Ee,tt,ot,Ht){(X||oe)&&this.type===x.colon&&this.unexpected(),this.eat(x.colon)?(y.value=C?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,ot),y.kind="init"):this.options.ecmaVersion>=6&&this.type===x.parenL?(C&&this.unexpected(),y.method=!0,y.value=this.parseMethod(X,oe),y.kind="init"):!C&&!Ht&&this.options.ecmaVersion>=5&&!y.computed&&y.key.type==="Identifier"&&(y.key.name==="get"||y.key.name==="set")&&this.type!==x.comma&&this.type!==x.braceR&&this.type!==x.eq?((X||oe)&&this.unexpected(),this.parseGetterSetter(y)):this.options.ecmaVersion>=6&&!y.computed&&y.key.type==="Identifier"?((X||oe)&&this.unexpected(),this.checkUnreserved(y.key),y.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=Ee),C?y.value=this.parseMaybeDefault(Ee,tt,this.copyNode(y.key)):this.type===x.eq&&ot?(ot.shorthandAssign<0&&(ot.shorthandAssign=this.start),y.value=this.parseMaybeDefault(Ee,tt,this.copyNode(y.key))):y.value=this.copyNode(y.key),y.kind="init",y.shorthand=!0):this.unexpected()},F.parsePropertyName=function(y){if(this.options.ecmaVersion>=6){if(this.eat(x.bracketL))return y.computed=!0,y.key=this.parseMaybeAssign(),this.expect(x.bracketR),y.key;y.computed=!1}return y.key=this.type===x.num||this.type===x.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},F.initFunction=function(y){y.id=null,this.options.ecmaVersion>=6&&(y.generator=y.expression=!1),this.options.ecmaVersion>=8&&(y.async=!1)},F.parseMethod=function(y,C,X){var oe=this.startNode(),Ee=this.yieldPos,tt=this.awaitPos,ot=this.awaitIdentPos;return this.initFunction(oe),this.options.ecmaVersion>=6&&(oe.generator=y),this.options.ecmaVersion>=8&&(oe.async=!!C),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ke(C,oe.generator)|Ft|(X?V:0)),this.expect(x.parenL),oe.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(oe,!1,!0,!1),this.yieldPos=Ee,this.awaitPos=tt,this.awaitIdentPos=ot,this.finishNode(oe,"FunctionExpression")},F.parseArrowExpression=function(y,C,X,oe){var Ee=this.yieldPos,tt=this.awaitPos,ot=this.awaitIdentPos;return this.enterScope(ke(X,!1)|wt),this.initFunction(y),this.options.ecmaVersion>=8&&(y.async=!!X),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,y.params=this.toAssignableList(C,!0),this.parseFunctionBody(y,!0,!1,oe),this.yieldPos=Ee,this.awaitPos=tt,this.awaitIdentPos=ot,this.finishNode(y,"ArrowFunctionExpression")},F.parseFunctionBody=function(y,C,X,oe){var Ee=C&&this.type!==x.braceL,tt=this.strict,ot=!1;if(Ee)y.body=this.parseMaybeAssign(oe),y.expression=!0,this.checkParams(y,!1);else{var Ht=this.options.ecmaVersion>=7&&!this.isSimpleParamList(y.params);(!tt||Ht)&&(ot=this.strictDirective(this.end),ot&&Ht&&this.raiseRecoverable(y.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Kt=this.labels;this.labels=[],ot&&(this.strict=!0),this.checkParams(y,!tt&&!ot&&!C&&!X&&this.isSimpleParamList(y.params)),this.strict&&y.id&&this.checkLValSimple(y.id,u),y.body=this.parseBlock(!1,void 0,ot&&!tt),y.expression=!1,this.adaptDirectivePrologue(y.body.body),this.labels=Kt}this.exitScope()},F.isSimpleParamList=function(y){for(var C=0,X=y;C<X.length;C+=1){var oe=X[C];if(oe.type!=="Identifier")return!1}return!0},F.checkParams=function(y,C){for(var X=Object.create(null),oe=0,Ee=y.params;oe<Ee.length;oe+=1){var tt=Ee[oe];this.checkLValInnerPattern(tt,Xe,C?null:X)}},F.parseExprList=function(y,C,X,oe){for(var Ee=[],tt=!0;!this.eat(y);){if(tt)tt=!1;else if(this.expect(x.comma),C&&this.afterTrailingComma(y))break;var ot=void 0;X&&this.type===x.comma?ot=null:this.type===x.ellipsis?(ot=this.parseSpread(oe),oe&&this.type===x.comma&&oe.trailingComma<0&&(oe.trailingComma=this.start)):ot=this.parseMaybeAssign(!1,oe),Ee.push(ot)}return Ee},F.checkUnreserved=function(y){var C=y.start,X=y.end,oe=y.name;if(this.inGenerator&&oe==="yield"&&this.raiseRecoverable(C,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&oe==="await"&&this.raiseRecoverable(C,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&_e)&&oe==="arguments"&&this.raiseRecoverable(C,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(oe==="arguments"||oe==="await")&&this.raise(C,"Cannot use "+oe+" in class static initialization block"),this.keywords.test(oe)&&this.raise(C,"Unexpected keyword '"+oe+"'"),!(this.options.ecmaVersion<6&&this.input.slice(C,X).indexOf("\\")!==-1)){var Ee=this.strict?this.reservedWordsStrict:this.reservedWords;Ee.test(oe)&&(!this.inAsync&&oe==="await"&&this.raiseRecoverable(C,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(C,"The keyword '"+oe+"' is reserved"))}},F.parseIdent=function(y){var C=this.parseIdentNode();return this.next(!!y),this.finishNode(C,"Identifier"),y||(this.checkUnreserved(C),C.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=C.start)),C},F.parseIdentNode=function(){var y=this.startNode();return this.type===x.name?y.name=this.value:this.type.keyword?(y.name=this.type.keyword,(y.name==="class"||y.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=x.name):this.unexpected(),y},F.parsePrivateIdent=function(){var y=this.startNode();return this.type===x.privateId?y.name=this.value:this.unexpected(),this.next(),this.finishNode(y,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(y.start,"Private field '#"+y.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(y)),y},F.parseYield=function(y){this.yieldPos||(this.yieldPos=this.start);var C=this.startNode();return this.next(),this.type===x.semi||this.canInsertSemicolon()||this.type!==x.star&&!this.type.startsExpr?(C.delegate=!1,C.argument=null):(C.delegate=this.eat(x.star),C.argument=this.parseMaybeAssign(y)),this.finishNode(C,"YieldExpression")},F.parseAwait=function(y){this.awaitPos||(this.awaitPos=this.start);var C=this.startNode();return this.next(),C.argument=this.parseMaybeUnary(null,!0,!1,y),this.finishNode(C,"AwaitExpression")};var ne=d.prototype;ne.raise=function(y,C){var X=Et(this.input,y);C+=" ("+X.line+":"+X.column+")",this.sourceFile&&(C+=" in "+this.sourceFile);var oe=new SyntaxError(C);throw oe.pos=y,oe.loc=X,oe.raisedAt=this.pos,oe},ne.raiseRecoverable=ne.raise,ne.curPosition=function(){if(this.options.locations)return new Ct(this.curLine,this.pos-this.lineStart)};var ye=d.prototype,we=function(C){this.flags=C,this.var=[],this.lexical=[],this.functions=[]};ye.enterScope=function(y){this.scopeStack.push(new we(y))},ye.exitScope=function(){this.scopeStack.pop()},ye.treatFunctionsAsVarInScope=function(y){return y.flags&Pe||!this.inModule&&y.flags&Yt},ye.declareName=function(y,C,X){var oe=!1;if(C===rt){var Ee=this.currentScope();oe=Ee.lexical.indexOf(y)>-1||Ee.functions.indexOf(y)>-1||Ee.var.indexOf(y)>-1,Ee.lexical.push(y),this.inModule&&Ee.flags&Yt&&delete this.undefinedExports[y]}else if(C===Xt){var tt=this.currentScope();tt.lexical.push(y)}else if(C===Dn){var ot=this.currentScope();this.treatFunctionsAsVar?oe=ot.lexical.indexOf(y)>-1:oe=ot.lexical.indexOf(y)>-1||ot.var.indexOf(y)>-1,ot.functions.push(y)}else for(var Ht=this.scopeStack.length-1;Ht>=0;--Ht){var Kt=this.scopeStack[Ht];if(Kt.lexical.indexOf(y)>-1&&!(Kt.flags&Gt&&Kt.lexical[0]===y)||!this.treatFunctionsAsVarInScope(Kt)&&Kt.functions.indexOf(y)>-1){oe=!0;break}if(Kt.var.push(y),this.inModule&&Kt.flags&Yt&&delete this.undefinedExports[y],Kt.flags&_e)break}oe&&this.raiseRecoverable(X,"Identifier '"+y+"' has already been declared")},ye.checkLocalExport=function(y){this.scopeStack[0].lexical.indexOf(y.name)===-1&&this.scopeStack[0].var.indexOf(y.name)===-1&&(this.undefinedExports[y.name]=y)},ye.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ye.currentVarScope=function(){for(var y=this.scopeStack.length-1;;y--){var C=this.scopeStack[y];if(C.flags&(_e|fe|te))return C}},ye.currentThisScope=function(){for(var y=this.scopeStack.length-1;;y--){var C=this.scopeStack[y];if(C.flags&(_e|fe|te)&&!(C.flags&wt))return C}};var Ve=function(C,X,oe){this.type="",this.start=X,this.end=0,C.options.locations&&(this.loc=new dt(C,oe)),C.options.directSourceFile&&(this.sourceFile=C.options.directSourceFile),C.options.ranges&&(this.range=[X,0])},Be=d.prototype;Be.startNode=function(){return new Ve(this,this.start,this.startLoc)},Be.startNodeAt=function(y,C){return new Ve(this,y,C)};function z(y,C,X,oe){return y.type=C,y.end=X,this.options.locations&&(y.loc.end=oe),this.options.ranges&&(y.range[1]=X),y}Be.finishNode=function(y,C){return z.call(this,y,C,this.lastTokEnd,this.lastTokEndLoc)},Be.finishNodeAt=function(y,C,X,oe){return z.call(this,y,C,X,oe)},Be.copyNode=function(y){var C=new Ve(this,y.start,this.startLoc);for(var X in y)C[X]=y[X];return C};var j="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",le="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",xe=le+" Extended_Pictographic",Ce=xe,Ue=Ce+" EBase EComp EMod EPres ExtPict",je=Ue,nt=je,yt={9:le,10:xe,11:Ce,12:Ue,13:je,14:nt},Vt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",it={9:"",10:"",11:"",12:"",13:"",14:Vt},at="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Tt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",At=Tt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ft=At+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Rt=ft+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Jt=Rt+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",hi=Jt+" "+j,si={9:Tt,10:At,11:ft,12:Rt,13:Jt,14:hi},di={};function $t(y){var C=di[y]={binary:De(yt[y]+" "+at),binaryOfStrings:De(it[y]),nonBinary:{General_Category:De(at),Script:De(si[y])}};C.nonBinary.Script_Extensions=C.nonBinary.Script,C.nonBinary.gc=C.nonBinary.General_Category,C.nonBinary.sc=C.nonBinary.Script,C.nonBinary.scx=C.nonBinary.Script_Extensions}for(var Nn=0,Mi=[9,10,11,12,13,14];Nn<Mi.length;Nn+=1){var cs=Mi[Nn];$t(cs)}var Bt=d.prototype,ls=function(C,X){this.parent=C,this.base=X||this};ls.prototype.separatedFrom=function(C){for(var X=this;X;X=X.parent)for(var oe=C;oe;oe=oe.parent)if(X.base===oe.base&&X!==oe)return!0;return!1},ls.prototype.sibling=function(){return new ls(this.parent,this.base)};var ds=function(C){this.parser=C,this.validFlags="gim"+(C.options.ecmaVersion>=6?"uy":"")+(C.options.ecmaVersion>=9?"s":"")+(C.options.ecmaVersion>=13?"d":"")+(C.options.ecmaVersion>=15?"v":""),this.unicodeProperties=di[C.options.ecmaVersion>=14?14:C.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};ds.prototype.reset=function(C,X,oe){var Ee=oe.indexOf("v")!==-1,tt=oe.indexOf("u")!==-1;this.start=C|0,this.source=X+"",this.flags=oe,Ee&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=tt&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=tt&&this.parser.options.ecmaVersion>=9)},ds.prototype.raise=function(C){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+C)},ds.prototype.at=function(C,X){X===void 0&&(X=!1);var oe=this.source,Ee=oe.length;if(C>=Ee)return-1;var tt=oe.charCodeAt(C);if(!(X||this.switchU)||tt<=55295||tt>=57344||C+1>=Ee)return tt;var ot=oe.charCodeAt(C+1);return ot>=56320&&ot<=57343?(tt<<10)+ot-56613888:tt},ds.prototype.nextIndex=function(C,X){X===void 0&&(X=!1);var oe=this.source,Ee=oe.length;if(C>=Ee)return Ee;var tt=oe.charCodeAt(C),ot;return!(X||this.switchU)||tt<=55295||tt>=57344||C+1>=Ee||(ot=oe.charCodeAt(C+1))<56320||ot>57343?C+1:C+2},ds.prototype.current=function(C){return C===void 0&&(C=!1),this.at(this.pos,C)},ds.prototype.lookahead=function(C){return C===void 0&&(C=!1),this.at(this.nextIndex(this.pos,C),C)},ds.prototype.advance=function(C){C===void 0&&(C=!1),this.pos=this.nextIndex(this.pos,C)},ds.prototype.eat=function(C,X){return X===void 0&&(X=!1),this.current(X)===C?(this.advance(X),!0):!1},ds.prototype.eatChars=function(C,X){X===void 0&&(X=!1);for(var oe=this.pos,Ee=0,tt=C;Ee<tt.length;Ee+=1){var ot=tt[Ee],Ht=this.at(oe,X);if(Ht===-1||Ht!==ot)return!1;oe=this.nextIndex(oe,X)}return this.pos=oe,!0},Bt.validateRegExpFlags=function(y){for(var C=y.validFlags,X=y.flags,oe=!1,Ee=!1,tt=0;tt<X.length;tt++){var ot=X.charAt(tt);C.indexOf(ot)===-1&&this.raise(y.start,"Invalid regular expression flag"),X.indexOf(ot,tt+1)>-1&&this.raise(y.start,"Duplicate regular expression flag"),ot==="u"&&(oe=!0),ot==="v"&&(Ee=!0)}this.options.ecmaVersion>=15&&oe&&Ee&&this.raise(y.start,"Invalid regular expression flag")};function Ds(y){for(var C in y)return!0;return!1}Bt.validateRegExpPattern=function(y){this.regexp_pattern(y),!y.switchN&&this.options.ecmaVersion>=9&&Ds(y.groupNames)&&(y.switchN=!0,this.regexp_pattern(y))},Bt.regexp_pattern=function(y){y.pos=0,y.lastIntValue=0,y.lastStringValue="",y.lastAssertionIsQuantifiable=!1,y.numCapturingParens=0,y.maxBackReference=0,y.groupNames=Object.create(null),y.backReferenceNames.length=0,y.branchID=null,this.regexp_disjunction(y),y.pos!==y.source.length&&(y.eat(41)&&y.raise("Unmatched ')'"),(y.eat(93)||y.eat(125))&&y.raise("Lone quantifier brackets")),y.maxBackReference>y.numCapturingParens&&y.raise("Invalid escape");for(var C=0,X=y.backReferenceNames;C<X.length;C+=1){var oe=X[C];y.groupNames[oe]||y.raise("Invalid named capture referenced")}},Bt.regexp_disjunction=function(y){var C=this.options.ecmaVersion>=16;for(C&&(y.branchID=new ls(y.branchID,null)),this.regexp_alternative(y);y.eat(124);)C&&(y.branchID=y.branchID.sibling()),this.regexp_alternative(y);C&&(y.branchID=y.branchID.parent),this.regexp_eatQuantifier(y,!0)&&y.raise("Nothing to repeat"),y.eat(123)&&y.raise("Lone quantifier brackets")},Bt.regexp_alternative=function(y){for(;y.pos<y.source.length&&this.regexp_eatTerm(y););},Bt.regexp_eatTerm=function(y){return this.regexp_eatAssertion(y)?(y.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(y)&&y.switchU&&y.raise("Invalid quantifier"),!0):(y.switchU?this.regexp_eatAtom(y):this.regexp_eatExtendedAtom(y))?(this.regexp_eatQuantifier(y),!0):!1},Bt.regexp_eatAssertion=function(y){var C=y.pos;if(y.lastAssertionIsQuantifiable=!1,y.eat(94)||y.eat(36))return!0;if(y.eat(92)){if(y.eat(66)||y.eat(98))return!0;y.pos=C}if(y.eat(40)&&y.eat(63)){var X=!1;if(this.options.ecmaVersion>=9&&(X=y.eat(60)),y.eat(61)||y.eat(33))return this.regexp_disjunction(y),y.eat(41)||y.raise("Unterminated group"),y.lastAssertionIsQuantifiable=!X,!0}return y.pos=C,!1},Bt.regexp_eatQuantifier=function(y,C){return C===void 0&&(C=!1),this.regexp_eatQuantifierPrefix(y,C)?(y.eat(63),!0):!1},Bt.regexp_eatQuantifierPrefix=function(y,C){return y.eat(42)||y.eat(43)||y.eat(63)||this.regexp_eatBracedQuantifier(y,C)},Bt.regexp_eatBracedQuantifier=function(y,C){var X=y.pos;if(y.eat(123)){var oe=0,Ee=-1;if(this.regexp_eatDecimalDigits(y)&&(oe=y.lastIntValue,y.eat(44)&&this.regexp_eatDecimalDigits(y)&&(Ee=y.lastIntValue),y.eat(125)))return Ee!==-1&&Ee<oe&&!C&&y.raise("numbers out of order in {} quantifier"),!0;y.switchU&&!C&&y.raise("Incomplete quantifier"),y.pos=X}return!1},Bt.regexp_eatAtom=function(y){return this.regexp_eatPatternCharacters(y)||y.eat(46)||this.regexp_eatReverseSolidusAtomEscape(y)||this.regexp_eatCharacterClass(y)||this.regexp_eatUncapturingGroup(y)||this.regexp_eatCapturingGroup(y)},Bt.regexp_eatReverseSolidusAtomEscape=function(y){var C=y.pos;if(y.eat(92)){if(this.regexp_eatAtomEscape(y))return!0;y.pos=C}return!1},Bt.regexp_eatUncapturingGroup=function(y){var C=y.pos;if(y.eat(40)){if(y.eat(63)){if(this.options.ecmaVersion>=16){var X=this.regexp_eatModifiers(y),oe=y.eat(45);if(X||oe){for(var Ee=0;Ee<X.length;Ee++){var tt=X.charAt(Ee);X.indexOf(tt,Ee+1)>-1&&y.raise("Duplicate regular expression modifiers")}if(oe){var ot=this.regexp_eatModifiers(y);!X&&!ot&&y.current()===58&&y.raise("Invalid regular expression modifiers");for(var Ht=0;Ht<ot.length;Ht++){var Kt=ot.charAt(Ht);(ot.indexOf(Kt,Ht+1)>-1||X.indexOf(Kt)>-1)&&y.raise("Duplicate regular expression modifiers")}}}}if(y.eat(58)){if(this.regexp_disjunction(y),y.eat(41))return!0;y.raise("Unterminated group")}}y.pos=C}return!1},Bt.regexp_eatCapturingGroup=function(y){if(y.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(y):y.current()===63&&y.raise("Invalid group"),this.regexp_disjunction(y),y.eat(41))return y.numCapturingParens+=1,!0;y.raise("Unterminated group")}return!1},Bt.regexp_eatModifiers=function(y){for(var C="",X=0;(X=y.current())!==-1&&Pr(X);)C+=et(X),y.advance();return C};function Pr(y){return y===105||y===109||y===115}Bt.regexp_eatExtendedAtom=function(y){return y.eat(46)||this.regexp_eatReverseSolidusAtomEscape(y)||this.regexp_eatCharacterClass(y)||this.regexp_eatUncapturingGroup(y)||this.regexp_eatCapturingGroup(y)||this.regexp_eatInvalidBracedQuantifier(y)||this.regexp_eatExtendedPatternCharacter(y)},Bt.regexp_eatInvalidBracedQuantifier=function(y){return this.regexp_eatBracedQuantifier(y,!0)&&y.raise("Nothing to repeat"),!1},Bt.regexp_eatSyntaxCharacter=function(y){var C=y.current();return Aa(C)?(y.lastIntValue=C,y.advance(),!0):!1};function Aa(y){return y===36||y>=40&&y<=43||y===46||y===63||y>=91&&y<=94||y>=123&&y<=125}Bt.regexp_eatPatternCharacters=function(y){for(var C=y.pos,X=0;(X=y.current())!==-1&&!Aa(X);)y.advance();return y.pos!==C},Bt.regexp_eatExtendedPatternCharacter=function(y){var C=y.current();return C!==-1&&C!==36&&!(C>=40&&C<=43)&&C!==46&&C!==63&&C!==91&&C!==94&&C!==124?(y.advance(),!0):!1},Bt.regexp_groupSpecifier=function(y){if(y.eat(63)){this.regexp_eatGroupName(y)||y.raise("Invalid group");var C=this.options.ecmaVersion>=16,X=y.groupNames[y.lastStringValue];if(X)if(C)for(var oe=0,Ee=X;oe<Ee.length;oe+=1){var tt=Ee[oe];tt.separatedFrom(y.branchID)||y.raise("Duplicate capture group name")}else y.raise("Duplicate capture group name");C?(X||(y.groupNames[y.lastStringValue]=[])).push(y.branchID):y.groupNames[y.lastStringValue]=!0}},Bt.regexp_eatGroupName=function(y){if(y.lastStringValue="",y.eat(60)){if(this.regexp_eatRegExpIdentifierName(y)&&y.eat(62))return!0;y.raise("Invalid capture group name")}return!1},Bt.regexp_eatRegExpIdentifierName=function(y){if(y.lastStringValue="",this.regexp_eatRegExpIdentifierStart(y)){for(y.lastStringValue+=et(y.lastIntValue);this.regexp_eatRegExpIdentifierPart(y);)y.lastStringValue+=et(y.lastIntValue);return!0}return!1},Bt.regexp_eatRegExpIdentifierStart=function(y){var C=y.pos,X=this.options.ecmaVersion>=11,oe=y.current(X);return y.advance(X),oe===92&&this.regexp_eatRegExpUnicodeEscapeSequence(y,X)&&(oe=y.lastIntValue),qr(oe)?(y.lastIntValue=oe,!0):(y.pos=C,!1)};function qr(y){return A(y,!0)||y===36||y===95}Bt.regexp_eatRegExpIdentifierPart=function(y){var C=y.pos,X=this.options.ecmaVersion>=11,oe=y.current(X);return y.advance(X),oe===92&&this.regexp_eatRegExpUnicodeEscapeSequence(y,X)&&(oe=y.lastIntValue),Tr(oe)?(y.lastIntValue=oe,!0):(y.pos=C,!1)};function Tr(y){return P(y,!0)||y===36||y===95||y===8204||y===8205}Bt.regexp_eatAtomEscape=function(y){return this.regexp_eatBackReference(y)||this.regexp_eatCharacterClassEscape(y)||this.regexp_eatCharacterEscape(y)||y.switchN&&this.regexp_eatKGroupName(y)?!0:(y.switchU&&(y.current()===99&&y.raise("Invalid unicode escape"),y.raise("Invalid escape")),!1)},Bt.regexp_eatBackReference=function(y){var C=y.pos;if(this.regexp_eatDecimalEscape(y)){var X=y.lastIntValue;if(y.switchU)return X>y.maxBackReference&&(y.maxBackReference=X),!0;if(X<=y.numCapturingParens)return!0;y.pos=C}return!1},Bt.regexp_eatKGroupName=function(y){if(y.eat(107)){if(this.regexp_eatGroupName(y))return y.backReferenceNames.push(y.lastStringValue),!0;y.raise("Invalid named reference")}return!1},Bt.regexp_eatCharacterEscape=function(y){return this.regexp_eatControlEscape(y)||this.regexp_eatCControlLetter(y)||this.regexp_eatZero(y)||this.regexp_eatHexEscapeSequence(y)||this.regexp_eatRegExpUnicodeEscapeSequence(y,!1)||!y.switchU&&this.regexp_eatLegacyOctalEscapeSequence(y)||this.regexp_eatIdentityEscape(y)},Bt.regexp_eatCControlLetter=function(y){var C=y.pos;if(y.eat(99)){if(this.regexp_eatControlLetter(y))return!0;y.pos=C}return!1},Bt.regexp_eatZero=function(y){return y.current()===48&&!uo(y.lookahead())?(y.lastIntValue=0,y.advance(),!0):!1},Bt.regexp_eatControlEscape=function(y){var C=y.current();return C===116?(y.lastIntValue=9,y.advance(),!0):C===110?(y.lastIntValue=10,y.advance(),!0):C===118?(y.lastIntValue=11,y.advance(),!0):C===102?(y.lastIntValue=12,y.advance(),!0):C===114?(y.lastIntValue=13,y.advance(),!0):!1},Bt.regexp_eatControlLetter=function(y){var C=y.current();return ur(C)?(y.lastIntValue=C%32,y.advance(),!0):!1};function ur(y){return y>=65&&y<=90||y>=97&&y<=122}Bt.regexp_eatRegExpUnicodeEscapeSequence=function(y,C){C===void 0&&(C=!1);var X=y.pos,oe=C||y.switchU;if(y.eat(117)){if(this.regexp_eatFixedHexDigits(y,4)){var Ee=y.lastIntValue;if(oe&&Ee>=55296&&Ee<=56319){var tt=y.pos;if(y.eat(92)&&y.eat(117)&&this.regexp_eatFixedHexDigits(y,4)){var ot=y.lastIntValue;if(ot>=56320&&ot<=57343)return y.lastIntValue=(Ee-55296)*1024+(ot-56320)+65536,!0}y.pos=tt,y.lastIntValue=Ee}return!0}if(oe&&y.eat(123)&&this.regexp_eatHexDigits(y)&&y.eat(125)&&yr(y.lastIntValue))return!0;oe&&y.raise("Invalid unicode escape"),y.pos=X}return!1};function yr(y){return y>=0&&y<=1114111}Bt.regexp_eatIdentityEscape=function(y){if(y.switchU)return this.regexp_eatSyntaxCharacter(y)?!0:y.eat(47)?(y.lastIntValue=47,!0):!1;var C=y.current();return C!==99&&(!y.switchN||C!==107)?(y.lastIntValue=C,y.advance(),!0):!1},Bt.regexp_eatDecimalEscape=function(y){y.lastIntValue=0;var C=y.current();if(C>=49&&C<=57){do y.lastIntValue=10*y.lastIntValue+(C-48),y.advance();while((C=y.current())>=48&&C<=57);return!0}return!1};var zr=0,Vs=1,cr=2;Bt.regexp_eatCharacterClassEscape=function(y){var C=y.current();if(Uu(C))return y.lastIntValue=-1,y.advance(),Vs;var X=!1;if(y.switchU&&this.options.ecmaVersion>=9&&((X=C===80)||C===112)){y.lastIntValue=-1,y.advance();var oe;if(y.eat(123)&&(oe=this.regexp_eatUnicodePropertyValueExpression(y))&&y.eat(125))return X&&oe===cr&&y.raise("Invalid property name"),oe;y.raise("Invalid property name")}return zr};function Uu(y){return y===100||y===68||y===115||y===83||y===119||y===87}Bt.regexp_eatUnicodePropertyValueExpression=function(y){var C=y.pos;if(this.regexp_eatUnicodePropertyName(y)&&y.eat(61)){var X=y.lastStringValue;if(this.regexp_eatUnicodePropertyValue(y)){var oe=y.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(y,X,oe),Vs}}if(y.pos=C,this.regexp_eatLoneUnicodePropertyNameOrValue(y)){var Ee=y.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(y,Ee)}return zr},Bt.regexp_validateUnicodePropertyNameAndValue=function(y,C,X){Le(y.unicodeProperties.nonBinary,C)||y.raise("Invalid property name"),y.unicodeProperties.nonBinary[C].test(X)||y.raise("Invalid property value")},Bt.regexp_validateUnicodePropertyNameOrValue=function(y,C){if(y.unicodeProperties.binary.test(C))return Vs;if(y.switchV&&y.unicodeProperties.binaryOfStrings.test(C))return cr;y.raise("Invalid property name")},Bt.regexp_eatUnicodePropertyName=function(y){var C=0;for(y.lastStringValue="";Zh(C=y.current());)y.lastStringValue+=et(C),y.advance();return y.lastStringValue!==""};function Zh(y){return ur(y)||y===95}Bt.regexp_eatUnicodePropertyValue=function(y){var C=0;for(y.lastStringValue="";$h(C=y.current());)y.lastStringValue+=et(C),y.advance();return y.lastStringValue!==""};function $h(y){return Zh(y)||uo(y)}Bt.regexp_eatLoneUnicodePropertyNameOrValue=function(y){return this.regexp_eatUnicodePropertyValue(y)},Bt.regexp_eatCharacterClass=function(y){if(y.eat(91)){var C=y.eat(94),X=this.regexp_classContents(y);return y.eat(93)||y.raise("Unterminated character class"),C&&X===cr&&y.raise("Negated character class may contain strings"),!0}return!1},Bt.regexp_classContents=function(y){return y.current()===93?Vs:y.switchV?this.regexp_classSetExpression(y):(this.regexp_nonEmptyClassRanges(y),Vs)},Bt.regexp_nonEmptyClassRanges=function(y){for(;this.regexp_eatClassAtom(y);){var C=y.lastIntValue;if(y.eat(45)&&this.regexp_eatClassAtom(y)){var X=y.lastIntValue;y.switchU&&(C===-1||X===-1)&&y.raise("Invalid character class"),C!==-1&&X!==-1&&C>X&&y.raise("Range out of order in character class")}}},Bt.regexp_eatClassAtom=function(y){var C=y.pos;if(y.eat(92)){if(this.regexp_eatClassEscape(y))return!0;if(y.switchU){var X=y.current();(X===99||co(X))&&y.raise("Invalid class escape"),y.raise("Invalid escape")}y.pos=C}var oe=y.current();return oe!==93?(y.lastIntValue=oe,y.advance(),!0):!1},Bt.regexp_eatClassEscape=function(y){var C=y.pos;if(y.eat(98))return y.lastIntValue=8,!0;if(y.switchU&&y.eat(45))return y.lastIntValue=45,!0;if(!y.switchU&&y.eat(99)){if(this.regexp_eatClassControlLetter(y))return!0;y.pos=C}return this.regexp_eatCharacterClassEscape(y)||this.regexp_eatCharacterEscape(y)},Bt.regexp_classSetExpression=function(y){var C=Vs,X;if(!this.regexp_eatClassSetRange(y))if(X=this.regexp_eatClassSetOperand(y)){X===cr&&(C=cr);for(var oe=y.pos;y.eatChars([38,38]);){if(y.current()!==38&&(X=this.regexp_eatClassSetOperand(y))){X!==cr&&(C=Vs);continue}y.raise("Invalid character in character class")}if(oe!==y.pos)return C;for(;y.eatChars([45,45]);)this.regexp_eatClassSetOperand(y)||y.raise("Invalid character in character class");if(oe!==y.pos)return C}else y.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(y)){if(X=this.regexp_eatClassSetOperand(y),!X)return C;X===cr&&(C=cr)}},Bt.regexp_eatClassSetRange=function(y){var C=y.pos;if(this.regexp_eatClassSetCharacter(y)){var X=y.lastIntValue;if(y.eat(45)&&this.regexp_eatClassSetCharacter(y)){var oe=y.lastIntValue;return X!==-1&&oe!==-1&&X>oe&&y.raise("Range out of order in character class"),!0}y.pos=C}return!1},Bt.regexp_eatClassSetOperand=function(y){return this.regexp_eatClassSetCharacter(y)?Vs:this.regexp_eatClassStringDisjunction(y)||this.regexp_eatNestedClass(y)},Bt.regexp_eatNestedClass=function(y){var C=y.pos;if(y.eat(91)){var X=y.eat(94),oe=this.regexp_classContents(y);if(y.eat(93))return X&&oe===cr&&y.raise("Negated character class may contain strings"),oe;y.pos=C}if(y.eat(92)){var Ee=this.regexp_eatCharacterClassEscape(y);if(Ee)return Ee;y.pos=C}return null},Bt.regexp_eatClassStringDisjunction=function(y){var C=y.pos;if(y.eatChars([92,113])){if(y.eat(123)){var X=this.regexp_classStringDisjunctionContents(y);if(y.eat(125))return X}else y.raise("Invalid escape");y.pos=C}return null},Bt.regexp_classStringDisjunctionContents=function(y){for(var C=this.regexp_classString(y);y.eat(124);)this.regexp_classString(y)===cr&&(C=cr);return C},Bt.regexp_classString=function(y){for(var C=0;this.regexp_eatClassSetCharacter(y);)C++;return C===1?Vs:cr},Bt.regexp_eatClassSetCharacter=function(y){var C=y.pos;if(y.eat(92))return this.regexp_eatCharacterEscape(y)||this.regexp_eatClassSetReservedPunctuator(y)?!0:y.eat(98)?(y.lastIntValue=8,!0):(y.pos=C,!1);var X=y.current();return X<0||X===y.lookahead()&&bd(X)||Gu(X)?!1:(y.advance(),y.lastIntValue=X,!0)};function bd(y){return y===33||y>=35&&y<=38||y>=42&&y<=44||y===46||y>=58&&y<=64||y===94||y===96||y===126}function Gu(y){return y===40||y===41||y===45||y===47||y>=91&&y<=93||y>=123&&y<=125}Bt.regexp_eatClassSetReservedPunctuator=function(y){var C=y.current();return ml(C)?(y.lastIntValue=C,y.advance(),!0):!1};function ml(y){return y===33||y===35||y===37||y===38||y===44||y===45||y>=58&&y<=62||y===64||y===96||y===126}Bt.regexp_eatClassControlLetter=function(y){var C=y.current();return uo(C)||C===95?(y.lastIntValue=C%32,y.advance(),!0):!1},Bt.regexp_eatHexEscapeSequence=function(y){var C=y.pos;if(y.eat(120)){if(this.regexp_eatFixedHexDigits(y,2))return!0;y.switchU&&y.raise("Invalid escape"),y.pos=C}return!1},Bt.regexp_eatDecimalDigits=function(y){var C=y.pos,X=0;for(y.lastIntValue=0;uo(X=y.current());)y.lastIntValue=10*y.lastIntValue+(X-48),y.advance();return y.pos!==C};function uo(y){return y>=48&&y<=57}Bt.regexp_eatHexDigits=function(y){var C=y.pos,X=0;for(y.lastIntValue=0;wa(X=y.current());)y.lastIntValue=16*y.lastIntValue+gl(X),y.advance();return y.pos!==C};function wa(y){return y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102}function gl(y){return y>=65&&y<=70?10+(y-65):y>=97&&y<=102?10+(y-97):y-48}Bt.regexp_eatLegacyOctalEscapeSequence=function(y){if(this.regexp_eatOctalDigit(y)){var C=y.lastIntValue;if(this.regexp_eatOctalDigit(y)){var X=y.lastIntValue;C<=3&&this.regexp_eatOctalDigit(y)?y.lastIntValue=C*64+X*8+y.lastIntValue:y.lastIntValue=C*8+X}else y.lastIntValue=C;return!0}return!1},Bt.regexp_eatOctalDigit=function(y){var C=y.current();return co(C)?(y.lastIntValue=C-48,y.advance(),!0):(y.lastIntValue=0,!1)};function co(y){return y>=48&&y<=55}Bt.regexp_eatFixedHexDigits=function(y,C){var X=y.pos;y.lastIntValue=0;for(var oe=0;oe<C;++oe){var Ee=y.current();if(!wa(Ee))return y.pos=X,!1;y.lastIntValue=16*y.lastIntValue+gl(Ee),y.advance()}return!0};var Sa=function(C){this.type=C.type,this.value=C.value,this.start=C.start,this.end=C.end,C.options.locations&&(this.loc=new dt(C,C.startLoc,C.endLoc)),C.options.ranges&&(this.range=[C.start,C.end])},Oi=d.prototype;Oi.next=function(y){!y&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Sa(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Oi.getToken=function(){return this.next(),new Sa(this)},typeof Symbol<"u"&&(Oi[Symbol.iterator]=function(){var y=this;return{next:function(){var C=y.getToken();return{done:C.type===x.eof,value:C}}}}),Oi.nextToken=function(){var y=this.curContext();if((!y||!y.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(x.eof);if(y.override)return y.override(this);this.readToken(this.fullCharCodeAtPos())},Oi.readToken=function(y){return A(y,this.options.ecmaVersion>=6)||y===92?this.readWord():this.getTokenFromCode(y)},Oi.fullCharCodeAtPos=function(){var y=this.input.charCodeAt(this.pos);if(y<=55295||y>=56320)return y;var C=this.input.charCodeAt(this.pos+1);return C<=56319||C>=57344?y:(y<<10)+C-56613888},Oi.skipBlockComment=function(){var y=this.options.onComment&&this.curPosition(),C=this.pos,X=this.input.indexOf("*/",this.pos+=2);if(X===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=X+2,this.options.locations)for(var oe=void 0,Ee=C;(oe=me(this.input,Ee,this.pos))>-1;)++this.curLine,Ee=this.lineStart=oe;this.options.onComment&&this.options.onComment(!0,this.input.slice(C+2,X),C,this.pos,y,this.curPosition())},Oi.skipLineComment=function(y){for(var C=this.pos,X=this.options.onComment&&this.curPosition(),oe=this.input.charCodeAt(this.pos+=y);this.pos<this.input.length&&!$(oe);)oe=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(C+y,this.pos),C,this.pos,X,this.curPosition())},Oi.skipSpace=function(){e:for(;this.pos<this.input.length;){var y=this.input.charCodeAt(this.pos);switch(y){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(y>8&&y<14||y>=5760&&ue.test(String.fromCharCode(y)))++this.pos;else break e}}},Oi.finishToken=function(y,C){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var X=this.type;this.type=y,this.value=C,this.updateContext(X)},Oi.readToken_dot=function(){var y=this.input.charCodeAt(this.pos+1);if(y>=48&&y<=57)return this.readNumber(!0);var C=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&y===46&&C===46?(this.pos+=3,this.finishToken(x.ellipsis)):(++this.pos,this.finishToken(x.dot))},Oi.readToken_slash=function(){var y=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):y===61?this.finishOp(x.assign,2):this.finishOp(x.slash,1)},Oi.readToken_mult_modulo_exp=function(y){var C=this.input.charCodeAt(this.pos+1),X=1,oe=y===42?x.star:x.modulo;return this.options.ecmaVersion>=7&&y===42&&C===42&&(++X,oe=x.starstar,C=this.input.charCodeAt(this.pos+2)),C===61?this.finishOp(x.assign,X+1):this.finishOp(oe,X)},Oi.readToken_pipe_amp=function(y){var C=this.input.charCodeAt(this.pos+1);if(C===y){if(this.options.ecmaVersion>=12){var X=this.input.charCodeAt(this.pos+2);if(X===61)return this.finishOp(x.assign,3)}return this.finishOp(y===124?x.logicalOR:x.logicalAND,2)}return C===61?this.finishOp(x.assign,2):this.finishOp(y===124?x.bitwiseOR:x.bitwiseAND,1)},Oi.readToken_caret=function(){var y=this.input.charCodeAt(this.pos+1);return y===61?this.finishOp(x.assign,2):this.finishOp(x.bitwiseXOR,1)},Oi.readToken_plus_min=function(y){var C=this.input.charCodeAt(this.pos+1);return C===y?C===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Z.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(x.incDec,2):C===61?this.finishOp(x.assign,2):this.finishOp(x.plusMin,1)},Oi.readToken_lt_gt=function(y){var C=this.input.charCodeAt(this.pos+1),X=1;return C===y?(X=y===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+X)===61?this.finishOp(x.assign,X+1):this.finishOp(x.bitShift,X)):C===33&&y===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(C===61&&(X=2),this.finishOp(x.relational,X))},Oi.readToken_eq_excl=function(y){var C=this.input.charCodeAt(this.pos+1);return C===61?this.finishOp(x.equality,this.input.charCodeAt(this.pos+2)===61?3:2):y===61&&C===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(x.arrow)):this.finishOp(y===61?x.eq:x.prefix,1)},Oi.readToken_question=function(){var y=this.options.ecmaVersion;if(y>=11){var C=this.input.charCodeAt(this.pos+1);if(C===46){var X=this.input.charCodeAt(this.pos+2);if(X<48||X>57)return this.finishOp(x.questionDot,2)}if(C===63){if(y>=12){var oe=this.input.charCodeAt(this.pos+2);if(oe===61)return this.finishOp(x.assign,3)}return this.finishOp(x.coalesce,2)}}return this.finishOp(x.question,1)},Oi.readToken_numberSign=function(){var y=this.options.ecmaVersion,C=35;if(y>=13&&(++this.pos,C=this.fullCharCodeAtPos(),A(C,!0)||C===92))return this.finishToken(x.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+et(C)+"'")},Oi.getTokenFromCode=function(y){switch(y){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(x.parenL);case 41:return++this.pos,this.finishToken(x.parenR);case 59:return++this.pos,this.finishToken(x.semi);case 44:return++this.pos,this.finishToken(x.comma);case 91:return++this.pos,this.finishToken(x.bracketL);case 93:return++this.pos,this.finishToken(x.bracketR);case 123:return++this.pos,this.finishToken(x.braceL);case 125:return++this.pos,this.finishToken(x.braceR);case 58:return++this.pos,this.finishToken(x.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(x.backQuote);case 48:var C=this.input.charCodeAt(this.pos+1);if(C===120||C===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(C===111||C===79)return this.readRadixNumber(8);if(C===98||C===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(y);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(y);case 124:case 38:return this.readToken_pipe_amp(y);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(y);case 60:case 62:return this.readToken_lt_gt(y);case 61:case 33:return this.readToken_eq_excl(y);case 63:return this.readToken_question();case 126:return this.finishOp(x.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+et(y)+"'")},Oi.finishOp=function(y,C){var X=this.input.slice(this.pos,this.pos+C);return this.pos+=C,this.finishToken(y,X)},Oi.readRegexp=function(){for(var y,C,X=this.pos;;){this.pos>=this.input.length&&this.raise(X,"Unterminated regular expression");var oe=this.input.charAt(this.pos);if(Z.test(oe)&&this.raise(X,"Unterminated regular expression"),y)y=!1;else{if(oe==="[")C=!0;else if(oe==="]"&&C)C=!1;else if(oe==="/"&&!C)break;y=oe==="\\"}++this.pos}var Ee=this.input.slice(X,this.pos);++this.pos;var tt=this.pos,ot=this.readWord1();this.containsEsc&&this.unexpected(tt);var Ht=this.regexpState||(this.regexpState=new ds(this));Ht.reset(X,Ee,ot),this.validateRegExpFlags(Ht),this.validateRegExpPattern(Ht);var Kt=null;try{Kt=new RegExp(Ee,ot)}catch{}return this.finishToken(x.regexp,{pattern:Ee,flags:ot,value:Kt})},Oi.readInt=function(y,C,X){for(var oe=this.options.ecmaVersion>=12&&C===void 0,Ee=X&&this.input.charCodeAt(this.pos)===48,tt=this.pos,ot=0,Ht=0,Kt=0,Wi=C??1/0;Kt<Wi;++Kt,++this.pos){var ri=this.input.charCodeAt(this.pos),Hi=void 0;if(oe&&ri===95){Ee&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Ht===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Kt===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Ht=ri;continue}if(ri>=97?Hi=ri-97+10:ri>=65?Hi=ri-65+10:ri>=48&&ri<=57?Hi=ri-48:Hi=1/0,Hi>=y)break;Ht=ri,ot=ot*y+Hi}return oe&&Ht===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===tt||C!=null&&this.pos-tt!==C?null:ot};function Fr(y,C){return C?parseInt(y,8):parseFloat(y.replace(/_/g,""))}function ia(y){return typeof BigInt!="function"?null:BigInt(y.replace(/_/g,""))}Oi.readRadixNumber=function(y){var C=this.pos;this.pos+=2;var X=this.readInt(y);return X==null&&this.raise(this.start+2,"Expected number in radix "+y),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(X=ia(this.input.slice(C,this.pos)),++this.pos):A(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,X)},Oi.readNumber=function(y){var C=this.pos;!y&&this.readInt(10,void 0,!0)===null&&this.raise(C,"Invalid number");var X=this.pos-C>=2&&this.input.charCodeAt(C)===48;X&&this.strict&&this.raise(C,"Invalid number");var oe=this.input.charCodeAt(this.pos);if(!X&&!y&&this.options.ecmaVersion>=11&&oe===110){var Ee=ia(this.input.slice(C,this.pos));return++this.pos,A(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,Ee)}X&&/[89]/.test(this.input.slice(C,this.pos))&&(X=!1),oe===46&&!X&&(++this.pos,this.readInt(10),oe=this.input.charCodeAt(this.pos)),(oe===69||oe===101)&&!X&&(oe=this.input.charCodeAt(++this.pos),(oe===43||oe===45)&&++this.pos,this.readInt(10)===null&&this.raise(C,"Invalid number")),A(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var tt=Fr(this.input.slice(C,this.pos),X);return this.finishToken(x.num,tt)},Oi.readCodePoint=function(){var y=this.input.charCodeAt(this.pos),C;if(y===123){this.options.ecmaVersion<6&&this.unexpected();var X=++this.pos;C=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,C>1114111&&this.invalidStringToken(X,"Code point out of bounds")}else C=this.readHexChar(4);return C},Oi.readString=function(y){for(var C="",X=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var oe=this.input.charCodeAt(this.pos);if(oe===y)break;oe===92?(C+=this.input.slice(X,this.pos),C+=this.readEscapedChar(!1),X=this.pos):oe===8232||oe===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):($(oe)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return C+=this.input.slice(X,this.pos++),this.finishToken(x.string,C)};var Hr={};Oi.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(y){if(y===Hr)this.readInvalidTemplateToken();else throw y}this.inTemplateElement=!1},Oi.invalidStringToken=function(y,C){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Hr;this.raise(y,C)},Oi.readTmplToken=function(){for(var y="",C=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var X=this.input.charCodeAt(this.pos);if(X===96||X===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===x.template||this.type===x.invalidTemplate)?X===36?(this.pos+=2,this.finishToken(x.dollarBraceL)):(++this.pos,this.finishToken(x.backQuote)):(y+=this.input.slice(C,this.pos),this.finishToken(x.template,y));if(X===92)y+=this.input.slice(C,this.pos),y+=this.readEscapedChar(!0),C=this.pos;else if($(X)){switch(y+=this.input.slice(C,this.pos),++this.pos,X){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:y+=`
`;break;default:y+=String.fromCharCode(X);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),C=this.pos}else++this.pos}},Oi.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(x.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Oi.readEscapedChar=function(y){var C=this.input.charCodeAt(++this.pos);switch(++this.pos,C){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return et(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),y){var X=this.pos-1;this.invalidStringToken(X,"Invalid escape sequence in template string")}default:if(C>=48&&C<=55){var oe=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],Ee=parseInt(oe,8);return Ee>255&&(oe=oe.slice(0,-1),Ee=parseInt(oe,8)),this.pos+=oe.length-1,C=this.input.charCodeAt(this.pos),(oe!=="0"||C===56||C===57)&&(this.strict||y)&&this.invalidStringToken(this.pos-1-oe.length,y?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(Ee)}return $(C)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(C)}},Oi.readHexChar=function(y){var C=this.pos,X=this.readInt(16,y);return X===null&&this.invalidStringToken(C,"Bad character escape sequence"),X},Oi.readWord1=function(){this.containsEsc=!1;for(var y="",C=!0,X=this.pos,oe=this.options.ecmaVersion>=6;this.pos<this.input.length;){var Ee=this.fullCharCodeAtPos();if(P(Ee,oe))this.pos+=Ee<=65535?1:2;else if(Ee===92){this.containsEsc=!0,y+=this.input.slice(X,this.pos);var tt=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var ot=this.readCodePoint();(C?A:P)(ot,oe)||this.invalidStringToken(tt,"Invalid Unicode escape"),y+=et(ot),X=this.pos}else break;C=!1}return y+this.input.slice(X,this.pos)},Oi.readWord=function(){var y=this.readWord1(),C=x.name;return this.keywords.test(y)&&(C=B[y]),this.finishToken(C,y)};var No="8.14.1";d.acorn={Parser:d,version:No,defaultOptions:ut,Position:Ct,SourceLocation:dt,getLineInfo:Et,Node:Ve,TokenType:w,tokTypes:x,keywordTypes:B,TokContext:se,tokContexts:Y,isIdentifierChar:P,isIdentifierStart:A,Token:Sa,isNewLine:$,lineBreak:Z,lineBreakG:de,nonASCIIwhitespace:ue};function Wu(y,C){return d.parse(y,C)}function Ku(y,C,X){return d.parseExpressionAt(y,C,X)}function eu(y,C){return d.tokenizer(y,C)}t.Node=Ve,t.Parser=d,t.Position=Ct,t.SourceLocation=dt,t.TokContext=se,t.Token=Sa,t.TokenType=w,t.defaultOptions=ut,t.getLineInfo=Et,t.isIdentifierChar=P,t.isIdentifierStart=A,t.isNewLine=$,t.keywordTypes=B,t.lineBreak=Z,t.lineBreakG=de,t.nonASCIIwhitespace=ue,t.parse=Wu,t.parseExpressionAt=Ku,t.tokContexts=Y,t.tokTypes=x,t.tokenizer=eu,t.version=No})}(oy,oy.exports)),oy.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(i){(function(e,t){e=e||r2;var n=e.window,s=e.document,r=new function(){var u=/^(statics|enumerable|beans|preserve)$/,d=[],m=d.slice,_=Object.create,S=Object.getOwnPropertyDescriptor,k=Object.defineProperty,I=d.forEach||function(G,U){for(var ae=0,Q=this.length;ae<Q;ae++)G.call(U,this[ae],ae,this)},L=function(G,U){for(var ae in this)this.hasOwnProperty(ae)&&G.call(U,this[ae],ae,this)},N=Object.assign||function(G){for(var U=1,ae=arguments.length;U<ae;U++){var Q=arguments[U];for(var se in Q)Q.hasOwnProperty(se)&&(G[se]=Q[se])}return G},q=function(G,U,ae){if(G){var Q=S(G,"length");(Q&&typeof Q.value=="number"?I:L).call(G,U,ae=ae||G)}return ae};function W(G,U,ae,Q,se){var Y={};function ee(ne,ye){ye=ye||(ye=S(U,ne))&&(ye.get?ye:ye.value),typeof ye=="string"&&ye[0]==="#"&&(ye=G[ye.substring(1)]||ye);var we=typeof ye=="function",Ve=ye,Be=se||we&&!ye.base?ye&&ye.get?ne in G:G[ne]:null,z;(!se||!Be)&&(we&&Be&&(ye.base=Be),we&&Q!==!1&&(z=ne.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(Y[z[3].toLowerCase()+z[4]]=z[2]),(!Ve||we||!Ve.get||typeof Ve.get!="function"||!K.isPlainObject(Ve))&&(Ve={value:Ve,writable:!0}),(S(G,ne)||{configurable:!0}).configurable&&(Ve.configurable=!0,Ve.enumerable=ae??!z),k(G,ne,Ve))}if(U){for(var F in U)U.hasOwnProperty(F)&&!u.test(F)&&ee(F);for(var F in Y){var J=Y[F],re=G["set"+J],ce=G["get"+J]||re&&G["is"+J];ce&&(Q===!0||ce.length===0)&&ee(F,{get:ce,set:re})}}return G}function K(){for(var G=0,U=arguments.length;G<U;G++){var ae=arguments[G];ae&&N(this,ae)}return this}return W(K,{inject:function(G){if(G){var U=G.statics===!0?G:G.statics,ae=G.beans,Q=G.preserve;U!==G&&W(this.prototype,G,G.enumerable,ae,Q),W(this,U,null,ae,Q)}for(var se=1,Y=arguments.length;se<Y;se++)this.inject(arguments[se]);return this},extend:function(){for(var G=this,U,ae,Q=0,se,Y=arguments.length;Q<Y&&!(U&&ae);Q++)se=arguments[Q],U=U||se.initialize,ae=ae||se.prototype;return U=U||function(){G.apply(this,arguments)},ae=U.prototype=ae||_(this.prototype),k(ae,"constructor",{value:U,writable:!0,configurable:!0}),W(U,this),arguments.length&&this.inject.apply(U,arguments),U.base=G,U}}).inject({enumerable:!1,initialize:K,set:K,inject:function(){for(var G=0,U=arguments.length;G<U;G++){var ae=arguments[G];ae&&W(this,ae,ae.enumerable,ae.beans,ae.preserve)}return this},extend:function(){var G=_(this);return G.inject.apply(G,arguments)},each:function(G,U){return q(this,G,U)},clone:function(){return new this.constructor(this)},statics:{set:N,each:q,create:_,define:k,describe:S,clone:function(G){return N(new G.constructor,G)},isPlainObject:function(G){var U=G!=null&&G.constructor;return U&&(U===Object||U===K||U.name==="Object")},pick:function(G,U){return G!==t?G:U},slice:function(G,U,ae){return m.call(G,U,ae)}}})};i.exports=r,r.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+r.each(this,function(u,d){if(!/^_/.test(d)){var m=typeof u;this.push(d+": "+(m==="number"?c.instance.number(u):m==="string"?"'"+u+"'":u))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(u){return r.importJSON(u,this)},exportJSON:function(u){return r.exportJSON(this,u)},toJSON:function(){return r.serialize(this)},set:function(u,d){return u&&r.filter(this,u,d,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function u(){var d=u.base.apply(this,arguments),m=d.prototype._class;return m&&!r.exports[m]&&(r.exports[m]=d),d},equals:function(u,d){if(u===d)return!0;if(u&&u.equals)return u.equals(d);if(d&&d.equals)return d.equals(u);if(u&&d&&typeof u=="object"&&typeof d=="object"){if(Array.isArray(u)&&Array.isArray(d)){var m=u.length;if(m!==d.length)return!1;for(;m--;)if(!r.equals(u[m],d[m]))return!1}else{var _=Object.keys(u),m=_.length;if(m!==Object.keys(d).length)return!1;for(;m--;){var S=_[m];if(!(d.hasOwnProperty(S)&&r.equals(u[S],d[S])))return!1}}return!0}return!1},read:function(u,d,m,_){if(this===r){var S=this.peek(u,d);return u.__index++,S}var k=this.prototype,I=k._readIndex,L=d||I&&u.__index||0,N=u.length,q=u[L];if(_=_||N-L,q instanceof this||m&&m.readNull&&q==null&&_<=1)return I&&(u.__index=L+1),q&&m&&m.clone?q.clone():q;if(q=r.create(k),I&&(q.__read=!0),q=q.initialize.apply(q,L>0||L+_<N?r.slice(u,L,L+_):u)||q,I){u.__index=L+q.__read;var W=q.__filtered;W&&(u.__filtered=W,q.__filtered=t),q.__read=t}return q},peek:function(u,d){return u[u.__index=d||u.__index||0]},remain:function(u){return u.length-(u.__index||0)},readList:function(u,d,m,_){for(var S=[],k,I=d||0,L=_?I+_:u.length,N=I;N<L;N++)S.push(Array.isArray(k=u[N])?this.read(k,0,m):this.read(u,N,m,1));return S},readNamed:function(u,d,m,_,S){var k=this.getNamed(u,d),I=k!==t;if(I){var L=u.__filtered;if(!L){var N=this.getSource(u);L=u.__filtered=r.create(N),L.__unfiltered=N}L[d]=t}return this.read(I?[k]:u,m,_,S)},readSupported:function(u,d){var m=this.getSource(u),_=this,S=!1;return m&&Object.keys(m).forEach(function(k){if(k in d){var I=_.readNamed(u,k);I!==t&&(d[k]=I),S=!0}}),S},getSource:function(u){var d=u.__source;if(d===t){var m=u.length===1&&u[0];d=u.__source=m&&r.isPlainObject(m)?m:null}return d},getNamed:function(u,d){var m=this.getSource(u);if(m)return d?m[d]:u.__filtered||m},hasNamed:function(u,d){return!!this.getNamed(u,d)},filter:function(u,d,m,_){var S;function k(W){if(!(m&&W in m)&&!(S&&W in S)){var K=d[W];K!==t&&(u[W]=K)}}if(_){for(var I={},L=0,N,q=_.length;L<q;L++)(N=_[L])in d&&(k(N),I[N]=!0);S=I}return Object.keys(d.__unfiltered||d).forEach(k),u},isPlainValue:function(u,d){return r.isPlainObject(u)||Array.isArray(u)||d&&typeof u=="string"},serialize:function(u,d,m,_){d=d||{};var S=!_,k;if(S&&(d.formatter=new c(d.precision),_={length:0,definitions:{},references:{},add:function(K,G){var U="#"+K._id,ae=this.references[U];if(!ae){this.length++;var Q=G.call(K),se=K._class;se&&Q[0]!==se&&Q.unshift(se),this.definitions[U]=Q,ae=this.references[U]=[U]}return ae}}),u&&u._serialize){k=u._serialize(d,_);var I=u._class;I&&!u._compactSerialize&&(S||!m)&&k[0]!==I&&k.unshift(I)}else if(Array.isArray(u)){k=[];for(var L=0,N=u.length;L<N;L++)k[L]=r.serialize(u[L],d,m,_)}else if(r.isPlainObject(u)){k={};for(var q=Object.keys(u),L=0,N=q.length;L<N;L++){var W=q[L];k[W]=r.serialize(u[W],d,m,_)}}else typeof u=="number"?k=d.formatter.number(u,d.precision):k=u;return S&&_.length>0?[["dictionary",_.definitions],k]:k},deserialize:function(u,d,m,_,S){var k=u,I=!m,L=I&&u&&u.length&&u[0][0]==="dictionary";if(m=m||{},Array.isArray(u)){var N=u[0],q=N==="dictionary";if(u.length==1&&/^#/.test(N))return m.dictionary[N];N=r.exports[N],k=[];for(var W=N?1:0,K=u.length;W<K;W++)k.push(r.deserialize(u[W],d,m,q,L));if(N){var G=k;d?k=d(N,G,I||S):k=new N(G)}}else if(r.isPlainObject(u)){k={},_&&(m.dictionary=k);for(var U in u)k[U]=r.deserialize(u[U],d,m)}return L?k[1]:k},exportJSON:function(u,d){var m=r.serialize(u,d);return d&&d.asString==!1?m:JSON.stringify(m)},importJSON:function(u,d){return r.deserialize(typeof u=="string"?JSON.parse(u):u,function(m,_,S){var k=S&&d&&d.constructor===m,I=k?d:r.create(m.prototype);if(_.length===1&&I instanceof x&&(k||!(I instanceof de))){var L=_[0];r.isPlainObject(L)&&(L.insert=!1,k&&(_=_.concat([x.INSERT])))}return(k?I.set:m).apply(I,_),k&&(d=null),I})},push:function(u,d){var m=d.length;if(m<4096)u.push.apply(u,d);else{var _=u.length;u.length+=m;for(var S=0;S<m;S++)u[_+S]=d[S]}return u},splice:function(u,d,m,_){var S=d&&d.length,k=m===t;m=k?u.length:m,m>u.length&&(m=u.length);for(var I=0;I<S;I++)d[I]._index=m+I;if(k)return r.push(u,d),[];var L=[m,_];d&&r.push(L,d);for(var N=u.splice.apply(u,L),I=0,q=N.length;I<q;I++)N[I]._index=t;for(var I=m+S,q=u.length;I<q;I++)u[I]._index=I;return N},capitalize:function(u){return u.replace(/\b[a-z]/g,function(d){return d.toUpperCase()})},camelize:function(u){return u.replace(/-(.)/g,function(d,m){return m.toUpperCase()})},hyphenate:function(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(u,d){if(typeof u!="string")r.each(u,function(k,I){this.on(I,k)},this);else{var m=this._eventTypes,_=m&&m[u],S=this._callbacks=this._callbacks||{};S=S[u]=S[u]||[],S.indexOf(d)===-1&&(S.push(d),_&&_.install&&S.length===1&&_.install.call(this,u))}return this},off:function(u,d){if(typeof u!="string"){r.each(u,function(I,L){this.off(L,I)},this);return}var m=this._eventTypes,_=m&&m[u],S=this._callbacks&&this._callbacks[u],k;return S&&(!d||(k=S.indexOf(d))!==-1&&S.length===1?(_&&_.uninstall&&_.uninstall.call(this,u),delete this._callbacks[u]):k!==-1&&S.splice(k,1)),this},once:function(u,d){return this.on(u,function m(){d.apply(this,arguments),this.off(u,m)})},emit:function(u,d){var m=this._callbacks&&this._callbacks[u];if(!m)return!1;var _=r.slice(arguments,1),S=d&&d.target&&!d.currentTarget;m=m.slice(),S&&(d.currentTarget=this);for(var k=0,I=m.length;k<I;k++)if(m[k].apply(this,_)==!1){d&&d.stop&&d.stop();break}return S&&delete d.currentTarget,!0},responds:function(u){return!!(this._callbacks&&this._callbacks[u])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(u){var d=this._eventTypes,m=this._callbacks,_=u?"install":"uninstall";if(d){for(var S in m)if(m[S].length>0){var k=d[S],I=k&&k[_];I&&I.call(this,S)}}},statics:{inject:function u(d){var m=d._events;if(m){var _={};r.each(m,function(S,k){var I=typeof S=="string",L=I?S:k,N=r.capitalize(L),q=L.substring(2).toLowerCase();_[q]=I?{}:S,L="_"+L,d["get"+N]=function(){return this[L]},d["set"+N]=function(W){var K=this[L];K&&this.off(q,K),W&&this.on(q,W),this[L]=W}}),d._eventTypes=_}return u.base.apply(this,arguments)}}},o=r.extend({_class:"PaperScope",initialize:function u(){Xt=this,this.settings=new r({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=u._id++,u._scopes[this._id]=this;var d=u.prototype;if(!this.support){var m=$e.getContext(1,1)||{};d.support={nativeDash:"setLineDash"in m||"mozDash"in m,nativeBlendModes:Xe.nativeModes},$e.release(m)}if(!this.agent){var _=e.navigator.userAgent.toLowerCase(),S=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(_)||[])[0],k=S==="darwin"?"mac":S,I=d.agent=d.browser={platform:k};k&&(I[k]=!0),_.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(L,N,q,W,K){if(!I.chrome){var G=N==="opera"?W:/^(node|trident)$/.test(N)?K:q;I.version=G,I.versionNumber=parseFloat(G),N={trident:"msie",jsdom:"node"}[N]||N,I.name=N,I[N]=!0}}),I.chrome&&delete I.webkit,I.atom&&delete I.chrome}},version:"0.12.18",getView:function(){var u=this.project;return u&&u._view},getPaper:function(){return this},execute:function(u,d){var m=Xt.PaperScript.execute(u,this,d);return pe.updateFocus(),m},install:function(u){var d=this;r.each(["project","view","tool"],function(_){r.define(u,_,{configurable:!0,get:function(){return d[_]}})});for(var m in this)!/^_/.test(m)&&this[m]&&(u[m]=this[m])},setup:function(u){return Xt=this,this.project=new O(u),this},createCanvas:function(u,d){return $e.getCanvas(u,d)},activate:function(){Xt=this},clear:function(){for(var u=this.projects,d=this.tools,m=u.length-1;m>=0;m--)u[m].remove();for(var m=d.length-1;m>=0;m--)d[m].remove()},remove:function(){this.clear(),delete o._scopes[this._id]},statics:new function(){function u(d){return d+="Attribute",function(m,_){return m[d](_)||m[d]("data-paper-"+_)}}return{_scopes:{},_id:0,get:function(d){return this._scopes[d]||null},getAttribute:u("get"),hasAttribute:u("has")}}}),l=r.extend(a,{initialize:function(u){this._scope=Xt,this._index=this._scope[this._list].push(this)-1,(u||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var u=this._scope[this._reference];return u&&u!==this&&u.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",u),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(r.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),h={findItemBoundsCollisions:function(u,d,m){function _(I){for(var L=new Array(I.length),N=0;N<I.length;N++){var q=I[N].getBounds();L[N]=[q.left,q.top,q.right,q.bottom]}return L}var S=_(u),k=!d||d===u?S:_(d);return this.findBoundsCollisions(S,k,m||0)},findCurveBoundsCollisions:function(u,d,m,_){function S(G){for(var U=Math.min,ae=Math.max,Q=new Array(G.length),se=0;se<G.length;se++){var Y=G[se];Q[se]=[U(Y[0],Y[2],Y[4],Y[6]),U(Y[1],Y[3],Y[5],Y[7]),ae(Y[0],Y[2],Y[4],Y[6]),ae(Y[1],Y[3],Y[5],Y[7])]}return Q}var k=S(u),I=!d||d===u?k:S(d);if(_){for(var L=this.findBoundsCollisions(k,I,m||0,!1,!0),N=this.findBoundsCollisions(k,I,m||0,!0,!0),q=[],W=0,K=L.length;W<K;W++)q[W]={hor:L[W],ver:N[W]};return q}return this.findBoundsCollisions(k,I,m||0)},findBoundsCollisions:function(u,d,m,_,S){var k=!d||u===d,I=k?u:u.concat(d),L=u.length,N=I.length;function q(nt,yt,Vt){for(var it=0,at=nt.length;it<at;){var Tt=at+it>>>1;I[nt[Tt]][yt]<Vt?it=Tt+1:at=Tt}return it-1}for(var W=_?1:0,K=W+2,G=_?0:1,U=G+2,ae=new Array(N),Q=0;Q<N;Q++)ae[Q]=Q;ae.sort(function(nt,yt){return I[nt][W]-I[yt][W]});for(var se=[],Y=new Array(L),Q=0;Q<N;Q++){var ee=ae[Q],F=I[ee],J=k?ee:ee-L,re=ee<L,ce=k||!re,ne=re?[]:null;if(se.length){var ye=q(se,K,F[W]-m)+1;if(se.splice(0,ye),k&&S){ne=ne.concat(se);for(var we=0;we<se.length;we++){var Ve=se[we];Y[Ve].push(J)}}else for(var Be=F[U],z=F[G],we=0;we<se.length;we++){var Ve=se[we],j=I[Ve],le=Ve<L,xe=k||Ve>=L;(S||(re&&xe||ce&&le)&&Be>=j[G]-m&&z<=j[U]+m)&&(re&&xe&&ne.push(k?Ve:Ve-L),ce&&le&&Y[Ve].push(J))}}if(re&&(u===d&&ne.push(ee),Y[ee]=ne),se.length){var Ce=F[K],Ue=q(se,K,Ce);se.splice(Ue+1,0,ee)}else se.push(ee)}for(var Q=0;Q<Y.length;Q++){var je=Y[Q];je&&je.sort(function(yt,Vt){return yt-Vt})}return Y}},c=r.extend({initialize:function(u){this.precision=r.pick(u,5),this.multiplier=Math.pow(10,this.precision)},number:function(u){return this.precision<16?Math.round(u*this.multiplier)/this.multiplier:u},pair:function(u,d,m){return this.number(u)+(m||",")+this.number(d)},point:function(u,d){return this.number(u.x)+(d||",")+this.number(u.y)},size:function(u,d){return this.number(u.width)+(d||",")+this.number(u.height)},rectangle:function(u,d){return this.point(u,d)+(d||",")+this.size(u,d)}});c.instance=new c;var f=new function(){var u=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],d=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],m=Math.abs,_=Math.sqrt,S=Math.pow,k=Math.log2||function(K){return Math.log(K)*Math.LOG2E},I=1e-12,L=112e-18;function N(K,G,U){return K<G?G:K>U?U:K}function q(K,G,U){function ae(ye){var we=ye*134217729,Ve=ye-we,Be=Ve+we,z=ye-Be;return[Be,z]}var Q=G*G-K*U,se=G*G+K*U;if(m(Q)*3<se){var Y=ae(K),ee=ae(G),F=ae(U),J=G*G,re=ee[0]*ee[0]-J+2*ee[0]*ee[1]+ee[1]*ee[1],ce=K*U,ne=Y[0]*F[0]-ce+Y[0]*F[1]+Y[1]*F[0]+Y[1]*F[1];Q=J-ce+(re-ne)}return Q}function W(){var K=Math.max.apply(Math,arguments);return K&&(K<1e-8||K>1e8)?S(2,-Math.round(k(K))):0}return{EPSILON:I,MACHINE_EPSILON:L,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(_(2)-1)/3,isZero:function(K){return K>=-1e-12&&K<=I},isMachineZero:function(K){return K>=-112e-18&&K<=L},clamp:N,integrate:function(K,G,U,ae){for(var Q=u[ae-2],se=d[ae-2],Y=(U-G)*.5,ee=Y+G,F=0,J=ae+1>>1,re=ae&1?se[F++]*K(ee):0;F<J;){var ce=Y*Q[F];re+=se[F++]*(K(ee+ce)+K(ee-ce))}return Y*re},findRoot:function(K,G,U,ae,Q,se,Y){for(var ee=0;ee<se;ee++){var F=K(U),J=F/G(U),re=U-J;if(m(J)<Y){U=re;break}F>0?(Q=U,U=re<=ae?(ae+Q)*.5:re):(ae=U,U=re>=Q?(ae+Q)*.5:re)}return N(U,ae,Q)},solveQuadratic:function(K,G,U,ae,Q,se){var Y,ee=1/0;if(m(K)<I){if(m(G)<I)return m(U)<I?-1:0;Y=-U/G}else{G*=-.5;var F=q(K,G,U);if(F&&m(F)<L){var J=W(m(K),m(G),m(U));J&&(K*=J,G*=J,U*=J,F=q(K,G,U))}if(F>=-112e-18){var re=F<0?0:_(F),ce=G+(G<0?-re:re);ce===0?(Y=U/K,ee=-Y):(Y=ce/K,ee=U/ce)}}var ne=0,ye=Q==null,we=Q-I,Ve=se+I;return isFinite(Y)&&(ye||Y>we&&Y<Ve)&&(ae[ne++]=ye?Y:N(Y,Q,se)),ee!==Y&&isFinite(ee)&&(ye||ee>we&&ee<Ve)&&(ae[ne++]=ye?ee:N(ee,Q,se)),ne},solveCubic:function(K,G,U,ae,Q,se,Y){var ee=W(m(K),m(G),m(U),m(ae)),F,J,re,ce,ne;ee&&(K*=ee,G*=ee,U*=ee,ae*=ee);function ye(Ue){F=Ue;var je=K*F;J=je+G,re=J*F+U,ce=(je+J)*F+re,ne=re*F+ae}if(m(K)<I)K=G,J=U,re=ae,F=1/0;else if(m(ae)<I)J=G,re=U,F=0;else{ye(-(G/K)/3);var we=ne/K,Ve=S(m(we),1/3),Be=we<0?-1:1,z=-ce/K,j=z>0?1.324717957244746*Math.max(Ve,_(z)):Ve,le=F-Be*j;if(le!==F){do ye(le),le=ce===0?F:F-ne/ce/(1+L);while(Be*le>Be*F);m(K)*F*F>m(ae/F)&&(re=-ae/F,J=(re-U)/F)}}var xe=f.solveQuadratic(K,J,re,Q,se,Y),Ce=se==null;return isFinite(F)&&(xe===0||xe>0&&F!==Q[0]&&F!==Q[1])&&(Ce||F>se-I&&F<Y+I)&&(Q[xe++]=Ce?F:N(F,se,Y)),xe}}},g={_id:1,_pools:{},get:function(u){if(u){var d=this._pools[u];return d||(d=this._pools[u]={_id:1}),d._id++}else return this._id++}},v=r.extend({_class:"Point",_readIndex:!0,initialize:function(d,m){var _=typeof d,S=this.__read,k=0;if(_==="number"){var I=typeof m=="number";this._set(d,I?m:d),S&&(k=I?2:1)}else if(_==="undefined"||d===null)this._set(0,0),S&&(k=d===null?1:0);else{var L=_==="string"?d.split(/[\s,]+/)||[]:d;k=1,Array.isArray(L)?this._set(+L[0],+(L.length>1?L[1]:L[0])):"x"in L?this._set(L.x||0,L.y||0):"width"in L?this._set(L.width||0,L.height||0):"angle"in L?(this._set(L.length||0,0),this.setAngle(L.angle||0)):(this._set(0,0),k=0)}return S&&(this.__read=k),this},set:"#initialize",_set:function(u,d){return this.x=u,this.y=d,this},equals:function(u){return this===u||u&&(this.x===u.x&&this.y===u.y||Array.isArray(u)&&this.x===u[0]&&this.y===u[1])||!1},clone:function(){return new v(this.x,this.y)},toString:function(){var u=c.instance;return"{ x: "+u.number(this.x)+", y: "+u.number(this.y)+" }"},_serialize:function(u){var d=u.formatter;return[d.number(this.x),d.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(u){if(this.isZero()){var d=this._angle||0;this._set(Math.cos(d)*u,Math.sin(d)*u)}else{var m=u/this.getLength();f.isZero(m)&&this.getAngle(),this._set(this.x*m,this.y*m)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(u){this.setAngleInRadians.call(this,u*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var u=v.read(arguments),d=this.getLength()*u.getLength();if(f.isZero(d))return NaN;var m=this.dot(u)/d;return Math.acos(m<-1?-1:m>1?1:m)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(u){if(this._angle=u,!this.isZero()){var d=this.getLength();this._set(Math.cos(u)*d,Math.sin(u)*d)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var u=v.read(arguments);return Math.atan2(this.cross(u),this.dot(u))*180/Math.PI},getDistance:function(){var u=arguments,d=v.read(u),m=d.x-this.x,_=d.y-this.y,S=m*m+_*_,k=r.read(u);return k?S:Math.sqrt(S)},normalize:function(u){u===t&&(u=1);var d=this.getLength(),m=d!==0?u/d:0,_=new v(this.x*m,this.y*m);return m>=0&&(_._angle=this._angle),_},rotate:function(u,d){if(u===0)return this.clone();u=u*Math.PI/180;var m=d?this.subtract(d):this,_=Math.sin(u),S=Math.cos(u);return m=new v(m.x*S-m.y*_,m.x*_+m.y*S),d?m.add(d):m},transform:function(u){return u?u._transformPoint(this):this},add:function(){var u=v.read(arguments);return new v(this.x+u.x,this.y+u.y)},subtract:function(){var u=v.read(arguments);return new v(this.x-u.x,this.y-u.y)},multiply:function(){var u=v.read(arguments);return new v(this.x*u.x,this.y*u.y)},divide:function(){var u=v.read(arguments);return new v(this.x/u.x,this.y/u.y)},modulo:function(){var u=v.read(arguments);return new v(this.x%u.x,this.y%u.y)},negate:function(){return new v(-this.x,-this.y)},isInside:function(){return T.read(arguments).contains(this)},isClose:function(){var u=arguments,d=v.read(u),m=r.read(u);return this.getDistance(d)<=m},isCollinear:function(){var u=v.read(arguments);return v.isCollinear(this.x,this.y,u.x,u.y)},isColinear:"#isCollinear",isOrthogonal:function(){var u=v.read(arguments);return v.isOrthogonal(this.x,this.y,u.x,u.y)},isZero:function(){var u=f.isZero;return u(this.x)&&u(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(u){return this.x*(u>1&&u<4?-1:1)>=0&&this.y*(u>2?-1:1)>=0},dot:function(){var u=v.read(arguments);return this.x*u.x+this.y*u.y},cross:function(){var u=v.read(arguments);return this.x*u.y-this.y*u.x},project:function(){var u=v.read(arguments),d=u.isZero()?0:this.dot(u)/u.dot(u);return new v(u.x*d,u.y*d)},statics:{min:function(){var u=arguments,d=v.read(u),m=v.read(u);return new v(Math.min(d.x,m.x),Math.min(d.y,m.y))},max:function(){var u=arguments,d=v.read(u),m=v.read(u);return new v(Math.max(d.x,m.x),Math.max(d.y,m.y))},random:function(){return new v(Math.random(),Math.random())},isCollinear:function(u,d,m,_){return Math.abs(u*_-d*m)<=Math.sqrt((u*u+d*d)*(m*m+_*_))*1e-8},isOrthogonal:function(u,d,m,_){return Math.abs(u*m+d*_)<=Math.sqrt((u*u+d*d)*(m*m+_*_))*1e-8}}},r.each(["round","ceil","floor","abs"],function(u){var d=Math[u];this[u]=function(){return new v(d(this.x),d(this.y))}},{})),A=v.extend({initialize:function(d,m,_,S){this._x=d,this._y=m,this._owner=_,this._setter=S},_set:function(u,d,m){return this._x=u,this._y=d,m||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(u){this._x=u,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(u){this._y=u,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(u){this._owner._changeSelection(this._getSelection(),u)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),P=r.extend({_class:"Size",_readIndex:!0,initialize:function(d,m){var _=typeof d,S=this.__read,k=0;if(_==="number"){var I=typeof m=="number";this._set(d,I?m:d),S&&(k=I?2:1)}else if(_==="undefined"||d===null)this._set(0,0),S&&(k=d===null?1:0);else{var L=_==="string"?d.split(/[\s,]+/)||[]:d;k=1,Array.isArray(L)?this._set(+L[0],+(L.length>1?L[1]:L[0])):"width"in L?this._set(L.width||0,L.height||0):"x"in L?this._set(L.x||0,L.y||0):(this._set(0,0),k=0)}return S&&(this.__read=k),this},set:"#initialize",_set:function(u,d){return this.width=u,this.height=d,this},equals:function(u){return u===this||u&&(this.width===u.width&&this.height===u.height||Array.isArray(u)&&this.width===u[0]&&this.height===u[1])||!1},clone:function(){return new P(this.width,this.height)},toString:function(){var u=c.instance;return"{ width: "+u.number(this.width)+", height: "+u.number(this.height)+" }"},_serialize:function(u){var d=u.formatter;return[d.number(this.width),d.number(this.height)]},add:function(){var u=P.read(arguments);return new P(this.width+u.width,this.height+u.height)},subtract:function(){var u=P.read(arguments);return new P(this.width-u.width,this.height-u.height)},multiply:function(){var u=P.read(arguments);return new P(this.width*u.width,this.height*u.height)},divide:function(){var u=P.read(arguments);return new P(this.width/u.width,this.height/u.height)},modulo:function(){var u=P.read(arguments);return new P(this.width%u.width,this.height%u.height)},negate:function(){return new P(-this.width,-this.height)},isZero:function(){var u=f.isZero;return u(this.width)&&u(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(u,d){return new P(Math.min(u.width,d.width),Math.min(u.height,d.height))},max:function(u,d){return new P(Math.max(u.width,d.width),Math.max(u.height,d.height))},random:function(){return new P(Math.random(),Math.random())}}},r.each(["round","ceil","floor","abs"],function(u){var d=Math[u];this[u]=function(){return new P(d(this.width),d(this.height))}},{})),w=P.extend({initialize:function(d,m,_,S){this._width=d,this._height=m,this._owner=_,this._setter=S},_set:function(u,d,m){return this._width=u,this._height=d,m||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(u){this._width=u,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(u){this._height=u,this._owner[this._setter](this)}}),T=r.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(d,m,_,S){var k=arguments,I=typeof d,L;if(I==="number"?(this._set(d,m,_,S),L=4):I==="undefined"||d===null?(this._set(0,0,0,0),L=d===null?1:0):k.length===1&&(Array.isArray(d)?(this._set.apply(this,d),L=1):d.x!==t||d.width!==t?(this._set(d.x||0,d.y||0,d.width||0,d.height||0),L=1):d.from===t&&d.to===t&&(this._set(0,0,0,0),r.readSupported(k,this)&&(L=1))),L===t){var N=v.readNamed(k,"from"),q=r.peek(k),W=N.x,K=N.y,G,U;if(q&&q.x!==t||r.hasNamed(k,"to")){var ae=v.readNamed(k,"to");G=ae.x-W,U=ae.y-K,G<0&&(W=ae.x,G=-G),U<0&&(K=ae.y,U=-U)}else{var Q=P.read(k);G=Q.width,U=Q.height}this._set(W,K,G,U),L=k.__index}var se=k.__filtered;return se&&(this.__filtered=se),this.__read&&(this.__read=L),this},set:"#initialize",_set:function(u,d,m,_){return this.x=u,this.y=d,this.width=m,this.height=_,this},clone:function(){return new T(this.x,this.y,this.width,this.height)},equals:function(u){var d=r.isPlainValue(u)?T.read(arguments):u;return d===this||d&&this.x===d.x&&this.y===d.y&&this.width===d.width&&this.height===d.height||!1},toString:function(){var u=c.instance;return"{ x: "+u.number(this.x)+", y: "+u.number(this.y)+", width: "+u.number(this.width)+", height: "+u.number(this.height)+" }"},_serialize:function(u){var d=u.formatter;return[d.number(this.x),d.number(this.y),d.number(this.width),d.number(this.height)]},getPoint:function(u){var d=u?v:A;return new d(this.x,this.y,this,"setPoint")},setPoint:function(){var u=v.read(arguments);this.x=u.x,this.y=u.y},getSize:function(u){var d=u?P:w;return new d(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var u=P.read(arguments),d=this._sx,m=this._sy,_=u.width,S=u.height;d&&(this.x+=(this.width-_)*d),m&&(this.y+=(this.height-S)*m),this.width=_,this.height=S,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(u){if(!this._fw){var d=u-this.x;this.width-=this._sx===.5?d*2:d}this.x=u,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(u){if(!this._fh){var d=u-this.y;this.height-=this._sy===.5?d*2:d}this.y=u,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(u){if(!this._fw){var d=u-this.x;this.width=this._sx===.5?d*2:d}this.x=u-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(u){if(!this._fh){var d=u-this.y;this.height=this._sy===.5?d*2:d}this.y=u-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(u){this._fw||this._sx===.5?this.x=u-this.width/2:(this._sx&&(this.x+=(u-this.x)*2*this._sx),this.width=(u-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(u){this._fh||this._sy===.5?this.y=u-this.height/2:(this._sy&&(this.y+=(u-this.y)*2*this._sy),this.height=(u-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(u){var d=u?v:A;return new d(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var u=v.read(arguments);return this.setCenterX(u.x),this.setCenterY(u.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(u){return u&&u.width!==t||(Array.isArray(u)?u:arguments).length===4?this._containsRectangle(T.read(arguments)):this._containsPoint(v.read(arguments))},_containsPoint:function(u){var d=u.x,m=u.y;return d>=this.x&&m>=this.y&&d<=this.x+this.width&&m<=this.y+this.height},_containsRectangle:function(u){var d=u.x,m=u.y;return d>=this.x&&m>=this.y&&d+u.width<=this.x+this.width&&m+u.height<=this.y+this.height},intersects:function(){var u=T.read(arguments),d=r.read(arguments)||0;return u.x+u.width>this.x-d&&u.y+u.height>this.y-d&&u.x<this.x+this.width+d&&u.y<this.y+this.height+d},intersect:function(){var u=T.read(arguments),d=Math.max(this.x,u.x),m=Math.max(this.y,u.y),_=Math.min(this.x+this.width,u.x+u.width),S=Math.min(this.y+this.height,u.y+u.height);return new T(d,m,_-d,S-m)},unite:function(){var u=T.read(arguments),d=Math.min(this.x,u.x),m=Math.min(this.y,u.y),_=Math.max(this.x+this.width,u.x+u.width),S=Math.max(this.y+this.height,u.y+u.height);return new T(d,m,_-d,S-m)},include:function(){var u=v.read(arguments),d=Math.min(this.x,u.x),m=Math.min(this.y,u.y),_=Math.max(this.x+this.width,u.x),S=Math.max(this.y+this.height,u.y);return new T(d,m,_-d,S-m)},expand:function(){var u=P.read(arguments),d=u.width,m=u.height;return new T(this.x-d/2,this.y-m/2,this.width+d,this.height+m)},scale:function(u,d){return this.expand(this.width*u-this.width,this.height*(d===t?u:d)-this.height)}},r.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(u,d){var m=u.join(""),_=/^[RL]/.test(m);d>=4&&(u[1]+=_?"Y":"X");var S=u[_?0:1],k=u[_?1:0],I="get"+S,L="get"+k,N="set"+S,q="set"+k,W="get"+m,K="set"+m;this[W]=function(G){var U=G?v:A;return new U(this[I](),this[L](),this,K)},this[K]=function(){var G=v.read(arguments);this[N](G.x),this[q](G.y)}},{beans:!0})),D=T.extend({initialize:function(d,m,_,S,k,I){this._set(d,m,_,S,!0),this._owner=k,this._setter=I},_set:function(u,d,m,_,S){return this._x=u,this._y=d,this._width=m,this._height=_,S||this._owner[this._setter](this),this}},new function(){var u=T.prototype;return r.each(["x","y","width","height"],function(d){var m=r.capitalize(d),_="_"+d;this["get"+m]=function(){return this[_]},this["set"+m]=function(S){this[_]=S,this._dontNotify||this._owner[this._setter](this)}},r.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(d){var m="set"+d;this[m]=function(){this._dontNotify=!0,u[m].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(d){var m=this._owner;m._changeSelection&&m._changeSelection(2,d)}}))}),M=r.extend({_class:"Matrix",initialize:function u(d,m){var _=arguments,S=_.length,k=!0;if(S>=6?this._set.apply(this,_):S===1||S===2?d instanceof u?this._set(d._a,d._b,d._c,d._d,d._tx,d._ty,m):Array.isArray(d)?this._set.apply(this,m?d.concat([m]):d):k=!1:S?k=!1:this.reset(),!k)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(u,d,m,_,S,k,I){return this._a=u,this._b=d,this._c=m,this._d=_,this._tx=S,this._ty=k,I||this._changed(),this},_serialize:function(u,d){return r.serialize(this.getValues(),u,!0,d)},_changed:function(){var u=this._owner;u&&(u._applyMatrix?u.transform(null,!0):u._changed(25))},clone:function(){return new M(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(u){return u===this||u&&this._a===u._a&&this._b===u._b&&this._c===u._c&&this._d===u._d&&this._tx===u._tx&&this._ty===u._ty},toString:function(){var u=c.instance;return"[["+[u.number(this._a),u.number(this._c),u.number(this._tx)].join(", ")+"], ["+[u.number(this._b),u.number(this._d),u.number(this._ty)].join(", ")+"]]"},reset:function(u){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,u||this._changed(),this},apply:function(u,d){var m=this._owner;return m?(m.transform(null,r.pick(u,!0),d),this.isIdentity()):!1},translate:function(){var u=v.read(arguments),d=u.x,m=u.y;return this._tx+=d*this._a+m*this._c,this._ty+=d*this._b+m*this._d,this._changed(),this},scale:function(){var u=arguments,d=v.read(u),m=v.read(u,0,{readNull:!0});return m&&this.translate(m),this._a*=d.x,this._b*=d.x,this._c*=d.y,this._d*=d.y,m&&this.translate(m.negate()),this._changed(),this},rotate:function(u){u*=Math.PI/180;var d=v.read(arguments,1),m=d.x,_=d.y,S=Math.cos(u),k=Math.sin(u),I=m-m*S+_*k,L=_-m*k-_*S,N=this._a,q=this._b,W=this._c,K=this._d;return this._a=S*N+k*W,this._b=S*q+k*K,this._c=-k*N+S*W,this._d=-k*q+S*K,this._tx+=I*N+L*W,this._ty+=I*q+L*K,this._changed(),this},shear:function(){var u=arguments,d=v.read(u),m=v.read(u,0,{readNull:!0});m&&this.translate(m);var _=this._a,S=this._b;return this._a+=d.y*this._c,this._b+=d.y*this._d,this._c+=d.x*_,this._d+=d.x*S,m&&this.translate(m.negate()),this._changed(),this},skew:function(){var u=arguments,d=v.read(u),m=v.read(u,0,{readNull:!0}),_=Math.PI/180,S=new v(Math.tan(d.x*_),Math.tan(d.y*_));return this.shear(S,m)},append:function(u,d){if(u){var m=this._a,_=this._b,S=this._c,k=this._d,I=u._a,L=u._c,N=u._b,q=u._d,W=u._tx,K=u._ty;this._a=I*m+N*S,this._c=L*m+q*S,this._b=I*_+N*k,this._d=L*_+q*k,this._tx+=W*m+K*S,this._ty+=W*_+K*k,d||this._changed()}return this},prepend:function(u,d){if(u){var m=this._a,_=this._b,S=this._c,k=this._d,I=this._tx,L=this._ty,N=u._a,q=u._c,W=u._b,K=u._d,G=u._tx,U=u._ty;this._a=N*m+q*_,this._c=N*S+q*k,this._b=W*m+K*_,this._d=W*S+K*k,this._tx=N*I+q*L+G,this._ty=W*I+K*L+U,d||this._changed()}return this},appended:function(u){return this.clone().append(u)},prepended:function(u){return this.clone().prepend(u)},invert:function(){var u=this._a,d=this._b,m=this._c,_=this._d,S=this._tx,k=this._ty,I=u*_-d*m,L=null;return I&&!isNaN(I)&&isFinite(S)&&isFinite(k)&&(this._a=_/I,this._b=-d/I,this._c=-m/I,this._d=u/I,this._tx=(m*k-_*S)/I,this._ty=(d*S-u*k)/I,L=this),L},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new M(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var u=this._a*this._d-this._c*this._b;return u&&!isNaN(u)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(u,d,m){return arguments.length<3?this._transformPoint(v.read(arguments)):this._transformCoordinates(u,d,m)},_transformPoint:function(u,d,m){var _=u.x,S=u.y;return d||(d=new v),d._set(_*this._a+S*this._c+this._tx,_*this._b+S*this._d+this._ty,m)},_transformCoordinates:function(u,d,m){for(var _=0,S=2*m;_<S;_+=2){var k=u[_],I=u[_+1];d[_]=k*this._a+I*this._c+this._tx,d[_+1]=k*this._b+I*this._d+this._ty}return d},_transformCorners:function(u){var d=u.x,m=u.y,_=d+u.width,S=m+u.height,k=[d,m,_,m,_,S,d,S];return this._transformCoordinates(k,k,4)},_transformBounds:function(u,d,m){for(var _=this._transformCorners(u),S=_.slice(0,2),k=S.slice(),I=2;I<8;I++){var L=_[I],N=I&1;L<S[N]?S[N]=L:L>k[N]&&(k[N]=L)}return d||(d=new T),d._set(S[0],S[1],k[0]-S[0],k[1]-S[1],m)},inverseTransform:function(){return this._inverseTransform(v.read(arguments))},_inverseTransform:function(u,d,m){var _=this._a,S=this._b,k=this._c,I=this._d,L=this._tx,N=this._ty,q=_*I-S*k,W=null;if(q&&!isNaN(q)&&isFinite(L)&&isFinite(N)){var K=u.x-this._tx,G=u.y-this._ty;d||(d=new v),W=d._set((K*I-G*k)/q,(G*_-K*S)/q,m)}return W},decompose:function(){var u=this._a,d=this._b,m=this._c,_=this._d,S=u*_-d*m,k=Math.sqrt,I=Math.atan2,L=180/Math.PI,N,q,W;if(u!==0||d!==0){var K=k(u*u+d*d);N=Math.acos(u/K)*(d>0?1:-1),q=[K,S/K],W=[I(u*m+d*_,K*K),0]}else if(m!==0||_!==0){var G=k(m*m+_*_);N=Math.asin(m/G)*(_>0?1:-1),q=[S/G,G],W=[0,I(u*m+d*_,G*G)]}else N=0,W=q=[0,0];return{translation:this.getTranslation(),rotation:N*L,scaling:new v(q),skewing:new v(W[0]*L,W[1]*L)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new v(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(u){this.isIdentity()||u.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},r.each(["a","b","c","d","tx","ty"],function(u){var d=r.capitalize(u),m="_"+u;this["get"+d]=function(){return this[m]},this["set"+d]=function(_){this[m]=_,this._changed()}},{})),B=r.extend({_class:"Line",initialize:function(d,m,_,S,k){var I=!1;arguments.length>=4?(this._px=d,this._py=m,this._vx=_,this._vy=S,I=k):(this._px=d.x,this._py=d.y,this._vx=m.x,this._vy=m.y,I=_),I||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new v(this._px,this._py)},getVector:function(){return new v(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(u,d){return B.intersect(this._px,this._py,this._vx,this._vy,u._px,u._py,u._vx,u._vy,!0,d)},getSide:function(u,d){return B.getSide(this._px,this._py,this._vx,this._vy,u.x,u.y,!0,d)},getDistance:function(u){return Math.abs(this.getSignedDistance(u))},getSignedDistance:function(u){return B.getSignedDistance(this._px,this._py,this._vx,this._vy,u.x,u.y,!0)},isCollinear:function(u){return v.isCollinear(this._vx,this._vy,u._vx,u._vy)},isOrthogonal:function(u){return v.isOrthogonal(this._vx,this._vy,u._vx,u._vy)},statics:{intersect:function(u,d,m,_,S,k,I,L,N,q){N||(m-=u,_-=d,I-=S,L-=k);var W=m*L-_*I;if(!f.isMachineZero(W)){var K=u-S,G=d-k,U=(I*G-L*K)/W,ae=(m*G-_*K)/W,Q=1e-12,se=-Q,Y=1+Q;if(q||se<U&&U<Y&&se<ae&&ae<Y)return q||(U=U<=0?0:U>=1?1:U),new v(u+U*m,d+U*_)}},getSide:function(u,d,m,_,S,k,I,L){I||(m-=u,_-=d);var N=S-u,q=k-d,W=N*_-q*m;return!L&&f.isMachineZero(W)&&(W=(N*m+N*m)/(m*m+_*_),W>=0&&W<=1&&(W=0)),W<0?-1:W>0?1:0},getSignedDistance:function(u,d,m,_,S,k,I){return I||(m-=u,_-=d),m===0?_>0?S-u:u-S:_===0?m<0?k-d:d-k:((S-u)*_-(k-d)*m)/(_>m?_*Math.sqrt(1+m*m/(_*_)):m*Math.sqrt(1+_*_/(m*m)))},getDistance:function(u,d,m,_,S,k,I){return Math.abs(B.getSignedDistance(u,d,m,_,S,k,I))}}}),O=l.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(d){l.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new ci(null,null,this),this._view=pe.create(this,d||$e.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(u,d){return r.serialize(this._children,u,!0,d)},_changed:function(u,d){if(u&1){var m=this._view;m&&(m._needsUpdate=!0,!m._requested&&m._autoUpdate&&m.requestUpdate())}var _=this._changes;if(_&&d){var S=this._changesById,k=d._id,I=S[k];I?I.flags|=u:_.push(S[k]={item:d,flags:u})}},clear:function(){for(var u=this._children,d=u.length-1;d>=0;d--)u[d].remove()},isEmpty:function(){return!this._children.length},remove:function u(){return u.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(u){this._currentStyle.set(u)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new de({project:this,insert:!0})},getSymbolDefinitions:function(){var u=[],d={};return this.getItems({class:ue,match:function(m){var _=m._definition,S=_._id;return d[S]||(d[S]=!0,u.push(_)),!1}}),u},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var u=this._selectionItems,d=[];for(var m in u){var _=u[m],S=_._selection;S&1&&_.isInserted()?d.push(_):S||this._updateSelection(_)}return d},_updateSelection:function(u){var d=u._id,m=this._selectionItems;u._selection?m[d]!==u&&(this._selectionCount++,m[d]=u):m[d]===u&&(this._selectionCount--,delete m[d])},selectAll:function(){for(var u=this._children,d=0,m=u.length;d<m;d++)u[d].setFullySelected(!0)},deselectAll:function(){var u=this._selectionItems;for(var d in u)u[d].setFullySelected(!1)},addLayer:function(u){return this.insertLayer(t,u)},insertLayer:function(u,d){if(d instanceof de){d._remove(!1,!0),r.splice(this._children,[d],u,0),d._setProject(this,!0);var m=d._name;m&&d.setName(m),this._changes&&d._changed(5),this._activeLayer||(this._activeLayer=d)}else d=null;return d},_insertItem:function(u,d,m){return d=this.insertLayer(u,d)||(this._activeLayer||this._insertItem(t,new de(x.NO_INSERT),!0)).insertChild(u,d),m&&d.activate&&d.activate(),d},getItems:function(u){return x._getItems(this,u)},getItem:function(u){return x._getItems(this,u,null,null,!0)[0]||null},importJSON:function(u){this.activate();var d=this._activeLayer;return r.importJSON(u,d&&d.isEmpty()&&d)},removeOn:function(u){var d=this._removeSets;if(d){u==="mouseup"&&(d.mousedrag=null);var m=d[u];if(m){for(var _ in m){var S=m[_];for(var k in d){var I=d[k];I&&I!=m&&delete I[S._id]}S.remove()}d[u]=null}}},draw:function(u,d,m){this._updateVersion++,u.save(),d.applyToContext(u);for(var _=this._children,S=new r({offset:new v(0,0),pixelRatio:m,viewMatrix:d.isIdentity()?null:d,matrices:[new M],updateMatrix:!0}),k=0,I=_.length;k<I;k++)_[k].draw(u,S);if(u.restore(),this._selectionCount>0){u.save(),u.strokeWidth=1;var L=this._selectionItems,N=this._scope.settings.handleSize,q=this._updateVersion;for(var W in L)L[W]._drawSelection(u,d,N,L,q);u.restore()}}}),x=r.extend(a,{statics:{extend:function u(d){return d._serializeFields&&(d._serializeFields=r.set({},this.prototype._serializeFields,d._serializeFields)),u.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new M,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var u=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return r.each(u,function(d){this._events[d]={install:function(m){this.getView()._countItemEvent(m,1)},uninstall:function(m){this.getView()._countItemEvent(m,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:u}})},{initialize:function(){},_initialize:function(u,d){var m=u&&r.isPlainObject(u),_=m&&u.internal===!0,S=this._matrix=new M,k=m&&u.project||Xt.project,I=Xt.settings;return this._id=_?null:g.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&I.applyMatrix,d&&S.translate(d),S._owner=this,this._style=new ci(k._currentStyle,this,k),_||m&&u.insert==!1||!I.insertItems&&!(m&&u.insert==!0)?this._setProject(k):(m&&u.parent||k)._insertItem(t,this,!0),m&&u!==x.NO_INSERT&&u!==x.INSERT&&this.set(u,{internal:!0,insert:!0,project:!0,parent:!0}),m},_serialize:function(u,d){var m={},_=this;function S(k){for(var I in k){var L=_[I];r.equals(L,I==="leading"?k.fontSize*1.2:k[I])||(m[I]=r.serialize(L,u,I!=="data",d))}}return S(this._serializeFields),this instanceof Z||S(this._style._defaults),[this._class,m]},_changed:function(u){var d=this._symbol,m=this._parent||d,_=this._project;u&8&&(this._bounds=this._position=this._decomposed=t),u&16&&(this._globalMatrix=t),m&&u&72&&x._clearBoundsCache(m),u&2&&x._clearBoundsCache(this),_&&_._changed(u,this),d&&d._changed(u)},getId:function(){return this._id},getName:function(){return this._name},setName:function(u){if(this._name&&this._removeNamed(),u===+u+"")throw new Error("Names consisting only of numbers are not supported.");var d=this._getOwner();if(u&&d){var m=d._children,_=d._namedChildren;(_[u]=_[u]||[]).push(this),u in m||(m[u]=this)}this._name=u||t,this._changed(256)},getStyle:function(){return this._style},setStyle:function(u){this.getStyle().set(u)}},r.each(["locked","visible","blendMode","opacity","guide"],function(u){var d=r.capitalize(u),m="_"+u,_={locked:256,visible:265};this["get"+d]=function(){return this[m]},this["set"+d]=function(S){S!=this[m]&&(this[m]=S,this._changed(_[u]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(u){if(u!==this._selection){this._selection=u;var d=this._project;d&&(d._updateSelection(this),this._changed(257))}},_changeSelection:function(u,d){var m=this._selection;this.setSelection(d?m|u:m&~u)},isSelected:function(){if(this._selectChildren){for(var u=this._children,d=0,m=u.length;d<m;d++)if(u[d].isSelected())return!0}return!!(this._selection&1)},setSelected:function(u){if(this._selectChildren)for(var d=this._children,m=0,_=d.length;m<_;m++)d[m].setSelected(u);this._changeSelection(1,u)},isFullySelected:function(){var u=this._children,d=!!(this._selection&1);if(u&&d){for(var m=0,_=u.length;m<_;m++)if(!u[m].isFullySelected())return!1;return!0}return d},setFullySelected:function(u){var d=this._children;if(d)for(var m=0,_=d.length;m<_;m++)d[m].setFullySelected(u);this._changeSelection(1,u)},isClipMask:function(){return this._clipMask},setClipMask:function(u){this._clipMask!=(u=!!u)&&(this._clipMask=u,u&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(u){this._data=u},getPosition:function(u){var d=u?v:A,m=this._position||(this._position=this._getPositionFromBounds());return new d(m.x,m.y,this,"setPosition")},setPosition:function(){this.translate(v.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(u){return this._pivot?this._matrix._transformPoint(this._pivot):(u||this.getBounds()).getCenter(!0)},getPivot:function(){var u=this._pivot;return u?new A(u.x,u.y,this,"setPivot"):null},setPivot:function(){this._pivot=v.read(arguments,0,{clone:!0,readNull:!0}),this._position=t}},r.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(u,d){this[d]=function(m){return this.getBounds(m,u)}},{beans:!0,getBounds:function(u,d){var m=d||u instanceof M,_=r.set({},m?d:u,this._boundsOptions);(!_.stroke||this.getStrokeScaling())&&(_.cacheItem=this);var S=this._getCachedBounds(m&&u,_).rect;return arguments.length?S:new D(S.x,S.y,S.width,S.height,this,"setBounds")},setBounds:function(){var u=T.read(arguments),d=this.getBounds(),m=this._matrix,_=new M,S=u.getCenter();_.translate(S),(u.width!=d.width||u.height!=d.height)&&(m.isInvertible()||(m.set(m._backup||new M().translate(m.getTranslation())),d=this.getBounds()),_.scale(d.width!==0?u.width/d.width:0,d.height!==0?u.height/d.height:0)),S=d.getCenter(),_.translate(-S.x,-S.y),this.transform(_)},_getBounds:function(u,d){var m=this._children;return!m||!m.length?new T:(x._updateBoundsCache(this,d.cacheItem),x._getBounds(m,u,d))},_getBoundsCacheKey:function(u,d){return[u.stroke?1:0,u.handle?1:0,d?1:0].join("")},_getCachedBounds:function(u,d,m){u=u&&u._orNullIfIdentity();var _=d.internal&&!m,S=d.cacheItem,k=_?null:this._matrix._orNullIfIdentity(),I=S&&(!u||u.equals(k))&&this._getBoundsCacheKey(d,_),L=this._bounds;if(x._updateBoundsCache(this._parent||this._symbol,S),I&&L&&I in L){var N=L[I];return{rect:N.rect.clone(),nonscaling:N.nonscaling}}var q=this._getBounds(u||k,d),W=q.rect||q,K=this._style,G=q.nonscaling||K.hasStroke()&&!K.getStrokeScaling();if(I){L||(this._bounds=L={});var N=L[I]={rect:W.clone(),nonscaling:G,internal:_}}return{rect:W,nonscaling:G}},_getStrokeMatrix:function(u,d){var m=this.getStrokeScaling()?null:d&&d.internal?this:this._parent||this._symbol&&this._symbol._item,_=m?m.getViewMatrix().invert():u;return _&&_._shiftless()},statics:{_updateBoundsCache:function(u,d){if(u&&d){var m=d._id,_=u._boundsCache=u._boundsCache||{ids:{},list:[]};_.ids[m]||(_.list.push(d),_.ids[m]=d)}},_clearBoundsCache:function(u){var d=u._boundsCache;if(d){u._bounds=u._position=u._boundsCache=t;for(var m=0,_=d.list,S=_.length;m<S;m++){var k=_[m];k!==u&&(k._bounds=k._position=t,k._boundsCache&&x._clearBoundsCache(k))}}},_getBounds:function(u,d,m){var _=1/0,S=-_,k=_,I=S,L=!1;m=m||{};for(var N=0,q=u.length;N<q;N++){var W=u[N];if(W._visible&&!W.isEmpty(!0)){var K=W._getCachedBounds(d&&d.appended(W._matrix),m,!0),G=K.rect;_=Math.min(G.x,_),k=Math.min(G.y,k),S=Math.max(G.x+G.width,S),I=Math.max(G.y+G.height,I),K.nonscaling&&(L=!0)}}return{rect:isFinite(_)?new T(_,k,S-_,I-k):new T,nonscaling:L}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var u=this._decompose();return u?u.rotation:0},setRotation:function(u){var d=this.getRotation();if(d!=null&&u!=null){var m=this._decomposed;this.rotate(u-d),m&&(m.rotation=u,this._decomposed=m)}},getScaling:function(){var u=this._decompose(),d=u&&u.scaling;return new A(d?d.x:1,d?d.y:1,this,"setScaling")},setScaling:function(){var u=this.getScaling(),d=v.read(arguments,0,{clone:!0,readNull:!0});if(u&&d&&!u.equals(d)){var m=this.getRotation(),_=this._decomposed,S=new M,k=f.isZero;if(k(u.x)||k(u.y))S.translate(_.translation),m&&S.rotate(m),S.scale(d.x,d.y),this._matrix.set(S);else{var I=this.getPosition(!0);S.translate(I),m&&S.rotate(m),S.scale(d.x/u.x,d.y/u.y),m&&S.rotate(-m),S.translate(I.negate()),this.transform(S)}_&&(_.scaling=d,this._decomposed=_)}},getMatrix:function(){return this._matrix},setMatrix:function(){var u=this._matrix;u.set.apply(u,arguments)},getGlobalMatrix:function(u){var d=this._globalMatrix;if(d)for(var m=this._parent,_=[];m;){if(!m._globalMatrix){d=null;for(var S=0,k=_.length;S<k;S++)_[S]._globalMatrix=null;break}_.push(m),m=m._parent}if(!d){d=this._globalMatrix=this._matrix.clone();var m=this._parent;m&&d.prepend(m.getGlobalMatrix(!0))}return u?d:d.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(u){(this._applyMatrix=this._canApplyMatrix&&!!u)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(u,d){if(this._project!==u){this._project&&this._installEvents(!1),this._project=u;for(var m=this._children,_=0,S=m&&m.length;_<S;_++)m[_]._setProject(u);d=!0}d&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function u(d){u.base.call(this,d);for(var m=this._children,_=0,S=m&&m.length;_<S;_++)m[_]._installEvents(d)},getLayer:function(){for(var u=this;u=u._parent;)if(u instanceof de)return u;return null},getParent:function(){return this._parent},setParent:function(u){return u.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(u){this.removeChildren(),this.addChildren(u)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var u=this._getOwner();return u&&u._children[this._index+1]||null},getPreviousSibling:function(){var u=this._getOwner();return u&&u._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(u){var d=this._parent,m=d&&d._children;m&&d.insertChildren(u in m?u:t,[this])},equals:function(u){return u===this||u&&this._class===u._class&&this._style.equals(u._style)&&this._matrix.equals(u._matrix)&&this._locked===u._locked&&this._visible===u._visible&&this._blendMode===u._blendMode&&this._opacity===u._opacity&&this._clipMask===u._clipMask&&this._guide===u._guide&&this._equals(u)||!1},_equals:function(u){return r.equals(this._children,u._children)},clone:function(u){var d=new this.constructor(x.NO_INSERT),m=this._children,_=r.pick(u?u.insert:t,u===t||u===!0),S=r.pick(u?u.deep:t,!0);m&&d.copyAttributes(this),(!m||S)&&d.copyContent(this),m||d.copyAttributes(this),_&&d.insertAbove(this);var k=this._name,I=this._parent;if(k&&I){for(var m=I._children,L=k,N=1;m[k];)k=L+" "+N++;k!==L&&d.setName(k)}return d},copyContent:function(u){for(var d=u._children,m=0,_=d&&d.length;m<_;m++)this.addChild(d[m].clone(!1),!0)},copyAttributes:function(u,d){this.setStyle(u._style);for(var m=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],_=0,S=m.length;_<S;_++){var k=m[_];u.hasOwnProperty(k)&&(this[k]=u[k])}d||this._matrix.set(u._matrix,!0),this.setApplyMatrix(u._applyMatrix),this.setPivot(u._pivot),this.setSelection(u._selection);var I=u._data,L=u._name;this._data=I?r.clone(I):null,L&&this.setName(L)},rasterize:function(u,d){var m,_,S;r.isPlainObject(u)?(m=u.resolution,_=u.insert,S=u.raster):(m=u,_=d),S||(S=new me(x.NO_INSERT));var k=this.getStrokeBounds(),I=(m||this.getView().getResolution())/72,L=k.getTopLeft().floor(),N=k.getBottomRight().ceil(),q=new P(N.subtract(L)),W=q.multiply(I);if(S.setSize(W,!0),!W.isZero()){var K=S.getContext(!0),G=new M().scale(I).translate(L.negate());K.save(),G.applyToContext(K),this.draw(K,new r({matrices:[G]})),K.restore()}return S._matrix.set(new M().translate(L.add(q.divide(2))).scale(1/I)),(_===t||_)&&S.insertAbove(this),S},contains:function(){var u=this._matrix;return u.isInvertible()&&!!this._contains(u._inverseTransform(v.read(arguments)))},_contains:function(u){var d=this._children;if(d){for(var m=d.length-1;m>=0;m--)if(d[m].contains(u))return!0;return!1}return u.isInside(this.getInternalBounds())},isInside:function(){return T.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new De.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(u,d){return u instanceof x?this._asPathItem().getIntersections(u._asPathItem(),null,d,!0).length>0:!1}},new function(){function u(){var _=arguments;return this._hitTest(v.read(_),Te.getOptions(_))}function d(){var _=arguments,S=v.read(_),k=Te.getOptions(_),I=[];return this._hitTest(S,new r({all:I},k)),I}function m(_,S,k,I){var L=this._children;if(L)for(var N=L.length-1;N>=0;N--){var q=L[N],W=q!==I&&q._hitTest(_,S,k);if(W&&!S.all)return W}return null}return O.inject({hitTest:u,hitTestAll:d,_hitTest:m}),{hitTest:u,hitTestAll:d,_hitTestChildren:m}},{_hitTest:function(u,d,m){if(this._locked||!this._visible||this._guide&&!d.guides||this.isEmpty())return null;var _=this._matrix,S=m?m.appended(_):this.getGlobalMatrix().prepend(this.getView()._matrix),k=Math.max(d.tolerance,1e-12),I=d._tolerancePadding=new P(De._getStrokePadding(k,_._shiftless().invert()));if(u=_._inverseTransform(u),!u||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(I.multiply(2))._containsPoint(u))return null;var L=!(d.guides&&!this._guide||d.selected&&!this.isSelected()||d.type&&d.type!==r.hyphenate(this._class)||d.class&&!(this instanceof d.class)),N=d.match,q=this,W,K;function G(F){return F&&N&&!N(F)&&(F=null),F&&d.all&&d.all.push(F),F}function U(F,J){var re=J?W["get"+J]():q.getPosition();if(u.subtract(re).divide(I).length<=1)return new Te(F,q,{name:J?r.hyphenate(J):F,point:re})}var ae=d.position,Q=d.center,se=d.bounds;if(L&&this._parent&&(ae||Q||se)){if((Q||se)&&(W=this.getInternalBounds()),K=ae&&U("position")||Q&&U("center","Center"),!K&&se)for(var Y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],ee=0;ee<8&&!K;ee++)K=U("bounds",Y[ee]);K=G(K)}return K||(K=this._hitTestChildren(u,d,S)||L&&G(this._hitTestSelf(u,d,S,this.getStrokeScaling()?null:S._shiftless().invert()))||null),K&&K.point&&(K.point=_.transform(K.point)),K},_hitTestSelf:function(u,d){if(d.fill&&this.hasFill()&&this._contains(u))return new Te("fill",this)},matches:function(u,d){function m(I,L){for(var N in I)if(I.hasOwnProperty(N)){var q=I[N],W=L[N];if(r.isPlainObject(q)&&r.isPlainObject(W)){if(!m(q,W))return!1}else if(!r.equals(q,W))return!1}return!0}var _=typeof u;if(_==="object"){for(var S in u)if(u.hasOwnProperty(S)&&!this.matches(S,u[S]))return!1;return!0}else{if(_==="function")return u(this);if(u==="match")return d(this);var k=/^(empty|editable)$/.test(u)?this["is"+r.capitalize(u)]():u==="type"?r.hyphenate(this._class):this[u];if(u==="class"){if(typeof d=="function")return this instanceof d;k=this._class}if(typeof d=="function")return!!d(k);if(d){if(d.test)return d.test(k);if(r.isPlainObject(d))return m(d,k)}return r.equals(k,d)}},getItems:function(u){return x._getItems(this,u,this._matrix)},getItem:function(u){return x._getItems(this,u,this._matrix,null,!0)[0]||null},statics:{_getItems:function u(d,m,_,S,k){if(!S){var I=typeof m=="object"&&m,L=I&&I.overlapping,N=I&&I.inside,q=L||N,G=q&&T.read([q]);S={items:[],recursive:I&&I.recursive!==!1,inside:!!N,overlapping:!!L,rect:G,path:L&&new De.Rectangle({rectangle:G,insert:!1})},I&&(m=r.filter({},m,{recursive:!0,inside:!0,overlapping:!0}))}var W=d._children,K=S.items,G=S.rect;_=G&&(_||new M);for(var U=0,ae=W&&W.length;U<ae;U++){var Q=W[U],se=_&&_.appended(Q._matrix),Y=!0;if(G){var q=Q.getBounds(se);if(!G.intersects(q))continue;G.contains(q)||S.overlapping&&(q.contains(G)||S.path.intersects(Q,se))||(Y=!1)}if(Y&&Q.matches(m)&&(K.push(Q),k)||(S.recursive!==!1&&u(Q,m,se,S,k),k&&K.length>0))break}return K}}},{importJSON:function(u){var d=r.importJSON(u,this);return d!==this?this.addChild(d):d},addChild:function(u){return this.insertChild(t,u)},insertChild:function(u,d){var m=d?this.insertChildren(u,[d]):null;return m&&m[0]},addChildren:function(u){return this.insertChildren(this._children.length,u)},insertChildren:function(u,d){var m=this._children;if(m&&d&&d.length>0){d=r.slice(d);for(var _={},S=d.length-1;S>=0;S--){var k=d[S],I=k&&k._id;!k||_[I]?d.splice(S,1):(k._remove(!1,!0),_[I]=!0)}r.splice(m,d,u,0);for(var L=this._project,N=L._changes,S=0,q=d.length;S<q;S++){var k=d[S],W=k._name;k._parent=this,k._setProject(L,!0),W&&k.setName(W),N&&k._changed(5)}this._changed(11)}else d=null;return d},_insertItem:"#insertChild",_insertAt:function(u,d){var m=u&&u._getOwner(),_=u!==this&&m?this:null;return _&&(_._remove(!1,!0),m._insertItem(u._index+d,_)),_},insertAbove:function(u){return this._insertAt(u,1)},insertBelow:function(u){return this._insertAt(u,0)},sendToBack:function(){var u=this._getOwner();return u?u._insertItem(0,this):null},bringToFront:function(){var u=this._getOwner();return u?u._insertItem(t,this):null},appendTop:"#addChild",appendBottom:function(u){return this.insertChild(0,u)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(u){return u._insertItem(t,this)},copyTo:function(u){return this.clone(!1).addTo(u)},reduce:function(u){var d=this._children;if(d&&d.length===1){var m=d[0].reduce(u);return this._parent?(m.insertAbove(this),this.remove()):m.remove(),m}return this},_removeNamed:function(){var u=this._getOwner();if(u){var d=u._children,m=u._namedChildren,_=this._name,S=m[_],k=S?S.indexOf(this):-1;k!==-1&&(d[_]==this&&delete d[_],S.splice(k,1),S.length?d[_]=S[0]:delete m[_])}},_remove:function(u,d){var m=this._getOwner(),_=this._project,S=this._index;return this._style&&this._style._dispose(),m?(this._name&&this._removeNamed(),S!=null&&(_._activeLayer===this&&(_._activeLayer=this.getNextSibling()||this.getPreviousSibling()),r.splice(m._children,null,S,1)),this._installEvents(!1),u&&_._changes&&this._changed(5),d&&m._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(u){var d=u&&u.insertBelow(this);return d&&this.remove(),d},removeChildren:function(u,d){if(!this._children)return null;u=u||0,d=r.pick(d,this._children.length);for(var m=r.splice(this._children,null,u,d-u),_=m.length-1;_>=0;_--)m[_]._remove(!0,!1);return m.length>0&&this._changed(11),m},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var u=0,d=this._children.length;u<d;u++)this._children[u]._index=u;this._changed(11)}},isEmpty:function(u){var d=this._children,m=d?d.length:0;if(u){for(var _=0;_<m;_++)if(!d[_].isEmpty(u))return!1;return!0}return!m},isEditable:function(){for(var u=this;u;){if(!u._visible||u._locked)return!1;u=u._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(u){function d(I){var L=[];do L.unshift(I);while(I=I._parent);return L}for(var m=d(this),_=d(u),S=0,k=Math.min(m.length,_.length);S<k;S++)if(m[S]!=_[S])return m[S]._index<_[S]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(u){return this._getOrder(u)===-1},isBelow:function(u){return this._getOrder(u)===1},isParent:function(u){return this._parent===u},isChild:function(u){return u&&u._parent===this},isDescendant:function(u){for(var d=this;d=d._parent;)if(d===u)return!0;return!1},isAncestor:function(u){return u?u.isDescendant(this):!1},isSibling:function(u){return this._parent===u._parent},isGroupedWith:function(u){for(var d=this._parent;d;){if(d._parent&&/^(Group|Layer|CompoundPath)$/.test(d._class)&&u.isDescendant(d))return!0;d=d._parent}return!1}},r.each(["rotate","scale","shear","skew"],function(u){var d=u==="rotate";this[u]=function(){var m=arguments,_=(d?r:v).read(m),S=v.read(m,0,{readNull:!0});return this.transform(new M()[u](_,S||this.getPosition(!0)))}},{translate:function(){var u=new M;return this.transform(u.translate.apply(u,arguments))},transform:function(u,d,m){var _=this._matrix,S=u&&!u.isIdentity(),k=m&&this._canApplyMatrix||this._applyMatrix&&(S||!_.isIdentity()||d&&this._children);if(!S&&!k)return this;if(S){!u.isInvertible()&&_.isInvertible()&&(_._backup=_.getValues()),_.prepend(u,!0);var I=this._style,L=I.getFillColor(!0),N=I.getStrokeColor(!0);L&&L.transform(u),N&&N.transform(u)}if(k&&(k=this._transformContent(_,d,m))){var q=this._pivot;q&&_._transformPoint(q,q,!0),_.reset(!0),m&&this._canApplyMatrix&&(this._applyMatrix=!0)}var W=this._bounds,K=this._position;(S||k)&&this._changed(25);var G=S&&W&&u.decompose();if(G&&G.skewing.isZero()&&G.rotation%90===0){for(var U in W){var ae=W[U];if(ae.nonscaling)delete W[U];else if(k||!ae.internal){var Q=ae.rect;u._transformBounds(Q,Q)}}this._bounds=W;var se=W[this._getBoundsCacheKey(this._boundsOptions||{})];se&&(this._position=this._getPositionFromBounds(se.rect))}else S&&K&&this._pivot&&(this._position=u._transformPoint(K,K));return this},_transformContent:function(u,d,m){var _=this._children;if(_){for(var S=0,k=_.length;S<k;S++)_[S].transform(u,d,m);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(v.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(v.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(v.read(arguments))},localToParent:function(){return this._matrix._transformPoint(v.read(arguments))},fitBounds:function(u,d){u=T.read(arguments);var m=this.getBounds(),_=m.height/m.width,S=u.height/u.width,k=(d?_>S:_<S)?u.width/m.width:u.height/m.height,I=new T(new v,new P(m.width*k,m.height*k));I.setCenter(u.getCenter()),this.setBounds(I)}}),{_setStyles:function(u,d,m){var _=this._style,S=this._matrix;if(_.hasFill()&&(u.fillStyle=_.getFillColor().toCanvasStyle(u,S)),_.hasStroke()){u.strokeStyle=_.getStrokeColor().toCanvasStyle(u,S),u.lineWidth=_.getStrokeWidth();var k=_.getStrokeJoin(),I=_.getStrokeCap(),L=_.getMiterLimit();if(k&&(u.lineJoin=k),I&&(u.lineCap=I),L&&(u.miterLimit=L),Xt.support.nativeDash){var N=_.getDashArray(),q=_.getDashOffset();N&&N.length&&("setLineDash"in u?(u.setLineDash(N),u.lineDashOffset=q):(u.mozDash=N,u.mozDashOffset=q))}}if(_.hasShadow()){var W=d.pixelRatio||1,K=m._shiftless().prepend(new M().scale(W,W)),G=K.transform(new v(_.getShadowBlur(),0)),U=K.transform(this.getShadowOffset());u.shadowColor=_.getShadowColor().toCanvasStyle(u),u.shadowBlur=G.getLength(),u.shadowOffsetX=U.x,u.shadowOffsetY=U.y}},draw:function(u,d,m){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var _=d.matrices,S=d.viewMatrix,k=this._matrix,I=_[_.length-1].appended(k);if(I.isInvertible()){S=S?S.appended(I):I,_.push(I),d.updateMatrix&&(this._globalMatrix=I);var L=this._blendMode,N=f.clamp(this._opacity,0,1),q=L==="normal",W=Xe.nativeModes[L],K=q&&N===1||d.dontStart||d.clip||(W||q&&N<1)&&this._canComposite(),G=d.pixelRatio||1,U,ae,Q;if(!K){var se=this.getStrokeBounds(S);if(!se.width||!se.height){_.pop();return}Q=d.offset,ae=d.offset=se.getTopLeft().floor(),U=u,u=$e.getContext(se.getSize().ceil().add(1).multiply(G)),G!==1&&u.scale(G,G)}u.save();var Y=m?m.appended(k):this._canScaleStroke&&!this.getStrokeScaling(!0)&&S,ee=!K&&d.clipItem,F=!Y||ee;if(K?(u.globalAlpha=N,W&&(u.globalCompositeOperation=L)):F&&u.translate(-ae.x,-ae.y),F&&(K?k:S).applyToContext(u),ee&&d.clipItem.draw(u,d.extend({clip:!0})),Y){u.setTransform(G,0,0,G,0,0);var J=d.offset;J&&u.translate(-J.x,-J.y)}this._draw(u,d,S,Y),u.restore(),_.pop(),d.clip&&!d.dontFinish&&u.clip(this.getFillRule()),K||(Xe.process(L,u,U,N,ae.subtract(Q).multiply(G)),$e.release(u),d.offset=Q)}}},_isUpdated:function(u){var d=this._parent;if(d instanceof et)return d._isUpdated(u);var m=this._updateVersion===u;return!m&&d&&d._visible&&d._isUpdated(u)&&(this._updateVersion=u,m=!0),m},_drawSelection:function(u,d,m,_,S){var k=this._selection,I=k&1,L=k&2||I&&this._selectBounds,N=k&4;if(this._drawSelected||(I=!1),(I||L||N)&&this._isUpdated(S)){var q,W=this.getSelectedColor(!0)||(q=this.getLayer())&&q.getSelectedColor(!0),K=d.appended(this.getGlobalMatrix(!0)),G=m/2;if(u.strokeStyle=u.fillStyle=W?W.toCanvasStyle(u):"#009dec",I&&this._drawSelected(u,K,_),N){var U=this.getPosition(!0),ae=this._parent,Q=ae?ae.localToGlobal(U):U,se=Q.x,Y=Q.y;u.beginPath(),u.arc(se,Y,G,0,Math.PI*2,!0),u.stroke();for(var ee=[[0,-1],[1,0],[0,1],[-1,0]],F=G,J=m+1,re=0;re<4;re++){var ce=ee[re],ne=ce[0],ye=ce[1];u.moveTo(se+ne*F,Y+ye*F),u.lineTo(se+ne*J,Y+ye*J),u.stroke()}}if(L){var we=K._transformCorners(this.getInternalBounds());u.beginPath();for(var re=0;re<8;re++)u[re?"lineTo":"moveTo"](we[re],we[++re]);u.closePath(),u.stroke();for(var re=0;re<8;re++)u.fillRect(we[re]-G,we[++re]-G,m,m)}}},_canComposite:function(){return!1}},r.each(["down","drag","up","move"],function(u){this["removeOn"+r.capitalize(u)]=function(){var d={};return d[u]=!0,this.removeOn(d)}},{removeOn:function(u){for(var d in u)if(u[d]){var m="mouse"+d,_=this._project,S=_._removeSets=_._removeSets||{};S[m]=S[m]||{},S[m][this._id]=this}return this}}),{tween:function(u,d,m){m||(m=d,d=u,u=null,m||(m=d,d=null));var _=m&&m.easing,S=m&&m.start,k=m!=null&&(typeof m=="number"?m:m.duration),I=new _e(this,u,d,k,_,S);function L(N){I._handleFrame(N.time*1e3),I.running||this.off("frame",L)}return k&&this.on("frame",L),I},tweenTo:function(u,d){return this.tween(null,u,d)},tweenFrom:function(u,d){return this.tween(u,null,d)}}),Z=x.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(d){this._children=[],this._namedChildren={},this._initialize(d)||this.addChildren(Array.isArray(d)?d:arguments)},_changed:function u(d){u.base.call(this,d),d&2050&&(this._clipItem=t)},_getClipItem:function(){var u=this._clipItem;if(u===t){u=null;for(var d=this._children,m=0,_=d.length;m<_;m++)if(d[m]._clipMask){u=d[m];break}this._clipItem=u}return u},isClipped:function(){return!!this._getClipItem()},setClipped:function(u){var d=this.getFirstChild();d&&d.setClipMask(u)},_getBounds:function u(d,m){var _=this._getClipItem();return _?_._getCachedBounds(_._matrix.prepended(d),r.set({},m,{stroke:!1})):u.base.call(this,d,m)},_hitTestChildren:function u(d,m,_){var S=this._getClipItem();return(!S||S.contains(d))&&u.base.call(this,d,m,_,S)},_draw:function(u,d){var m=d.clip,_=!m&&this._getClipItem();d=d.extend({clipItem:_,clip:!1}),m?(u.beginPath(),d.dontStart=d.dontFinish=!0):_&&_.draw(u,d.extend({clip:!0}));for(var S=this._children,k=0,I=S.length;k<I;k++){var L=S[k];L!==_&&L.draw(u,d)}}}),de=Z.extend({_class:"Layer",initialize:function(){Z.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function u(){return this._parent?u.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),$=x.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(d,m){this._initialize(d,m)},_equals:function(u){return this._type===u._type&&this._size.equals(u._size)&&r.equals(this._radius,u._radius)},copyContent:function(u){this.setType(u._type),this.setSize(u._size),this.setRadius(u._radius)},getType:function(){return this._type},setType:function(u){this._type=u},getShape:"#getType",setShape:"#setType",getSize:function(){var u=this._size;return new w(u.width,u.height,this,"setSize")},setSize:function(){var u=P.read(arguments);if(!this._size)this._size=u.clone();else if(!this._size.equals(u)){var d=this._type,m=u.width,_=u.height;d==="rectangle"?this._radius.set(P.min(this._radius,u.divide(2).abs())):d==="circle"?(m=_=(m+_)/2,this._radius=m/2):d==="ellipse"&&this._radius._set(m/2,_/2),this._size._set(m,_),this._changed(9)}},getRadius:function(){var u=this._radius;return this._type==="circle"?u:new w(u.width,u.height,this,"setRadius")},setRadius:function(u){var d=this._type;if(d==="circle"){if(u===this._radius)return;var m=u*2;this._radius=u,this._size._set(m,m)}else if(u=P.read(arguments),!this._radius)this._radius=u.clone();else{if(this._radius.equals(u))return;if(this._radius.set(u),d==="rectangle"){var m=P.max(this._size,u.multiply(2));this._size.set(m)}else d==="ellipse"&&this._size._set(u.width*2,u.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(u){var d=new De[r.capitalize(this._type)]({center:new v,size:this._size,radius:this._radius,insert:!1});return d.copyAttributes(this),Xt.settings.applyMatrix&&d.setApplyMatrix(!0),(u===t||u)&&d.insertAbove(this),d},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(u,d,m,_){var S=this._style,k=S.hasFill(),I=S.hasStroke(),L=d.dontFinish||d.clip,N=!_;if(k||I||L){var q=this._type,W=this._radius,K=q==="circle";if(d.dontStart||u.beginPath(),N&&K)u.arc(0,0,W,0,Math.PI*2,!0);else{var G=K?W:W.width,U=K?W:W.height,ae=this._size,Q=ae.width,se=ae.height;if(N&&q==="rectangle"&&G===0&&U===0)u.rect(-Q/2,-se/2,Q,se);else{var Y=Q/2,ee=se/2,F=1-.5522847498307936,J=G*F,re=U*F,ce=[-Y,-ee+U,-Y,-ee+re,-Y+J,-ee,-Y+G,-ee,Y-G,-ee,Y-J,-ee,Y,-ee+re,Y,-ee+U,Y,ee-U,Y,ee-re,Y-J,ee,Y-G,ee,-Y+G,ee,-Y+J,ee,-Y,ee-re,-Y,ee-U];_&&_.transform(ce,ce,32),u.moveTo(ce[0],ce[1]),u.bezierCurveTo(ce[2],ce[3],ce[4],ce[5],ce[6],ce[7]),Y!==G&&u.lineTo(ce[8],ce[9]),u.bezierCurveTo(ce[10],ce[11],ce[12],ce[13],ce[14],ce[15]),ee!==U&&u.lineTo(ce[16],ce[17]),u.bezierCurveTo(ce[18],ce[19],ce[20],ce[21],ce[22],ce[23]),Y!==G&&u.lineTo(ce[24],ce[25]),u.bezierCurveTo(ce[26],ce[27],ce[28],ce[29],ce[30],ce[31])}}u.closePath()}!L&&(k||I)&&(this._setStyles(u,d,m),k&&(u.fill(S.getFillRule()),u.shadowColor="rgba(0,0,0,0)"),I&&u.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(u,d){var m=new T(this._size).setCenter(0,0),_=this._style,S=d.stroke&&_.hasStroke()&&_.getStrokeWidth();return u&&(m=u._transformBounds(m)),S?m.expand(De._getStrokePadding(S,this._getStrokeMatrix(u,d))):m}},new function(){function u(m,_,S){var k=m._radius;if(!k.isZero())for(var I=m._size.divide(2),L=1;L<=4;L++){var N=new v(L>1&&L<4?-1:1,L>2?-1:1),q=N.multiply(I),W=q.subtract(N.multiply(k)),K=new T(S?q.add(N.multiply(S)):q,W);if(K.contains(_))return{point:W,quadrant:L}}}function d(m,_,S,k){var I=m.divide(_);return(!k||I.isInQuadrant(k))&&I.subtract(I.normalize()).multiply(_).divide(S).length<=1}return{_contains:function m(_){if(this._type==="rectangle"){var S=u(this,_);return S?_.subtract(S.point).divide(this._radius).getLength()<=1:m.base.call(this,_)}else return _.divide(this.size).getLength()<=.5},_hitTestSelf:function m(_,S,k,I){var L=!1,N=this._style,q=S.stroke&&N.hasStroke(),W=S.fill&&N.hasFill();if(q||W){var K=this._type,G=this._radius,U=q?N.getStrokeWidth()/2:0,ae=S._tolerancePadding.add(De._getStrokePadding(U,!N.getStrokeScaling()&&I));if(K==="rectangle"){var Q=ae.multiply(2),se=u(this,_,Q);if(se)L=d(_.subtract(se.point),G,ae,se.quadrant);else{var Y=new T(this._size).setCenter(0,0),ee=Y.expand(Q),F=Y.expand(Q.negate());L=ee._containsPoint(_)&&!F._containsPoint(_)}}else L=d(_,G,ae)}return L?new Te(q?"stroke":"fill",this):m.base.apply(this,arguments)}}},{statics:new function(){function u(d,m,_,S,k){var I=r.create($.prototype);return I._type=d,I._size=_,I._radius=S,I._initialize(r.getNamed(k),m),I}return{Circle:function(){var d=arguments,m=v.readNamed(d,"center"),_=r.readNamed(d,"radius");return u("circle",m,new P(_*2),_,d)},Rectangle:function(){var d=arguments,m=T.readNamed(d,"rectangle"),_=P.min(P.readNamed(d,"radius"),m.getSize(!0).divide(2));return u("rectangle",m.getCenter(!0),m.getSize(!0),_,d)},Ellipse:function(){var d=arguments,m=$._readEllipse(d),_=m.radius;return u("ellipse",m.center,_.multiply(2),_,d)},_readEllipse:function(d){var m,_;if(r.hasNamed(d,"radius"))m=v.readNamed(d,"center"),_=P.readNamed(d,"radius");else{var S=T.readNamed(d,"rectangle");m=S.getCenter(!0),_=S.getSize(!0).divide(2)}return{center:m,radius:_}}}}}),me=x.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(d,m){if(!this._initialize(d,m!==t&&v.read(arguments))){var _,S=typeof d,k=S==="string"?s.getElementById(d):S==="object"?d:null;if(k&&k!==x.NO_INSERT){if(k.getContext||k.naturalHeight!=null)_=k;else if(k){var I=P.read(arguments);I.isZero()||(_=$e.getCanvas(I))}}_?this.setImage(_):this.setSource(d)}this._size||(this._size=new P,this._loaded=!1)},_equals:function(u){return this.getSource()===u.getSource()},copyContent:function(u){var d=u._image,m=u._canvas;if(d)this._setImage(d);else if(m){var _=$e.getCanvas(u._size);_.getContext("2d").drawImage(m,0,0),this._setImage(_)}this._crossOrigin=u._crossOrigin},getSize:function(){var u=this._size;return new w(u?u.width:0,u?u.height:0,this,"setSize")},setSize:function(u,d){var m=P.read(arguments);if(m.equals(this._size))d&&this.clear();else if(m.width>0&&m.height>0){var _=!d&&this.getElement();this._setImage($e.getCanvas(m)),_&&this.getContext(!0).drawImage(_,0,0,m.width,m.height)}else this._canvas&&$e.release(this._canvas),this._size=m.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(u){this.setSize(u,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(u){this.setSize(this.getWidth(),u)},getLoaded:function(){return this._loaded},isEmpty:function(){var u=this._size;return!u||u.width===0&&u.height===0},getResolution:function(){var u=this._matrix,d=new v(0,0).transform(u),m=new v(1,0).transform(u).subtract(d),_=new v(0,1).transform(u).subtract(d);return new P(72/m.getLength(),72/_.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(u){var d=this;function m(_){var S=d.getView(),k=_&&_.type||"load";S&&d.responds(k)&&(Xt=S._scope,d.emit(k,new wt(_)))}this._setImage(u),this._loaded?setTimeout(m,0):u&&Pe.add(u,{load:function(_){d._setImage(u),m(_)},error:m})},_setImage:function(u){this._canvas&&$e.release(this._canvas),u&&u.getContext?(this._image=null,this._canvas=u,this._loaded=!0):(this._image=u,this._canvas=null,this._loaded=!!(u&&u.src&&u.complete)),this._size=new P(u?u.naturalWidth||u.width:0,u?u.naturalHeight||u.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var u=$e.getContext(this._size);try{this._image&&u.drawImage(this._image,0,0),this._canvas=u.canvas}catch{$e.release(u)}}return this._canvas},setCanvas:"#setImage",getContext:function(u){return this._context||(this._context=this.getCanvas().getContext("2d")),u&&(this._image=null,this._changed(1025)),this._context},setContext:function(u){this._context=u},getSource:function(){var u=this._image;return u&&u.src||this.toDataURL()},setSource:function(u){var d=new e.Image,m=this._crossOrigin;m&&(d.crossOrigin=m),u&&(d.src=u),this.setImage(d)},getCrossOrigin:function(){var u=this._image;return u&&u.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(u){this._crossOrigin=u;var d=this._image;d&&(d.crossOrigin=u)},getSmoothing:function(){return this._smoothing},setSmoothing:function(u){this._smoothing=typeof u=="string"?u:u?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var u=T.read(arguments),d=$e.getContext(u.getSize());return d.drawImage(this.getCanvas(),u.x,u.y,u.width,u.height,0,0,u.width,u.height),d.canvas},getSubRaster:function(){var u=T.read(arguments),d=new me(x.NO_INSERT);return d._setImage(this.getSubCanvas(u)),d.translate(u.getCenter().subtract(this.getSize().divide(2))),d._matrix.prepend(this._matrix),d.insertAbove(this),d},toDataURL:function(){var u=this._image,d=u&&u.src;if(/^data:/.test(d))return d;var m=this.getCanvas();return m?m.toDataURL.apply(m,arguments):null},drawImage:function(u){var d=v.read(arguments,1);this.getContext(!0).drawImage(u,d.x,d.y)},getAverageColor:function(u){var d,m;if(u?u instanceof st?(m=u,d=u.getBounds()):typeof u=="object"&&("width"in u?d=new T(u):"x"in u&&(d=new T(u.x-.5,u.y-.5,1,1))):d=this.getBounds(),!d)return null;var _=32,S=Math.min(d.width,_),k=Math.min(d.height,_),I=me._sampleContext;I?I.clearRect(0,0,_+1,_+1):I=me._sampleContext=$e.getContext(new P(_)),I.save();var L=new M().scale(S/d.width,k/d.height).translate(-d.x,-d.y);L.applyToContext(I),m&&m.draw(I,new r({clip:!0,matrices:[L]})),this._matrix.applyToContext(I);var N=this.getElement(),q=this._size;N&&I.drawImage(N,-q.width/2,-q.height/2),I.restore();for(var W=I.getImageData(.5,.5,Math.ceil(S),Math.ceil(k)).data,K=[0,0,0],G=0,U=0,ae=W.length;U<ae;U+=4){var Q=W[U+3];G+=Q,Q/=255,K[0]+=W[U]*Q,K[1]+=W[U+1]*Q,K[2]+=W[U+2]*Q}for(var U=0;U<3;U++)K[U]/=G;return G?ut.read(K):null},getPixel:function(){var u=v.read(arguments),d=this.getContext().getImageData(u.x,u.y,1,1).data;return new ut("rgb",[d[0]/255,d[1]/255,d[2]/255],d[3]/255)},setPixel:function(){var u=arguments,d=v.read(u),m=ut.read(u),_=m._convert("rgb"),S=m._alpha,k=this.getContext(!0),I=k.createImageData(1,1),L=I.data;L[0]=_[0]*255,L[1]=_[1]*255,L[2]=_[2]*255,L[3]=S!=null?S*255:255,k.putImageData(I,d.x,d.y)},clear:function(){var u=this._size;this.getContext(!0).clearRect(0,0,u.width+1,u.height+1)},createImageData:function(){var u=P.read(arguments);return this.getContext().createImageData(u.width,u.height)},getImageData:function(){var u=T.read(arguments);return u.isEmpty()&&(u=new T(this._size)),this.getContext().getImageData(u.x,u.y,u.width,u.height)},putImageData:function(u){var d=v.read(arguments,1);this.getContext(!0).putImageData(u,d.x,d.y)},setImageData:function(u){this.setSize(u),this.getContext(!0).putImageData(u,0,0)},_getBounds:function(u,d){var m=new T(this._size).setCenter(0,0);return u?u._transformBounds(m):m},_hitTestSelf:function(u){if(this._contains(u)){var d=this;return new Te("pixel",d,{offset:u.add(d._size.divide(2)).round(),color:{get:function(){return d.getPixel(this.offset)}}})}},_draw:function(u,d,m){var _=this.getElement();if(_&&_.width>0&&_.height>0){u.globalAlpha=f.clamp(this._opacity,0,1),this._setStyles(u,d,m);var S=this._smoothing,k=S==="off";Yt.setPrefixed(u,k?"imageSmoothingEnabled":"imageSmoothingQuality",k?!1:S),u.drawImage(_,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ue=x.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(d,m){this._initialize(d,m!==t&&v.read(arguments,1))||this.setDefinition(d instanceof Se?d:new Se(d))},_equals:function(u){return this._definition===u._definition},copyContent:function(u){this.setDefinition(u._definition)},getDefinition:function(){return this._definition},setDefinition:function(u){this._definition=u,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(u,d){var m=this._definition._item;return m._getCachedBounds(m._matrix.prepended(u),d)},_hitTestSelf:function(u,d,m){var _=d.extend({all:!1}),S=this._definition._item._hitTest(u,_,m);return S&&(S.item=this),S},_draw:function(u,d){this._definition._item.draw(u,d)}}),Se=r.extend({_class:"SymbolDefinition",initialize:function(d,m){this._id=g.get(),this.project=Xt.project,d&&this.setItem(d,m)},_serialize:function(u,d){return d.add(this,function(){return r.serialize([this._class,this._item],u,!1,d)})},_changed:function(u){u&8&&x._clearBoundsCache(this),u&1&&this.project._changed(u)},getItem:function(){return this._item},setItem:function(u,d){u._symbol&&(u=u.clone()),this._item&&(this._item._symbol=null),this._item=u,u.remove(),u.setSelected(!1),d||u.setPosition(new v),u._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(u){return new ue(this,u)},clone:function(){return new Se(this._item.clone(!1))},equals:function(u){return u===this||u&&this._item.equals(u._item)||!1}}),Te=r.extend({_class:"HitResult",initialize:function(d,m,_){this.type=d,this.item=m,_&&this.inject(_)},statics:{getOptions:function(u){var d=u&&r.read(u);return new r({type:null,tolerance:Xt.settings.hitTolerance,fill:!d,stroke:!d,segments:!d,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},d)}}}),Re=r.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(d,m,_,S,k,I){var L=arguments.length,N,q,W,K;L>0&&(d==null||typeof d=="object"?L===1&&d&&"point"in d?(N=d.point,q=d.handleIn,W=d.handleOut,K=d.selection):(N=d,q=m,W=_,K=S):(N=[d,m],q=_!==t?[_,S]:null,W=k!==t?[k,I]:null)),new We(N,this,"_point"),new We(q,this,"_handleIn"),new We(W,this,"_handleOut"),K&&this.setSelection(K)},_serialize:function(u,d){var m=this._point,_=this._selection,S=_||this.hasHandles()?[m,this._handleIn,this._handleOut]:m;return _&&S.push(_),r.serialize(S,u,!0,d)},_changed:function(u){var d=this._path;if(d){var m=d._curves,_=this._index,S;m&&((!u||u===this._point||u===this._handleIn)&&(S=_>0?m[_-1]:d._closed?m[m.length-1]:null)&&S._changed(),(!u||u===this._point||u===this._handleOut)&&(S=m[_])&&S._changed()),d._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(v.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(v.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(v.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var u=this._handleIn,d=this._handleOut;return!u.isZero()&&!d.isZero()&&u.isCollinear(d)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(u){var d=this._selection,m=this._path;this._selection=u=u||0,m&&u!==d&&(m._updateSelection(this,d,u),m._changed(257))},_changeSelection:function(u,d){var m=this._selection;this.setSelection(d?m|u:m&~u)},isSelected:function(){return!!(this._selection&7)},setSelected:function(u){this._changeSelection(7,u)},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var u=this._path,d=this._index;return u?(d>0&&!u._closed&&d===u._segments.length-1&&d--,u.getCurves()[d]||null):null},getLocation:function(){var u=this.getCurve();return u?new lt(u,this===u._segment1?0:1):null},getNext:function(){var u=this._path&&this._path._segments;return u&&(u[this._index+1]||this._path._closed&&u[0])||null},smooth:function(u,d,m){var _=u||{},S=_.type,k=_.factor,I=this.getPrevious(),L=this.getNext(),N=(I||this)._point,q=this._point,W=(L||this)._point,K=N.getDistance(q),G=q.getDistance(W);if(!S||S==="catmull-rom"){var U=k===t?.5:k,ae=Math.pow(K,U),Q=ae*ae,se=Math.pow(G,U),Y=se*se;if(!d&&I){var ee=2*Y+3*se*ae+Q,F=3*se*(se+ae);this.setHandleIn(F!==0?new v((Y*N._x+ee*q._x-Q*W._x)/F-q._x,(Y*N._y+ee*q._y-Q*W._y)/F-q._y):new v)}if(!m&&L){var ee=2*Q+3*ae*se+Y,F=3*ae*(ae+se);this.setHandleOut(F!==0?new v((Q*W._x+ee*q._x-Y*N._x)/F-q._x,(Q*W._y+ee*q._y-Y*N._y)/F-q._y):new v)}}else if(S==="geometric"){if(I&&L){var J=N.subtract(W),re=k===t?.4:k,ce=re*K/(K+G);d||this.setHandleIn(J.multiply(ce)),m||this.setHandleOut(J.multiply(ce-re))}}else throw new Error("Smoothing method '"+S+"' not supported.")},getPrevious:function(){var u=this._path&&this._path._segments;return u&&(u[this._index-1]||this._path._closed&&u[u.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var u=this._path;return u&&this._index===u._segments.length-1||!1},reverse:function(){var u=this._handleIn,d=this._handleOut,m=u.clone();u.set(d),d.set(m)},reversed:function(){return new Re(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Re(this._point,this._handleIn,this._handleOut)},equals:function(u){return u===this||u&&this._class===u._class&&this._point.equals(u._point)&&this._handleIn.equals(u._handleIn)&&this._handleOut.equals(u._handleOut)||!1},toString:function(){var u=["point: "+this._point];return this._handleIn.isZero()||u.push("handleIn: "+this._handleIn),this._handleOut.isZero()||u.push("handleOut: "+this._handleOut),"{ "+u.join(", ")+" }"},transform:function(u){this._transformCoordinates(u,new Array(6),!0),this._changed()},interpolate:function(u,d,m){var _=1-m,S=m,k=u._point,I=d._point,L=u._handleIn,N=d._handleIn,q=d._handleOut,W=u._handleOut;this._point._set(_*k._x+S*I._x,_*k._y+S*I._y,!0),this._handleIn._set(_*L._x+S*N._x,_*L._y+S*N._y,!0),this._handleOut._set(_*W._x+S*q._x,_*W._y+S*q._y,!0),this._changed()},_transformCoordinates:function(u,d,m){var _=this._point,S=!m||!this._handleIn.isZero()?this._handleIn:null,k=!m||!this._handleOut.isZero()?this._handleOut:null,I=_._x,L=_._y,N=2;return d[0]=I,d[1]=L,S&&(d[N++]=S._x+I,d[N++]=S._y+L),k&&(d[N++]=k._x+I,d[N++]=k._y+L),u&&(u._transformCoordinates(d,d,N/2),I=d[0],L=d[1],m?(_._x=I,_._y=L,N=2,S&&(S._x=d[N++]-I,S._y=d[N++]-L),k&&(k._x=d[N++]-I,k._y=d[N++]-L)):(S||(d[N++]=I,d[N++]=L),k||(d[N++]=I,d[N++]=L))),d}}),We=v.extend({initialize:function(d,m,_){var S,k,I;if(!d)S=k=0;else if((S=d[0])!==t)k=d[1];else{var L=d;(S=L.x)===t&&(L=v.read(arguments),S=L.x),k=L.y,I=L.selected}this._x=S,this._y=k,this._owner=m,m[_]=this,I&&this.setSelected(!0)},_set:function(u,d){return this._x=u,this._y=d,this._owner._changed(this),this},getX:function(){return this._x},setX:function(u){this._x=u,this._owner._changed(this)},getY:function(){return this._y},setY:function(u){this._y=u,this._owner._changed(this)},isZero:function(){var u=f.isZero;return u(this._x)&&u(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(u){this._owner._changeSelection(this._getSelection(),u)},_getSelection:function(){var u=this._owner;return this===u._point?1:this===u._handleIn?2:this===u._handleOut?4:0}}),Le=r.extend({_class:"Curve",beans:!0,initialize:function(d,m,_,S,k,I,L,N){var q=arguments.length,W,K,G,U,ae,Q;q===3?(this._path=d,W=m,K=_):q?q===1?"segment1"in d?(W=new Re(d.segment1),K=new Re(d.segment2)):"point1"in d?(G=d.point1,ae=d.handle1,Q=d.handle2,U=d.point2):Array.isArray(d)&&(G=[d[0],d[1]],U=[d[6],d[7]],ae=[d[2]-d[0],d[3]-d[1]],Q=[d[4]-d[6],d[5]-d[7]]):q===2?(W=new Re(d),K=new Re(m)):q===4?(G=d,ae=m,Q=_,U=S):q===8&&(G=[d,m],U=[L,N],ae=[_-d,S-m],Q=[k-L,I-N]):(W=new Re,K=new Re),this._segment1=W||new Re(G,null,ae),this._segment2=K||new Re(U,Q,null)},_serialize:function(u,d){return r.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],u,!0,d)},_changed:function(){this._length=this._bounds=t},clone:function(){return new Le(this._segment1,this._segment2)},toString:function(){var u=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||u.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||u.push("handle2: "+this._segment2._handleIn),u.push("point2: "+this._segment2._point),"{ "+u.join(", ")+" }"},classify:function(){return Le.classify(this.getValues())},remove:function(){var u=!1;if(this._path){var d=this._segment2,m=d._handleOut;u=d.remove(),u&&this._segment1._handleOut.set(m)}return u},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(v.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(v.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(v.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(v.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var u=this._path&&this._path._curves;return u&&(u[this._segment1._index+1]||this._path._closed&&u[0])||null},getPrevious:function(){var u=this._path&&this._path._curves;return u&&(u[this._segment1._index-1]||this._path._closed&&u[u.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var u=this._path;return u&&this._segment1._index===u._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(u){this.getPoint1().setSelected(u),this.getHandle1().setSelected(u),this.getHandle2().setSelected(u),this.getPoint2().setSelected(u)},getValues:function(u){return Le.getValues(this._segment1,this._segment2,u)},getPoints:function(){for(var u=this.getValues(),d=[],m=0;m<8;m+=2)d.push(new v(u[m],u[m+1]));return d}},{getLength:function(){return this._length==null&&(this._length=Le.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Le.getArea(this.getValues())},getLine:function(){return new B(this._segment1._point,this._segment2._point)},getPart:function(u,d){return new Le(Le.getPart(this.getValues(),u,d))},getPartLength:function(u,d){return Le.getLength(this.getValues(),u,d)},divideAt:function(u){return this.divideAtTime(u&&u.curve===this?u.time:this.getTimeAt(u))},divideAtTime:function(u,d){var m=1e-8,_=1-m,S=null;if(u>=m&&u<=_){var k=Le.subdivide(this.getValues(),u),I=k[0],L=k[1],N=d||this.hasHandles(),q=this._segment1,W=this._segment2,K=this._path;N&&(q._handleOut._set(I[2]-I[0],I[3]-I[1]),W._handleIn._set(L[4]-L[6],L[5]-L[7]));var G=I[6],U=I[7],ae=new Re(new v(G,U),N&&new v(I[4]-G,I[5]-U),N&&new v(L[2]-G,L[3]-U));K?(K.insert(q._index+1,ae),S=this.getNext()):(this._segment2=ae,this._changed(),S=new Le(ae,W))}return S},splitAt:function(u){var d=this._path;return d?d.splitAt(u):null},splitAtTime:function(u){return this.splitAt(this.getLocationAtTime(u))},divide:function(u,d){return this.divideAtTime(u===t?.5:d?u:this.getTimeAt(u))},split:function(u,d){return this.splitAtTime(u===t?.5:d?u:this.getTimeAt(u))},reversed:function(){return new Le(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(u,d,m,_){var S=u._point,k=u._handleOut,I=d._handleIn,L=d._point,N=S.x,q=S.y,W=L.x,K=L.y,G=_?[N,q,N,q,W,K,W,K]:[N,q,N+k._x,q+k._y,W+I._x,K+I._y,W,K];return m&&m._transformCoordinates(G,G,4),G},subdivide:function(u,d){var m=u[0],_=u[1],S=u[2],k=u[3],I=u[4],L=u[5],N=u[6],q=u[7];d===t&&(d=.5);var W=1-d,K=W*m+d*S,G=W*_+d*k,U=W*S+d*I,ae=W*k+d*L,Q=W*I+d*N,se=W*L+d*q,Y=W*K+d*U,ee=W*G+d*ae,F=W*U+d*Q,J=W*ae+d*se,re=W*Y+d*F,ce=W*ee+d*J;return[[m,_,K,G,Y,ee,re,ce],[re,ce,F,J,Q,se,N,q]]},getMonoCurves:function(u,d){var m=[],_=d?0:1,S=u[_+0],k=u[_+2],I=u[_+4],L=u[_+6];if(S>=k==k>=I&&k>=I==I>=L||Le.isStraight(u))m.push(u);else{var N=3*(k-I)-S+L,q=2*(S+I)-4*k,W=k-S,K=1e-8,G=1-K,U=[],ae=f.solveQuadratic(N,q,W,U,K,G);if(!ae)m.push(u);else{U.sort();var Q=U[0],se=Le.subdivide(u,Q);m.push(se[0]),ae>1&&(Q=(U[1]-Q)/(1-Q),se=Le.subdivide(se[1],Q),m.push(se[0])),m.push(se[1])}}return m},solveCubic:function(u,d,m,_,S,k){var I=u[d],L=u[d+2],N=u[d+4],q=u[d+6],W=0;if(!(I<m&&q<m&&L<m&&N<m||I>m&&q>m&&L>m&&N>m)){var K=3*(L-I),G=3*(N-L)-K,U=q-I-K-G;W=f.solveCubic(U,G,K,I-m,_,S,k)}return W},getTimeOf:function(u,d){var m=new v(u[0],u[1]),_=new v(u[6],u[7]),S=1e-12,k=1e-7,I=d.isClose(m,S)?0:d.isClose(_,S)?1:null;if(I===null)for(var L=[d.x,d.y],N=[],q=0;q<2;q++)for(var W=Le.solveCubic(u,q,L[q],N,0,1),K=0;K<W;K++){var G=N[K];if(d.isClose(Le.getPoint(u,G),k))return G}return d.isClose(m,k)?0:d.isClose(_,k)?1:null},getNearestTime:function(u,d){if(Le.isStraight(u)){var m=u[0],_=u[1],S=u[6],k=u[7],I=S-m,L=k-_,N=I*I+L*L;if(N===0)return 0;var q=((d.x-m)*I+(d.y-_)*L)/N;return q<1e-12?0:q>.999999999999?1:Le.getTimeOf(u,new v(m+q*I,_+q*L))}var W=100,K=1/0,G=0;function U(se){if(se>=0&&se<=1){var Y=d.getDistance(Le.getPoint(u,se),!0);if(Y<K)return K=Y,G=se,!0}}for(var ae=0;ae<=W;ae++)U(ae/W);for(var Q=1/(W*2);Q>1e-8;)!U(G-Q)&&!U(G+Q)&&(Q/=2);return G},getPart:function(u,d,m){var _=d>m;if(_){var S=d;d=m,m=S}return d>0&&(u=Le.subdivide(u,d)[1]),m<1&&(u=Le.subdivide(u,(m-d)/(1-d))[0]),_?[u[6],u[7],u[4],u[5],u[2],u[3],u[0],u[1]]:u},isFlatEnough:function(u,d){var m=u[0],_=u[1],S=u[2],k=u[3],I=u[4],L=u[5],N=u[6],q=u[7],W=3*S-2*m-N,K=3*k-2*_-q,G=3*I-2*N-m,U=3*L-2*q-_;return Math.max(W*W,G*G)+Math.max(K*K,U*U)<=16*d*d},getArea:function(u){var d=u[0],m=u[1],_=u[2],S=u[3],k=u[4],I=u[5],L=u[6],N=u[7];return 3*((N-m)*(_+k)-(L-d)*(S+I)+S*(d-k)-_*(m-I)+N*(k+d/3)-L*(I+m/3))/20},getBounds:function(u){for(var d=u.slice(0,2),m=d.slice(),_=[0,0],S=0;S<2;S++)Le._addBounds(u[S],u[S+2],u[S+4],u[S+6],S,0,d,m,_);return new T(d[0],d[1],m[0]-d[0],m[1]-d[1])},_addBounds:function(u,d,m,_,S,k,I,L,N){function q(re,ce){var ne=re-ce,ye=re+ce;ne<I[S]&&(I[S]=ne),ye>L[S]&&(L[S]=ye)}k/=2;var W=I[S]+k,K=L[S]-k;if(u<W||d<W||m<W||_<W||u>K||d>K||m>K||_>K)if(d<u!=d<_&&m<u!=m<_)q(u,0),q(_,0);else{var G=3*(d-m)-u+_,U=2*(u+m)-4*d,ae=d-u,Q=f.solveQuadratic(G,U,ae,N),se=1e-8,Y=1-se;q(_,0);for(var ee=0;ee<Q;ee++){var F=N[ee],J=1-F;se<=F&&F<=Y&&q(J*J*J*u+3*J*J*F*d+3*J*F*F*m+F*F*F*_,k)}}}}},r.each(["getBounds","getStrokeBounds","getHandleBounds"],function(u){this[u]=function(){this._bounds||(this._bounds={});var d=this._bounds[u];return d||(d=this._bounds[u]=De[u]([this._segment1,this._segment2],!1,this._path)),d.clone()}},{}),r.each({isStraight:function(u,d,m,_){if(d.isZero()&&m.isZero())return!0;var S=_.subtract(u);if(S.isZero())return!1;if(S.isCollinear(d)&&S.isCollinear(m)){var k=new B(u,_),I=1e-7;if(k.getDistance(u.add(d))<I&&k.getDistance(_.add(m))<I){var L=S.dot(S),N=S.dot(d)/L,q=S.dot(m)/L;return N>=0&&N<=1&&q<=0&&q>=-1}}return!1},isLinear:function(u,d,m,_){var S=_.subtract(u).divide(3);return d.equals(S)&&m.negate().equals(S)}},function(u,d){this[d]=function(m){var _=this._segment1,S=this._segment2;return u(_._point,_._handleOut,S._handleIn,S._point,m)},this.statics[d]=function(m,_){var S=m[0],k=m[1],I=m[6],L=m[7];return u(new v(S,k),new v(m[2]-S,m[3]-k),new v(m[4]-I,m[5]-L),new v(I,L),_)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(u){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(u||0)},isCollinear:function(u){return u&&this.isStraight()&&u.isStraight()&&this.getLine().isCollinear(u.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(u,d){return this.getLocationAtTime(d?u:this.getTimeAt(u))},getLocationAtTime:function(u){return u!=null&&u>=0&&u<=1?new lt(this,u):null},getTimeAt:function(u,d){return Le.getTimeAt(this.getValues(),u,d)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var u=v.read(arguments);return u.isZero()?[]:Le.getTimesWithTangent(this.getValues(),u)},getOffsetAtTime:function(u){return this.getPartLength(0,u)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(v.read(arguments)))},getOffsetOf:function(){var u=this.getLocationOf.apply(this,arguments);return u?u.getOffset():null},getTimeOf:function(){return Le.getTimeOf(this.getValues(),v.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var u=v.read(arguments),d=this.getValues(),m=Le.getNearestTime(d,u),_=Le.getPoint(d,m);return new lt(this,m,_,null,u.getDistance(_))},getNearestPoint:function(){var u=this.getNearestLocation.apply(this,arguments);return u&&u.getPoint()}},new function(){var u=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return r.each(u,function(d){this[d+"At"]=function(m,_){var S=this.getValues();return Le[d](S,_?m:Le.getTimeAt(S,m))},this[d+"AtTime"]=function(m){return Le[d](this.getValues(),m)}},{statics:{_evaluateMethods:u}})},new function(){function u(_){var S=_[0],k=_[1],I=_[2],L=_[3],N=_[4],q=_[5],W=_[6],K=_[7],G=9*(I-N)+3*(W-S),U=6*(S+N)-12*I,ae=3*(I-S),Q=9*(L-q)+3*(K-k),se=6*(k+q)-12*L,Y=3*(L-k);return function(ee){var F=(G*ee+U)*ee+ae,J=(Q*ee+se)*ee+Y;return Math.sqrt(F*F+J*J)}}function d(_,S){return Math.max(2,Math.min(16,Math.ceil(Math.abs(S-_)*32)))}function m(_,S,k,I){if(S==null||S<0||S>1)return null;var L=_[0],N=_[1],q=_[2],W=_[3],K=_[4],G=_[5],U=_[6],ae=_[7],Q=f.isZero;Q(q-L)&&Q(W-N)&&(q=L,W=N),Q(K-U)&&Q(G-ae)&&(K=U,G=ae);var se=3*(q-L),Y=3*(K-q)-se,ee=U-L-se-Y,F=3*(W-N),J=3*(G-W)-F,re=ae-N-F-J,ce,ne;if(k===0)ce=S===0?L:S===1?U:((ee*S+Y)*S+se)*S+L,ne=S===0?N:S===1?ae:((re*S+J)*S+F)*S+N;else{var ye=1e-8,we=1-ye;if(S<ye?(ce=se,ne=F):S>we?(ce=3*(U-K),ne=3*(ae-G)):(ce=(3*ee*S+2*Y)*S+se,ne=(3*re*S+2*J)*S+F),I){ce===0&&ne===0&&(S<ye||S>we)&&(ce=K-q,ne=G-W);var Ve=Math.sqrt(ce*ce+ne*ne);Ve&&(ce/=Ve,ne/=Ve)}if(k===3){var K=6*ee*S+2*Y,G=6*re*S+2*J,Be=Math.pow(ce*ce+ne*ne,3/2);ce=Be!==0?(ce*G-ne*K)/Be:0,ne=0}}return k===2?new v(ne,-ce):new v(ce,ne)}return{statics:{classify:function(_){var S=_[0],k=_[1],I=_[2],L=_[3],N=_[4],q=_[5],W=_[6],K=_[7],G=S*(K-q)+k*(N-W)+W*q-K*N,U=I*(k-K)+L*(W-S)+S*K-k*W,ae=N*(L-k)+q*(S-I)+I*k-L*S,Q=3*ae,se=Q-U,Y=se-U+G,ee=Math.sqrt(Y*Y+se*se+Q*Q),F=ee!==0?1/ee:0,J=f.isZero,re="serpentine";Y*=F,se*=F,Q*=F;function ce(Ve,Be,z){var j=Be!==t,le=j&&Be>0&&Be<1,xe=j&&z>0&&z<1;return j&&(!(le||xe)||Ve==="loop"&&!(le&&xe))&&(Ve="arch",le=xe=!1),{type:Ve,roots:le||xe?le&&xe?Be<z?[Be,z]:[z,Be]:[le?Be:z]:null}}if(J(Y))return J(se)?ce(J(Q)?"line":"quadratic"):ce(re,Q/(3*se));var ne=3*se*se-4*Y*Q;if(J(ne))return ce("cusp",se/(2*Y));var ye=ne>0?Math.sqrt(ne/3):Math.sqrt(-ne),we=2*Y;return ce(ne>0?re:"loop",(se+ye)/we,(se-ye)/we)},getLength:function(_,S,k,I){if(S===t&&(S=0),k===t&&(k=1),Le.isStraight(_)){var L=_;k<1&&(L=Le.subdivide(L,k)[0],S/=k),S>0&&(L=Le.subdivide(L,S)[1]);var N=L[6]-L[0],q=L[7]-L[1];return Math.sqrt(N*N+q*q)}return f.integrate(I||u(_),S,k,d(S,k))},getTimeAt:function(_,S,k){if(k===t&&(k=S<0?1:0),S===0)return k;var I=Math.abs,L=1e-12,N=S>0,q=N?k:0,W=N?1:k,K=u(_),G=Le.getLength(_,q,W,K),U=I(S)-G;if(I(U)<L)return N?W:q;if(U>L)return null;var ae=S/G,Q=0;function se(Y){return Q+=f.integrate(K,k,Y,d(k,Y)),k=Y,Q-S}return f.findRoot(se,K,k+ae,q,W,32,1e-12)},getPoint:function(_,S){return m(_,S,0,!1)},getTangent:function(_,S){return m(_,S,1,!0)},getWeightedTangent:function(_,S){return m(_,S,1,!1)},getNormal:function(_,S){return m(_,S,2,!0)},getWeightedNormal:function(_,S){return m(_,S,2,!1)},getCurvature:function(_,S){return m(_,S,3,!1).x},getPeaks:function(_){var S=_[0],k=_[1],I=_[2],L=_[3],N=_[4],q=_[5],W=_[6],K=_[7],G=-S+3*I-3*N+W,U=3*S-6*I+3*N,ae=-3*S+3*I,Q=-k+3*L-3*q+K,se=3*k-6*L+3*q,Y=-3*k+3*L,ee=1e-8,F=1-ee,J=[];return f.solveCubic(9*(G*G+Q*Q),9*(G*U+se*Q),2*(U*U+se*se)+3*(ae*G+Y*Q),ae*U+se*Y,J,ee,F),J.sort()}}}},new function(){function u(U,ae,Q,se,Y,ee,F){var J=!F&&Q.getPrevious()===Y,re=!F&&Q!==Y&&Q.getNext()===Y,ce=1e-8,ne=1-ce;if(se!==null&&se>=(J?ce:0)&&se<=(re?ne:1)&&ee!==null&&ee>=(re?ce:0)&&ee<=(J?ne:1)){var ye=new lt(Q,se,null,F),we=new lt(Y,ee,null,F);ye._intersection=we,we._intersection=ye,(!ae||ae(ye))&&lt.insert(U,ye,!0)}}function d(U,ae,Q,se,Y,ee,F,J,re,ce,ne,ye,we){if(++re>=4096||++J>=40)return re;var Ve=1e-9,Be=ae[0],z=ae[1],j=ae[6],le=ae[7],xe=B.getSignedDistance,Ce=xe(Be,z,j,le,ae[2],ae[3]),Ue=xe(Be,z,j,le,ae[4],ae[5]),je=Ce*Ue>0?3/4:4/9,nt=je*Math.min(0,Ce,Ue),yt=je*Math.max(0,Ce,Ue),Vt=xe(Be,z,j,le,U[0],U[1]),it=xe(Be,z,j,le,U[2],U[3]),at=xe(Be,z,j,le,U[4],U[5]),Tt=xe(Be,z,j,le,U[6],U[7]),At=m(Vt,it,at,Tt),ft=At[0],Rt=At[1],Jt,hi;if(Ce===0&&Ue===0&&Vt===0&&it===0&&at===0&&Tt===0||(Jt=_(ft,Rt,nt,yt))==null||(hi=_(ft.reverse(),Rt.reverse(),nt,yt))==null)return re;var si=ce+(ne-ce)*Jt,di=ce+(ne-ce)*hi;if(Math.max(we-ye,di-si)<Ve){var $t=(si+di)/2,Nn=(ye+we)/2;u(Y,ee,F?se:Q,F?Nn:$t,F?Q:se,F?$t:Nn)}else{U=Le.getPart(U,Jt,hi);var Mi=we-ye;if(hi-Jt>.8)if(di-si>Mi){var cs=Le.subdivide(U,.5),$t=(si+di)/2;re=d(ae,cs[0],se,Q,Y,ee,!F,J,re,ye,we,si,$t),re=d(ae,cs[1],se,Q,Y,ee,!F,J,re,ye,we,$t,di)}else{var cs=Le.subdivide(ae,.5),Nn=(ye+we)/2;re=d(cs[0],U,se,Q,Y,ee,!F,J,re,ye,Nn,si,di),re=d(cs[1],U,se,Q,Y,ee,!F,J,re,Nn,we,si,di)}else Mi===0||Mi>=Ve?re=d(ae,U,se,Q,Y,ee,!F,J,re,ye,we,si,di):re=d(U,ae,Q,se,Y,ee,F,J,re,si,di,ye,we)}return re}function m(U,ae,Q,se){var Y=[0,U],ee=[1/3,ae],F=[2/3,Q],J=[1,se],re=ae-(2*U+se)/3,ce=Q-(U+2*se)/3,ne;if(re*ce<0)ne=[[Y,ee,J],[Y,F,J]];else{var ye=re/ce;ne=[ye>=2?[Y,ee,J]:ye<=.5?[Y,F,J]:[Y,ee,F,J],[Y,J]]}return(re||ce)<0?ne.reverse():ne}function _(U,ae,Q,se){return U[0][1]<Q?S(U,!0,Q):ae[0][1]>se?S(ae,!1,se):U[0][0]}function S(U,ae,Q){for(var se=U[0][0],Y=U[0][1],ee=1,F=U.length;ee<F;ee++){var J=U[ee][0],re=U[ee][1];if(ae?re>=Q:re<=Q)return re===Q?J:se+(Q-Y)*(J-se)/(re-Y);se=J,Y=re}return null}function k(U,ae,Q,se,Y){var ee=f.isZero;if(ee(se)&&ee(Y)){var F=Le.getTimeOf(U,new v(ae,Q));return F===null?[]:[F]}for(var J=Math.atan2(-Y,se),re=Math.sin(J),ce=Math.cos(J),ne=[],ye=[],we=0;we<8;we+=2){var Ve=U[we]-ae,Be=U[we+1]-Q;ne.push(Ve*ce-Be*re,Ve*re+Be*ce)}return Le.solveCubic(ne,1,0,ye,0,1),ye}function I(U,ae,Q,se,Y,ee,F){for(var J=ae[0],re=ae[1],ce=ae[6],ne=ae[7],ye=k(U,J,re,ce-J,ne-re),we=0,Ve=ye.length;we<Ve;we++){var Be=ye[we],z=Le.getPoint(U,Be),j=Le.getTimeOf(ae,z);j!==null&&u(Y,ee,F?se:Q,F?j:Be,F?Q:se,F?Be:j)}}function L(U,ae,Q,se,Y,ee){var F=B.intersect(U[0],U[1],U[6],U[7],ae[0],ae[1],ae[6],ae[7]);F&&u(Y,ee,Q,Le.getTimeOf(U,F),se,Le.getTimeOf(ae,F))}function N(U,ae,Q,se,Y,ee){var F=1e-12,J=Math.min,re=Math.max;if(re(U[0],U[2],U[4],U[6])+F>J(ae[0],ae[2],ae[4],ae[6])&&J(U[0],U[2],U[4],U[6])-F<re(ae[0],ae[2],ae[4],ae[6])&&re(U[1],U[3],U[5],U[7])+F>J(ae[1],ae[3],ae[5],ae[7])&&J(U[1],U[3],U[5],U[7])-F<re(ae[1],ae[3],ae[5],ae[7])){var ce=K(U,ae);if(ce)for(var ne=0;ne<2;ne++){var ye=ce[ne];u(Y,ee,Q,ye[0],se,ye[1],!0)}else{var we=Le.isStraight(U),Ve=Le.isStraight(ae),Be=we&&Ve,z=we&&!Ve,j=Y.length;if((Be?L:we||Ve?I:d)(z?ae:U,z?U:ae,z?se:Q,z?Q:se,Y,ee,z,0,0,0,1,0,1),!Be||Y.length===j)for(var ne=0;ne<4;ne++){var le=ne>>1,xe=ne&1,Ce=le*6,Ue=xe*6,je=new v(U[Ce],U[Ce+1]),nt=new v(ae[Ue],ae[Ue+1]);je.isClose(nt,F)&&u(Y,ee,Q,le,se,xe)}}}return Y}function q(U,ae,Q,se){var Y=Le.classify(U);if(Y.type==="loop"){var ee=Y.roots;u(Q,se,ae,ee[0],ae,ee[1])}return Q}function W(U,ae,Q,se,Y,ee){var F=1e-7,J=!ae;J&&(ae=U);for(var re=U.length,ce=ae.length,ne=new Array(re),ye=J?ne:new Array(ce),we=[],Ve=0;Ve<re;Ve++)ne[Ve]=U[Ve].getValues(se);if(!J)for(var Ve=0;Ve<ce;Ve++)ye[Ve]=ae[Ve].getValues(Y);for(var Be=h.findCurveBoundsCollisions(ne,ye,F),z=0;z<re;z++){var j=U[z],le=ne[z];J&&q(le,j,we,Q);var xe=Be[z];if(xe)for(var Ce=0;Ce<xe.length;Ce++){if(ee&&we.length)return we;var Ue=xe[Ce];if(!J||Ue>z){var je=ae[Ue],nt=ye[Ue];N(le,nt,j,je,we,Q)}}}return we}function K(U,ae){function Q(Tt){var At=Tt[6]-Tt[0],ft=Tt[7]-Tt[1];return At*At+ft*ft}var se=Math.abs,Y=B.getDistance,ee=1e-8,F=1e-7,J=Le.isStraight(U),re=Le.isStraight(ae),ce=J&&re,ne=Q(U)<Q(ae),ye=ne?ae:U,we=ne?U:ae,Ve=ye[0],Be=ye[1],z=ye[6]-Ve,j=ye[7]-Be;if(Y(Ve,Be,z,j,we[0],we[1],!0)<F&&Y(Ve,Be,z,j,we[6],we[7],!0)<F)!ce&&Y(Ve,Be,z,j,ye[2],ye[3],!0)<F&&Y(Ve,Be,z,j,ye[4],ye[5],!0)<F&&Y(Ve,Be,z,j,we[2],we[3],!0)<F&&Y(Ve,Be,z,j,we[4],we[5],!0)<F&&(J=re=ce=!0);else if(ce)return null;if(J^re)return null;for(var le=[U,ae],xe=[],Ce=0;Ce<4&&xe.length<2;Ce++){var Ue=Ce&1,je=Ue^1,nt=Ce>>1,yt=Le.getTimeOf(le[Ue],new v(le[je][nt?6:0],le[je][nt?7:1]));if(yt!=null){var Vt=Ue?[nt,yt]:[yt,nt];(!xe.length||se(Vt[0]-xe[0][0])>ee&&se(Vt[1]-xe[0][1])>ee)&&xe.push(Vt)}if(Ce>2&&!xe.length)break}if(xe.length!==2)xe=null;else if(!ce){var it=Le.getPart(U,xe[0][0],xe[1][0]),at=Le.getPart(ae,xe[0][1],xe[1][1]);(se(at[2]-it[2])>F||se(at[3]-it[3])>F||se(at[4]-it[4])>F||se(at[5]-it[5])>F)&&(xe=null)}return xe}function G(U,ae){var Q=U[0],se=U[1],Y=U[2],ee=U[3],F=U[4],J=U[5],re=U[6],ce=U[7],ne=ae.normalize(),ye=ne.x,we=ne.y,Ve=3*re-9*F+9*Y-3*Q,Be=3*ce-9*J+9*ee-3*se,z=6*F-12*Y+6*Q,j=6*J-12*ee+6*se,le=3*Y-3*Q,xe=3*ee-3*se,Ce=2*Ve*we-2*Be*ye,Ue=[];if(Math.abs(Ce)<f.CURVETIME_EPSILON){var je=Ve*xe-Be*le,Ce=Ve*j-Be*z;if(Ce!=0){var nt=-je/Ce;nt>=0&&nt<=1&&Ue.push(nt)}}else{var yt=(z*z-4*Ve*le)*we*we+(-2*z*j+4*Be*le+4*Ve*xe)*ye*we+(j*j-4*Be*xe)*ye*ye,Vt=z*we-j*ye;if(yt>=0&&Ce!=0){var it=Math.sqrt(yt),at=-(Vt+it)/Ce,Tt=(-Vt+it)/Ce;at>=0&&at<=1&&Ue.push(at),Tt>=0&&Tt<=1&&Ue.push(Tt)}}return Ue}return{getIntersections:function(U){var ae=this.getValues(),Q=U&&U!==this&&U.getValues();return Q?N(ae,Q,this,U,[]):q(ae,this,[])},statics:{getOverlaps:K,getIntersections:W,getCurveLineIntersections:k,getTimesWithTangent:G}}}),lt=r.extend({_class:"CurveLocation",initialize:function(d,m,_,S,k){if(m>=.99999999){var I=d.getNext();I&&(m=0,d=I)}this._setCurve(d),this._time=m,this._point=_||d.getPointAtTime(m),this._overlap=S,this._distance=k,this._intersection=this._next=this._previous=null},_setPath:function(u){this._path=u,this._version=u?u._version:0},_setCurve:function(u){this._setPath(u._path),this._curve=u,this._segment=null,this._segment1=u._segment1,this._segment2=u._segment2},_setSegment:function(u){var d=u.getCurve();d?this._setCurve(d):(this._setPath(u._path),this._segment1=u,this._segment2=null),this._segment=u,this._time=u===this._segment1?0:1,this._point=u._point.clone()},getSegment:function(){var u=this._segment;if(!u){var d=this.getCurve(),m=this.getTime();m===0?u=d._segment1:m===1?u=d._segment2:m!=null&&(u=d.getPartLength(0,m)<d.getPartLength(m,1)?d._segment1:d._segment2),this._segment=u}return u},getCurve:function(){var u=this._path,d=this;u&&u._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function m(_){var S=_&&_.getCurve();if(S&&(d._time=S.getTimeOf(d._point))!=null)return d._setCurve(S),S}return this._curve||m(this._segment)||m(this._segment1)||m(this._segment2.getPrevious())},getPath:function(){var u=this.getCurve();return u&&u._path},getIndex:function(){var u=this.getCurve();return u&&u.getIndex()},getTime:function(){var u=this.getCurve(),d=this._time;return u&&d==null?this._time=u.getTimeOf(this._point):d},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var u=this._offset;if(u==null){u=0;var d=this.getPath(),m=this.getIndex();if(d&&m!=null)for(var _=d.getCurves(),S=0;S<m;S++)u+=_[S].getLength();this._offset=u+=this.getCurveOffset()}return u},getCurveOffset:function(){var u=this._curveOffset;if(u==null){var d=this.getCurve(),m=this.getTime();this._curveOffset=u=m!=null&&d&&d.getPartLength(0,m)}return u},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var u=this.getCurve(),d=u&&u.divideAtTime(this.getTime());return d&&this._setSegment(d._segment1),d},split:function(){var u=this.getCurve(),d=u._path,m=u&&u.splitAtTime(this.getTime());return m&&this._setSegment(d.getLastSegment()),m},equals:function(u,d){var m=this===u;if(!m&&u instanceof lt){var _=this.getCurve(),S=u.getCurve(),k=_._path,I=S._path;if(k===I){var L=Math.abs,N=1e-7,q=L(this.getOffset()-u.getOffset()),W=!d&&this._intersection,K=!d&&u._intersection;m=(q<N||k&&L(k.getLength()-q)<N)&&(!W&&!K||W&&K&&W.equals(K,!0))}}return m},toString:function(){var u=[],d=this.getPoint(),m=c.instance;d&&u.push("point: "+d);var _=this.getIndex();_!=null&&u.push("index: "+_);var S=this.getTime();return S!=null&&u.push("time: "+m.number(S)),this._distance!=null&&u.push("distance: "+m.number(this._distance)),"{ "+u.join(", ")+" }"},isTouching:function(){var u=this._intersection;if(u&&this.getTangent().isCollinear(u.getTangent())){var d=this.getCurve(),m=u.getCurve();return!(d.isStraight()&&m.isStraight()&&d.getLine().intersect(m.getLine()))}return!1},isCrossing:function(){var u=this._intersection;if(!u)return!1;var d=this.getTime(),m=u.getTime(),_=1e-8,S=1-_,k=d>=_&&d<=S,I=m>=_&&m<=S;if(k&&I)return!this.isTouching();var L=this.getCurve(),N=L&&d<_?L.getPrevious():L,q=u.getCurve(),W=q&&m<_?q.getPrevious():q;if(d>S&&(L=L.getNext()),m>S&&(q=q.getNext()),!N||!L||!W||!q)return!1;var K=[];function G(ye,we){var Ve=ye.getValues(),Be=Le.classify(Ve).roots||Le.getPeaks(Ve),z=Be.length,j=Le.getLength(Ve,we&&z?Be[z-1]:0,!we&&z?Be[0]:1);K.push(z?j:j/32)}function U(ye,we,Ve){return we<Ve?ye>we&&ye<Ve:ye>we||ye<Ve}k||(G(N,!0),G(L,!1)),I||(G(W,!0),G(q,!1));var ae=this.getPoint(),Q=Math.min.apply(Math,K),se=k?L.getTangentAtTime(d):L.getPointAt(Q).subtract(ae),Y=k?se.negate():N.getPointAt(-Q).subtract(ae),ee=I?q.getTangentAtTime(m):q.getPointAt(Q).subtract(ae),F=I?ee.negate():W.getPointAt(-Q).subtract(ae),J=Y.getAngle(),re=se.getAngle(),ce=F.getAngle(),ne=ee.getAngle();return!!(k?U(J,ce,ne)^U(re,ce,ne)&&U(J,ne,ce)^U(re,ne,ce):U(ce,J,re)^U(ne,J,re)&&U(ce,re,J)^U(ne,re,J))},hasOverlap:function(){return!!this._overlap}},r.each(Le._evaluateMethods,function(u){var d=u+"At";this[u]=function(){var m=this.getCurve(),_=this.getTime();return _!=null&&m&&m[d](_,!0)}},{preserve:!0}),new function(){function u(d,m,_){var S=d.length,k=0,I=S-1;function L(ae,Q){for(var se=ae+Q;se>=-1&&se<=S;se+=Q){var Y=d[(se%S+S)%S];if(!m.getPoint().isClose(Y.getPoint(),1e-7))break;if(m.equals(Y))return Y}return null}for(;k<=I;){var N=k+I>>>1,q=d[N],W;if(_&&(W=m.equals(q)?q:L(N,-1)||L(N,1)))return m._overlap&&(W._overlap=W._intersection._overlap=!0),W;var K=m.getPath(),G=q.getPath(),U=K!==G?K._id-G._id:m.getIndex()+m.getTime()-(q.getIndex()+q.getTime());U<0?I=N-1:k=N+1}return d.splice(k,0,m),m}return{statics:{insert:u,expand:function(d){for(var m=d.slice(),_=d.length-1;_>=0;_--)u(m,d[_]._intersection,!1);return m}}}}),st=x.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(u){var d,m,_;if(r.isPlainObject(u)?(m=u.segments,d=u.pathData):Array.isArray(u)?m=u:typeof u=="string"&&(d=u),m){var S=m[0];_=S&&Array.isArray(S[0])}else d&&(_=(d.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(d));var k=_?et:De;return new k(u)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(u){this.isClockwise()!=(u=!!u)&&this.reverse()},setPathData:function(u){var d=u&&u.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),m,_=!1,S,k,I=new v,L=new v;function N(F,J){var re=+m[F];return _&&(re+=I[J]),re}function q(F){return new v(N(F,"x"),N(F+1,"y"))}this.clear();for(var W=0,K=d&&d.length;W<K;W++){var G=d[W],U=G[0],ae=U.toLowerCase();m=G.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Q=m&&m.length;switch(_=U===ae,S==="z"&&!/[mz]/.test(ae)&&this.moveTo(I),ae){case"m":case"l":for(var se=ae==="m",Y=0;Y<Q;Y+=2)this[se?"moveTo":"lineTo"](I=q(Y)),se&&(L=I,se=!1);k=I;break;case"h":case"v":var ee=ae==="h"?"x":"y";I=I.clone();for(var Y=0;Y<Q;Y++)I[ee]=N(Y,ee),this.lineTo(I);k=I;break;case"c":for(var Y=0;Y<Q;Y+=6)this.cubicCurveTo(q(Y),k=q(Y+2),I=q(Y+4));break;case"s":for(var Y=0;Y<Q;Y+=4)this.cubicCurveTo(/[cs]/.test(S)?I.multiply(2).subtract(k):I,k=q(Y),I=q(Y+2)),S=ae;break;case"q":for(var Y=0;Y<Q;Y+=4)this.quadraticCurveTo(k=q(Y),I=q(Y+2));break;case"t":for(var Y=0;Y<Q;Y+=2)this.quadraticCurveTo(k=/[qt]/.test(S)?I.multiply(2).subtract(k):I,I=q(Y)),S=ae;break;case"a":for(var Y=0;Y<Q;Y+=7)this.arcTo(I=q(Y+5),new P(+m[Y],+m[Y+1]),+m[Y+2],+m[Y+4],+m[Y+3]);break;case"z":this.closePath(1e-12),I=L;break}S=ae}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(u){var d=u.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(u):{};return d.onPath||!!(this.getFillRule()==="evenodd"?d.windingL&1||d.windingR&1:d.winding)},getIntersections:function(u,d,m,_){var S=this===u||!u,k=this._matrix._orNullIfIdentity(),I=S?k:(m||u._matrix)._orNullIfIdentity();return S||this.getBounds(k).intersects(u.getBounds(I),1e-12)?Le.getIntersections(this.getCurves(),!S&&u.getCurves(),d,k,I,_):[]},getCrossings:function(u){return this.getIntersections(u,function(d){return d.isCrossing()})},getNearestLocation:function(){for(var u=v.read(arguments),d=this.getCurves(),m=1/0,_=null,S=0,k=d.length;S<k;S++){var I=d[S].getNearestLocation(u);I._distance<m&&(m=I._distance,_=I)}return _},getNearestPoint:function(){var u=this.getNearestLocation.apply(this,arguments);return u&&u.getPoint()},interpolate:function(u,d,m){var _=!this._children,S=_?"_segments":"_children",k=u[S],I=d[S],L=this[S];if(!k||!I||k.length!==I.length)throw new Error("Invalid operands in interpolate() call: "+u+", "+d);var N=L.length,q=I.length;if(N<q)for(var W=_?Re:De,K=N;K<q;K++)this.add(new W);else N>q&&this[_?"removeSegments":"removeChildren"](q,N);for(var K=0;K<q;K++)L[K].interpolate(k[K],I[K],m);_&&(this.setClosed(u._closed),this._changed(9))},compare:function(u){var d=!1;if(u){var m=this._children||[this],_=u._children?u._children.slice():[u],S=m.length,k=_.length,I=[],L=0;d=!0;for(var N=h.findItemBoundsCollisions(m,_,f.GEOMETRIC_EPSILON),q=S-1;q>=0&&d;q--){var W=m[q];d=!1;var K=N[q];if(K)for(var G=K.length-1;G>=0&&!d;G--)W.compare(_[K[G]])&&(I[K[G]]||(I[K[G]]=!0,L++),d=!0)}d=d&&L===k}return d}}),De=st.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(d){this._closed=!1,this._segments=[],this._version=0;var m=arguments,_=Array.isArray(d)?typeof d[0]=="object"?d:m:d&&d.size===t&&(d.x!==t||d.point!==t)?m:null;_&&_.length>0?this.setSegments(_):(this._curves=t,this._segmentSelection=0,!_&&typeof d=="string"&&(this.setPathData(d),d=null)),this._initialize(!_&&d)},_equals:function(u){return this._closed===u._closed&&r.equals(this._segments,u._segments)},copyContent:function(u){this.setSegments(u._segments),this._closed=u._closed},_changed:function u(d){if(u.base.call(this,d),d&8){if(this._length=this._area=t,d&32)this._version++;else if(this._curves)for(var m=0,_=this._curves.length;m<_;m++)this._curves[m]._changed()}else d&64&&(this._bounds=t)},getStyle:function(){var u=this._parent;return(u instanceof et?u:this)._style},getSegments:function(){return this._segments},setSegments:function(u){var d=this.isFullySelected(),m=u&&u.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=t,m){var _=u[m-1];typeof _=="boolean"&&(this.setClosed(_),m--),this._add(Re.readList(u,0,{},m))}d&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var u=this._curves,d=this._segments;if(!u){var m=this._countCurves();u=this._curves=new Array(m);for(var _=0;_<m;_++)u[_]=new Le(this,d[_],d[_+1]||d[0])}return u},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var u=this.getCurves();return u[u.length-1]},isClosed:function(){return this._closed},setClosed:function(u){if(this._closed!=(u=!!u)){if(this._closed=u,this._curves){var d=this._curves.length=this._countCurves();u&&(this._curves[d-1]=new Le(this,this._segments[d-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(u,d){var m=this._segments,_=m.length,S=new c(d),k=new Array(6),I=!0,L,N,q,W,K,G,U,ae,Q=[];function se(ee,F){if(ee._transformCoordinates(u,k),L=k[0],N=k[1],I)Q.push("M"+S.pair(L,N)),I=!1;else if(K=k[2],G=k[3],K===L&&G===N&&U===q&&ae===W){if(!F){var J=L-q,re=N-W;Q.push(J===0?"v"+S.number(re):re===0?"h"+S.number(J):"l"+S.pair(J,re))}}else Q.push("c"+S.pair(U-q,ae-W)+" "+S.pair(K-q,G-W)+" "+S.pair(L-q,N-W));q=L,W=N,U=k[4],ae=k[5]}if(!_)return"";for(var Y=0;Y<_;Y++)se(m[Y]);return this._closed&&_>0&&(se(m[0],!0),Q.push("z")),Q.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(u){for(var d=this._segments,m=new Array(6),_=0,S=d.length;_<S;_++)d[_]._transformCoordinates(u,m,!0);return!0},_add:function(u,I){for(var m=this._segments,_=this._curves,S=u.length,k=I==null,I=k?m.length:I,L=0;L<S;L++){var N=u[L];N._path&&(N=u[L]=N.clone()),N._path=this,N._index=I+L,N._selection&&this._updateSelection(N,0,N._selection)}if(k)r.push(m,u);else{m.splice.apply(m,[I,0].concat(u));for(var L=I+S,q=m.length;L<q;L++)m[L]._index=L}if(_){var W=this._countCurves(),K=I>0&&I+S-1===W?I-1:I,G=K,U=Math.min(K+S,W);u._curves&&(_.splice.apply(_,[K,0].concat(u._curves)),G+=u._curves.length);for(var L=G;L<U;L++)_.splice(L,0,new Le(this,null,null));this._adjustCurves(K,U)}return this._changed(41),u},_adjustCurves:function(u,d){for(var m=this._segments,_=this._curves,S,k=u;k<d;k++)S=_[k],S._path=this,S._segment1=m[k],S._segment2=m[k+1]||m[0],S._changed();(S=_[this._closed&&!u?m.length-1:u-1])&&(S._segment2=m[u]||m[0],S._changed()),(S=_[d])&&(S._segment1=m[d],S._changed())},_countCurves:function(){var u=this._segments.length;return!this._closed&&u>0?u-1:u},add:function(u){var d=arguments;return d.length>1&&typeof u!="number"?this._add(Re.readList(d)):this._add([Re.read(d)])[0]},insert:function(u,d){var m=arguments;return m.length>2&&typeof d!="number"?this._add(Re.readList(m,1),u):this._add([Re.read(m,1)],u)[0]},addSegment:function(){return this._add([Re.read(arguments)])[0]},insertSegment:function(u){return this._add([Re.read(arguments,1)],u)[0]},addSegments:function(u){return this._add(Re.readList(u))},insertSegments:function(u,d){return this._add(Re.readList(d),u)},removeSegment:function(u){return this.removeSegments(u,u+1)[0]||null},removeSegments:function(u,d,m){u=u||0,d=r.pick(d,this._segments.length);var _=this._segments,S=this._curves,k=_.length,I=_.splice(u,d-u),L=I.length;if(!L)return I;for(var N=0;N<L;N++){var q=I[N];q._selection&&this._updateSelection(q,q._selection,0),q._index=q._path=null}for(var N=u,W=_.length;N<W;N++)_[N]._index=N;if(S){for(var K=u>0&&d===k+(this._closed?1:0)?u-1:u,S=S.splice(K,L),N=S.length-1;N>=0;N--)S[N]._path=null;m&&(I._curves=S.slice(1)),this._adjustCurves(K,K)}return this._changed(41),I},clear:"#removeSegments",hasHandles:function(){for(var u=this._segments,d=0,m=u.length;d<m;d++)if(u[d].hasHandles())return!0;return!1},clearHandles:function(){for(var u=this._segments,d=0,m=u.length;d<m;d++)u[d].clearHandles()},getLength:function(){if(this._length==null){for(var u=this.getCurves(),d=0,m=0,_=u.length;m<_;m++)d+=u[m].getLength();this._length=d}return this._length},getArea:function(){var u=this._area;if(u==null){var d=this._segments,m=this._closed;u=0;for(var _=0,S=d.length;_<S;_++){var k=_+1===S;u+=Le.getArea(Le.getValues(d[_],d[k?0:_+1],null,k&&!m))}this._area=u}return u},isFullySelected:function(){var u=this._segments.length;return this.isSelected()&&u>0&&this._segmentSelection===u*7},setFullySelected:function(u){u&&this._selectSegments(!0),this.setSelected(u)},setSelection:function u(d){d&1||this._selectSegments(!1),u.base.call(this,d)},_selectSegments:function(u){var d=this._segments,m=d.length,_=u?7:0;this._segmentSelection=_*m;for(var S=0;S<m;S++)d[S]._selection=_},_updateSelection:function(u,d,m){u._selection=m;var _=this._segmentSelection+=m-d;_>0&&this.setSelected(!0)},divideAt:function(u){var d=this.getLocationAt(u),m;return d&&(m=d.getCurve().divideAt(d.getCurveOffset()))?m._segment1:null},splitAt:function(u){var d=this.getLocationAt(u),m=d&&d.index,_=d&&d.time,S=1e-8,k=1-S;_>k&&(m++,_=0);var I=this.getCurves();if(m>=0&&m<I.length){_>=S&&I[m++].divideAtTime(_);var L=this.removeSegments(m,this._segments.length,!0),N;return this._closed?(this.setClosed(!1),N=this):(N=new De(x.NO_INSERT),N.insertAbove(this),N.copyAttributes(this)),N._add(L,0),this.addSegment(L[0]),N}return null},split:function(u,d){var m,_=d===t?u:(m=this.getCurves()[u])&&m.getLocationAtTime(d);return _!=null?this.splitAt(_):null},join:function(u,d){var m=d||0;if(u&&u!==this){var _=u._segments,S=this.getLastSegment(),k=u.getLastSegment();if(!k)return this;S&&S._point.isClose(k._point,m)&&u.reverse();var I=u.getFirstSegment();if(S&&S._point.isClose(I._point,m))S.setHandleOut(I._handleOut),this._add(_.slice(1));else{var L=this.getFirstSegment();L&&L._point.isClose(I._point,m)&&u.reverse(),k=u.getLastSegment(),L&&L._point.isClose(k._point,m)?(L.setHandleIn(k._handleIn),this._add(_.slice(0,_.length-1),0)):this._add(_.slice())}u._closed&&this._add([_[0]]),u.remove()}var N=this.getFirstSegment(),q=this.getLastSegment();return N!==q&&N._point.isClose(q._point,m)&&(N.setHandleIn(q._handleIn),q.remove(),this.setClosed(!0)),this},reduce:function(u){for(var d=this.getCurves(),m=u&&u.simplify,_=m?1e-7:0,S=d.length-1;S>=0;S--){var k=d[S];!k.hasHandles()&&(!k.hasLength(_)||m&&k.isCollinear(k.getNext()))&&k.remove()}return this},reverse:function(){this._segments.reverse();for(var u=0,d=this._segments.length;u<d;u++){var m=this._segments[u],_=m._handleIn;m._handleIn=m._handleOut,m._handleOut=_,m._index=u}this._curves=null,this._changed(9)},flatten:function(u){for(var d=new Ke(this,u||.25,256,!0),m=d.parts,_=m.length,S=[],k=0;k<_;k++)S.push(new Re(m[k].curve.slice(0,2)));!this._closed&&_>0&&S.push(new Re(m[_-1].curve.slice(6))),this.setSegments(S)},simplify:function(u){var d=new Ct(this).fit(u||2.5);return d&&this.setSegments(d),!!d},smooth:function(u){var d=this,m=u||{},_=m.type||"asymmetric",S=this._segments,k=S.length,I=this._closed;function L(ft,Rt){var Jt=ft&&ft.index;if(Jt!=null){var hi=ft.path;if(hi&&hi!==d)throw new Error(ft._class+" "+Jt+" of "+hi+" is not part of "+d);Rt&&ft instanceof Le&&Jt++}else Jt=typeof ft=="number"?ft:Rt;return Math.min(Jt<0&&I?Jt%k:Jt<0?Jt+k:Jt,k-1)}var N=I&&m.from===t&&m.to===t,q=L(m.from,0),W=L(m.to,k-1);if(q>W)if(I)q-=k;else{var K=q;q=W,W=K}if(/^(?:asymmetric|continuous)$/.test(_)){var G=_==="asymmetric",U=Math.min,ae=W-q+1,Q=ae-1,se=N?U(ae,4):1,Y=se,ee=se,F=[];if(I||(Y=U(1,q),ee=U(1,k-W-1)),Q+=Y+ee,Q<=1)return;for(var J=0,re=q-Y;J<=Q;J++,re++)F[J]=S[(re<0?re+k:re)%k]._point;for(var ce=F[0]._x+2*F[1]._x,ne=F[0]._y+2*F[1]._y,ye=2,we=Q-1,Ve=[ce],Be=[ne],z=[ye],j=[],le=[],J=1;J<Q;J++){var xe=J<we,Ce=xe||G?1:2,Ue=xe?4:G?2:7,je=xe?4:G?3:8,nt=xe?2:G?0:1,yt=Ce/ye;ye=z[J]=Ue-yt,ce=Ve[J]=je*F[J]._x+nt*F[J+1]._x-yt*ce,ne=Be[J]=je*F[J]._y+nt*F[J+1]._y-yt*ne}j[we]=Ve[we]/z[we],le[we]=Be[we]/z[we];for(var J=Q-2;J>=0;J--)j[J]=(Ve[J]-j[J+1])/z[J],le[J]=(Be[J]-le[J+1])/z[J];j[Q]=(3*F[Q]._x-j[we])/2,le[Q]=(3*F[Q]._y-le[we])/2;for(var J=Y,Vt=Q-ee,re=q;J<=Vt;J++,re++){var it=S[re<0?re+k:re],at=it._point,Tt=j[J]-at._x,At=le[J]-at._y;(N||J<Vt)&&it.setHandleOut(Tt,At),(N||J>Y)&&it.setHandleIn(-Tt,-At)}}else for(var J=q;J<=W;J++)S[J<0?J+k:J].smooth(m,!N&&J===q,!N&&J===W)},toShape:function(u){if(!this._closed)return null;var d=this._segments,m,_,S,k;function I(G,U){var ae=d[G],Q=ae.getNext(),se=d[U],Y=se.getNext();return ae._handleOut.isZero()&&Q._handleIn.isZero()&&se._handleOut.isZero()&&Y._handleIn.isZero()&&Q._point.subtract(ae._point).isCollinear(Y._point.subtract(se._point))}function L(G){var U=d[G],ae=U.getPrevious(),Q=U.getNext();return ae._handleOut.isZero()&&U._handleIn.isZero()&&U._handleOut.isZero()&&Q._handleIn.isZero()&&U._point.subtract(ae._point).isOrthogonal(Q._point.subtract(U._point))}function N(G){var U=d[G],ae=U.getNext(),Q=U._handleOut,se=ae._handleIn,Y=.5522847498307936;if(Q.isOrthogonal(se)){var ee=U._point,F=ae._point,J=new B(ee,Q,!0).intersect(new B(F,se,!0),!0);return J&&f.isZero(Q.getLength()/J.subtract(ee).getLength()-Y)&&f.isZero(se.getLength()/J.subtract(F).getLength()-Y)}return!1}function q(G,U){return d[G]._point.getDistance(d[U]._point)}if(!this.hasHandles()&&d.length===4&&I(0,2)&&I(1,3)&&L(1)?(m=$.Rectangle,_=new P(q(0,3),q(0,1)),k=d[1]._point.add(d[2]._point).divide(2)):d.length===8&&N(0)&&N(2)&&N(4)&&N(6)&&I(1,5)&&I(3,7)?(m=$.Rectangle,_=new P(q(1,6),q(0,3)),S=_.subtract(new P(q(0,7),q(1,2))).divide(2),k=d[3]._point.add(d[4]._point).divide(2)):d.length===4&&N(0)&&N(1)&&N(2)&&N(3)&&(f.isZero(q(0,2)-q(1,3))?(m=$.Circle,S=q(0,2)/2):(m=$.Ellipse,S=new P(q(2,0)/2,q(3,1)/2)),k=d[1]._point),m){var W=this.getPosition(!0),K=new m({center:W,size:_,radius:S,insert:!1});return K.copyAttributes(this,!0),K._matrix.prepend(this._matrix),K.rotate(k.subtract(W).getAngle()+90),(u===t||u)&&K.insertAbove(this),K}return null},toPath:"#clone",compare:function u(d){if(!d||d instanceof et)return u.base.call(this,d);var m=this.getCurves(),_=d.getCurves(),S=m.length,k=_.length;if(!S||!k)return S==k;for(var I=m[0].getValues(),L=[],N=0,q,W=0,K,G=0;G<k;G++){var se=_[G].getValues();L.push(se);var U=Le.getOverlaps(I,se);if(U){q=!G&&U[0][0]>0?k-1:G,K=U[0][1];break}}for(var ae=Math.abs,Q=1e-8,se=L[q],Y;I&&se;){var U=Le.getOverlaps(I,se);if(U){var ee=U[0][0];if(ae(ee-W)<Q){W=U[1][0],W===1&&(I=++N<S?m[N].getValues():null,W=0);var F=U[0][1];if(ae(F-K)<Q){if(Y||(Y=[q,F]),K=U[1][1],K===1&&(++q>=k&&(q=0),se=L[q]||_[q].getValues(),K=0),!I)return Y[0]===q&&Y[1]===K;continue}}}break}return!1},_hitTestSelf:function(u,d,m,_){var S=this,k=this.getStyle(),I=this._segments,L=I.length,N=this._closed,q=d._tolerancePadding,W=q,K,G,U,ae,Q,se,Y=d.stroke&&k.hasStroke(),ee=d.fill&&k.hasFill(),F=d.curves,J=Y?k.getStrokeWidth()/2:ee&&d.tolerance>0||F?0:null;J!==null&&(J>0?(K=k.getStrokeJoin(),G=k.getStrokeCap(),U=k.getMiterLimit(),W=W.add(De._getStrokePadding(J,_))):K=G="round");function re(j,le){return u.subtract(j).divide(le).length<=1}function ce(j,le,xe){if(!d.selected||le.isSelected()){var Ce=j._point;if(le!==Ce&&(le=le.add(Ce)),re(le,W))return new Te(xe,S,{segment:j,point:le})}}function ne(j,le){return(le||d.segments)&&ce(j,j._point,"segment")||!le&&d.handles&&(ce(j,j._handleIn,"handle-in")||ce(j,j._handleOut,"handle-out"))}function ye(j){ae.add(j)}function we(j){var le=N||j._index>0&&j._index<L-1;if((le?K:G)==="round")return re(j._point,W);if(ae=new De({internal:!0,closed:!0}),le?j.isSmooth()||De._addBevelJoin(j,K,J,U,null,_,ye,!0):G==="square"&&De._addSquareCap(j,G,J,null,_,ye,!0),!ae.isEmpty()){var xe;return ae.contains(u)||(xe=ae.getNearestLocation(u))&&re(xe.getPoint(),q)}}if(d.ends&&!d.segments&&!N){if(se=ne(I[0],!0)||ne(I[L-1],!0))return se}else if(d.segments||d.handles){for(var Ve=0;Ve<L;Ve++)if(se=ne(I[Ve]))return se}if(J!==null){if(Q=this.getNearestLocation(u),Q){var Be=Q.getTime();Be===0||Be===1&&L>1?we(Q.getSegment())||(Q=null):re(Q.getPoint(),W)||(Q=null)}if(!Q&&K==="miter"&&L>1)for(var Ve=0;Ve<L;Ve++){var z=I[Ve];if(u.getDistance(z._point)<=U*J&&we(z)){Q=z.getLocation();break}}}return!Q&&ee&&this._contains(u)||Q&&!Y&&!F?new Te("fill",this):Q?new Te(Y?"stroke":"curve",this,{location:Q,point:Q.getPoint()}):null}},r.each(Le._evaluateMethods,function(u){this[u+"At"]=function(d){var m=this.getLocationAt(d);return m&&m[u]()}},{beans:!1,getLocationOf:function(){for(var u=v.read(arguments),d=this.getCurves(),m=0,_=d.length;m<_;m++){var S=d[m].getLocationOf(u);if(S)return S}return null},getOffsetOf:function(){var u=this.getLocationOf.apply(this,arguments);return u?u.getOffset():null},getLocationAt:function(u){if(typeof u=="number"){for(var d=this.getCurves(),m=0,_=0,S=d.length;_<S;_++){var k=m,I=d[_];if(m+=I.getLength(),m>u)return I.getLocationAt(u-k)}if(d.length>0&&u<=this.getLength())return new lt(d[d.length-1],1)}else if(u&&u.getPath&&u.getPath()===this)return u;return null},getOffsetsWithTangent:function(){var u=v.read(arguments);if(u.isZero())return[];for(var d=[],m=0,_=this.getCurves(),S=0,k=_.length;S<k;S++){for(var I=_[S],L=I.getTimesWithTangent(u),N=0,q=L.length;N<q;N++){var W=m+I.getOffsetAtTime(L[N]);d.indexOf(W)<0&&d.push(W)}m+=I.length}return d}}),new function(){function u(m,_,S,k){if(k<=0)return;var I=k/2,L=k-2,N=I-1,q=new Array(6),W,K;function G(ee){var F=q[ee],J=q[ee+1];(W!=F||K!=J)&&(m.beginPath(),m.moveTo(W,K),m.lineTo(F,J),m.stroke(),m.beginPath(),m.arc(F,J,I,0,Math.PI*2,!0),m.fill())}for(var U=0,ae=_.length;U<ae;U++){var Q=_[U],se=Q._selection;if(Q._transformCoordinates(S,q),W=q[0],K=q[1],se&2&&G(2),se&4&&G(4),m.fillRect(W-I,K-I,k,k),L>0&&!(se&1)){var Y=m.fillStyle;m.fillStyle="#ffffff",m.fillRect(W-N,K-N,L,L),m.fillStyle=Y}}}function d(m,_,S){var k=_._segments,I=k.length,L=new Array(6),N=!0,q,W,K,G,U,ae,Q,se;function Y(F){if(S)F._transformCoordinates(S,L),q=L[0],W=L[1];else{var J=F._point;q=J._x,W=J._y}if(N)m.moveTo(q,W),N=!1;else{if(S)U=L[2],ae=L[3];else{var re=F._handleIn;U=q+re._x,ae=W+re._y}U===q&&ae===W&&Q===K&&se===G?m.lineTo(q,W):m.bezierCurveTo(Q,se,U,ae,q,W)}if(K=q,G=W,S)Q=L[4],se=L[5];else{var re=F._handleOut;Q=K+re._x,se=G+re._y}}for(var ee=0;ee<I;ee++)Y(k[ee]);_._closed&&I>0&&Y(k[0])}return{_draw:function(m,_,S,k){var I=_.dontStart,L=_.dontFinish||_.clip,N=this.getStyle(),q=N.hasFill(),W=N.hasStroke(),K=N.getDashArray(),G=!Xt.support.nativeDash&&W&&K&&K.length;I||m.beginPath(),(q||W&&!G||L)&&(d(m,this,k),this._closed&&m.closePath());function U(F){return K[(F%G+G)%G]}if(!L&&(q||W)&&(this._setStyles(m,_,S),q&&(m.fill(N.getFillRule()),m.shadowColor="rgba(0,0,0,0)"),W)){if(G){I||m.beginPath();for(var ae=new Ke(this,.25,32,!1,k),Q=ae.length,se=-N.getDashOffset(),Y,ee=0;se>0;)se-=U(ee--)+U(ee--);for(;se<Q;)Y=se+U(ee++),(se>0||Y>0)&&ae.drawPart(m,Math.max(se,0),Math.max(Y,0)),se=Y+U(ee++)}m.stroke()}},_drawSelected:function(m,_){m.beginPath(),d(m,this,_),m.stroke(),u(m,this._segments,_,Xt.settings.handleSize)}}},new function(){function u(d){var m=d._segments;if(!m.length)throw new Error("Use a moveTo() command first");return m[m.length-1]}return{moveTo:function(){var d=this._segments;d.length===1&&this.removeSegment(0),d.length||this._add([new Re(v.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Re(v.read(arguments))])},cubicCurveTo:function(){var d=arguments,m=v.read(d),_=v.read(d),S=v.read(d),k=u(this);k.setHandleOut(m.subtract(k._point)),this._add([new Re(S,_.subtract(S))])},quadraticCurveTo:function(){var d=arguments,m=v.read(d),_=v.read(d),S=u(this)._point;this.cubicCurveTo(m.add(S.subtract(m).multiply(1/3)),m.add(_.subtract(m).multiply(1/3)),_)},curveTo:function(){var d=arguments,m=v.read(d),_=v.read(d),S=r.pick(r.read(d),.5),k=1-S,I=u(this)._point,L=m.subtract(I.multiply(k*k)).subtract(_.multiply(S*S)).divide(2*S*k);if(L.isNaN())throw new Error("Cannot put a curve through points with parameter = "+S);this.quadraticCurveTo(L,_)},arcTo:function(){var d=arguments,m=Math.abs,_=Math.sqrt,S=u(this),k=S._point,I=v.read(d),L,N=r.peek(d),q=r.pick(N,!0),W,K,G,U;if(typeof q=="boolean")var ae=k.add(I).divide(2),L=ae.add(ae.subtract(k).rotate(q?-90:90));else if(r.remain(d)<=2)L=I,I=v.read(d);else if(!k.equals(I)){var Q=P.read(d),se=f.isZero;if(se(Q.width)||se(Q.height))return this.lineTo(I);var Y=r.read(d),q=!!r.read(d),ee=!!r.read(d),ae=k.add(I).divide(2),F=k.subtract(ae).rotate(-Y),J=F.x,re=F.y,ce=m(Q.width),ne=m(Q.height),ye=ce*ce,we=ne*ne,Ve=J*J,Be=re*re,z=_(Ve/ye+Be/we);if(z>1&&(ce*=z,ne*=z,ye=ce*ce,we=ne*ne),z=(ye*we-ye*Be-we*Ve)/(ye*Be+we*Ve),m(z)<1e-12&&(z=0),z<0)throw new Error("Cannot create an arc with the given arguments");W=new v(ce*re/ne,-ne*J/ce).multiply((ee===q?-1:1)*_(z)).rotate(Y).add(ae),U=new M().translate(W).rotate(Y).scale(ce,ne),G=U._inverseTransform(k),K=G.getDirectedAngle(U._inverseTransform(I)),!q&&K>0?K-=360:q&&K<0&&(K+=360)}if(L){var j=new B(k.add(L).divide(2),L.subtract(k).rotate(90),!0),le=new B(L.add(I).divide(2),I.subtract(L).rotate(90),!0),xe=new B(k,I),Ce=xe.getSide(L);if(W=j.intersect(le,!0),!W){if(!Ce)return this.lineTo(I);throw new Error("Cannot create an arc with the given arguments")}G=k.subtract(W),K=G.getDirectedAngle(I.subtract(W));var Ue=xe.getSide(W,!0);Ue===0?K=Ce*m(K):Ce===Ue&&(K+=K<0?360:-360)}if(K){for(var je=1e-5,nt=m(K),yt=nt>=360?4:Math.ceil((nt-je)/90),Vt=K/yt,it=Vt*Math.PI/360,at=4/3*Math.sin(it)/(1+Math.cos(it)),Tt=[],At=0;At<=yt;At++){var F=I,ft=null;if(At<yt&&(ft=G.rotate(90).multiply(at),U?(F=U._transformPoint(G),ft=U._transformPoint(G.add(ft)).subtract(F)):F=W.add(G)),!At)S.setHandleOut(ft);else{var Rt=G.rotate(-90).multiply(at);U&&(Rt=U._transformPoint(G.add(Rt)).subtract(F)),Tt.push(new Re(F,Rt,ft))}G=G.rotate(Vt)}this._add(Tt)}},lineBy:function(){var d=v.read(arguments),m=u(this)._point;this.lineTo(m.add(d))},curveBy:function(){var d=arguments,m=v.read(d),_=v.read(d),S=r.read(d),k=u(this)._point;this.curveTo(k.add(m),k.add(_),S)},cubicCurveBy:function(){var d=arguments,m=v.read(d),_=v.read(d),S=v.read(d),k=u(this)._point;this.cubicCurveTo(k.add(m),k.add(_),k.add(S))},quadraticCurveBy:function(){var d=arguments,m=v.read(d),_=v.read(d),S=u(this)._point;this.quadraticCurveTo(S.add(m),S.add(_))},arcBy:function(){var d=arguments,m=u(this)._point,_=m.add(v.read(d)),S=r.pick(r.peek(d),!0);typeof S=="boolean"?this.arcTo(_,S):this.arcTo(_,m.add(v.read(d)))},closePath:function(d){this.setClosed(!0),this.join(this,d)}}},{_getBounds:function(u,d){var m=d.handle?"getHandleBounds":d.stroke?"getStrokeBounds":"getBounds";return De[m](this._segments,this._closed,this,u,d)},statics:{getBounds:function(u,d,m,_,S,k){var I=u[0];if(!I)return new T;var L=new Array(6),N=I._transformCoordinates(_,new Array(6)),q=N.slice(0,2),W=q.slice(),K=new Array(2);function G(Q){Q._transformCoordinates(_,L);for(var se=0;se<2;se++)Le._addBounds(N[se],N[se+4],L[se+2],L[se],se,k?k[se]:0,q,W,K);var Y=N;N=L,L=Y}for(var U=1,ae=u.length;U<ae;U++)G(u[U]);return d&&G(I),new T(q[0],q[1],W[0]-q[0],W[1]-q[1])},getStrokeBounds:function(u,d,m,_,S){var k=m.getStyle(),I=k.hasStroke(),L=k.getStrokeWidth(),N=I&&m._getStrokeMatrix(_,S),q=I&&De._getStrokePadding(L,N),W=De.getBounds(u,d,m,_,S,q);if(!I)return W;var K=L/2,G=k.getStrokeJoin(),U=k.getStrokeCap(),ae=k.getMiterLimit(),Q=new T(new P(q));function se(ce){W=W.include(ce)}function Y(ce){W=W.unite(Q.setCenter(ce._point.transform(_)))}function ee(ce,ne){ne==="round"||ce.isSmooth()?Y(ce):De._addBevelJoin(ce,ne,K,ae,_,N,se)}function F(ce,ne){ne==="round"?Y(ce):De._addSquareCap(ce,ne,K,_,N,se)}var J=u.length-(d?0:1);if(J>0){for(var re=1;re<J;re++)ee(u[re],G);d?ee(u[0],G):(F(u[0],U),F(u[u.length-1],U))}return W},_getStrokePadding:function(u,d){if(!d)return[u,u];var m=new v(u,0).transform(d),_=new v(0,u).transform(d),S=m.getAngleInRadians(),k=m.getLength(),I=_.getLength(),L=Math.sin(S),N=Math.cos(S),q=Math.tan(S),W=Math.atan2(I*q,k),K=Math.atan2(I,q*k);return[Math.abs(k*Math.cos(W)*N+I*Math.sin(W)*L),Math.abs(I*Math.sin(K)*N+k*Math.cos(K)*L)]},_addBevelJoin:function(u,d,m,_,S,k,I,L){var N=u.getCurve(),q=N.getPrevious(),W=N.getPoint1().transform(S),K=q.getNormalAtTime(1).multiply(m).transform(k),G=N.getNormalAtTime(0).multiply(m).transform(k),U=K.getDirectedAngle(G);if((U<0||U>=180)&&(K=K.negate(),G=G.negate()),L&&I(W),I(W.add(K)),d==="miter"){var ae=new B(W.add(K),new v(-K.y,K.x),!0).intersect(new B(W.add(G),new v(-G.y,G.x),!0),!0);ae&&W.getDistance(ae)<=_*m&&I(ae)}I(W.add(G))},_addSquareCap:function(u,d,m,_,S,k,I){var L=u._point.transform(_),N=u.getLocation(),q=N.getNormal().multiply(N.getTime()===0?m:-m).transform(S);d==="square"&&(I&&(k(L.subtract(q)),k(L.add(q))),L=L.add(q.rotate(-90))),k(L.add(q)),k(L.subtract(q))},getHandleBounds:function(u,d,m,_,S){var k=m.getStyle(),I=S.stroke&&k.hasStroke(),L,N;if(I){var q=m._getStrokeMatrix(_,S),W=k.getStrokeWidth()/2,K=W;k.getStrokeJoin()==="miter"&&(K=W*k.getMiterLimit()),k.getStrokeCap()==="square"&&(K=Math.max(K,W*Math.SQRT2)),L=De._getStrokePadding(W,q),N=De._getStrokePadding(K,q)}for(var G=new Array(6),U=1/0,ae=-U,Q=U,se=ae,Y=0,ee=u.length;Y<ee;Y++){var F=u[Y];F._transformCoordinates(_,G);for(var J=0;J<6;J+=2){var re=J?L:N,ce=re?re[0]:0,ne=re?re[1]:0,ye=G[J],we=G[J+1],Ve=ye-ce,Be=ye+ce,z=we-ne,j=we+ne;Ve<U&&(U=Ve),Be>ae&&(ae=Be),z<Q&&(Q=z),j>se&&(se=j)}}return new T(U,Q,ae-U,se-Q)}}});De.inject({statics:new function(){var u=.5522847498307936,d=[new Re([-1,0],[0,u],[0,-.5522847498307936]),new Re([0,-1],[-.5522847498307936,0],[u,0]),new Re([1,0],[0,-.5522847498307936],[0,u]),new Re([0,1],[u,0],[-.5522847498307936,0])];function m(S,k,I){var L=r.getNamed(I),N=new De(L&&(L.insert==!0?x.INSERT:L.insert==!1?x.NO_INSERT:null));return N._add(S),N._closed=k,N.set(L,x.INSERT)}function _(S,k,I){for(var L=new Array(4),N=0;N<4;N++){var q=d[N];L[N]=new Re(q._point.multiply(k).add(S),q._handleIn.multiply(k),q._handleOut.multiply(k))}return m(L,!0,I)}return{Line:function(){var S=arguments;return m([new Re(v.readNamed(S,"from")),new Re(v.readNamed(S,"to"))],!1,S)},Circle:function(){var S=arguments,k=v.readNamed(S,"center"),I=r.readNamed(S,"radius");return _(k,new P(I),S)},Rectangle:function(){var S=arguments,k=T.readNamed(S,"rectangle"),I=P.readNamed(S,"radius",0,{readNull:!0}),L=k.getBottomLeft(!0),N=k.getTopLeft(!0),q=k.getTopRight(!0),W=k.getBottomRight(!0),K;if(!I||I.isZero())K=[new Re(L),new Re(N),new Re(q),new Re(W)];else{I=P.min(I,k.getSize(!0).divide(2));var G=I.width,U=I.height,ae=G*u,Q=U*u;K=[new Re(L.add(G,0),null,[-ae,0]),new Re(L.subtract(0,U),[0,Q]),new Re(N.add(0,U),null,[0,-Q]),new Re(N.add(G,0),[-ae,0],null),new Re(q.subtract(G,0),null,[ae,0]),new Re(q.add(0,U),[0,-Q],null),new Re(W.subtract(0,U),null,[0,Q]),new Re(W.subtract(G,0),[ae,0])]}return m(K,!0,S)},RoundRectangle:"#Rectangle",Ellipse:function(){var S=arguments,k=$._readEllipse(S);return _(k.center,k.radius,S)},Oval:"#Ellipse",Arc:function(){var S=arguments,k=v.readNamed(S,"from"),I=v.readNamed(S,"through"),L=v.readNamed(S,"to"),N=r.getNamed(S),q=new De(N&&N.insert==!1&&x.NO_INSERT);return q.moveTo(k),q.arcTo(I,L),q.set(N)},RegularPolygon:function(){for(var S=arguments,k=v.readNamed(S,"center"),I=r.readNamed(S,"sides"),L=r.readNamed(S,"radius"),N=360/I,q=I%3===0,W=new v(0,q?-L:L),K=q?-1:.5,G=new Array(I),U=0;U<I;U++)G[U]=new Re(k.add(W.rotate((U+K)*N)));return m(G,!0,S)},Star:function(){for(var S=arguments,k=v.readNamed(S,"center"),I=r.readNamed(S,"points")*2,L=r.readNamed(S,"radius1"),N=r.readNamed(S,"radius2"),q=360/I,W=new v(0,-1),K=new Array(I),G=0;G<I;G++)K[G]=new Re(k.add(W.rotate(q*G).multiply(G%2?N:L)));return m(K,!0,S)}}}});var et=st.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(d){this._children=[],this._namedChildren={},this._initialize(d)||(typeof d=="string"?this.setPathData(d):this.addChildren(Array.isArray(d)?d:arguments))},insertChildren:function u(d,m){var _=m,S=_[0];S&&typeof S[0]=="number"&&(_=[_]);for(var k=m.length-1;k>=0;k--){var I=_[k];_===m&&!(I instanceof De)&&(_=r.slice(_)),Array.isArray(I)?_[k]=new De({segments:I,insert:!1}):I instanceof et&&(_.splice.apply(_,[k,1].concat(I.removeChildren())),I.remove())}return u.base.call(this,d,_)},reduce:function u(d){for(var m=this._children,_=m.length-1;_>=0;_--){var S=m[_].reduce(d);S.isEmpty()&&S.remove()}if(!m.length){var S=new De(x.NO_INSERT);return S.copyAttributes(this),S.insertAbove(this),this.remove(),S}return u.base.call(this)},isClosed:function(){for(var u=this._children,d=0,m=u.length;d<m;d++)if(!u[d]._closed)return!1;return!0},setClosed:function(u){for(var d=this._children,m=0,_=d.length;m<_;m++)d[m].setClosed(u)},getFirstSegment:function(){var u=this.getFirstChild();return u&&u.getFirstSegment()},getLastSegment:function(){var u=this.getLastChild();return u&&u.getLastSegment()},getCurves:function(){for(var u=this._children,d=[],m=0,_=u.length;m<_;m++)r.push(d,u[m].getCurves());return d},getFirstCurve:function(){var u=this.getFirstChild();return u&&u.getFirstCurve()},getLastCurve:function(){var u=this.getLastChild();return u&&u.getLastCurve()},getArea:function(){for(var u=this._children,d=0,m=0,_=u.length;m<_;m++)d+=u[m].getArea();return d},getLength:function(){for(var u=this._children,d=0,m=0,_=u.length;m<_;m++)d+=u[m].getLength();return d},getPathData:function(u,d){for(var m=this._children,_=[],S=0,k=m.length;S<k;S++){var I=m[S],L=I._matrix;_.push(I.getPathData(u&&!L.isIdentity()?u.appended(L):u,d))}return _.join("")},_hitTestChildren:function u(d,m,_){return u.base.call(this,d,m.class===De||m.type==="path"?m:r.set({},m,{fill:!1}),_)},_draw:function(u,d,m,_){var S=this._children;if(S.length){d=d.extend({dontStart:!0,dontFinish:!0}),u.beginPath();for(var k=0,I=S.length;k<I;k++)S[k].draw(u,d,_);if(!d.clip){this._setStyles(u,d,m);var L=this._style;L.hasFill()&&(u.fill(L.getFillRule()),u.shadowColor="rgba(0,0,0,0)"),L.hasStroke()&&u.stroke()}}},_drawSelected:function(u,d,m){for(var _=this._children,S=0,k=_.length;S<k;S++){var I=_[S],L=I._matrix;m[I._id]||I._drawSelected(u,L.isIdentity()?d:d.appended(L))}}},new function(){function u(d,m){var _=d._children;if(m&&!_.length)throw new Error("Use a moveTo() command first");return _[_.length-1]}return r.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(d){this[d]=function(){var m=u(this,!0);m[d].apply(m,arguments)}},{moveTo:function(){var d=u(this),m=d&&d.isEmpty()?d:new De(x.NO_INSERT);m!==d&&this.addChild(m),m.moveTo.apply(m,arguments)},moveBy:function(){var d=u(this,!0),m=d&&d.getLastSegment(),_=v.read(arguments);this.moveTo(m?_.add(m._point):_)},closePath:function(d){u(this,!0).closePath(d)}})},r.each(["reverse","flatten","simplify","smooth"],function(u){this[u]=function(d){for(var m=this._children,_,S=0,k=m.length;S<k;S++)_=m[S][u](d)||_;return _}},{}));st.inject(new function(){var u=Math.min,d=Math.max,m=Math.abs,_={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function S(Y){return Y._children||[Y]}function k(Y,ee){var F=Y.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(ee){for(var J=S(F),re=0,ce=J.length;re<ce;re++){var Y=J[re];!Y._closed&&!Y.isEmpty()&&(Y.closePath(1e-12),Y.getFirstSegment().setHandleIn(0,0),Y.getLastSegment().setHandleOut(0,0))}F=F.resolveCrossings().reorient(F.getFillRule()==="nonzero",!0)}return F}function I(Y,ee,F,J,re){var ce=new et(x.NO_INSERT);return ce.addChildren(Y,!0),ce=ce.reduce({simplify:ee}),re&&re.insert==!1||ce.insertAbove(J&&F.isSibling(J)&&F.getIndex()<J.getIndex()?J:F),ce.copyAttributes(F,!0),ce}function L(Y){return Y.hasOverlap()||Y.isCrossing()}function N(Y,ee,F,J){if(J&&(J.trace==!1||J.stroke)&&/^(subtract|intersect)$/.test(F))return q(Y,ee,F);var re=k(Y,!0),ce=ee&&Y!==ee&&k(ee,!0),ne=_[F];ne[F]=!0,ce&&(ne.subtract||ne.exclude)^(ce.isClockwise()^re.isClockwise())&&ce.reverse();var ye=U(lt.expand(re.getIntersections(ce,L))),we=S(re),Ve=ce&&S(ce),Be=[],z=[],j;function le(ft){for(var Rt=0,Jt=ft.length;Rt<Jt;Rt++){var hi=ft[Rt];r.push(Be,hi._segments),r.push(z,hi.getCurves()),hi._overlapsOnly=!0}}function xe(ft){for(var Rt=[],Jt=0,hi=ft&&ft.length;Jt<hi;Jt++)Rt.push(z[ft[Jt]]);return Rt}if(ye.length){le(we),Ve&&le(Ve);for(var Ce=new Array(z.length),Ue=0,je=z.length;Ue<je;Ue++)Ce[Ue]=z[Ue].getValues();for(var nt=h.findCurveBoundsCollisions(Ce,Ce,0,!0),yt={},Ue=0;Ue<z.length;Ue++){var Vt=z[Ue],it=Vt._path._id,at=yt[it]=yt[it]||{};at[Vt.getIndex()]={hor:xe(nt[Ue].hor),ver:xe(nt[Ue].ver)}}for(var Ue=0,je=ye.length;Ue<je;Ue++)Q(ye[Ue]._segment,re,ce,yt,ne);for(var Ue=0,je=Be.length;Ue<je;Ue++){var Tt=Be[Ue],At=Tt._intersection;Tt._winding||Q(Tt,re,ce,yt,ne),At&&At._overlap||(Tt._path._overlapsOnly=!1)}j=se(Be,ne)}else j=G(Ve?we.concat(Ve):we.slice(),function(ft){return!!ne[ft]});return I(j,!0,Y,ee,J)}function q(Y,ee,F){var J=k(Y),re=k(ee),ce=J.getIntersections(re,L),ne=F==="subtract",ye=F==="divide",we={},Ve=[];function Be(le){if(!we[le._id]&&(ye||re.contains(le.getPointAt(le.getLength()/2))^ne))return Ve.unshift(le),we[le._id]=!0}for(var z=ce.length-1;z>=0;z--){var j=ce[z].split();j&&(Be(j)&&j.getFirstSegment().setHandleIn(0,0),J.getLastSegment().setHandleOut(0,0))}return Be(J),I(Ve,!1,Y,ee)}function W(Y,ee){for(var F=Y;F;){if(F===ee)return;F=F._previous}for(;Y._next&&Y._next!==ee;)Y=Y._next;if(!Y._next){for(;ee._previous;)ee=ee._previous;Y._next=ee,ee._previous=Y}}function K(Y){for(var ee=Y.length-1;ee>=0;ee--)Y[ee].clearHandles()}function G(Y,ee,F){var J=Y&&Y.length;if(J){var re=r.each(Y,function(nt,yt){this[nt._id]={container:null,winding:nt.isClockwise()?1:-1,index:yt}},{}),ce=Y.slice().sort(function(nt,yt){return m(yt.getArea())-m(nt.getArea())}),ne=ce[0],ye=h.findItemBoundsCollisions(ce,null,f.GEOMETRIC_EPSILON);F==null&&(F=ne.isClockwise());for(var we=0;we<J;we++){var Ve=ce[we],Be=re[Ve._id],z=0,j=ye[we];if(j){for(var le=null,xe=j.length-1;xe>=0;xe--)if(j[xe]<we){le=le||Ve.getInteriorPoint();var Ce=ce[j[xe]];if(Ce.contains(le)){var Ue=re[Ce._id];z=Ue.winding,Be.winding+=z,Be.container=Ue.exclude?Ue.container:Ce;break}}}if(ee(Be.winding)===ee(z))Be.exclude=!0,Y[Be.index]=null;else{var je=Be.container;Ve.setClockwise(je?!je.isClockwise():F)}}}return Y}function U(Y,ee,F){var J=ee&&[],re=1e-8,ce=1-re,ne=!1,ye=F||[],we=F&&{},Ve,Be,z;function j(Rt){return Rt._path._id+"."+Rt._segment1._index}for(var le=(F&&F.length)-1;le>=0;le--){var xe=F[le];xe._path&&(we[j(xe)]=!0)}for(var le=Y.length-1;le>=0;le--){var Ce=Y[le],Ue=Ce._time,je=Ue,nt=ee&&!ee(Ce),xe=Ce._curve,yt;if(xe&&(xe!==Be?(ne=!xe.hasHandles()||we&&we[j(xe)],Ve=[],z=null,Be=xe):z>=re&&(Ue/=z)),nt){Ve&&Ve.push(Ce);continue}else ee&&J.unshift(Ce);if(z=je,Ue<re)yt=xe._segment1;else if(Ue>ce)yt=xe._segment2;else{var Vt=xe.divideAtTime(Ue,!0);ne&&ye.push(xe,Vt),yt=Vt._segment1;for(var it=Ve.length-1;it>=0;it--){var at=Ve[it];at._time=(at._time-Ue)/(1-Ue)}}Ce._setSegment(yt);var Tt=yt._intersection,At=Ce._intersection;if(Tt){W(Tt,At);for(var ft=Tt;ft;)W(ft._intersection,Tt),ft=ft._next}else yt._intersection=At}return F||K(ye),J||Y}function ae(Y,ee,F,J,re){var ce=Array.isArray(ee)?ee:ee[F?"hor":"ver"],ne=F?1:0,ye=ne^1,we=[Y.x,Y.y],Ve=we[ne],Be=we[ye],z=1e-9,j=1e-6,le=Ve-z,xe=Ve+z,Ce=0,Ue=0,je=0,nt=0,yt=!1,Vt=!1,it=1,at=[],Tt,At;function ft(Bt){var ls=Bt[ye+0],ds=Bt[ye+6];if(!(Be<u(ls,ds)||Be>d(ls,ds))){var Ds=Bt[ne+0],Pr=Bt[ne+2],Aa=Bt[ne+4],qr=Bt[ne+6];if(ls===ds){(Ds<xe&&qr>le||qr<xe&&Ds>le)&&(yt=!0);return}var Tr=Be===ls?0:Be===ds||le>d(Ds,Pr,Aa,qr)||xe<u(Ds,Pr,Aa,qr)?1:Le.solveCubic(Bt,ye,Be,at,0,1)>0?at[0]:1,ur=Tr===0?Ds:Tr===1?qr:Le.getPoint(Bt,Tr)[F?"y":"x"],yr=ls>ds?1:-1,zr=Tt[ye]>Tt[ye+6]?1:-1,Vs=Tt[ne+6];return Be!==ls?(ur<le?je+=yr:ur>xe?nt+=yr:yt=!0,ur>Ve-j&&ur<Ve+j&&(it/=2)):(yr!==zr?Ds<le?je+=yr:Ds>xe&&(nt+=yr):Ds!=Vs&&(Vs<xe&&ur>xe?(nt+=yr,yt=!0):Vs>le&&ur<le&&(je+=yr,yt=!0)),it/=4),Tt=Bt,!re&&ur>le&&ur<xe&&Le.getTangent(Bt,Tr)[F?"x":"y"]===0&&ae(Y,ee,!F,J,!0)}}function Rt(Bt){var ls=Bt[ye+0],ds=Bt[ye+2],Ds=Bt[ye+4],Pr=Bt[ye+6];if(Be<=d(ls,ds,Ds,Pr)&&Be>=u(ls,ds,Ds,Pr)){for(var Aa=Bt[ne+0],qr=Bt[ne+2],Tr=Bt[ne+4],ur=Bt[ne+6],yr=le>d(Aa,qr,Tr,ur)||xe<u(Aa,qr,Tr,ur)?[Bt]:Le.getMonoCurves(Bt,F),zr,Vs=0,cr=yr.length;Vs<cr;Vs++)if(zr=ft(yr[Vs]))return zr}}for(var Jt=0,hi=ce.length;Jt<hi;Jt++){var si=ce[Jt],di=si._path,$t=si.getValues(),Nn;if((!Jt||ce[Jt-1]._path!==di)&&(Tt=null,di._closed||(At=Le.getValues(di.getLastCurve().getSegment2(),si.getSegment1(),null,!J),At[ye]!==At[ye+6]&&(Tt=At)),!Tt)){Tt=$t;for(var Mi=di.getLastCurve();Mi&&Mi!==si;){var cs=Mi.getValues();if(cs[ye]!==cs[ye+6]){Tt=cs;break}Mi=Mi.getPrevious()}}if(Nn=Rt($t))return Nn;if(Jt+1===hi||ce[Jt+1]._path!==di){if(At&&(Nn=Rt(At)))return Nn;yt&&!je&&!nt&&(je=nt=di.isClockwise(J)^F?1:-1),Ce+=je,Ue+=nt,je=nt=0,yt&&(Vt=!0,yt=!1),At=null}}return Ce=m(Ce),Ue=m(Ue),{winding:d(Ce,Ue),windingL:Ce,windingR:Ue,quality:it,onPath:Vt}}function Q(Y,ee,F,J,re){var ce=[],ne=Y,ye=0,z;do{var we=Y.getCurve();if(we){var Ve=we.getLength();ce.push({segment:Y,curve:we,length:Ve}),ye+=Ve}Y=Y.getNext()}while(Y&&!Y._intersection&&Y!==ne);for(var Be=[.5,.25,.75],z={winding:0,quality:-1},j=.001,le=1-j,xe=0;xe<Be.length&&z.quality<.5;xe++)for(var Ve=ye*Be[xe],Ce=0,Ue=ce.length;Ce<Ue;Ce++){var je=ce[Ce],nt=je.length;if(Ve<=nt){var we=je.curve,yt=we._path,Vt=yt._parent,it=Vt instanceof et?Vt:yt,at=f.clamp(we.getTimeAt(Ve),j,le),Tt=we.getPointAtTime(at),At=m(we.getTangentAtTime(at).y)<Math.SQRT1_2,ft=null;if(re.subtract&&F){var Rt=it===ee?F:ee,Jt=Rt._getWinding(Tt,At,!0);if(it===ee&&Jt.winding||it===F&&!Jt.winding){if(Jt.quality<1)continue;ft={winding:0,quality:1}}}ft=ft||ae(Tt,J[yt._id][we.getIndex()],At,!0),ft.quality>z.quality&&(z=ft);break}Ve-=nt}for(var Ce=ce.length-1;Ce>=0;Ce--)ce[Ce].segment._winding=z}function se(Y,ee){var F=[],J;function re(hi){var si;return!!(hi&&!hi._visited&&(!ee||ee[(si=hi._winding||{}).winding]&&!(ee.unite&&si.winding===2&&si.windingL&&si.windingR)))}function ce(hi){if(hi){for(var si=0,di=J.length;si<di;si++)if(hi===J[si])return!0}return!1}function ne(hi){for(var si=hi._segments,di=0,$t=si.length;di<$t;di++)si[di]._visited=!0}function ye(hi,si){var di=hi._intersection,$t=di,Nn=[];si&&(J=[hi]);function Mi(cs,Bt){for(;cs&&cs!==Bt;){var ls=cs._segment,ds=ls&&ls._path;if(ds){var Ds=ls.getNext()||ds.getFirstSegment(),Pr=Ds._intersection;ls!==hi&&(ce(ls)||ce(Ds)||Ds&&re(ls)&&(re(Ds)||Pr&&re(Pr._segment)))&&Nn.push(ls),si&&J.push(ls)}cs=cs._next}}if(di){for(Mi(di);di&&di._previous;)di=di._previous;Mi(di,$t)}return Nn}Y.sort(function(hi,si){var di=hi._intersection,$t=si._intersection,Nn=!!(di&&di._overlap),Mi=!!($t&&$t._overlap),cs=hi._path,Bt=si._path;return Nn^Mi?Nn?1:-1:!di^!$t?di?1:-1:cs!==Bt?cs._id-Bt._id:hi._index-si._index});for(var we=0,Ve=Y.length;we<Ve;we++){var Be=Y[we],z=re(Be),j=null,le=!1,xe=!0,Ce=[],Ue,je,nt;if(z&&Be._path._overlapsOnly){var yt=Be._path,Vt=Be._intersection._segment._path;yt.compare(Vt)&&(yt.getArea()&&F.push(yt.clone(!1)),ne(yt),ne(Vt),z=!1)}for(;z;){var it=!j,at=ye(Be,it),Tt=at.shift(),le=!it&&(ce(Be)||ce(Tt)),At=!le&&Tt;if(it&&(j=new De(x.NO_INSERT),Ue=null),le){(Be.isFirst()||Be.isLast())&&(xe=Be._path._closed),Be._visited=!0;break}if(At&&Ue&&(Ce.push(Ue),Ue=null),Ue||(At&&at.push(Be),Ue={start:j._segments.length,crossings:at,visited:je=[],handleIn:nt}),At&&(Be=Tt),!re(Be)){j.removeSegments(Ue.start);for(var ft=0,Rt=je.length;ft<Rt;ft++)je[ft]._visited=!1;je.length=0;do Be=Ue&&Ue.crossings.shift(),(!Be||!Be._path)&&(Be=null,Ue=Ce.pop(),Ue&&(je=Ue.visited,nt=Ue.handleIn));while(Ue&&!re(Be));if(!Be)break}var Jt=Be.getNext();j.add(new Re(Be._point,nt,Jt&&Be._handleOut)),Be._visited=!0,je.push(Be),Be=Jt||Be._path.getFirstSegment(),nt=Jt&&Jt._handleIn}le&&(xe&&(j.getFirstSegment().setHandleIn(nt),j.setClosed(xe)),j.getArea()!==0&&F.push(j))}return F}return{_getWinding:function(Y,ee,F){return ae(Y,this.getCurves(),ee,F)},unite:function(Y,ee){return N(this,Y,"unite",ee)},intersect:function(Y,ee){return N(this,Y,"intersect",ee)},subtract:function(Y,ee){return N(this,Y,"subtract",ee)},exclude:function(Y,ee){return N(this,Y,"exclude",ee)},divide:function(Y,ee){return ee&&(ee.trace==!1||ee.stroke)?q(this,Y,"divide"):I([this.subtract(Y,ee),this.intersect(Y,ee)],!0,this,Y,ee)},resolveCrossings:function(){var Y=this._children,ee=Y||[this];function F(Ue,je){var nt=Ue&&Ue._intersection;return nt&&nt._overlap&&nt._path===je}var J=!1,re=!1,ce=this.getIntersections(null,function(Ue){return Ue.hasOverlap()&&(J=!0)||Ue.isCrossing()&&(re=!0)}),ne=J&&re&&[];if(ce=lt.expand(ce),J)for(var ye=U(ce,function(Ue){return Ue.hasOverlap()},ne),we=ye.length-1;we>=0;we--){var Ve=ye[we],Be=Ve._path,z=Ve._segment,j=z.getPrevious(),le=z.getNext();F(j,Be)&&F(le,Be)&&(z.remove(),j._handleOut._set(0,0),le._handleIn._set(0,0),j!==z&&!j.getCurve().hasLength()&&(le._handleIn.set(j._handleIn),j.remove()))}re&&(U(ce,J&&function(Ue){var je=Ue.getCurve(),nt=Ue.getSegment(),yt=Ue._intersection,Vt=yt._curve,it=yt._segment;if(je&&Vt&&je._path&&Vt._path)return!0;nt&&(nt._intersection=null),it&&(it._intersection=null)},ne),ne&&K(ne),ee=se(r.each(ee,function(Ue){r.push(this,Ue._segments)},[])));var xe=ee.length,Ce;return xe>1&&Y?(ee!==Y&&this.setChildren(ee),Ce=this):xe===1&&!Y&&(ee[0]!==this&&this.setSegments(ee[0].removeSegments()),Ce=this),Ce||(Ce=new et(x.NO_INSERT),Ce.addChildren(ee),Ce=Ce.reduce(),Ce.copyAttributes(this),this.replaceWith(Ce)),Ce},reorient:function(Y,ee){var F=this._children;return F&&F.length?this.setChildren(G(this.removeChildren(),function(J){return!!(Y?J:J&1)},ee)):ee!==t&&this.setClockwise(ee),this},getInteriorPoint:function(){var Y=this.getBounds(),ee=Y.getCenter(!0);if(!this.contains(ee)){for(var F=this.getCurves(),J=ee.y,re=[],ce=[],ne=0,ye=F.length;ne<ye;ne++){var we=F[ne].getValues(),Ve=we[1],Be=we[3],z=we[5],j=we[7];if(J>=u(Ve,Be,z,j)&&J<=d(Ve,Be,z,j))for(var le=Le.getMonoCurves(we),xe=0,Ce=le.length;xe<Ce;xe++){var Ue=le[xe],je=Ue[1],nt=Ue[7];if(je!==nt&&(J>=je&&J<=nt||J>=nt&&J<=je)){var yt=J===je?Ue[0]:J===nt?Ue[6]:Le.solveCubic(Ue,1,J,ce,0,1)===1?Le.getPoint(Ue,ce[0]).x:(Ue[0]+Ue[6])/2;re.push(yt)}}}re.length>1&&(re.sort(function(Vt,it){return Vt-it}),ee.x=(re[0]+re[1])/2)}return ee}}});var Ke=r.extend({_class:"PathFlattener",initialize:function(u,d,m,_,S){var k=[],I=[],L=0,N=1/(m||32),q=u._segments,W=q[0],K;function G(se,Y){var ee=Le.getValues(se,Y,S);k.push(ee),U(ee,se._index,0,1)}function U(se,Y,ee,F){if(F-ee>N&&!(_&&Le.isStraight(se))&&!Le.isFlatEnough(se,d||.25)){var J=Le.subdivide(se,.5),re=(ee+F)/2;U(J[0],Y,ee,re),U(J[1],Y,re,F)}else{var ce=se[6]-se[0],ne=se[7]-se[1],ye=Math.sqrt(ce*ce+ne*ne);ye>0&&(L+=ye,I.push({offset:L,curve:se,index:Y,time:F}))}}for(var ae=1,Q=q.length;ae<Q;ae++)K=q[ae],G(W,K),W=K;u._closed&&G(K||W,q[0]),this.curves=k,this.parts=I,this.length=L,this.index=0},_get:function(u){for(var d=this.parts,m=d.length,_,S=this.index;_=S,!(!S||d[--S].offset<u););for(;_<m;_++){var k=d[_];if(k.offset>=u){this.index=_;var I=d[_-1],L=I&&I.index===k.index?I.time:0,N=I?I.offset:0;return{index:k.index,time:L+(k.time-L)*(u-N)/(k.offset-N)}}}return{index:d[m-1].index,time:1}},drawPart:function(u,d,m){for(var _=this._get(d),S=this._get(m),k=_.index,I=S.index;k<=I;k++){var L=Le.getPart(this.curves[k],k===_.index?_.time:0,k===S.index?S.time:1);k===_.index&&u.moveTo(L[0],L[1]),u.bezierCurveTo.apply(u,L.slice(2))}}},r.each(Le._evaluateMethods,function(u){this[u+"At"]=function(d){var m=this._get(d);return Le[u](this.curves[m.index],m.time)}},{})),Ct=r.extend({initialize:function(u){for(var d=this.points=[],m=u._segments,_=u._closed,S=0,k,I=m.length;S<I;S++){var L=m[S].point;(!k||!k.equals(L))&&d.push(k=L.clone())}_&&(d.unshift(d[d.length-1]),d.push(d[1])),this.closed=_},fit:function(u){var d=this.points,m=d.length,_=null;return m>0&&(_=[new Re(d[0])],m>1&&(this.fitCubic(_,u,0,m-1,d[1].subtract(d[0]),d[m-2].subtract(d[m-1])),this.closed&&(_.shift(),_.pop()))),_},fitCubic:function(u,d,m,_,S,k){var I=this.points;if(_-m===1){var L=I[m],N=I[_],q=L.getDistance(N)/3;this.addCurve(u,[L,L.add(S.normalize(q)),N.add(k.normalize(q)),N]);return}for(var W=this.chordLengthParameterize(m,_),K=Math.max(d,d*d),G,U=!0,ae=0;ae<=4;ae++){var Q=this.generateBezier(m,_,W,S,k),se=this.findMaxError(m,_,Q,W);if(se.error<d&&U){this.addCurve(u,Q);return}if(G=se.index,se.error>=K)break;U=this.reparameterize(m,_,W,Q),K=se.error}var Y=I[G-1].subtract(I[G+1]);this.fitCubic(u,d,m,G,S,Y),this.fitCubic(u,d,G,_,Y.negate(),k)},addCurve:function(u,d){var m=u[u.length-1];m.setHandleOut(d[1].subtract(d[0])),u.push(new Re(d[3],d[2].subtract(d[3])))},generateBezier:function(u,d,m,_,S){for(var k=1e-12,I=Math.abs,L=this.points,N=L[u],q=L[d],W=[[0,0],[0,0]],K=[0,0],G=0,U=d-u+1;G<U;G++){var ae=m[G],Q=1-ae,se=3*ae*Q,Y=Q*Q*Q,ee=se*Q,F=se*ae,J=ae*ae*ae,re=_.normalize(ee),ce=S.normalize(F),ne=L[u+G].subtract(N.multiply(Y+ee)).subtract(q.multiply(F+J));W[0][0]+=re.dot(re),W[0][1]+=re.dot(ce),W[1][0]=W[0][1],W[1][1]+=ce.dot(ce),K[0]+=re.dot(ne),K[1]+=ce.dot(ne)}var ye=W[0][0]*W[1][1]-W[1][0]*W[0][1],we,Ve;if(I(ye)>k){var Be=W[0][0]*K[1]-W[1][0]*K[0],z=K[0]*W[1][1]-K[1]*W[0][1];we=z/ye,Ve=Be/ye}else{var j=W[0][0]+W[0][1],le=W[1][0]+W[1][1];we=Ve=I(j)>k?K[0]/j:I(le)>k?K[1]/le:0}var xe=q.getDistance(N),Ce=k*xe,Ue,je;if(we<Ce||Ve<Ce)we=Ve=xe/3;else{var nt=q.subtract(N);Ue=_.normalize(we),je=S.normalize(Ve),Ue.dot(nt)-je.dot(nt)>xe*xe&&(we=Ve=xe/3,Ue=je=null)}return[N,N.add(Ue||_.normalize(we)),q.add(je||S.normalize(Ve)),q]},reparameterize:function(u,d,m,_){for(var S=u;S<=d;S++)m[S-u]=this.findRoot(_,this.points[S],m[S-u]);for(var S=1,k=m.length;S<k;S++)if(m[S]<=m[S-1])return!1;return!0},findRoot:function(u,d,m){for(var _=[],S=[],k=0;k<=2;k++)_[k]=u[k+1].subtract(u[k]).multiply(3);for(var k=0;k<=1;k++)S[k]=_[k+1].subtract(_[k]).multiply(2);var I=this.evaluate(3,u,m),L=this.evaluate(2,_,m),N=this.evaluate(1,S,m),q=I.subtract(d),W=L.dot(L)+q.dot(N);return f.isMachineZero(W)?m:m-q.dot(L)/W},evaluate:function(u,d,m){for(var _=d.slice(),S=1;S<=u;S++)for(var k=0;k<=u-S;k++)_[k]=_[k].multiply(1-m).add(_[k+1].multiply(m));return _[0]},chordLengthParameterize:function(u,d){for(var m=[0],_=u+1;_<=d;_++)m[_-u]=m[_-u-1]+this.points[_].getDistance(this.points[_-1]);for(var _=1,S=d-u;_<=S;_++)m[_]/=m[S];return m},findMaxError:function(u,d,m,_){for(var S=Math.floor((d-u+1)/2),k=0,I=u+1;I<d;I++){var L=this.evaluate(3,m,_[I-u]),N=L.subtract(this.points[I]),q=N.x*N.x+N.y*N.y;q>=k&&(k=q,S=I)}return{error:k,index:S}}}),dt=x.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(d){this._content="",this._lines=[];var m=d&&r.isPlainObject(d)&&d.x===t&&d.y===t;this._initialize(m&&d,!m&&v.read(arguments))},_equals:function(u){return this._content===u._content},copyContent:function(u){this.setContent(u._content)},getContent:function(){return this._content},setContent:function(u){this._content=""+u,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Et=dt.extend({_class:"PointText",initialize:function(){dt.apply(this,arguments)},getPoint:function(){var u=this._matrix.getTranslation();return new A(u.x,u.y,this,"setPoint")},setPoint:function(){var u=v.read(arguments);this.translate(u.subtract(this._matrix.getTranslation()))},_draw:function(u,d,m){if(this._content){this._setStyles(u,d,m);var _=this._lines,S=this._style,k=S.hasFill(),I=S.hasStroke(),L=S.getLeading(),N=u.shadowColor;u.font=S.getFontStyle(),u.textAlign=S.getJustification();for(var q=0,W=_.length;q<W;q++){u.shadowColor=N;var K=_[q];k&&(u.fillText(K,0,0),u.shadowColor="rgba(0,0,0,0)"),I&&u.strokeText(K,0,0),u.translate(0,L)}}},_getBounds:function(u,d){var m=this._style,_=this._lines,S=_.length,k=m.getJustification(),I=m.getLeading(),L=this.getView().getTextWidth(m.getFontStyle(),_),N=0;k!=="left"&&(N-=L/(k==="center"?2:1));var q=new T(N,S?-.75*I:0,L,S*I);return u?u._transformBounds(q,q):q}}),ut=r.extend(new function(){var u={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},d={},m={transparent:[0,0,0,0]},_;function S(L){var N=L.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||L.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),q="rgb",W;if(N){var K=N[4]?4:3;W=new Array(K);for(var G=0;G<K;G++){var U=N[G+1];W[G]=parseInt(U.length==1?U+U:U,16)/255}}else if(N=L.match(/^(rgb|hsl)a?\((.*)\)$/)){q=N[1],W=N[2].trim().split(/[,\s]+/g);for(var ae=q==="hsl",G=0,Q=Math.min(W.length,4);G<Q;G++){var se=W[G],U=parseFloat(se);if(ae)if(G===0){var Y=se.match(/([a-z]*)$/)[1];U*={turn:360,rad:180/Math.PI,grad:.9}[Y]||1}else G<3&&(U/=100);else G<3&&(U/=/%$/.test(se)?100:255);W[G]=U}}else{var ee=m[L];if(!ee)if(n){_||(_=$e.getContext(1,1,{willReadFrequently:!0}),_.globalCompositeOperation="copy"),_.fillStyle="rgba(0,0,0,0)",_.fillStyle=L,_.fillRect(0,0,1,1);var F=_.getImageData(0,0,1,1).data;ee=m[L]=[F[0]/255,F[1]/255,F[2]/255]}else ee=[0,0,0];W=ee.slice()}return[q,W]}var k=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],I={"rgb-hsb":function(L,N,q){var W=Math.max(L,N,q),K=Math.min(L,N,q),G=W-K,U=G===0?0:(W==L?(N-q)/G+(N<q?6:0):W==N?(q-L)/G+2:(L-N)/G+4)*60;return[U,W===0?0:G/W,W]},"hsb-rgb":function(L,N,q){L=(L/60%6+6)%6;var K=Math.floor(L),W=L-K,K=k[K],G=[q,q*(1-N),q*(1-N*W),q*(1-N*(1-W))];return[G[K[0]],G[K[1]],G[K[2]]]},"rgb-hsl":function(L,N,q){var W=Math.max(L,N,q),K=Math.min(L,N,q),G=W-K,U=G===0,ae=U?0:(W==L?(N-q)/G+(N<q?6:0):W==N?(q-L)/G+2:(L-N)/G+4)*60,Q=(W+K)/2,se=U?0:Q<.5?G/(W+K):G/(2-W-K);return[ae,se,Q]},"hsl-rgb":function(L,N,q){if(L=(L/360%1+1)%1,N===0)return[q,q,q];for(var W=[L+1/3,L,L-1/3],K=q<.5?q*(1+N):q+N-q*N,G=2*q-K,U=[],ae=0;ae<3;ae++){var Q=W[ae];Q<0&&(Q+=1),Q>1&&(Q-=1),U[ae]=6*Q<1?G+(K-G)*6*Q:2*Q<1?K:3*Q<2?G+(K-G)*(2/3-Q)*6:G}return U},"rgb-gray":function(L,N,q){return[L*.2989+N*.587+q*.114]},"gray-rgb":function(L){return[L,L,L]},"gray-hsb":function(L){return[0,0,L]},"gray-hsl":function(L){return[0,0,L]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return r.each(u,function(L,N){d[N]=[],r.each(L,function(q,W){var K=r.capitalize(q),G=/^(hue|saturation)$/.test(q),U=d[N][W]=N==="gradient"?q==="gradient"?function(ae){var Q=this._components[0];return ae=Wt.read(Array.isArray(ae)?ae:arguments,0,{readNull:!0}),Q!==ae&&(Q&&Q._removeOwner(this),ae&&ae._addOwner(this)),ae}:function(){return v.read(arguments,0,{readNull:q==="highlight",clone:!0})}:function(ae){return ae==null||isNaN(ae)?0:+ae};this["get"+K]=function(){return this._type===N||G&&/^hs[bl]$/.test(this._type)?this._components[W]:this._convert(N)[W]},this["set"+K]=function(ae){this._type!==N&&!(G&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(N),this._properties=u[N],this._type=N),this._components[W]=U.call(this,ae),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function L(N){var q=arguments,W=this.__read,K=0,G,U,ae,Q;Array.isArray(N)&&(q=N,N=q[0]);var se=N!=null&&typeof N;if(se==="string"&&N in u&&(G=N,N=q[1],Array.isArray(N)?(U=N,ae=q[2]):(W&&(K=1),q=r.slice(q,1),se=typeof N)),!U){if(Q=se==="number"?q:se==="object"&&N.length!=null?N:null,Q){G||(G=Q.length>=3?"rgb":"gray");var Y=u[G].length;ae=Q[Y],W&&(K+=Q===arguments?Y+(ae!=null?1:0):1),Q.length>Y&&(Q=r.slice(Q,0,Y))}else if(se==="string"){var ee=S(N);G=ee[0],U=ee[1],U.length===4&&(ae=U[3],U.length--)}else if(se==="object")if(N.constructor===L){if(G=N._type,U=N._components.slice(),ae=N._alpha,G==="gradient")for(var F=1,J=U.length;F<J;F++){var re=U[F];re&&(U[F]=re.clone())}}else if(N.constructor===Wt)G="gradient",Q=q;else{G="hue"in N?"lightness"in N?"hsl":"hsb":"gradient"in N||"stops"in N||"radial"in N?"gradient":"gray"in N?"gray":"rgb";var ce=u[G],ne=d[G];this._components=U=[];for(var F=0,J=ce.length;F<J;F++){var ye=N[ce[F]];ye==null&&!F&&G==="gradient"&&"stops"in N&&(ye={stops:N.stops,radial:N.radial}),ye=ne[F].call(this,ye),ye!=null&&(U[F]=ye)}ae=N.alpha}W&&G&&(K=1)}if(this._type=G||"rgb",!U){this._components=U=[];for(var ne=d[this._type],F=0,J=ne.length;F<J;F++){var ye=ne[F].call(this,Q&&Q[F]);ye!=null&&(U[F]=ye)}}return this._components=U,this._properties=u[this._type],this._alpha=ae,W&&(this.__read=K),this},set:"#initialize",_serialize:function(L,N){var q=this.getComponents();return r.serialize(/^(gray|rgb)$/.test(this._type)?q:[this._type].concat(q),L,!0,N)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(L){var N;return this._type===L?this._components.slice():(N=I[this._type+"-"+L])?N.apply(this,this._components):I["rgb-"+L].apply(this,I[this._type+"-rgb"].apply(this,this._components))},convert:function(L){return new ut(L,this._convert(L),this._alpha)},getType:function(){return this._type},setType:function(L){this._components=this._convert(L),this._properties=u[L],this._type=L},getComponents:function(){var L=this._components.slice();return this._alpha!=null&&L.push(this._alpha),L},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(L){this._alpha=L==null?null:Math.min(Math.max(L,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(L){var N=r.isPlainValue(L,!0)?ut.read(arguments):L;return N===this||N&&this._class===N._class&&this._type===N._type&&this.getAlpha()===N.getAlpha()&&r.equals(this._components,N._components)||!1},toString:function(){for(var L=this._properties,N=[],q=this._type==="gradient",W=c.instance,K=0,G=L.length;K<G;K++){var U=this._components[K];U!=null&&N.push(L[K]+": "+(q?U:W.number(U)))}return this._alpha!=null&&N.push("alpha: "+W.number(this._alpha)),"{ "+N.join(", ")+" }"},toCSS:function(L){var N=this._convert("rgb"),q=L||this._alpha==null?1:this._alpha;function W(K){return Math.round((K<0?0:K>1?1:K)*255)}return N=[W(N[0]),W(N[1]),W(N[2])],q<1&&N.push(q<0?0:q),L?"#"+((1<<24)+(N[0]<<16)+(N[1]<<8)+N[2]).toString(16).slice(1):(N.length==4?"rgba(":"rgb(")+N.join(",")+")"},toCanvasStyle:function(L,N){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var q=this._components,W=q[0],K=W._stops,G=q[1],U=q[2],ae=q[3],Q=N&&N.inverted(),se;if(Q&&(G=Q._transformPoint(G),U=Q._transformPoint(U),ae&&(ae=Q._transformPoint(ae))),W._radial){var Y=U.getDistance(G);if(ae){var ee=ae.subtract(G);ee.getLength()>Y&&(ae=G.add(ee.normalize(Y-.1)))}var F=ae||G;se=L.createRadialGradient(F.x,F.y,0,G.x,G.y,Y)}else se=L.createLinearGradient(G.x,G.y,U.x,U.y);for(var J=0,re=K.length;J<re;J++){var ce=K[J],ne=ce._offset;se.addColorStop(ne??J/(re-1),ce._color.toCanvasStyle())}return this._canvasStyle=se},transform:function(L){if(this._type==="gradient"){for(var N=this._components,q=1,W=N.length;q<W;q++){var K=N[q];L._transformPoint(K,K,!0)}this._changed()}},statics:{_types:u,random:function(){var L=Math.random;return new ut(L(),L(),L())},_setOwner:function(L,N,q){return L&&(L._owner&&N&&L._owner!==N&&(L=L.clone()),!L._owner^!N&&(L._owner=N||null,L._setter=q||null)),L}}})},new function(){var u={add:function(d,m){return d+m},subtract:function(d,m){return d-m},multiply:function(d,m){return d*m},divide:function(d,m){return d/m}};return r.each(u,function(d,m){this[m]=function(_){_=ut.read(arguments);for(var S=this._type,k=this._components,I=_._convert(S),L=0,N=k.length;L<N;L++)I[L]=d(k[L],I[L]);return new ut(S,I,this._alpha!=null?d(this._alpha,_.getAlpha()):null)}},{})}),Wt=r.extend({_class:"Gradient",initialize:function(d,m){this._id=g.get(),d&&r.isPlainObject(d)&&(this.set(d),d=m=null),this._stops==null&&this.setStops(d||["white","black"]),this._radial==null&&this.setRadial(typeof m=="string"&&m==="radial"||m||!1)},_serialize:function(u,d){return d.add(this,function(){return r.serialize([this._stops,this._radial],u,!0,d)})},_changed:function(){for(var u=0,d=this._owners&&this._owners.length;u<d;u++)this._owners[u]._changed()},_addOwner:function(u){this._owners||(this._owners=[]),this._owners.push(u)},_removeOwner:function(u){var d=this._owners?this._owners.indexOf(u):-1;d!=-1&&(this._owners.splice(d,1),this._owners.length||(this._owners=t))},clone:function(){for(var u=[],d=0,m=this._stops.length;d<m;d++)u[d]=this._stops[d].clone();return new Wt(u,this._radial)},getStops:function(){return this._stops},setStops:function(u){if(u.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var d=this._stops;if(d)for(var m=0,_=d.length;m<_;m++)d[m]._owner=t;d=this._stops=Nt.readList(u,0,{clone:!0});for(var m=0,_=d.length;m<_;m++)d[m]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(u){this._radial=u,this._changed()},equals:function(u){if(u===this)return!0;if(u&&this._class===u._class){var d=this._stops,m=u._stops,_=d.length;if(_===m.length){for(var S=0;S<_;S++)if(!d[S].equals(m[S]))return!1;return!0}}return!1}}),Nt=r.extend({_class:"GradientStop",initialize:function(d,m){var _=d,S=m;typeof d=="object"&&m===t&&(Array.isArray(d)&&typeof d[0]!="number"?(_=d[0],S=d[1]):("color"in d||"offset"in d||"rampPoint"in d)&&(_=d.color,S=d.offset||d.rampPoint||0)),this.setColor(_),this.setOffset(S)},clone:function(){return new Nt(this._color.clone(),this._offset)},_serialize:function(u,d){var m=this._color,_=this._offset;return r.serialize(_==null?[m]:[m,_],u,!0,d)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(u){this._offset=u,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){ut._setOwner(this._color,null),this._color=ut._setOwner(ut.read(arguments,0),this,"setColor"),this._changed()},equals:function(u){return u===this||u&&this._class===u._class&&this._color.equals(u._color)&&this._offset==u._offset||!1}}),ci=r.extend(new function(){var u={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new v,selectedColor:null},d=r.set({},u,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),m=r.set({},d,{fillColor:new ut}),_={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},S={beans:!0},k={_class:"Style",beans:!0,initialize:function(L,N,q){this._values={},this._owner=N,this._project=N&&N._project||q||Xt.project,this._defaults=!N||N instanceof Z?d:N instanceof dt?m:u,L&&this.set(L)}};return r.each(d,function(I,L){var N=/Color$/.test(L),q=L==="shadowOffset",W=r.capitalize(L),K=_[L],G="set"+W,U="get"+W;k[G]=function(ae){var Q=this._owner,se=Q&&Q._children,Y=se&&se.length>0&&!(Q instanceof et);if(Y)for(var ee=0,F=se.length;ee<F;ee++)se[ee]._style[G](ae);if((L==="selectedColor"||!Y)&&L in this._defaults){var J=this._values[L];J!==ae&&(N&&(J&&(ut._setOwner(J,null),J._canvasStyle=null),ae&&ae.constructor===ut&&(ae=ut._setOwner(ae,Q,Y&&G))),this._values[L]=ae,Q&&Q._changed(K||129))}},k[U]=function(ae){var Q=this._owner,se=Q&&Q._children,Y=se&&se.length>0&&!(Q instanceof et),ee;if(Y&&!ae)for(var F=0,J=se.length;F<J;F++){var re=se[F]._style[U]();if(!F)ee=re;else if(!r.equals(ee,re))return t}else if(L in this._defaults){var ee=this._values[L];if(ee===t)ee=this._defaults[L],ee&&ee.clone&&(ee=ee.clone());else{var ce=N?ut:q?v:null;ce&&!(ee&&ee.constructor===ce)&&(this._values[L]=ee=ce.read([ee],0,{readNull:!0,clone:!0}))}}return ee&&N&&(ee=ut._setOwner(ee,Q,Y&&G)),ee},S[U]=function(ae){return this._style[U](ae)},S[G]=function(ae){this._style[G](ae)}}),r.each({Font:"FontFamily",WindingRule:"FillRule"},function(I,L){var N="get"+L,q="set"+L;k[N]=S[N]="#get"+I,k[q]=S[q]="#set"+I}),x.inject(S),k},{set:function(u){var d=u instanceof ci,m=d?u._values:u;if(m){for(var _ in m)if(_ in this._defaults){var S=m[_];this[_]=S&&d&&S.clone?S.clone():S}}},equals:function(u){function d(m,_,S){var k=m._values,I=_._values,L=_._defaults;for(var N in k){var q=k[N],W=I[N];if(!(S&&N in I)&&!r.equals(q,W===t?L[N]:W))return!1}return!0}return u===this||u&&this._class===u._class&&d(this,u)&&d(u,this,!0)||!1},_dispose:function(){var u;u=this.getFillColor(),u&&(u._canvasStyle=null),u=this.getStrokeColor(),u&&(u._canvasStyle=null),u=this.getShadowColor(),u&&(u._canvasStyle=null)},hasFill:function(){var u=this.getFillColor();return!!u&&u.alpha>0},hasStroke:function(){var u=this.getStrokeColor();return!!u&&u.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var u=this.getShadowColor();return!!u&&u.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var u=this.getFontSize();return this.getFontWeight()+" "+u+(/[a-z]/i.test(u+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function u(){var d=u.base.call(this),m=this.getFontSize();return/pt|em|%|px/.test(m)&&(m=this.getView().getPixelSize(m)),d??m*1.2}}),Yt=new function(){function u(d,m,_,S){for(var k=["","webkit","moz","Moz","ms","o"],I=m[0].toUpperCase()+m.substring(1),L=0;L<6;L++){var N=k[L],q=N?N+I:m;if(q in d){if(_)d[q]=S;else return d[q];break}}}return{getStyles:function(d){var m=d&&d.nodeType!==9?d.ownerDocument:d,_=m&&m.defaultView;return _&&_.getComputedStyle(d,"")},getBounds:function(d,m){var _=d.ownerDocument,S=_.body,k=_.documentElement,I;try{I=d.getBoundingClientRect()}catch{I={left:0,top:0,width:0,height:0}}var L=I.left-(k.clientLeft||S.clientLeft||0),N=I.top-(k.clientTop||S.clientTop||0);if(!m){var q=_.defaultView;L+=q.pageXOffset||k.scrollLeft||S.scrollLeft,N+=q.pageYOffset||k.scrollTop||S.scrollTop}return new T(L,N,I.width,I.height)},getViewportBounds:function(d){var m=d.ownerDocument,_=m.defaultView,S=m.documentElement;return new T(0,0,_.innerWidth||S.clientWidth,_.innerHeight||S.clientHeight)},getOffset:function(d,m){return Yt.getBounds(d,m).getPoint()},getSize:function(d){return Yt.getBounds(d,!0).getSize()},isInvisible:function(d){return Yt.getSize(d).equals(new P(0,0))},isInView:function(d){return!Yt.isInvisible(d)&&Yt.getViewportBounds(d).intersects(Yt.getBounds(d,!0))},isInserted:function(d){return s.body.contains(d)},getPrefixed:function(d,m){return d&&u(d,m)},setPrefixed:function(d,m,_){if(typeof m=="object")for(var S in m)u(d,S,!0,m[S]);else u(d,m,!0,_)}}},Pe={add:function(u,d){if(u)for(var m in d)for(var _=d[m],S=m.split(/[\s,]+/g),k=0,I=S.length;k<I;k++){var L=S[k],N=u===s&&(L==="touchstart"||L==="touchmove")?{passive:!1}:!1;u.addEventListener(L,_,N)}},remove:function(u,d){if(u)for(var m in d)for(var _=d[m],S=m.split(/[\s,]+/g),k=0,I=S.length;k<I;k++)u.removeEventListener(S[k],_,!1)},getPoint:function(u){var d=u.targetTouches?u.targetTouches.length?u.targetTouches[0]:u.changedTouches[0]:u;return new v(d.pageX||d.clientX+s.documentElement.scrollLeft,d.pageY||d.clientY+s.documentElement.scrollTop)},getTarget:function(u){return u.target||u.srcElement},getRelatedTarget:function(u){return u.relatedTarget||u.toElement},getOffset:function(u,d){return Pe.getPoint(u).subtract(Yt.getOffset(d||Pe.getTarget(u)))}};Pe.requestAnimationFrame=new function(){var u=Yt.getPrefixed(n,"requestAnimationFrame"),d=!1,m=[],_;function S(){var k=m;m=[];for(var I=0,L=k.length;I<L;I++)k[I]();d=u&&m.length,d&&u(S)}return function(k){m.push(k),u?d||(u(S),d=!0):_||(_=setInterval(S,1e3/60))}};var pe=r.extend(a,{_class:"View",initialize:function u(d,m){function _(K){return m[K]||parseInt(m.getAttribute(K),10)}function S(){var K=Yt.getSize(m);return K.isNaN()||K.isZero()?new P(_("width"),_("height")):K}var k;if(n&&m){this._id=m.getAttribute("id"),this._id==null&&m.setAttribute("id",this._id="paper-view-"+u._id++),Pe.add(m,this._viewEvents);var I="none";if(Yt.setPrefixed(m.style,{userDrag:I,userSelect:I,touchCallout:I,contentZooming:I,tapHighlightColor:"rgba(0,0,0,0)"}),o.hasAttribute(m,"resize")){var L=this;Pe.add(n,this._windowEvents={resize:function(){L.setViewSize(S())}})}if(k=S(),o.hasAttribute(m,"stats")&&typeof Stats<"u"){this._stats=new Stats;var N=this._stats.domElement,q=N.style,W=Yt.getOffset(m);q.position="absolute",q.left=W.x+"px",q.top=W.y+"px",s.body.appendChild(N)}}else k=new P(m),m=null;this._project=d,this._scope=d._scope,this._element=m,this._pixelRatio||(this._pixelRatio=n&&n.devicePixelRatio||1),this._setElementSize(k.width,k.height),this._viewSize=k,u._views.push(this),u._viewsById[this._id]=this,(this._matrix=new M)._owner=this,u._focused||(u._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Xt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;pe._focused===this&&(pe._focused=null),pe._views.splice(pe._views.indexOf(this),1),delete pe._viewsById[this._id];var u=this._project;return u._view===this&&(u._view=null),Pe.remove(this._element,this._viewEvents),Pe.remove(n,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:r.each(x._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(u){this[u]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(u){this._autoUpdate=u,u&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var u=this;Pe.requestAnimationFrame(function(){if(u._requested=!1,u._animate){u.requestUpdate();var d=u._element;(!Yt.getPrefixed(s,"hidden")||o.getAttribute(d,"keepalive")==="true")&&Yt.isInView(d)&&u._handleFrame()}u._autoUpdate&&u.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Xt=this._scope;var u=Date.now()/1e3,d=this._last?u-this._last:0;this._last=u,this.emit("frame",new r({delta:d,time:this._time+=d,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(u,d){var m=this._frameItems;d?(m[u._id]={item:u,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete m[u._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(u){for(var d in this._frameItems){var m=this._frameItems[d];m.item.emit("frame",new r(u,{time:m.time+=u.delta,count:m.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=t},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var u=this._viewSize;return new w(u.width,u.height,this,"setViewSize")},setViewSize:function(){var u=P.read(arguments),d=u.subtract(this._viewSize);d.isZero()||(this._setElementSize(u.width,u.height),this._viewSize.set(u),this._changed(),this.emit("resize",{size:u,delta:d}),this._autoUpdate&&this.update())},_setElementSize:function(u,d){var m=this._element;m&&(m.width!==u&&(m.width=u),m.height!==d&&(m.height=d))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new T(new v,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Yt.isInView(this._element)},isInserted:function(){return Yt.isInserted(this._element)},getPixelSize:function(u){var d=this._element,m;if(d){var _=d.parentNode,S=s.createElement("div");S.style.fontSize=u,_.appendChild(S),m=parseFloat(Yt.getStyles(S).fontSize),_.removeChild(S)}else m=parseFloat(m);return m},getTextWidth:function(u,d){return 0}},r.each(["rotate","scale","shear","skew"],function(u){var d=u==="rotate";this[u]=function(){var m=arguments,_=(d?r:v).read(m),S=v.read(m,0,{readNull:!0});return this.transform(new M()[u](_,S||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var u=new M;return this.transform(u.translate.apply(u,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var u=v.read(arguments);this.translate(this.getCenter().subtract(u))},getZoom:function(){var u=this._decompose().scaling;return(u.x+u.y)/2},setZoom:function(u){this.transform(new M().scale(u/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(u){var d=this.getRotation();d!=null&&u!=null&&this.rotate(u-d)},getScaling:function(){var u=this._decompose().scaling;return new A(u.x,u.y,this,"setScaling")},setScaling:function(){var u=this.getScaling(),d=v.read(arguments,0,{clone:!0,readNull:!0});u&&d&&this.scale(d.x/u.x,d.y/u.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var u=this._matrix;u.set.apply(u,arguments)},transform:function(u){this._matrix.append(u)},scrollBy:function(){this.translate(v.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(v.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(v.read(arguments))},getEventPoint:function(u){return this.viewToProject(Pe.getOffset(u,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(u,d){s&&typeof d=="string"&&(d=s.getElementById(d));var m=n?bt:pe;return new m(u,d)}}},new function(){if(!n)return;var u,d,m=!1,_=!1;function S(z){var j=Pe.getTarget(z);return j.getAttribute&&pe._viewsById[j.getAttribute("id")]}function k(){var z=pe._focused;if(!z||!z.isVisible()){for(var j=0,le=pe._views.length;j<le;j++)if((z=pe._views[j]).isVisible()){pe._focused=d=z;break}}}function I(z,j,le){z._handleMouseEvent("mousemove",j,le)}var L=n.navigator,N,q,W;L.pointerEnabled||L.msPointerEnabled?(N="pointerdown MSPointerDown",q="pointermove MSPointerMove",W="pointerup pointercancel MSPointerUp MSPointerCancel"):(N="touchstart",q="touchmove",W="touchend touchcancel","ontouchstart"in n&&L.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(N+=" mousedown",q+=" mousemove",W+=" mouseup"));var K={},G={mouseout:function(z){var j=pe._focused,le=Pe.getRelatedTarget(z);if(j&&(!le||le.nodeName==="HTML")){var xe=Pe.getOffset(z,j._element),Ce=xe.x,Ue=Math.abs,je=Ue(Ce),nt=1<<25,yt=je-nt;xe.x=Ue(yt)<je?yt*(Ce<0?-1:1):Ce,I(j,z,j.viewToProject(xe))}},scroll:k};K[N]=function(z){var j=pe._focused=S(z);m||(m=!0,j._handleMouseEvent("mousedown",z))},G[q]=function(z){var j=pe._focused;if(!_){var le=S(z);le?j!==le&&(j&&I(j,z),u||(u=j),j=pe._focused=d=le):d&&d===j&&(u&&!u.isInserted()&&(u=null),j=pe._focused=u,u=null,k())}j&&I(j,z)},G[N]=function(){_=!0},G[W]=function(z){var j=pe._focused;j&&m&&j._handleMouseEvent("mouseup",z),_=m=!1},Pe.add(s,G),Pe.add(n,{load:k});var U=!1,ae=!1,Q={doubleclick:"click",mousedrag:"mousemove"},se=!1,Y,ee,F,J,re,ce,ne,ye;function we(z,j,le,xe,Ce,Ue,je){var nt=!1,yt;function Vt(it,at){if(it.responds(at)){if(yt||(yt=new V(at,xe,Ce,j||it,Ue?Ce.subtract(Ue):null)),it.emit(at,yt)&&(U=!0,yt.prevented&&(ae=!0),yt.stopped))return nt=!0}else{var Tt=Q[at];if(Tt)return Vt(it,Tt)}}for(;z&&z!==je&&!Vt(z,le);)z=z._parent;return nt}function Ve(z,j,le,xe,Ce,Ue){return z._project.removeOn(le),ae=U=!1,re&&we(re,null,le,xe,Ce,Ue)||j&&j!==re&&!j.isDescendant(re)&&we(j,null,le==="mousedrag"?"mousemove":le,xe,Ce,Ue,re)||we(z,re||j||z,le,xe,Ce,Ue)}var Be={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:K,_handleMouseEvent:function(z,j,le){var xe=this._itemEvents,Ce=xe.native[z],Ue=z==="mousemove",je=this._scope.tool,nt=this;function yt(Rt){return xe.virtual[Rt]||nt.responds(Rt)||je&&je.responds(Rt)}Ue&&m&&yt("mousedrag")&&(z="mousedrag"),le||(le=this.getEventPoint(j));var Vt=this.getBounds().contains(le),it=Ce&&Vt&&nt._project.hitTest(le,{tolerance:0,fill:!0,stroke:!0}),at=it&&it.item||null,Tt=!1,At={};if(At[z.substr(5)]=!0,Ce&&at!==J&&(J&&we(J,null,"mouseleave",j,le),at&&we(at,null,"mouseenter",j,le),J=at),se^Vt&&(we(this,null,Vt?"mouseenter":"mouseleave",j,le),Tt=!0),(Vt||At.drag)&&!le.equals(ee)&&(Ve(this,at,Ue?z:"mousemove",j,le,ee),Tt=!0),se=Vt,At.down&&Vt||At.up&&Y){if(Ve(this,at,z,j,le,Y),At.down){if(ye=at===ce&&Date.now()-ne<300,F=ce=at,!ae&&at){for(var ft=at;ft&&!ft.responds("mousedrag");)ft=ft._parent;ft&&(re=at)}Y=le}else At.up&&(!ae&&at===F&&(ne=Date.now(),Ve(this,at,ye?"doubleclick":"click",j,le,Y),ye=!1),F=re=null);se=!1,Tt=!0}ee=le,Tt&&je&&(U=je._handleMouseEvent(z,j,le,At)||U),j.cancelable!==!1&&(U&&!At.move||At.down&&yt("mouseup"))&&j.preventDefault()},_handleKeyEvent:function(z,j,le,xe){var Ce=this._scope,Ue=Ce.tool,je;function nt(yt){yt.responds(z)&&(Xt=Ce,yt.emit(z,je=je||new Gt(z,j,le,xe)))}this.isVisible()&&(nt(this),Ue&&Ue.responds(z)&&nt(Ue))},_countItemEvent:function(z,j){var le=this._itemEvents,xe=le.native,Ce=le.virtual;for(var Ue in Be)xe[Ue]=(xe[Ue]||0)+(Be[Ue][z]||0)*j;Ce[z]=(Ce[z]||0)+j},statics:{updateFocus:k,_resetState:function(){m=_=U=se=!1,u=d=Y=ee=F=J=re=ce=ne=ye=null}}}}),bt=pe.extend({_class:"CanvasView",initialize:function(d,m){if(!(m instanceof n.HTMLCanvasElement)){var _=P.read(arguments,1);if(_.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+r.slice(arguments,1));m=$e.getCanvas(_)}var S=this._context=m.getContext("2d");if(S.save(),this._pixelRatio=1,!/^off|false$/.test(o.getAttribute(m,"hidpi"))){var k=n.devicePixelRatio||1,I=Yt.getPrefixed(S,"backingStorePixelRatio")||1;this._pixelRatio=k/I}pe.call(this,d,m),this._needsUpdate=!0},remove:function u(){return this._context.restore(),u.base.call(this)},_setElementSize:function u(d,m){var _=this._pixelRatio;if(u.base.call(this,d*_,m*_),_!==1){var S=this._element,k=this._context;if(!o.hasAttribute(S,"resize")){var I=S.style;I.width=d+"px",I.height=m+"px"}k.restore(),k.save(),k.scale(_,_)}},getContext:function(){return this._context},getPixelSize:function u(d){var m=Xt.agent,_;if(m&&m.firefox)_=u.base.call(this,d);else{var S=this._context,k=S.font;S.font=d+" serif",_=parseFloat(S.font),S.font=k}return _},getTextWidth:function(u,d){var m=this._context,_=m.font,S=0;m.font=u;for(var k=0,I=d.length;k<I;k++)S=Math.max(S,m.measureText(d[k]).width);return m.font=_,S},update:function(){if(!this._needsUpdate)return!1;var u=this._project,d=this._context,m=this._viewSize;return d.clearRect(0,0,m.width+1,m.height+1),u&&u.draw(d,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),wt=r.extend({_class:"Event",initialize:function(d){this.event=d,this.type=d&&d.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Ft.modifiers}}),Gt=wt.extend({_class:"KeyEvent",initialize:function(d,m,_,S){this.type=d,this.event=m,this.key=_,this.character=S},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Ft=new function(){var u={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},d={tab:"	",space:" ",enter:"\r"},m={},_={},S,k,I=new r({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var q=Xt&&Xt.agent;return q&&q.mac?this.meta:this.control}}});function L(q){var W=q.key||q.keyIdentifier;return W=/^U\+/.test(W)?String.fromCharCode(parseInt(W.substr(2),16)):/^Arrow[A-Z]/.test(W)?W.substr(5):W==="Unidentified"||W===t?String.fromCharCode(q.keyCode):W,u[W]||(W.length>1?r.hyphenate(W):W.toLowerCase())}function N(q,W,K,G){var U=pe._focused,ae;if(m[W]=q,q?_[W]=K:delete _[W],W.length>1&&(ae=r.camelize(W))in I){I[ae]=q;var Q=Xt&&Xt.agent;if(ae==="meta"&&Q&&Q.mac)if(q)S={};else{for(var se in S)se in _&&N(!1,se,S[se],G);S=null}}else q&&S&&(S[W]=K);U&&U._handleKeyEvent(q?"keydown":"keyup",G,W,K)}return Pe.add(s,{keydown:function(q){var W=L(q),K=Xt&&Xt.agent;W.length>1||K&&K.chrome&&(q.altKey||K.mac&&q.metaKey||!K.mac&&q.ctrlKey)?N(!0,W,d[W]||(W.length>1?"":W),q):k=W},keypress:function(q){if(k){var W=L(q),K=q.charCode,G=K>=32?String.fromCharCode(K):W.length>1?"":W;W!==k&&(W=G.toLowerCase()),N(!0,W,G,q),k=null}},keyup:function(q){var W=L(q);W in _&&N(!1,W,_[W],q)}}),Pe.add(n,{blur:function(q){for(var W in _)N(!1,W,_[W],q)}}),{modifiers:I,isDown:function(q){return!!m[q]}}},V=wt.extend({_class:"MouseEvent",initialize:function(d,m,_,S,k){this.type=d,this.event=m,this.point=_,this.target=S,this.delta=k},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),te=wt.extend({_class:"ToolEvent",_item:null,initialize:function(d,m,_){this.tool=d,this.type=m,this.event=_},_choosePoint:function(u,d){return u||(d?d.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(u){this._point=u},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(u){this._lastPoint=u},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(u){this._downPoint=u},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(u){this._middlePoint=u},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(u){this._delta=u},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(u){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=u},getItem:function(){if(!this._item){var u=this.tool._scope.project.hitTest(this.getPoint());if(u){for(var d=u.item,m=d._parent;/^(Group|CompoundPath)$/.test(m._class);)d=m,m=m._parent;this._item=d}}return this._item},setItem:function(u){this._item=u},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),fe=l.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(d){l.call(this),this._moveCount=-1,this._downCount=-1,this.set(d)},getMinDistance:function(){return this._minDistance},setMinDistance:function(u){this._minDistance=u,u!=null&&this._maxDistance!=null&&u>this._maxDistance&&(this._maxDistance=u)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(u){this._maxDistance=u,this._minDistance!=null&&u!=null&&u<this._minDistance&&(this._minDistance=u)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(u){this._minDistance=this._maxDistance=u},_handleMouseEvent:function(u,d,m,_){Xt=this._scope,_.drag&&!this.responds(u)&&(u="mousemove");var S=_.move||_.drag,k=this.responds(u),I=!1,L=this;function N(W,K){var G=m,U=S?L._point:L._downPoint||G;if(S){if(L._moveCount>=0&&G.equals(U))return!1;if(U&&(W!=null||K!=null)){var ae=G.subtract(U),Q=ae.getLength();if(Q<(W||0))return!1;K&&(G=U.add(ae.normalize(Math.min(Q,K))))}L._moveCount++}return L._point=G,L._lastPoint=U||G,_.down&&(L._moveCount=-1,L._downPoint=G,L._downCount++),!0}function q(){k&&(I=L.emit(u,new te(L,u,d))||I)}if(_.down)N(),q();else if(_.up)N(null,this._maxDistance),q();else if(k)for(;N(this._minDistance,this._maxDistance);)q();return I}}),_e=r.extend(a,{_class:"Tween",statics:{easings:new r({linear:function(u){return u},easeInQuad:function(u){return u*u},easeOutQuad:function(u){return u*(2-u)},easeInOutQuad:function(u){return u<.5?2*u*u:-1+2*(2-u)*u},easeInCubic:function(u){return u*u*u},easeOutCubic:function(u){return--u*u*u+1},easeInOutCubic:function(u){return u<.5?4*u*u*u:(u-1)*(2*u-2)*(2*u-2)+1},easeInQuart:function(u){return u*u*u*u},easeOutQuart:function(u){return 1- --u*u*u*u},easeInOutQuart:function(u){return u<.5?8*u*u*u*u:1-8*--u*u*u*u},easeInQuint:function(u){return u*u*u*u*u},easeOutQuint:function(u){return 1+--u*u*u*u*u},easeInOutQuint:function(u){return u<.5?16*u*u*u*u*u:1+16*--u*u*u*u*u}})},initialize:function u(d,m,_,S,k,I){this.object=d;var L=typeof k,N=L==="function";this.type=N?L:L==="string"?k:"linear",this.easing=N?k:u.easings[this.type],this.duration=S,this.running=!1,this._then=null,this._startTime=null;var q=m||_;this._keys=q?Object.keys(q):[],this._parsedKeys=this._parseKeys(this._keys),this._from=q&&this._getState(m),this._to=q&&this._getState(_),I!==!1&&this.start()},then:function(u){return this._then=u,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(u){if(this.running){u>=1&&(u=1,this.running=!1);for(var d=this.easing(u),m=this._keys,_=function(W){return typeof W=="function"?W(d,u):W},S=0,k=m&&m.length;S<k;S++){var I=m[S],L=_(this._from[I]),N=_(this._to[I]),q=L&&N&&L.__add&&N.__add?N.__subtract(L).__multiply(d).__add(L):(N-L)*d+L;this._setProperty(this._parsedKeys[I],q)}this.responds("update")&&this.emit("update",new r({progress:u,factor:d})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(u){var d=this._startTime,m=d?(u-d)/this.duration:0;d||(this._startTime=u),this.update(m)},_getState:function(u){for(var d=this._keys,m={},_=0,S=d.length;_<S;_++){var k=d[_],I=this._parsedKeys[k],L=this._getProperty(I),N;if(u){var q=this._resolveValue(L,u[k]);this._setProperty(I,q),N=this._getProperty(I),N=N&&N.clone?N.clone():N,this._setProperty(I,L)}else N=L&&L.clone?L.clone():L;m[k]=N}return m},_resolveValue:function(u,d){if(d){if(Array.isArray(d)&&d.length===2){var m=d[0];return m&&m.match&&m.match(/^[+\-\*\/]=/)?this._calculate(u,m[0],d[1]):d}else if(typeof d=="string"){var _=d.match(/^[+\-*/]=(.*)/);if(_){var S=JSON.parse(_[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(u,d[0],S)}}}return d},_calculate:function(u,d,m){return Xt.PaperScript.calculateBinary(u,d,m)},_parseKeys:function(u){for(var d={},m=0,_=u.length;m<_;m++){var S=u[m],k=S.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");d[S]=k.split("/")}return d},_getProperty:function(u,d){for(var m=this.object,_=0,S=u.length-(d||0);_<S&&m;_++)m=m[u[_]];return m},_setProperty:function(u,d){var m=this._getProperty(u,1);m&&(m[u[u.length-1]]=d)}}),ke={request:function(u){var d=new e.XMLHttpRequest;return d.open((u.method||"get").toUpperCase(),u.url,r.pick(u.async,!0)),u.mimeType&&d.overrideMimeType(u.mimeType),d.onload=function(){var m=d.status;m===0||m===200?u.onLoad&&u.onLoad.call(d,d.responseText):d.onerror()},d.onerror=function(){var m=d.status,_='Could not load "'+u.url+'" (Status: '+m+")";if(u.onError)u.onError(_,m);else throw new Error(_)},d.send(null)}},$e=r.exports.CanvasProvider={canvases:[],getCanvas:function(u,d,m){if(!n)return null;var _,S=!0;typeof u=="object"&&(d=u.height,u=u.width),this.canvases.length?_=this.canvases.pop():(_=s.createElement("canvas"),S=!1);var k=_.getContext("2d",m||{});if(!k)throw new Error("Canvas "+_+" is unable to provide a 2D context.");return _.width===u&&_.height===d?S&&k.clearRect(0,0,u+1,d+1):(_.width=u,_.height=d),k.save(),_},getContext:function(u,d,m){var _=this.getCanvas(u,d,m);return _?_.getContext("2d",m||{}):null},release:function(u){var d=u&&u.canvas?u.canvas:u;d&&d.getContext&&(d.getContext("2d").restore(),this.canvases.push(d))}},Xe=new function(){var u=Math.min,d=Math.max,m=Math.abs,_,S,k,I,L,N,q,W,K,G,U;function ae(re,ce,ne){return .2989*re+.587*ce+.114*ne}function Q(re,ce,ne,Ve){var we=Ve-ae(re,ce,ne);K=re+we,G=ce+we,U=ne+we;var Ve=ae(K,G,U),Be=u(K,G,U),z=d(K,G,U);if(Be<0){var j=Ve-Be;K=Ve+(K-Ve)*Ve/j,G=Ve+(G-Ve)*Ve/j,U=Ve+(U-Ve)*Ve/j}if(z>255){var le=255-Ve,xe=z-Ve;K=Ve+(K-Ve)*le/xe,G=Ve+(G-Ve)*le/xe,U=Ve+(U-Ve)*le/xe}}function se(re,ce,ne){return d(re,ce,ne)-u(re,ce,ne)}function Y(re,ce,ne,ye){var we=[re,ce,ne],Ve=d(re,ce,ne),Be=u(re,ce,ne),z;Be=Be===re?0:Be===ce?1:2,Ve=Ve===re?0:Ve===ce?1:2,z=u(Be,Ve)===0?d(Be,Ve)===1?2:1:0,we[Ve]>we[Be]?(we[z]=(we[z]-we[Be])*ye/(we[Ve]-we[Be]),we[Ve]=ye):we[z]=we[Ve]=0,we[Be]=0,K=we[0],G=we[1],U=we[2]}var ee={multiply:function(){K=L*_/255,G=N*S/255,U=q*k/255},screen:function(){K=L+_-L*_/255,G=N+S-N*S/255,U=q+k-q*k/255},overlay:function(){K=L<128?2*L*_/255:255-2*(255-L)*(255-_)/255,G=N<128?2*N*S/255:255-2*(255-N)*(255-S)/255,U=q<128?2*q*k/255:255-2*(255-q)*(255-k)/255},"soft-light":function(){var re=_*L/255;K=re+L*(255-(255-L)*(255-_)/255-re)/255,re=S*N/255,G=re+N*(255-(255-N)*(255-S)/255-re)/255,re=k*q/255,U=re+q*(255-(255-q)*(255-k)/255-re)/255},"hard-light":function(){K=_<128?2*_*L/255:255-2*(255-_)*(255-L)/255,G=S<128?2*S*N/255:255-2*(255-S)*(255-N)/255,U=k<128?2*k*q/255:255-2*(255-k)*(255-q)/255},"color-dodge":function(){K=L===0?0:_===255?255:u(255,255*L/(255-_)),G=N===0?0:S===255?255:u(255,255*N/(255-S)),U=q===0?0:k===255?255:u(255,255*q/(255-k))},"color-burn":function(){K=L===255?255:_===0?0:d(0,255-(255-L)*255/_),G=N===255?255:S===0?0:d(0,255-(255-N)*255/S),U=q===255?255:k===0?0:d(0,255-(255-q)*255/k)},darken:function(){K=L<_?L:_,G=N<S?N:S,U=q<k?q:k},lighten:function(){K=L>_?L:_,G=N>S?N:S,U=q>k?q:k},difference:function(){K=L-_,K<0&&(K=-K),G=N-S,G<0&&(G=-G),U=q-k,U<0&&(U=-U)},exclusion:function(){K=L+_*(255-L-L)/255,G=N+S*(255-N-N)/255,U=q+k*(255-q-q)/255},hue:function(){Y(_,S,k,se(L,N,q)),Q(K,G,U,ae(L,N,q))},saturation:function(){Y(L,N,q,se(_,S,k)),Q(K,G,U,ae(L,N,q))},luminosity:function(){Q(L,N,q,ae(_,S,k))},color:function(){Q(_,S,k,ae(L,N,q))},add:function(){K=u(L+_,255),G=u(N+S,255),U=u(q+k,255)},subtract:function(){K=d(L-_,0),G=d(N-S,0),U=d(q-k,0)},average:function(){K=(L+_)/2,G=(N+S)/2,U=(q+k)/2},negation:function(){K=255-m(255-_-L),G=255-m(255-S-N),U=255-m(255-k-q)}},F=this.nativeModes=r.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(re){this[re]=!0},{}),J=$e.getContext(1,1,{willReadFrequently:!0});J&&(r.each(ee,function(re,ce){var ne=ce==="darken",ye=!1;J.save();try{J.fillStyle=ne?"#300":"#a00",J.fillRect(0,0,1,1),J.globalCompositeOperation=ce,J.globalCompositeOperation===ce&&(J.fillStyle=ne?"#a00":"#300",J.fillRect(0,0,1,1),ye=J.getImageData(0,0,1,1).data[0]!==ne?170:51)}catch{}J.restore(),F[ce]=ye}),$e.release(J)),this.process=function(re,ce,ne,ye,we){var Ve=ce.canvas,Be=re==="normal";if(Be||F[re])ne.save(),ne.setTransform(1,0,0,1,0,0),ne.globalAlpha=ye,Be||(ne.globalCompositeOperation=re),ne.drawImage(Ve,we.x,we.y),ne.restore();else{var z=ee[re];if(!z)return;for(var j=ne.getImageData(we.x,we.y,Ve.width,Ve.height),le=j.data,xe=ce.getImageData(0,0,Ve.width,Ve.height).data,Ce=0,Ue=le.length;Ce<Ue;Ce+=4){_=xe[Ce],L=le[Ce],S=xe[Ce+1],N=le[Ce+1],k=xe[Ce+2],q=le[Ce+2],I=xe[Ce+3],W=le[Ce+3],z();var je=I*ye/255,nt=1-je;le[Ce]=je*K+nt*L,le[Ce+1]=je*G+nt*N,le[Ce+2]=je*U+nt*q,le[Ce+3]=I*ye+nt*W}ne.putImageData(j,we.x,we.y)}}},rt=new function(){var u="http://www.w3.org/2000/svg",d="http://www.w3.org/2000/xmlns",m="http://www.w3.org/1999/xlink",_={href:m,xlink:d,xmlns:d+"/","xmlns:xlink":d+"/"};function S(L,N,q){return I(s.createElementNS(u,L),N,q)}function k(L,N){var q=_[N],W=q?L.getAttributeNS(q,N):L.getAttribute(N);return W==="null"?null:W}function I(L,N,q){for(var W in N){var K=N[W],G=_[W];typeof K=="number"&&q&&(K=q.number(K)),G?L.setAttributeNS(G,W,K):L.setAttribute(W,K)}return L}return{svg:u,xmlns:d,xlink:m,create:S,get:k,set:I}},Dn=r.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(u,d){return!d&&(u instanceof st||u instanceof $||u instanceof dt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(u,d){var m=r.capitalize(d),_=u[2];this[d]={type:u[1],property:d,attribute:u[0],toSVG:_,fromSVG:_&&r.each(_,function(S,k){this[S]=k},{}),exportFilter:u[3],get:"get"+m,set:"set"+m}},{});new function(){var u;function d(ee,F,J){var re=new r,ce=ee.getTranslation();if(F){var ne;ee.isInvertible()?(ee=ee._shiftless(),ne=ee._inverseTransform(ce),ce=null):ne=new v,re[J?"cx":"x"]=ne.x,re[J?"cy":"y"]=ne.y}if(!ee.isIdentity()){var ye=ee.decompose();if(ye){var we=[],Ve=ye.rotation,Be=ye.scaling,z=ye.skewing;ce&&!ce.isZero()&&we.push("translate("+u.point(ce)+")"),Ve&&we.push("rotate("+u.number(Ve)+")"),(!f.isZero(Be.x-1)||!f.isZero(Be.y-1))&&we.push("scale("+u.point(Be)+")"),z.x&&we.push("skewX("+u.number(z.x)+")"),z.y&&we.push("skewY("+u.number(z.y)+")"),re.transform=we.join(" ")}else re.transform="matrix("+ee.getValues().join(",")+")"}return re}function m(ee,F){for(var J=d(ee._matrix),re=ee._children,ce=rt.create("g",J,u),ne=0,ye=re.length;ne<ye;ne++){var we=re[ne],Ve=se(we,F);if(Ve)if(we.isClipMask()){var Be=rt.create("clipPath");Be.appendChild(Ve),ae(we,Be,"clip"),rt.set(ce,{"clip-path":"url(#"+Be.id+")"})}else ce.appendChild(Ve)}return ce}function _(ee,F){var J=d(ee._matrix,!0),re=ee.getSize(),ce=ee.getImage();return J.x-=re.width/2,J.y-=re.height/2,J.width=re.width,J.height=re.height,J.href=F.embedImages==!1&&ce&&ce.src||ee.toDataURL(),rt.create("image",J,u)}function S(ee,F){var J=F.matchShapes;if(J){var re=ee.toShape(!1);if(re)return k(re)}var ce=ee._segments,ne=ce.length,ye,we=d(ee._matrix);if(J&&ne>=2&&!ee.hasHandles())if(ne>2){ye=ee._closed?"polygon":"polyline";for(var Ve=[],Be=0;Be<ne;Be++)Ve.push(u.point(ce[Be]._point));we.points=Ve.join(" ")}else{ye="line";var z=ce[0]._point,j=ce[1]._point;we.set({x1:z.x,y1:z.y,x2:j.x,y2:j.y})}else ye="path",we.d=ee.getPathData(null,F.precision);return rt.create(ye,we,u)}function k(ee){var F=ee._type,J=ee._radius,re=d(ee._matrix,!0,F!=="rectangle");if(F==="rectangle"){F="rect";var ce=ee._size,ne=ce.width,ye=ce.height;re.x-=ne/2,re.y-=ye/2,re.width=ne,re.height=ye,J.isZero()&&(J=null)}return J&&(F==="circle"?re.r=J:(re.rx=J.width,re.ry=J.height)),rt.create(F,re,u)}function I(ee,F){var J=d(ee._matrix),re=ee.getPathData(null,F.precision);return re&&(J.d=re),rt.create("path",J,u)}function L(ee,F){var J=d(ee._matrix,!0),re=ee._definition,ce=U(re,"symbol"),ne=re._item,ye=ne.getStrokeBounds();return ce||(ce=rt.create("symbol",{viewBox:u.rectangle(ye)}),ce.appendChild(se(ne,F)),ae(re,ce,"symbol")),J.href="#"+ce.id,J.x+=ye.x,J.y+=ye.y,J.width=ye.width,J.height=ye.height,J.overflow="visible",rt.create("use",J,u)}function N(ee){var F=U(ee,"color");if(!F){var J=ee.getGradient(),re=J._radial,ce=ee.getOrigin(),ne=ee.getDestination(),ye;if(re){ye={cx:ce.x,cy:ce.y,r:ce.getDistance(ne)};var we=ee.getHighlight();we&&(ye.fx=we.x,ye.fy=we.y)}else ye={x1:ce.x,y1:ce.y,x2:ne.x,y2:ne.y};ye.gradientUnits="userSpaceOnUse",F=rt.create((re?"radial":"linear")+"Gradient",ye,u);for(var Ve=J._stops,Be=0,z=Ve.length;Be<z;Be++){var j=Ve[Be],le=j._color,xe=le.getAlpha(),Ce=j._offset;ye={offset:Ce??Be/(z-1)},le&&(ye["stop-color"]=le.toCSS(!0)),xe<1&&(ye["stop-opacity"]=xe),F.appendChild(rt.create("stop",ye,u))}ae(ee,F,"color")}return"url(#"+F.id+")"}function q(ee){var F=rt.create("text",d(ee._matrix,!0),u);return F.textContent=ee._content,F}var W={Group:m,Layer:m,Raster:_,Path:S,Shape:k,CompoundPath:I,SymbolItem:L,PointText:q};function K(ee,F,J,re){var ce={},ne=!re&&ee.getParent(),ye=[];return ee._name!=null&&(ce.id=ee._name),r.each(Dn,function(we){var Ve=we.get,Be=we.type,z=ee[Ve]();if(we.exportFilter?we.exportFilter(ee,z):J.reduceAttributes==!1||!ne||!r.equals(ne[Ve](),z)){if(Be==="color"&&z!=null){var j=z.getAlpha();j<1&&(ce[we.attribute+"-opacity"]=j)}Be==="style"?ye.push(we.attribute+": "+z):ce[we.attribute]=z==null?"none":Be==="color"?z.gradient?N(z):z.toCSS(!0):Be==="array"?z.join(","):Be==="lookup"?we.toSVG[z]:z}}),ye.length&&(ce.style=ye.join(";")),ce.opacity===1&&delete ce.opacity,ee._visible||(ce.visibility="hidden"),rt.set(F,ce,u)}var G;function U(ee,F){return G||(G={ids:{},svgs:{}}),ee&&G.svgs[F+"-"+(ee._id||ee.__id||(ee.__id=g.get("svg")))]}function ae(ee,F,J){G||U();var re=G.ids[J]=(G.ids[J]||0)+1;F.id=J+"-"+re,G.svgs[J+"-"+(ee._id||ee.__id)]=F}function Q(ee,F){var J=ee,re=null;if(G){J=ee.nodeName.toLowerCase()==="svg"&&ee;for(var ce in G.svgs)re||(J||(J=rt.create("svg"),J.appendChild(ee)),re=J.insertBefore(rt.create("defs"),J.firstChild)),re.appendChild(G.svgs[ce]);G=null}return F.asString?new e.XMLSerializer().serializeToString(J):J}function se(ee,F,J){var re=W[ee._class],ce=re&&re(ee,F);if(ce){var ne=F.onExport;ne&&(ce=ne(ee,ce,F)||ce);var ye=JSON.stringify(ee._data);ye&&ye!=="{}"&&ye!=="null"&&ce.setAttribute("data-paper-data",ye)}return ce&&K(ee,ce,F,J)}function Y(ee){return ee||(ee={}),u=new c(ee.precision),ee}x.inject({exportSVG:function(ee){return ee=Y(ee),Q(se(this,ee,!0),ee)}}),O.inject({exportSVG:function(ee){ee=Y(ee);var F=this._children,J=this.getView(),re=r.pick(ee.bounds,"view"),ce=ee.matrix||re==="view"&&J._matrix,ne=ce&&M.read([ce]),ye=re==="view"?new T([0,0],J.getViewSize()):re==="content"?x._getBounds(F,ne,{stroke:!0}).rect:T.read([re],0,{readNull:!0}),we={version:"1.1",xmlns:rt.svg,"xmlns:xlink":rt.xlink};ye&&(we.width=ye.width,we.height=ye.height,(ye.x||ye.x===0||ye.y||ye.y===0)&&(we.viewBox=u.rectangle(ye)));var Ve=rt.create("svg",we,u),Be=Ve;ne&&!ne.isIdentity()&&(Be=Ve.appendChild(rt.create("g",d(ne),u)));for(var z=0,j=F.length;z<j;z++)Be.appendChild(se(F[z],ee,!0));return Q(Ve,ee)}})},new function(){var u={},d;function m(F,J,re,ce,ne,ye){var we=rt.get(F,J)||ye,Ve=we==null?ce?null:re?"":0:re?we:parseFloat(we);return/%\s*$/.test(we)?Ve/100*(ne?1:d[/x|^width/.test(J)?"width":"height"]):Ve}function _(F,J,re,ce,ne,ye,we){return J=m(F,J||"x",!1,ce,ne,ye),re=m(F,re||"y",!1,ce,ne,we),ce&&(J==null||re==null)?null:new v(J,re)}function S(F,J,re,ce,ne){return J=m(F,J||"width",!1,ce,ne),re=m(F,re||"height",!1,ce,ne),ce&&(J==null||re==null)?null:new P(J,re)}function k(F,J,re){return F==="none"?null:J==="number"?parseFloat(F):J==="array"?F?F.split(/[\s,]+/g).map(parseFloat):[]:J==="color"?se(F)||F:J==="lookup"?re[F]:F}function I(F,J,re,ce){var ne=F.childNodes,ye=J==="clippath",we=J==="defs",Ve=new Z,Be=Ve._project,z=Be._currentStyle,j=[];if(!ye&&!we&&(Ve=Q(Ve,F,ce),Be._currentStyle=Ve._style.clone()),ce)for(var le=F.querySelectorAll("defs"),xe=0,Ce=le.length;xe<Ce;xe++)Y(le[xe],re,!1);for(var xe=0,Ce=ne.length;xe<Ce;xe++){var Ue=ne[xe],je;Ue.nodeType===1&&!/^defs$/i.test(Ue.nodeName)&&(je=Y(Ue,re,!1))&&!(je instanceof Se)&&j.push(je)}return Ve.addChildren(j),ye&&(Ve=Q(Ve.reduce(),F,ce)),Be._currentStyle=z,(ye||we)&&(Ve.remove(),Ve=null),Ve}function L(F,J){for(var re=F.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),ce=[],ne=0,ye=re.length;ne<ye;ne+=2)ce.push(new v(parseFloat(re[ne]),parseFloat(re[ne+1])));var we=new De(ce);return J==="polygon"&&we.closePath(),we}function N(F){return st.create(F.getAttribute("d"))}function q(F,J){var re=(m(F,"href",!0)||"").substring(1),ce=J==="radialgradient",ne;if(re)ne=u[re].getGradient(),ne._radial^ce&&(ne=ne.clone(),ne._radial=ce);else{for(var ye=F.childNodes,we=[],Ve=0,Be=ye.length;Ve<Be;Ve++){var z=ye[Ve];z.nodeType===1&&we.push(Q(new Nt,z))}ne=new Wt(we,ce)}var j,le,xe,Ce=m(F,"gradientUnits",!0)!=="userSpaceOnUse";ce?(j=_(F,"cx","cy",!1,Ce,"50%","50%"),le=j.add(m(F,"r",!1,!1,Ce,"50%"),0),xe=_(F,"fx","fy",!0,Ce)):(j=_(F,"x1","y1",!1,Ce,"0%","0%"),le=_(F,"x2","y2",!1,Ce,"100%","0%"));var Ue=Q(new ut(ne,j,le,xe),F);return Ue._scaleToBounds=Ce,null}var W={"#document":function(F,J,re,ce){for(var ne=F.childNodes,ye=0,we=ne.length;ye<we;ye++){var Ve=ne[ye];if(Ve.nodeType===1)return Y(Ve,re,ce)}},g:I,svg:I,clippath:I,polygon:L,polyline:L,path:N,lineargradient:q,radialgradient:q,image:function(F){var J=new me(m(F,"href",!0));return J.on("load",function(){var re=S(F);this.setSize(re);var ce=_(F).add(re.divide(2));this._matrix.append(new M().translate(ce))}),J},symbol:function(F,J,re,ce){return new Se(I(F,J,re,ce),!0)},defs:I,use:function(F){var J=(m(F,"href",!0)||"").substring(1),re=u[J],ce=_(F);return re?re instanceof Se?re.place(ce):re.clone().translate(ce):null},circle:function(F){return new $.Circle(_(F,"cx","cy"),m(F,"r"))},ellipse:function(F){return new $.Ellipse({center:_(F,"cx","cy"),radius:S(F,"rx","ry")})},rect:function(F){return new $.Rectangle(new T(_(F),S(F)),S(F,"rx","ry"))},line:function(F){return new De.Line(_(F,"x1","y1"),_(F,"x2","y2"))},text:function(F){var J=new Et(_(F).add(_(F,"dx","dy")));return J.setContent(F.textContent.trim()||""),J},switch:I};function K(F,J,re,ce){if(F.transform){for(var ne=(ce.getAttribute(re)||"").split(/\)\s*/g),ye=new M,we=0,Ve=ne.length;we<Ve;we++){var Be=ne[we];if(!Be)break;for(var z=Be.split(/\(\s*/),j=z[0].trim(),le=z[1].split(/[\s,]+/g),xe=0,Ce=le.length;xe<Ce;xe++)le[xe]=parseFloat(le[xe]);switch(j){case"matrix":ye.append(new M(le[0],le[1],le[2],le[3],le[4],le[5]));break;case"rotate":ye.rotate(le[0],le[1]||0,le[2]||0);break;case"translate":ye.translate(le[0],le[1]||0);break;case"scale":ye.scale(le);break;case"skewX":ye.skew(le[0],0);break;case"skewY":ye.skew(0,le[0]);break}}F.transform(ye)}}function G(F,J,re){var ce=re==="fill-opacity"?"getFillColor":"getStrokeColor",ne=F[ce]&&F[ce]();ne&&ne.setAlpha(parseFloat(J))}var U=r.set(r.each(Dn,function(F){this[F.attribute]=function(J,re){if(J[F.set]&&(J[F.set](k(re,F.type,F.fromSVG)),F.type==="color")){var ce=J[F.get]();if(ce&&ce._scaleToBounds){var ne=J.getBounds();ce.transform(new M().translate(ne.getPoint()).scale(ne.getSize()))}}}},{}),{id:function(F,J){u[J]=F,F.setName&&F.setName(J)},"clip-path":function(F,J){var re=se(J);if(re)if(re=re.clone(),re.setClipMask(!0),F instanceof Z)F.insertChild(0,re);else return new Z(re,F)},gradientTransform:K,transform:K,"fill-opacity":G,"stroke-opacity":G,visibility:function(F,J){F.setVisible&&F.setVisible(J==="visible")},display:function(F,J){F.setVisible&&F.setVisible(J!==null)},"stop-color":function(F,J){F.setColor&&F.setColor(J)},"stop-opacity":function(F,J){F._color&&F._color.setAlpha(parseFloat(J))},offset:function(F,J){if(F.setOffset){var re=J.match(/(.*)%$/);F.setOffset(re?re[1]/100:parseFloat(J))}},viewBox:function(F,J,re,ce,ne){var ye=new T(k(J,"array")),we=S(ce,null,null,!0),Ve,Be;if(F instanceof Z){var z=we?we.divide(ye.getSize()):1,Be=new M().scale(z).translate(ye.getPoint().negate());Ve=F}else F instanceof Se&&(we&&ye.setSize(we),Ve=F._item);if(Ve){if(ae(ce,"overflow",ne)!=="visible"){var j=new $.Rectangle(ye);j.setClipMask(!0),Ve.addChild(j)}Be&&Ve.transform(Be)}}});function ae(F,J,re){var ce=F.attributes[J],ne=ce&&ce.value;if(!ne&&F.style){var ye=r.camelize(J);ne=F.style[ye],!ne&&re.node[ye]!==re.parent[ye]&&(ne=re.node[ye])}return ne?ne==="none"?null:ne:t}function Q(F,J,re){var ce=J.parentNode,ne={node:Yt.getStyles(J)||{},parent:!re&&!/^defs$/i.test(ce.tagName)&&Yt.getStyles(ce)||{}};return r.each(U,function(ye,we){var Ve=ae(J,we,ne);F=Ve!==t&&ye(F,Ve,we,J,ne)||F}),F}function se(F){var J=F&&F.match(/\((?:["'#]*)([^"')]+)/),re=J&&J[1],ce=re&&u[n?re.replace(n.location.href.split("#")[0]+"#",""):re];return ce&&ce._scaleToBounds&&(ce=ce.clone(),ce._scaleToBounds=!0),ce}function Y(F,J,re){var ce=F.nodeName.toLowerCase(),ne=ce!=="#document",ye=s.body,we,Ve,Be;re&&ne&&(d=Xt.getView().getSize(),d=S(F,null,null,!0)||d,we=rt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Ve=F.parentNode,Be=F.nextSibling,we.appendChild(F),ye.appendChild(we));var z=Xt.settings,j=z.applyMatrix,le=z.insertItems;z.applyMatrix=!1,z.insertItems=!1;var xe=W[ce],Ce=xe&&xe(F,ce,J,re)||null;if(z.insertItems=le,z.applyMatrix=j,Ce){ne&&!(Ce instanceof Z)&&(Ce=Q(Ce,F,re));var Ue=J.onImport,je=ne&&F.getAttribute("data-paper-data");Ue&&(Ce=Ue(F,Ce,J)||Ce),J.expandShapes&&Ce instanceof $&&(Ce.remove(),Ce=Ce.toPath()),je&&(Ce._data=JSON.parse(je))}return we&&(ye.removeChild(we),Ve&&(Be?Ve.insertBefore(F,Be):Ve.appendChild(F))),re&&(u={},Ce&&r.pick(J.applyMatrix,j)&&Ce.matrix.apply(!0,!0)),Ce}function ee(F,J,re){if(!F)return null;J=typeof J=="function"?{onLoad:J}:J||{};var ce=Xt,ne=null;function ye(z){try{var j=typeof z=="object"?z:new e.DOMParser().parseFromString(z.trim(),"image/svg+xml");if(!j.nodeName)throw j=null,new Error("Unsupported SVG source: "+F);Xt=ce,ne=Y(j,J,!0),(!J||J.insert!==!1)&&re._insertItem(t,ne);var le=J.onLoad;le&&le(ne,z)}catch(xe){we(xe)}}function we(z,j){var le=J.onError;if(le)le(z,j);else throw new Error(z)}if(typeof F=="string"&&!/^[\s\S]*</.test(F)){var Ve=s.getElementById(F);Ve?ye(Ve):ke.request({url:F,async:!0,onLoad:ye,onError:we})}else if(typeof File<"u"&&F instanceof File){var Be=new FileReader;return Be.onload=function(){ye(Be.result)},Be.onerror=function(){we(Be.error)},Be.readAsText(F)}else ye(F);return ne}x.inject({importSVG:function(F,J){return ee(F,J,this)}}),O.inject({importSVG:function(F,J){return this.activate(),ee(F,J,this)}})},r.exports.PaperScript=function(){var u=this,d=u.acorn;if(!d&&typeof GF<"u")try{d=WF()}catch{}if(!d){var m,_;d=m=_={},function(Q,se){if(typeof m=="object"&&typeof _=="object")return se(m);if(typeof t=="function"&&t.amd)return t(["exports"],se);se(Q.acorn||(Q.acorn={}))}(this,function(Q){Q.version="0.5.0";var se,Y,ee,F;Q.parse=function(be,Ie){return Y=String(be),ee=Y.length,re(Ie),Kf(),S_(se.program)};var J=Q.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function re(be){se=be||{};for(var Ie in J)Object.prototype.hasOwnProperty.call(se,Ie)||(se[Ie]=J[Ie]);F=se.sourceFile||null}var ce=Q.getLineInfo=function(be,Ie){for(var Ze=1,mt=0;;){oh.lastIndex=mt;var ei=oh.exec(be);if(ei&&ei.index<Ie)++Ze,mt=ei.index+ei[0].length;else break}return{line:Ze,column:Ie-mt}};Q.tokenize=function(be,Ie){Y=String(be),ee=Y.length,re(Ie),Kf();var Ze={};function mt(ei){return je=we,lh(ei),Ze.start=ye,Ze.end=we,Ze.startLoc=Ve,Ze.endLoc=Be,Ze.type=z,Ze.value=j,Ze}return mt.jumpTo=function(ei,Ci){if(ne=ei,se.locations){xe=1,Ce=oh.lastIndex=0;for(var Ui;(Ui=oh.exec(Y))&&Ui.index<ei;)++xe,Ce=Ui.index+Ui[0].length}le=Ci,tu()},mt};var ne,ye,we,Ve,Be,z,j,le,xe,Ce,Ue,je,nt,yt,Vt,it;function at(be,Ie){var Ze=ce(Y,be);Ie+=" ("+Ze.line+":"+Ze.column+")";var mt=new SyntaxError(Ie);throw mt.pos=be,mt.loc=Ze,mt.raisedAt=ne,mt}var Tt=[],At={type:"num"},ft={type:"regexp"},Rt={type:"string"},Jt={type:"name"},hi={type:"eof"},si={keyword:"break"},di={keyword:"case",beforeExpr:!0},$t={keyword:"catch"},Nn={keyword:"continue"},Mi={keyword:"debugger"},cs={keyword:"default"},Bt={keyword:"do",isLoop:!0},ls={keyword:"else",beforeExpr:!0},ds={keyword:"finally"},Ds={keyword:"for",isLoop:!0},Pr={keyword:"function"},Aa={keyword:"if"},qr={keyword:"return",beforeExpr:!0},Tr={keyword:"switch"},ur={keyword:"throw",beforeExpr:!0},yr={keyword:"try"},zr={keyword:"var"},Vs={keyword:"while",isLoop:!0},cr={keyword:"with"},Uu={keyword:"new",beforeExpr:!0},Zh={keyword:"this"},$h={keyword:"null",atomValue:null},bd={keyword:"true",atomValue:!0},Gu={keyword:"false",atomValue:!1},ml={keyword:"in",binop:7,beforeExpr:!0},uo={break:si,case:di,catch:$t,continue:Nn,debugger:Mi,default:cs,do:Bt,else:ls,finally:ds,for:Ds,function:Pr,if:Aa,return:qr,switch:Tr,throw:ur,try:yr,var:zr,while:Vs,with:cr,null:$h,true:bd,false:Gu,new:Uu,in:ml,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Zh,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},wa={type:"[",beforeExpr:!0},gl={type:"]"},co={type:"{",beforeExpr:!0},Sa={type:"}"},Oi={type:"(",beforeExpr:!0},Fr={type:")"},ia={type:",",beforeExpr:!0},Hr={type:";",beforeExpr:!0},No={type:":",beforeExpr:!0},Wu={type:"."},Ku={type:"?",beforeExpr:!0},eu={binop:10,beforeExpr:!0},y={isAssign:!0,beforeExpr:!0},C={isAssign:!0,beforeExpr:!0},X={postfix:!0,prefix:!0,isUpdate:!0},oe={prefix:!0,beforeExpr:!0},Ee={binop:1,beforeExpr:!0},tt={binop:2,beforeExpr:!0},ot={binop:3,beforeExpr:!0},Ht={binop:4,beforeExpr:!0},Kt={binop:5,beforeExpr:!0},Wi={binop:6,beforeExpr:!0},ri={binop:7,beforeExpr:!0},Hi={binop:8,beforeExpr:!0},Ro={binop:9,prefix:!0,beforeExpr:!0},ah={binop:10,beforeExpr:!0};Q.tokTypes={bracketL:wa,bracketR:gl,braceL:co,braceR:Sa,parenL:Oi,parenR:Fr,comma:ia,semi:Hr,colon:No,dot:Wu,question:Ku,slash:eu,eq:y,name:Jt,eof:hi,num:At,regexp:ft,string:Rt};for(var Bo in uo)Q.tokTypes["_"+Bo]=uo[Bo];function po(be){be=be.split(" ");var Ie="",Ze=[];e:for(var mt=0;mt<be.length;++mt){for(var ei=0;ei<Ze.length;++ei)if(Ze[ei][0].length==be[mt].length){Ze[ei].push(be[mt]);continue e}Ze.push([be[mt]])}function Ci(Ji){if(Ji.length==1)return Ie+="return str === "+JSON.stringify(Ji[0])+";";Ie+="switch(str){";for(var Gr=0;Gr<Ji.length;++Gr)Ie+="case "+JSON.stringify(Ji[Gr])+":";Ie+="return true}return false;"}if(Ze.length>3){Ze.sort(function(Ji,Gr){return Gr.length-Ji.length}),Ie+="switch(str.length){";for(var mt=0;mt<Ze.length;++mt){var Ui=Ze[mt];Ie+="case "+Ui[0].length+":",Ci(Ui)}Ie+="}"}else Ci(be);return new Function("str",Ie)}var yl=po("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),vl=po("class enum extends super const export import"),Uf=po("implements interface let package private protected public static yield"),_d=po("eval arguments"),dr=po("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Gf=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,bl="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",b0="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Ad=new RegExp("["+bl+"]"),Pa=new RegExp("["+bl+b0+"]"),Yu=/[\n\r\u2028\u2029]/,oh=/\r\n|[\n\r\u2028\u2029]/g,ju=Q.isIdentifierStart=function(be){return be<65?be===36:be<91?!0:be<97?be===95:be<123?!0:be>=170&&Ad.test(String.fromCharCode(be))},Wf=Q.isIdentifierChar=function(be){return be<48?be===36:be<58?!0:be<65?!1:be<91?!0:be<97?be===95:be<123?!0:be>=170&&Pa.test(String.fromCharCode(be))};function _l(){this.line=xe,this.column=ne-Ce}function Kf(){xe=1,ne=Ce=0,le=!0,tu()}function Un(be,Ie){we=ne,se.locations&&(Be=new _l),z=be,tu(),j=Ie,le=be.beforeExpr}function __(){var be=se.onComment&&se.locations&&new _l,Ie=ne,Ze=Y.indexOf("*/",ne+=2);if(Ze===-1&&at(ne-2,"Unterminated comment"),ne=Ze+2,se.locations){oh.lastIndex=Ie;for(var mt;(mt=oh.exec(Y))&&mt.index<ne;)++xe,Ce=mt.index+mt[0].length}se.onComment&&se.onComment(!0,Y.slice(Ie+2,Ze),Ie,ne,be,se.locations&&new _l)}function Ur(){for(var be=ne,Ie=se.onComment&&se.locations&&new _l,Ze=Y.charCodeAt(ne+=2);ne<ee&&Ze!==10&&Ze!==13&&Ze!==8232&&Ze!==8233;)++ne,Ze=Y.charCodeAt(ne);se.onComment&&se.onComment(!1,Y.slice(be+2,ne),be,ne,Ie,se.locations&&new _l)}function tu(){for(;ne<ee;){var be=Y.charCodeAt(ne);if(be===32)++ne;else if(be===13){++ne;var Ie=Y.charCodeAt(ne);Ie===10&&++ne,se.locations&&(++xe,Ce=ne)}else if(be===10||be===8232||be===8233)++ne,se.locations&&(++xe,Ce=ne);else if(be>8&&be<14)++ne;else if(be===47){var Ie=Y.charCodeAt(ne+1);if(Ie===42)__();else if(Ie===47)Ur();else break}else if(be===160)++ne;else if(be>=5760&&Gf.test(String.fromCharCode(be)))++ne;else break}}function _0(){var be=Y.charCodeAt(ne+1);return be>=48&&be<=57?hh(!0):(++ne,Un(Wu))}function Al(){var be=Y.charCodeAt(ne+1);return le?(++ne,A0()):be===61?er(C,2):er(eu,1)}function wd(){var be=Y.charCodeAt(ne+1);return be===61?er(C,2):er(ah,1)}function Yf(be){var Ie=Y.charCodeAt(ne+1);return Ie===be?er(be===124?Ee:tt,2):Ie===61?er(C,2):er(be===124?ot:Kt,1)}function As(){var be=Y.charCodeAt(ne+1);return be===61?er(C,2):er(Ht,1)}function wl(be){var Ie=Y.charCodeAt(ne+1);return Ie===be?Ie==45&&Y.charCodeAt(ne+2)==62&&Yu.test(Y.slice(je,ne))?(ne+=3,Ur(),tu(),lh()):er(X,2):Ie===61?er(C,2):er(Ro,1)}function jf(be){var Ie=Y.charCodeAt(ne+1),Ze=1;return Ie===be?(Ze=be===62&&Y.charCodeAt(ne+2)===62?3:2,Y.charCodeAt(ne+Ze)===61?er(C,Ze+1):er(Hi,Ze)):Ie==33&&be==60&&Y.charCodeAt(ne+2)==45&&Y.charCodeAt(ne+3)==45?(ne+=4,Ur(),tu(),lh()):(Ie===61&&(Ze=Y.charCodeAt(ne+2)===61?3:2),er(ri,Ze))}function A_(be){var Ie=Y.charCodeAt(ne+1);return Ie===61?er(Wi,Y.charCodeAt(ne+2)===61?3:2):er(be===61?y:oe,1)}function Xf(be){switch(be){case 46:return _0();case 40:return++ne,Un(Oi);case 41:return++ne,Un(Fr);case 59:return++ne,Un(Hr);case 44:return++ne,Un(ia);case 91:return++ne,Un(wa);case 93:return++ne,Un(gl);case 123:return++ne,Un(co);case 125:return++ne,Un(Sa);case 58:return++ne,Un(No);case 63:return++ne,Un(Ku);case 48:var Ie=Y.charCodeAt(ne+1);if(Ie===120||Ie===88)return Sd();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return hh(!1);case 34:case 39:return w_(be);case 47:return Al();case 37:case 42:return wd();case 124:case 38:return Yf(be);case 94:return As();case 43:case 45:return wl(be);case 60:case 62:return jf(be);case 61:case 33:return A_(be);case 126:return er(oe,1)}return!1}function lh(be){if(be?ne=ye+1:ye=ne,se.locations&&(Ve=new _l),be)return A0();if(ne>=ee)return Un(hi);var Ie=Y.charCodeAt(ne);if(ju(Ie)||Ie===92)return Td();var Ze=Xf(Ie);if(Ze===!1){var mt=String.fromCharCode(Ie);if(mt==="\\"||Ad.test(mt))return Td();at(ne,"Unexpected character '"+mt+"'")}return Ze}function er(be,Ie){var Ze=Y.slice(ne,ne+Ie);ne+=Ie,Un(be,Ze)}function A0(){for(var ei="",be,Ie,Ze=ne;;){ne>=ee&&at(Ze,"Unterminated regular expression");var mt=Y.charAt(ne);if(Yu.test(mt)&&at(Ze,"Unterminated regular expression"),be)be=!1;else{if(mt==="[")Ie=!0;else if(mt==="]"&&Ie)Ie=!1;else if(mt==="/"&&!Ie)break;be=mt==="\\"}++ne}var ei=Y.slice(Ze,ne);++ne;var Ci=Pd();Ci&&!/^[gmsiy]*$/.test(Ci)&&at(Ze,"Invalid regexp flag");try{var Ui=new RegExp(ei,Ci)}catch(Ji){Ji instanceof SyntaxError&&at(Ze,Ji.message),at(Ji)}return Un(ft,Ui)}function iu(be,Ie){for(var Ze=ne,mt=0,ei=0,Ci=Ie??1/0;ei<Ci;++ei){var Ui=Y.charCodeAt(ne),Ji;if(Ui>=97?Ji=Ui-97+10:Ui>=65?Ji=Ui-65+10:Ui>=48&&Ui<=57?Ji=Ui-48:Ji=1/0,Ji>=be)break;++ne,mt=mt*be+Ji}return ne===Ze||Ie!=null&&ne-Ze!==Ie?null:mt}function Sd(){ne+=2;var be=iu(16);return be==null&&at(ye+2,"Expected hexadecimal number"),ju(Y.charCodeAt(ne))&&at(ne,"Identifier directly after number"),Un(At,be)}function hh(be){var Ie=ne,Ze=!1,mt=Y.charCodeAt(ne)===48;!be&&iu(10)===null&&at(Ie,"Invalid number"),Y.charCodeAt(ne)===46&&(++ne,iu(10),Ze=!0);var ei=Y.charCodeAt(ne);(ei===69||ei===101)&&(ei=Y.charCodeAt(++ne),(ei===43||ei===45)&&++ne,iu(10)===null&&at(Ie,"Invalid number"),Ze=!0),ju(Y.charCodeAt(ne))&&at(ne,"Identifier directly after number");var Ci=Y.slice(Ie,ne),Ui;return Ze?Ui=parseFloat(Ci):!mt||Ci.length===1?Ui=parseInt(Ci,10):/[89]/.test(Ci)||it?at(Ie,"Invalid number"):Ui=parseInt(Ci,8),Un(At,Ui)}function w_(be){ne++;for(var Ie="";;){ne>=ee&&at(ye,"Unterminated string constant");var Ze=Y.charCodeAt(ne);if(Ze===be)return++ne,Un(Rt,Ie);if(Ze===92){Ze=Y.charCodeAt(++ne);var mt=/^[0-7]+/.exec(Y.slice(ne,ne+3));for(mt&&(mt=mt[0]);mt&&parseInt(mt,8)>255;)mt=mt.slice(0,-1);if(mt==="0"&&(mt=null),++ne,mt)it&&at(ne-2,"Octal literal in strict mode"),Ie+=String.fromCharCode(parseInt(mt,8)),ne+=mt.length-1;else switch(Ze){case 110:Ie+=`
`;break;case 114:Ie+="\r";break;case 120:Ie+=String.fromCharCode(Xu(2));break;case 117:Ie+=String.fromCharCode(Xu(4));break;case 85:Ie+=String.fromCharCode(Xu(8));break;case 116:Ie+="	";break;case 98:Ie+="\b";break;case 118:Ie+="\v";break;case 102:Ie+="\f";break;case 48:Ie+="\0";break;case 13:Y.charCodeAt(ne)===10&&++ne;case 10:se.locations&&(Ce=ne,++xe);break;default:Ie+=String.fromCharCode(Ze);break}}else(Ze===13||Ze===10||Ze===8232||Ze===8233)&&at(ye,"Unterminated string constant"),Ie+=String.fromCharCode(Ze),++ne}}function Xu(be){var Ie=iu(16,be);return Ie===null&&at(ye,"Bad character escape sequence"),Ie}var uh;function Pd(){uh=!1;for(var be,Ie=!0,Ze=ne;;){var mt=Y.charCodeAt(ne);if(Wf(mt))uh&&(be+=Y.charAt(ne)),++ne;else if(mt===92){uh||(be=Y.slice(Ze,ne)),uh=!0,Y.charCodeAt(++ne)!=117&&at(ne,"Expecting Unicode escape sequence \\uXXXX"),++ne;var ei=Xu(4),Ci=String.fromCharCode(ei);Ci||at(ne-1,"Invalid Unicode escape"),(Ie?ju(ei):Wf(ei))||at(ne-4,"Invalid Unicode escape"),be+=Ci}else break;Ie=!1}return uh?be:Y.slice(Ze,ne)}function Td(){var be=Pd(),Ie=Jt;return!uh&&dr(be)&&(Ie=uo[be]),Un(Ie,be)}function Pn(){Ue=ye,je=we,nt=Be,lh()}function Qf(be){if(it=be,ne=ye,se.locations)for(;ne<Ce;)Ce=Y.lastIndexOf(`
`,Ce-2)+1,--xe;tu(),lh()}function xd(){this.type=null,this.start=ye,this.end=null}function Ed(){this.start=Ve,this.end=null,F!==null&&(this.source=F)}function pr(){var be=new xd;return se.locations&&(be.loc=new Ed),se.directSourceFile&&(be.sourceFile=se.directSourceFile),se.ranges&&(be.range=[ye,0]),be}function qo(be){var Ie=new xd;return Ie.start=be.start,se.locations&&(Ie.loc=new Ed,Ie.loc.start=be.loc.start),se.ranges&&(Ie.range=[be.range[0],0]),Ie}function Pi(be,Ie){return be.type=Ie,be.end=je,se.locations&&(be.loc.end=nt),se.ranges&&(be.range[1]=je),be}function Qu(be){return se.ecmaVersion>=5&&be.type==="ExpressionStatement"&&be.expression.type==="Literal"&&be.expression.value==="use strict"}function is(be){if(z===be)return Pn(),!0}function Ju(){return!se.strictSemicolons&&(z===hi||z===Sa||Yu.test(Y.slice(je,ye)))}function Sl(){!is(Hr)&&!Ju()&&zo()}function qs(be){z===be?Pn():zo()}function zo(){at(ye,"Unexpected token")}function Vd(be){be.type!=="Identifier"&&be.type!=="MemberExpression"&&at(be.start,"Assigning to rvalue"),it&&be.type==="Identifier"&&_d(be.name)&&at(be.start,"Assigning to "+be.name+" in strict mode")}function S_(be){Ue=je=ne,se.locations&&(nt=new _l),yt=it=null,Vt=[],lh();var Ie=be||pr(),Ze=!0;for(be||(Ie.body=[]);z!==hi;){var mt=Ga();Ie.body.push(mt),Ze&&Qu(mt)&&Qf(!0),Ze=!1}return Pi(Ie,"Program")}var Jf={kind:"loop"},nu={kind:"switch"};function Ga(){(z===eu||z===C&&j=="/=")&&lh(!0);var be=z,Ie=pr();switch(be){case si:case Nn:Pn();var Ze=be===si;is(Hr)||Ju()?Ie.label=null:z!==Jt?zo():(Ie.label=ht(),Sl());for(var mt=0;mt<Vt.length;++mt){var ei=Vt[mt];if((Ie.label==null||ei.name===Ie.label.name)&&(ei.kind!=null&&(Ze||ei.kind==="loop")||Ie.label&&Ze))break}return mt===Vt.length&&at(Ie.start,"Unsyntactic "+be.keyword),Pi(Ie,Ze?"BreakStatement":"ContinueStatement");case Mi:return Pn(),Sl(),Pi(Ie,"DebuggerStatement");case Bt:return Pn(),Vt.push(Jf),Ie.body=Ga(),Vt.pop(),qs(Vs),Ie.test=Zu(),Sl(),Pi(Ie,"DoWhileStatement");case Ds:if(Pn(),Vt.push(Jf),qs(Oi),z===Hr)return kd(Ie,null);if(z===zr){var Ci=pr();return Pn(),$u(Ci,!0),Pi(Ci,"VariableDeclaration"),Ci.declarations.length===1&&is(ml)?Fo(Ie,Ci):kd(Ie,Ci)}var Ci=vr(!1,!0);return is(ml)?(Vd(Ci),Fo(Ie,Ci)):kd(Ie,Ci);case Pr:return Pn(),Ye(Ie,!0);case Aa:return Pn(),Ie.test=Zu(),Ie.consequent=Ga(),Ie.alternate=is(ls)?Ga():null,Pi(Ie,"IfStatement");case qr:return!yt&&!se.allowReturnOutsideFunction&&at(ye,"'return' outside of function"),Pn(),is(Hr)||Ju()?Ie.argument=null:(Ie.argument=vr(),Sl()),Pi(Ie,"ReturnStatement");case Tr:Pn(),Ie.discriminant=Zu(),Ie.cases=[],qs(co),Vt.push(nu);for(var Ui,Ji;z!=Sa;)if(z===di||z===cs){var Gr=z===di;Ui&&Pi(Ui,"SwitchCase"),Ie.cases.push(Ui=pr()),Ui.consequent=[],Pn(),Gr?Ui.test=vr():(Ji&&at(Ue,"Multiple default clauses"),Ji=!0,Ui.test=null),qs(No)}else Ui||zo(),Ui.consequent.push(Ga());return Ui&&Pi(Ui,"SwitchCase"),Pn(),Vt.pop(),Pi(Ie,"SwitchStatement");case ur:return Pn(),Yu.test(Y.slice(je,ye))&&at(je,"Illegal newline after throw"),Ie.argument=vr(),Sl(),Pi(Ie,"ThrowStatement");case yr:if(Pn(),Ie.block=ch(),Ie.handler=null,z===$t){var ph=pr();Pn(),qs(Oi),ph.param=ht(),it&&_d(ph.param.name)&&at(ph.param.start,"Binding "+ph.param.name+" in strict mode"),qs(Fr),ph.guard=null,ph.body=ch(),Ie.handler=Pi(ph,"CatchClause")}return Ie.guardedHandlers=Tt,Ie.finalizer=is(ds)?ch():null,!Ie.handler&&!Ie.finalizer&&at(Ie.start,"Missing catch or finally clause"),Pi(Ie,"TryStatement");case zr:return Pn(),$u(Ie),Sl(),Pi(Ie,"VariableDeclaration");case Vs:return Pn(),Ie.test=Zu(),Vt.push(Jf),Ie.body=Ga(),Vt.pop(),Pi(Ie,"WhileStatement");case cr:return it&&at(ye,"'with' in strict mode"),Pn(),Ie.object=Zu(),Ie.body=Ga(),Pi(Ie,"WithStatement");case co:return ch();case Hr:return Pn(),Pi(Ie,"EmptyStatement");default:var Pl=j,fh=vr();if(be===Jt&&fh.type==="Identifier"&&is(No)){for(var mt=0;mt<Vt.length;++mt)Vt[mt].name===Pl&&at(fh.start,"Label '"+Pl+"' is already declared");var Dd=z.isLoop?"loop":z===Tr?"switch":null;return Vt.push({name:Pl,kind:Dd}),Ie.body=Ga(),Vt.pop(),Ie.label=fh,Pi(Ie,"LabeledStatement")}else return Ie.expression=fh,Sl(),Pi(Ie,"ExpressionStatement")}}function Zu(){qs(Oi);var be=vr();return qs(Fr),be}function ch(be){var Ie=pr(),Ze=!0,mt=!1,ei;for(Ie.body=[],qs(co);!is(Sa);){var Ci=Ga();Ie.body.push(Ci),Ze&&be&&Qu(Ci)&&(ei=mt,Qf(mt=!0)),Ze=!1}return mt&&!ei&&Qf(!1),Pi(Ie,"BlockStatement")}function kd(be,Ie){return be.init=Ie,qs(Hr),be.test=z===Hr?null:vr(),qs(Hr),be.update=z===Fr?null:vr(),qs(Fr),be.body=Ga(),Vt.pop(),Pi(be,"ForStatement")}function Fo(be,Ie){return be.left=Ie,be.right=vr(),qs(Fr),be.body=Ga(),Vt.pop(),Pi(be,"ForInStatement")}function $u(be,Ie){for(be.declarations=[],be.kind="var";;){var Ze=pr();if(Ze.id=ht(),it&&_d(Ze.id.name)&&at(Ze.id.start,"Binding "+Ze.id.name+" in strict mode"),Ze.init=is(y)?vr(!0,Ie):null,be.declarations.push(Pi(Ze,"VariableDeclarator")),!is(ia))break}return be}function vr(be,Ie){var Ze=Zf(Ie);if(!be&&z===ia){var mt=qo(Ze);for(mt.expressions=[Ze];is(ia);)mt.expressions.push(Zf(Ie));return Pi(mt,"SequenceExpression")}return Ze}function Zf(be){var Ie=P_(be);if(z.isAssign){var Ze=qo(Ie);return Ze.operator=j,Ze.left=Ie,Pn(),Ze.right=Zf(be),Vd(Ie),Pi(Ze,"AssignmentExpression")}return Ie}function P_(be){var Ie=su(be);if(is(Ku)){var Ze=qo(Ie);return Ze.test=Ie,Ze.consequent=vr(!0),qs(No),Ze.alternate=vr(!0,be),Pi(Ze,"ConditionalExpression")}return Ie}function su(be){return na(Cd(),-1,be)}function na(be,Ie,Ze){var mt=z.binop;if(mt!=null&&(!Ze||z!==ml)&&mt>Ie){var ei=qo(be);ei.left=be,ei.operator=j;var Ci=z;Pn(),ei.right=na(Cd(),mt,Ze);var Ui=Pi(ei,Ci===Ee||Ci===tt?"LogicalExpression":"BinaryExpression");return na(Ui,Ie,Ze)}return be}function Cd(){if(z.prefix){var be=pr(),Ie=z.isUpdate;return be.operator=j,be.prefix=!0,le=!0,Pn(),be.argument=Cd(),Ie?Vd(be.argument):it&&be.operator==="delete"&&be.argument.type==="Identifier"&&at(be.start,"Deleting local variable in strict mode"),Pi(be,Ie?"UpdateExpression":"UnaryExpression")}for(var Ze=T_();z.postfix&&!Ju();){var be=qo(Ze);be.operator=j,be.prefix=!1,be.argument=Ze,Vd(Ze),Pn(),Ze=Pi(be,"UpdateExpression")}return Ze}function T_(){return ec($f())}function ec(be,Ie){if(is(Wu)){var Ze=qo(be);return Ze.object=be,Ze.property=ht(!0),Ze.computed=!1,ec(Pi(Ze,"MemberExpression"),Ie)}else if(is(wa)){var Ze=qo(be);return Ze.object=be,Ze.property=vr(),Ze.computed=!0,qs(gl),ec(Pi(Ze,"MemberExpression"),Ie)}else if(!Ie&&is(Oi)){var Ze=qo(be);return Ze.callee=be,Ze.arguments=vt(Fr,!1),ec(Pi(Ze,"CallExpression"),Ie)}else return be}function $f(){switch(z){case Zh:var mt=pr();return Pn(),Pi(mt,"ThisExpression");case Jt:return ht();case At:case Rt:case ft:var mt=pr();return mt.value=j,mt.raw=Y.slice(ye,we),Pn(),Pi(mt,"Literal");case $h:case bd:case Gu:var mt=pr();return mt.value=z.atomValue,mt.raw=z.keyword,Pn(),Pi(mt,"Literal");case Oi:var be=Ve,Ie=ye;Pn();var Ze=vr();return Ze.start=Ie,Ze.end=we,se.locations&&(Ze.loc.start=be,Ze.loc.end=Be),se.ranges&&(Ze.range=[Ie,we]),qs(Fr),Ze;case wa:var mt=pr();return Pn(),mt.elements=vt(gl,!0,!0),Pi(mt,"ArrayExpression");case co:return E_();case Pr:var mt=pr();return Pn(),Ye(mt,!1);case Uu:return x_();default:zo()}}function x_(){var be=pr();return Pn(),be.callee=ec($f(),!0),is(Oi)?be.arguments=vt(Fr,!1):be.arguments=Tt,Pi(be,"NewExpression")}function E_(){var be=pr(),Ie=!0,Ze=!1;for(be.properties=[],Pn();!is(Sa);){if(Ie)Ie=!1;else if(qs(ia),se.allowTrailingCommas&&is(Sa))break;var mt={key:dh()},ei=!1,Ci;if(is(No)?(mt.value=vr(!0),Ci=mt.kind="init"):se.ecmaVersion>=5&&mt.key.type==="Identifier"&&(mt.key.name==="get"||mt.key.name==="set")?(ei=Ze=!0,Ci=mt.kind=mt.key.name,mt.key=dh(),z!==Oi&&zo(),mt.value=Ye(pr(),!1)):zo(),mt.key.type==="Identifier"&&(it||Ze))for(var Ui=0;Ui<be.properties.length;++Ui){var Ji=be.properties[Ui];if(Ji.key.name===mt.key.name){var Gr=Ci==Ji.kind||ei&&Ji.kind==="init"||Ci==="init"&&(Ji.kind==="get"||Ji.kind==="set");Gr&&!it&&Ci==="init"&&Ji.kind==="init"&&(Gr=!1),Gr&&at(mt.key.start,"Redefinition of property")}}be.properties.push(mt)}return Pi(be,"ObjectExpression")}function dh(){return z===At||z===Rt?$f():ht(!0)}function Ye(be,Ie){z===Jt?be.id=ht():Ie?zo():be.id=null,be.params=[];var Ze=!0;for(qs(Oi);!is(Fr);)Ze?Ze=!1:qs(ia),be.params.push(ht());var mt=yt,ei=Vt;if(yt=!0,Vt=[],be.body=ch(!0),yt=mt,Vt=ei,it||be.body.body.length&&Qu(be.body.body[0]))for(var Ci=be.id?-1:0;Ci<be.params.length;++Ci){var Ui=Ci<0?be.id:be.params[Ci];if((Uf(Ui.name)||_d(Ui.name))&&at(Ui.start,"Defining '"+Ui.name+"' in strict mode"),Ci>=0)for(var Ji=0;Ji<Ci;++Ji)Ui.name===be.params[Ji].name&&at(Ui.start,"Argument name clash in strict mode")}return Pi(be,Ie?"FunctionDeclaration":"FunctionExpression")}function vt(be,Ie,Ze){for(var mt=[],ei=!0;!is(be);){if(ei)ei=!1;else if(qs(ia),Ie&&se.allowTrailingCommas&&is(be))break;Ze&&z===ia?mt.push(null):mt.push(vr(!0))}return mt}function ht(be){var Ie=pr();return be&&se.forbidReserved=="everywhere"&&(be=!1),z===Jt?(!be&&(se.forbidReserved&&(se.ecmaVersion===3?yl:vl)(j)||it&&Uf(j))&&Y.slice(ye,we).indexOf("\\")==-1&&at(ye,"The keyword '"+j+"' is reserved"),Ie.name=j):be&&z.keyword?Ie.name=z.keyword:zo(),le=!1,Pn(),Pi(Ie,"Identifier")}}),d.version||(d=null)}function S(Q,se){return(u.acorn||d).parse(Q,se)}var k={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},I={"-":"__negate","+":"__self"},L=r.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Q){this["__"+Q]="#"+Q},{__self:function(){return this}});v.inject(L),P.inject(L),ut.inject(L);function N(Q,se,Y){var ee=k[se];if(Q&&Q[ee]){var F=Q[ee](Y);return se==="!="?!F:F}switch(se){case"+":return Q+Y;case"-":return Q-Y;case"*":return Q*Y;case"/":return Q/Y;case"%":return Q%Y;case"==":return Q==Y;case"!=":return Q!=Y}}function q(Q,se){var Y=I[Q];if(se&&se[Y])return se[Y]();switch(Q){case"+":return+se;case"-":return-se}}function W(Q,se){if(!Q)return"";se=se||{};var Y=[];function ee(it){for(var at=0,Tt=Y.length;at<Tt;at++){var At=Y[at];if(At[0]>=it)break;it+=At[1]}return it}function F(it){return Q.substring(ee(it.range[0]),ee(it.range[1]))}function J(it,at){return Q.substring(ee(it.range[1]),ee(at.range[0]))}function re(it,at){for(var Tt=ee(it.range[0]),At=ee(it.range[1]),ft=0,Rt=Y.length-1;Rt>=0;Rt--)if(Tt>Y[Rt][0]){ft=Rt+1;break}Y.splice(ft,0,[Tt,at.length-At+Tt]),Q=Q.substring(0,Tt)+at+Q.substring(At)}function ce(it,at){switch(it.type){case"UnaryExpression":if(it.operator in I&&it.argument.type!=="Literal"){var Tt=F(it.argument);re(it,'$__("'+it.operator+'", '+Tt+")")}break;case"BinaryExpression":if(it.operator in k&&it.left.type!=="Literal"){var At=F(it.left),ft=F(it.right),Rt=J(it.left,it.right),Jt=it.operator;re(it,"__$__("+At+","+Rt.replace(new RegExp("\\"+Jt),'"'+Jt+'"')+", "+ft+")")}break;case"UpdateExpression":case"AssignmentExpression":var hi=at&&at.type;if(!(hi==="ForStatement"||hi==="BinaryExpression"&&/^[=!<>]/.test(at.operator)||hi==="MemberExpression"&&at.computed)){if(it.type==="UpdateExpression"){var Tt=F(it.argument),si="__$__("+Tt+', "'+it.operator[0]+'", 1)',di=Tt+" = "+si;it.prefix?di="("+di+")":(hi==="AssignmentExpression"||hi==="VariableDeclarator"||hi==="BinaryExpression")&&(F(at.left||at.id)===Tt&&(di=si),di=Tt+"; "+di),re(it,di)}else if(/^.=$/.test(it.operator)&&it.left.type!=="Literal"){var At=F(it.left),ft=F(it.right),si=At+" = __$__("+At+', "'+it.operator[0]+'", '+ft+")";re(it,/^\(.*\)$/.test(F(it))?"("+si+")":si)}}break}}function ne(it){switch(it.type){case"ExportDefaultDeclaration":re({range:[it.start,it.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var at=it.declaration,Tt=it.specifiers;if(at){var At=at.declarations;At&&(At.forEach(function(Rt){re(Rt,"module.exports."+F(Rt))}),re({range:[it.start,at.start+at.kind.length]},""))}else if(Tt){var ft=Tt.map(function(Rt){var Jt=F(Rt);return"module.exports."+Jt+" = "+Jt+"; "}).join("");ft&&re(it,ft)}break}}function ye(it,at,Tt){if(it){for(var At in it)if(At!=="range"&&At!=="loc"){var ft=it[At];if(Array.isArray(ft))for(var Rt=0,Jt=ft.length;Rt<Jt;Rt++)ye(ft[Rt],it,Tt);else ft&&typeof ft=="object"&&ye(ft,it,Tt)}Tt.operatorOverloading!==!1&&ce(it,at),Tt.moduleExports!==!1&&ne(it)}}function we(it){var at="",Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(it=(Math.abs(it)<<1)+(it<0?1:0);it||!at;){var At=it&31;it>>=5,it&&(At|=32),at+=Tt[At]}return at}var Ve=se.url||"",Be=se.sourceMaps,z=se.paperFeatures||{},j=se.source||Q,le=se.offset||0,xe=Xt.agent,Ce=xe.versionNumber,Ue=!1,je=/\r\n|\n|\r/mg,nt;if(Be&&(xe.chrome&&Ce>=30||xe.webkit&&Ce>=537.76||xe.firefox&&Ce>=23||xe.node)){if(xe.node)le-=2;else if(n&&Ve&&!n.location.href.indexOf(Ve)){var yt=s.getElementsByTagName("html")[0].innerHTML;le=yt.substr(0,yt.indexOf(Q)+1).match(je).length+1}Ue=le>0&&!(xe.chrome&&Ce>=36||xe.safari&&Ce>=600||xe.firefox&&Ce>=40||xe.node);var Vt=["AA"+we(Ue?0:le)+"A"];Vt.length=(Q.match(je)||[]).length+1+(Ue?le:0),nt={version:3,file:Ve,names:[],mappings:Vt.join(";AACA"),sourceRoot:"",sources:[Ve],sourcesContent:[j]}}return(z.operatorOverloading!==!1||z.moduleExports!==!1)&&ye(S(Q,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,z),nt&&(Ue&&(Q=new Array(le+1).join(`
`)+Q),/^(inline|both)$/.test(Be)&&(Q+=`
//# sourceMappingURL=data:application/json;base64,`+e.btoa(unescape(encodeURIComponent(JSON.stringify(nt))))),Q+=`
//# sourceURL=`+(Ve||"paperscript")),{url:Ve,source:j,code:Q,map:nt}}function K(Q,se,Y){Xt=se;var ee=se.getView(),F=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Q)&&!/\bnew\s+Tool\b/.test(Q)?new fe:null,J=F?F._events:[],re=["onFrame","onResize"].concat(J),ce=[],ne=[],ye,we=typeof Q=="object"?Q:W(Q,Y);Q=we.code;function Ve(Ce,Ue){for(var je in Ce)(Ue||!/^_/.test(je))&&new RegExp("([\\b\\s\\W]|^)"+je.replace(/\$/g,"\\$")+"\\b").test(Q)&&(ce.push(je),ne.push(Ce[je]))}Ve({__$__:N,$__:q,paper:se,tool:F},!0),Ve(se),Q="var module = { exports: {} }; "+Q;var le=r.each(re,function(Ce){new RegExp("\\s+"+Ce+"\\b").test(Q)&&(ce.push(Ce),this.push("module.exports."+Ce+" = "+Ce+";"))},[]).join(`
`);le&&(Q+=`
`+le),Q+=`
return module.exports;`;var Be=Xt.agent;if(s&&(Be.chrome||Be.firefox&&Be.versionNumber<40)){var z=s.createElement("script"),j=s.head||s.getElementsByTagName("head")[0];Be.firefox&&(Q=`
`+Q),z.appendChild(s.createTextNode("document.__paperscript__ = function("+ce+") {"+Q+`
}`)),j.appendChild(z),ye=s.__paperscript__,delete s.__paperscript__,j.removeChild(z)}else ye=Function(ce,Q);var le=ye&&ye.apply(se,ne),xe=le||{};return r.each(J,function(Ce){var Ue=xe[Ce];Ue&&(F[Ce]=Ue)}),ee&&(xe.onResize&&ee.setOnResize(xe.onResize),ee.emit("resize",{size:ee.size,delta:new v}),xe.onFrame&&ee.setOnFrame(xe.onFrame),ee.requestUpdate()),le}function G(Q){if(/^text\/(?:x-|)paperscript$/.test(Q.type)&&o.getAttribute(Q,"ignore")!=="true"){var se=o.getAttribute(Q,"canvas"),Y=s.getElementById(se),ee=Q.src||Q.getAttribute("data-src"),F=o.hasAttribute(Q,"async"),J="data-paper-scope";if(!Y)throw new Error('Unable to find canvas with id "'+se+'"');var re=o.get(Y.getAttribute(J))||new o().setup(Y);return Y.setAttribute(J,re._id),ee?ke.request({url:ee,async:F,mimeType:"text/plain",onLoad:function(ce){K(ce,re,ee)}}):K(Q.innerHTML,re,Q.baseURI),Q.setAttribute("data-paper-ignore","true"),re}}function U(){r.each(s&&s.getElementsByTagName("script"),G)}function ae(Q){return Q?G(Q):U()}return n&&(s.readyState==="complete"?setTimeout(U):Pe.add(n,{load:U})),{compile:W,execute:K,load:ae,parse:S,calculateBinary:N,calculateUnary:q}}.call(this);var Xt=new(o.inject(r.exports,{Base:r,Numerical:f,Key:Ft,DomEvent:Pe,DomElement:Yt,document:s,window:n,Symbol:Se,PlacedSymbol:ue}));return Xt.agent.node&&r2(Xt),typeof t=="function"&&t.amd?t("paper",Xt):i&&(i.exports=Xt),Xt}).call($s,typeof self=="object"?self:null)})(mI);var KF=mI.exports;const qx=t0(KF);class Sc{constructor(e,t,n,s,r){this.point=t,this.normal=n,this.distance=e,this.wind=s,this.t=Xn(r,0,1)}}class Jr{constructor(e,t,n){this.point=e,this.aT=Xn(t,0,1),this.bT=Xn(n,0,1)}getSwapped(){return new Jr(this.point,this.bT,this.aT)}}class tr{constructor(e,t,n,s,r,a,o,l,h,c){this.initialize(e,t,n,s,r,a,o,l,h,c)}initialize(e,t,n,s,r,a,o,l,h,c){return this.a=e,this.b=t,this.atMin=n,this.atMax=s,this.btMin=r,this.btMax=a,this.aMin=o,this.aMax=l,this.bMin=h,this.bMax=c,this}pushSubdivisions(e){const t=this,n=(t.atMax+t.atMin)/2,s=(t.btMax+t.btMin)/2;if(n===this.atMin||n===this.atMax||s===this.btMin||s===this.btMax){e.push(this);return}const r=t.a.positionAt(n),a=t.b.positionAt(s);tr.boxIntersects(t.aMin,r,t.bMin,a)&&e.push(tr.pool.create(t.a,t.b,t.atMin,n,t.btMin,s,t.aMin,r,t.bMin,a)),tr.boxIntersects(r,t.aMax,t.bMin,a)&&e.push(tr.pool.create(t.a,t.b,n,t.atMax,t.btMin,s,r,t.aMax,t.bMin,a)),tr.boxIntersects(t.aMin,r,a,t.bMax)&&e.push(tr.pool.create(t.a,t.b,t.atMin,n,s,t.btMax,t.aMin,r,a,t.bMax)),tr.boxIntersects(r,t.aMax,a,t.bMax)&&e.push(tr.pool.create(t.a,t.b,n,t.atMax,s,t.btMax,r,t.aMax,a,t.bMax)),this.freeToPool()}distance(e){const t=this.atMin-e.atMin,n=this.atMax-e.atMax,s=this.btMin-e.btMin,r=this.btMax-e.btMax;return t*t+n*n+s*s+r*r}clean(){this.a=null,this.b=null,this.aMin=null,this.aMax=null,this.bMin=null,this.bMax=null}static intersect(e,t){if(!e.bounds.intersectsBounds(t.bounds))return[];const n=tr.getIntersectionRanges(e,t),s=[];for(let a=0;a<n.length;a++){const o=n[a];let l=!1;e:for(let h=0;h<s.length;h++){const c=s[h];for(let f=0;f<c.length;f++){const g=c[f];if(o.distance(g)<1e-13){c.push(o),l=!0;break e}}}l||s.push([o])}const r=[];for(let a=0;a<s.length;a++){const o=s[a];let l=0,h=0;for(let g=0;g<o.length;g++)l+=o[g].atMin+o[g].atMax,h+=o[g].btMin+o[g].btMax;l/=2*o.length,h/=2*o.length;const c=e.positionAt(l),f=t.positionAt(h);r.push(new Jr(c.average(f),l,h))}for(let a=0;a<n.length;a++)n[a].freeToPool();return tr.cleanPool(),r}static getIntersectionRanges(e,t){const n=e.getInteriorExtremaTs(),s=t.getInteriorExtremaTs(),r=ie.zip([0].concat(n),n.concat([1])),a=ie.zip([0].concat(s),s.concat([1]));let o=[];for(let l=0;l<r.length;l++)for(let h=0;h<a.length;h++){const c=r[l][0],f=r[l][1],g=a[h][0],v=a[h][1],A=e.positionAt(c),P=e.positionAt(f),w=t.positionAt(g),T=t.positionAt(v);tr.boxIntersects(A,P,w,T)&&o.push(tr.pool.create(e,t,c,f,g,v,A,P,w,T))}for(let l=0;l<50;l++){const h=[];for(let c=o.length-1;c>=0;c--)o[c].pushSubdivisions(h);o=h}return o}static boxIntersects(e,t,n,s){const r=Math.max(Math.min(e.x,t.x),Math.min(n.x,s.x)),a=Math.max(Math.min(e.y,t.y),Math.min(n.y,s.y)),o=Math.min(Math.max(e.x,t.x),Math.max(n.x,s.x)),l=Math.min(Math.max(e.y,t.y),Math.max(n.y,s.y));return o-r>=0&&l-a>=0}static cleanPool(){tr.pool.forEach(e=>e.clean())}freeToPool(){tr.pool.freeToPool(this)}}tr.pool=new us(tr);const qb=new ld("kite");class Pf{constructor(e,t){this.a=e,this.b=t;let n=0,s=1,r=this.apply(n),a=this.apply(s);r>1&&(r=1,n=this.applyInverse(r)),r<0&&(r=0,n=this.applyInverse(r)),a>1&&(a=1,s=this.applyInverse(a)),a<0&&(a=0,s=this.applyInverse(a)),this.t0=n,this.t1=s,e>0?(this.qt0=r,this.qt1=a):(this.qt0=a,this.qt1=r),this.t0<0&&this.t0>-1e-8&&(this.t0=0),this.t0>1&&this.t0<1+1e-8&&(this.t0=1),this.t1<0&&this.t1>-1e-8&&(this.t1=0),this.t1>1&&this.t1<1+1e-8&&(this.t1=1),this.qt0<0&&this.qt0>-1e-8&&(this.qt0=0),this.qt0>1&&this.qt0<1+1e-8&&(this.qt0=1),this.qt1<0&&this.qt1>-1e-8&&(this.qt1=0),this.qt1>1&&this.qt1<1+1e-8&&(this.qt1=1)}apply(e){return this.a*e+this.b}applyInverse(e){return(e-this.b)/this.a}static createLinear(e,t,n,s){const r=(s-t)/(n-e);return new Pf(r,t-e*r)}}const bn=i=>i.toFixed(20),zx=new It;class $r{constructor(e){this.matrix=It.IDENTITY.copy(),this.inverse=It.IDENTITY.copy(),this.matrixTransposed=It.IDENTITY.copy(),this.inverseTransposed=It.IDENTITY.copy(),this.inverseValid=!0,this.transposeValid=!0,this.inverseTransposeValid=!0,this.changeEmitter=new un,e&&this.setMatrix(e)}setMatrix(e){this.matrix.set(e),this.invalidate()}validateMatrix(e){}invalidate(){this.inverseValid=!1,this.transposeValid=!1,this.inverseTransposeValid=!1,this.changeEmitter.emit()}prepend(e){zx.set(this.matrix),this.matrix.set(e),this.matrix.multiplyMatrix(zx),this.invalidate()}prependTranslation(e,t){this.matrix.prependTranslation(e,t),this.invalidate()}append(e){this.matrix.multiplyMatrix(e),this.invalidate()}prependTransform(e){this.prepend(e.matrix)}appendTransform(e){this.append(e.matrix)}applyToCanvasContext(e){e.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m02(),this.matrix.m12())}copy(){const e=new $r(this.matrix);e.inverse=this.inverse,e.matrixTransposed=this.matrixTransposed,e.inverseTransposed=this.inverseTransposed,e.inverseValid=this.inverseValid,e.transposeValid=this.transposeValid,e.inverseTransposeValid=this.inverseTransposeValid}getMatrix(){return this.matrix}getInverse(){return this.inverseValid||(this.inverseValid=!0,this.inverse.set(this.matrix),this.inverse.invert()),this.inverse}getMatrixTransposed(){return this.transposeValid||(this.transposeValid=!0,this.matrixTransposed.set(this.matrix),this.matrixTransposed.transpose()),this.matrixTransposed}getInverseTransposed(){return this.inverseTransposeValid||(this.inverseTransposeValid=!0,this.inverseTransposed.set(this.getInverse()),this.inverseTransposed.transpose()),this.inverseTransposed}isIdentity(){return this.matrix.isFastIdentity()}isFinite(){return this.matrix.isFinite()}transformPosition2(e){return this.matrix.timesVector2(e)}transformDelta2(e){const t=this.getMatrix();return new Oe(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}transformNormal2(e){return this.getInverse().timesTransposeVector2(e).normalize()}transformX(e){const t=this.getMatrix();return t.m00()*e+t.m02()}transformY(e){const t=this.getMatrix();return t.m11()*e+t.m12()}transformDeltaX(e){return this.getMatrix().m00()*e}transformDeltaY(e){return this.getMatrix().m11()*e}transformBounds2(e){return e.transformed(this.matrix)}transformShape(e){return e.transformed(this.matrix)}transformRay2(e){return new Po(this.transformPosition2(e.position),this.transformDelta2(e.direction).normalized())}inversePosition2(e){return this.getInverse().timesVector2(e)}inverseDelta2(e){const t=this.getInverse();return new Oe(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}inverseNormal2(e){return this.matrix.timesTransposeVector2(e).normalize()}inverseX(e){const t=this.getInverse();return t.m00()*e+t.m02()}inverseY(e){const t=this.getInverse();return t.m11()*e+t.m12()}inverseDeltaX(e){return this.getInverse().m00()*e}inverseDeltaY(e){return this.getInverse().m11()*e}inverseBounds2(e){return e.transformed(this.getInverse())}inverseShape(e){return e.transformed(this.getInverse())}inverseRay2(e){return new Po(this.inversePosition2(e.position),this.inverseDelta2(e.direction).normalized())}}function YF(i,e,t){return i.x*(e.y-t.y)+e.x*(t.y-i.y)+t.x*(i.y-e.y)}function jF(i,e,t){return Math.abs(YF(i,e,t))}function nv(i,e,t,n=0){return jF(i,e,t)<=n}function Or(i,e,t,n,s){return(n-t)/(e-i)*(s-i)+t}function Fx(i,e,t){const n=e.distanceSquared(t);if(n===0)return i.distanceSquared(e);const s=((i.x-e.x)*(t.x-e.x)+(i.y-e.y)*(t.y-e.y))/n;let r;return s<0?r=i.distanceSquared(e):s>1?r=i.distanceSquared(t):r=i.distanceSquared(new Oe(e.x+s*(t.x-e.x),e.y+s*(t.y-e.y))),r}function XF(i,e,t,n,s,r,a,o){const l=(g,v,A,P,w,T)=>(T-v)*(A-g)-(P-v)*(w-g);if(l(i,e,s,r,a,o)*l(t,n,s,r,a,o)>0||l(s,r,i,e,t,n)*l(a,o,i,e,t,n)>0)return null;const h=(i-t)*(r-o)-(e-n)*(s-a);if(Math.abs(h)<1e-10)return null;if(i===s&&e===r||i===a&&e===o)return new Oe(i,e);if(t===s&&n===r||t===a&&n===o)return new Oe(t,n);const c=((i*n-e*t)*(s-a)-(i-t)*(s*o-r*a))/h,f=((i*n-e*t)*(r-o)-(e-n)*(s*o-r*a))/h;return new Oe(c,f)}function S2(i,e){return i===0?e===0?null:[]:[-e/i]}function Pc(i,e,t){if(i===0||Math.abs(e/i)>1e7||Math.abs(t/i)>1e7)return S2(e,t);const s=e*e-4*i*t;if(s<0)return[];const r=Math.sqrt(s);return[(-e-r)/(2*i),(-e+r)/(2*i)]}function $o(i,e,t){const n=t-e;let s=(i-e)%n;return s<0&&(s+=n),s+e}function gI(i,e,t){return-$o(-i,-t,-e)}function bS(i,e,t,n){if(i.equalsEpsilon(e,1e-10)||t.equalsEpsilon(n,1e-10))return null;const r=i.x-e.x,a=t.x-n.x,o=i.y-e.y,l=t.y-n.y,h=r*l-o*a;if(Math.abs(h)<1e-10)return null;const c=i.x*e.y-i.y*e.x,f=t.x*n.y-t.y*n.x;return new Oe((c*a-r*f)/h,(c*l-o*f)/h)}function QF(i,e,t){const n=new Oe((i.x+e.x)/2,(i.y+e.y)/2),s=new Oe((e.x+t.x)/2,(e.y+t.y)/2),r=new Oe(n.x+(e.y-i.y),n.y-(e.x-i.x)),a=new Oe(s.x+(t.y-e.y),s.y-(t.x-e.x));return bS(n,r,s,a)}function JF(i){return 180*i/Math.PI}function j1(i){return i>=0?Math.pow(i,1/3):-Math.pow(-i,1/3)}function ZF(i,e,t,n,s=1e-7){let r;if(i===0)r=Pc(e,t,n);else if(i===0||Math.abs(e/i)>1e7||Math.abs(t/i)>1e7||Math.abs(n/i)>1e7)r=Pc(e,t,n);else if(n===0||Math.abs(i/n)>1e7||Math.abs(e/n)>1e7||Math.abs(t/n)>1e7)r=[0].concat(Pc(i,e,t));else{e/=i,t/=i,n/=i;const o=(3*t-e*e)/9,l=(-(27*n)+e*(9*t-2*(e*e)))/54,h=o*o*o+l*l,c=e/3;if(h>s){const f=Math.sqrt(h);r=[j1(l+f)+j1(l-f)-c]}else if(h>-s){const f=j1(l),g=-c-f;r=[-c+2*f,g,g]}else{let f=-o*o*o;f=Math.acos(l/Math.sqrt(f));const g=2*Math.sqrt(-o);r=[-c+g*Math.cos(f/3),-c+g*Math.cos((f+2*Math.PI)/3),-c+g*Math.cos((f+4*Math.PI)/3)]}}return r}const ly=new Oe(0,0),P2=new Oe(0,0),$F=new Oe(0,0);function qm(i){return i>=0&&i<=1}class Ks{constructor(){this.invalidationEmitter=new un}areStrokedBoundsDilated(){return Math.abs(this.startTangent.x*this.startTangent.y)<1e-7&&Math.abs(this.endTangent.x*this.endTangent.y)<1e-7}getBoundsWithTransform(e){return this.transformed(e).getBounds()}slice(e,t){let n=this;return t<1&&(n=n.subdivided(t)[0]),e>0&&(n=n.subdivided(Or(0,t,0,1,e))[1]),n}subdivisions(e){let t=this;const n=[];for(let s=0;s<e.length;s++){const r=e[s],a=t.subdivided(r);n.push(a[0]),t=a[1];for(let o=s+1;o<e.length;o++)e[o]=Or(r,1,0,1,e[o])}return n.push(t),n}subdividedIntoMonotone(){return this.subdivisions(this.getInteriorExtremaTs())}isSufficientlyFlat(e,t){const n=this.start,s=this.positionAt(.5),r=this.end;return Ks.isSufficientlyFlat(e,t,n,s,r)}getArcLength(e,t,n){if(e=e===void 0?1e-10:e,t=t===void 0?1e-8:t,n=n===void 0?15:n,n<=0||this.isSufficientlyFlat(e,t))return this.start.distance(this.end);{const s=this.subdivided(.5);return s[0].getArcLength(e,t,n-1)+s[1].getArcLength(e,t,n-1)}}getDashValues(e,t,n,s){const r=this,a=[];let o=0;const l=ie.sum(e);t=t%l,t<0&&(t+=l);let h=0,c=0,f=!0;function g(){h=(h+1)%e.length,f=!f}for(;t>0;)t>=e[h]?(t-=e[h],g()):(c=t,t=0);const v=f;return function A(P,w,T,D,M){const B=(P+w)/2,O=r.positionAt(B);if(M>14||Ks.isSufficientlyFlat(n,s,T,O,D)){const x=T.distance(O)+O.distance(D);o+=x;let Z=x;for(;c+Z>=e[h];){const de=Or(0,x,P,w,x-Z+e[h]-c);a.push(de),Z-=e[h]-c,c=0,g()}c=c+Z}else A(P,B,T,O,M+1),A(B,w,O,D,M+1)}(0,1,this.start,this.end,0),{values:a,arcLength:o,initiallyInside:v}}toPiecewiseLinearSegments(e,t,n,s,r,a){t=t===void 0?e.minLevels:t,n=n===void 0?e.maxLevels:n,s=s||[];const o=e.pointMap||ie.identity;r=r||o(this.start),a=a||o(this.end);const l=o(this.positionAt(.5));let h=n===0;if(!h&&t<=0&&(h=this.isSufficientlyFlat(e.distanceEpsilon===null||e.distanceEpsilon===void 0?Number.POSITIVE_INFINITY:e.distanceEpsilon,e.curveEpsilon===null||e.curveEpsilon===void 0?Number.POSITIVE_INFINITY:e.curveEpsilon)),h)s.push(new Ki(r,a));else{const c=this.subdivided(.5);c[0].toPiecewiseLinearSegments(e,t-1,n-1,s,r,l),c[1].toPiecewiseLinearSegments(e,t-1,n-1,s,l,a)}return s}toPiecewiseLinearOrArcSegments(e){const t=Ne()({minLevels:2,maxLevels:7,curvatureThreshold:.02,errorThreshold:10,errorPoints:[.25,.75]},e),n=[];return this.toPiecewiseLinearOrArcRecursion(t,t.minLevels,t.maxLevels,n,0,1,this.positionAt(0),this.positionAt(1),this.curvatureAt(0),this.curvatureAt(1)),n}toPiecewiseLinearOrArcRecursion(e,t,n,s,r,a,o,l,h,c){const f=(r+a)/2,g=this.positionAt(f),v=this.curvatureAt(f);if(n<=0||t<=0&&Math.abs(h-v)+Math.abs(v-c)<e.curvatureThreshold*2){const A=Vn.createFromPoints(o,g,l);let P=!1;if(A instanceof Vn){const w=A.radius*A.radius;for(let T=0;T<e.errorPoints.length;T++){const D=e.errorPoints[T],M=this.positionAt(r*(1-D)+a*D);if(Math.abs(M.distanceSquared(A.center)-w)>e.errorThreshold){P=!0;break}}}if(!P){s.push(A);return}}this.toPiecewiseLinearOrArcRecursion(e,t-1,n-1,s,r,f,o,g,h,v),this.toPiecewiseLinearOrArcRecursion(e,t-1,n-1,s,f,a,g,l,v,c)}getClosestPoints(e){return Ks.closestToPoint([this],e,1e-7)}static closestToPoint(e,t,n){const s=n*n;let r=[],a=[],o=Number.POSITIVE_INFINITY,l=!1;for(ie.each(e,h=>{if(h instanceof Ki){const c=h.explicitClosestToPoint(t);ie.each(c,f=>{f.distanceSquared<o?(a=[f],o=f.distanceSquared):f.distanceSquared===o&&a.push(f)})}else{const c=[0].concat(h.getInteriorExtremaTs()).concat([1]);for(let f=0;f<c.length-1;f++){const g=c[f],v=c[f+1],A=h.positionAt(g),P=h.positionAt(v),w=pt.point(A).addPoint(P),T=w.minimumDistanceToPointSquared(t);if(T<=o){const D=w.maximumDistanceToPointSquared(t);D<o&&(o=D,a=[]),r.push({ta:g,tb:v,pa:A,pb:P,segment:h,bounds:w,min:T,max:D})}}}});r.length&&!l;){const h=r;r=[],l=!0;for(const c of h){if(c.min>o)continue;l&&c.pa.distanceSquared(c.pb)>s&&(l=!1);const f=(c.ta+c.tb)/2,g=c.segment.positionAt(f),v=pt.point(c.pa).addPoint(g),A=pt.point(c.pb).addPoint(g),P=v.minimumDistanceToPointSquared(t),w=A.minimumDistanceToPointSquared(t);if(P<=o){const T=v.maximumDistanceToPointSquared(t);T<o&&(o=T,a=[]),r.push({ta:c.ta,tb:f,pa:c.pa,pb:g,segment:c.segment,bounds:v,min:P,max:T})}if(w<=o){const T=A.maximumDistanceToPointSquared(t);T<o&&(o=T,a=[]),r.push({ta:f,tb:c.tb,pa:g,pb:c.pb,segment:c.segment,bounds:A,min:w,max:T})}}}return ie.each(r,h=>{const c=(h.ta+h.tb)/2,f=h.segment.positionAt(c);a.push({segment:h.segment,t:c,closestPoint:f,distanceSquared:t.distanceSquared(f)})}),a}static polynomialGetOverlapCubic(e,t,n,s,r,a,o,l){if(l===0)return Ks.polynomialGetOverlapQuadratic(e,t,n,r,a,o);const h=Math.sign(s/l)*Math.pow(Math.abs(s/l),1/3);if(h===0)return null;const c=(n-h*h*o)/(3*h*h*l);return{a:h,b:c}}static polynomialGetOverlapQuadratic(e,t,n,s,r,a){if(a===0)return Ks.polynomialGetOverlapLinear(e,t,s,r);if(n/a<0)return null;const l=Math.sqrt(n/a);if(l===0)return null;const h=(t-l*r)/(2*l*a);return{a:l,b:h}}static polynomialGetOverlapLinear(e,t,n,s){if(s===0)return e===n?!0:null;const r=t/s;if(r===0)return null;const a=(e-n)/s;return{a:r,b:a}}static intersect(e,t){if(Ki&&e instanceof Ki&&t instanceof Ki)return Ki.intersect(e,t);if(Ki&&e instanceof Ki)return Ki.intersectOther(e,t);if(Ki&&t instanceof Ki)return Ki.intersectOther(t,e).map(e6);if(Vn&&e instanceof Vn&&t instanceof Vn)return Vn.intersect(e,t);if(Zs&&e instanceof Zs&&t instanceof Zs)return Zs.intersect(e,t);if(Ns&&nr&&(e instanceof Ns||e instanceof nr)&&(t instanceof Ns||t instanceof nr)){const n=e instanceof nr?e:e.degreeElevated(),s=t instanceof nr?t:t.degreeElevated(),r=new qx.Curve(n.start.x,n.start.y,n.control1.x,n.control1.y,n.control2.x,n.control2.y,n.end.x,n.end.y),a=new qx.Curve(s.start.x,s.start.y,s.control1.x,s.control1.y,s.control2.x,s.control2.y,s.end.x,s.end.y);return r.getIntersections(a).map(l=>{const h=new Oe(l.point.x,l.point.y);return new Jr(h,l.time,l.intersection.time)})}else return tr.intersect(e,t)}static deserialize(e){return qb[e.type].deserialize(e)}static isSufficientlyFlat(e,t,n,s,r){return!(Fx(s,n,r)/n.distanceSquared(r)>t||Fx(s,n,r)>e)}static filterClosestToPointResult(e){if(e.length===0)return[];const t=ie.minBy(e,n=>n.distanceSquared).distanceSquared;return ie.uniqWith(e.filter(n=>Math.abs(n.distanceSquared-t)<1e-11),(n,s)=>n.closestPoint.distanceSquared(s.closestPoint)<1e-11)}}function e6(i){return i.getSwapped()}const hc=Math.PI*2;class Vn extends Ks{constructor(e,t,n,s,r){super(),this._center=e,this._radius=t,this._startAngle=n,this._endAngle=s,this._anticlockwise=r,this.invalidate()}setCenter(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this._center}setRadius(e){return this._radius!==e&&(this._radius=e,this.invalidate()),this}set radius(e){this.setRadius(e)}get radius(){return this.getRadius()}getRadius(){return this._radius}setStartAngle(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}set startAngle(e){this.setStartAngle(e)}get startAngle(){return this.getStartAngle()}getStartAngle(){return this._startAngle}setEndAngle(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}set endAngle(e){this.setEndAngle(e)}get endAngle(){return this.getEndAngle()}getEndAngle(){return this._endAngle}setAnticlockwise(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}set anticlockwise(e){this.setAnticlockwise(e)}get anticlockwise(){return this.getAnticlockwise()}getAnticlockwise(){return this._anticlockwise}positionAt(e){return this.positionAtAngle(this.angleAt(e))}tangentAt(e){return this.tangentAtAngle(this.angleAt(e))}curvatureAt(e){return(this._anticlockwise?-1:1)/this._radius}subdivided(e){if(e===0||e===1)return[this];const t=this.angleAt(0),n=this.angleAt(e),s=this.angleAt(1);return[new Vn(this._center,this._radius,t,n,this._anticlockwise),new Vn(this._center,this._radius,n,s,this._anticlockwise)]}invalidate(){this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._bounds=null,this._svgPathFragment=null,this._radius<0&&(this._radius=-this._radius,this._startAngle+=Math.PI,this._endAngle+=Math.PI),this.invalidationEmitter.emit()}getStart(){return this._start===null&&(this._start=this.positionAtAngle(this._startAngle)),this._start}get start(){return this.getStart()}getEnd(){return this._end===null&&(this._end=this.positionAtAngle(this._endAngle)),this._end}get end(){return this.getEnd()}getStartTangent(){return this._startTangent===null&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this._endTangent===null&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}get endTangent(){return this.getEndTangent()}getActualEndAngle(){return this._actualEndAngle===null&&(this._actualEndAngle=Vn.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}get actualEndAngle(){return this.getActualEndAngle()}getIsFullPerimeter(){return this._isFullPerimeter===null&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=Math.PI*2||this._anticlockwise&&this._startAngle-this._endAngle>=Math.PI*2),this._isFullPerimeter}get isFullPerimeter(){return this.getIsFullPerimeter()}getAngleDifference(){return this._angleDifference===null&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=Math.PI*2)),this._angleDifference}get angleDifference(){return this.getAngleDifference()}getBounds(){return this._bounds===null&&(this._bounds=pt.NOTHING.copy().withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle&&(this.includeBoundsAtAngle(0),this.includeBoundsAtAngle(Math.PI/2),this.includeBoundsAtAngle(Math.PI),this.includeBoundsAtAngle(3*Math.PI/2))),this._bounds}get bounds(){return this.getBounds()}getNondegenerateSegments(){return this._radius<=0||this._startAngle===this._endAngle?[]:[this]}includeBoundsAtAngle(e){this.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this._center.plus(Oe.createPolar(this._radius,e))))}mapAngle(e){return Math.abs($o(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs($o(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?gI(e,this._startAngle-2*Math.PI,this._startAngle):$o(e,this._startAngle,this._startAngle+2*Math.PI)}tAtAngle(e){return(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle)}angleAt(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}positionAtAngle(e){return this._center.plus(Oe.createPolar(this._radius,e))}tangentAtAngle(e){const t=Oe.createPolar(1,e);return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}containsAngle(e){const t=this._anticlockwise?e-this._endAngle:e-this._startAngle;return $o(t,0,Math.PI*2)<=this.angleDifference}getSVGPathFragment(){if(!this._svgPathFragment){const t=this._anticlockwise?"0":"1";let n;if(this.angleDifference<Math.PI*2-.01)n=this.angleDifference<Math.PI?"0":"1",this._svgPathFragment=`A ${bn(this._radius)} ${bn(this._radius)} 0 ${n} ${t} ${bn(this.end.x)} ${bn(this.end.y)}`;else{const s=(this._startAngle+this._endAngle)/2,r=this._center.plus(Oe.createPolar(this._radius,s));n="0";const a=`A ${bn(this._radius)} ${bn(this._radius)} 0 ${n} ${t} ${bn(r.x)} ${bn(r.y)}`,o=`A ${bn(this._radius)} ${bn(this._radius)} 0 ${n} ${t} ${bn(this.end.x)} ${bn(this.end.y)}`;this._svgPathFragment=`${a} ${o}`}}return this._svgPathFragment}strokeLeft(e){return[new Vn(this._center,this._radius+(this._anticlockwise?1:-1)*e/2,this._startAngle,this._endAngle,this._anticlockwise)]}strokeRight(e){return[new Vn(this._center,this._radius+(this._anticlockwise?-1:1)*e/2,this._endAngle,this._startAngle,!this._anticlockwise)]}getInteriorExtremaTs(){const e=[];return ie.each([0,Math.PI/2,Math.PI,3*Math.PI/2],t=>{if(this.containsAngle(t)){const n=this.tAtAngle(t),s=1e-10;n>s&&n<1-s&&e.push(n)}}),e.sort()}intersection(e){const t=[],s=e.position.minus(this._center),r=e.direction.dot(s),a=s.magnitudeSquared,o=4*r*r-4*(a-this._radius*this._radius);if(o<0)return t;const l=e.direction.dot(this._center)-e.direction.dot(e.position),h=Math.sqrt(o)/2,c=l-h,f=l+h;if(f<0)return t;const g=e.pointAtDistance(f),v=g.minus(this._center).normalized(),A=v.angle;if(c<0)this.containsAngle(A)&&t.push(new Sc(f,g,v.negated(),this._anticlockwise?-1:1,this.tAtAngle(A)));else{const P=e.pointAtDistance(c),w=P.minus(this._center).normalized(),T=w.angle;this.containsAngle(T)&&t.push(new Sc(c,P,w,this._anticlockwise?1:-1,this.tAtAngle(T))),this.containsAngle(A)&&t.push(new Sc(f,g,v.negated(),this._anticlockwise?-1:1,this.tAtAngle(A)))}return t}windingIntersection(e){let t=0;const n=this.intersection(e);return ie.each(n,s=>{t+=s.wind}),t}writeToContext(e){e.arc(this._center.x,this._center.y,this._radius,this._startAngle,this._endAngle,this._anticlockwise)}transformed(e){const t=e.timesVector2(Oe.createPolar(1,this._startAngle)).minus(e.timesVector2(Oe.ZERO)).angle;let n=e.timesVector2(Oe.createPolar(1,this._endAngle)).minus(e.timesVector2(Oe.ZERO)).angle;const s=e.getDeterminant()>=0?this._anticlockwise:!this._anticlockwise;Math.abs(this._endAngle-this._startAngle)===Math.PI*2&&(n=s?t-Math.PI*2:t+Math.PI*2);const r=e.getScaleVector();if(r.x!==r.y){const a=r.x*this._radius,o=r.y*this._radius;return new Zs(e.timesVector2(this._center),a,o,0,t,n,s)}else{const a=r.x*this._radius;return new Vn(e.timesVector2(this._center),a,t,n,s)}}getSignedAreaFragment(){const e=this._startAngle,t=this.getActualEndAngle();return .5*this._radius*(this._radius*(t-e)+this._center.x*(Math.sin(t)-Math.sin(e))-this._center.y*(Math.cos(t)-Math.cos(e)))}reversed(){return new Vn(this._center,this._radius,this._endAngle,this._startAngle,!this._anticlockwise)}getArcLength(){return this.getAngleDifference()*this._radius}toPiecewiseLinearOrArcSegments(){return[this]}serialize(){return{type:"Arc",centerX:this._center.x,centerY:this._center.y,radius:this._radius,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}getOverlaps(e,t=1e-6){return e instanceof Vn?Vn.getOverlaps(this,e):null}getConicMatrix(){const e=this.center.x,t=this.center.y,n=1,s=0,r=1,a=-2*e,o=-2*t,l=e*e+t*t-this.radius*this.radius;return It.rowMajor(n,s/2,a/2,s/2,r,o/2,a/2,o/2,l)}static deserialize(e){return new Vn(new Oe(e.centerX,e.centerY),e.radius,e.startAngle,e.endAngle,e.anticlockwise)}static computeActualEndAngle(e,t,n){return n?e>t?t:e<t?t-2*Math.PI:e:e<t?t:e>t?t+Math.PI*2:e}static getPartialOverlap(e,t,n,s,r){const a=n<t,o=a?n:t,l=a?t:n,h=o,c=Math.min(e,l);return c<h+1e-8?[]:[Pf.createLinear(Xn(Or(0,e,0,1,h),0,1),Xn(Or(t,n,s,r,h),0,1),Xn(Or(0,e,0,1,c),0,1),Xn(Or(t,n,s,r,c),0,1))]}static getAngularOverlaps(e,t,n,s){let r=t-e;const a=r<0?-1:1;r*=a;const o=$o(a*(n-e),0,hc),l=a*(s-n)+o;let h;return l<-1e-10?(h=-o/(l-o),Vn.getPartialOverlap(r,o,0,0,h).concat(Vn.getPartialOverlap(r,hc,l+hc,h,1))):l>hc+1e-10?(h=(hc-o)/(l-o),Vn.getPartialOverlap(r,o,hc,0,h).concat(Vn.getPartialOverlap(r,0,l-hc,h,1))):Vn.getPartialOverlap(r,o,l,0,1)}static getOverlaps(e,t){return e._center.distance(t._center)>1e-4||Math.abs(e._radius-t._radius)>1e-4?[]:Vn.getAngularOverlaps(e._startAngle,e.getActualEndAngle(),t._startAngle,t.getActualEndAngle())}static getCircleIntersectionPoint(e,t,n,s){const r=n.minus(e),a=r.magnitude;let o=[];if(!(a<1e-10||a>t+s+1e-10))if(a>t+s-1e-10)o=[e.blend(n,t/a)];else{const l=.5*(a*a-s*s+t*t)/a,h=a*a-s*s+t*t,c=4*a*a*t*t-h*h,f=e.blend(n,l/a);if(c>=1e-10){const g=Math.sqrt(c)/a/2,v=r.perpendicular.setMagnitude(g);o=[f.plus(v),f.minus(v)]}else c>-1e-10&&(o=[f])}return o}static intersect(e,t){const s=[];if(e._center.equalsEpsilon(t._center,1e-7)&&Math.abs(e._radius-t._radius)<1e-7){const r=e.positionAt(0),a=e.positionAt(1),o=t.positionAt(0),l=t.positionAt(1);r.equalsEpsilon(o,1e-7)&&s.push(new Jr(r.average(o),0,0)),r.equalsEpsilon(l,1e-7)&&s.push(new Jr(r.average(l),0,1)),a.equalsEpsilon(o,1e-7)&&s.push(new Jr(a.average(o),1,0)),a.equalsEpsilon(l,1e-7)&&s.push(new Jr(a.average(l),1,1))}else{const r=Vn.getCircleIntersectionPoint(e._center,e._radius,t._center,t._radius);for(let a=0;a<r.length;a++){const o=r[a],l=o.minus(e._center).angle,h=o.minus(t._center).angle;e.containsAngle(l)&&t.containsAngle(h)&&s.push(new Jr(o,e.tAtAngle(l),t.tAtAngle(h)))}}return s}static createFromPoints(e,t,n){const s=QF(e,t,n);if(s===null)return new Ki(e,n);{const r=e.minus(s),a=t.minus(s),o=n.minus(s),l=r.angle,h=a.angle,c=o.angle,f=(r.magnitude+a.magnitude+o.magnitude)/3,g=new Vn(s,f,l,c,!1);return g.containsAngle(h)?g:new Vn(s,f,l,c,!0)}}}const t6=It.rowMajor(1,0,0,0,1,0,0,0,-1);class Zs extends Ks{constructor(e,t,n,s,r,a,o){super(),this._center=e,this._radiusX=t,this._radiusY=n,this._rotation=s,this._startAngle=r,this._endAngle=a,this._anticlockwise=o,this.invalidate()}setCenter(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this._center}setRadiusX(e){return this._radiusX!==e&&(this._radiusX=e,this.invalidate()),this}set radiusX(e){this.setRadiusX(e)}get radiusX(){return this.getRadiusX()}getRadiusX(){return this._radiusX}setRadiusY(e){return this._radiusY!==e&&(this._radiusY=e,this.invalidate()),this}set radiusY(e){this.setRadiusY(e)}get radiusY(){return this.getRadiusY()}getRadiusY(){return this._radiusY}setRotation(e){return this._rotation!==e&&(this._rotation=e,this.invalidate()),this}set rotation(e){this.setRotation(e)}get rotation(){return this.getRotation()}getRotation(){return this._rotation}setStartAngle(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}set startAngle(e){this.setStartAngle(e)}get startAngle(){return this.getStartAngle()}getStartAngle(){return this._startAngle}setEndAngle(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}set endAngle(e){this.setEndAngle(e)}get endAngle(){return this.getEndAngle()}getEndAngle(){return this._endAngle}setAnticlockwise(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}set anticlockwise(e){this.setAnticlockwise(e)}get anticlockwise(){return this.getAnticlockwise()}getAnticlockwise(){return this._anticlockwise}positionAt(e){return this.positionAtAngle(this.angleAt(e))}tangentAt(e){return this.tangentAtAngle(this.angleAt(e))}curvatureAt(e){const t=this.angleAt(e),n=this._radiusX*Math.sin(t),s=this._radiusY*Math.cos(t),r=Math.pow(s*s+n*n,3/2);return(this._anticlockwise?-1:1)*this._radiusX*this._radiusY/r}subdivided(e){if(e===0||e===1)return[this];const t=this.angleAt(0),n=this.angleAt(e),s=this.angleAt(1);return[new Zs(this._center,this._radiusX,this._radiusY,this._rotation,t,n,this._anticlockwise),new Zs(this._center,this._radiusX,this._radiusY,this._rotation,n,s,this._anticlockwise)]}invalidate(){if(this._unitTransform=null,this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._unitArcSegment=null,this._bounds=null,this._svgPathFragment=null,this._radiusX<0&&(this._radiusX=-this._radiusX,this._startAngle=Math.PI-this._startAngle,this._endAngle=Math.PI-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusY<0&&(this._radiusY=-this._radiusY,this._startAngle=-this._startAngle,this._endAngle=-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusX<this._radiusY){this._rotation+=Math.PI/2,this._startAngle-=Math.PI/2,this._endAngle-=Math.PI/2;const e=this._radiusX;this._radiusX=this._radiusY,this._radiusY=e}if(this._radiusX<this._radiusY)throw new Error("Not verified to work if radiusX < radiusY");this.invalidationEmitter.emit()}getUnitTransform(){return this._unitTransform===null&&(this._unitTransform=Zs.computeUnitTransform(this._center,this._radiusX,this._radiusY,this._rotation)),this._unitTransform}get unitTransform(){return this.getUnitTransform()}getStart(){return this._start===null&&(this._start=this.positionAtAngle(this._startAngle)),this._start}get start(){return this.getStart()}getEnd(){return this._end===null&&(this._end=this.positionAtAngle(this._endAngle)),this._end}get end(){return this.getEnd()}getStartTangent(){return this._startTangent===null&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this._endTangent===null&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}get endTangent(){return this.getEndTangent()}getActualEndAngle(){return this._actualEndAngle===null&&(this._actualEndAngle=Vn.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}get actualEndAngle(){return this.getActualEndAngle()}getIsFullPerimeter(){return this._isFullPerimeter===null&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=Math.PI*2||this._anticlockwise&&this._startAngle-this._endAngle>=Math.PI*2),this._isFullPerimeter}get isFullPerimeter(){return this.getIsFullPerimeter()}getAngleDifference(){return this._angleDifference===null&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=Math.PI*2)),this._angleDifference}get angleDifference(){return this.getAngleDifference()}getUnitArcSegment(){return this._unitArcSegment===null&&(this._unitArcSegment=new Vn(Oe.ZERO,1,this._startAngle,this._endAngle,this._anticlockwise)),this._unitArcSegment}get unitArcSegment(){return this.getUnitArcSegment()}getBounds(){if(this._bounds===null&&(this._bounds=pt.NOTHING.withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle)){const e=Math.atan(-(this._radiusY/this._radiusX)*Math.tan(this._rotation)),t=Math.atan(this._radiusY/this._radiusX/Math.tan(this._rotation));this.possibleExtremaAngles=[e,e+Math.PI,t,t+Math.PI],ie.each(this.possibleExtremaAngles,this.includeBoundsAtAngle.bind(this))}return this._bounds}get bounds(){return this.getBounds()}getNondegenerateSegments(){if(this._radiusX<=0||this._radiusY<=0||this._startAngle===this._endAngle)return[];if(this._radiusX===this._radiusY){const e=this._startAngle+this._rotation;let t=this._endAngle+this._rotation;return Math.abs(this._endAngle-this._startAngle)===Math.PI*2&&(t=this._anticlockwise?e-Math.PI*2:e+Math.PI*2),[new Vn(this._center,this._radiusX,e,t,this._anticlockwise)]}else return[this]}includeBoundsAtAngle(e){this.unitArcSegment.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this.positionAtAngle(e)))}mapAngle(e){return Math.abs($o(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs($o(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?gI(e,this._startAngle-2*Math.PI,this._startAngle):$o(e,this._startAngle,this._startAngle+2*Math.PI)}tAtAngle(e){return(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle)}angleAt(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}positionAtAngle(e){return this.getUnitTransform().transformPosition2(Oe.createPolar(1,e))}tangentAtAngle(e){const t=this.getUnitTransform().transformNormal2(Oe.createPolar(1,e));return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}offsetTo(e,t){const s=[],r=[];for(let a=0;a<32;a++){let o=a/31;t&&(o=1-o);const l=this.angleAt(o);s.push(this.positionAtAngle(l).plus(this.tangentAtAngle(l).perpendicular.normalized().times(e))),a>0&&r.push(new Ki(s[a-1],s[a]))}return r}getSVGPathFragment(){if(!this._svgPathFragment){const t=this._anticlockwise?"0":"1";let n;const s=JF(this._rotation);if(this.getAngleDifference()<Math.PI*2-.01)n=this.getAngleDifference()<Math.PI?"0":"1",this._svgPathFragment=`A ${bn(this._radiusX)} ${bn(this._radiusY)} ${s} ${n} ${t} ${bn(this.getEnd().x)} ${bn(this.getEnd().y)}`;else{const r=(this._startAngle+this._endAngle)/2,a=this.positionAtAngle(r);n="0";const o=`A ${bn(this._radiusX)} ${bn(this._radiusY)} ${s} ${n} ${t} ${bn(a.x)} ${bn(a.y)}`,l=`A ${bn(this._radiusX)} ${bn(this._radiusY)} ${s} ${n} ${t} ${bn(this.getEnd().x)} ${bn(this.getEnd().y)}`;this._svgPathFragment=`${o} ${l}`}}return this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=[];return ie.each(this.possibleExtremaAngles,t=>{if(this.unitArcSegment.containsAngle(t)){const n=this.tAtAngle(t),s=1e-10;n>s&&n<1-s&&e.push(n)}}),e.sort()}intersection(e){const t=this.getUnitTransform(),n=t.inverseRay2(e),s=this.getUnitArcSegment().intersection(n);return ie.map(s,r=>{const a=t.transformPosition2(r.point),o=e.position.distance(a),l=t.inverseNormal2(r.normal);return new Sc(o,a,l,r.wind,r.t)})}windingIntersection(e){const t=this.getUnitTransform().inverseRay2(e);return this.getUnitArcSegment().windingIntersection(t)}writeToContext(e){e.ellipse?e.ellipse(this._center.x,this._center.y,this._radiusX,this._radiusY,this._rotation,this._startAngle,this._endAngle,this._anticlockwise):(this.getUnitTransform().getMatrix().canvasAppendTransform(e),e.arc(0,0,1,this._startAngle,this._endAngle,this._anticlockwise),this.getUnitTransform().getInverse().canvasAppendTransform(e))}transformed(e){const t=e.timesVector2(Oe.createPolar(this._radiusX,this._rotation)).minus(e.timesVector2(Oe.ZERO)),n=e.timesVector2(Oe.createPolar(this._radiusY,this._rotation+Math.PI/2)).minus(e.timesVector2(Oe.ZERO)),s=t.angle,r=t.magnitude,a=n.magnitude,o=e.getDeterminant()<0,l=o?!this._anticlockwise:this._anticlockwise,h=o?-this._startAngle:this._startAngle;let c=o?-this._endAngle:this._endAngle;return Math.abs(this._endAngle-this._startAngle)===Math.PI*2&&(c=l?h-Math.PI*2:h+Math.PI*2),new Zs(e.timesVector2(this._center),r,a,s,h,c,l)}getSignedAreaFragment(){const e=this._startAngle,t=this.getActualEndAngle(),n=Math.sin(e),s=Math.sin(t),r=Math.cos(e),a=Math.cos(t);return .5*(this._radiusX*this._radiusY*(t-e)+Math.cos(this._rotation)*(this._radiusX*this._center.y*(r-a)+this._radiusY*this._center.x*(s-n))+Math.sin(this._rotation)*(this._radiusX*this._center.x*(a-r)+this._radiusY*this._center.y*(s-n)))}reversed(){return new Zs(this._center,this._radiusX,this._radiusY,this._rotation,this._endAngle,this._startAngle,!this._anticlockwise)}serialize(){return{type:"EllipticalArc",centerX:this._center.x,centerY:this._center.y,radiusX:this._radiusX,radiusY:this._radiusY,rotation:this._rotation,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}getOverlaps(e,t=1e-6){return e instanceof Zs?Zs.getOverlaps(this,e):null}getConicMatrix(){const t=Zs.computeUnitMatrix(this._center,this._radiusX,this._radiusY,this._rotation).inverted();return t.transposed().multiplyMatrix(t6).multiplyMatrix(t)}static deserialize(e){return new Zs(new Oe(e.centerX,e.centerY),e.radiusX,e.radiusY,e.rotation,e.startAngle,e.endAngle,e.anticlockwise)}static getOverlapType(e,t,n=1e-4){if(e._center.distance(t._center)<n){const s=Math.abs(e._radiusX-t._radiusX)<n&&Math.abs(e._radiusY-t._radiusY)<n,r=Math.abs(e._radiusX-t._radiusY)<n&&Math.abs(e._radiusY-t._radiusX)<n;if(s&&Math.abs($o(e._rotation-t._rotation+Math.PI/2,0,Math.PI)-Math.PI/2)<n)return eo.MATCHING_OVERLAP;if(r&&Math.abs($o(e._rotation-t._rotation,0,Math.PI)-Math.PI/2)<n)return eo.OPPOSITE_OVERLAP}return eo.NONE}static getOverlaps(e,t){return Zs.getOverlapType(e,t)===eo.NONE?[]:Vn.getAngularOverlaps(e._startAngle+e._rotation,e.getActualEndAngle()+e._rotation,t._startAngle+t._rotation,t.getActualEndAngle()+t._rotation)}static intersect(e,t,n=1e-10){if(Zs.getOverlapType(e,t,n)===eo.NONE)return tr.intersect(e,t);{const r=[],a=e.positionAt(0),o=e.positionAt(1),l=t.positionAt(0),h=t.positionAt(1);return a.equalsEpsilon(l,n)&&r.push(new Jr(a.average(l),0,0)),a.equalsEpsilon(h,n)&&r.push(new Jr(a.average(h),0,1)),o.equalsEpsilon(l,n)&&r.push(new Jr(o.average(l),1,0)),o.equalsEpsilon(h,n)&&r.push(new Jr(o.average(h),1,1)),r}}static computeUnitMatrix(e,t,n,s){return It.translationFromVector(e).timesMatrix(It.rotation2(s)).timesMatrix(It.scaling(t,n))}static computeUnitTransform(e,t,n,s){return new $r(Zs.computeUnitMatrix(e,t,n,s))}}class eo extends js{}eo.MATCHING_OVERLAP=new eo;eo.OPPOSITE_OVERLAP=new eo;eo.NONE=new eo;eo.enumeration=new Sr(eo);let Ki=class wo extends Ks{constructor(e,t){super(),this._start=e,this._end=t,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){return this._start.plus(this._end.minus(this._start).times(e))}tangentAt(e){return this.getStartTangent()}curvatureAt(e){return 0}subdivided(e){if(e===0||e===1)return[this];const t=this.positionAt(e);return[new wo(this._start,t),new wo(t,this._end)]}invalidate(){this._tangent=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){return this._tangent===null&&(this._tangent=this._end.minus(this._start).normalized()),this._tangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this.getStartTangent()}get endTangent(){return this.getEndTangent()}getBounds(){return this._bounds===null&&(this._bounds=pt.NOTHING.copy().addPoint(this._start).addPoint(this._end)),this._bounds}get bounds(){return this.getBounds()}getBoundsWithTransform(e){const t=pt.NOTHING.copy();return t.addPoint(e.multiplyVector2(P2.set(this._start))),t.addPoint(e.multiplyVector2(P2.set(this._end))),t}getNondegenerateSegments(){return this._start.equals(this._end)?[]:[this]}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`L ${bn(this._end.x)} ${bn(this._end.y)}`),this._svgPathFragment}strokeLeft(e){const t=this.getEndTangent().perpendicular.negated().times(e/2);return[new wo(this._start.plus(t),this._end.plus(t))]}strokeRight(e){const t=this.getStartTangent().perpendicular.times(e/2);return[new wo(this._end.plus(t),this._start.plus(t))]}getInteriorExtremaTs(){return[]}intersection(e){const t=[],n=this._start,r=this._end.minus(n);if(r.magnitudeSquared===0)return t;const a=e.direction.y*r.x-e.direction.x*r.y;if(a===0)return t;const o=(e.direction.x*(n.y-e.position.y)-e.direction.y*(n.x-e.position.x))/a;if(o<0||o>=1)return t;const l=(r.x*(n.y-e.position.y)-r.y*(n.x-e.position.x))/a;if(l<1e-8)return t;const h=r.perpendicular,c=n.plus(r.times(o)),f=(h.dot(e.direction)>0?h.negated():h).normalized(),g=e.direction.perpendicular.dot(r)<0?1:-1;return t.push(new Sc(l,c,f,g,o)),t}windingIntersection(e){const t=this.intersection(e);return t.length?t[0].wind:0}writeToContext(e){e.lineTo(this._end.x,this._end.y)}transformed(e){return new wo(e.timesVector2(this._start),e.timesVector2(this._end))}explicitClosestToPoint(e){const t=this._end.minus(this._start);let n=e.minus(this._start).dot(t)/t.magnitudeSquared;n=Xn(n,0,1);const s=this.positionAt(n);return[{segment:this,t:n,closestPoint:s,distanceSquared:e.distanceSquared(s)}]}getSignedAreaFragment(){return 1/2*(this._start.x*this._end.y-this._start.y*this._end.x)}reparameterized(e,t){return new wo(this.positionAt(t),this.positionAt(e+t))}reversed(){return new wo(this._end,this._start)}polarToCartesian(e){return this._start.x===this._end.x?[new wo(Oe.createPolar(this._start.y,this._start.x),Oe.createPolar(this._end.y,this._end.x))]:this._start.y===this._end.y?[new Vn(Oe.ZERO,this._start.y,this._start.x,this._end.x,this._start.x>this._end.x)]:this.toPiecewiseLinearSegments(e)}getArcLength(){return this.start.distance(this.end)}toPiecewiseLinearOrArcSegments(){return[this]}serialize(){return{type:"Line",startX:this._start.x,startY:this._start.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e,t=1e-6){return e instanceof wo?wo.getOverlaps(this,e):null}getClosestPoints(e){const t=this._end.minus(this._start),n=t.normalized(),s=e.minus(this._start).dot(n),r=Xn(s/t.magnitude,0,1),a=this.positionAt(r);return[{segment:this,t:r,closestPoint:a,distanceSquared:a.distanceSquared(e)}]}static deserialize(e){return new wo(new Oe(e.startX,e.startY),new Oe(e.endX,e.endY))}static getOverlaps(e,t,n=1e-6){const s=[],r=e._start.x,a=-1*e._start.x+e._end.x,o=e._start.y,l=-1*e._start.y+e._end.y,h=t._start.x,c=-1*t._start.x+t._end.x,f=t._start.y,g=-1*t._start.y+t._end.y,v=Math.abs(Math.max(e._start.x,e._end.x,t._start.x,t._end.x)-Math.min(e._start.x,e._end.x,t._start.x,t._end.x)),A=Math.abs(Math.max(e._start.y,e._end.y,t._start.y,t._end.y)-Math.min(e._start.y,e._end.y,t._start.y,t._end.y)),P=Ks.polynomialGetOverlapLinear(r,a,h,c),w=Ks.polynomialGetOverlapLinear(o,l,f,g);let T;if(v>A?T=P===null||P===!0?w:P:T=w===null||w===!0?P:w,T===null||T===!0)return s;const D=T.a,M=T.b,B=h+M*c-r,O=D*c-a,x=f+M*g-o,Z=D*g-l;if(Math.abs(B)>n||Math.abs(O+B)>n||Math.abs(x)>n||Math.abs(Z+x)>n)return s;const de=M,$=D+M;return de>1&&$>1||de<0&&$<0?s:[new Pf(D,M)]}static intersect(e,t){const n=XF(e.start.x,e.start.y,e.end.x,e.end.y,t.start.x,t.start.y,t.end.x,t.end.y);if(n!==null){const s=e.explicitClosestToPoint(n)[0].t,r=t.explicitClosestToPoint(n)[0].t;return[new Jr(n,s,r)]}else return[]}static intersectOther(e,t){const n=e.end.minus(e.start),s=n.magnitude,r=new Po(e.start,n.normalize()),a=t.intersection(r),o=[];for(let l=0;l<a.length;l++){const h=a[l],c=h.distance/s;c>1e-8&&c<1-1e-8&&o.push(new Jr(h.point,c,h.t))}return o}};class Ns extends Ks{constructor(e,t,n){super(),this._start=e,this._control=t,this._end=n,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setControl(e){return this._control.equals(e)||(this._control=e,this.invalidate()),this}set control(e){this.setControl(e)}get control(){return this.getControl()}getControl(){return this._control}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){const t=1-e;return this._start.times(t*t).plus(this._control.times(2*t*e)).plus(this._end.times(e*e))}tangentAt(e){return this._control.minus(this._start).times(2*(1-e)).plus(this._end.minus(this._control).times(2*e))}curvatureAt(e){if(Math.abs(e-.5)>.5-1e-7){const n=e<.5,s=n?this._start:this._end,r=this._control,a=n?this._end:this._start,o=r.minus(s),l=o.magnitude;return(n?-1:1)*o.perpendicular.normalized().dot(a.minus(r))*(this.degree-1)/(this.degree*l*l)}else return this.subdivided(e)[0].curvatureAt(1)}subdivided(e){if(e===0||e===1)return[this];const t=this._start.blend(this._control,e),n=this._control.blend(this._end,e),s=t.blend(n,e);return[new Ns(this._start,t,s),new Ns(s,n,this._end)]}invalidate(){this._startTangent=null,this._endTangent=null,this._tCriticalX=null,this._tCriticalY=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){if(this._startTangent===null){const e=this._start.equals(this._control);this._startTangent=e?this._end.minus(this._start).normalized():this._control.minus(this._start).normalized()}return this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){if(this._endTangent===null){const e=this._end.equals(this._control);this._endTangent=e?this._end.minus(this._start).normalized():this._end.minus(this._control).normalized()}return this._endTangent}get endTangent(){return this.getEndTangent()}getTCriticalX(){return this._tCriticalX===null&&(this._tCriticalX=Ns.extremaT(this._start.x,this._control.x,this._end.x)),this._tCriticalX}get tCriticalX(){return this.getTCriticalX()}getTCriticalY(){return this._tCriticalY===null&&(this._tCriticalY=Ns.extremaT(this._start.y,this._control.y,this._end.y)),this._tCriticalY}get tCriticalY(){return this.getTCriticalY()}getNondegenerateSegments(){const e=this._start,t=this._control,n=this._end,s=e.equals(n),r=e.equals(t),a=e.equals(t);if(s&&r)return[];if(s){const o=this.positionAt(.5);return[new Ki(e,o),new Ki(o,n)]}else if(nv(e,t,n)){if(r||a)return[new Ki(e,n)];const o=n.minus(e),l=t.minus(e).dot(o.normalized())/o.magnitude,h=Ns.extremaT(0,l,1);if(!isNaN(h)&&h>0&&h<1){const c=this.positionAt(h);return ie.flatten([new Ki(e,c).getNondegenerateSegments(),new Ki(c,n).getNondegenerateSegments()])}else return[new Ki(e,n)]}else return[this]}getBounds(){if(this._bounds===null){this._bounds=new pt(Math.min(this._start.x,this._end.x),Math.min(this._start.y,this._end.y),Math.max(this._start.x,this._end.x),Math.max(this._start.y,this._end.y));const e=this.getTCriticalX(),t=this.getTCriticalY();!isNaN(e)&&e>0&&e<1&&(this._bounds=this._bounds.withPoint(this.positionAt(e))),!isNaN(t)&&t>0&&t<1&&(this._bounds=this._bounds.withPoint(this.positionAt(t)))}return this._bounds}get bounds(){return this.getBounds()}offsetTo(e,t){let n=[this];const s=5;for(let a=0;a<s;a++)n=ie.flatten(ie.map(n,o=>o.subdivided(.5)));let r=ie.map(n,a=>a.approximateOffset(e));return t&&(r.reverse(),r=ie.map(r,a=>a.reversed())),r}degreeElevated(){return new nr(this._start,this._start.plus(this._control.timesScalar(2)).dividedScalar(3),this._end.plus(this._control.timesScalar(2)).dividedScalar(3),this._end)}approximateOffset(e){return new Ns(this._start.plus((this._start.equals(this._control)?this._end.minus(this._start):this._control.minus(this._start)).perpendicular.normalized().times(e)),this._control.plus(this._end.minus(this._start).perpendicular.normalized().times(e)),this._end.plus((this._end.equals(this._control)?this._end.minus(this._start):this._end.minus(this._control)).perpendicular.normalized().times(e)))}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`Q ${bn(this._control.x)} ${bn(this._control.y)} ${bn(this._end.x)} ${bn(this._end.y)}`),this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=[],n=this.getTCriticalX(),s=this.getTCriticalY();return!isNaN(n)&&n>1e-10&&n<1-1e-10&&e.push(this.tCriticalX),!isNaN(s)&&s>1e-10&&s<1-1e-10&&e.push(this.tCriticalY),e.sort()}intersection(e){const t=[],n=It.rotation2(-e.direction.angle).timesMatrix(It.translation(-e.position.x,-e.position.y)),s=n.timesVector2(this._start),r=n.timesVector2(this._control),a=n.timesVector2(this._end),o=s.y-2*r.y+a.y,l=-2*s.y+2*r.y,h=s.y,c=Pc(o,l,h);return ie.each(c,f=>{if(f>=0&&f<=1){const g=this.positionAt(f),v=this.tangentAt(f).normalized(),A=v.perpendicular,P=g.minus(e.position);if(P.dot(e.direction)>0){const w=A.dot(e.direction)>0?A.negated():A,T=e.direction.perpendicular.dot(v)<0?1:-1;t.push(new Sc(P.magnitude,g,w,T,f))}}}),t}windingIntersection(e){let t=0;const n=this.intersection(e);return ie.each(n,s=>{t+=s.wind}),t}writeToContext(e){e.quadraticCurveTo(this._control.x,this._control.y,this._end.x,this._end.y)}transformed(e){return new Ns(e.timesVector2(this._start),e.timesVector2(this._control),e.timesVector2(this._end))}getSignedAreaFragment(){return 1/6*(this._start.x*(2*this._control.y+this._end.y)+this._control.x*(-2*this._start.y+2*this._end.y)+this._end.x*(-this._start.y-2*this._control.y))}reparameterized(e,t){const n=this._start.plus(this._end.plus(this._control.timesScalar(-2))),s=this._control.minus(this._start).timesScalar(2),r=this._start,a=n.timesScalar(e*e),o=n.timesScalar(e*t).timesScalar(2).plus(s.timesScalar(e)),l=n.timesScalar(t*t).plus(s.timesScalar(t)).plus(r);return new Ns(l,o.timesScalar(.5).plus(l),a.plus(o).plus(l))}reversed(){return new Ns(this._end,this._control,this._start)}serialize(){return{type:"Quadratic",startX:this._start.x,startY:this._start.y,controlX:this._control.x,controlY:this._control.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e,t=1e-6){return e instanceof Ns?Ns.getOverlaps(this,e):null}static deserialize(e){return new Ns(new Oe(e.startX,e.startY),new Oe(e.controlX,e.controlY),new Oe(e.endX,e.endY))}static extremaT(e,t,n){const s=2*(n-2*t+e);return s!==0?-2*(t-e)/s:NaN}static getOverlaps(e,t,n=1e-6){const s=[],r=e._start.x,a=-2*e._start.x+2*e._control.x,o=e._start.x-2*e._control.x+e._end.x,l=e._start.y,h=-2*e._start.y+2*e._control.y,c=e._start.y-2*e._control.y+e._end.y,f=t._start.x,g=-2*t._start.x+2*t._control.x,v=t._start.x-2*t._control.x+t._end.x,A=t._start.y,P=-2*t._start.y+2*t._control.y,w=t._start.y-2*t._control.y+t._end.y,T=Math.abs(Math.max(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)-Math.min(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)),D=Math.abs(Math.max(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)-Math.min(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)),M=Ks.polynomialGetOverlapQuadratic(r,a,o,f,g,v),B=Ks.polynomialGetOverlapQuadratic(l,h,c,A,P,w);let O;if(T>D?O=M===null||M===!0?B:M:O=B===null||B===!0?M:B,O===null||O===!0)return s;const x=O.a,Z=O.b,de=x*x,$=Z*Z,me=2*x*Z,ue=f+Z*g+$*v-r,Se=x*g+me*v-a,Te=de*v-o,Re=A+Z*P+$*w-l,We=x*P+me*w-h,Le=de*w-c,lt=S2(2*Te,Se),st=S2(2*Le,We),De=ie.uniq([0,1].concat(lt?lt.filter(qm):[])),et=ie.uniq([0,1].concat(st?st.filter(qm):[]));for(let dt=0;dt<De.length;dt++){const Et=De[dt];if(Math.abs((Te*Et+Se)*Et+ue)>n)return s}for(let dt=0;dt<et.length;dt++){const Et=et[dt];if(Math.abs((Le*Et+We)*Et+Re)>n)return s}const Ke=Z,Ct=x+Z;return Ke>1&&Ct>1||Ke<0&&Ct<0?s:[new Pf(x,Z)]}}Ns.prototype.degree=2;class nr extends Ks{constructor(e,t,n,s){super(),this._start=e,this._control1=t,this._control2=n,this._end=s,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setControl1(e){return this._control1.equals(e)||(this._control1=e,this.invalidate()),this}set control1(e){this.setControl1(e)}get control1(){return this.getControl1()}getControl1(){return this._control1}setControl2(e){return this._control2.equals(e)||(this._control2=e,this.invalidate()),this}set control2(e){this.setControl2(e)}get control2(){return this.getControl2()}getControl2(){return this._control2}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){const t=1-e,n=t*t*t,s=3*t*t*e,r=3*t*e*e,a=e*e*e;return new Oe(this._start.x*n+this._control1.x*s+this._control2.x*r+this._end.x*a,this._start.y*n+this._control1.y*s+this._control2.y*r+this._end.y*a)}tangentAt(e){const t=1-e;return new Oe(0,0).set(this._start).multiplyScalar(-3*t*t).add(ly.set(this._control1).multiplyScalar(3*t*t-6*t*e)).add(ly.set(this._control2).multiplyScalar(6*t*e-3*e*e)).add(ly.set(this._end).multiplyScalar(3*e*e))}curvatureAt(e){if(Math.abs(e-.5)>.5-1e-7){const n=e<.5,s=n?this._start:this._end,r=n?this._control1:this._control2,a=n?this._control2:this._control1,o=r.minus(s),l=o.magnitude;return(n?-1:1)*o.perpendicular.normalized().dot(a.minus(r))*(this.degree-1)/(this.degree*l*l)}else return this.subdivided(e)[0].curvatureAt(1)}subdivided(e){if(e===0||e===1)return[this];const t=this._start.blend(this._control1,e),n=this._control2.blend(this._end,e),s=this._control1.blend(this._control2,e),r=t.blend(s,e),a=s.blend(n,e),o=r.blend(a,e);return[new nr(this._start,t,r,o),new nr(o,a,n,this._end)]}invalidate(){this._startTangent=null,this._endTangent=null,this._r=null,this._s=null,this._tCusp=null,this._tDeterminant=null,this._tInflection1=null,this._tInflection2=null,this._quadratics=null,this._xExtremaT=null,this._yExtremaT=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){return this._startTangent===null&&(this._startTangent=this.tangentAt(0).normalized()),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this._endTangent===null&&(this._endTangent=this.tangentAt(1).normalized()),this._endTangent}get endTangent(){return this.getEndTangent()}getR(){return this._r===null&&(this._r=this._control1.minus(this._start).normalized()),this._r}get r(){return this.getR()}getS(){return this._s===null&&(this._s=this.getR().perpendicular),this._s}get s(){return this.getS()}getTCusp(){return this._tCusp===null&&this.computeCuspInfo(),this._tCusp}get tCusp(){return this.getTCusp()}getTDeterminant(){return this._tDeterminant===null&&this.computeCuspInfo(),this._tDeterminant}get tDeterminant(){return this.getTDeterminant()}getTInflection1(){return this._tInflection1===null&&this.computeCuspInfo(),this._tInflection1}get tInflection1(){return this.getTInflection1()}getTInflection2(){return this._tInflection2===null&&this.computeCuspInfo(),this._tInflection2}get tInflection2(){return this.getTInflection2()}getQuadratics(){return this._quadratics===null&&this.computeCuspSegments(),this._quadratics}getXExtremaT(){return this._xExtremaT===null&&(this._xExtremaT=nr.extremaT(this._start.x,this._control1.x,this._control2.x,this._end.x)),this._xExtremaT}get xExtremaT(){return this.getXExtremaT()}getYExtremaT(){return this._yExtremaT===null&&(this._yExtremaT=nr.extremaT(this._start.y,this._control1.y,this._control2.y,this._end.y)),this._yExtremaT}get yExtremaT(){return this.getYExtremaT()}getBounds(){return this._bounds===null&&(this._bounds=pt.NOTHING,this._bounds=this._bounds.withPoint(this._start),this._bounds=this._bounds.withPoint(this._end),ie.each(this.getXExtremaT(),e=>{e>=0&&e<=1&&(this._bounds=this._bounds.withPoint(this.positionAt(e)))}),ie.each(this.getYExtremaT(),e=>{e>=0&&e<=1&&(this._bounds=this._bounds.withPoint(this.positionAt(e)))}),this.hasCusp()&&(this._bounds=this._bounds.withPoint(this.positionAt(this.getTCusp())))),this._bounds}get bounds(){return this.getBounds()}computeCuspInfo(){const e=this._start.times(-1).plus(this._control1.times(3)).plus(this._control2.times(-3)).plus(this._end),t=this._start.times(3).plus(this._control1.times(-6)).plus(this._control2.times(3)),n=this._start.times(-3).plus(this._control1.times(3)),s=e.perpendicular,r=t.perpendicular,a=s.dot(t);if(this._tCusp=-.5*(s.dot(n)/a),this._tDeterminant=this._tCusp*this._tCusp-1/3*(r.dot(n)/a),this._tDeterminant>=0){const o=Math.sqrt(this._tDeterminant);this._tInflection1=this._tCusp-o,this._tInflection2=this._tCusp+o}else this._tInflection1=NaN,this._tInflection2=NaN}computeCuspSegments(){if(this.hasCusp()){this._quadratics=[];const e=this.getTCusp();if(e===0)this._quadratics.push(new Ns(this.start,this.control2,this.end));else if(e===1)this._quadratics.push(new Ns(this.start,this.control1,this.end));else{const t=this.subdivided(e);this._quadratics.push(new Ns(t[0].start,t[0].control1,t[0].end)),this._quadratics.push(new Ns(t[1].start,t[1].control2,t[1].end))}}else this._quadratics=null}getNondegenerateSegments(){const e=this._start,t=this._control1,n=this._control2,s=this._end,r=this.degreeReduced(1e-9);if(e.equals(s)&&e.equals(t)&&e.equals(n))return[];if(this.hasCusp())return ie.flatten(this.getQuadratics().map(a=>a.getNondegenerateSegments()));if(r)return r.getNondegenerateSegments();if(nv(e,t,s)&&nv(e,n,s)&&!e.equalsEpsilon(s,1e-7)){const a=this.getXExtremaT().concat(this.getYExtremaT()).sort().map(h=>this.positionAt(h)),o=[];let l=e;a.length&&(o.push(new Ki(e,a[0])),l=a[0]);for(let h=1;h<a.length;h++)o.push(new Ki(a[h-1],a[h])),l=a[h];return o.push(new Ki(l,s)),ie.flatten(o.map(h=>h.getNondegenerateSegments()))}else return[this]}hasCusp(){const e=this.getTCusp();return e>=0&&e<=1&&this.tangentAt(e).magnitude<1e-7}toRS(e){const t=e.minus(this._start);return new Oe(t.dot(this.getR()),t.dot(this.getS()))}offsetTo(e,t){const s=[],r=[];for(let a=0;a<32;a++){let o=a/31;t&&(o=1-o),s.push(this.positionAt(o).plus(this.tangentAt(o).perpendicular.normalized().times(e))),a>0&&r.push(new Ki(s[a-1],s[a]))}return r}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`C ${bn(this._control1.x)} ${bn(this._control1.y)} ${bn(this._control2.x)} ${bn(this._control2.y)} ${bn(this._end.x)} ${bn(this._end.y)}`),this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=this.getXExtremaT().concat(this.getYExtremaT()),t=[];return ie.each(e,n=>{n>1e-10&&n<1-1e-10&&ie.every(t,r=>Math.abs(n-r)>1e-10)&&t.push(n)}),t.sort()}intersection(e){const t=[],n=It.rotation2(-e.direction.angle).timesMatrix(It.translation(-e.position.x,-e.position.y)),s=n.timesVector2(this._start),r=n.timesVector2(this._control1),a=n.timesVector2(this._control2),o=n.timesVector2(this._end),l=-s.y+3*r.y-3*a.y+o.y,h=3*s.y-6*r.y+3*a.y,c=-3*s.y+3*r.y,f=s.y,g=ZF(l,h,c,f);return ie.each(g,v=>{if(v>=0&&v<=1){const A=this.positionAt(v),P=this.tangentAt(v).normalized(),w=P.perpendicular,T=A.minus(e.position);if(T.dot(e.direction)>0){const D=w.dot(e.direction)>0?w.negated():w,M=e.direction.perpendicular.dot(P)<0?1:-1;t.push(new Sc(T.magnitude,A,D,M,v))}}}),t}windingIntersection(e){let t=0;const n=this.intersection(e);return ie.each(n,s=>{t+=s.wind}),t}writeToContext(e){e.bezierCurveTo(this._control1.x,this._control1.y,this._control2.x,this._control2.y,this._end.x,this._end.y)}transformed(e){return new nr(e.timesVector2(this._start),e.timesVector2(this._control1),e.timesVector2(this._control2),e.timesVector2(this._end))}degreeReduced(e){e=e||0;const t=ly.set(this._control1).multiplyScalar(3).subtract(this._start).divideScalar(2),n=P2.set(this._control2).multiplyScalar(3).subtract(this._end).divideScalar(2);return $F.set(t).subtract(n).magnitude<=e?new Ns(this._start,t.average(n),this._end):null}getSignedAreaFragment(){return 1/20*(this._start.x*(6*this._control1.y+3*this._control2.y+this._end.y)+this._control1.x*(-6*this._start.y+3*this._control2.y+3*this._end.y)+this._control2.x*(-3*this._start.y-3*this._control1.y+6*this._end.y)+this._end.x*(-this._start.y-3*this._control1.y-6*this._control2.y))}reversed(){return new nr(this._end,this._control2,this._control1,this._start)}getSelfIntersection(){const e=this.getInteriorExtremaTs(),t=[0].concat(e).concat([1]),n=this.subdivisions(e);if(n.length<3)return null;for(let s=0;s<n.length;s++){const r=n[s];for(let a=s+1;a<n.length;a++){const o=n[a],l=tr.intersect(r,o);if(l.length){const h=l[0];if(h.aT>1e-7&&h.aT<1-1e-7&&h.bT>1e-7&&h.bT<1-1e-7){const c=t[s]+h.aT*(t[s+1]-t[s]),f=t[a]+h.bT*(t[a+1]-t[a]);return new Jr(h.point,c,f)}}}}return null}serialize(){return{type:"Cubic",startX:this._start.x,startY:this._start.y,control1X:this._control1.x,control1Y:this._control1.y,control2X:this._control2.x,control2Y:this._control2.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e,t=1e-6){return e instanceof nr?nr.getOverlaps(this,e):null}static deserialize(e){return new nr(new Oe(e.startX,e.startY),new Oe(e.control1X,e.control1Y),new Oe(e.control2X,e.control2Y),new Oe(e.endX,e.endY))}static extremaT(e,t,n,s){if(e===t&&e===n&&e===s)return[];const r=-3*e+9*t-9*n+3*s,a=6*e-12*t+6*n,o=-3*e+3*t;return ie.filter(Pc(r,a,o),qm)}static getOverlaps(e,t,n=1e-6){const s=[],r=e._start.x,a=-3*e._start.x+3*e._control1.x,o=3*e._start.x-6*e._control1.x+3*e._control2.x,l=-1*e._start.x+3*e._control1.x-3*e._control2.x+e._end.x,h=e._start.y,c=-3*e._start.y+3*e._control1.y,f=3*e._start.y-6*e._control1.y+3*e._control2.y,g=-1*e._start.y+3*e._control1.y-3*e._control2.y+e._end.y,v=t._start.x,A=-3*t._start.x+3*t._control1.x,P=3*t._start.x-6*t._control1.x+3*t._control2.x,w=-1*t._start.x+3*t._control1.x-3*t._control2.x+t._end.x,T=t._start.y,D=-3*t._start.y+3*t._control1.y,M=3*t._start.y-6*t._control1.y+3*t._control2.y,B=-1*t._start.y+3*t._control1.y-3*t._control2.y+t._end.y,O=Math.abs(Math.max(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)-Math.min(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)),x=Math.abs(Math.max(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)-Math.min(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)),Z=Ks.polynomialGetOverlapCubic(r,a,o,l,v,A,P,w),de=Ks.polynomialGetOverlapCubic(h,c,f,g,T,D,M,B);let $;if(O>x?$=Z===null||Z===!0?de:Z:$=de===null||de===!0?Z:de,$===null||$===!0)return s;const me=$.a,ue=$.b,Se=me*me,Te=me*me*me,Re=ue*ue,We=ue*ue*ue,Le=2*me*ue,lt=3*me*Re,st=3*Se*ue,De=v+ue*A+Re*P+We*w-r,et=me*A+Le*P+lt*w-a,Ke=Se*P+st*w-o,Ct=Te*w-l,dt=T+ue*D+Re*M+We*B-h,Et=me*D+Le*M+lt*B-c,ut=Se*M+st*B-f,Wt=Te*B-g,Nt=Pc(3*Ct,2*Ke,et),ci=Pc(3*Wt,2*ut,Et),Yt=ie.uniq([0,1].concat(Nt!==null?Nt.filter(qm):[])),Pe=ie.uniq([0,1].concat(ci!==null?ci.filter(qm):[]));for(let wt=0;wt<Yt.length;wt++){const Gt=Yt[wt];if(Math.abs(((Ct*Gt+Ke)*Gt+et)*Gt+De)>n)return s}for(let wt=0;wt<Pe.length;wt++){const Gt=Pe[wt];if(Math.abs(((Wt*Gt+ut)*Gt+Et)*Gt+dt)>n)return s}const pe=ue,bt=me+ue;return pe>1&&bt>1||pe<0&&bt<0?s:[new Pf(me,ue)]}}nr.prototype.degree=3;const rp={lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:[],lineDashOffset:0,miterLimit:10};class Hc{constructor(e){const t=an({},rp,e);this.lineWidth=t.lineWidth,this.lineCap=t.lineCap,this.lineJoin=t.lineJoin,this.lineDash=t.lineDash,this.lineDashOffset=t.lineDashOffset,this.miterLimit=t.miterLimit}equals(e){if(!(this.lineWidth===e.lineWidth&&this.lineCap===e.lineCap&&this.lineJoin===e.lineJoin&&this.miterLimit===e.miterLimit&&this.lineDashOffset===e.lineDashOffset))return!1;if(this.lineDash.length===e.lineDash.length){for(let n=0;n<this.lineDash.length;n++)if(this.lineDash[n]!==e.lineDash[n])return!1}else return!1;return!0}copy(){return new Hc({lineWidth:this.lineWidth,lineCap:this.lineCap,lineJoin:this.lineJoin,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,miterLimit:this.miterLimit})}leftJoin(e,t,n){t=t.normalized(),n=n.normalized();const s=e.plus(t.perpendicular.negated().times(this.lineWidth/2)),r=e.plus(n.perpendicular.negated().times(this.lineWidth/2)),a=s.equals(r)?[]:[new Ki(s,r)];let o,l,h;if(t.perpendicular.dot(n)>1e-12)switch(this.lineJoin){case"round":return o=t.angle+Math.PI/2,l=n.angle+Math.PI/2,[new Vn(e,this.lineWidth/2,o,l,!0)];case"miter":if(h=t.angleBetween(n.negated()),1/Math.sin(h/2)<=this.miterLimit&&h<Math.PI-1e-5){const c=bS(s,s.plus(t),r,r.plus(n));return c?[new Ki(s,c),new Ki(c,r)]:[new Ki(s,r)]}else return a;case"bevel":return a;default:throw new Error(`invalid lineJoin: ${this.lineJoin}`)}else return a}rightJoin(e,t,n){return this.leftJoin(e,n.negated(),t.negated())}cap(e,t){t=t.normalized();const n=e.plus(t.perpendicular.times(-this.lineWidth/2)),s=e.plus(t.perpendicular.times(this.lineWidth/2));let r,a,o,l,h,c;switch(this.lineCap){case"butt":return[new Ki(n,s)];case"round":return r=t.angle,[new Vn(e,this.lineWidth/2,r+Math.PI/2,r-Math.PI/2,!0)];case"square":return a=t.perpendicular.negated().times(this.lineWidth/2),o=t.perpendicular.times(this.lineWidth/2),l=t.times(this.lineWidth/2),h=e.plus(a).plus(l),c=e.plus(o).plus(l),[new Ki(n,h),new Ki(h,c),new Ki(c,s)];default:throw new Error(`invalid lineCap: ${this.lineCap}`)}}}class Hn{constructor(e,t,n){if(this.segments=[],this.invalidatedEmitter=new un,this._bounds=null,this._strokedSubpaths=null,this._strokedSubpathsComputed=!1,this._strokedStyles=null,this._invalidatingPoints=!1,this.points=t||(e&&e.length?ie.map(e,s=>s.start).concat(e[e.length-1].end):[]),this.closed=!!n,this._invalidateListener=this.invalidate.bind(this),e)for(let s=0;s<e.length;s++)ie.each(e[s].getNondegenerateSegments(),r=>{this.addSegmentDirectly(r)})}getBounds(){if(this._bounds===null){const e=pt.NOTHING.copy();ie.each(this.segments,t=>{e.includeBounds(t.getBounds())}),this._bounds=e}return this._bounds}get bounds(){return this.getBounds()}getArcLength(e,t,n){let s=0;for(let r=0;r<this.segments.length;r++)s+=this.segments[r].getArcLength(e,t,n);return s}copy(){return new Hn(this.segments.slice(0),this.points.slice(0),this.closed)}invalidatePoints(){this._invalidatingPoints=!0;const e=this.segments.length;for(let t=0;t<e;t++)this.segments[t].invalidate();this._invalidatingPoints=!1,this.invalidate()}invalidate(){this._invalidatingPoints||(this._bounds=null,this._strokedSubpathsComputed=!1,this.invalidatedEmitter.emit())}addPoint(e){return this.points.push(e),this}addSegmentDirectly(e){return this.segments.push(e),e.invalidationEmitter.addListener(this._invalidateListener),this}addSegment(e){const n=e.getNondegenerateSegments().length;for(let s=0;s<n;s++)this.addSegmentDirectly(e);return this.invalidate(),this}addClosingSegment(){if(this.hasClosingSegment()){const e=this.getClosingSegment();this.addSegmentDirectly(e),this.invalidate(),this.addPoint(this.getFirstPoint()),this.closed=!0}}close(){this.closed=!0,this.addClosingSegment()}getLength(){return this.points.length}getFirstPoint(){return ie.first(this.points)}getLastPoint(){return ie.last(this.points)}getFirstSegment(){return ie.first(this.segments)}getLastSegment(){return ie.last(this.segments)}getFillSegments(){const e=this.segments.slice();return this.hasClosingSegment()&&e.push(this.getClosingSegment()),e}isDrawable(){return this.segments.length>0}isClosed(){return this.closed}hasClosingSegment(){return!this.getFirstPoint().equalsEpsilon(this.getLastPoint(),1e-9)}getClosingSegment(){return new Ki(this.getLastPoint(),this.getFirstPoint())}getClosestPoints(e){return Ks.filterClosestToPointResult(ie.flatten(this.segments.map(t=>t.getClosestPoints(e))))}writeToContext(e){if(this.isDrawable()){const t=this.getFirstSegment().start;e.moveTo(t.x,t.y);let n=this.segments.length;this.closed&&n>=2&&this.segments[n-1]instanceof Ki&&n--;for(let s=0;s<n;s++)this.segments[s].writeToContext(e);this.closed&&e.closePath()}}toPiecewiseLinear(e){return new Hn(ie.flatten(ie.map(this.segments,t=>t.toPiecewiseLinearSegments(e))),void 0,this.closed)}transformed(e){return new Hn(ie.map(this.segments,t=>t.transformed(e)),ie.map(this.points,t=>e.timesVector2(t)),this.closed)}nonlinearTransformed(e){return new Hn(ie.flatten(ie.map(this.segments,t=>e.methodName&&t[e.methodName]?t[e.methodName](e):t.toPiecewiseLinearSegments(e))),void 0,this.closed)}getBoundsWithTransform(e){const t=pt.NOTHING.copy(),n=this.segments.length;for(let s=0;s<n;s++)t.includeBounds(this.segments[s].getBoundsWithTransform(e));return t}offset(e){if(!this.isDrawable())return new Hn([],void 0,this.closed);if(e===0)return new Hn(this.segments.slice(),void 0,this.closed);let t;const n=this.segments.slice(),s=[];for(t=0;t<n.length;t++)s.push(n[t].strokeLeft(2*e));let r=[];for(t=0;t<n.length;t++){if(this.closed||t>0){const a=(t>0?t:n.length)-1,o=n[t].start,l=n[a].endTangent,h=n[t].startTangent,c=l.perpendicular.negated().times(e).angle,f=h.perpendicular.negated().times(e).angle,g=l.perpendicular.dot(h)>0;r.push(new Vn(o,Math.abs(e),c,f,g))}r=r.concat(s[t])}return new Hn(r,void 0,this.closed)}stroked(e){if(!this.isDrawable())return[];if(e===void 0&&(e=new Hc),this._strokedSubpathsComputed&&this._strokedStyles.equals(e))return this._strokedSubpaths;const t=e.lineWidth;let n,s=[],r=[];const a=this.getFirstSegment(),o=this.getLastSegment(),l=v=>{s=s.concat(v)},h=v=>{r=r.concat(v)},c=o.end.equals(a.start),f=c?null:new Ki(this.segments[this.segments.length-1].end,this.segments[0].start);for(n=0;n<this.segments.length;n++)n>0&&l(e.leftJoin(this.segments[n].start,this.segments[n-1].endTangent,this.segments[n].startTangent)),l(this.segments[n].strokeLeft(t));for(n=this.segments.length-1;n>=0;n--)n<this.segments.length-1&&h(e.rightJoin(this.segments[n].end,this.segments[n].endTangent,this.segments[n+1].startTangent)),h(this.segments[n].strokeRight(t));let g;return this.closed?(c?(l(e.leftJoin(o.end,o.endTangent,a.startTangent)),h(e.rightJoin(o.end,o.endTangent,a.startTangent))):(l(e.leftJoin(f.start,o.endTangent,f.startTangent)),l(f.strokeLeft(t)),l(e.leftJoin(f.end,f.endTangent,a.startTangent)),h(e.rightJoin(f.end,f.endTangent,a.startTangent)),h(f.strokeRight(t)),h(e.rightJoin(f.start,o.endTangent,f.startTangent))),g=[new Hn(s,void 0,!0),new Hn(r,void 0,!0)]):g=[new Hn(s.concat(e.cap(o.end,o.endTangent)).concat(r).concat(e.cap(a.start,a.startTangent.negated())),void 0,!0)],this._strokedSubpaths=g,this._strokedSubpathsComputed=!0,this._strokedStyles=e.copy(),g}dashed(e,t,n,s){const r=(l,h)=>{const c=l[l.length-1].concat(h[0]);return l.slice(0,l.length-1).concat([c]).concat(h.slice(1))},a=(l,h)=>{if(!l.hasRightFilled||!h.hasLeftFilled)return!1;const c=ie.last(ie.last(l.segmentArrays)),f=h.segmentArrays[0][0];return c.end.distance(f.start)<1e-5},o=[];for(let l=0;l<this.segments.length;l++){const h=this.segments[l],c=h.getDashValues(e,t,n,s);o.push(c),t+=c.arcLength;const f=[0].concat(c.values).concat([1]),g=c.initiallyInside;c.hasLeftFilled=g,c.hasRightFilled=f.length%2===0?g:!g,c.segmentArrays=[];for(let v=g?0:1;v<f.length-1;v+=2)f[v]!==f[v+1]&&c.segmentArrays.push([h.slice(f[v],f[v+1])])}for(let l=o.length-1;l>=1;l--){const h=o[l-1],c=o[l];a(h,c)&&o.splice(l-1,2,{segmentArrays:r(h.segmentArrays,c.segmentArrays),hasLeftFilled:h.hasLeftFilled,hasRightFilled:c.hasRightFilled})}if(o.length>1&&a(o[o.length-1],o[0])){const l=o.pop(),h=o.shift();o.push({segmentArrays:r(l.segmentArrays,h.segmentArrays),hasLeftFilled:l.hasLeftFilled,hasRightFilled:h.hasRightFilled})}return this.closed&&o.length===1&&o[0].segmentArrays.length===1&&o[0].hasLeftFilled&&o[0].hasRightFilled?[new Hn(o[0].segmentArrays[0],void 0,!0)]:ie.flatten(o.map(l=>l.segmentArrays)).map(l=>new Hn(l))}static fromBoundary(e){const t=[];for(let n=0;n<e.halfEdges.length;n++)t.push(e.halfEdges[n].getDirectionalSegment());return new Hn(t,void 0,!0)}static fromLoop(e){const t=[];for(let n=0;n<e.halfEdges.length;n++)t.push(e.halfEdges[n].getDirectionalSegment());return new Hn(t,void 0,e.closed)}serialize(){return{type:"Subpath",segments:this.segments.map(e=>e.serialize()),points:this.points.map(e=>({x:e.x,y:e.y})),closed:this.closed}}static deserialize(e){return new Hn(e.segments.map(Ks.deserialize),e.points.map(t=>new Oe(t.x,t.y)),e.closed)}}function yI(i){return'"'+i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}const _S={parse:function(i,e){const t={svgPath:o,movetoDrawtoCommandGroups:l,movetoDrawtoCommandGroup:h,drawtoCommands:c,drawtoCommand:f,moveto:g,movetoArgumentSequence:v,closepath:A,lineto:P,linetoArgumentSequence:w,horizontalLineto:T,horizontalLinetoArgumentSequence:D,verticalLineto:M,verticalLinetoArgumentSequence:B,curveto:O,curvetoArgumentSequence:x,curvetoArgument:Z,smoothCurveto:de,smoothCurvetoArgumentSequence:$,smoothCurvetoArgument:me,quadraticBezierCurveto:ue,quadraticBezierCurvetoArgumentSequence:Se,quadraticBezierCurvetoArgument:Te,smoothQuadraticBezierCurveto:Re,smoothQuadraticBezierCurvetoArgumentSequence:We,ellipticalArc:Le,ellipticalArcArgumentSequence:lt,ellipticalArcArgument:st,coordinatePair:De,nonnegativeNumber:et,number:Ke,flag:Ct,commaWsp:dt,comma:Et,floatingPointConstant:ut,fractionalConstant:Wt,exponent:Nt,sign:ci,digitSequence:Yt,digit:Pe,wsp:pe};if(e!==void 0){if(t[e]===void 0)throw new Error("Invalid rule name: "+yI(e)+".")}else e="svgPath";let n=0,s=0,r=[];function a(V){n<s||(n>s&&(s=n,r=[]),r.push(V))}function o(){let V,te,fe,_e,ke,$e;for(ke=n,$e=n,V=[],te=pe();te!==null;)V.push(te),te=pe();if(V!==null)if(te=l(),te=te!==null?te:"",te!==null){for(fe=[],_e=pe();_e!==null;)fe.push(_e),_e=pe();fe!==null?V=[V,te,fe]:(V=null,n=$e)}else V=null,n=$e;else V=null,n=$e;return V!==null&&(V=function(Xe,rt){return rt||[]}(ke,V[1])),V===null&&(n=ke),V}function l(){let V,te,fe,_e,ke;if(_e=n,ke=n,V=h(),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=l(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;return V!==null&&(V=function($e,Xe,rt){return Xe.concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=h(),V!==null&&(V=function($e,Xe){return Xe}(_e,V)),V===null&&(n=_e)),V}function h(){let V,te,fe,_e,ke;if(_e=n,ke=n,V=g(),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=c(),fe=fe!==null?fe:"",fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;return V!==null&&(V=function($e,Xe,rt){return rt.length?Xe.concat(rt):Xe}(_e,V[0],V[2])),V===null&&(n=_e),V}function c(){let V,te,fe,_e,ke;if(_e=n,ke=n,V=f(),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=c(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;return V!==null&&(V=function($e,Xe,rt){return Xe.concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=f(),V!==null&&(V=function($e,Xe){return Xe}(_e,V)),V===null&&(n=_e)),V}function f(){let V;return V=A(),V===null&&(V=P(),V===null&&(V=T(),V===null&&(V=M(),V===null&&(V=O(),V===null&&(V=de(),V===null&&(V=ue(),V===null&&(V=Re(),V===null&&(V=Le())))))))),V}function g(){let V,te,fe,_e,ke;if(_e=n,ke=n,i.charCodeAt(n)===77?(V="M",n++):(V=null,a('"M"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=v(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;if(V!==null&&(V=function($e,Xe){return Gt(Xe,!1)}(_e,V[2])),V===null&&(n=_e),V===null){if(_e=n,ke=n,i.charCodeAt(n)===109?(V="m",n++):(V=null,a('"m"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=v(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;V!==null&&(V=function($e,Xe){return Gt(Xe,!0)}(_e,V[2])),V===null&&(n=_e)}return V}function v(){let V,te,fe,_e,ke;return _e=n,ke=n,V=De(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=w(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe].concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=De(),V!==null&&(V=function($e,Xe){return[Xe]}(_e,V)),V===null&&(n=_e)),V}function A(){let V,te;return te=n,i.charCodeAt(n)===90?(V="Z",n++):(V=null,a('"Z"')),V===null&&(i.charCodeAt(n)===122?(V="z",n++):(V=null,a('"z"'))),V!==null&&(V=function(fe,_e){return{cmd:"close"}}()),V===null&&(n=te),V}function P(){let V,te,fe,_e,ke;if(_e=n,ke=n,i.charCodeAt(n)===76?(V="L",n++):(V=null,a('"L"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=w(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;if(V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"lineTo",args:[rt.x,rt.y]}))}(_e,V[2])),V===null&&(n=_e),V===null){if(_e=n,ke=n,i.charCodeAt(n)===108?(V="l",n++):(V=null,a('"l"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=w(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"lineToRelative",args:[rt.x,rt.y]}))}(_e,V[2])),V===null&&(n=_e)}return V}function w(){let V,te,fe,_e,ke;return _e=n,ke=n,V=De(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=w(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe].concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=De(),V!==null&&(V=function($e,Xe){return[Xe]}(_e,V)),V===null&&(n=_e)),V}function T(){let V,te,fe,_e,ke;if(_e=n,ke=n,i.charCodeAt(n)===72?(V="H",n++):(V=null,a('"H"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=D(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;if(V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"horizontalLineTo",args:[rt]}))}(_e,V[2])),V===null&&(n=_e),V===null){if(_e=n,ke=n,i.charCodeAt(n)===104?(V="h",n++):(V=null,a('"h"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=D(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"horizontalLineToRelative",args:[rt]}))}(_e,V[2])),V===null&&(n=_e)}return V}function D(){let V,te,fe,_e,ke;return _e=n,ke=n,V=Ke(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=D(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe].concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=Ke(),V!==null&&(V=function($e,Xe){return[Xe]}(_e,V)),V===null&&(n=_e)),V}function M(){let V,te,fe,_e,ke;if(_e=n,ke=n,i.charCodeAt(n)===86?(V="V",n++):(V=null,a('"V"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=B(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;if(V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"verticalLineTo",args:[rt]}))}(_e,V[2])),V===null&&(n=_e),V===null){if(_e=n,ke=n,i.charCodeAt(n)===118?(V="v",n++):(V=null,a('"v"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=B(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"verticalLineToRelative",args:[rt]}))}(_e,V[2])),V===null&&(n=_e)}return V}function B(){let V,te,fe,_e,ke;return _e=n,ke=n,V=Ke(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=B(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe].concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=Ke(),V!==null&&(V=function($e,Xe){return[Xe]}(_e,V)),V===null&&(n=_e)),V}function O(){let V,te,fe,_e,ke;if(_e=n,ke=n,i.charCodeAt(n)===67?(V="C",n++):(V=null,a('"C"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=x(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;if(V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"cubicCurveTo",args:rt}))}(_e,V[2])),V===null&&(n=_e),V===null){if(_e=n,ke=n,i.charCodeAt(n)===99?(V="c",n++):(V=null,a('"c"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=x(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"cubicCurveToRelative",args:rt}))}(_e,V[2])),V===null&&(n=_e)}return V}function x(){let V,te,fe,_e,ke;return _e=n,ke=n,V=Z(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=x(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe].concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=Z(),V!==null&&(V=function($e,Xe){return[Xe]}(_e,V)),V===null&&(n=_e)),V}function Z(){let V,te,fe,_e,ke,$e,Xe;return $e=n,Xe=n,V=De(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=De(),fe!==null?(_e=dt(),_e=_e!==null?_e:"",_e!==null?(ke=De(),ke!==null?V=[V,te,fe,_e,ke]:(V=null,n=Xe)):(V=null,n=Xe)):(V=null,n=Xe)):(V=null,n=Xe)):(V=null,n=Xe),V!==null&&(V=function(rt,Dn,Xt,u){return[Dn.x,Dn.y,Xt.x,Xt.y,u.x,u.y]}($e,V[0],V[2],V[4])),V===null&&(n=$e),V}function de(){let V,te,fe,_e,ke;if(_e=n,ke=n,i.charCodeAt(n)===83?(V="S",n++):(V=null,a('"S"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=$(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;if(V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"smoothCubicCurveTo",args:rt}))}(_e,V[2])),V===null&&(n=_e),V===null){if(_e=n,ke=n,i.charCodeAt(n)===115?(V="s",n++):(V=null,a('"s"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=$(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"smoothCubicCurveToRelative",args:rt}))}(_e,V[2])),V===null&&(n=_e)}return V}function $(){let V,te,fe,_e,ke;return _e=n,ke=n,V=me(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=$(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe].concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=me(),V!==null&&(V=function($e,Xe){return[Xe]}(_e,V)),V===null&&(n=_e)),V}function me(){let V,te,fe,_e,ke;return _e=n,ke=n,V=De(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=De(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe.x,Xe.y,rt.x,rt.y]}(_e,V[0],V[2])),V===null&&(n=_e),V}function ue(){let V,te,fe,_e,ke;if(_e=n,ke=n,i.charCodeAt(n)===81?(V="Q",n++):(V=null,a('"Q"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=Se(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;if(V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"quadraticCurveTo",args:rt}))}(_e,V[2])),V===null&&(n=_e),V===null){if(_e=n,ke=n,i.charCodeAt(n)===113?(V="q",n++):(V=null,a('"q"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=Se(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"quadraticCurveToRelative",args:rt}))}(_e,V[2])),V===null&&(n=_e)}return V}function Se(){let V,te,fe,_e,ke;return _e=n,ke=n,V=Te(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=Se(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe].concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=Te(),V!==null&&(V=function($e,Xe){return[Xe]}(_e,V)),V===null&&(n=_e)),V}function Te(){let V,te,fe,_e,ke;return _e=n,ke=n,V=De(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=De(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe.x,Xe.y,rt.x,rt.y]}(_e,V[0],V[2])),V===null&&(n=_e),V}function Re(){let V,te,fe,_e,ke;if(_e=n,ke=n,i.charCodeAt(n)===84?(V="T",n++):(V=null,a('"T"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=We(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;if(V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"smoothQuadraticCurveTo",args:[rt.x,rt.y]}))}(_e,V[2])),V===null&&(n=_e),V===null){if(_e=n,ke=n,i.charCodeAt(n)===116?(V="t",n++):(V=null,a('"t"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=We(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;V!==null&&(V=function($e,Xe){return Xe.map(rt=>({cmd:"smoothQuadraticCurveToRelative",args:[rt.x,rt.y]}))}(_e,V[2])),V===null&&(n=_e)}return V}function We(){let V,te,fe,_e,ke;return _e=n,ke=n,V=De(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=We(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe].concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=De(),V!==null&&(V=function($e,Xe){return[Xe]}(_e,V)),V===null&&(n=_e)),V}function Le(){let V,te,fe,_e,ke;if(_e=n,ke=n,i.charCodeAt(n)===65?(V="A",n++):(V=null,a('"A"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=lt(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;if(V!==null&&(V=function($e,Xe){return Xe.map(rt=>(rt[2]*=Math.PI/180,{cmd:"ellipticalArcTo",args:rt}))}(_e,V[2])),V===null&&(n=_e),V===null){if(_e=n,ke=n,i.charCodeAt(n)===97?(V="a",n++):(V=null,a('"a"')),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?(fe=lt(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)}else V=null,n=ke;V!==null&&(V=function($e,Xe){return Xe.map(rt=>(rt[2]*=Math.PI/180,{cmd:"ellipticalArcToRelative",args:rt}))}(_e,V[2])),V===null&&(n=_e)}return V}function lt(){let V,te,fe,_e,ke;return _e=n,ke=n,V=st(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=lt(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return[Xe].concat(rt)}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,V=st(),V!==null&&(V=function($e,Xe){return[Xe]}(_e,V)),V===null&&(n=_e)),V}function st(){let V,te,fe,_e,ke,$e,Xe,rt,Dn,Xt,u,d,m;return d=n,m=n,V=et(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=et(),fe!==null?(_e=dt(),_e=_e!==null?_e:"",_e!==null?(ke=Ke(),ke!==null?($e=dt(),$e!==null?(Xe=Ct(),Xe!==null?(rt=dt(),rt=rt!==null?rt:"",rt!==null?(Dn=Ct(),Dn!==null?(Xt=dt(),Xt=Xt!==null?Xt:"",Xt!==null?(u=De(),u!==null?V=[V,te,fe,_e,ke,$e,Xe,rt,Dn,Xt,u]:(V=null,n=m)):(V=null,n=m)):(V=null,n=m)):(V=null,n=m)):(V=null,n=m)):(V=null,n=m)):(V=null,n=m)):(V=null,n=m)):(V=null,n=m)):(V=null,n=m)):(V=null,n=m),V!==null&&(V=function(_,S,k,I,L,N,q){return[S,k,I,L,N,q.x,q.y]}(d,V[0],V[2],V[4],V[6],V[8],V[10])),V===null&&(n=d),V}function De(){let V,te,fe,_e,ke;return _e=n,ke=n,V=Ke(),V!==null?(te=dt(),te=te!==null?te:"",te!==null?(fe=Ke(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return{x:Xe,y:rt}}(_e,V[0],V[2])),V===null&&(n=_e),V}function et(){let V,te;return te=n,V=ut(),V!==null&&(V=function(fe,_e){return parseFloat(_e)}(te,V)),V===null&&(n=te),V===null&&(te=n,V=Yt(),V!==null&&(V=function(fe,_e){return Number(_e)}(te,V)),V===null&&(n=te)),V}function Ke(){let V,te,fe,_e;return fe=n,_e=n,V=ci(),V=V!==null?V:"",V!==null?(te=ut(),te!==null?V=[V,te]:(V=null,n=_e)):(V=null,n=_e),V!==null&&(V=function(ke,$e,Xe){return parseFloat($e+Xe)}(fe,V[0],V[1])),V===null&&(n=fe),V===null&&(fe=n,_e=n,V=ci(),V=V!==null?V:"",V!==null?(te=Yt(),te!==null?V=[V,te]:(V=null,n=_e)):(V=null,n=_e),V!==null&&(V=function(ke,$e,Xe){return Number($e+Xe)}(fe,V[0],V[1])),V===null&&(n=fe)),V}function Ct(){let V,te;return te=n,i.charCodeAt(n)===48?(V="0",n++):(V=null,a('"0"')),V!==null&&(V=function(fe){return!1}()),V===null&&(n=te),V===null&&(te=n,i.charCodeAt(n)===49?(V="1",n++):(V=null,a('"1"')),V!==null&&(V=function(fe){return!0}()),V===null&&(n=te)),V}function dt(){let V,te,fe,_e,ke;if(ke=n,te=pe(),te!==null)for(V=[];te!==null;)V.push(te),te=pe();else V=null;if(V!==null)if(te=Et(),te=te!==null?te:"",te!==null){for(fe=[],_e=pe();_e!==null;)fe.push(_e),_e=pe();fe!==null?V=[V,te,fe]:(V=null,n=ke)}else V=null,n=ke;else V=null,n=ke;if(V===null)if(ke=n,V=Et(),V!==null){for(te=[],fe=pe();fe!==null;)te.push(fe),fe=pe();te!==null?V=[V,te]:(V=null,n=ke)}else V=null,n=ke;return V}function Et(){let V;return i.charCodeAt(n)===44?(V=",",n++):(V=null,a('","')),V}function ut(){let V,te,fe,_e;return fe=n,_e=n,V=Wt(),V!==null?(te=Nt(),te=te!==null?te:"",te!==null?V=[V,te]:(V=null,n=_e)):(V=null,n=_e),V!==null&&(V=function(ke,$e,Xe){return $e+Xe}(fe,V[0],V[1])),V===null&&(n=fe),V===null&&(fe=n,_e=n,V=Yt(),V!==null?(te=Nt(),te!==null?V=[V,te]:(V=null,n=_e)):(V=null,n=_e),V!==null&&(V=function(ke,$e,Xe){return $e+Xe}(fe,V[0],V[1])),V===null&&(n=fe)),V}function Wt(){let V,te,fe,_e,ke;return _e=n,ke=n,V=Yt(),V=V!==null?V:"",V!==null?(i.charCodeAt(n)===46?(te=".",n++):(te=null,a('"."')),te!==null?(fe=Yt(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt){return Xe+"."+rt}(_e,V[0],V[2])),V===null&&(n=_e),V===null&&(_e=n,ke=n,V=Yt(),V!==null?(i.charCodeAt(n)===46?(te=".",n++):(te=null,a('"."')),te!==null?V=[V,te]:(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe){return Xe}(_e,V[0])),V===null&&(n=_e)),V}function Nt(){let V,te,fe,_e,ke;return _e=n,ke=n,i.charCodeAt(n)===101?(V="e",n++):(V=null,a('"e"')),V===null&&(i.charCodeAt(n)===69?(V="E",n++):(V=null,a('"E"'))),V!==null?(te=ci(),te=te!==null?te:"",te!==null?(fe=Yt(),fe!==null?V=[V,te,fe]:(V=null,n=ke)):(V=null,n=ke)):(V=null,n=ke),V!==null&&(V=function($e,Xe,rt,Dn){return Xe+rt+Dn}(_e,V[0],V[1],V[2])),V===null&&(n=_e),V}function ci(){let V;return i.charCodeAt(n)===43?(V="+",n++):(V=null,a('"+"')),V===null&&(i.charCodeAt(n)===45?(V="-",n++):(V=null,a('"-"'))),V}function Yt(){let V,te,fe,_e;return fe=n,_e=n,V=Pe(),V!==null?(te=Yt(),te!==null?V=[V,te]:(V=null,n=_e)):(V=null,n=_e),V!==null&&(V=function(ke,$e,Xe){return $e+Xe}(fe,V[0],V[1])),V===null&&(n=fe),V===null&&(V=Pe()),V}function Pe(){let V;return/^[0-9]/.test(i.charAt(n))?(V=i.charAt(n),n++):(V=null,a("[0-9]")),V}function pe(){let V;return i.charCodeAt(n)===32?(V=" ",n++):(V=null,a('" "')),V===null&&(i.charCodeAt(n)===9?(V="	",n++):(V=null,a('"\\t"')),V===null&&(i.charCodeAt(n)===13?(V="\r",n++):(V=null,a('"\\r"')),V===null&&(i.charCodeAt(n)===10?(V=`
`,n++):(V=null,a('"\\n"'))))),V}function bt(V){V.sort();let te=null;const fe=[];for(let _e=0;_e<V.length;_e++)V[_e]!==te&&(fe.push(V[_e]),te=V[_e]);return fe}function wt(){let V=1,te=1,fe=!1;for(let _e=0;_e<Math.max(n,s);_e++){const ke=i.charAt(_e);ke===`
`?(fe||V++,te=1,fe=!1):ke==="\r"||ke==="\u2028"||ke==="\u2029"?(V++,te=1,fe=!0):(te++,fe=!1)}return{line:V,column:te}}function Gt(V,te){const fe=[{cmd:te?"moveToRelative":"moveTo",args:[V[0].x,V[0].y]}];if(V.length>1)for(let _e=1;_e<V.length;_e++)fe.push({cmd:te?"lineToRelative":"lineTo",args:[V[_e].x,V[_e].y]});return fe}const Ft=t[e]();if(Ft===null||n!==i.length){const V=Math.max(n,s),te=V<i.length?i.charAt(V):null,fe=wt();throw new this.SyntaxError(bt(r),te,V,fe.line,fe.column)}return Ft},toSource:function(){return this._source}};_S.SyntaxError=function(i,e,t,n,s){function r(a,o){let l,h;switch(a.length){case 0:l="end of input";break;case 1:l=a[0];break;default:l=a.slice(0,a.length-1).join(", ")+" or "+a[a.length-1]}return h=o?yI(o):"end of input","Expected "+l+" but "+h+" found."}this.name="SyntaxError",this.expected=i,this.found=e,this.message=r(i,e),this.offset=t,this.line=n,this.column=s};_S.SyntaxError.prototype=Error.prototype;qb.register("svgPath",_S);const i6=qb.svgPath;function zi(i){if(jt(!i||Array.isArray(i),"cleanArray either takes an Array"),i){for(;i.length;)i.pop();return i}else return[]}let n6=0;class Tc{constructor(e){this.id=++n6,this.halfEdges=[],this.signedArea=0,this.bounds=pt.NOTHING,this.childBoundaries=[],this.initialize(e)}initialize(e){return this.halfEdges=e,this.signedArea=this.computeSignedArea(),this.bounds=this.computeBounds(),this.childBoundaries=zi(this.childBoundaries),this}serialize(){return{type:"Boundary",id:this.id,halfEdges:this.halfEdges.map(e=>e.id),signedArea:this.signedArea,bounds:pt.Bounds2IO.toStateObject(this.bounds),childBoundaries:this.childBoundaries.map(e=>e.id)}}dispose(){this.halfEdges=[],zi(this.childBoundaries),this.freeToPool()}isInner(){return this.signedArea>0}computeSignedArea(){let e=0;for(let t=0;t<this.halfEdges.length;t++)e+=this.halfEdges[t].signedAreaFragment;return e}computeBounds(){const e=pt.NOTHING.copy();for(let t=0;t<this.halfEdges.length;t++)e.includeBounds(this.halfEdges[t].edge.segment.getBounds());return e}computeExtremePoint(e){const t=[];for(let s=0;s<this.halfEdges.length;s++)t.push(this.halfEdges[s].edge.segment.transformed(e.getMatrix()));const n=pt.NOTHING.copy();for(let s=0;s<t.length;s++)n.includeBounds(t[s].getBounds());for(let s=0;s<t.length;s++){const r=t[s];if(r.getBounds().top===n.top){let a=new Oe(0,Number.POSITIVE_INFINITY);const o=[0,1].concat(r.getInteriorExtremaTs());for(let l=0;l<o.length;l++){const h=r.positionAt(o[l]);h.y<a.y&&(a=h)}return e.inversePosition2(a)}}throw new Error("Should not reach here if we have segments")}computeExtremeRay(e){const t=this.computeExtremePoint(e),n=e.inverseDelta2(new Oe(0,-1)).normalized();return new Po(t.plus(n.timesScalar(1e-4)),n)}hasHalfEdge(e){for(let t=0;t<this.halfEdges.length;t++)if(this.halfEdges[t]===e)return!0;return!1}freeToPool(){Tc.pool.freeToPool(this)}}Tc.pool=new us(Tc,{initialize:Tc.prototype.initialize});let s6=0;class xc{constructor(e,t){this.id=++s6,this.edge=null,this.face=null,this.isReversed=!1,this.signedAreaFragment=0,this.startVertex=null,this.endVertex=null,this.sortVector=new Oe(0,0),this.data=null,this.initialize(e,t)}initialize(e,t){return this.edge=e,this.face=null,this.isReversed=t,this.signedAreaFragment=e.signedAreaFragment*(t?-1:1),this.startVertex=null,this.endVertex=null,this.data=null,this.updateReferences(),this}serialize(){return{type:"HalfEdge",id:this.id,edge:this.edge.id,face:this.face===null?null:this.face.id,isReversed:this.isReversed,signedAreaFragment:this.signedAreaFragment,startVertex:this.startVertex===null?null:this.startVertex.id,endVertex:this.endVertex===null?null:this.endVertex.id,sortVector:Oe.Vector2IO.toStateObject(this.sortVector),data:this.data}}dispose(){this.edge=null,this.face=null,this.startVertex=null,this.endVertex=null,this.data=null,this.freeToPool()}getNext(e){for(let t=1;;t++){let n=this.endVertex.incidentHalfEdges.indexOf(this)-t;n<0&&(n+=this.endVertex.incidentHalfEdges.length);const s=this.endVertex.incidentHalfEdges[n].getReversed();if(!(e&&!e(s.edge)))return s}}updateReferences(){this.startVertex=this.isReversed?this.edge.endVertex:this.edge.startVertex,this.endVertex=this.isReversed?this.edge.startVertex:this.edge.endVertex}getEndTangent(){return this.isReversed?this.edge.segment.startTangent:this.edge.segment.endTangent.negated()}getEndCurvature(){return this.isReversed?-this.edge.segment.curvatureAt(0):this.edge.segment.curvatureAt(1)}getReversed(){return this.isReversed?this.edge.forwardHalf:this.edge.reversedHalf}getDirectionalSegment(){return this.isReversed?this.edge.segment.reversed():this.edge.segment}freeToPool(){xc.pool.freeToPool(this)}}xc.pool=new us(xc,{initialize:xc.prototype.initialize});let r6=0;class Js{constructor(e,t,n){this.id=++r6,this.segment=null,this.startVertex=null,this.endVertex=null,this.signedAreaFragment=0,this.forwardHalf=null,this.reversedHalf=null,this.visited=!1,this.data=null,this.internalData=null,this.initialize(e,t,n)}initialize(e,t,n){return this.segment=e,this.startVertex=t,this.endVertex=n,this.signedAreaFragment=e.getSignedAreaFragment(),this.forwardHalf=xc.pool.create(this,!1),this.reversedHalf=xc.pool.create(this,!0),this.visited=!1,this.data=null,this.internalData={},this}serialize(){return{type:"Edge",id:this.id,segment:this.segment.serialize(),startVertex:this.startVertex===null?null:this.startVertex.id,endVertex:this.endVertex===null?null:this.endVertex.id,signedAreaFragment:this.signedAreaFragment,forwardHalf:this.forwardHalf.serialize(),reversedHalf:this.reversedHalf.serialize(),visited:this.visited,data:this.data}}dispose(){this.segment=null,this.startVertex=null,this.endVertex=null,this.forwardHalf.dispose(),this.reversedHalf.dispose(),this.forwardHalf=null,this.reversedHalf=null,this.data=null,this.freeToPool()}getOtherVertex(e){return this.startVertex===e?this.endVertex:this.startVertex}updateReferences(){this.forwardHalf.updateReferences(),this.reversedHalf.updateReferences()}freeToPool(){Js.pool.freeToPool(this)}}Js.pool=new us(Js,{initialize:Js.prototype.initialize});qb.register("Edge",Js);let a6=1;const Hx=[];class vI{constructor(e=1e-6){this.rootNode=Ec.pool.create(this,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this.rootNode.isBlack=!0,this.epsilon=e,this.items=new Set}query(e,t){const n=a6++;return this.rootNode?this.rootNode.query(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon),n,t):!1}addItem(e){const t=this.getMinX(e,this.epsilon),n=this.getMaxX(e,this.epsilon);this.rootNode.split(t,this),this.rootNode.split(n,this),this.rootNode.addItem(e,t,n),this.items.add(e)}removeItem(e){this.rootNode.removeItem(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon)),this.items.delete(e)}audit(){this.rootNode.audit(this.epsilon,this.items,[])}toString(){let e=0,t="";return function n(s){t+=`${ie.repeat("  ",e)}${s.toString()}
`,e++,s.hasChildren()&&(n(s.left),n(s.right)),e--}(this.rootNode),t}}class Ec{constructor(e,t,n){this.items=[],this.initialize(e,t,n)}initialize(e,t,n){return this.min=t,this.max=n,this.splitValue=null,this.left=null,this.right=null,this.parent=null,this.tree=e,this.isBlack=!1,zi(this.items),this}contains(e){return e>=this.min&&e<=this.max}hasChildren(){return this.splitValue!==null}query(e,t,n,s,r){let a=!1;if(this.min<=n&&this.max>=t){for(let o=0;o<this.items.length;o++){const l=this.items[o];if((!l.internalData?.segmentId||l.internalData?.segmentId<s)&&(l.internalData.segmentId=s,a=r(l),a))return!0}this.hasChildren()&&(a||(a=this.left.query(e,t,n,s,r)),a||(a=this.right.query(e,t,n,s,r)))}return a}swapChild(e,t){this.left===e?this.left=t:this.right=t}hasChild(e){return this.left===e||this.right===e}otherChild(e){return this.left===e?this.right:this.left}leftRotate(e){if(this.right.hasChildren()){const t=this.right,n=this.left,s=t.left,r=t.right;t.parent=this.parent,this.parent?this.parent.swapChild(this,t):e.rootNode=t,this.parent=t,s.parent=this,t.left=this,this.left=n,this.right=s,this.max=s.max,this.splitValue=n.max,t.min=this.min,t.splitValue=this.max;const a=zi(Hx);a.push(...this.items),zi(this.items);for(let o=n.items.length-1;o>=0;o--){const l=n.items[o],h=s.items.indexOf(l);h>=0&&(n.items.splice(o,1),s.items.splice(h,1),this.items.push(l))}s.items.push(...t.items),r.items.push(...t.items),zi(t.items),t.items.push(...a)}}rightRotate(e){const t=this.left,n=this.right,s=t.left,r=t.right;t.parent=this.parent,this.parent?this.parent.swapChild(this,t):e.rootNode=t,this.parent=t,r.parent=this,t.right=this,this.left=r,this.right=n,this.min=r.min,this.splitValue=n.min,t.max=this.max,t.splitValue=this.min;const a=zi(Hx);a.push(...this.items),zi(this.items);for(let o=n.items.length-1;o>=0;o--){const l=n.items[o],h=r.items.indexOf(l);h>=0&&(n.items.splice(o,1),r.items.splice(h,1),this.items.push(l))}s.items.push(...t.items),r.items.push(...t.items),zi(t.items),t.items.push(...a)}fixRedBlack(e){if(!this.parent)this.isBlack=!0;else{const t=this.parent;if(!t.isBlack){const n=t.parent,s=n.otherChild(t);s.isBlack?t===n.left?this===t.right?(t.leftRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.rightRotate(e)):(t.isBlack=!0,n.isBlack=!1,n.rightRotate(e)):this===t.left?(t.rightRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.leftRotate(e)):(t.isBlack=!0,n.isBlack=!1,n.leftRotate(e)):(t.isBlack=!0,s.isBlack=!0,n.isBlack=!1,n.fixRedBlack(e))}}}split(e,t){if(!(e===this.min||e===this.max))if(this.hasChildren())this.splitValue!==e&&(e>this.splitValue?this.right:this.left).split(e,t);else{this.splitValue=e;const n=Ec.pool.create(this.tree,this.min,e);n.parent=this,this.left=n;const s=Ec.pool.create(this.tree,e,this.max);if(s.parent=this,this.right=s,!this.isBlack&&this.parent){const r=this.parent,a=r.otherChild(this);a.isBlack?(this===r.left?(r.rightRotate(t),n.isBlack=!0):(r.leftRotate(t),s.isBlack=!0),this.fixRedBlack(t)):(this.isBlack=!0,a.isBlack=!0,r.isBlack=!1,r.fixRedBlack(t))}}}addItem(e,t,n){this.min>n||this.max<t||(this.min>=t&&this.max<=n?this.items.push(e):this.hasChildren()&&(this.left.addItem(e,t,n),this.right.addItem(e,t,n)))}removeItem(e,t,n){this.min>n||this.max<t||(this.min>=t&&this.max<=n?gs(this.items,e):this.hasChildren()&&(this.left.removeItem(e,t,n),this.right.removeItem(e,t,n)))}audit(e,t,n=[]){}toString(){return`[${this.min} ${this.max}] split:${this.splitValue} ${this.isBlack?"black":"red"} ${this.items}`}freeToPool(){Ec.pool.freeToPool(this)}}Ec.pool=new us(Ec);class Ux extends vI{getMinX(e,t){return e.segment.bounds.left-t}getMaxX(e,t){return e.segment.bounds.right+t}}let o6=0;class Au{constructor(e){this.id=++o6,this.boundary=null,this.holes=[],this.windingMap=null,this.filled=null,this.initialize(e)}initialize(e){return this.boundary=e,zi(this.holes),this.windingMap=null,this.filled=null,e&&this.addBoundaryFaceReferences(e),this}serialize(){return{type:"Face",id:this.id,boundary:this.boundary===null?null:this.boundary.id,holes:this.holes.map(e=>e.id),windingMap:this.windingMap,filled:this.filled}}dispose(){this.boundary=null,zi(this.holes),this.windingMap=null,this.filled=null,this.freeToPool()}addBoundaryFaceReferences(e){for(let t=0;t<e.halfEdges.length;t++)e.halfEdges[t].face=this}recursivelyAddHoles(e){this.holes.push(e),this.addBoundaryFaceReferences(e);for(let t=0;t<e.childBoundaries.length;t++)this.recursivelyAddHoles(e.childBoundaries[t])}freeToPool(){Au.pool.freeToPool(this)}}Au.pool=new us(Au,{initialize:Au.prototype.initialize});let l6=0;class Vc{constructor(e,t){this.id=++l6,this.shapeId=0,this.closed=!1,this.halfEdges=[],this.initialize(e,t)}initialize(e,t){return this.shapeId=e,this.closed=t,zi(this.halfEdges),this}serialize(){return{type:"Loop",id:this.id,shapeId:this.shapeId,closed:this.closed,halfEdges:this.halfEdges.map(e=>e.id)}}dispose(){zi(this.halfEdges),this.freeToPool()}freeToPool(){Vc.pool.freeToPool(this)}}Vc.pool=new us(Vc,{initialize:Vc.prototype.initialize});let h6=0;class kr{constructor(e){this.id=++h6,this.point=Oe.ZERO,this.incidentHalfEdges=[],this.visited=!1,this.visitIndex=0,this.lowIndex=0,this.data=null,this.internalData=null,this.initialize(e)}initialize(e){return this.point=e,zi(this.incidentHalfEdges),this.visited=!1,this.visitIndex=0,this.lowIndex=0,this.data=null,this.internalData={},this}serialize(){return{type:"Vertex",id:this.id,point:Oe.Vector2IO.toStateObject(this.point),incidentHalfEdges:this.incidentHalfEdges.map(e=>e.id),visited:this.visited,visitIndex:this.visitIndex,lowIndex:this.lowIndex}}dispose(){this.point=Oe.ZERO,zi(this.incidentHalfEdges),this.freeToPool()}sortEdges(){const e=[];for(let s=0;s<this.incidentHalfEdges.length;s++){const r=this.incidentHalfEdges[s];e.push(r.sortVector.setXY(r.getEndTangent().angle,r.getEndCurvature()))}const t=-Math.PI+1e-4;let n=!1;for(;!n;){n=!0;for(let s=0;s<e.length;s++)e[s].x<t&&(n=!1);if(!n)for(let s=0;s<e.length;s++){const r=e[s];r.x-=1.62594024516,r.x<-Math.PI-1e-4&&(r.x+=Math.PI*2)}}this.incidentHalfEdges.sort(kr.edgeComparison)}static edgeComparison(e,t){const n=e.sortVector.x,s=t.sortVector.x;if(Math.abs(n-s)>1e-5||n!==s&&e.edge.segment instanceof Ki&&t.edge.segment instanceof Ki)return n<s?-1:1;{const r=e.sortVector.y,a=t.sortVector.y;if(Math.abs(r-a)>1e-5)return r<a?1:-1;{const l=e.getDirectionalSegment().subdivided(.999)[1].curvatureAt(0),h=t.getDirectionalSegment().subdivided(.999)[1].curvatureAt(0);return l<h?1:-1}}}freeToPool(){kr.pool.freeToPool(this)}}kr.pool=new us(kr,{initialize:kr.prototype.initialize});class u6 extends vI{getMinX(e,t){return e.point.x-t}getMaxX(e,t){return e.point.x+t}}const hy=Math.random,ss=(i,e)=>new Oe(i,e),Gx=(i,e,t,n)=>t.copy().subtract(i).multiplyScalar((1-n)/6).add(e);let zt=class Ss{constructor(e,t){if(this.subpaths=[],this._invalidatingPoints=!1,this._immutable=!1,this.invalidatedEmitter=new un,this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=null,this._bounds=t?t.copy():null,this.resetControlPoints(),this._invalidateListener=this.invalidate.bind(this),typeof e=="object")for(let n=0;n<e.length;n++)this.addSubpath(e[n]);e&&typeof e!="object"&&ie.each(i6.parse(e),n=>{this[n.cmd].apply(this,n.args)}),this.invalidate()}resetControlPoints(){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=null}setQuadraticControlPoint(e){this.lastQuadraticControlPoint=e,this.lastCubicControlPoint=null}setCubicControlPoint(e){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=e}moveTo(e,t){return this.moveToPoint(ss(e,t))}moveToRelative(e,t){return this.moveToPointRelative(ss(e,t))}moveToPointRelative(e){return this.moveToPoint(this.getRelativePoint().plus(e))}moveToPoint(e){return this.addSubpath(new Hn().addPoint(e)),this.resetControlPoints(),this}lineTo(e,t){return this.lineToPoint(ss(e,t))}lineToRelative(e,t){return this.lineToPointRelative(ss(e,t))}lineToPointRelative(e){return this.lineToPoint(this.getRelativePoint().plus(e))}lineToPoint(e){if(this.hasSubpaths()){const t=this.getLastSubpath().getLastPoint(),n=e,s=new Ki(t,n);this.getLastSubpath().addPoint(n),this.addSegmentAndBounds(s)}else this.ensure(e);return this.resetControlPoints(),this}horizontalLineTo(e){return this.lineTo(e,this.getRelativePoint().y)}horizontalLineToRelative(e){return this.lineToRelative(e,0)}verticalLineTo(e){return this.lineTo(this.getRelativePoint().x,e)}verticalLineToRelative(e){return this.lineToRelative(0,e)}zigZagTo(e,t,n,s,r){return this.zigZagToPoint(new Oe(e,t),n,s,r)}zigZagToPoint(e,t,n,s){this.ensure(e);const r=this.getLastPoint(),a=e.minus(r),o=a.normalized(),l=o.perpendicular.times(t);let h;s?h=a.magnitude/(n+.5):h=a.magnitude/n;for(let c=0;c<n;c++){const f=o.times(c*h).plus(r),g=f.plus(o.times(h/4)).plus(l),v=f.plus(o.times(3*h/4)).minus(l);this.lineToPoint(g),this.lineToPoint(v)}if(s){const f=o.times(n*h).plus(r).plus(o.times(h/4)).plus(l);this.lineToPoint(f)}return this.lineToPoint(e)}quadraticCurveTo(e,t,n,s){return this.quadraticCurveToPoint(ss(e,t),ss(n,s))}quadraticCurveToRelative(e,t,n,s){return this.quadraticCurveToPointRelative(ss(e,t),ss(n,s))}quadraticCurveToPointRelative(e,t){const n=this.getRelativePoint();return this.quadraticCurveToPoint(n.plus(e),n.plus(t))}smoothQuadraticCurveTo(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),ss(e,t))}smoothQuadraticCurveToRelative(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),ss(e,t).plus(this.getRelativePoint()))}quadraticCurveToPoint(e,t){this.ensure(e);const n=this.getLastSubpath().getLastPoint(),s=new Ns(n,e,t);this.getLastSubpath().addPoint(t);const r=s.getNondegenerateSegments();return ie.each(r,a=>{this.addSegmentAndBounds(a)}),this.setQuadraticControlPoint(e),this}cubicCurveTo(e,t,n,s,r,a){return this.cubicCurveToPoint(ss(e,t),ss(n,s),ss(r,a))}cubicCurveToRelative(e,t,n,s,r,a){return this.cubicCurveToPointRelative(ss(e,t),ss(n,s),ss(r,a))}cubicCurveToPointRelative(e,t,n){const s=this.getRelativePoint();return this.cubicCurveToPoint(s.plus(e),s.plus(t),s.plus(n))}smoothCubicCurveTo(e,t,n,s){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),ss(e,t),ss(n,s))}smoothCubicCurveToRelative(e,t,n,s){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),ss(e,t).plus(this.getRelativePoint()),ss(n,s).plus(this.getRelativePoint()))}cubicCurveToPoint(e,t,n){this.ensure(e);const s=this.getLastSubpath().getLastPoint(),a=new nr(s,e,t,n).getNondegenerateSegments();return ie.each(a,o=>{this.addSegmentAndBounds(o)}),this.getLastSubpath().addPoint(n),this.setCubicControlPoint(t),this}arc(e,t,n,s,r,a){return this.arcPoint(ss(e,t),n,s,r,a)}arcPoint(e,t,n,s,r){r===void 0&&(r=!1);const a=new Vn(e,t,n,s,r),o=a.getStart(),l=a.getEnd();return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!o.equals(this.getLastSubpath().getLastPoint())&&this.addSegmentAndBounds(new Ki(this.getLastSubpath().getLastPoint(),o)),this.hasSubpaths()||this.addSubpath(new Hn),this.getLastSubpath().addPoint(o),this.getLastSubpath().addPoint(l),this.addSegmentAndBounds(a),this.resetControlPoints(),this}ellipticalArc(e,t,n,s,r,a,o,l){return this.ellipticalArcPoint(ss(e,t),n,s,r,a,o,l)}ellipticalArcPoint(e,t,n,s,r,a,o){o===void 0&&(o=!1);const l=new Zs(e,t,n,s,r,a,o),h=l.start,c=l.end;return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!h.equals(this.getLastSubpath().getLastPoint())&&this.addSegmentAndBounds(new Ki(this.getLastSubpath().getLastPoint(),h)),this.hasSubpaths()||this.addSubpath(new Hn),this.getLastSubpath().addPoint(h),this.getLastSubpath().addPoint(c),this.addSegmentAndBounds(l),this.resetControlPoints(),this}close(){if(this.hasSubpaths()){const e=this.getLastSubpath(),t=new Hn;e.close(),this.addSubpath(t),t.addPoint(e.getFirstPoint())}return this.resetControlPoints(),this}newSubpath(){return this.addSubpath(new Hn),this.resetControlPoints(),this}makeImmutable(){return this._immutable=!0,this.notifyInvalidationListeners(),this}isImmutable(){return this._immutable}ellipticalArcToRelative(e,t,n,s,r,a,o){const l=this.getRelativePoint();return this.ellipticalArcTo(e,t,n,s,r,a+l.x,o+l.y)}ellipticalArcTo(e,t,n,s,r,a,o){const l=new Oe(a,o);this.ensure(l);const h=this.getLastSubpath().getLastPoint();this.getLastSubpath().addPoint(l),e<0&&(e*=-1),t<0&&(t*=-1);let c=e*e,f=t*t;const g=h.minus(l).dividedScalar(2).rotated(-n),v=g.x*g.x,A=g.y*g.y;let P=new Oe(e*g.y/t,-t*g.x/e);const w=v/c+A/f;w>1&&(e*=Math.sqrt(w),t*=Math.sqrt(w),c=e*e,f=t*t,P=new Oe(e*g.y/t,-t*g.x/e)),P.multiplyScalar(Math.sqrt(Math.max(0,(c*f-c*A-f*v)/(c*A+f*v)))),s===r&&P.multiplyScalar(-1);const T=h.blend(l,.5).plus(P.rotated(n)),D=($,me)=>($.x*me.y-$.y*me.x>0?1:-1)*$.angleBetween(me),M=new Oe((g.x-P.x)/e,(g.y-P.y)/t),B=new Oe((-g.x-P.x)/e,(-g.y-P.y)/t),O=D(Oe.X_UNIT,M);let x=D(M,B)%(Math.PI*2);!r&&x>0&&(x-=Math.PI*2),r&&x<0&&(x+=Math.PI*2);const de=new Zs(T,e,t,n,O,O+x,!r).getNondegenerateSegments();return ie.each(de,$=>{this.addSegmentAndBounds($)}),this}circle(e,t,n){if(typeof e=="object"){const s=e;return n=t,this.arcPoint(s,n,0,Math.PI*2,!1).close()}else return this.arcPoint(ss(e,t),n,0,Math.PI*2,!1).close()}ellipse(e,t,n,s,r){if(typeof e=="object"){const a=e;return r=s,s=n,n=t,this.ellipticalArcPoint(a,n,s,r||0,0,Math.PI*2,!1).close()}else return this.ellipticalArcPoint(ss(e,t),n,s,r||0,0,Math.PI*2,!1).close()}rect(e,t,n,s){const r=new Hn;return this.addSubpath(r),r.addPoint(ss(e,t)),r.addPoint(ss(e+n,t)),r.addPoint(ss(e+n,t+s)),r.addPoint(ss(e,t+s)),this.addSegmentAndBounds(new Ki(r.points[0],r.points[1])),this.addSegmentAndBounds(new Ki(r.points[1],r.points[2])),this.addSegmentAndBounds(new Ki(r.points[2],r.points[3])),r.close(),this.addSubpath(new Hn),this.getLastSubpath().addPoint(ss(e,t)),this.resetControlPoints(),this}roundRect(e,t,n,s,r,a){const o=e+r,l=e+n-r,h=t+a,c=t+s-a;return r===a?this.arc(l,h,r,-Math.PI/2,0,!1).arc(l,c,r,0,Math.PI/2,!1).arc(o,c,r,Math.PI/2,Math.PI,!1).arc(o,h,r,Math.PI,Math.PI*3/2,!1).close():this.ellipticalArc(l,h,r,a,0,-Math.PI/2,0,!1).ellipticalArc(l,c,r,a,0,0,Math.PI/2,!1).ellipticalArc(o,c,r,a,0,Math.PI/2,Math.PI,!1).ellipticalArc(o,h,r,a,0,Math.PI,Math.PI*3/2,!1).close(),this}polygon(e){const t=e.length;if(t>0){this.moveToPoint(e[0]);for(let n=1;n<t;n++)this.lineToPoint(e[n])}return this.close()}cardinalSpline(e,t){const n=Ne()({tension:0,isClosedLineSegments:!1},t),s=e.length,r=n.isClosedLineSegments?s:s-1;for(let a=0;a<r;a++){let o;a===0&&!n.isClosedLineSegments?o=[e[0],e[0],e[1],e[2]]:a===r-1&&!n.isClosedLineSegments?o=[e[a-1],e[a],e[a+1],e[a+1]]:o=[e[(a-1+s)%s],e[a%s],e[(a+1)%s],e[(a+2)%s]];const l=[o[1],Gx(o[0],o[1],o[2],n.tension),Gx(o[3],o[2],o[1],n.tension),o[2]];a===0&&(this.ensure(l[0]),this.getLastSubpath().addPoint(l[0])),this.cubicCurveToPoint(l[1],l[2],l[3])}return this}copy(){return new Ss(ie.map(this.subpaths,e=>e.copy()),this.bounds)}writeToContext(e){const t=this.subpaths.length;for(let n=0;n<t;n++)this.subpaths[n].writeToContext(e)}getSVGPath(){let e="";const t=this.subpaths.length;for(let n=0;n<t;n++){const s=this.subpaths[n];if(s.isDrawable()){const r=s.segments[0].start;e+=`M ${bn(r.x)} ${bn(r.y)} `;for(let a=0;a<s.segments.length;a++)e+=`${s.segments[a].getSVGPathFragment()} `;s.isClosed()&&(e+="Z ")}}return e}transformed(e){const t=ie.map(this.subpaths,s=>s.transformed(e)),n=ie.reduce(t,(s,r)=>s.union(r.bounds),pt.NOTHING);return new Ss(t,n)}nonlinearTransformed(e){const t=Ut({minLevels:0,maxLevels:7,distanceEpsilon:.16,curveEpsilon:e&&e.includeCurvature?.002:null},e),n=ie.map(this.subpaths,r=>r.nonlinearTransformed(t)),s=ie.reduce(n,(r,a)=>r.union(a.bounds),pt.NOTHING);return new Ss(n,s)}polarToCartesian(e){return this.nonlinearTransformed(Ut({pointMap:t=>Oe.createPolar(t.y,t.x),methodName:"polarToCartesian"},e))}toPiecewiseLinear(e){return this.nonlinearTransformed(e)}containsPoint(e){const t=Oe.X_UNIT.copy();let n=0;for(;n<5&&(n++,ie.some(this.subpaths,r=>ie.some(r.segments,a=>{const o=a.start.minus(e),l=o.magnitude;return l!==0?(o.divideScalar(l),o.subtract(t),o.magnitudeSquared<1e-9):!1})));)t.rotate(ol.nextDouble());return this.windingIntersection(new Po(e,t))!==0}intersection(e){let t=[];const n=this.subpaths.length;for(let s=0;s<n;s++){const r=this.subpaths[s];if(r.isDrawable()){const a=r.segments.length;for(let o=0;o<a;o++){const l=r.segments[o];t=t.concat(l.intersection(e))}r.hasClosingSegment()&&(t=t.concat(r.getClosingSegment().intersection(e)))}}return ie.sortBy(t,s=>s.distance)}interiorIntersectsLineSegment(e,t){const n=e.blend(t,.5);if(this.containsPoint(n))return!0;const s=t.minus(e),r=s.magnitude;if(r===0)return!1;s.normalize();const a=this.intersection(new Po(e,s));for(let o=0;o<a.length;o++)if(a[o].distance<=r)return!0;return!1}windingIntersection(e){let t=0;const n=this.subpaths.length;for(let s=0;s<n;s++){const r=this.subpaths[s];if(r.isDrawable()){const a=r.segments.length;for(let o=0;o<a;o++)t+=r.segments[o].windingIntersection(e);r.hasClosingSegment()&&(t+=r.getClosingSegment().windingIntersection(e))}}return t}intersectsBounds(e){if(this.bounds.intersection(e).equals(this.bounds))return!0;const t=new Po(new Oe(e.minX,e.minY),new Oe(1,0)),n=new Po(new Oe(e.minX,e.minY),new Oe(0,1)),s=new Po(new Oe(e.maxX,e.maxY),new Oe(-1,0)),r=new Po(new Oe(e.maxX,e.maxY),new Oe(0,-1));let a,o;const l=this.intersection(t).concat(this.intersection(s));for(o=0;o<l.length;o++)if(a=l[o].point,a.x>=e.minX&&a.x<=e.maxX)return!0;const h=this.intersection(n).concat(this.intersection(r));for(o=0;o<h.length;o++)if(a=h[o].point,a.y>=e.minY&&a.y<=e.maxY)return!0;return!1}getStrokedShape(e){let t=[];const n=pt.NOTHING.copy();let s=this.subpaths.length;for(let r=0;r<s;r++){const o=this.subpaths[r].stroked(e);t=t.concat(o)}s=t.length;for(let r=0;r<s;r++)n.includeBounds(t[r].bounds);return new Ss(t,n)}getOffsetShape(e){const t=[],n=pt.NOTHING.copy();let s=this.subpaths.length;for(let r=0;r<s;r++)t.push(this.subpaths[r].offset(e));s=t.length;for(let r=0;r<s;r++)n.includeBounds(t[r].bounds);return new Ss(t,n)}getDashedShape(e,t,n){const s=Ne()({distanceEpsilon:1e-10,curveEpsilon:1e-8},n);return new Ss(ie.flatten(this.subpaths.map(r=>r.dashed(e,t,s.distanceEpsilon,s.curveEpsilon))))}getBounds(){if(this._bounds===null){const e=pt.NOTHING.copy();ie.each(this.subpaths,t=>{e.includeBounds(t.getBounds())}),this._bounds=e}return this._bounds}get bounds(){return this.getBounds()}getStrokedBounds(e){let t=!0;for(let n=0;n<this.subpaths.length;n++){const s=this.subpaths[n];if(s.isDrawable()&&!s.isClosed()){t=!1;break}for(let r=0;r<s.segments.length;r++)if(!s.segments[r].areStrokedBoundsDilated()){t=!1;break}}if(t)return this.bounds.dilated(e.lineWidth/2);{const n=this.bounds.copy();for(let s=0;s<this.subpaths.length;s++){const r=this.subpaths[s].stroked(e);for(let a=0;a<r.length;a++)n.includeBounds(r[a].bounds)}return n}}getSimplifiedAreaShape(){return fs.simplifyNonZero(this)}getBoundsWithTransform(e,t){const n=pt.NOTHING.copy(),s=this.subpaths.length;for(let r=0;r<s;r++){const a=this.subpaths[r];n.includeBounds(a.getBoundsWithTransform(e))}return t&&n.includeBounds(this.getStrokedShape(t).getBoundsWithTransform(e)),n}getApproximateArea(e){const t=this.bounds.minX,n=this.bounds.minY,s=this.bounds.width,r=this.bounds.height,a=s*r;let o=0;const l=new Oe(0,0);for(let h=0;h<e;h++)l.x=t+hy()*s,l.y=n+hy()*r,this.containsPoint(l)&&o++;return a*o/e}getNonoverlappingArea(){return Math.abs(ie.sum(this.subpaths.map(e=>ie.sum(e.getFillSegments().map(t=>t.getSignedAreaFragment())))))}getArea(){return this.getSimplifiedAreaShape().getNonoverlappingArea()}getApproximateCentroid(e){const t=this.bounds.minX,n=this.bounds.minY,s=this.bounds.width,r=this.bounds.height;let a=0;const o=new Oe(0,0),l=new Oe(0,0);for(let h=0;h<e;h++)l.x=t+hy()*s,l.y=n+hy()*r,this.containsPoint(l)&&(o.add(l),a++);return o.dividedScalar(a)}getClosestPoints(e){return Ks.filterClosestToPointResult(ie.flatten(this.subpaths.map(t=>t.getClosestPoints(e))))}getClosestPoint(e){return this.getClosestPoints(e)[0].closestPoint}invalidatePoints(){this._invalidatingPoints=!0;const e=this.subpaths.length;for(let t=0;t<e;t++)this.subpaths[t].invalidatePoints();this._invalidatingPoints=!1,this.invalidate()}toString(){return`new phet.kite.Shape( '${this.getSVGPath().trim()}' )`}invalidate(){this._invalidatingPoints||(this._bounds=null,this.notifyInvalidationListeners())}notifyInvalidationListeners(){this.invalidatedEmitter.emit()}addSegmentAndBounds(e){this.getLastSubpath().addSegment(e),this.invalidate()}ensure(e){this.hasSubpaths()||(this.addSubpath(new Hn),this.getLastSubpath().addPoint(e))}addSubpath(e){return this.subpaths.push(e),e.invalidatedEmitter.addListener(this._invalidateListener),this.invalidate(),this}hasSubpaths(){return this.subpaths.length>0}getLastSubpath(){return ie.last(this.subpaths)}getLastPoint(){return this.getLastSubpath().getLastPoint()}getLastSegment(){if(!this.hasSubpaths())return null;const e=this.getLastSubpath();return e.isDrawable()?e.getLastSegment():null}getSmoothQuadraticControlPoint(){const e=this.getLastPoint();return this.lastQuadraticControlPoint?e.plus(e.minus(this.lastQuadraticControlPoint)):e}getSmoothCubicControlPoint(){const e=this.getLastPoint();return this.lastCubicControlPoint?e.plus(e.minus(this.lastCubicControlPoint)):e}getRelativePoint(){let e=Oe.ZERO;if(this.hasSubpaths()){const t=this.getLastSubpath();t.points.length&&(e=t.getLastPoint())}return e}shapeUnion(e){return fs.binaryResult(this,e,fs.BINARY_NONZERO_UNION)}shapeIntersection(e){return fs.binaryResult(this,e,fs.BINARY_NONZERO_INTERSECTION)}shapeDifference(e){return fs.binaryResult(this,e,fs.BINARY_NONZERO_DIFFERENCE)}shapeXor(e){return fs.binaryResult(this,e,fs.BINARY_NONZERO_XOR)}shapeClip(e,t){return fs.clipShape(e,this,t)}getArcLength(e,t,n){let s=0;for(let r=0;r<this.subpaths.length;r++)s+=this.subpaths[r].getArcLength(e,t,n);return s}serialize(){return{type:"Shape",subpaths:this.subpaths.map(e=>e.serialize())}}static deserialize(e){return new Ss(e.subpaths.map(Hn.deserialize))}static rectangle(e,t,n,s){return new Ss().rect(e,t,n,s)}static roundRect(e,t,n,s,r,a){return new Ss().roundRect(e,t,n,s,r,a)}static roundedRectangleWithRadii(e,t,n,s,r){let a=r&&r.topLeft||0,o=r&&r.topRight||0,l=r&&r.bottomLeft||0,h=r&&r.bottomRight||0;const c=a+o;c>n&&c>0&&(a=a/c*n,o=o/c*n);const f=l+h;f>n&&f>0&&(l=l/f*n,h=h/f*n);const g=a+l;g>s&&g>0&&(a=a/g*s,l=l/g*s);const v=o+h;v>s&&v>0&&(o=o/v*s,h=h/v*s);const A=new Ss,P=e+n,w=t+s;return h>0?A.arc(P-h,w-h,h,0,Math.PI/2,!1):A.moveTo(P,w),l>0?A.arc(e+l,w-l,l,Math.PI/2,Math.PI,!1):A.lineTo(e,w),a>0?A.arc(e+a,t+a,a,Math.PI,3*Math.PI/2,!1):A.lineTo(e,t),o>0?A.arc(P-o,t+o,o,3*Math.PI/2,2*Math.PI,!1):A.lineTo(P,t),A.close(),A}static boundsOffsetWithRadii(e,t,n){const s=e.withOffsets(t.left,t.top,t.right,t.bottom);return Ss.roundedRectangleWithRadii(s.minX,s.minY,s.width,s.height,n)}static polygon(e){return new Ss().polygon(e)}static bounds(e){return new Ss().rect(e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY)}static lineSegment(e,t,n,s){return typeof e=="number"?new Ss().moveTo(e,t).lineTo(n,s):new Ss().moveToPoint(e).lineToPoint(t)}static regularPolygon(e,t){const n=new Ss;return ie.each(ie.range(e),s=>{const r=Oe.createPolar(t,2*Math.PI*s/e);s===0?n.moveToPoint(r):n.lineToPoint(r)}),n.close()}static circle(e,t,n){return t===void 0?new Ss().circle(0,0,e):new Ss().circle(e,t,n)}static ellipse(e,t,n,s,r){return s===void 0?new Ss().ellipse(0,0,e,t,n):new Ss().ellipse(e,t,n,s,r)}static arc(e,t,n,s,r,a){return new Ss().arc(e,t,n,s,r,a)}static union(e){return fs.unionNonZero(e)}static intersection(e){return fs.intersectionNonZero(e)}static xor(e){return fs.xorNonZero(e)}static segments(e,t){return new Ss([new Hn(e,void 0,!!t)])}static fromGraph(e){const t=[];for(let n=0;n<e.faces.length;n++){const s=e.faces[n];if(s.filled){t.push(Hn.fromBoundary(s.boundary));for(let r=0;r<s.holes.length;r++)t.push(Hn.fromBoundary(s.holes[r]))}}return new Ss(t)}static fromSegment(e){return new Ss([new Hn([e])])}};zt.rect=zt.rectangle;zt.roundRectangle=zt.roundRect;let c6=0,X1=0;const sv=1e-5,Wx=.1*sv,Kx=.01*sv,uy=1e-6;class fs{constructor(){this.vertices=[],this.edges=[],this.innerBoundaries=[],this.outerBoundaries=[],this.boundaries=[],this.shapeIds=[],this.loops=[],this.unboundedFace=Au.pool.create(null),this.faces=[this.unboundedFace]}serialize(){return{type:"Graph",vertices:this.vertices.map(e=>e.serialize()),edges:this.edges.map(e=>e.serialize()),boundaries:this.boundaries.map(e=>e.serialize()),innerBoundaries:this.innerBoundaries.map(e=>e.id),outerBoundaries:this.outerBoundaries.map(e=>e.id),shapeIds:this.shapeIds,loops:this.loops.map(e=>e.serialize()),unboundedFace:this.unboundedFace.id,faces:this.faces.map(e=>e.serialize())}}static deserialize(e){const t=new fs,n={},s={},r={},a={},o={},l={};return t.vertices=e.vertices.map(h=>{const c=new kr(Oe.Vector2IO.fromStateObject(h.point));return n[h.id]=c,c.visited=h.visited,c.visitIndex=h.visitIndex,c.lowIndex=h.lowIndex,c}),t.edges=e.edges.map(h=>{const c=new Js(Ks.deserialize(h.segment),n[h.startVertex],n[h.endVertex]);s[h.id]=c,c.signedAreaFragment=h.signedAreaFragment;const f=(g,v)=>{r[v.id]=g,g.isReversed=v.isReversed,g.signedAreaFragment=v.signedAreaFragment,g.startVertex=n[v.startVertex.id],g.endVertex=n[v.endVertex.id],g.sortVector=Oe.Vector2IO.fromStateObject(v.sortVector),g.data=v.data};return f(c.forwardHalf,h.forwardHalf),f(c.reversedHalf,h.reversedHalf),c.visited=h.visited,c.data=h.data,c}),e.vertices.forEach((h,c)=>{const f=t.vertices[c];f.incidentHalfEdges=h.incidentHalfEdges.map(g=>r[g])}),t.boundaries=e.boundaries.map(h=>{const c=Tc.pool.create(h.halfEdges.map(f=>r[f]));return a[h.id]=c,c.signedArea=h.signedArea,c.bounds=pt.Bounds2IO.fromStateObject(h.bounds),c}),e.boundaries.forEach((h,c)=>{const f=t.boundaries[c];f.childBoundaries=h.childBoundaries.map(g=>a[g])}),t.innerBoundaries=e.innerBoundaries.map(h=>a[h]),t.outerBoundaries=e.outerBoundaries.map(h=>a[h]),t.shapeIds=e.shapeIds,t.loops=e.loops.map(h=>{const c=new Vc(h.shapeId,h.closed);return o[h.id]=c,c.halfEdges=h.halfEdges.map(f=>r[f]),c}),t.faces=e.faces.map((h,c)=>{const f=c===0?t.unboundedFace:new Au(a[h.boundary]);return l[h.id]=f,f.holes=h.holes.map(g=>a[g]),f.windingMap=h.windingMap,f.filled=h.filled,f}),e.edges.forEach((h,c)=>{const f=t.edges[c];f.forwardHalf.face=h.forwardHalf.face===null?null:l[h.forwardHalf.face],f.reversedHalf.face=h.reversedHalf.face===null?null:l[h.reversedHalf.face]}),t}addShape(e,t,n){for(let s=0;s<t.subpaths.length;s++)this.addSubpath(e,t.subpaths[s],n)}addSubpath(e,t,n){const s=Ne()({ensureClosed:!0},n);if(this.shapeIds.includes(e)||this.shapeIds.push(e),t.segments.length===0)return;const r=t.closed||s.ensureClosed,a=s.ensureClosed?t.getFillSegments():t.segments;let o;const l=[];for(o=0;o<a.length;o++){let c=o-1;c<0&&(c=a.length-1);let f=a[c].end;const g=a[o].start;!r&&o===0&&(f=g),g.equals(f)?l.push(kr.pool.create(g)):l.push(kr.pool.create(g.average(f)))}r||l.push(kr.pool.create(a[a.length-1].end));const h=Vc.pool.create(e,r);for(o=0;o<a.length;o++){let c=o+1;r&&c===a.length&&(c=0);const f=Js.pool.create(a[o],l[o],l[c]);h.halfEdges.push(f.forwardHalf),this.addEdge(f)}this.loops.push(h),this.vertices.push(...l)}computeSimplifiedFaces(){this.eliminateOverlap(),this.eliminateSelfIntersection(),this.eliminateIntersection(),this.collapseVertices(),this.removeBridges(),this.removeLowOrderVertices(),this.orderVertexEdges(),this.extractFaces(),this.computeBoundaryTree(),this.computeWindingMap()}computeFaceInclusion(e){for(let t=0;t<this.faces.length;t++){const n=this.faces[t];n.filled=e(n.windingMap)}}createFilledSubGraph(){const e=new fs,t={};for(let n=0;n<this.edges.length;n++){const s=this.edges[n];if(s.forwardHalf.face.filled!==s.reversedHalf.face.filled){if(!t[s.startVertex.id]){const o=kr.pool.create(s.startVertex.point);e.vertices.push(o),t[s.startVertex.id]=o}if(!t[s.endVertex.id]){const o=kr.pool.create(s.endVertex.point);e.vertices.push(o),t[s.endVertex.id]=o}const r=t[s.startVertex.id],a=t[s.endVertex.id];e.addEdge(Js.pool.create(s.segment,r,a))}}return e.collapseAdjacentEdges(),e.orderVertexEdges(),e.extractFaces(),e.computeBoundaryTree(),e.fillAlternatingFaces(),e}facesToShape(){const e=[];for(let t=0;t<this.faces.length;t++){const n=this.faces[t];if(n.filled){e.push(Hn.fromBoundary(n.boundary));for(let s=0;s<n.holes.length;s++)e.push(Hn.fromBoundary(n.holes[s]))}}return new zt(e)}dispose(){for(;this.boundaries.length;)this.boundaries.pop().dispose();for(zi(this.innerBoundaries),zi(this.outerBoundaries);this.loops.length;)this.loops.pop().dispose();for(;this.faces.length;)this.faces.pop().dispose();for(;this.vertices.length;)this.vertices.pop().dispose();for(;this.edges.length;)this.edges.pop().dispose()}addEdge(e){this.edges.push(e),e.startVertex.incidentHalfEdges.push(e.reversedHalf),e.endVertex.incidentHalfEdges.push(e.forwardHalf)}removeEdge(e){gs(this.edges,e),gs(e.startVertex.incidentHalfEdges,e.reversedHalf),gs(e.endVertex.incidentHalfEdges,e.forwardHalf)}replaceEdgeInLoops(e,t){const n=[];for(let s=0;s<t.length;s++)n.push(t[t.length-1-s].getReversed());for(let s=0;s<this.loops.length;s++){const r=this.loops[s];for(let a=r.halfEdges.length-1;a>=0;a--){const o=r.halfEdges[a];if(o.edge===e){const l=o===e.forwardHalf?t:n;r.halfEdges.splice(a,1,...l)}}}}collapseAdjacentEdges(){let e=!0;for(;e;){e=!1;for(let t=0;t<this.vertices.length;t++){const n=this.vertices[t];if(n.incidentHalfEdges.length===2){const s=n.incidentHalfEdges[0].edge,r=n.incidentHalfEdges[1].edge;let a=s.segment,o=r.segment;const l=s.getOtherVertex(n),h=r.getOtherVertex(n);if(s.startVertex===n&&(a=a.reversed()),r.endVertex===n&&(o=o.reversed()),a instanceof Ki&&o instanceof Ki&&a.tangentAt(0).normalized().distance(o.tangentAt(0).normalized())<1e-6){this.removeEdge(s),this.removeEdge(r),s.dispose(),r.dispose(),gs(this.vertices,n),n.dispose();const c=new Ki(l.point,h.point);this.addEdge(new Js(c,l,h)),e=!0;break}}}}}eliminateOverlap(){const t=new Y1,n=new Ux(1e-4),s=X1++,r=l=>{const h=l.segment.bounds;t.push({start:!0,edge:l},h.minY-1e-4),t.push({start:!1,edge:l},h.maxY+1e-4)},a=l=>{l.internalData.removedId=s};for(let l=0;l<this.edges.length;l++)r(this.edges[l]);const o=[];for(;t.length;){const l=t.pop(),h=l.edge;if(h.internalData.removedId!==s)if(l.start){let c=!1,f,g;if(n.query(h,v=>{const A=h.segment.getOverlaps(v.segment);if(A!==null&&A.length)for(let P=0;P<A.length;P++){const w=A[P];if(Math.abs(w.t1-w.t0)>1e-5&&Math.abs(w.qt1-w.qt0)>1e-5)return g=this.splitOverlap(h,v,w),c=!0,f=v,!0}return!1}),c){n.removeItem(f),a(f),a(h);for(let v=0;v<g.length;v++)r(g[v]);o.push(h),o.push(f)}else n.addItem(h)}else n.removeItem(h)}for(let l=0;l<o.length;l++)o[l].dispose()}splitOverlap(e,t,n){const s=[],r=e.segment,a=t.segment;this.removeEdge(e),this.removeEdge(t);let o=n.t0,l=n.t1,h=n.qt0,c=n.qt1;o<1e-5&&(o=0),l>1-1e-5&&(l=1),h<1e-5&&(h=0),c>1-1e-5&&(c=1);const f=o>0?r.subdivided(o)[0]:null,g=h>0?a.subdivided(h)[0]:null,v=l<1?r.subdivided(l)[1]:null,A=c<1?a.subdivided(c)[1]:null;let P=r;o>0&&(P=P.subdivided(o)[1]),l<1&&(P=P.subdivided(Or(o,1,0,1,l))[0]);let w;f&&g?(w=kr.pool.create(P.start),this.vertices.push(w)):f?w=n.a>0?t.startVertex:t.endVertex:w=e.startVertex;let T;v&&A?(T=kr.pool.create(P.end),this.vertices.push(T)):v?T=n.a>0?t.endVertex:t.startVertex:T=e.endVertex;const D=Js.pool.create(P,w,T);s.push(D);let M,B,O,x;f&&(M=Js.pool.create(f,e.startVertex,w),s.push(M)),v&&(B=Js.pool.create(v,T,e.endVertex),s.push(B)),g&&(O=Js.pool.create(g,t.startVertex,n.a>0?w:T),s.push(O)),A&&(x=Js.pool.create(A,n.a>0?T:w,t.endVertex),s.push(x));for(let ue=0;ue<s.length;ue++)this.addEdge(s[ue]);const Z=(f?[M]:[]).concat([D]).concat(v?[B]:[]),de=(g?[O]:[]).concat([D]).concat(A?[x]:[]),$=[],me=[];for(let ue=0;ue<Z.length;ue++)$.push(Z[ue].forwardHalf);for(let ue=0;ue<de.length;ue++){const Se=de[ue]!==D||n.a>0;me.push(Se?de[ue].forwardHalf:de[ue].reversedHalf)}return this.replaceEdgeInLoops(e,$),this.replaceEdgeInLoops(t,me),s}eliminateSelfIntersection(){for(let e=this.edges.length-1;e>=0;e--){const t=this.edges[e],n=t.segment;if(n instanceof nr){const s=n.getSelfIntersection();if(s){const r=n.subdivisions([s.aT,s.bT]),a=kr.pool.create(s.point);this.vertices.push(a);const o=Js.pool.create(r[0],t.startVertex,a),l=Js.pool.create(r[1],a,a),h=Js.pool.create(r[2],a,t.endVertex);this.removeEdge(t),this.addEdge(o),this.addEdge(l),this.addEdge(h),this.replaceEdgeInLoops(t,[o.forwardHalf,l.forwardHalf,h.forwardHalf]),t.dispose()}}}}eliminateIntersection(){const t=new Y1,n=new Ux(1e-4),s=X1++,r=l=>{const h=l.segment.bounds;t.push({start:!0,edge:l},h.minY-1e-4),t.push({start:!1,edge:l},h.maxY+1e-4)},a=l=>{l.internalData.removedId=s};for(let l=0;l<this.edges.length;l++)r(this.edges[l]);const o=[];for(;t.length;){const l=t.pop(),h=l.edge;if(h.internalData.removedId!==s)if(l.start){let c=!1,f,g,v;if(n.query(h,A=>{const P=h.segment,w=A.segment;let T=Ks.intersect(P,w);if(T=T.filter(D=>{const M=D.point;return fs.isInternal(M,D.aT,P,Wx,uy)||fs.isInternal(M,D.bT,w,Wx,uy)}),T.length){const D=T[0],M=this.simpleSplit(h,A,D.aT,D.bT,D.point);if(M)return c=!0,f=A,g=M.addedEdges,v=M.removedEdges,!0}return!1}),c){v.includes(h)?(a(h),o.push(h)):n.addItem(h),v.includes(f)&&(n.removeItem(f),a(f),o.push(f));for(let A=0;A<g.length;A++)r(g[A])}else n.addItem(h)}else n.removeItem(h)}for(let l=0;l<o.length;l++)o[l].dispose()}simpleSplit(e,t,n,s,r){const a=fs.isInternal(r,n,e.segment,Kx,uy),o=fs.isInternal(r,s,t.segment,Kx,uy);let l=null;a?o?(l=kr.pool.create(r),this.vertices.push(l)):l=s<.5?t.startVertex:t.endVertex:l=n<.5?e.startVertex:e.endVertex;let h=!1;const c=[],f=[];return a&&l!==e.startVertex&&l!==e.endVertex&&(c.push(...this.splitEdge(e,n,l)),f.push(e),h=!0),o&&l!==t.startVertex&&l!==t.endVertex&&(c.push(...this.splitEdge(t,s,l)),f.push(t),h=!0),h?{addedEdges:c,removedEdges:f}:null}splitEdge(e,t,n){const s=e.segment.subdivided(t),r=Js.pool.create(s[0],e.startVertex,n),a=Js.pool.create(s[1],n,e.endVertex);return this.removeEdge(e),this.addEdge(r),this.addEdge(a),this.replaceEdgeInLoops(e,[r.forwardHalf,a.forwardHalf]),[r,a]}collapseVertices(){const e=10*sv,t=new Y1,n=new u6(e),s=X1++,r=l=>{t.push({start:!0,vertex:l},l.point.y-e),t.push({start:!1,vertex:l},l.point.y+e)},a=l=>{l.internalData.removedId=s};for(let l=0;l<this.vertices.length;l++)r(this.vertices[l]);const o=[];for(;t.length;){const l=t.pop(),h=l.vertex;if(h.internalData.removedId!==s)if(l.start){let c=!1,f,g;if(n.query(h,v=>{const A=h.point.distance(v.point);if(A<sv){const P=kr.pool.create(A===0?h.point:h.point.average(v.point));this.vertices.push(P),gs(this.vertices,h),gs(this.vertices,v);for(let w=this.edges.length-1;w>=0;w--){const T=this.edges[w],D=T.startVertex===h||T.startVertex===v,M=T.endVertex===h||T.endVertex===v;if(D&&M){if((T.segment.bounds.width>1e-5||T.segment.bounds.height>1e-5)&&(T.segment instanceof nr||T.segment instanceof Vn||T.segment instanceof Zs)){const B=Js.pool.create(T.segment,P,P);this.addEdge(B),this.replaceEdgeInLoops(T,[B.forwardHalf])}else this.replaceEdgeInLoops(T,[]);this.removeEdge(T),T.dispose()}else D?(T.startVertex=P,P.incidentHalfEdges.push(T.reversedHalf),T.updateReferences()):M&&(T.endVertex=P,P.incidentHalfEdges.push(T.forwardHalf),T.updateReferences())}return g=[P],c=!0,f=v,!0}return!1}),c){n.removeItem(f),a(f),a(h);for(let v=0;v<g.length;v++)r(g[v]);o.push(h),o.push(f)}else n.addItem(h)}else n.removeItem(h)}for(let l=0;l<o.length;l++)o[l].dispose()}markBridges(e,t){t.visited=!0,t.visitIndex=t.lowIndex=c6++;for(let n=0;n<t.incidentHalfEdges.length;n++){const s=t.incidentHalfEdges[n].edge,r=t.incidentHalfEdges[n].startVertex;r.visited?s.visited||(t.lowIndex=Math.min(t.lowIndex,r.visitIndex)):(s.visited=!0,this.markBridges(e,r),t.lowIndex=Math.min(t.lowIndex,r.lowIndex),r.lowIndex>t.visitIndex&&e.push(s))}}removeBridges(){const e=[];for(let t=0;t<this.vertices.length;t++){const n=this.vertices[t];n.visited||this.markBridges(e,n)}for(let t=0;t<e.length;t++){const n=e[t];this.removeEdge(n),this.replaceEdgeInLoops(n,[]),n.dispose()}}removeLowOrderVertices(){let e=!0;for(;e;){e=!1;for(let t=this.vertices.length-1;t>=0;t--){const n=this.vertices[t];if(n.incidentHalfEdges.length<2){for(let s=0;s<n.incidentHalfEdges.length;s++){const r=n.incidentHalfEdges[s].edge;this.removeEdge(r),this.replaceEdgeInLoops(r,[]),r.dispose()}this.vertices.splice(t,1),n.dispose(),e=!0;break}}}}orderVertexEdges(){for(let e=0;e<this.vertices.length;e++)this.vertices[e].sortEdges()}extractFaces(){const e=[];for(let t=0;t<this.edges.length;t++)e.push(this.edges[t].forwardHalf),e.push(this.edges[t].reversedHalf);for(;e.length;){const t=[];let n=e[0];const s=n;for(;n&&(gs(e,n),t.push(n),n=n.getNext(),n!==s););const r=Tc.pool.create(t);(r.signedArea>0?this.innerBoundaries:this.outerBoundaries).push(r),this.boundaries.push(r)}for(let t=0;t<this.innerBoundaries.length;t++)this.faces.push(Au.pool.create(this.innerBoundaries[t]))}computeBoundaryTree(){const e=[],t=new $r(It.rotation2(1.5729657));for(let n=0;n<this.outerBoundaries.length;n++){const s=this.outerBoundaries[n],r=s.computeExtremeRay(t);let a=null,o=Number.POSITIVE_INFINITY,l;for(let h=0;h<this.edges.length;h++){const c=this.edges[h],f=c.segment.intersection(r);for(let g=0;g<f.length;g++){const v=f[g];v.distance<o&&(a=c,o=v.distance,l=v.wind)}}if(a===null)e.push(s);else{const c=l<0?a.reversedHalf:a.forwardHalf;this.getBoundaryOfHalfEdge(c).childBoundaries.push(s)}}e.forEach(this.unboundedFace.recursivelyAddHoles.bind(this.unboundedFace));for(let n=0;n<this.faces.length;n++){const s=this.faces[n];s.boundary!==null&&s.boundary.childBoundaries.forEach(s.recursivelyAddHoles.bind(s))}}computeWindingMap(){const e=this.edges.slice(),t={};for(let n=0;n<this.shapeIds.length;n++)t[this.shapeIds[n]]=0;for(this.unboundedFace.windingMap=t;e.length;)for(let n=e.length-1;n>=0;n--){const s=e[n],r=s.forwardHalf,a=s.reversedHalf,o=r.face,l=a.face,h=o.windingMap!==null,c=l.windingMap!==null;if(h&&c)e.splice(n,1);else{if(!h&&!c)continue;{const f=h?o:l,g=h?l:o,v={};for(let A=0;A<this.shapeIds.length;A++){const P=this.shapeIds[A],w=this.computeDifferential(s,P);v[P]=f.windingMap[P]+w*(h?-1:1)}g.windingMap=v}}}}computeDifferential(e,t){let n=0;for(let s=0;s<this.loops.length;s++){const r=this.loops[s];if(r.shapeId===t)for(let a=0;a<r.halfEdges.length;a++){const o=r.halfEdges[a];o===e.forwardHalf?n++:o===e.reversedHalf&&n--}}return n}fillAlternatingFaces(){let e=0;for(let t=0;t<this.faces.length;t++)this.faces[t].filled=null,e++;for(this.unboundedFace.filled=!1,e--;e;)for(let t=0;t<this.edges.length;t++){const n=this.edges[t],s=n.forwardHalf.face,r=n.reversedHalf.face,a=s.filled===null,o=r.filled===null;a&&!o?(s.filled=!r.filled,e--):!a&&o&&(r.filled=!s.filled,e--)}}getBoundaryOfHalfEdge(e){for(let t=0;t<this.boundaries.length;t++){const n=this.boundaries[t];if(n.hasHalfEdge(e))return n}throw new Error("Could not find boundary")}static isInternal(e,t,n,s,r){return t>r&&t<1-r&&e.distance(n.start)>s&&e.distance(n.end)>s}static BINARY_NONZERO_UNION(e){return e[0]!==0||e[1]!==0}static BINARY_NONZERO_INTERSECTION(e){return e[0]!==0&&e[1]!==0}static BINARY_NONZERO_DIFFERENCE(e){return e[0]!==0&&e[1]===0}static BINARY_NONZERO_XOR(e){return e[0]!==0!=(e[1]!==0)}static binaryResult(e,t,n){const s=new fs;s.addShape(0,e),s.addShape(1,t),s.computeSimplifiedFaces(),s.computeFaceInclusion(n);const r=s.createFilledSubGraph(),a=r.facesToShape();return s.dispose(),r.dispose(),a}static unionNonZero(e){const t=new fs;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>{for(let a=0;a<e.length;a++)if(r[a]!==0)return!0;return!1});const n=t.createFilledSubGraph(),s=n.facesToShape();return t.dispose(),n.dispose(),s}static intersectionNonZero(e){const t=new fs;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>{for(let a=0;a<e.length;a++)if(r[a]===0)return!1;return!0});const n=t.createFilledSubGraph(),s=n.facesToShape();return t.dispose(),n.dispose(),s}static xorNonZero(e){const t=new fs;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>{let a=!1;for(let o=0;o<e.length;o++)r[o]!==0&&(a=!a);return a});const n=t.createFilledSubGraph(),s=n.facesToShape();return t.dispose(),n.dispose(),s}static simplifyNonZero(e){const t=new fs;t.addShape(0,e),t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>r[0]!==0);const n=t.createFilledSubGraph(),s=n.facesToShape();return t.dispose(),n.dispose(),s}static clipShape(e,t,n){let s,r,a;const h=Ne()({includeExterior:!1,includeBoundary:!0,includeInterior:!0},n),c=fs.simplifyNonZero(e),f=new fs;for(f.addShape(0,t,{ensureClosed:!1}),f.addShape(1,c),f.eliminateOverlap(),f.eliminateSelfIntersection(),f.eliminateIntersection(),f.collapseVertices(),s=0;s<f.loops.length;s++)if(a=f.loops[s],a.shapeId===1)for(r=0;r<a.halfEdges.length;r++)a.halfEdges[r].edge.data=!0;const g=[];for(s=0;s<f.loops.length;s++)if(a=f.loops[s],a.shapeId===0){let v=[];for(r=0;r<a.halfEdges.length;r++){const A=a.halfEdges[r];(A.edge.data?h.includeBoundary:c.containsPoint(A.edge.segment.positionAt(.5))?h.includeInterior:h.includeExterior)?v.push(A.getDirectionalSegment()):v.length&&(g.push(new Hn(v,void 0,a.closed)),v=[])}v.length&&g.push(new Hn(v,void 0,a.closed))}return f.dispose(),new zt(g)}}class AS{constructor(e,t){this._map=new Map,this._enumeration=e,this._values=e.enumeration.values,this._values.forEach(n=>{jt(!this._map.has(n),"Enumeration key override problem"),this._map.set(n,t(n))})}get(e){return jt(this._values.includes(e)),jt(this._map.has(e)),this._map.get(e)}set(e,t){jt(this._values.includes(e)),this._map.set(e,t)}map(e){return new AS(this._enumeration,t=>e(this.get(t),t))}forEach(e){this._values.forEach(t=>e(this.get(t),t))}values(){return this._values.map(e=>this.get(e))}}class rl extends AS{constructor(e,t){super(Ot,n=>n===Ot.HORIZONTAL?e:t)}get horizontal(){return this.get(Ot.HORIZONTAL)}set horizontal(e){this.set(Ot.HORIZONTAL,e)}get vertical(){return this.get(Ot.VERTICAL)}set vertical(e){this.set(Ot.VERTICAL,e)}with(e,t){return new rl(e===Ot.HORIZONTAL?t:this.horizontal,e===Ot.VERTICAL?t:this.vertical)}static create(e){return new rl(e(Ot.HORIZONTAL),e(Ot.VERTICAL))}map(e){return new rl(e(this.horizontal,Ot.HORIZONTAL),e(this.vertical,Ot.VERTICAL))}}var d6=20,p6=1,Tf=1e6,f6=1e6,m6=-7,g6=21,y6=!1,s0="[big.js] ",ud=s0+"Invalid ",zb=ud+"decimal places",v6=ud+"rounding mode",bI=s0+"Division by zero",as={},Hl=void 0,b6=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function _I(){function i(e){var t=this;if(!(t instanceof i))return e===Hl?_I():new i(e);if(e instanceof i)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(i.strict===!0&&typeof e!="bigint")throw TypeError(ud+"value");e=e===0&&1/e<0?"-0":String(e)}_6(t,e)}t.constructor=i}return i.prototype=as,i.DP=d6,i.RM=p6,i.NE=m6,i.PE=g6,i.strict=y6,i.roundDown=0,i.roundHalfUp=1,i.roundHalfEven=2,i.roundUp=3,i}function _6(i,e){var t,n,s;if(!b6.test(e))throw Error(ud+"number");for(i.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)i.c=[i.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(i.e=t-n-1,i.c=[],t=0;n<=s;)i.c[t++]=+e.charAt(n++)}return i}function cd(i,e,t,n){var s=i.c;if(t===Hl&&(t=i.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(v6);if(e<1)n=t===3&&(n||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(n||s[1]!==Hl))),s.length=1,n?(i.e=i.e-e+1,s[0]=1):s[0]=i.e=0;else if(e<s.length){if(n=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==Hl||s[e-1]&1))||t===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++i.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return i}function dd(i,e,t){var n=i.e,s=i.c.join(""),r=s.length;if(e)s=s.charAt(0)+(r>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>r)for(n-=r;n--;)s+="0";else n<r&&(s=s.slice(0,n)+"."+s.slice(n));else r>1&&(s=s.charAt(0)+"."+s.slice(1));return i.s<0&&t?"-"+s:s}as.abs=function(){var i=new this.constructor(this);return i.s=1,i};as.cmp=function(i){var e,t=this,n=t.c,s=(i=new t.constructor(i)).c,r=t.s,a=i.s,o=t.e,l=i.e;if(!n[0]||!s[0])return n[0]?r:s[0]?-a:0;if(r!=a)return r;if(e=r<0,o!=l)return o>l^e?1:-1;for(a=(o=n.length)<(l=s.length)?o:l,r=-1;++r<a;)if(n[r]!=s[r])return n[r]>s[r]^e?1:-1;return o==l?0:o>l^e?1:-1};as.div=function(i){var e=this,t=e.constructor,n=e.c,s=(i=new t(i)).c,r=e.s==i.s?1:-1,a=t.DP;if(a!==~~a||a<0||a>Tf)throw Error(zb);if(!s[0])throw Error(bI);if(!n[0])return i.s=r,i.c=[i.e=0],i;var o,l,h,c,f,g=s.slice(),v=o=s.length,A=n.length,P=n.slice(0,o),w=P.length,T=i,D=T.c=[],M=0,B=a+(T.e=e.e-i.e)+1;for(T.s=r,r=B<0?0:B,g.unshift(0);w++<o;)P.push(0);do{for(h=0;h<10;h++){if(o!=(w=P.length))c=o>w?1:-1;else for(f=-1,c=0;++f<o;)if(s[f]!=P[f]){c=s[f]>P[f]?1:-1;break}if(c<0){for(l=w==o?s:g;w;){if(P[--w]<l[w]){for(f=w;f&&!P[--f];)P[f]=9;--P[f],P[w]+=10}P[w]-=l[w]}for(;!P[0];)P.shift()}else break}D[M++]=c?h:++h,P[0]&&c?P[w]=n[v]||0:P=[n[v]]}while((v++<A||P[0]!==Hl)&&r--);return!D[0]&&M!=1&&(D.shift(),T.e--,B--),M>B&&cd(T,B,t.RM,P[0]!==Hl),T};as.eq=function(i){return this.cmp(i)===0};as.gt=function(i){return this.cmp(i)>0};as.gte=function(i){return this.cmp(i)>-1};as.lt=function(i){return this.cmp(i)<0};as.lte=function(i){return this.cmp(i)<1};as.minus=as.sub=function(i){var e,t,n,s,r=this,a=r.constructor,o=r.s,l=(i=new a(i)).s;if(o!=l)return i.s=-l,r.plus(i);var h=r.c.slice(),c=r.e,f=i.c,g=i.e;if(!h[0]||!f[0])return f[0]?i.s=-l:h[0]?i=new a(r):i.s=1,i;if(o=c-g){for((s=o<0)?(o=-o,n=h):(g=c,n=f),n.reverse(),l=o;l--;)n.push(0);n.reverse()}else for(t=((s=h.length<f.length)?h:f).length,o=l=0;l<t;l++)if(h[l]!=f[l]){s=h[l]<f[l];break}if(s&&(n=h,h=f,f=n,i.s=-i.s),(l=(t=f.length)-(e=h.length))>0)for(;l--;)h[e++]=0;for(l=e;t>o;){if(h[--t]<f[t]){for(e=t;e&&!h[--e];)h[e]=9;--h[e],h[t]+=10}h[t]-=f[t]}for(;h[--l]===0;)h.pop();for(;h[0]===0;)h.shift(),--g;return h[0]||(i.s=1,h=[g=0]),i.c=h,i.e=g,i};as.mod=function(i){var e,t=this,n=t.constructor,s=t.s,r=(i=new n(i)).s;if(!i.c[0])throw Error(bI);return t.s=i.s=1,e=i.cmp(t)==1,t.s=s,i.s=r,e?new n(t):(s=n.DP,r=n.RM,n.DP=n.RM=0,t=t.div(i),n.DP=s,n.RM=r,this.minus(t.times(i)))};as.neg=function(){var i=new this.constructor(this);return i.s=-i.s,i};as.plus=as.add=function(i){var e,t,n,s=this,r=s.constructor;if(i=new r(i),s.s!=i.s)return i.s=-i.s,s.minus(i);var a=s.e,o=s.c,l=i.e,h=i.c;if(!o[0]||!h[0])return h[0]||(o[0]?i=new r(s):i.s=s.s),i;if(o=o.slice(),e=a-l){for(e>0?(l=a,n=h):(e=-e,n=o),n.reverse();e--;)n.push(0);n.reverse()}for(o.length-h.length<0&&(n=h,h=o,o=n),e=h.length,t=0;e;o[e]%=10)t=(o[--e]=o[e]+h[e]+t)/10|0;for(t&&(o.unshift(t),++l),e=o.length;o[--e]===0;)o.pop();return i.c=o,i.e=l,i};as.pow=function(i){var e=this,t=new e.constructor("1"),n=t,s=i<0;if(i!==~~i||i<-1e6||i>f6)throw Error(ud+"exponent");for(s&&(i=-i);i&1&&(n=n.times(e)),i>>=1,!!i;)e=e.times(e);return s?t.div(n):n};as.prec=function(i,e){if(i!==~~i||i<1||i>Tf)throw Error(ud+"precision");return cd(new this.constructor(this),i,e)};as.round=function(i,e){if(i===Hl)i=0;else if(i!==~~i||i<-1e6||i>Tf)throw Error(zb);return cd(new this.constructor(this),i+this.e+1,e)};as.sqrt=function(){var i,e,t,n=this,s=n.constructor,r=n.s,a=n.e,o=new s("0.5");if(!n.c[0])return new s(n);if(r<0)throw Error(s0+"No square root");r=Math.sqrt(+dd(n,!0,!0)),r===0||r===1/0?(e=n.c.join(""),e.length+a&1||(e+="0"),r=Math.sqrt(e),a=((a+1)/2|0)-(a<0||a&1),i=new s((r==1/0?"5e":(r=r.toExponential()).slice(0,r.indexOf("e")+1))+a)):i=new s(r+""),a=i.e+(s.DP+=4);do t=i,i=o.times(t.plus(n.div(t)));while(t.c.slice(0,a).join("")!==i.c.slice(0,a).join(""));return cd(i,(s.DP-=4)+i.e+1,s.RM)};as.times=as.mul=function(i){var e,t=this,n=t.constructor,s=t.c,r=(i=new n(i)).c,a=s.length,o=r.length,l=t.e,h=i.e;if(i.s=t.s==i.s?1:-1,!s[0]||!r[0])return i.c=[i.e=0],i;for(i.e=l+h,a<o&&(e=s,s=r,r=e,h=a,a=o,o=h),e=new Array(h=a+o);h--;)e[h]=0;for(l=o;l--;){for(o=0,h=a+l;h>l;)o=e[h]+r[l]*s[h-l-1]+o,e[h--]=o%10,o=o/10|0;e[h]=o}for(o?++i.e:e.shift(),l=e.length;!e[--l];)e.pop();return i.c=e,i};as.toExponential=function(i,e){var t=this,n=t.c[0];if(i!==Hl){if(i!==~~i||i<0||i>Tf)throw Error(zb);for(t=cd(new t.constructor(t),++i,e);t.c.length<i;)t.c.push(0)}return dd(t,!0,!!n)};as.toFixed=function(i,e){var t=this,n=t.c[0];if(i!==Hl){if(i!==~~i||i<0||i>Tf)throw Error(zb);for(t=cd(new t.constructor(t),i+t.e+1,e),i=i+t.e+1;t.c.length<i;)t.c.push(0)}return dd(t,!1,!!n)};as[Symbol.for("nodejs.util.inspect.custom")]=as.toJSON=as.toString=function(){var i=this,e=i.constructor;return dd(i,i.e<=e.NE||i.e>=e.PE,!!i.c[0])};as.toNumber=function(){var i=+dd(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(i.toString()))throw Error(s0+"Imprecise conversion");return i};as.toPrecision=function(i,e){var t=this,n=t.constructor,s=t.c[0];if(i!==Hl){if(i!==~~i||i<1||i>Tf)throw Error(ud+"precision");for(t=cd(new n(t),i,e);t.c.length<i;)t.c.push(0)}return dd(t,i<=t.e||t.e<=n.NE||t.e>=n.PE,!!s)};as.valueOf=function(){var i=this,e=i.constructor;if(e.strict===!0)throw Error(s0+"valueOf disallowed");return dd(i,i.e<=e.NE||i.e>=e.PE,!0)};var A6=_I();function pd(i,e){if(isNaN(i))return"NaN";if(i===Number.POSITIVE_INFINITY)return"Infinity";if(i===Number.NEGATIVE_INFINITY)return"-Infinity";const t=new A6(i).toFixed(e);return t.startsWith("-0.")&&Number.parseFloat(t)===0?"0"+t.slice(2):t}const w6="DerivedPropertyIO";function Q1(i,e){return i(...e.map(t=>t.get()))}class Dt extends ks{constructor(e,t,n){const s=Ne()({phetioReadOnly:!0,phetioOuterType:Dt.DerivedPropertyIO,phetioLinkDependencies:!0},n),r=Q1(t,e);super(r,s),R.VALIDATION&&this.isPhetioInstrumented(),this.dependencies=e,this.derivation=t,this.derivedPropertyListener=this.getDerivedPropertyListener.bind(this),e.forEach(a=>{if(a.lazyLink(this.derivedPropertyListener),R.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&a instanceof rn&&a.isPhetioInstrumented()&&(a instanceof ks&&c2.registerPhetioOrderDependency(a,Ts.UNDEFER,this,Ts.UNDEFER),s.tandem&&s.phetioLinkDependencies)){const o=s.tandem.createTandem("dependencies");this.addLinkedElement(a,{phetioFeatured:R.PHET_IO_ENABLED?a.phetioFeatured&&this.phetioFeatured:!1,tandem:o.createTandemFromPhetioID(a.tandem.phetioID)})}})}hasDependency(e){return this.definedDependencies.includes(e)}get definedDependencies(){return this.dependencies}getDerivedPropertyListener(){this.isDisposed||(this.isDeferred?this.hasDeferredValue=!0:super.set(Q1(this.derivation,this.definedDependencies)))}recomputeDerivation(){this.getDerivedPropertyListener()}dispose(){const e=this.definedDependencies;for(let t=0;t<e.length;t++){const n=e[t];n.hasListener(this.derivedPropertyListener)&&n.unlink(this.derivedPropertyListener)}this.dependencies=null,super.dispose()}setDeferred(e){return this.isDeferred&&!e&&(this.deferredValue=Q1(this.derivation,this.definedDependencies)),super.setDeferred(e)}static valueEquals(e,t,n){return new Dt([e,t],(s,r)=>s===r,n)}static valueNotEquals(e,t,n){return new Dt([e,t],(s,r)=>s!==r,n)}static valueEqualsConstant(e,t,n){return new Dt([e],s=>s===t,n)}static valueNotEqualsConstant(e,t,n){return new Dt([e],s=>s!==t,n)}static and(e,t){return Dt.deriveAny(e,()=>ie.reduce(e,S6,!0),t)}static or(e,t){return Dt.deriveAny(e,()=>ie.reduce(e,P6,!1),t)}static multiply(e,t){return Dt.deriveAny(e,()=>ie.reduce(e,T6,1),t)}static add(e,t){return Dt.deriveAny(e,()=>ie.reduce(e,x6,0),t)}static not(e,t){return new Dt([e],n=>!n,t)}static fromRecord(e,t,n){const s=Object.values(t).filter(r=>ai(r));return Dt.deriveAny([e,...s],()=>{const r=t[e.value];return ai(r)?r.value:r},n)}static toFixed(e,t,n){return new Dt([e],s=>pd(s,t),n)}static deriveAny(e,t,n){return new Dt(e,t,n)}}const S6=(i,e)=>i&&e.value,P6=(i,e)=>i||e.value,T6=(i,e)=>i*e.value,x6=(i,e)=>i+e.value,J1=new ea;Dt.DerivedPropertyIO=i=>(J1.has(i)||J1.set(i,new ui(`${w6}<${i.typeName}>`,{valueType:Dt,parameterTypes:[i],supertype:Mt.PropertyIO(i),documentation:"Like PropertyIO, but not settable.  Instead it is derived from other DerivedPropertyIO or PropertyIO instances",applyState:ie.noop,methods:{setValue:{returnType:rr,parameterTypes:[i],implementation:Dt.prototype.set,documentation:"Errors out when you try to set a derived property.",invocableForReadOnlyElements:!1}}})),J1.get(i));class AI extends Dt{}class E6 extends Dt{}class V6 extends Dt{}const Fb="-",Z1=Fb;class Yi{constructor(e){if(e instanceof Yi){const t=e;this.nodes=t.nodes.slice(0),this.length=t.length,this.uniqueId=t.uniqueId,this.indices=t.indices.slice(0);return}if(this.nodes=[],this.length=0,this.uniqueId="",this.indices=[],e)if(e&&!Array.isArray(e)){const t=e;this.addDescendant(t)}else{const t=e.length;for(let n=0;n<t;n++)this.addDescendant(e[n])}}copy(){return new Yi(this)}isPainted(){return this.lastNode().isPainted()}isValid(){this.reindex();const e=this.indices.length;for(let t=0;t<e;t++)if(this.indices[t]<0)return!1;return!0}isVisible(){let e=this.nodes.length;for(;e--;)if(!this.nodes[e].isVisible())return!1;return!0}isPDOMVisible(){let e=this.nodes.length;for(;e--;)if(!this.nodes[e].isVisible()||!this.nodes[e].isPDOMVisible())return!1;return!0}getOpacity(){let e=1,t=this.nodes.length;for(;t--;)e*=this.nodes[t].getOpacity();return e}isPickable(){return ie.some(this.nodes,e=>e.pickable===!1||!e.visible)?!1:!!ie.some(this.nodes,e=>e._inputListeners.length>0||e.pickableProperty.value===!0)}get(e){return e>=0?this.nodes[e]:this.nodes[this.nodes.length+e]}slice(e,t){return new Yi(this.nodes.slice(e,t))}subtrailTo(e,t=!1){return this.slice(0,ie.indexOf(this.nodes,e)+(t?0:1))}isEmpty(){return this.nodes.length===0}getMatrixConcatenation(e,t){const n=It.identity(),s=this.nodes;for(let r=e;r<t;r++)n.multiplyMatrix(s[r].getMatrix());return n}getMatrix(){return this.getMatrixConcatenation(0,this.nodes.length)}getAncestorMatrix(){return this.getMatrixConcatenation(1,this.nodes.length)}getParentMatrix(){return this.getMatrixConcatenation(0,this.nodes.length-1)}getAncestorParentMatrix(){return this.getMatrixConcatenation(1,this.nodes.length-1)}getTransform(){return new $r(this.getMatrix())}getParentTransform(){return new $r(this.getParentMatrix())}addAncestor(e,t){if(this.nodes.length){const n=this.nodes[0];this.indices.unshift(t===void 0?ie.indexOf(e._children,n):t)}return this.nodes.unshift(e),this.length++,this.uniqueId=this.uniqueId?e.id+Z1+this.uniqueId:`${e.id}`,this}removeAncestor(){return this.nodes.shift(),this.indices.length&&this.indices.shift(),this.length--,this.updateUniqueId(),this}addDescendant(e,t){if(this.nodes.length){const n=this.lastNode();this.indices.push(t===void 0?ie.indexOf(n._children,e):t)}return this.nodes.push(e),this.length++,this.uniqueId=this.uniqueId?this.uniqueId+Z1+e.id:`${e.id}`,this}removeDescendant(){return this.nodes.pop(),this.indices.length&&this.indices.pop(),this.length--,this.updateUniqueId(),this}addDescendantTrail(e){const t=e.length;t&&this.addDescendant(e.nodes[0]);for(let n=1;n<t;n++)this.addDescendant(e.nodes[n],this.indices[n-1])}removeDescendantTrail(e){const t=e.length;for(let n=t-1;n>=0;n--)this.removeDescendant()}reindex(){const e=this.length;for(let t=1;t<e;t++){const n=this.indices[t-1],s=this.nodes[t-1];s._children[n]!==this.nodes[t]&&(this.indices[t-1]=ie.indexOf(s._children,this.nodes[t]))}}setImmutable(){return this}setMutable(){return this}areIndicesValid(){for(let e=1;e<this.length;e++){const t=this.indices[e-1];if(this.nodes[e-1]._children[t]!==this.nodes[e])return!1}return!0}equals(e){if(this.length!==e.length)return!1;for(let t=0;t<this.nodes.length;t++)if(this.nodes[t]!==e.nodes[t])return!1;return!0}upToNode(e){return ie.indexOf(this.nodes,e),this.slice(0,ie.indexOf(this.nodes,e)+1)}isExtensionOf(e,t){if(this.length<=e.length-(t?1:0))return!1;for(let n=0;n<e.nodes.length;n++)if(this.nodes[n]!==e.nodes[n])return!1;return!0}containsNode(e){return ie.includes(this.nodes,e)}getTransformTo(e){return new $r(this.getMatrixTo(e))}getMatrixTo(e){this.reindex(),e.reindex();const t=this.getBranchIndexTo(e);let n,s=It.IDENTITY;for(n=this.length-1;n>=t;n--)s=this.nodes[n].getMatrix().timesMatrix(s);for(n=t;n<e.length;n++)s=e.nodes[n].getTransform().getInverse().timesMatrix(s);return s}getBranchIndexTo(e){let t;const n=Math.min(this.length,e.length);for(t=0;t<n&&this.nodes[t]===e.nodes[t];t++);return t}getLastInputEnabledIndex(){let e=-1;for(let t=0;t<this.length&&this.nodes[t].inputEnabled;t++)e=t;return e}getCursorCheckIndex(){return this.getLastInputEnabledIndex()}nodeFromTop(e){return this.nodes[this.length-1-e]}lastNode(){return this.nodeFromTop(0)}rootNode(){return this.nodes[0]}previous(){if(this.nodes.length<=1)return null;const e=this.nodeFromTop(0),t=this.nodeFromTop(1),n=ie.indexOf(t._children,e),s=this.nodes.slice(0,this.nodes.length-1);if(n===0)return new Yi(s);for(s.push(t._children[n-1]);s[s.length-1]._children.length!==0;){const r=s[s.length-1];s.push(r._children[r._children.length-1])}return new Yi(s)}previousPainted(){let e=this.previous();for(;e&&!e.isPainted();)e=e.previous();return e}next(){const e=this.nodes.slice(0),t=this.nodeFromTop(0);if(t._children.length>0)return e.push(t._children[0]),new Yi(e);{let n=this.nodes.length-1;for(;n>0;){const s=this.nodes[n],r=this.nodes[n-1];e.pop();const a=ie.indexOf(r._children,s);if(a!==r._children.length-1)return e.push(r._children[a+1]),new Yi(e);n--}return null}}nextPainted(){let e=this.next();for(;e&&!e.isPainted();)e=e.next();return e}compare(e){const t=Math.min(this.nodes.length,e.nodes.length);for(let n=0;n<t;n++)if(this.nodes[n]!==e.nodes[n])return this.nodes[n-1].children.indexOf(this.nodes[n])<e.nodes[n-1].children.indexOf(e.nodes[n])?-1:1;return this.nodes.length<e.nodes.length?-1:this.nodes.length>e.nodes.length?1:0}isBefore(e){return this.compare(e)===-1}isAfter(e){return this.compare(e)===1}localToGlobalPoint(e){return this.getMatrix().timesVector2(e)}localToGlobalBounds(e){return e.transformed(this.getMatrix())}globalToLocalPoint(e){return this.getTransform().inversePosition2(e)}globalToLocalBounds(e){return this.getTransform().inverseBounds2(e)}parentToGlobalPoint(e){return this.getParentMatrix().timesVector2(e)}parentToGlobalBounds(e){return e.transformed(this.getParentMatrix())}globalToParentPoint(e){return this.getParentTransform().inversePosition2(e)}globalToParentBounds(e){return this.getParentTransform().inverseBounds2(e)}updateUniqueId(){let e="";const t=this.nodes.length;t>0&&(e+=this.nodes[0]._id);for(let n=1;n<t;n++)e+=Z1+this.nodes[n]._id;this.uniqueId=e}getUniqueId(){return this.uniqueId}toString(){return this.reindex(),this.length?`[Trail ${this.indices.join(".")} ${this.getUniqueId()}]`:"Empty Trail"}toPathString(){return ie.map(this.nodes,e=>{let t=e.constructor.name;return t==="Node"&&(t="."),t}).join("/")}toDebugString(){return`${this.toString()} ${this.toPathString()}`}static branchIndex(e,t){let n;const s=Math.min(e.length,t.length);for(n=0;n<s&&e.nodes[n]===t.nodes[n];n++);return n}static sharedTrail(e,t){return e.slice(0,Yi.branchIndex(e,t))}static appendAncestorTrailsWithPredicate(e,t,n){const s=t.rootNode();n(s)&&e.push(t.copy());const r=s._parents.length;for(let a=0;a<r;a++){const o=s._parents[a];t.addAncestor(o),Yi.appendAncestorTrailsWithPredicate(e,t,n),t.removeAncestor()}}static appendDescendantTrailsWithPredicate(e,t,n){const s=t.lastNode();n(s)&&e.push(t.copy());const r=s._children.length;for(let a=0;a<r;a++){const o=s._children[a];t.addDescendant(o,a),Yi.appendDescendantTrailsWithPredicate(e,t,n),t.removeDescendant()}}static spannedSubtrees(e,t){}}class k6 extends oi{constructor(e,t){super([]),this.listenedNodeSet=new Set,this.rootNode=e,this.leafNode=t,this._trailUpdateListener=this.update.bind(this),this.update()}update(){const e=[],t=new Set,n=new Yi(this.leafNode),s=this.rootNode;(function o(){const l=n.rootNode();t.add(l),l===s&&e.push(n.copy()),l.parents.forEach(h=>{n.addAncestor(h),o(),n.removeAncestor()})})(),t.forEach(o=>{this.listenedNodeSet.has(o)||this.addNodeListener(o)}),this.listenedNodeSet.forEach(o=>{t.has(o)||this.removeNodeListener(o)});const r=this.value;let a=r.length===e.length;if(a){for(let o=0;o<e.length;o++)if(!r[o].equals(e[o])){a=!1;break}}a||(this.value=e)}addNodeListener(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._trailUpdateListener),e.parentRemovedEmitter.addListener(this._trailUpdateListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._trailUpdateListener),e.parentRemovedEmitter.removeListener(this._trailUpdateListener)}dispose(){this.listenedNodeSet.forEach(e=>this.removeNodeListener(e)),super.dispose()}}class kc{constructor(e,t){this._matrices=null,this._dirtyIndex=0,this._listeners=[],this._nodeTransformListeners=[];const n=Ne()({isStatic:!1},t);this._isStatic=n.isStatic,this.trail=e,this._nodeTransformListeners=[];for(let s=1;s<this.trail.length;s++){const r=(a=>()=>{this.onTransformChange(a)})(s-1);this._nodeTransformListeners.push(r),e.nodes[s].transformEmitter.addListener(r)}}dispose(){for(let e=1;e<this.trail.length;e++){const t=this._nodeTransformListeners[e-1];this.trail.nodes[e].transformEmitter.hasListener(t)&&this.trail.nodes[e].transformEmitter.removeListener(t)}}addListener(e){this._listeners.push(e)}removeListener(e){const t=ie.indexOf(this._listeners,e);this._listeners.splice(t,1)}notifyListeners(){let e=this._listeners;this._isStatic||(e=e.slice());const t=e.length;for(let n=0;n<t;n++)e[n]()}onTransformChange(e){this._dirtyIndex=Math.min(this._dirtyIndex,e),this.notifyListeners()}getMatrix(){if(this._matrices===null){this._matrices=[];for(let t=1;t<this.trail.length;t++)this._matrices.push(new It)}if(this._matrices.length<=0)return It.IDENTITY;const e=this._matrices.length;for(let t=this._dirtyIndex;t<e;t++){const n=this.trail.nodes[t+1].matrix;t===0?this._matrices[t].set(n):(this._matrices[t].set(this._matrices[t-1]),this._matrices[t].multiplyMatrix(n))}return this._dirtyIndex=e,this._matrices[e-1]}get matrix(){return this.getMatrix()}}class C6 extends AI{constructor(e,t,n){const s=new k6(e,t);super([s],a=>a.length===1?Ap.pool.create(a[0].copy().removeAncestor()):null),this.transformTracker=null,this.trailsBetweenProperty=s,this.lazyLink((a,o)=>{o&&o.dispose()});const r=n?.onTransformChange;r&&this.link(a=>{this.transformTracker&&(this.transformTracker.dispose(),this.transformTracker=null),a&&(this.transformTracker=new kc(a.trail.copy().addAncestor(e)),this.transformTracker.addListener(r))})}dispose(){this.trailsBetweenProperty.dispose(),this.transformTracker&&this.transformTracker.dispose(),super.dispose()}}class wS{constructor(e,t,n){n?(this.layoutProxyProperty=null,this._proxy=n):(this._proxy=null,this.layoutProxyProperty=new C6(e.ancestorNode,t,{onTransformChange:()=>e.updateLayoutAutomatically()}),this.layoutProxyProperty.link(s=>{this._proxy=s,e.updateLayoutAutomatically()})),this._constraint=e,this._node=t,this.layoutOptionsListener=this.onLayoutOptionsChange.bind(this),this.node.layoutOptionsChangedEmitter.addListener(this.layoutOptionsListener)}onLayoutOptionsChange(){}get node(){return this._node}isConnected(){return this._proxy!==null}get proxy(){return this._proxy}isSizable(e){return e===Ot.HORIZONTAL?this.proxy.widthSizable:this.proxy.heightSizable}dispose(){this.layoutProxyProperty&&this.layoutProxyProperty.dispose(),this.node.layoutOptionsChangedEmitter.removeListener(this.layoutOptionsListener)}}class Qt extends Mt{constructor(e,t){const n=Ne()({valueType:"boolean",phetioValueType:Fs},t);super(e,n)}toggle(){this.value=!this.value}}const D6={valueType:"number",isValidValue:i=>i%1===0,validationMessage:"Should be a valid integer"},I6={isValidValue:i=>!isNaN(i),validationMessage:"Should not be NaN"},L6=["FloatingPoint","Integer"],M6="rangeProperty",Yx=qi.EVERYTHING,jx=Mt.PropertyIO(Ii);class Ba extends Mt{constructor(e,t){const n=Ne()({numberType:"FloatingPoint",range:Yx,validators:[],phetioOuterType:()=>Ba.NumberPropertyIO},t);n.rangePropertyOptions=Ne()({phetioDocumentation:"Provides the range of possible values for the parent NumberPropertyIO",phetioValueType:qi.RangeIO,phetioReadOnly:!0,tandem:n.range!==Yx?n.tandem?.createTandem(M6):R.OPT_OUT},n.rangePropertyOptions),n.valueType="number",n.phetioValueType=Ii;const r=!(n.range&&n.range instanceof ks),a=n.range instanceof ks?n.range:new Mt(n.range,n.rangePropertyOptions);n.validators.push(I6),n.numberType==="Integer"&&n.validators.push(D6);let o=!1;if(n.validators.push({isValidValue:l=>a.value.contains(l),validationMessage:()=>`Number value ${o?this.value:e} must be within rangeProperty value: ${a.value}`}),super(e,n),o=!0,this.numberType=n.numberType,this.rangeProperty=a,this.rangeProperty.addPhetioStateDependencies([this]),this.addPhetioStateDependencies([this.rangeProperty]),n.validValues&&this.validateNumberAndRangeProperty)for(let l=0;l<n.validValues.length;l++){const h=n.validValues[l];this.validateNumberAndRangeProperty(h)}this.disposeNumberProperty=()=>{r&&this.rangeProperty.dispose()},this.resetNumberProperty=()=>{r&&this.rangeProperty.reset()}}get range(){return this.rangeProperty.value}set range(e){this.rangeProperty.value=e}reset(){this.resetValueAndRange(),super.reset()}dispose(){this.disposeNumberProperty(),super.dispose()}setValueAndRange(e,t){this.setDeferred(!0),this.rangeProperty.setDeferred(!0),this.set(e),this.rangeProperty.set(t);const n=this.setDeferred(!1),s=this.rangeProperty.setDeferred(!1);n&&n(),s&&s()}resetValueAndRange(){this.setValueAndRange(this.initialValue,this.rangeProperty.initialValue)}toStateObject(){const e=super.toStateObject();return ie.assignIn({numberType:this.numberType,range:qi.RangeIO.toStateObject(this.rangeProperty.value),rangePhetioID:this.rangeProperty&&this.rangeProperty.isPhetioInstrumented()?this.rangeProperty.tandem.phetioID:null},e)}}Ba.NumberPropertyIO=new ui("NumberPropertyIO",{valueType:Ba,supertype:jx,parameterTypes:[Ii],documentation:`Extends PropertyIO to add values for the numeric range ( min, max ) and numberType ( '${L6.join("' | '")}' )`,toStateObject:i=>i.toStateObject(),applyState:(i,e)=>{jx.applyState(i,e)},stateSchema:{numberType:xi,range:qi.RangeIO,rangePhetioID:fi(xi)},apiStateKeys:["numberType","range","rangePhetioID"]});const xf=i=>{Na(i,["length"],["elements"]);const e=Ne()({hasListenerOrderDependencies:!1,length:0,elements:[],elementAddedEmitterOptions:{},elementRemovedEmitterOptions:{},lengthPropertyOptions:{}},i);let t=null;if(e.phetioType)t={name:"value",phetioType:e.phetioType.parameterTypes[0]};else if(qn.getValidatorValidationError(e))t=an({name:"value"},{isValidValue:ie.stubTrue});else{const f=ie.pick(e,qn.VALIDATOR_KEYS);t=an({name:"value"},f)}const n=new kn(Ut({tandem:e.tandem?.createTandem("elementAddedEmitter"),parameters:[t],phetioReadOnly:!0,hasListenerOrderDependencies:e.hasListenerOrderDependencies},e.elementAddedEmitterOptions)),s=new kn(Ut({tandem:e.tandem?.createTandem("elementRemovedEmitter"),parameters:[t],phetioReadOnly:!0,hasListenerOrderDependencies:e.hasListenerOrderDependencies},e.elementRemovedEmitterOptions)),r=new Ba(0,Ut({numberType:"Integer",tandem:e.tandem?.createTandem("lengthProperty"),phetioReadOnly:!0,hasListenerOrderDependencies:e.hasListenerOrderDependencies},e.lengthPropertyOptions)),a=[],o=[],l=(f,g)=>{h.notificationsDeferred?h.deferredActions.push(()=>f.emit(g)):f.emit(g)},h=new Proxy(a,{get:function(f,g,v){return Xx.hasOwnProperty(g)?Xx[g]:Reflect.get(f,g,v)},set:function(f,g,v){const A=f[g];let P=null;g==="length"&&(P=f.slice(v));const w=Reflect.set(f,g,v),T=Number(g);return Number.isInteger(T)&&T>=0&&A!==v?(r.value=f.length,A!==void 0&&l(s,f[g]),v!==void 0&&l(n,v)):g==="length"&&(r.value=v,P&&P.forEach(D=>l(s,D))),w},deleteProperty:function(f,g){const v=Number(g);let A;Number.isInteger(v)&&v>=0&&(A=f[g]);const P=Reflect.deleteProperty(f,g);return A!==void 0&&l(s,A),P}});h.targetArray=a,h.notificationsDeferred=!1,h.emitNotification=l,h.deferredActions=o,h.elementAddedEmitter=n,h.elementRemovedEmitter=s,h.lengthProperty=r;const c=()=>{e.length>=0&&(h.length=e.length),e.elements.length>0&&Array.prototype.push.apply(h,e.elements)};if(c(),h.reset=()=>{h.length=0,c()},e.tandem?.supplied&&(h.phetioElementType=e.phetioType.parameterTypes[0],h._observableArrayPhetioObject=new wI(h,e),R.PHET_IO_ENABLED)){const f=phet.phetio.phetioEngine.phetioStateEngine;f.clearDynamicElementsEmitter.addListener((g,v)=>{h._observableArrayPhetioObject?.tandem.hasAncestor(v)&&(h.length=0,h.setNotificationsDeferred(!0))}),f.undeferEmitter.addListener(()=>{h.notificationsDeferred&&h.setNotificationsDeferred(!1)}),f.addSetStateHelper(()=>h.deferredActions.length>0?(h.deferredActions.shift()(),!0):!1)}return h};class wI extends rn{constructor(e,t){super(t),this.observableArray=e}}const Xx={pop(...i){const e=this.targetArray.length,t=Array.prototype.pop.apply(this.targetArray,i);return this.lengthProperty.value=this.length,e>0&&this.emitNotification(this.elementRemovedEmitter,t),t},shift(...i){const e=this.targetArray.length,t=Array.prototype.shift.apply(this.targetArray,i);return this.lengthProperty.value=this.length,e>0&&this.emitNotification(this.elementRemovedEmitter,t),t},push(...i){const e=Array.prototype.push.apply(this.targetArray,i);this.lengthProperty.value=this.length;for(let t=0;t<arguments.length;t++)this.emitNotification(this.elementAddedEmitter,i[t]);return e},unshift(...i){const e=Array.prototype.unshift.apply(this.targetArray,i);this.lengthProperty.value=this.length;for(let t=0;t<i.length;t++)this.emitNotification(this.elementAddedEmitter,i[t]);return e},splice(...i){const e=Array.prototype.splice.apply(this.targetArray,i);this.lengthProperty.value=this.length;const t=e;for(let n=2;n<i.length;n++)this.emitNotification(this.elementAddedEmitter,i[n]);return t.forEach(n=>this.emitNotification(this.elementRemovedEmitter,n)),e},copyWithin(...i){const e=this.targetArray.slice(),t=Array.prototype.copyWithin.apply(this.targetArray,i);return Qx(e,this),t},fill(...i){const e=this.targetArray.slice(),t=Array.prototype.fill.apply(this.targetArray,i);return Qx(e,this),t},get:function(i){return this[i]},addItemAddedListener:function(i){this.elementAddedEmitter.addListener(i)},removeItemAddedListener:function(i){this.elementAddedEmitter.removeListener(i)},addItemRemovedListener:function(i){this.elementRemovedEmitter.addListener(i)},removeItemRemovedListener:function(i){this.elementRemovedEmitter.removeListener(i)},add:function(i){this.push(i)},addAll:function(i){this.push(...i)},remove:function(i){gs(this,i)},removeAll:function(i){i.forEach(e=>gs(this,e))},clear:function(){for(;this.length>0;)this.pop()},count:function(i){let e=0;for(let t=0;t<this.length;t++)i(this[t])&&e++;return e},find:function(i,e){return ie.find(this,i,e)},shuffle:function(i){const e=i.shuffle(this);this.targetArray.length=0,Array.prototype.push.apply(this.targetArray,e)},getArrayCopy:function(){return this.slice()},dispose:function(){this.elementAddedEmitter.dispose(),this.elementRemovedEmitter.dispose(),this.lengthProperty.dispose(),this._observableArrayPhetioObject&&this._observableArrayPhetioObject.dispose()},toStateObject:function(){return{array:this.map(i=>this.phetioElementType.toStateObject(i))}},applyState:function(i){this.length=0;const e=i.array.map(t=>this.phetioElementType.fromStateObject(t));this.push(...e)},setNotificationsDeferred:function(i){if(!i)for(;this.deferredActions.length>0;)this.deferredActions.shift()();this.notificationsDeferred=i}},Qx=(i,e)=>{const t=i,n=e.targetArray.slice();for(let s=0;s<t.length;s++){const r=t[s],a=n.indexOf(r);a>=0&&(t.splice(s,1),n.splice(a,1),s--)}t.forEach(s=>e.emitNotification(e.elementRemovedEmitter,s)),n.forEach(s=>e.emitNotification(e.elementAddedEmitter,s))},$1=new ea,O6=i=>($1.has(i)||$1.set(i,new ui(`ObservableArrayIO<${i.typeName}>`,{valueType:wI,parameterTypes:[i],toStateObject:e=>e.observableArray.toStateObject(),applyState:(e,t)=>e.observableArray.applyState(t),stateSchema:{array:Kl(i)}})),$1.get(i));xf.ObservableArrayIO=O6;const N6="enabledProperty";class rv extends Qt{constructor(e,t){const n=Ne()({phetioDocumentation:"Determines whether the element is enabled (true) or disabled (false).",phetioFeatured:!0,checkTandemName:!0},t);super(e,n)}static get TANDEM_NAME(){return N6}}const R6={enabledProperty:null,enabled:!0,enabledPropertyOptions:null,phetioEnabledPropertyInstrumented:!0,tandem:rn.DEFAULT_OPTIONS.tandem};class Ef extends th{constructor(e){const t=so()({},R6,e),n=!t.enabledProperty;super(t),this.enabledProperty=t.enabledProperty||new rv(t.enabled,an({tandem:t.phetioEnabledPropertyInstrumented?t.tandem.createTandem(rv.TANDEM_NAME):R.OPT_OUT},t.enabledPropertyOptions)),this.disposeEnabledComponent=()=>{n&&this.enabledProperty.dispose()}}setEnabled(e){this.enabledProperty.value=e}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this.enabledProperty.value}dispose(){this.disposeEnabledComponent(),super.dispose()}}class Lr extends js{}Lr.DRAG=new Lr;Lr.KEYBOARD_DRAG=new Lr;Lr.enumeration=new Sr(Lr,{phetioDocumentation:"entries when signifying Intent of the pointer"});class Uc{constructor(e,t){this.point=e,this.type=t,this.trail=null,this.inputEnabledTrail=null,this.isDownProperty=new Qt(!1),this.attachedProperty=new Qt(!1),this._listeners=[],this._attachedListener=null,this._cursor=null,this.lastEventContext=null,this._intents=[],this._pointerCaptured=!1,this._listenerForDragReserve=null,this._listenerForKeyboardDragReserve=null}setCursor(e){return this._cursor=e,this}set cursor(e){this.setCursor(e)}get cursor(){return this.getCursor()}getCursor(){return this._cursor}getListeners(){return this._listeners.slice()}get listeners(){return this.getListeners()}addInputListener(e,t){this._listeners.push(e),t&&this.attach(e)}removeInputListener(e){const t=ie.indexOf(this._listeners,e);this.isAttached()&&e===this._attachedListener&&this.detach(e),this._listeners.splice(t,1)}getAttachedListener(){return this._attachedListener}get attachedListener(){return this.getAttachedListener()}isAttached(){return this.attachedProperty.value}isTouchLike(){return!1}set isDown(e){this.isDownProperty.value=e}get isDown(){return this.isDownProperty.value}interruptAttached(){this.isAttached()&&this._attachedListener.interrupt()}interruptAll(){const e=this._listeners.slice();for(let t=0;t<e.length;t++){const n=e[t];n.interrupt&&n.interrupt()}}attach(e){this.attachedProperty.value=!0,this._attachedListener=e}updatePoint(e,t="event"){const n=this.hasPointChanged(e);return this.point=e,n}down(e){this.isDown=!0}up(e,t){return this.isDown=!1,this.updatePoint(e,"up")}cancel(e){return this.isDown=!1,this.updatePoint(e,"cancel")}detach(e){this.attachedProperty.value=!1,this._attachedListener=null}hasPointChanged(e){return this.point!==e&&(!e||!this.point||!this.point.equals(e))}addIntent(e){this._intents.includes(e)||this._intents.push(e)}removeIntent(e){if(this._intents.includes(e)){const t=this._intents.indexOf(e);this._intents.splice(t,1)}}hasIntent(e){return this._intents.includes(e)}reserveForDrag(){if(!this._intents.includes(Lr.DRAG)){this.addIntent(Lr.DRAG);const e={up:t=>{this.removeIntent(Lr.DRAG),this.removeInputListener(this._listenerForDragReserve),this._listenerForDragReserve=null}};this._listenerForDragReserve=e,this.addInputListener(this._listenerForDragReserve)}}reserveForKeyboardDrag(){if(!this._intents.includes(Lr.KEYBOARD_DRAG)){this.addIntent(Lr.KEYBOARD_DRAG);const e={keyup:n=>t(),blur:n=>t()},t=()=>{this.removeIntent(Lr.KEYBOARD_DRAG),this.removeInputListener(this._listenerForKeyboardDragReserve),this._listenerForKeyboardDragReserve=null};this._listenerForKeyboardDragReserve=e,this.addInputListener(this._listenerForKeyboardDragReserve)}}onGotPointerCapture(){this._pointerCaptured=!0}onLostPointerCapture(){this._pointerCaptured&&this.interruptAll(),this._pointerCaptured=!1}hasPointerCaptured(){return this._pointerCaptured}dispose(){this._listenerForDragReserve&&this._listeners.includes(this._listenerForDragReserve)&&this.removeInputListener(this._listenerForDragReserve),this._listenerForKeyboardDragReserve&&this._listeners.includes(this._listenerForKeyboardDragReserve)&&this.removeInputListener(this._listenerForKeyboardDragReserve)}toString(){return`Pointer#${this.type}_at_${this.point}`}}Uc.PointerIO=new ui("PointerIO",{valueType:Uc,toStateObject:i=>({point:i.point.toStateObject(),type:i.type}),stateSchema:{point:Oe.Vector2IO,type:xi}});class Qm extends Uc{constructor(e){super(e,"mouse"),this.id=null,this.leftDown=!1,this.middleDown=!1,this.rightDown=!1,this.wheelDelta=new Wn(0,0,0),this.wheelDeltaMode=0}down(e){switch(e.button){case 0:this.leftDown=!0;break;case 1:this.middleDown=!0;break;case 2:this.rightDown=!0;break}return super.down(e)}up(e,t){switch(t.button){case 0:this.leftDown=!1;break;case 1:this.middleDown=!1;break;case 2:this.rightDown=!1;break}return super.up(e,t)}move(e){const t=this.hasPointChanged(e);return this.point=e,t}over(e){const t=this.hasPointChanged(e);return this.point=e,t}out(e){return this.hasPointChanged(e)}wheel(e){const t=e;this.wheelDelta.setXYZ(t.deltaX,t.deltaY,t.deltaZ),this.wheelDeltaMode=t.deltaMode}toString(){return"Mouse"}}class Nl extends oi{constructor(e,t=!1,n){super(e,n),t&&(this.targetPropertyInstrumented=t)}setValueOrTargetProperty(e,t,n){if(ai(n))this.setTargetProperty(n,e,t);else{const s=this.get();this.clearTargetProperty(),this.setPropertyValue(n),this.areValuesEqual(s,n)||this.notifyListeners(s)}}setTargetProperty(e,t=null,n=null){if(this.targetProperty===e)return t;this.targetProperty&&this.targetProperty instanceof ks&&this.targetProperty.isPhetioInstrumented();const s=this.targetProperty;this.ownedPhetioProperty&&e!==this.ownedPhetioProperty&&this.disposeOwnedPhetioProperty(),t&&n!==null&&t.updateLinkedElementForProperty(n,s,e);const r=this.get();return this.clearTargetProperty(),this.targetProperty=e,this.targetProperty?(this.targetProperty.lazyLink(this.forwardingListener),this.setPropertyValue(this.targetProperty.value)):this.setPropertyValue(r),this.areValuesEqual(r,this.get())||this.notifyListeners(r),t}clearTargetProperty(){this.forwardingListener=this.forwardingListener||this.onTargetPropertyChange.bind(this),this.targetProperty&&this.targetProperty.unlink(this.forwardingListener),this.targetProperty=null}onTargetPropertyChange(e){super.set(e)}set(e){return this.targetProperty?this.targetProperty.set(e):super.set(e),this}setTargetPropertyInstrumented(e,t){return this.targetPropertyInstrumented=e,t}getTargetPropertyInstrumented(){return this.targetPropertyInstrumented||!1}initializePhetio(e,t,n){!this.targetProperty&&this.targetPropertyInstrumented?(this.ownedPhetioProperty=n(),this.setTargetProperty(this.ownedPhetioProperty,e,t)):this.targetProperty&&this.targetProperty instanceof ks&&this.targetProperty.isPhetioInstrumented()&&e.updateLinkedElementForProperty(t,null,this.targetProperty)}getTargetProperty(){return this.targetProperty||null}isSettable(){return this.targetProperty?this.targetProperty.isSettable():super.isSettable()}disposeOwnedPhetioProperty(){this.ownedPhetioProperty&&(this.ownedPhetioProperty.dispose(),delete this.ownedPhetioProperty)}dispose(){this.clearTargetProperty(),this.disposeOwnedPhetioProperty(),super.dispose()}}class cy extends oi{constructor(e,t){super(e),this.onAccessAttempt=t}get(){return this.onAccessAttempt(),super.get()}set(e){throw new Error("Cannot set a TinyStaticProperty value")}isSettable(){return!1}notifyListeners(e){this.emit(this.get(),e,this)}link(e){this.addListener(e),e(this.get(),null,this)}equalsValue(e){return this.areValuesEqual(e,this.get())}}function Cc(i,e,t,n,s){jt(Array.isArray(i)&&ie.uniq(i).length===i.length,"a is not an array of unique items"),jt(Array.isArray(e)&&ie.uniq(e).length===e.length,"b is not an array of unique items"),t=t||[],n=n||[],s=s||[],jt(Array.isArray(t)&&t.length===0),jt(Array.isArray(n)&&n.length===0),jt(Array.isArray(s)&&s.length===0),Array.prototype.push.apply(t,i),Array.prototype.push.apply(n,e);e:for(let r=0;r<t.length;r++){const a=t[r];for(let o=0;o<n.length;o++){const l=n[o];if(a===l){if(s.push(a),t.splice(r,1),n.splice(o,1),o=0,r===t.length)break e;r-=1}}}return t}const B6=new oi(!1),Yl=B6,qe={};qe.numActiveRenderers=4;qe.bitsPerRenderer=5;qe.bitmaskRendererArea=255;qe.bitmaskCurrentRendererArea=15;qe.bitmaskLacksOffset=65536;qe.bitmaskLacksShift=16;qe.bitmaskNodeDefault=qe.bitmaskRendererArea;qe.bitmaskCanvas=1;qe.bitmaskSVG=2;qe.bitmaskDOM=4;qe.bitmaskWebGL=8;qe.bitmaskSingleCanvas=256;qe.bitmaskSingleSVG=512;qe.bitmaskNotPainted=4096;qe.bitmaskBoundsValid=8192;qe.bitmaskNoPDOM=16384;qe.bitmaskLacksCanvas=qe.bitmaskCanvas<<qe.bitmaskLacksShift;qe.bitmaskLacksSVG=qe.bitmaskSVG<<qe.bitmaskLacksShift;qe.bitmaskLacksDOM=qe.bitmaskDOM<<qe.bitmaskLacksShift;qe.bitmaskLacksWebGL=qe.bitmaskWebGL<<qe.bitmaskLacksShift;qe.isCanvas=function(i){return(i&qe.bitmaskCanvas)!==0};qe.isSVG=function(i){return(i&qe.bitmaskSVG)!==0};qe.isDOM=function(i){return(i&qe.bitmaskDOM)!==0};qe.isWebGL=function(i){return(i&qe.bitmaskWebGL)!==0};const q6={canvas:qe.bitmaskCanvas,svg:qe.bitmaskSVG,dom:qe.bitmaskDOM,webgl:qe.bitmaskWebGL};qe.fromName=function(i){return q6[i]};qe.stripBitmask=function(i){return i&qe.bitmaskRendererArea};qe.createOrderBitmask=function(i,e,t,n){return i=i||0,e=e||0,t=t||0,n=n||0,i|e<<5|t<<10|n<<15};qe.bitmaskOrder=function(i,e){return e>0&&(i=i>>5*e),i&qe.bitmaskCurrentRendererArea};qe.bitmaskOrderFirst=function(i){return i&qe.bitmaskCurrentRendererArea};qe.bitmaskOrderSecond=function(i){return i>>5&qe.bitmaskCurrentRendererArea};qe.bitmaskOrderThird=function(i){return i>>10&qe.bitmaskCurrentRendererArea};qe.bitmaskOrderFourth=function(i){return i>>15&qe.bitmaskCurrentRendererArea};qe.pushOrderBitmask=function(i,e){let t=e;const n=qe.bitsPerRenderer*qe.numActiveRenderers;for(let s=0;s<=n;s+=qe.bitsPerRenderer){const r=i>>s&qe.bitmaskCurrentRendererArea;if(r===t)return i;if(r===0)return i=i|t<<s,i;if(i=i&~(qe.bitmaskCurrentRendererArea<<s),i=i|t<<s,t=r,t===e)return i}throw new Error("pushOrderBitmask overflow")};qe.createSelfDrawable=function(i,e,t,n){let s;if(qe.isCanvas(t))s=e.createCanvasDrawable(t,i);else if(qe.isSVG(t))s=e.createSVGDrawable(t,i);else if(qe.isDOM(t))s=e.createDOMDrawable(t,i);else if(qe.isWebGL(t))s=e.createWebGLDrawable(t,i);else throw new Error(`Unrecognized renderer: ${t}`);return s.setFittable(n),s};qe.webglCustom=1;qe.webglTexturedTriangles=2;qe.webglVertexColorPolygons=3;class z6{constructor(e){this.node=e,this.pdomDisplays=[]}onAddChild(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.addPDOMDisplays(this.pdomDisplays)}onRemoveChild(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.removePDOMDisplays(this.pdomDisplays)}onSummaryChange(e,t){if(this.node.visible&&this.node.pdomVisible){const n=!(qe.bitmaskNoPDOM&e),s=!(qe.bitmaskNoPDOM&t);s&&!n&&this.addAllPDOMDisplays(),!s&&n&&this.removeAllPDOMDisplays()}}onVisibilityChange(e){this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}onPDOMVisibilityChange(e){this.node.visible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}onAddedRootedDisplay(e){e._accessible&&this.canHavePDOMDisplays()&&this.addPDOMDisplays([e])}onRemovedRootedDisplay(e){e._accessible&&this.canHavePDOMDisplays()&&this.removePDOMDisplays([e])}canHavePDOMDisplays(){return this.node.visible&&this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()}addAllPDOMDisplays(){let e;const t=[];for(e=0;e<this.node._parents.length;e++)Array.prototype.push.apply(t,this.node._parents[e]._pdomDisplaysInfo.pdomDisplays);for(e=0;e<this.node._rootedDisplays.length;e++){const n=this.node._rootedDisplays[e];n._accessible&&t.push(n)}this.addPDOMDisplays(t)}removeAllPDOMDisplays(){this.removePDOMDisplays(this.pdomDisplays.slice())}addPDOMDisplays(e){if(e.length!==0){Array.prototype.push.apply(this.pdomDisplays,e);for(let t=0;t<this.node._children.length;t++)this.node._children[t]._pdomDisplaysInfo.canHavePDOMDisplays()&&this.node._children[t]._pdomDisplaysInfo.addPDOMDisplays(e);this.node.pdomDisplaysEmitter.emit()}}removePDOMDisplays(e){if(e.length!==0){let t;for(t=e.length-1;t>=0;t--)this.pdomDisplays.lastIndexOf(e[t]),this.pdomDisplays.splice(t,1);for(t=0;t<this.node._children.length;t++){const n=this.node._children[t];n._pdomDisplaysInfo.canHavePDOMDisplays()&&!n._isGettingRemovedFromParent&&n._pdomDisplaysInfo.removePDOMDisplays(e)}this.node.pdomDisplaysEmitter.emit()}}}class Jx{constructor(e,t,n){this.pdomInstance=e,this.trail=t,this.isRoot=n,this.isRoot=n,this.fullTrail=this.pdomInstance.trail.copy();for(let s=this.isRoot?0:1;s<this.trail.length;s++)this.fullTrail.addDescendant(this.trail.nodes[s])}}class el{constructor(e,t){this.display=e,this.trail=t}}el.FocusIO=new ui("FocusIO",{valueType:el,documentation:"A PhET-iO Type for the instance in the simulation which currently has keyboard focus. FocusIO is serialized into and Object with key `focusedPhetioElement` that is a list of PhET-iO Elements, from parent-most to child-most corresponding to the PhET-iO Element that was instrumented.",toStateObject:i=>{const e=[];return i.trail.nodes.forEach((t,n)=>{t.isPhetioInstrumented()&&e.push(t.tandem.phetioID)}),{focusedPhetioElement:e}},stateSchema:{focusedPhetioElement:Kl(xi)}});class F6{constructor(e,t){t=an({isStatic:!1},t),this.isStatic=t.isStatic,this.trail=e,this._listeners=[],this.trailVisibleProperty=new oi(this.trail.isVisible()),this._nodeVisibilityListeners=[];for(let n=0;n<this.trail.length;n++){const s=()=>{this.trailVisibleProperty.set(e.isVisible())};this._nodeVisibilityListeners.push(s),e.nodes[n].visibleProperty.link(s)}this.boundTrailVisibilityChangedListener=this.onVisibilityChange.bind(this),this.trailVisibleProperty.link(this.boundTrailVisibilityChangedListener)}addListener(e){this._listeners.push(e)}removeListener(e){const t=ie.indexOf(this._listeners,e);this._listeners.splice(t,1)}dispose(){for(let e=0;e<this.trail.length;e++){const t=this._nodeVisibilityListeners[e];this.trail.nodes[e].visibleProperty.hasListener(t)&&this.trail.nodes[e].visibleProperty.removeListener(t)}this.trailVisibleProperty.unlink(this.boundTrailVisibilityChangedListener)}onVisibilityChange(){this.notifyListeners()}notifyListeners(){let e=this._listeners;this._isStatic||(e=e.slice());const t=e.length;for(let n=0;n<t;n++)e[n]()}}class eA{constructor(e){this.node=null,this.visibilityTracker=null,this.focusProperty=e,this.boundVisibilityListener=this.handleTrailVisibilityChange.bind(this),this.boundInstancesChangedListener=this.handleInstancesChange.bind(this),this.boundNodeDisposedListener=this.handleNodeDisposed.bind(this),this.boundFocusListener=this.handleFocusChange.bind(this),this.focusProperty.link(this.boundFocusListener)}handleFocusChange(e){this.removeDisplayedListeners(),e&&this.addDisplayedListeners(e)}handleTrailVisibilityChange(){this.visibilityTracker&&!this.visibilityTracker.trailVisibleProperty.value&&(this.focusProperty.value=null)}handleInstancesChange(e){e.node&&e.node.instances.length===0&&(this.focusProperty.value=null)}handleNodeDisposed(){this.focusProperty.value=null}addDisplayedListeners(e){this.visibilityTracker=new F6(e.trail),this.visibilityTracker.addListener(this.boundVisibilityListener),this.node=e.trail.lastNode(),this.node.changedInstanceEmitter.addListener(this.boundInstancesChangedListener),this.node.disposeEmitter.addListener(this.boundNodeDisposedListener)}removeDisplayedListeners(){this.visibilityTracker&&(this.visibilityTracker.removeListener(this.boundVisibilityListener),this.visibilityTracker.dispose(),this.visibilityTracker=null),this.node&&(this.node.changedInstanceEmitter.removeListener(this.boundInstancesChangedListener),this.node.disposeEmitter.removeListener(this.boundNodeDisposedListener),this.node=null)}dispose(){this.removeDisplayedListeners(),this.focusProperty.unlink(this.boundFocusListener),this.node=null,this.visibilityTracker=null}}const tA=new ea,Jm=i=>{const e=i.map(n=>n.typeName),t=e.join(",");if(!tA.has(t)){const n=s=>{for(let r=0;r<i.length;r++){const a=i[r];if(qn.isValueValid(s,a.validator))return!0}return!1};tA.set(t,new ui(`OrIO<${e.join(", ")}>`,{documentation:"A PhET-iO Type adding support for a composite type that can be any of its parameters.",parameterTypes:i,isValidValue:n,toStateObject:s=>{for(let r=0;r<i.length;r++){const a=i[r];if(qn.isValueValid(s,a.validator))return{index:r,state:a.toStateObject(s)}}throw new Error("somehow the instance was not valid, we should not get here. Why was isValidValue not used before this step?")},fromStateObject:s=>i[s.index].fromStateObject(s.state),stateSchema:za.asValue(`${e.join("|")}`,{isValidValue:s=>typeof s.index=="number"?i[s.index].isStateObjectValid(s.state):!1})}))}return tA.get(t)},H6="NAME",U6="OBJECT",G6="CONTEXT",W6="HINT",K6={nameObjectContextHint:"{{NAME}}, {{OBJECT}}, {{CONTEXT}} {{HINT}}",nameObjectContext:"{{NAME}}, {{OBJECT}}, {{CONTEXT}}",nameObjectHint:"{{NAME}}, {{OBJECT}}, {{HINT}}",nameContextHint:"{{NAME}}, {{CONTEXT}} {{HINT}}",nameObject:"{{NAME}}, {{OBJECT}}",nameContext:"{{NAME}}, {{CONTEXT}}",nameHint:"{{NAME}}, {{HINT}}",name:"{{NAME}}",objectContextHint:"{{OBJECT}}, {{CONTEXT}} {{HINT}}",objectContext:"{{OBJECT}}, {{CONTEXT}}",objectHint:"{{OBJECT}}, {{HINT}}",contextHint:"{{CONTEXT}} {{HINT}}",object:"{{OBJECT}}",context:"{{CONTEXT}}",hint:"{{HINT}}"};class Zm{constructor(e){const t=so()({},K6,e);this.nameObjectContextHint=t.nameObjectContextHint,this.nameObjectContext=t.nameObjectContext,this.nameObjectHint=t.nameObjectHint,this.nameContextHint=t.nameContextHint,this.nameObject=t.nameObject,this.nameContext=t.nameContext,this.nameHint=t.nameHint,this.name=t.name,this.objectContextHint=t.objectContextHint,this.objectContext=t.objectContext,this.objectHint=t.objectHint,this.contextHint=t.contextHint,this.object=t.object,this.context=t.context,this.hint=t.hint}getResponsePattern(e){return this[e]}static createPatternKey(e,t,n,s){let r="";return e&&(r=r.concat(H6.concat("_"))),t&&(r=r.concat(U6.concat("_"))),n&&(r=r.concat(G6.concat("_"))),s&&(r=r.concat(W6.concat("_"))),ie.camelCase(r)}}Zm.DEFAULT_RESPONSE_PATTERNS=new Zm;const SI={nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null,ignoreProperties:!1,responsePatternCollection:Zm.DEFAULT_RESPONSE_PATTERNS};class tl{constructor(e){const t=so()({},SI,e);this._nameResponse=t.nameResponse,this._objectResponse=t.objectResponse,this._contextResponse=t.contextResponse,this._hintResponse=t.hintResponse,this.ignoreProperties=t.ignoreProperties,this.responsePatternCollection=t.responsePatternCollection}getNameResponse(){return tl.getResponseText(this._nameResponse)}get nameResponse(){return this.getNameResponse()}set nameResponse(e){this.setNameResponse(e)}setNameResponse(e){this._nameResponse=e}getObjectResponse(){return tl.getResponseText(this._objectResponse)}get objectResponse(){return this.getObjectResponse()}set objectResponse(e){this.setObjectResponse(e)}setObjectResponse(e){this._objectResponse=e}getContextResponse(){return tl.getResponseText(this._contextResponse)}get contextResponse(){return this.getContextResponse()}set contextResponse(e){this.setContextResponse(e)}setContextResponse(e){this._contextResponse=e}getHintResponse(){return tl.getResponseText(this._hintResponse)}get hintResponse(){return this.getHintResponse()}set hintResponse(e){this.setHintResponse(e)}setHintResponse(e){this._hintResponse=e}static getResponseText(e){return ai(e)?e.value:typeof e=="function"?e():e}copy(){return new tl(this.serialize())}serialize(){return{nameResponse:this.nameResponse,objectResponse:this.objectResponse,contextResponse:this.contextResponse,hintResponse:this.hintResponse,ignoreProperties:this.ignoreProperties,responsePatternCollection:this.responsePatternCollection}}}tl.DEFAULT_OPTIONS=SI;class Y6 extends rn{constructor(e){super(),this.nameResponsesEnabledProperty=new Qt(!0),this.objectResponsesEnabledProperty=new Qt(!1),this.contextResponsesEnabledProperty=new Qt(!1),this.hintResponsesEnabledProperty=new Qt(!1)}reset(){this.nameResponsesEnabledProperty.reset(),this.objectResponsesEnabledProperty.reset(),this.contextResponsesEnabledProperty.reset(),this.hintResponsesEnabledProperty.reset()}collectResponses(e){const t=so()({},tl.DEFAULT_OPTIONS,e),n=!!(t.nameResponse&&(this.nameResponsesEnabledProperty.get()||t.ignoreProperties)),s=!!(t.objectResponse&&(this.objectResponsesEnabledProperty.get()||t.ignoreProperties)),r=!!(t.contextResponse&&(this.contextResponsesEnabledProperty.get()||t.ignoreProperties)),a=!!(t.hintResponse&&(this.hintResponsesEnabledProperty.get()||t.ignoreProperties)),o=Zm.createPatternKey(n,s,r,a);let l="";if(o){const h=t.responsePatternCollection.getResponsePattern(o);l=Gn.fillIn(h,{NAME:t.nameResponse,OBJECT:t.objectResponse,CONTEXT:t.contextResponse,HINT:t.hintResponse})}return l}}const pu=new Y6,PI=1;let j6=1;class Sn extends th{constructor(e){const t=Ne()({alert:null,predicate:function(){return!0},canAnnounceProperties:[],descriptionCanAnnounceProperties:[],voicingCanAnnounceProperties:[],alertStableDelay:200,alertMaximumDelay:Number.MAX_VALUE,announcerOptions:{},priority:PI},e);super(t),this.id=j6++,this._alert=t.alert,this.predicate=t.predicate,this.canAnnounceProperty=new iA({dependentProperties:t.canAnnounceProperties}),this.descriptionCanAnnounceProperty=new iA({dependentProperties:t.descriptionCanAnnounceProperties}),this.voicingCanAnnounceProperty=new iA({dependentProperties:t.voicingCanAnnounceProperties}),this.alertStableDelay=t.alertStableDelay,this.alertMaximumDelay=t.alertMaximumDelay,this.announcerOptions=t.announcerOptions,this.priorityProperty=new Ba(t.priority),this.previousAlertText=null}static getAlertStringFromResponsePacket(e,t){const n=e.serialize();return t||(n.ignoreProperties=!0),pu.collectResponses(n)}getAlertText(e=!1){const t=Sn.alertableToText(this._alert,e);return this.previousAlertText=t,t}getAlert(){return this._alert}get alert(){return this.getAlert()}set alert(e){this.setAlert(e)}setAlert(e){this._alert=e}setAlertStableDelay(e){this.alertStableDelay=e}toString(){return`Utterance_${this.id}#${this.getAlertText()}`}toStateObject(){return{alert:fi(Jm([xi,Ii])).toStateObject(this.getAlertText())}}reset(){this.previousAlertText=null}setCanAnnounceProperties(e){this.canAnnounceProperty.setDependentProperties(e)}set canAnnounceProperties(e){this.setCanAnnounceProperties(e)}get canAnnounceProperties(){return this.getCanAnnounceProperties()}getCanAnnounceProperties(){return this.canAnnounceProperty.getDependentProperties()}setDescriptionCanAnnounceProperties(e){this.descriptionCanAnnounceProperty.setDependentProperties(e)}set descriptionCanAnnounceProperties(e){this.setDescriptionCanAnnounceProperties(e)}get descriptionCanAnnounceProperties(){return this.getDescriptionCanAnnounceProperties()}getDescriptionCanAnnounceProperties(){return this.descriptionCanAnnounceProperty.getDependentProperties()}setVoicingCanAnnounceProperties(e){this.voicingCanAnnounceProperty.setDependentProperties(e)}set voicingCanAnnounceProperties(e){this.setVoicingCanAnnounceProperties(e)}get voicingCanAnnounceProperties(){return this.getVoicingCanAnnounceProperties()}getVoicingCanAnnounceProperties(){return this.voicingCanAnnounceProperty.getDependentProperties()}dispose(){this.canAnnounceProperty.dispose(),this.descriptionCanAnnounceProperty.dispose(),this.voicingCanAnnounceProperty.dispose(),this.priorityProperty.dispose(),super.dispose()}static alertableToText(e,t=!1){let n;if(typeof e=="function")n=e();else if(e instanceof tl)n=Sn.getAlertStringFromResponsePacket(e,t);else{if(e instanceof Sn)return e.getAlertText(t);ai(e)?n=e.value:n=e}return n}}Sn.TOP_PRIORITY=10;Sn.HIGH_PRIORITY=5;Sn.MEDIUM_PRIORITY=2;Sn.DEFAULT_PRIORITY=PI;Sn.LOW_PRIORITY=0;Sn.UtteranceIO=new ui("UtteranceIO",{valueType:Sn,documentation:"Announces text to a specific browser technology (like aria-live or web speech)",toStateObject:i=>i.toStateObject(),stateSchema:{alert:fi(Jm([xi,Ii]))}});class iA extends Ob{constructor(e){const t=Ne()({dependentProperties:[]},e),n=new Mt(new oi(!1));super(n),this._dependentProperties=[],this.implementationProperty=n,this.setDependentProperties(t.dependentProperties)}setDependentProperties(e){const t=this.implementationProperty.value,n=e.length===0?[new oi(!0)]:e;this.implementationProperty.value=Dt.and(n),t.dispose(),this._dependentProperties=e}set dependentProperties(e){this.setDependentProperties(e)}get dependentProperties(){return this.getDependentProperties()}getDependentProperties(){return this._dependentProperties.slice(0)}dispose(){this.implementationProperty.dispose(),this._dependentProperties=[],super.dispose()}}class T2 extends Sn{constructor(e,t){super(t),this.readingBlockFocus=e}}class Cn{constructor(e,t,n){if(this.dependencies=e,this.dependencyListeners=new Map,e.forEach(s=>{const r=()=>{if(!this.isDisposed){const a=e.map(o=>o.get());t(...a)}};this.dependencyListeners.set(s,r),s.lazyLink(r,{phetioDependencies:ie.without(e,s)})}),!n){const s=e.map(r=>r.get());t(...s)}this.isDisposed=!1}get definedDependencies(){return this.dependencies}dispose(){const e=this.definedDependencies;for(let t=0;t<e.length;t++){const n=e[t],s=this.dependencyListeners.get(n);n.hasListener(s)&&n.unlink(s)}this.dependencies=null,this.dependencyListeners.clear(),this.isDisposed=!0}static multilink(e,t){return new Cn(e,t,!1)}static multilinkAny(e,t){return new Cn(e,t)}static lazyMultilink(e,t){return new Cn(e,t,!0)}static lazyMultilinkAny(e,t){return new Cn(e,t,!0)}static unmultilink(e){e.dispose()}}class wp extends rn{constructor(e){const t=Ne()({respectResponseCollectorProperties:!0,phetioType:wp.AnnouncerIO,phetioState:!1},e);super(t),this.readyToAnnounce=!0,this.hasSpoken=!1,this.respectResponseCollectorProperties=t.respectResponseCollectorProperties,this.announcementCompleteEmitter=new kn({parameters:[{name:"utterance",phetioType:Sn.UtteranceIO},{name:"text",phetioType:fi(Jm([xi,Ii]))}],tandem:t.tandem?.createTandem("announcementCompleteEmitter"),phetioReadOnly:!0,phetioDocumentation:"The announcement that has just completed. The Utterance text could potentially differ from the exact text that was announced, so both are emitted. Use `text` for an exact match of what was announced."})}shouldUtteranceCancelOther(e,t){return t.priorityProperty.value<e.priorityProperty.value}onUtterancePriorityChange(e){}}wp.AnnouncerIO=new ui("AnnouncerIO",{valueType:wp,documentation:"Announces text to a specific browser technology (like aria-live or web speech)"});const X6={initialize(){if(self.speechSynthesis||self.SpeechSynthesis||self.SpeechSynthesisUtterance)throw new Error("SpeechSynthesis is supported here, the polyfill should not overwrite it");self.SpeechSynthesis=self.parent.SpeechSynthesis,self.speechSynthesis=new self.parent.SpeechSynthesis,self.SpeechSynthesisUtterance=self.parent.SpeechSynthesisUtterance}};self.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters.speechSynthesisFromParent&&X6.initialize();const Zx=5e3,Q6=5e3,J6=1e4,$x=125,Z6=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Good News","Jester","Organ","Superstar","Trinoids","Whisper","Wobble","Zarvox","Flo","Grandma","Grandpa","Junior"],eE={cmn:"zh_CN",yue:"zh_HK","yue-HK":"zh_HK",yue_HK:"zh_HK","fil-PH":"tl",fil_PH:"tl"},tE={cancelSelf:!0,cancelOther:!0,voice:null};class TI extends wp{constructor(e){const t=Ne()({respectResponseCollectorProperties:!1,debug:!1},e);super(t),this.debug=t.debug,this.voiceProperty=new Mt(null,{tandem:t.tandem?.createTandem("voiceProperty"),phetioValueType:fi(t8),phetioState:!1,phetioReadOnly:!0,phetioDocumentation:"the voice that is currently voicing responses"}),this.voiceRateProperty=new Ba(1,{range:new qi(.75,2),tandem:t.tandem?.createTandem("voiceRateProperty"),phetioState:!1,phetioDocumentation:"changes the rate of the voicing-feature voice"}),this.voicePitchProperty=new Ba(1,{range:new qi(.5,2),tandem:t.tandem?.createTandem("voicePitchProperty"),phetioState:!1,phetioDocumentation:"changes the pitch of the voicing-feature voice"}),this.voiceVolumeProperty=new Ba(1,{range:new qi(0,1)}),this.hasSpoken=!1,this.timeSinceWakingEngine=0,this.timeSincePauseResume=0,this.timeSincePendingUtterance=0,this.timeSinceUtteranceEnd=$x,this.startSpeakingEmitter=new kn({parameters:[{valueType:"string"},{valueType:Sn}]}),this.endSpeakingEmitter=new kn({parameters:[{valueType:"string"},{valueType:Sn}]}),this.enabledComponentImplementation=new Ef({enabled:!1,tandem:t.tandem,enabledPropertyOptions:{phetioDocumentation:"toggles this controller of SpeechSynthesis on and off",phetioState:!1,phetioFeatured:!1}}),this.enabledProperty=this.enabledComponentImplementation.enabledProperty,this.mainWindowVoicingEnabledProperty=new Qt(!0,{tandem:t.tandem?.createTandem("mainWindowVoicingEnabledProperty"),phetioState:!1,phetioDocumentation:"toggles the voicing feature on and off for the simulation screen (not the voicing preferences and toolbar controls)"}),this.voicingFullyEnabledProperty=Dt.and([this.enabledProperty,this.mainWindowVoicingEnabledProperty]),this._speechAllowedAndFullyEnabledProperty=new Qt(!1),this.speechAllowedAndFullyEnabledProperty=this._speechAllowedAndFullyEnabledProperty,this.synth=null,this.voicesProperty=new Mt([]),this.speakingSpeechSynthesisUtteranceWrapper=null,this.isInitializedProperty=new Qt(!1),this.canSpeakProperty=null,this.boundHandleCanSpeakChange=this.handleCanSpeakChange.bind(this),this.boundHandleCanAnnounceChange=this.handleCanAnnounceChange.bind(this),this.debug&&(this.announcementCompleteEmitter.addListener((n,s)=>{console.log("announcement complete",s)}),this.startSpeakingEmitter.addListener(n=>{this.debug&&console.log("startSpeakingListener",n)}),this.endSpeakingEmitter.addListener(n=>{this.debug&&console.log("endSpeakingListener",n)}))}get initialized(){return this.isInitializedProperty.value}initialize(e,t){const n=Ne()({speechAllowedProperty:new Qt(!0)},t);this.synth=self.speechSynthesis,this.canSpeakProperty=Dt.and([n.speechAllowedProperty,this.enabledProperty]),this.canSpeakProperty.link(this.boundHandleCanSpeakChange),Cn.multilink([n.speechAllowedProperty,this.voicingFullyEnabledProperty],(a,o)=>{this._speechAllowedAndFullyEnabledProperty.value=a&&o});const s=this.getSynth();s.addEventListener&&s.addEventListener("voiceschanged",()=>{this.populateVoices()}),this.populateVoices();const r=()=>{this.timeSinceWakingEngine=Zx,e.removeListener(r)};e.addListener(r),zn.addListener(this.step.bind(this)),this.isInitializedProperty.value=!0}step(e){e*=1e3;const t=this.getSynth();this.initialized&&t&&(this.hasSpoken||(this.hasSpoken=t.speaking),this.timeSinceUtteranceEnd=t.speaking?0:this.timeSinceUtteranceEnd+e,this.timeSincePendingUtterance=this.speakingSpeechSynthesisUtteranceWrapper&&!this.speakingSpeechSynthesisUtteranceWrapper.started?this.timeSincePendingUtterance+e:0,this.timeSincePendingUtterance>Q6&&(this.handleSpeechSynthesisEnd(this.speakingSpeechSynthesisUtteranceWrapper.announceText,this.speakingSpeechSynthesisUtteranceWrapper),this.speakingSpeechSynthesisUtteranceWrapper=null,this.cancelSynth()),this.timeSinceUtteranceEnd>$x&&!this.speakingSpeechSynthesisUtteranceWrapper&&(this.readyToAnnounce=!0),Zn.chromium&&!Zn.android&&this.voiceProperty.value&&!this.voiceProperty.value.localService&&(this.timeSincePauseResume=t.speaking?this.timeSincePauseResume+e:0,this.timeSincePauseResume>J6&&(this.timeSincePauseResume=0,t.pause(),t.resume())),Zn.chromeOS&&(this.timeSinceWakingEngine+=e,!t.speaking&&this.timeSinceWakingEngine>Zx&&(this.timeSinceWakingEngine=0,t.speak(new SpeechSynthesisUtterance(" ")))))}handleCanSpeakChange(e){e||this.cancel()}populateVoices(){const e=this.getSynth();e&&(this.voicesProperty.value=ie.uniqBy(e.getVoices(),t=>t.name))}getPrioritizedVoices(){const e=this.voicesProperty.value.slice(),t=ie.filter(e,s=>!ie.some(Z6,r=>s.name.includes(r))),n=s=>s.name.includes("Google")?-1:s.name.includes("Fred")?t.length:t.indexOf(s);return t.sort((s,r)=>n(s)-n(r))}getEnglishPrioritizedVoices(){return ie.filter(this.getPrioritizedVoices(),e=>e.lang==="en-US"||e.lang==="en_US")}getPrioritizedVoicesForLocale(e){const t=e,n=e.replace("_","-");return ie.filter(this.getPrioritizedVoices(),s=>{const r=eE.hasOwnProperty(s.lang)?eE[s.lang]:s.lang;let a=!1;return(r.includes("_")||r.includes("-"))&&(a=t===r.slice(0,2)),a||t===r||n===r})}announce(e,t){this.initialized&&this.canSpeakProperty&&this.canSpeakProperty.value?this.requestSpeech(e,t):this.handleAnnouncementFailure(t,e)}handleAnnouncementFailure(e,t){this.debug&&console.log("announcement failure",t),this.announcementCompleteEmitter.emit(e,t)}speakIgnoringEnabled(e){this.initialized&&(this.cancel(),this.requestSpeech(e.getAlertText(this.respectResponseCollectorProperties),e))}requestSpeech(e,t){if(this.debug&&console.log("requestSpeech",e),!e){this.handleAnnouncementFailure(t,e);return}const n=so()({},tE,t.announcerOptions),s=e8(Mb(e+""));i0(s,qn.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR);const r=new SpeechSynthesisUtterance(s);r.voice=n.voice||this.voiceProperty.value,r.pitch=this.voicePitchProperty.value,r.rate=this.voiceRateProperty.value,r.volume=this.voiceVolumeProperty.value;const a=()=>{this.startSpeakingEmitter.emit(s,t),this.speakingSpeechSynthesisUtteranceWrapper.started=!0,r.removeEventListener("start",a)},o=()=>{this.handleSpeechSynthesisEnd(s,l)},l=new $6(t,e,r,!1,o,a);this.speakingSpeechSynthesisUtteranceWrapper=l,r.addEventListener("start",a),r.addEventListener("end",o),r.addEventListener("error",o),this.readyToAnnounce=!1,this.timeSinceUtteranceEnd=0,t.canAnnounceProperty.link(this.boundHandleCanAnnounceChange),t.voicingCanAnnounceProperty.link(this.boundHandleCanAnnounceChange),this.getSynth().speak(r)}handleCanAnnounceChange(){this.speakingSpeechSynthesisUtteranceWrapper&&this.cancelUtteranceIfCanAnnounceFalse(this.speakingSpeechSynthesisUtteranceWrapper.utterance)}cancelUtteranceIfCanAnnounceFalse(e){(!e.canAnnounceProperty.value||!e.voicingCanAnnounceProperty.value)&&this.cancelUtterance(e)}handleSpeechSynthesisEnd(e,t){this.endSpeakingEmitter.emit(e,t.utterance),this.announcementCompleteEmitter.emit(t.utterance,t.speechSynthesisUtterance.text),t.speechSynthesisUtterance.removeEventListener("error",t.endListener),t.speechSynthesisUtterance.removeEventListener("end",t.endListener),t.speechSynthesisUtterance.removeEventListener("start",t.startListener);const n=t.utterance.canAnnounceProperty;n.hasListener(this.boundHandleCanAnnounceChange)&&n.unlink(this.boundHandleCanAnnounceChange);const s=t.utterance.voicingCanAnnounceProperty;s.hasListener(this.boundHandleCanAnnounceChange)&&s.unlink(this.boundHandleCanAnnounceChange),this.speakingSpeechSynthesisUtteranceWrapper=null}getSynth(){return this.synth}cancel(){this.initialized&&this.speakingSpeechSynthesisUtteranceWrapper&&this.cancelUtterance(this.speakingSpeechSynthesisUtteranceWrapper.utterance)}cancelUtterance(e){const t=this.speakingSpeechSynthesisUtteranceWrapper;t&&e===t.utterance&&(this.handleSpeechSynthesisEnd(t.announceText,t),this.cancelSynth())}shouldUtteranceCancelOther(e,t){const n=so()({},tE,e.announcerOptions);let s;return t.priorityProperty.value!==e.priorityProperty.value?s=t.priorityProperty.value<e.priorityProperty.value:(s=n.cancelOther,t&&t===e&&(s=n.cancelSelf)),s}onUtterancePriorityChange(e){const t=this.speakingSpeechSynthesisUtteranceWrapper;t&&this.shouldUtteranceCancelOther(e,t.utterance)&&this.cancelUtterance(t.utterance)}cancelSynth(){const e=this.getSynth();e&&e.cancel()}static isSpeechSynthesisSupported(){return!!self.speechSynthesis&&!!self.SpeechSynthesisUtterance}}class $6{constructor(e,t,n,s,r,a){this.utterance=e,this.announceText=t,this.speechSynthesisUtterance=n,this.started=s,this.endListener=r,this.startListener=a}}function e8(i){return i.split("<br/>").join(" ").split("<br>").join(" ")}const t8=new ui("SpeechSynthesisVoiceIO",{isValidValue:i=>!0,toStateObject:i=>i.name});class i8 extends TI{constructor(e){const t=Ne()({respectResponseCollectorProperties:!0,phetioDocumentation:"Announcer that manages the voicing feature, providing audio responses via WebAudio."},e);super(t)}initialize(e,t){super.initialize(e,t),or.keyupEmitter.addListener(n=>{Qe.isControlKey(n)&&this.cancel()})}voicingSupportedForLocale(e){return e.startsWith("en")}}const $i=new i8,Sp=(i,e)=>{i.reindex();const t=i.indices.lastIndexOf(-1);if(t<0)return i;const n=t+1,r=i.nodes[n].getTrailsTo(e);if(r.length===0)return i;const a=r[0];for(let o=n+1;o<i.length;o++)a.addDescendant(i.nodes[o]);return a};class ko extends js{}ko.INDICES=new ko;ko.TRAIL_ID=new ko;ko.enumeration=new Sr(ko);const Dm=ko.TRAIL_ID,n8=(i,e)=>{const n=e.split(Fb).map(a=>Number(a));let s=i;n.shift();const r=[s];for(;n.length>0;){const a=n.shift(),l=(s.pdomOrder||[]).concat(s.children);for(let h=0;h<l.length;h++)if(l[h]!==null&&l[h].id===a){const c=l[h];r.push(c),s=c;break}}return new Yi(r)},Hy=(i,e)=>Dm===ko.INDICES?i.getTrailFromPDOMIndicesString(e):n8(i.rootNode,e),lr=new Mt(null,{tandem:R.GENERAL_MODEL.createTandem("pdomFocusProperty"),phetioDocumentation:"Stores the current focus in the Parallel DOM, null if nothing has focus. This is not updated based on mouse or touch input, only keyboard and other alternative inputs. Note that this only applies to simulations that support alternative input.",phetioValueType:fi(el.FocusIO),phetioState:!1,phetioFeatured:!0,phetioReadOnly:!0}),Gc=()=>{let i=null;const e=lr.value;return e&&(i=e.trail.lastNode()),i};function ku(i){return typeof i=="object"&&i._isInteractiveHighlighting}class Bn{constructor(){this.pointerFocusProperty=new Mt(null),this.readingBlockFocusProperty=new Mt(null),this.lockedPointerFocusProperty=new Mt(null),this.pdomFocusHighlightsVisibleProperty=new Qt(!0),this.interactiveHighlightsVisibleProperty=new Qt(!1),this.readingBlockHighlightsVisibleProperty=new Qt(!1),this.voicingFullyEnabledListener=e=>{this.readingBlockHighlightsVisibleProperty.value=e},$i.voicingFullyEnabledProperty.link(this.voicingFullyEnabledListener),this.pointerHighlightsVisibleProperty=new Dt([this.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty],(e,t)=>e||t),this.readingBlockFocusController=new eA(this.readingBlockFocusProperty),this.startSpeakingListener=(e,t)=>{this.readingBlockFocusProperty.value=t instanceof T2?t.readingBlockFocus:null},$i.startSpeakingEmitter.addListener(this.startSpeakingListener),this.endSpeakingListener=(e,t)=>{t instanceof T2&&this.readingBlockFocusProperty.value&&t.readingBlockFocus.trail.equals(this.readingBlockFocusProperty.value.trail)&&(this.readingBlockFocusProperty.value=null)},$i.endSpeakingEmitter.addListener(this.endSpeakingListener),this.pointerFocusDisplayedController=new eA(this.pointerFocusProperty),this.lockedPointerFocusDisplayedController=new eA(this.lockedPointerFocusProperty),[this.pointerFocusProperty,this.lockedPointerFocusProperty].forEach(e=>{e.link(this.onPointerFocusChange.bind(this))})}dispose(){this.pointerFocusProperty.dispose(),this.readingBlockFocusProperty.dispose(),this.lockedPointerFocusProperty.dispose(),this.pdomFocusHighlightsVisibleProperty.dispose(),this.interactiveHighlightsVisibleProperty.dispose(),this.readingBlockHighlightsVisibleProperty.dispose(),this.readingBlockFocusController.dispose(),this.pointerFocusDisplayedController.dispose(),this.pointerHighlightsVisibleProperty.dispose(),this.lockedPointerFocusDisplayedController.dispose(),$i.startSpeakingEmitter.removeListener(this.startSpeakingListener),$i.endSpeakingEmitter.removeListener(this.endSpeakingListener),$i.voicingFullyEnabledProperty.unlink(this.voicingFullyEnabledListener)}static updatePDOMFocusFromEvent(e,t,n){if(n)for(let s=0;s<e.length;s++){const r=e[s],a=document.activeElement;if(r.isElementUnderPDOM(a,!1)){const o=a.getAttribute(Ti.DATA_PDOM_UNIQUE_ID),l=Hy(r,o),h=Sp(l,r.rootNode);h.lastNode().focusable?Bn.pdomFocus=new el(r,h):(t.target.blur(),t.stopImmediatePropagation());break}}else for(let s=0;s<e.length;s++){const r=e[s],a=r._input.getRelatedTargetTrail(t);a&&a.lastNode().focusable?Bn.pdomFocus=new el(r,Sp(a,r.rootNode)):Bn.pdomFocus=null}}onPointerFocusChange(e,t){const n=e?.trail.lastNode();n&&ku(n)&&n.handleHighlightActiveChange();const s=t?.trail.lastNode();s&&ku(s)&&s.handleHighlightActiveChange()}static set pdomFocus(e){if(lr.value!==e){let t;lr.value&&(t=Gc()),lr.value=e,t&&!e&&t.blur()}}static get pdomFocus(){return lr.value}static attachToWindow(){Bn.attachedWindowFocusListener=()=>{Bn._windowHasFocusProperty.value=!0},Bn.attachedWindowBlurListener=()=>{Bn._windowHasFocusProperty.value=!1},self.addEventListener("focus",Bn.attachedWindowFocusListener),self.addEventListener("blur",Bn.attachedWindowBlurListener),Bn._windowHasFocusProperty.value=document.hasFocus(),Bn.globallyAttached=!0}static detachFromWindow(){self.removeEventListener("focus",Bn.attachedWindowFocusListener),self.removeEventListener("blur",Bn.attachedWindowBlurListener),Bn._windowHasFocusProperty.value=!1,Bn.globallyAttached=!1}}Bn.attachedWindowFocusListener=null;Bn.attachedWindowBlurListener=null;Bn.globallyAttached=!1;Bn._windowHasFocusProperty=new Qt(!1);Bn.windowHasFocusProperty=Bn._windowHasFocusProperty;const es={mixInto(i,e){const t=Ne()({defaultArguments:[],initialize:i.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},e);jt(t.maxSize>=0),jt(t.initialSize>=0);const n=[];let s=t.maxSize;const r=Function.prototype.bind.bind(i,i),a=r(...t.defaultArguments),o=t.initialize,l=t.useDefaultConstruction,h=i.prototype;for(g2(i,{pool:n,dirtyFromPool(){return n.length?n.pop():new a},createFromPool(...c){let f;return n.length?(f=n.pop(),o.apply(f,c)):l?(f=new a,o.apply(f,c)):f=new(r(...c)),f},get poolSize(){return n.length},set maxPoolSize(c){jt(c===Number.POSITIVE_INFINITY||Number.isInteger(c)&&c>=0,"maxPoolSize should be a non-negative integer or infinity"),s=c},get maxPoolSize(){return s}}),g2(h,{freeToPool(){n.length<s&&n.push(this)}});n.length<t.initialSize;)n.push(new a);return i}},s8="PARAGRAPH_SIBLING",x2="CONTAINER_PARENT",r8="DESCRIPTION_SIBLING",a8="HEADING_SIBLING",o8="LABEL_SIBLING",ap="PRIMARY_SIBLING",Im=ap,xI=a8,l8=o8,h8=r8,u8=s8,c8=x2,d8=Ti.TAGS.LABEL,p8=Ti.TAGS.INPUT,iE="disabled",f8={attributes:!1,childList:!0,characterData:!0};let m8=1;const uc=new pt(0,0,0,0),Ph=new pt(0,0,0,0),nE=new It,sE=new It,g8=new It;class vn{constructor(e,t){this.initializePDOMPeer(e,t)}initializePDOMPeer(e,t){return t=an({primarySibling:null},t),this.id=this.id||m8++,this.pdomInstance=e,this.node=this.pdomInstance.node,this.display=e.display,this.trail=e.trail,this.visible=null,this.focusable=null,this._headingSibling=null,this._labelSibling=null,this._descriptionSibling=null,this._accessibleParagraphSibling=null,this._containerParent=null,this.topLevelElements=[],this.positionDirty=!1,this.forceReflowWorkaround=!1,this.childPositionDirty=!1,this.positionInPDOM=!1,this.mutationObserver=this.mutationObserver||new MutationObserver(this.invalidateCSSPositioning.bind(this,!1)),this.transformListener=this.transformListener||this.invalidateCSSPositioning.bind(this,!1),this.pdomInstance.transformTracker.addListener(this.transformListener),this._preservedDisabledValue=null,this.isDisposed=!1,this.pdomInstance.isRootInstance&&(this._primarySibling=t.primarySibling,this._primarySibling.classList.add(gS.ROOT_CLASS_NAME),Ti.BLOCKED_DOM_EVENTS.forEach(n=>{this._primarySibling.addEventListener(n,s=>{s.stopPropagation()})})),this}update(e){let t=this.node.getBaseOptions();const n=[];this.mutationObserver.disconnect(),(this.node.accessibleName!==null||this.node._accessibleNameDirty)&&(this.node.accessibleName===null?this.node.accessibleNameBehavior(this.node,{},this.node.accessibleName,n):t=this.node.accessibleNameBehavior(this.node,t,this.node.accessibleName,n),this.node._accessibleNameDirty=!1),(this.node.accessibleHelpText!==null||this.node._accessibleHelpTextDirty)&&(this.node.accessibleHelpText===null?this.node.accessibleHelpTextBehavior(this.node,{},this.node.accessibleHelpText,n):t=this.node.accessibleHelpTextBehavior(this.node,t,this.node.accessibleHelpText,n),this.node._accessibleHelpTextDirty=!1),(this.node.accessibleParagraph!==null||this.node._accessibleParagraphDirty)&&(this.node.accessibleParagraph===null?this.node.accessibleParagraphBehavior(this.node,{},this.node.accessibleParagraph,n):t=this.node.accessibleParagraphBehavior(this.node,t,this.node.accessibleParagraph,n),this.node._accessibleParagraphDirty=!1),t.accessibleParagraph&&(this._accessibleParagraphSibling=Fd(Ti.TAGS.P,!1),this.setAccessibleParagraphContent(t.accessibleParagraph)),t.tagName&&(this._primarySibling=Fd(t.tagName,this.node.focusable,{namespace:t.pdomNamespace}),t.containerTagName&&(this._containerParent=Fd(t.containerTagName,!1)),t.accessibleHeading&&(this._headingSibling=Fd(`h${this.pdomInstance.pendingHeadingLevel}`,!1)),t.labelTagName&&(this._labelSibling=Fd(t.labelTagName,!1,{excludeFromInput:this.node._excludeLabelSiblingFromInput})),t.descriptionTagName&&(this._descriptionSibling=Fd(t.descriptionTagName,!1))),e&&this.updateIndicesStringAndElementIds(),this.orderElements(t),this._primarySibling&&(this.mutationObserver.observe(this._primarySibling,f8),t.accessibleHeading!==null&&this.setHeadingContent(t.accessibleHeading),t.labelContent&&t.labelTagName!==null&&this.setLabelSiblingContent(t.labelContent),t.innerContent&&t.tagName!==null&&this.setPrimarySiblingContent(t.innerContent),t.descriptionContent&&t.descriptionTagName!==null&&this.setDescriptionSiblingContent(t.descriptionContent),t.tagName.toUpperCase()===p8&&t.inputType&&this.setAttributeToElement("type",t.inputType),t.labelTagName&&t.labelTagName.toUpperCase()===d8&&this.setAttributeToElement("for",this._primarySibling.id,{elementName:vn.LABEL_SIBLING}),this.setFocusable(this.node.focusable),this.setPositionInPDOM(this.node.positionInPDOM),this.onAriaLabelledbyAssociationChange(),this.onAriaDescribedbyAssociationChange(),this.onActiveDescendantAssociationChange(),this.onAttributeChange(t),this.onClassChange(),this.onInputValueChange(),this.node.updateOtherNodesAriaLabelledby(),this.node.updateOtherNodesAriaDescribedby(),this.node.updateOtherNodesActiveDescendant()),n.forEach(s=>{s()})}orderElements(e){this._containerParent?(this._containerParent.insertBefore(this._primarySibling,this._containerParent.children[0]||null),this.topLevelElements=[this._containerParent]):this.topLevelElements=[this._headingSibling,this._labelSibling,this._descriptionSibling,this._primarySibling,this._accessibleParagraphSibling].filter(ie.identity),this._headingSibling&&this.arrangeContentElement(this._headingSibling,!1),this._labelSibling&&this.arrangeContentElement(this._labelSibling,e.appendLabel),this._descriptionSibling&&this.arrangeContentElement(this._descriptionSibling,e.appendDescription),this._accessibleParagraphSibling&&this.arrangeContentElement(this._accessibleParagraphSibling,!0)}getPlaceableSibling(){return this._primarySibling||this._accessibleParagraphSibling}getPrimarySibling(){return this._primarySibling}get primarySibling(){return this.getPrimarySibling()}getHeadingSibling(){return this._headingSibling}get headingSibling(){return this.getHeadingSibling()}getLabelSibling(){return this._labelSibling}get labelSibling(){return this.getLabelSibling()}getDescriptionSibling(){return this._descriptionSibling}get descriptionSibling(){return this.getDescriptionSibling()}getContainerParent(){return this._containerParent}get containerParent(){return this.getContainerParent()}getTopLevelElementContainingPrimarySibling(){return this._containerParent||this._primarySibling}onAriaLabelledbyAssociationChange(){this.removeAttributeFromAllElements("aria-labelledby");for(let e=0;e<this.node.ariaLabelledbyAssociations.length;e++){const t=this.node.ariaLabelledbyAssociations[e];this.setAssociationAttribute("aria-labelledby",t)}}onAriaDescribedbyAssociationChange(){this.removeAttributeFromAllElements("aria-describedby");for(let e=0;e<this.node.ariaDescribedbyAssociations.length;e++){const t=this.node.ariaDescribedbyAssociations[e];this.setAssociationAttribute("aria-describedby",t)}}onActiveDescendantAssociationChange(){this.removeAttributeFromAllElements("aria-activedescendant");for(let e=0;e<this.node.activeDescendantAssociations.length;e++){const t=this.node.activeDescendantAssociations[e];this.setAssociationAttribute("aria-activedescendant",t)}}handleAttributeWithPDOMOption(e,t){typeof t=="string"?this.setAttributeToElement(e,t):this.removeAttributeFromElement(e)}onAttributeChange(e){for(let t=0;t<this.node.pdomAttributes.length;t++){const n=this.node.pdomAttributes[t];this.setAttributeToElement(n.attribute,n.value,n.options)}this.handleAttributeWithPDOMOption("aria-label",e.ariaLabel),this.handleAttributeWithPDOMOption("role",e.ariaRole)}onClassChange(){for(let e=0;e<this.node.pdomClasses.length;e++){const t=this.node.pdomClasses[e];this.setClassToElement(t.className,t.options)}}onInputValueChange(){if(this.node.inputValue===null)this.removeAttributeFromElement("value");else{const e=`${this.node.inputValue}`;this.setAttributeToElement("value",e,{type:"property"})}}getElementByName(e){if(e===vn.PRIMARY_SIBLING)return this._primarySibling;if(e===vn.LABEL_SIBLING)return this._labelSibling;if(e===vn.DESCRIPTION_SIBLING)return this._descriptionSibling;if(e===vn.CONTAINER_PARENT)return this._containerParent;if(e===u8)return this._accessibleParagraphSibling;if(e===xI)return this._headingSibling;throw new Error(`invalid elementName name: ${e}`)}setAttributeToElement(e,t,n){n=an({namespace:null,type:"attribute",elementName:Im,element:null},n);const s=n.element||this.getElementByName(n.elementName);if(!s)return;const r=Ti.unwrapProperty(t);let a=r;typeof r=="string"&&(a=Mb(r)),e===iE&&!this.display.interactive&&(this._preservedDisabledValue=n.type==="property"?a:!0),n.namespace?s.setAttributeNS(n.namespace,e,a):n.type==="property"?s[e]=a:s.setAttribute(e,a)}removeAttributeFromElement(e,t){t=an({namespace:null,elementName:Im,element:null},t);const n=t.element||this.getElementByName(t.elementName);t.namespace?n.removeAttributeNS(t.namespace,e):e===iE&&!this.display.interactive?this._preservedDisabledValue=!1:n.removeAttribute(e)}removeAttributeFromAllElements(e){this._primarySibling&&this._primarySibling.removeAttribute(e),this._labelSibling&&this._labelSibling.removeAttribute(e),this._descriptionSibling&&this._descriptionSibling.removeAttribute(e),this._accessibleParagraphSibling&&this._accessibleParagraphSibling.removeAttribute(e),this._containerParent&&this._containerParent.removeAttribute(e)}setClassToElement(e,t){t=an({elementName:Im},t),this.getElementByName(t.elementName).classList.add(e)}removeClassFromElement(e,t){t=an({elementName:Im},t),this.getElementByName(t.elementName).classList.remove(e)}setAssociationAttribute(e,t){const n=t.otherNode.getPDOMInstances();if(n.length>0){const s=n[0];s===this.pdomInstance&&(s.peer=this);const r=s.peer.getElementByName(t.otherElementName),a=this.getElementByName(t.thisElementName);if(a&&r){const l=[(a.getAttribute(e)||"").trim(),r.id].join(" ").trim();this.setAttributeToElement(e,l,{elementName:t.thisElementName})}}}arrangeContentElement(e,t){if(this.topLevelElements[0]===this._containerParent)t?this._containerParent.appendChild(e):this._containerParent.insertBefore(e,this._primarySibling);else{gs(this.topLevelElements,e);const n=this.topLevelElements.indexOf(this._primarySibling),s=t?this.topLevelElements.length:n;this.topLevelElements.splice(s,0,e)}}isVisible(){return this.visible===null?!0:this.visible}setVisible(e){if(this.visible!==e){this.visible=e;for(let t=0;t<this.topLevelElements.length;t++){const n=this.topLevelElements[t];e?this.removeAttributeFromElement("hidden",{element:n}):this.setAttributeToElement("hidden","",{element:n})}this.invalidateCSSPositioning(Zn.safari)}}isFocused(){const e=Sp(this.trail,this.display.rootNode);return lr.value&&lr.value.trail.equals(e)}focus(){Bn.windowHasFocusProperty.value&&this._primarySibling.focus()}blur(){this._primarySibling.blur()}setFocusable(e){const t=this.isFocused();this.focusable!==e&&this.primarySibling&&(this.focusable=e,Ti.overrideFocusWithTabIndex(this.primarySibling,e),t&&!e&&this.blur(),this.invalidateCSSPositioning())}setHeadingContent(e){this._headingSibling&&Ti.setTextContent(this._headingSibling,e)}setLabelSiblingContent(e){this._labelSibling&&Ti.setTextContent(this._labelSibling,e)}setDescriptionSiblingContent(e){this._descriptionSibling&&Ti.setTextContent(this._descriptionSibling,e)}setAccessibleParagraphContent(e){this._accessibleParagraphSibling&&Ti.setTextContent(this._accessibleParagraphSibling,e)}setPrimarySiblingContent(e){this._primarySibling&&Ti.setTextContent(this._primarySibling,e)}setPDOMTransformSourceNode(e){this.pdomInstance.transformTracker.removeListener(this.transformListener),this.pdomInstance.updateTransformTracker(e),this.pdomInstance.transformTracker.addListener(this.transformListener),this.invalidateCSSPositioning()}setPositionInPDOM(e){this.positionInPDOM=e,this.invalidateCSSPositioning()}getElementId(e,t){return`display${this.display.id}-${e}-${t}`}updateIndicesStringAndElementIds(){const e=this.pdomInstance.getPDOMInstanceUniqueId();this._primarySibling&&(this._primarySibling.setAttribute(Ti.DATA_PDOM_UNIQUE_ID,e),this._primarySibling.id=this.getElementId("primary",e)),this._labelSibling&&(this._labelSibling.setAttribute(Ti.DATA_PDOM_UNIQUE_ID,e),this._labelSibling.id=this.getElementId("label",e)),this._descriptionSibling&&(this._descriptionSibling.setAttribute(Ti.DATA_PDOM_UNIQUE_ID,e),this._descriptionSibling.id=this.getElementId("description",e)),this._headingSibling&&(this._headingSibling.setAttribute(Ti.DATA_PDOM_UNIQUE_ID,e),this._headingSibling.id=this.getElementId("heading",e)),this._accessibleParagraphSibling&&(this._accessibleParagraphSibling.setAttribute(Ti.DATA_PDOM_UNIQUE_ID,e),this._accessibleParagraphSibling.id=this.getElementId("paragraph",e)),this._containerParent&&(this._containerParent.setAttribute(Ti.DATA_PDOM_UNIQUE_ID,e),this._containerParent.id=this.getElementId("container",e))}invalidateCSSPositioning(e=!1){if(!this.positionDirty){if(this.positionDirty=!0,e){this.forceReflowWorkaround=!0;for(let n=0;n<this.topLevelElements.length;n++)this.topLevelElements[n].style.transform="scale(1)"}let t=this.pdomInstance.parent;for(;t;)t.peer.childPositionDirty=!0,t=t.parent}}positionElements(e){const t=this.getPlaceableSibling();if(e){const n=this.node.pdomTransformSourceNode||this.node;if(uc.set(n.localBounds),uc.isFinite()){uc.transform(this.pdomInstance.transformTracker.getMatrix());const s=this.display.bounds;if(s.intersectsBounds(uc)){uc.constrainBounds(s);let r=aE(t),a=r.width,o=r.height;a>0&&o>0&&(Ph.setMinMax(0,0,a,o),Ph.transform(rE(a,o,uc)),dy(t,Ph)),this.labelSibling&&(r=aE(this._labelSibling),a=r.width,o=r.height,o>0&&a>0&&(Ph.setMinMax(0,0,a,o),Ph.transform(rE(a,o,uc)),dy(this._labelSibling,Ph)))}}}else Ph.set(vn.OFFSCREEN_SIBLING_BOUNDS),dy(t,Ph),this._labelSibling&&dy(this._labelSibling,Ph);this.forceReflowWorkaround&&this.topLevelElements.forEach(n=>{n.style.transform="",n.style.offsetHeight}),this.positionDirty=!1,this.forceReflowWorkaround=!1}updateSubtreePositioning(e=!1){this.childPositionDirty=!1;const t=this.positionInPDOM||e;this.positionDirty&&this.positionElements(t);for(let n=0;n<this.pdomInstance.children.length;n++){const s=this.pdomInstance.children[n].peer;(s.positionDirty||s.childPositionDirty)&&this.pdomInstance.children[n].peer.updateSubtreePositioning(t)}}recursiveDisable(e){this._primarySibling&&(e?(this._preservedDisabledValue=this._primarySibling.disabled,this._primarySibling.disabled=!0):this._primarySibling.disabled=this._preservedDisabledValue);for(let t=0;t<this.pdomInstance.children.length;t++)this.pdomInstance.children[t].peer.recursiveDisable(e)}dispose(){this.isDisposed=!0,this._primarySibling&&(this.blur(),this._primarySibling.removeEventListener("blur",this.blurEventListener),this._primarySibling.removeEventListener("focus",this.focusEventListener)),this.pdomInstance.transformTracker.removeListener(this.transformListener),this.mutationObserver.disconnect(),this.pdomInstance=null,this.node=null,this.display=null,this.trail=null,this._primarySibling=null,this._labelSibling=null,this._descriptionSibling=null,this._headingSibling=null,this._accessibleParagraphSibling=null,this._containerParent=null,this.focusable=null,this.freeToPool()}}vn.PRIMARY_SIBLING=Im;vn.HEADING_SIBLING=xI;vn.LABEL_SIBLING=l8;vn.DESCRIPTION_SIBLING=h8;vn.CONTAINER_PARENT=c8;vn.OFFSCREEN_SIBLING_BOUNDS=new pt(0,0,1,1);es.mixInto(vn,{initialize:vn.prototype.initializePDOMPeer});function Fd(i,e,t){t=an({siblingName:null,excludeFromInput:!1},t);const n=Ti.createElement(i,e,t);return t.excludeFromInput&&n.setAttribute(Ti.DATA_EXCLUDE_FROM_INPUT,!0),n}function rE(i,e,t){return nE.setToTranslation(t.minX,t.minY),sE.setToScale(t.width/i,t.height/e),nE.multiplyMatrix(sE).multiplyMatrix(g8)}function aE(i){let e=i.clientWidth,t=i.clientHeight;if(e===0&&t===0){const n=i.getBoundingClientRect();e=n.width,t=n.height}return{width:e,height:t}}function dy(i,e){i.style.top=`${e.top}px`,i.style.left=`${e.left}px`,i.style.width=`${e.width}px`,i.style.height=`${e.height}px`}let y8=1;class Dc{constructor(e,t,n,s){this.relativeNodes=[],this.relativeVisibilities=[],this.relativeListeners=[],this.transformTracker=null,this.initializePDOMInstance(e,t,n,s)}initializePDOMInstance(e,t,n,s){if(this.id=this.id||y8++,this.parent=e,this.display=t,this.trail=n,this.isRootInstance=e===null,this.node=this.isRootInstance?null:n.lastNode(),this.children=zi(this.children),this.node&&this.node.addPDOMInstance(this),this.invisibleCount=0,this.relativeNodes=[],this.relativeVisibilities=[],this.relativeListeners=[],this.transformTracker=null,this.updateTransformTracker(this.node?this.node.pdomTransformSourceNode:null),this.isDisposed=!1,this.parentHeadingLevel=this.parent?this.parent.headingLevel??this.parent.parentHeadingLevel:s,this.pendingHeadingLevel=this.parentHeadingLevel+(this.node?this.node.accessibleHeadingIncrement:1),this.isRootInstance){const r=document.createElement("div");this.peer=vn.createFromPool(this,{primarySibling:r}),this.headingLevel=null}else{this.peer=vn.createFromPool(this),this.peer.update(Dm===ko.TRAIL_ID),this.headingLevel=this.peer.headingSibling?this.pendingHeadingLevel:null;const r=this.parent.trail;for(let a=r.length;a<n.length;a++){const o=n.nodes[a];this.relativeNodes.push(o);const l=o._pdomDisplaysInfo.pdomDisplays,h=ie.includes(l,t);this.relativeVisibilities.push(h),h||this.invisibleCount++;const c=this.checkAccessibleDisplayVisibility.bind(this,a-r.length);o.pdomDisplaysEmitter.addListener(c),this.relativeListeners.push(c)}this.updateVisibility()}return this}addConsecutiveInstances(e){const t=this.children.length>0;Array.prototype.push.apply(this.children,e);for(let n=0;n<e.length;n++){const s=this.peer.getPlaceableSibling();Ti.insertElements(s,e[n].peer.topLevelElements)}t&&this.sortChildren(),Dm===ko.INDICES&&this.updateDescendantPeerIds(e)}removeInstancesForTrail(e){for(let t=0;t<this.children.length;t++){const n=this.children[t],s=n.trail;let r=s.length<e.length;if(!r){for(let a=this.trail.length;a<e.length;a++)if(e.nodes[a]!==s.nodes[a]){r=!0;break}}r||(this.children.splice(t,1),n.dispose(),t-=1)}}removeAllChildren(){for(;this.children.length;)this.children.pop().dispose()}findChildWithTrail(e){for(let t=0;t<this.children.length;t++){const n=this.children[t];if(n.trail.equals(e))return n}return null}removeSubtree(e){for(let t=this.children.length-1;t>=0;t--){const n=this.children[t];n.trail.isExtensionOf(e,!0)&&(this.children.splice(t,1),n.dispose())}}checkAccessibleDisplayVisibility(e){const t=ie.includes(this.relativeNodes[e]._pdomDisplaysInfo.pdomDisplays,this.display),n=this.relativeVisibilities[e];if(t!==n){this.relativeVisibilities[e]=t;const s=this.invisibleCount===0;this.invisibleCount+=t?-1:1,this.invisibleCount===0!==s&&this.updateVisibility()}}updateVisibility(){this.peer.setVisible(this.invisibleCount<=0),!this.peer.isVisible()&&Gc()?.pdomInstances[0]?.trail.containsNode(this.node)&&(Bn.pdomFocus=null)}isGloballyVisible(){return this.peer.isVisible()?this.parent?this.parent.isGloballyVisible():!0:!1}getChildOrdering(e){const t=e.lastNode(),n=t.getEffectiveChildren();let s;const r=[];if(t.hasPDOMContent&&t!==this.node){const a=t.pdomInstances;e:for(s=0;s<a.length;s++){const o=a[s];if(o.parent===this){for(let l=0;l<e.length;l++)if(e.nodes[l]!==o.trail.nodes[l+o.trail.length-e.length])continue e;r.push(o)}}}else for(s=0;s<n.length;s++)e.addDescendant(n[s],s),Array.prototype.push.apply(r,this.getChildOrdering(e)),e.removeDescendant();return r}sortChildren(){let e;this.isRootInstance?e=this.display.rootNode:e=this.node;const t=this.getChildOrdering(new Yi(e));this.children=t;const n=this.peer.getPlaceableSibling(),s=Gc()?.pdomInstances[0]?.trail||null;let r=n.childNodes.length-1;const a=s&&ie.find(this.children,o=>s.containsNode(o.peer.node));if(a){const o=ie.flatten(this.children.map(h=>h.peer.topLevelElements));if(!ie.every(o,(h,c)=>n.children[c]===h)){const h=a.peer.getTopLevelElementContainingPrimarySibling(),c=o.indexOf(h);for(let f=0;f<c;f++)n.insertBefore(o[f],h);for(let f=c+1;f<o.length;f++)n.appendChild(o[f])}}else for(let o=this.children.length-1;o>=0;o--){const l=this.children[o].peer;for(let h=l.topLevelElements.length-1;h>=0;h--){const c=l.topLevelElements[h];n.childNodes[r]!==c&&n.insertBefore(c,n.childNodes[r+1]),r--}}Dm===ko.INDICES&&this.updateDescendantPeerIds(this.children)}updateTransformTracker(e){this.transformTracker&&this.transformTracker.dispose();let t=null;e?t=e.getUniqueTrail():t=Sp(this.trail,this.display.rootNode),this.transformTracker=new kc(t)}getPDOMInstanceUniqueId(){if(Dm===ko.INDICES){const e=[];let t=this;for(;t.parent;){const n=t.parent.children.indexOf(t);if(n===-1)return"STILL_BEING_CREATED"+ol.nextDouble();e.unshift(n),t=t.parent}return e.join(Fb)}else return this.trail.getUniqueId()}updateDescendantPeerIds(e){const t=Array.from(e);for(;t.length>0;){const n=t.shift();n.peer.updateIndicesStringAndElementIds(),t.push(...n.children)}}dispose(){const e=this.peer;if(!this.isRootInstance){Ti.removeElements(this.parent.peer.getPlaceableSibling(),e.topLevelElements);for(let t=0;t<this.relativeNodes.length;t++)this.relativeNodes[t].pdomDisplaysEmitter.removeListener(this.relativeListeners[t])}for(;this.children.length;)this.children.pop().dispose();e.dispose(),this.transformTracker.dispose(),this.transformTracker=null,this.node&&this.node.removePDOMInstance(this),this.relativeNodes=null,this.display=null,this.trail=null,this.node=null,this.peer=null,this.isDisposed=!0,this.freeToPool()}toString(){return`${this.id}#{${this.trail.toString()}}`}auditRoot(){}static createFakePDOMTree(e){function t(n){let s=ie.flatten(n.getEffectiveChildren().map(t));return n.hasPDOMContent&&(s=[{node:n,children:s}]),s}return{node:null,children:t(e)}}freeToPool(){Dc.pool.freeToPool(this)}}Dc.pool=new us(Dc,{initialize:Dc.prototype.initializePDOMInstance});const v8=i=>i.pointerType===self.MSPointerEvent.MSPOINTER_TYPE_TOUCH?"touch":i.pointerType===self.MSPointerEvent.MSPOINTER_TYPE_PEN?"pen":i.pointerType===self.MSPointerEvent.MSPOINTER_TYPE_MOUSE?"mouse":i.pointerType;class Di extends js{}Di.POINTER_TYPE=new Di;Di.MS_POINTER_TYPE=new Di;Di.TOUCH_TYPE=new Di;Di.MOUSE_TYPE=new Di;Di.WHEEL_TYPE=new Di;Di.ALT_TYPE=new Di;Di.enumeration=new Sr(Di,{phetioDocumentation:"The type of batched event"});class $m{constructor(e,t,n){this.initialize(e,t,n)}initialize(e,t,n){return this.eventContext=e,this.type=t,this.callback=n,this}run(e){const t=this.callback;if(e.validatePointers(),this.type===Di.POINTER_TYPE){const n=this.eventContext,s=n.domEvent;t.call(e,s.pointerId,s.pointerType,e.pointFromEvent(s),n)}else if(this.type===Di.MS_POINTER_TYPE){const n=this.eventContext,s=n.domEvent;t.call(e,s.pointerId,v8(s),e.pointFromEvent(s),n)}else if(this.type===Di.TOUCH_TYPE){const n=this.eventContext,s=n.domEvent;for(let r=0;r<s.changedTouches.length;r++){const a=s.changedTouches.item(r);t.call(e,a.identifier,e.pointFromEvent(a),n)}}else if(this.type===Di.MOUSE_TYPE){const n=this.eventContext,s=e.pointFromEvent(n.domEvent);t===e.mouseDown?t.call(e,null,s,n):t.call(e,s,n)}else if(this.type===Di.WHEEL_TYPE||this.type===Di.ALT_TYPE)t.call(e,this.eventContext);else throw new Error(`bad type value: ${this.type}`)}dispose(){this.eventContext=null,this.callback=null,this.freeToPool()}freeToPool(){$m.pool.freeToPool(this)}}$m.pool=new us($m);class Xi{constructor(e){this.domEvent=e,this.activeElement=document.activeElement}static createSynthetic(){return new Xi(new self.Event("synthetic"))}allowsDOMInput(){const e=this.domEvent?.target;if(e instanceof Element){let t=e;for(;t;){if(t instanceof HTMLElement&&t.dataset?.sceneryAllowInput==="true")return!0;t=t.parentNode}}return!1}}const Ms=new ui("EventContextIO",{valueType:Xi,documentation:"A DOM event and its context",toStateObject:i=>({domEvent:oI(i.domEvent)}),fromStateObject:i=>new Xi(lI(i.domEvent)),stateSchema:()=>({domEvent:zc})});function os(i,e){if(i[e]!==void 0)return e;if(e=e.charAt(0).toUpperCase()+e.slice(1),i[`moz${e}`]!==void 0)return`moz${e}`;if(i[`Moz${e}`]!==void 0)return`Moz${e}`;if(i[`webkit${e}`]!==void 0)return`webkit${e}`;if(i[`ms${e}`]!==void 0)return`ms${e}`;if(i[`o${e}`]!==void 0)return`o${e}`}const mi={};function Hb(i){try{const e=document.createElement("canvas");e.width=1,e.height=1;const t=e.getContext("2d");t.fillStyle="black",t.fillRect(0,0,1,1);const n=e.toDataURL([i]),s=`data:${i}`;return n.slice(0,s.length)===s}catch{return!1}}function Ub(i,e){const t=document.createElement("canvas");t.width=1,t.height=1;const n=t.getContext("2d"),s=document.createElement("img");s.crossOrigin="Anonymous";const r=()=>{try{n.drawImage(s,0,0),t.toDataURL(),mi[i]=!0}catch{mi[i]=!1}};s.onload=r;try{s.src=e,s.complete&&r()}catch{mi[i]=!1}}mi.canvasPNGOutput=Hb("image/png");mi.canvasJPEGOutput=Hb("image/jpeg");mi.canvasGIFOutput=Hb("image/gif");mi.canvasICONOutput=Hb("image/x-icon");Ub("canvasPNGInput","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg==");Ub("canvasJPEGInput","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8qqKKKAP/2Q==");Ub("canvasSVGInput","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3cG9ydD0iMCAwIDEgMSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgPg0KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiByeD0iMCIgcnk9IjAiIHN0eWxlPSJmaWxsOiBibGFjazsgc3Ryb2tlOiBub25lOyI+PC9yZWN0Pg0KPC9zdmc+DQo=");Ub("canvasGIFInput","data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICRAEAOw==");const EI=document.createElement("canvas"),r0=EI.getContext("2d");mi.toDataURLHD=os(EI,"toDataURLHD");mi.createImageDataHD=os(r0,"createImageDataHD");mi.getImageDataHD=os(r0,"getImageDataHD");mi.putImageDataHD=os(r0,"putImageDataHD");mi.currentTransform=os(r0,"currentTransform");mi.canvasFilter=os(r0,"filter");const SS=document.createElement("span"),ih=document.createElement("div");mi.textStroke=os(SS.style,"textStroke");mi.textStrokeColor=os(SS.style,"textStrokeColor");mi.textStrokeWidth=os(SS.style,"textStrokeWidth");mi.transform=os(ih.style,"transform");mi.transformOrigin=os(ih.style,"transformOrigin");mi.backfaceVisibility=os(ih.style,"backfaceVisibility");mi.borderRadius=os(ih.style,"borderRadius");mi.userSelect=os(ih.style,"userSelect");mi.touchAction=os(ih.style,"touchAction");mi.touchCallout=os(ih.style,"touchCallout");mi.userDrag=os(ih.style,"userDrag");mi.tapHighlightColor=os(ih.style,"tapHighlightColor");mi.fontSmoothing=os(ih.style,"fontSmoothing");mi.requestAnimationFrame=os(self,"requestAnimationFrame");mi.cancelAnimationFrame=os(self,"cancelAnimationFrame");mi.setStyle=(i,e,t)=>{e!==void 0&&(i.style[e]=t)};mi.passive=!1;window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{mi.passive=!0}}));class Gs{}Gs.userGestureEmitter=new kn;Gs.inputListeners=[];const b8=()=>{};let oE=!1;class ii{static addDisplay(e,t,n){oE||(oE=!0,or.attachToWindow(),Bn.attachToWindow()),ii.attachedDisplays.push(e),t?ii.attachedDisplays.length===1&&ii.connectWindowListeners(n):ii.addOrRemoveListeners(e.domElement,!0,n),e.domElement.addEventListener("wheel",ii.onwheel,ii.getEventOptions(n,!0))}static removeDisplay(e,t,n){gs(ii.attachedDisplays,e),t?ii.attachedDisplays.length===0&&ii.disconnectWindowListeners(n):ii.addOrRemoveListeners(e.domElement,!1,n),e.domElement.removeEventListener("wheel",ii.onwheel,ii.getEventOptions(n,!0))}static getEventOptions(e,t){if(mi.passive&&e!==null){const s={passive:e};return t&&(s.capture=!1),s}else return!1}static getNonWheelUsedTypes(e){let t;return!!(self.navigator&&self.navigator.pointerEnabled||self.PointerEvent)?t=this.pointerListenerTypes:this.canUseMSPointerEvents?t=this.msPointerListenerTypes:t=this.touchListenerTypes.concat(this.mouseListenerTypes),t=t.concat(this.altListenerTypes),t}static connectWindowListeners(e){this.addOrRemoveListeners(self,!0,e)}static disconnectWindowListeners(e){this.addOrRemoveListeners(self,!1,e)}static addOrRemoveListeners(e,t,n){const s=e===window,r=t?1:-1;s?ii.listenersAttachedToWindow+=r:ii.listenersAttachedToElement+=r;const a=t?"addEventListener":"removeEventListener",o=this.getNonWheelUsedTypes(e===self);for(let l=0;l<o.length;l++){const h=o[l];s&&document[a](h,b8,ii.getEventOptions(n,!1));const c=ii[`on${h}`];e[a](h,c,ii.getEventOptions(n,!0))}}static batchWindowEvent(e,t,n,s){for(let r=0;r<ii.attachedDisplays.length;r++){const a=ii.attachedDisplays[r],o=a._input;e.domEvent.currentTarget&&e.domEvent.currentTarget!==self&&e.domEvent.currentTarget!==a.domElement||(!ii.blockFocusCallbacks||n!=="focusIn"&&n!=="focusOut")&&o.batchEvent(e,t,o[n],s)}}static onpointerdown(e){const t=new Xi(e);e.pointerType==="mouse"&&Gs.userGestureEmitter.emit(),ii.batchWindowEvent(t,Di.POINTER_TYPE,"pointerDown",!1)}static onpointerup(e){const t=new Xi(e);Gs.userGestureEmitter.emit(),ii.batchWindowEvent(t,Di.POINTER_TYPE,"pointerUp",!0)}static onpointermove(e){ii.batchWindowEvent(new Xi(e),Di.POINTER_TYPE,"pointerMove",!1)}static onpointerover(e){ii.batchWindowEvent(new Xi(e),Di.POINTER_TYPE,"pointerOver",!1)}static onpointerout(e){ii.batchWindowEvent(new Xi(e),Di.POINTER_TYPE,"pointerOut",!1)}static onpointercancel(e){ii.batchWindowEvent(new Xi(e),Di.POINTER_TYPE,"pointerCancel",!1)}static ongotpointercapture(e){ii.batchWindowEvent(new Xi(e),Di.POINTER_TYPE,"gotPointerCapture",!1)}static onlostpointercapture(e){ii.batchWindowEvent(new Xi(e),Di.POINTER_TYPE,"lostPointerCapture",!1)}static onMSPointerDown(e){ii.batchWindowEvent(new Xi(e),Di.MS_POINTER_TYPE,"pointerDown",!1)}static onMSPointerUp(e){ii.batchWindowEvent(new Xi(e),Di.MS_POINTER_TYPE,"pointerUp",!0)}static onMSPointerMove(e){ii.batchWindowEvent(new Xi(e),Di.MS_POINTER_TYPE,"pointerMove",!1)}static onMSPointerOver(e){ii.batchWindowEvent(new Xi(e),Di.MS_POINTER_TYPE,"pointerOver",!1)}static onMSPointerOut(e){ii.batchWindowEvent(new Xi(e),Di.MS_POINTER_TYPE,"pointerOut",!1)}static onMSPointerCancel(e){ii.batchWindowEvent(new Xi(e),Di.MS_POINTER_TYPE,"pointerCancel",!1)}static ontouchstart(e){ii.batchWindowEvent(new Xi(e),Di.TOUCH_TYPE,"touchStart",!1)}static ontouchend(e){const t=new Xi(e);Gs.userGestureEmitter.emit(),ii.batchWindowEvent(t,Di.TOUCH_TYPE,"touchEnd",!0)}static ontouchmove(e){ii.batchWindowEvent(new Xi(e),Di.TOUCH_TYPE,"touchMove",!1)}static ontouchcancel(e){ii.batchWindowEvent(new Xi(e),Di.TOUCH_TYPE,"touchCancel",!1)}static onmousedown(e){const t=new Xi(e);Gs.userGestureEmitter.emit(),ii.batchWindowEvent(t,Di.MOUSE_TYPE,"mouseDown",!1)}static onmouseup(e){const t=new Xi(e);Gs.userGestureEmitter.emit(),ii.batchWindowEvent(t,Di.MOUSE_TYPE,"mouseUp",!0)}static onmousemove(e){ii.batchWindowEvent(new Xi(e),Di.MOUSE_TYPE,"mouseMove",!1)}static onmouseover(e){ii.batchWindowEvent(new Xi(e),Di.MOUSE_TYPE,"mouseOver",!1)}static onmouseout(e){ii.batchWindowEvent(new Xi(e),Di.MOUSE_TYPE,"mouseOut",!1)}static onwheel(e){ii.batchWindowEvent(new Xi(e),Di.WHEEL_TYPE,"wheel",!1)}static onfocusin(e){ii.dispatchingFocusEvents=!0,Bn.updatePDOMFocusFromEvent(ii.attachedDisplays,e,!0),ii.batchWindowEvent(new Xi(e),Di.ALT_TYPE,"focusIn",!0),ii.dispatchingFocusEvents=!1}static onfocusout(e){ii.dispatchingFocusEvents=!0,Bn.updatePDOMFocusFromEvent(ii.attachedDisplays,e,!1),ii.batchWindowEvent(new Xi(e),Di.ALT_TYPE,"focusOut",!0),ii.dispatchingFocusEvents=!1}static oninput(e){ii.batchWindowEvent(new Xi(e),Di.ALT_TYPE,"input",!0)}static onchange(e){ii.batchWindowEvent(new Xi(e),Di.ALT_TYPE,"change",!0)}static onclick(e){ii.batchWindowEvent(new Xi(e),Di.ALT_TYPE,"click",!0)}static onkeydown(e){ii.batchWindowEvent(new Xi(e),Di.ALT_TYPE,"keyDown",!0)}static onkeyup(e){ii.batchWindowEvent(new Xi(e),Di.ALT_TYPE,"keyUp",!0)}}ii.blockFocusCallbacks=!1;ii.dispatchingFocusEvents=!1;ii.listenersAttachedToWindow=0;ii.listenersAttachedToElement=0;ii.attachedDisplays=[];ii.canUseMSPointerEvents=self.navigator&&self.navigator.msPointerEnabled;ii.pointerListenerTypes=["pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"];ii.msPointerListenerTypes=["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerCancel"];ii.touchListenerTypes=["touchstart","touchend","touchmove","touchcancel"];ii.mouseListenerTypes=["mousedown","mouseup","mousemove","mouseover","mouseout"];ii.wheelListenerTypes=["wheel"];ii.altListenerTypes=Ti.DOM_EVENTS;class gn{static addChild(e,t){const n=gn.beforeOp();t._pdomParent||gn.addTree(e,t),gn.afterOp(n)}static removeChild(e,t){const n=gn.beforeOp();t._pdomParent||gn.removeTree(e,t),gn.afterOp(n)}static childrenOrderChange(e){const t=gn.beforeOp();gn.reorder(e),gn.afterOp(t)}static pdomOrderChange(e,t,n){const s=gn.beforeOp(),r=[],a=[];Cc(t||[],n||[],r,a);let o,l;const h=gn.findPDOMTrails(e);for(o=0;o<r.length;o++){const c=r[o];c&&(gn.removeTree(e,c,h),c._pdomParent=null,c.pdomParentChangedEmitter.emit())}for(o=0;o<a.length;o++){const c=a[o];if(c){const f=c._parents;for(l=0;l<f.length;l++)gn.removeTree(f[l],c);c._pdomParent=e,c.pdomParentChangedEmitter.emit()}}for(o=0;o<r.length;o++){const c=r[o];if(c){const f=c._parents;for(l=0;l<f.length;l++)gn.addTree(f[l],c)}}for(o=0;o<a.length;o++){const c=a[o];c&&gn.addTree(e,c,h)}gn.reorder(e,h),gn.afterOp(s)}static pdomContentChange(e){const t=gn.beforeOp();let n;const s=e._pdomParent?[e._pdomParent]:e._parents,r=[];for(n=0;n<s.length;n++){const a=s[n],o=gn.findPDOMTrails(a);r.push(o),gn.removeTree(a,e,o)}for(n=0;n<s.length;n++)gn.addTree(s[n],e,r[n]);for(n=0;n<e._rootedDisplays.length;n++){const a=e._rootedDisplays[n];a._accessible&&gn.rebuildInstanceTree(a._rootPDOMInstance)}gn.afterOp(t)}static rebuildInstanceTree(e){const t=e.display.rootNode;e.removeAllChildren(),e.addConsecutiveInstances(gn.createTree(new Yi(t),e.display,e))}static addTree(e,t,n){n=n||gn.findPDOMTrails(e);for(let s=0;s<n.length;s++){const r=n[s],a=r.pdomInstance;r.fullTrail.addDescendant(t);const o=gn.createTree(r.fullTrail,a.display,a);r.fullTrail.removeDescendant(),a.addConsecutiveInstances(o)}}static removeTree(e,t,n){n=n||gn.findPDOMTrails(e);for(let s=0;s<n.length;s++){const r=n[s];r.fullTrail.addDescendant(t),r.pdomInstance.removeInstancesForTrail(r.fullTrail),r.fullTrail.removeDescendant()}}static reorder(e,t){t=t||gn.findPDOMTrails(e);for(let n=0;n<t.length;n++)t[n].pdomInstance.sortChildren()}static createTree(e,t,n){const s=e.lastNode(),r=s.getEffectiveChildren();let a,o=!1;s.hasPDOMContent&&(a=n.findChildWithTrail(e),a?o=!0:(s._lockedPDOMInstanceCreation=!0,a=Dc.pool.create(n,t,e.copy()),s._lockedPDOMInstanceCreation=!1),n=a);const l=[];for(let h=0;h<r.length;h++)e.addDescendant(r[h],h),Array.prototype.push.apply(l,gn.createTree(e,t,n)),e.removeDescendant();return a?(a.addConsecutiveInstances(l),o?[]:[a]):l}static beforeOp(){return ii.blockFocusCallbacks=!0,Gc()}static afterOp(e){ii.dispatchingFocusEvents||e&&e.focusable&&e.focus(),ii.blockFocusCallbacks=!1}static findPDOMTrails(e){const t=[];return gn.recursivePDOMTrailSearch(t,new Yi(e)),t}static recursivePDOMTrailSearch(e,t){const n=t.rootNode();let s;if(n.hasPDOMContent){const o=n.pdomInstances;for(s=0;s<o.length;s++)e.push(new Jx(o[s],t.copy(),!1));return}else{const o=n.rootedDisplays;for(s=0;s<o.length;s++){const l=o[s];l._accessible&&e.push(new Jx(l._rootPDOMInstance,t.copy(),!0))}}const r=n._pdomParent?[n._pdomParent]:n._parents,a=r.length;for(s=0;s<a;s++){const o=r[s];t.addAncestor(o),gn.recursivePDOMTrailSearch(e,t),t.removeAncestor()}}static auditPDOMDisplays(e){}static auditNodeForPDOMCycles(e){}static debugOrder(e){return e===null?"null":`[${e.map(t=>t===null?"null":t._id).join(",")}]`}}const VI=Ti.TAGS.P,_8=Ti.TAGS.DIV,A8=_8,w8=VI,S8=VI,Th=i=>i===null?null:typeof i=="string"?i:i.value,E2=["focusable","tagName","accessibleName","accessibleNameBehavior","accessibleHelpText","accessibleHelpTextBehavior","accessibleParagraph","accessibleParagraphBehavior","accessibleHeading","accessibleHeadingIncrement","accessibleRoleDescription","containerTagName","containerAriaRole","innerContent","inputType","inputValue","pdomChecked","pdomNamespace","ariaLabel","ariaRole","ariaValueText","labelTagName","labelContent","appendLabel","descriptionTagName","descriptionContent","appendDescription","accessibleParagraphContent","focusHighlight","focusHighlightLayerable","groupFocusHighlight","pdomVisibleProperty","pdomVisible","pdomOrder","pdomAttributes","ariaLabelledbyAssociations","ariaDescribedbyAssociations","activeDescendantAssociations","focusPanTargetBoundsProperty","limitPanDirection","positionInPDOM","pdomTransformSourceNode"];class Dr extends rn{constructor(e){super(e),this._inputValue=null,this._accessibleHeading=null,this._accessibleHeadingIncrement=1,this._labelContent=null,this._innerContent=null,this._descriptionContent=null,this._accessibleParagraphContent=null,this._ariaLabel=null,this._hasAppliedAriaLabel=!1,this._ariaValueText=null,this._hasAppliedAriaValueText=!1,this._accessibleRoleDescription=null,this._accessibleName=null,this._accessibleParagraph=null,this._accessibleHelpText=null,this._accessibleNameDirty=!1,this._accessibleHelpTextDirty=!1,this._accessibleParagraphDirty=!1,this.focusHighlightChangedEmitter=new un,this.pdomParentChangedEmitter=new un,this.pdomDisplaysEmitter=new un,this._lockedPDOMInstanceCreation=!1,this._onPDOMContentChangeListener=this.onPDOMContentChange.bind(this),this._onInputValueChangeListener=this.invalidatePeerInputValue.bind(this),this._onAriaLabelChangeListener=this.onAriaLabelChange.bind(this),this._onAriaValueTextChangeListener=this.onAriaValueTextChange.bind(this),this._onLabelContentChangeListener=this.invalidatePeerLabelSiblingContent.bind(this),this._onAccessibleHeadingChangeListener=this.invalidateAccessibleHeadingContent.bind(this),this._onDescriptionContentChangeListener=this.invalidatePeerDescriptionSiblingContent.bind(this),this._onAccessibleParagraphContentChangeListener=this.invalidatePeerParagraphSiblingContent.bind(this),this._onInnerContentChangeListener=this.onInnerContentPropertyChange.bind(this),this._onAccessibleRoleDescriptionChangeListener=this.onAccessibleRoleDescriptionChange.bind(this),this._tagName=null,this._containerTagName=null,this._labelTagName=null,this._descriptionTagName=null,this._inputType=null,this._pdomChecked=!1,this._appendLabel=!1,this._appendDescription=!1,this._pdomAttributes=[],this._pdomClasses=[],this._pdomNamespace=null,this._ariaRole=null,this._containerAriaRole=null,this._ariaLabelledbyAssociations=[],this._nodesThatAreAriaLabelledbyThisNode=[],this._ariaDescribedbyAssociations=[],this._nodesThatAreAriaDescribedbyThisNode=[],this._activeDescendantAssociations=[],this._nodesThatAreActiveDescendantToThisNode=[],this._focusableOverride=null,this._focusHighlight=null,this._focusHighlightLayerable=!1,this._groupFocusHighlight=!1,this._pdomOrder=null,this._pdomParent=null,this._pdomTransformSourceNode=null,this._focusPanTargetBoundsProperty=null,this._limitPanDirection=null,this._pdomDisplaysInfo=new z6(this),this._pdomInstances=[],this._positionInPDOM=!1,this._excludeLabelSiblingFromInput=!1,this._pdomVisibleProperty=new Nl(!0,!1,this.onPdomVisiblePropertyChange.bind(this)),this._accessibleNameBehavior=Dr.BASIC_ACCESSIBLE_NAME_BEHAVIOR,this._accessibleHelpTextBehavior=Dr.HELP_TEXT_AFTER_CONTENT,this._accessibleParagraphBehavior=Dr.BASIC_ACCESSIBLE_PARAGRAPH_BEHAVIOR,this.pdomBoundInputEnabledListener=this.pdomInputEnabledListener.bind(this)}disposeParallelDOM(){if(ai(this._accessibleName)&&!this._accessibleName.isDisposed&&(this._accessibleName.unlink(this._onPDOMContentChangeListener),this._accessibleName=null),ai(this._accessibleHelpText)&&!this._accessibleHelpText.isDisposed&&(this._accessibleHelpText.unlink(this._onPDOMContentChangeListener),this._accessibleHelpText=null),ai(this._accessibleParagraph)&&!this._accessibleParagraph.isDisposed&&(this._accessibleParagraph.unlink(this._onPDOMContentChangeListener),this._accessibleParagraph=null),ai(this._inputValue)&&!this._inputValue.isDisposed&&(this._inputValue.unlink(this._onPDOMContentChangeListener),this._inputValue=null),ai(this._ariaLabel)&&!this._ariaLabel.isDisposed&&this._ariaLabel.unlink(this._onAriaLabelChangeListener),ai(this._ariaValueText)&&!this._ariaValueText.isDisposed&&this._ariaValueText.unlink(this._onAriaValueTextChangeListener),ai(this._accessibleRoleDescription)&&!this._accessibleRoleDescription.isDisposed&&this._accessibleRoleDescription.unlink(this._onAccessibleRoleDescriptionChangeListener),ai(this._innerContent)&&!this._innerContent.isDisposed&&this._innerContent.unlink(this._onInnerContentChangeListener),ai(this._labelContent)&&!this._labelContent.isDisposed&&this._labelContent.unlink(this._onLabelContentChangeListener),ai(this._accessibleHeading)&&!this._accessibleHeading.isDisposed&&this._accessibleHeading.unlink(this._onAccessibleHeadingChangeListener),ai(this._descriptionContent)&&!this._descriptionContent.isDisposed&&this._descriptionContent.unlink(this._onDescriptionContentChangeListener),ai(this._accessibleParagraphContent)&&!this._accessibleParagraphContent.isDisposed&&this._accessibleParagraphContent.unlink(this._onAccessibleParagraphContentChangeListener),this.inputEnabledProperty.unlink(this.pdomBoundInputEnabledListener),this.pdomOrder=null,this._pdomParent){const e=this._pdomParent._pdomOrder.slice();gs(e,this),this._pdomParent.pdomOrder=e}this.setPDOMTransformSourceNode(null),this._accessibleNameBehavior=Dr.BASIC_ACCESSIBLE_NAME_BEHAVIOR,this._accessibleHelpTextBehavior=Dr.HELP_TEXT_AFTER_CONTENT,this.setAriaLabelledbyAssociations([]),this.setAriaDescribedbyAssociations([]),this.setActiveDescendantAssociations([]),this.removePDOMAttributes(),this._pdomVisibleProperty.dispose()}pdomInputEnabledListener(e){this.setPDOMAttribute("aria-disabled",!e),this.setPDOMAttribute("onclick",e?"":"return false")}isFocused(){for(let e=0;e<this._pdomInstances.length;e++)if(this._pdomInstances[e].peer.isFocused())return!0;return!1}get focused(){return this.isFocused()}focus(){this._pdomInstances.length>0&&this._pdomInstances[0].peer.focus()}blur(){this._pdomInstances.length>0&&this._pdomInstances[0].peer.blur()}pdomAudit(){for(let e=0;e<this.children.length;e++)this.children[e].pdomAudit()}setAccessibleName(e){e!==this._accessibleName&&(ai(this._accessibleName)&&!this._accessibleName.isDisposed&&this._accessibleName.unlink(this._onPDOMContentChangeListener),this._accessibleName=e,ai(e)&&e.lazyLink(this._onPDOMContentChangeListener),this._accessibleNameDirty=!0,this.onPDOMContentChange())}set accessibleName(e){this.setAccessibleName(e)}get accessibleName(){return this.getAccessibleName()}getAccessibleName(){return ai(this._accessibleName)?this._accessibleName.value:this._accessibleName}setAccessibleParagraph(e){e!==this._accessibleParagraph&&(ai(this._accessibleParagraph)&&!this._accessibleParagraph.isDisposed&&this._accessibleParagraph.unlink(this._onPDOMContentChangeListener),this._accessibleParagraph=e,ai(e)&&e.lazyLink(this._onPDOMContentChangeListener),this._accessibleParagraphDirty=!0,this.onPDOMContentChange())}set accessibleParagraph(e){this.setAccessibleParagraph(e)}get accessibleParagraph(){return this.getAccessibleParagraph()}getAccessibleParagraph(){return ai(this._accessibleParagraph)?this._accessibleParagraph.value:this._accessibleParagraph}removeFromPDOM(){this.tagName=null}setAccessibleNameBehavior(e){this._accessibleNameBehavior!==e&&(this._accessibleNameBehavior=e,this.onPDOMContentChange())}set accessibleNameBehavior(e){this.setAccessibleNameBehavior(e)}get accessibleNameBehavior(){return this.getAccessibleNameBehavior()}getAccessibleNameBehavior(){return this._accessibleNameBehavior}setAccessibleHelpText(e){e!==this._accessibleHelpText&&(ai(this._accessibleHelpText)&&!this._accessibleHelpText.isDisposed&&this._accessibleHelpText.unlink(this._onPDOMContentChangeListener),this._accessibleHelpText=e,ai(e)&&e.lazyLink(this._onPDOMContentChangeListener),this._accessibleHelpTextDirty=!0,this.onPDOMContentChange())}set accessibleHelpText(e){this.setAccessibleHelpText(e)}get accessibleHelpText(){return this.getAccessibleHelpText()}getAccessibleHelpText(){return ai(this._accessibleHelpText)?this._accessibleHelpText.value:this._accessibleHelpText}setAccessibleParagraphContent(e){e!==this._accessibleParagraphContent&&(ai(this._accessibleParagraphContent)&&!this._accessibleParagraphContent.isDisposed&&this._accessibleParagraphContent.unlink(this._onAccessibleParagraphContentChangeListener),this._accessibleParagraphContent=e,ai(e)&&e.lazyLink(this._onAccessibleParagraphContentChangeListener),this.invalidatePeerParagraphSiblingContent())}set accessibleParagraphContent(e){this.setAccessibleParagraphContent(e)}get accessibleParagraphContent(){return this.getAccessibleParagraphContent()}getAccessibleParagraphContent(){return Th(this._accessibleParagraphContent)}setAccessibleHeading(e){if(e!==this._accessibleHeading){const t=e===null!=(this._accessibleHeading===null);ai(this._accessibleHeading)&&!this._accessibleHeading.isDisposed&&this._accessibleHeading.unlink(this._onAccessibleHeadingChangeListener),this._accessibleHeading=e,ai(e)&&e.lazyLink(this._onAccessibleHeadingChangeListener),t?this.invalidateAccessibleHeading():this.invalidateAccessibleHeadingContent()}}set accessibleHeading(e){this.setAccessibleHeading(e)}get accessibleHeading(){return this.getAccessibleHeading()}getAccessibleHeading(){return Th(this._accessibleHeading)}setAccessibleHeadingIncrement(e){e!==this._accessibleHeadingIncrement&&(this._accessibleHeadingIncrement=e,this.invalidateAccessibleHeading())}set accessibleHeadingIncrement(e){this.setAccessibleHeadingIncrement(e)}get accessibleHeadingIncrement(){return this.getAccessibleHeadingIncrement()}getAccessibleHeadingIncrement(){return this._accessibleHeadingIncrement}invalidateAccessibleHeading(){this.onPDOMContentChange(),this.invalidateAccessibleHeadingContent()}invalidateAccessibleHeadingContent(){for(let e=0;e<this._pdomInstances.length;e++)this._pdomInstances[e].peer.setHeadingContent(Th(this._accessibleHeading))}setAccessibleHelpTextBehavior(e){this._accessibleHelpTextBehavior!==e&&(this._accessibleHelpTextBehavior=e,this.onPDOMContentChange())}set accessibleHelpTextBehavior(e){this.setAccessibleHelpTextBehavior(e)}get accessibleHelpTextBehavior(){return this.getAccessibleHelpTextBehavior()}getAccessibleHelpTextBehavior(){return this._accessibleHelpTextBehavior}setTagName(e){e!==this._tagName&&(this._tagName=e,this.onPDOMContentChange())}set tagName(e){this.setTagName(e)}get tagName(){return this.getTagName()}getTagName(){return this._tagName}setLabelTagName(e){e!==this._labelTagName&&(this._labelTagName=e,this.onPDOMContentChange())}set labelTagName(e){this.setLabelTagName(e)}get labelTagName(){return this.getLabelTagName()}getLabelTagName(){return this._labelTagName}setDescriptionTagName(e){e!==this._descriptionTagName&&(this._descriptionTagName=e,this.onPDOMContentChange())}set descriptionTagName(e){this.setDescriptionTagName(e)}get descriptionTagName(){return this.getDescriptionTagName()}getDescriptionTagName(){return this._descriptionTagName}setInputType(e){if(e!==this._inputType){this._inputType=e;for(let t=0;t<this._pdomInstances.length;t++){const n=this._pdomInstances[t].peer;e===null?n.removeAttributeFromElement("type"):n.setAttributeToElement("type",e)}}}set inputType(e){this.setInputType(e)}get inputType(){return this.getInputType()}getInputType(){return this._inputType}setAppendLabel(e){this._appendLabel!==e&&(this._appendLabel=e,this.onPDOMContentChange())}set appendLabel(e){this.setAppendLabel(e)}get appendLabel(){return this.getAppendLabel()}getAppendLabel(){return this._appendLabel}setAppendDescription(e){this._appendDescription!==e&&(this._appendDescription=e,this.onPDOMContentChange())}set appendDescription(e){this.setAppendDescription(e)}get appendDescription(){return this.getAppendDescription()}getAppendDescription(){return this._appendDescription}setContainerTagName(e){this._containerTagName!==e&&(this._containerTagName=e,this.onPDOMContentChange())}set containerTagName(e){this.setContainerTagName(e)}get containerTagName(){return this.getContainerTagName()}getContainerTagName(){return this._containerTagName}invalidatePeerLabelSiblingContent(){const e=this.labelContent;e&&!this._labelTagName&&this.setLabelTagName(S8);for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setLabelSiblingContent(e)}setLabelContent(e){e!==this._labelContent&&(ai(this._labelContent)&&!this._labelContent.isDisposed&&this._labelContent.unlink(this._onLabelContentChangeListener),this._labelContent=e,ai(e)&&e.lazyLink(this._onLabelContentChangeListener),this.invalidatePeerLabelSiblingContent())}set labelContent(e){this.setLabelContent(e)}get labelContent(){return this.getLabelContent()}getLabelContent(){return Th(this._labelContent)}onInnerContentPropertyChange(){const e=this.innerContent;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPrimarySiblingContent(e)}setInnerContent(e){e!==this._innerContent&&(ai(this._innerContent)&&!this._innerContent.isDisposed&&this._innerContent.unlink(this._onInnerContentChangeListener),this._innerContent=e,ai(e)&&e.lazyLink(this._onInnerContentChangeListener),this.onInnerContentPropertyChange())}set innerContent(e){this.setInnerContent(e)}get innerContent(){return this.getInnerContent()}getInnerContent(){return Th(this._innerContent)}invalidatePeerDescriptionSiblingContent(){const e=this.descriptionContent;e&&!this._descriptionTagName&&this.setDescriptionTagName(w8);for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setDescriptionSiblingContent(e)}invalidatePeerParagraphSiblingContent(){for(let e=0;e<this._pdomInstances.length;e++)this._pdomInstances[e].peer.setAccessibleParagraphContent(this.accessibleParagraphContent)}setDescriptionContent(e){e!==this._descriptionContent&&(ai(this._descriptionContent)&&!this._descriptionContent.isDisposed&&this._descriptionContent.unlink(this._onDescriptionContentChangeListener),this._descriptionContent=e,ai(e)&&e.lazyLink(this._onDescriptionContentChangeListener),this.invalidatePeerDescriptionSiblingContent())}set descriptionContent(e){this.setDescriptionContent(e)}get descriptionContent(){return this.getDescriptionContent()}getDescriptionContent(){return Th(this._descriptionContent)}setAccessibleParagraphBehavior(e){this._accessibleParagraphBehavior!==e&&(this._accessibleParagraphBehavior=e,this.onPDOMContentChange())}set accessibleParagraphBehavior(e){this.setAccessibleParagraphBehavior(e)}get accessibleParagraphBehavior(){return this.getAccessibleParagraphBehavior()}getAccessibleParagraphBehavior(){return this._accessibleParagraphBehavior}setAriaRole(e){this._ariaRole!==e&&(this._ariaRole=e,e!==null?this.setPDOMAttribute("role",e):this.removePDOMAttribute("role"))}set ariaRole(e){this.setAriaRole(e)}get ariaRole(){return this.getAriaRole()}getAriaRole(){return this._ariaRole}setContainerAriaRole(e){this._containerAriaRole!==e&&(this._containerAriaRole=e,e===null?this.removePDOMAttribute("role",{elementName:x2}):this.setPDOMAttribute("role",e,{elementName:x2}))}set containerAriaRole(e){this.setContainerAriaRole(e)}get containerAriaRole(){return this.getContainerAriaRole()}getContainerAriaRole(){return this._containerAriaRole}onAriaValueTextChange(){const e=this.ariaValueText;e===null?this._hasAppliedAriaLabel&&(this.removePDOMAttribute("aria-valuetext"),this._hasAppliedAriaLabel=!1):(this.setPDOMAttribute("aria-valuetext",e),this._hasAppliedAriaLabel=!0)}onAccessibleRoleDescriptionChange(){const e=this.accessibleRoleDescription;e===null?this.removePDOMAttribute("aria-roledescription"):this.setPDOMAttribute("aria-roledescription",e)}setAriaValueText(e){this._ariaValueText!==e&&(ai(this._ariaValueText)&&!this._ariaValueText.isDisposed&&this._ariaValueText.unlink(this._onAriaValueTextChangeListener),this._ariaValueText=e,ai(e)&&e.lazyLink(this._onAriaValueTextChangeListener),this.onAriaValueTextChange())}set ariaValueText(e){this.setAriaValueText(e)}get ariaValueText(){return this.getAriaValueText()}getAriaValueText(){return Th(this._ariaValueText)}setPDOMNamespace(e){return this._pdomNamespace!==e&&(this._pdomNamespace=e,this.onPDOMContentChange()),this}set pdomNamespace(e){this.setPDOMNamespace(e)}get pdomNamespace(){return this.getPDOMNamespace()}getPDOMNamespace(){return this._pdomNamespace}onAriaLabelChange(){const e=this.ariaLabel;e===null?this._hasAppliedAriaLabel&&(this.removePDOMAttribute("aria-label"),this._hasAppliedAriaLabel=!1):(this.setPDOMAttribute("aria-label",e),this._hasAppliedAriaLabel=!0)}setAriaLabel(e){this._ariaLabel!==e&&(ai(this._ariaLabel)&&!this._ariaLabel.isDisposed&&this._ariaLabel.unlink(this._onAriaLabelChangeListener),this._ariaLabel=e,ai(e)&&e.lazyLink(this._onAriaLabelChangeListener),this.onAriaLabelChange())}set ariaLabel(e){this.setAriaLabel(e)}get ariaLabel(){return this.getAriaLabel()}getAriaLabel(){return Th(this._ariaLabel)}setAccessibleRoleDescription(e){this._accessibleRoleDescription!==e&&(ai(this._accessibleRoleDescription)&&!this._accessibleRoleDescription.isDisposed&&this._accessibleRoleDescription.unlink(this._onAccessibleRoleDescriptionChangeListener),this._accessibleRoleDescription=e,ai(e)&&e.lazyLink(this._onAccessibleRoleDescriptionChangeListener),this.onAccessibleRoleDescriptionChange())}set accessibleRoleDescription(e){this.setAccessibleRoleDescription(e)}get accessibleRoleDescription(){return this.getAccessibleRoleDescription()}getAccessibleRoleDescription(){return Th(this._accessibleRoleDescription)}setFocusHighlight(e){this._focusHighlight!==e&&(this._focusHighlight=e,this._focusHighlightLayerable&&(e.visible=!1),this.focusHighlightChangedEmitter.emit())}set focusHighlight(e){this.setFocusHighlight(e)}get focusHighlight(){return this.getFocusHighlight()}getFocusHighlight(){return this._focusHighlight}setFocusHighlightLayerable(e){this._focusHighlightLayerable!==e&&(this._focusHighlightLayerable=e,this._focusHighlight&&(this._focusHighlight.visible=!1,this.focusHighlightChangedEmitter.emit()))}set focusHighlightLayerable(e){this.setFocusHighlightLayerable(e)}get focusHighlightLayerable(){return this.getFocusHighlightLayerable()}getFocusHighlightLayerable(){return this._focusHighlightLayerable}setGroupFocusHighlight(e){this._groupFocusHighlight=e}set groupFocusHighlight(e){this.setGroupFocusHighlight(e)}get groupFocusHighlight(){return this.getGroupFocusHighlight()}getGroupFocusHighlight(){return this._groupFocusHighlight}setAriaLabelledbyAssociations(e){let t,n;if(e.length===0&&this._ariaLabelledbyAssociations.length===0)return;const s=[],r=[],a=[];for(Cc(e,this._ariaLabelledbyAssociations,r,s,a),n=0;n<s.length;n++)t=s[n],this.removeAriaLabelledbyAssociation(t);for(n=0;n<r.length;n++){const o=e[n];this.addAriaLabelledbyAssociation(o)}}set ariaLabelledbyAssociations(e){this.setAriaLabelledbyAssociations(e)}get ariaLabelledbyAssociations(){return this.getAriaLabelledbyAssociations()}getAriaLabelledbyAssociations(){return this._ariaLabelledbyAssociations}addAriaLabelledbyAssociation(e){this._ariaLabelledbyAssociations.push(e),e.otherNode._nodesThatAreAriaLabelledbyThisNode.push(this),this.updateAriaLabelledbyAssociationsInPeers()}removeAriaLabelledbyAssociation(e){this._ariaLabelledbyAssociations.splice(ie.indexOf(this._ariaLabelledbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaLabelledByThisNode(this),this.updateAriaLabelledbyAssociationsInPeers()}removeNodeThatIsAriaLabelledByThisNode(e){const t=ie.indexOf(this._nodesThatAreAriaLabelledbyThisNode,e);this._nodesThatAreAriaLabelledbyThisNode.splice(t,1)}updateAriaLabelledbyAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onAriaLabelledbyAssociationChange()}updateOtherNodesAriaLabelledby(){for(let e=0;e<this._nodesThatAreAriaLabelledbyThisNode.length;e++)this._nodesThatAreAriaLabelledbyThisNode[e].updateAriaLabelledbyAssociationsInPeers()}getNodesThatAreAriaLabelledbyThisNode(){return this._nodesThatAreAriaLabelledbyThisNode}get nodesThatAreAriaLabelledbyThisNode(){return this.getNodesThatAreAriaLabelledbyThisNode()}setAriaDescribedbyAssociations(e){let t;if(e.length===0&&this._ariaDescribedbyAssociations.length===0)return;const n=[],s=[],r=[];let a;for(Cc(e,this._ariaDescribedbyAssociations,s,n,r),a=0;a<n.length;a++)t=n[a],this.removeAriaDescribedbyAssociation(t);for(a=0;a<s.length;a++){const o=e[a];this.addAriaDescribedbyAssociation(o)}}set ariaDescribedbyAssociations(e){this.setAriaDescribedbyAssociations(e)}get ariaDescribedbyAssociations(){return this.getAriaDescribedbyAssociations()}getAriaDescribedbyAssociations(){return this._ariaDescribedbyAssociations}addAriaDescribedbyAssociation(e){this._ariaDescribedbyAssociations.push(e),e.otherNode._nodesThatAreAriaDescribedbyThisNode.push(this),this.updateAriaDescribedbyAssociationsInPeers()}hasAriaDescribedbyAssociation(e){return ie.includes(this._ariaDescribedbyAssociations,e)}removeAriaDescribedbyAssociation(e){this._ariaDescribedbyAssociations.splice(ie.indexOf(this._ariaDescribedbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaDescribedByThisNode(this),this.updateAriaDescribedbyAssociationsInPeers()}removeNodeThatIsAriaDescribedByThisNode(e){const t=ie.indexOf(this._nodesThatAreAriaDescribedbyThisNode,e);this._nodesThatAreAriaDescribedbyThisNode.splice(t,1)}updateAriaDescribedbyAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onAriaDescribedbyAssociationChange()}updateOtherNodesAriaDescribedby(){for(let e=0;e<this._nodesThatAreAriaDescribedbyThisNode.length;e++)this._nodesThatAreAriaDescribedbyThisNode[e].updateAriaDescribedbyAssociationsInPeers()}getNodesThatAreAriaDescribedbyThisNode(){return this._nodesThatAreAriaDescribedbyThisNode}get nodesThatAreAriaDescribedbyThisNode(){return this.getNodesThatAreAriaDescribedbyThisNode()}setActiveDescendantAssociations(e){let t;if(e.length===0&&this._activeDescendantAssociations.length===0)return;const n=[],s=[],r=[];let a;for(Cc(e,this._activeDescendantAssociations,s,n,r),a=0;a<n.length;a++)t=n[a],this.removeActiveDescendantAssociation(t);for(a=0;a<s.length;a++){const o=e[a];this.addActiveDescendantAssociation(o)}}set activeDescendantAssociations(e){this.setActiveDescendantAssociations(e)}get activeDescendantAssociations(){return this.getActiveDescendantAssociations()}getActiveDescendantAssociations(){return this._activeDescendantAssociations}addActiveDescendantAssociation(e){this._activeDescendantAssociations.push(e),e.otherNode._nodesThatAreActiveDescendantToThisNode.push(this),this.updateActiveDescendantAssociationsInPeers()}removeActiveDescendantAssociation(e){this._activeDescendantAssociations.splice(ie.indexOf(this._activeDescendantAssociations,e),1)[0].otherNode.removeNodeThatIsActiveDescendantThisNode(this),this.updateActiveDescendantAssociationsInPeers()}removeNodeThatIsActiveDescendantThisNode(e){const t=ie.indexOf(this._nodesThatAreActiveDescendantToThisNode,e);this._nodesThatAreActiveDescendantToThisNode.splice(t,1)}updateActiveDescendantAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onActiveDescendantAssociationChange()}updateOtherNodesActiveDescendant(){for(let e=0;e<this._nodesThatAreActiveDescendantToThisNode.length;e++)this._nodesThatAreActiveDescendantToThisNode[e].updateActiveDescendantAssociationsInPeers()}getNodesThatAreActiveDescendantToThisNode(){return this._nodesThatAreActiveDescendantToThisNode}get nodesThatAreActiveDescendantToThisNode(){return this.getNodesThatAreActiveDescendantToThisNode()}setPDOMOrder(e){let t=this._pdomOrder===null&&e!==null||this._pdomOrder!==null&&e===null;if(!t&&e&&this._pdomOrder&&(t=e.length!==this._pdomOrder.length,!t)){for(let n=0;n<e.length;n++)if(e[n]!==this._pdomOrder[n]){t=!0;break}}if(t){const n=this._pdomOrder;this._pdomOrder=e===null?null:e.slice(),gn.pdomOrderChange(this,n,e),this.rendererSummaryRefreshEmitter.emit()}}set pdomOrder(e){this.setPDOMOrder(e)}get pdomOrder(){return this.getPDOMOrder()}getPDOMOrder(){return this._pdomOrder?this._pdomOrder.slice(0):this._pdomOrder}hasPDOMOrder(){return this._pdomOrder!==null&&this._pdomOrder.length!==0&&(this._pdomOrder.length>1||this._pdomOrder[0]!==null)}getPDOMParent(){return this._pdomParent}get pdomParent(){return this.getPDOMParent()}getEffectiveChildren(){const e=[];for(let t=0;t<this._children.length;t++){const n=this._children[t];n._pdomParent||e.push(n)}if(this.hasPDOMOrder()){const t=this.pdomOrder.slice(),n=t.indexOf(null);return n>=0?(e.unshift(n,1),Array.prototype.splice.apply(t,e)):Array.prototype.push.apply(t,e),t}else return e}onPdomVisiblePropertyChange(e){this._pdomDisplaysInfo.onPDOMVisibilityChange(e)}setPdomVisibleProperty(e){return this._pdomVisibleProperty.setTargetProperty(e),this}set pdomVisibleProperty(e){this.setPdomVisibleProperty(e)}get pdomVisibleProperty(){return this.getPdomVisibleProperty()}getPdomVisibleProperty(){return this._pdomVisibleProperty}setPDOMVisible(e){this.pdomVisibleProperty.value=e}set pdomVisible(e){this.setPDOMVisible(e)}get pdomVisible(){return this.isPDOMVisible()}isPDOMVisible(){return this.pdomVisibleProperty.value}isPDOMDisplayed(){for(let e=0;e<this._pdomInstances.length;e++)if(this._pdomInstances[e].isGloballyVisible())return!0;return!1}get pdomDisplayed(){return this.isPDOMDisplayed()}invalidatePeerInputValue(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onInputValueChange()}setInputValue(e){e!==this._inputValue&&(ai(this._inputValue)&&!this._inputValue.isDisposed&&this._inputValue.unlink(this._onPDOMContentChangeListener),this._inputValue=e,ai(e)&&e.lazyLink(this._onPDOMContentChangeListener),this.invalidatePeerInputValue())}set inputValue(e){this.setInputValue(e)}get inputValue(){return this.getInputValue()}getInputValue(){let e;return ai(this._inputValue)?e=this._inputValue.value:e=this._inputValue,e===null?null:""+e}setPDOMChecked(e){this._tagName,this._inputType,this._pdomChecked!==e&&(this._pdomChecked=e,this.setPDOMAttribute("checked",e,{type:"property"}))}set pdomChecked(e){this.setPDOMChecked(e)}get pdomChecked(){return this.getPDOMChecked()}getPDOMChecked(){return this._pdomChecked}getPDOMAttributes(){return this._pdomAttributes.slice(0)}setPDOMAttributes(e){this.removePDOMAttributes();for(let t=0;t<e.length;t++){const n=e[t];this.setPDOMAttribute(n.attribute,n.value,n.options)}}get pdomAttributes(){return this.getPDOMAttributes()}set pdomAttributes(e){this.setPDOMAttributes(e)}setPDOMAttribute(e,t,n){const s=Ne()({namespace:null,type:"attribute",elementName:ap},n);for(let a=0;a<this._pdomAttributes.length;a++){const o=this._pdomAttributes[a];o.attribute===e&&o.options?.namespace===s.namespace&&o.options?.elementName===s.elementName&&(!ai(o.value)&&o.options.type===s.type?this._pdomAttributes.splice(a,1):this.removePDOMAttribute(o.attribute,o.options))}let r=a=>{for(let o=0;o<this._pdomInstances.length;o++)this._pdomInstances[o].peer.setAttributeToElement(e,a,s)};ai(t)?t.link(r):(r(t),r=null),this._pdomAttributes.push({attribute:e,value:t,listener:r,options:s})}removePDOMAttribute(e,t){const n=Ne()({namespace:null,elementName:ap},t);for(let s=0;s<this._pdomAttributes.length;s++)if(this._pdomAttributes[s].attribute===e&&this._pdomAttributes[s].options?.namespace===n.namespace&&this._pdomAttributes[s].options?.elementName===n.elementName){const r=this._pdomAttributes[s];r.listener&&ai(r.value)&&!r.value.isDisposed&&r.value.unlink(r.listener),this._pdomAttributes.splice(s,1)}for(let s=0;s<this._pdomInstances.length;s++)this._pdomInstances[s].peer.removeAttributeFromElement(e,n)}removePDOMAttributes(){const e=this.getPDOMAttributes();for(let t=0;t<e.length;t++){const n=e[t].attribute;this.removePDOMAttribute(n)}}hasPDOMAttribute(e,t){const n=Ne()({namespace:null,elementName:ap},t);let s=!1;for(let r=0;r<this._pdomAttributes.length;r++)this._pdomAttributes[r].attribute===e&&this._pdomAttributes[r].options?.namespace===n.namespace&&this._pdomAttributes[r].options?.elementName===n.elementName&&(s=!0);return s}setPDOMClass(e,t){const n=Ne()({elementName:ap},t);for(let s=0;s<this._pdomClasses.length;s++){const r=this._pdomClasses[s];if(r.className===e&&r.options.elementName===n.elementName)return}this._pdomClasses.push({className:e,options:n});for(let s=0;s<this._pdomInstances.length;s++)this._pdomInstances[s].peer.setClassToElement(e,n)}removePDOMClass(e,t){const n=Ne()({elementName:ap},t);for(let s=0;s<this._pdomClasses.length;s++)this._pdomClasses[s].className===e&&this._pdomClasses[s].options.elementName===n.elementName&&this._pdomClasses.splice(s,1);for(let s=0;s<this._pdomClasses.length;s++)this.pdomInstances[s].peer.removeClassFromElement(e,n)}getPDOMClasses(){return this._pdomClasses.slice(0)}get pdomClasses(){return this.getPDOMClasses()}setFocusable(e){if(this._focusableOverride!==e){this._focusableOverride=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setFocusable(this.focusable)}}set focusable(e){this.setFocusable(e)}get focusable(){return this.isFocusable()}isFocusable(){return this._focusableOverride!==null?this._focusableOverride:this._tagName===null?!1:Ti.tagIsDefaultFocusable(this._tagName)}setPDOMTransformSourceNode(e){this._pdomTransformSourceNode=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPDOMTransformSourceNode(this._pdomTransformSourceNode)}set pdomTransformSourceNode(e){this.setPDOMTransformSourceNode(e)}get pdomTransformSourceNode(){return this.getPDOMTransformSourceNode()}getPDOMTransformSourceNode(){return this._pdomTransformSourceNode}setFocusPanTargetBoundsProperty(e){e!==this._focusPanTargetBoundsProperty&&(this._focusPanTargetBoundsProperty=e)}getFocusPanTargetBoundsProperty(){return this._focusPanTargetBoundsProperty}set focusPanTargetBoundsProperty(e){this.setFocusPanTargetBoundsProperty(e)}get focusPanTargetBoundsProperty(){return this.getFocusPanTargetBoundsProperty()}setLimitPanDirection(e){this._limitPanDirection=e}getLimitPanDirection(){return this._limitPanDirection}set limitPanDirection(e){this.setLimitPanDirection(e)}get limitPanDirection(){return this.getLimitPanDirection()}setPositionInPDOM(e){this._positionInPDOM=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPositionInPDOM(e)}set positionInPDOM(e){this.setPositionInPDOM(e)}get positionInPDOM(){return this.getPositionInPDOM()}getPositionInPDOM(){return this._positionInPDOM}setExcludeLabelSiblingFromInput(){this._excludeLabelSiblingFromInput=!0,this.onPDOMContentChange()}isInsidePhetioArchetype(e=this){if(e.isPhetioInstrumented())return e.phetioIsArchetype;for(let t=0;t<e.parents.length;t++)if(this.isInsidePhetioArchetype(e.parents[t]))return!0;return!1}addAccessibleResponse(e){if(Yl.value||R.PHET_IO_ENABLED&&this.isInsidePhetioArchetype())return;const t=this.getConnectedDisplays();for(let n=0;n<t.length;n++){const s=t[n];s.isAccessible()&&s.descriptionUtteranceQueue.addToBack(e)}}forEachUtteranceQueue(e){const t=this.getConnectedDisplays();for(let n=0;n<t.length;n++){const s=t[n];s.isAccessible()&&e(s.descriptionUtteranceQueue)}}getBaseOptions(){const e={};for(let t=0;t<E2.length;t++){const n=E2[t];e[n]=this[n]}return e}getNestedPDOMOrder(){const e=new Yi(this);let t=[];const n=[],s=[n];function r(a,o){let l=0;if(ie.each(t,f=>{a===f&&l++}),l>1||l===1&&!o)return;if(a.hasPDOMContent){const f={trail:e.copy(),children:[]};s[s.length-1].push(f),s.push(f.children)}const h=a._pdomOrder===null?[]:a._pdomOrder;t=t.concat(h),ie.each(h,f=>{ie.each(a.getLeafTrailsTo(f),g=>{g.removeAncestor(),e.addDescendantTrail(g),r(f,!0),e.removeDescendantTrail(g)})});const c=a._children.length;for(let f=0;f<c;f++){const g=a._children[f];e.addDescendant(g,f),r(g,!1),e.removeDescendant()}ie.each(h,()=>{t.pop()}),a.hasPDOMContent&&s.pop()}return r(this,!1),n}onPDOMContentChange(){gn.pdomContentChange(this),this.rendererSummaryRefreshEmitter.emit()}get hasPDOMContent(){return!!this._tagName||!!this._accessibleParagraph}onPDOMAddChild(e){this._pdomDisplaysInfo.onAddChild(e),gn.addChild(this,e)}onPDOMRemoveChild(e){this._pdomDisplaysInfo.onRemoveChild(e),gn.removeChild(this,e),e.updateOtherNodesAriaLabelledby(),e.updateOtherNodesAriaDescribedby(),e.updateOtherNodesActiveDescendant()}onPDOMReorderedChildren(){gn.childrenOrderChange(this)}updateLinkedElementForProperty(e,t,n){if(this.isPhetioInstrumented()){t&&t instanceof ks&&t.isPhetioInstrumented()&&t instanceof rn&&this.removeLinkedElements(t);const s=this.tandem.createTandem(e);n&&n instanceof ks&&n.isPhetioInstrumented()&&n instanceof rn&&s!==n.tandem&&this.addLinkedElement(n,{tandemName:e})}}getPDOMInstances(){return this._pdomInstances}get pdomInstances(){return this.getPDOMInstances()}addPDOMInstance(e){this._pdomInstances.push(e)}removePDOMInstance(e){const t=ie.indexOf(this._pdomInstances,e);this._pdomInstances.splice(t,1)}static BASIC_ACCESSIBLE_NAME_BEHAVIOR(e,t,n){return e.labelTagName&&Ti.tagNameSupportsContent(e.labelTagName)?t.labelContent=n:e.tagName==="input"?(t.labelTagName="label",t.labelContent=n):Ti.tagNameSupportsContent(e.tagName)?t.innerContent=n:t.ariaLabel=n,t}static BASIC_ACCESSIBLE_PARAGRAPH_BEHAVIOR(e,t,n){return t.accessibleParagraphContent=n,t}static forwardAccessibleName(e,t){Dr.useDefaultTagName(e),e.accessibleNameBehavior=(n,s,r,a)=>(a.push(()=>{t.accessibleName=r}),s)}static forwardHelpText(e,t){Dr.useDefaultTagName(e),e.accessibleHelpTextBehavior=(n,s,r,a)=>(a.push(()=>{t.accessibleHelpText=r}),s)}static HELP_TEXT_BEFORE_CONTENT(e,t,n){return t.descriptionTagName=Ti.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=n,t.appendDescription=!1,t}static HELP_TEXT_AFTER_CONTENT(e,t,n){return t.descriptionTagName=Ti.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=n,t.appendDescription=!0,t}static useDefaultTagName(e){e.tagName||(e.tagName=A8)}}class P8{constructor(){this.hotkeysProperty=new oi(new Set)}add(e){this.hotkeysProperty.value=new Set([...this.hotkeysProperty.value,e])}remove(e){this.hotkeysProperty.value=new Set([...this.hotkeysProperty.value].filter(t=>t!==e))}}const V2=new P8,T8=(i,e)=>i.length===e.length&&i.every((t,n)=>t===e[n]),x8=(i,e)=>i.size===e.size&&[...i].every(t=>e.has(t));class E8{constructor(){this.enabledHotkeysProperty=new oi([]),this.englishKeysDown=new Set,this.modifierKeys=[],this.activeHotkeys=new Set,this.availableHotkeysProperty=new Dt([V2.hotkeysProperty,lr],(s,r)=>{const a=[];if(r)for(const o of r.trail.nodes.slice().reverse()){if(!o.isInputEnabled())break;o.inputListeners.forEach(l=>{l.hotkeys?.forEach(h=>{a.push(h)})})}return a.push(...s),ie.uniq(a)},{valueComparisonStrategy:T8});const e=()=>{this.availableHotkeysProperty.recomputeDerivation()};lr.link((s,r)=>{r&&r.trail.nodes.forEach(a=>{a.inputEnabledProperty.unlink(e)}),s&&s.trail.nodes.forEach(a=>{a.inputEnabledProperty.lazyLink(e)})});const t=()=>{const s=new Set,r=[];for(const a of this.availableHotkeysProperty.value)if(a.enabledProperty.value){const o=a.keyDescriptorProperty.value.modifierKeys,l=a.keyDescriptorProperty.value.key,h=[...o.slice().sort(),l].join("+");a.overlapBehavior==="allow"?r.push(a):s.has(h)||(r.push(a),a.overlapBehavior==="handle"&&s.add(h))}this.enabledHotkeysProperty.value=r},n=new Map;this.availableHotkeysProperty.link((s,r)=>{let a=!1;if(r){for(const o of r)if(!s.includes(o)){const l=n.get(o);n.delete(o),o.enabledProperty.unlink(l),o.keyDescriptorProperty.unlink(l),a=!0}}for(const o of s)if(!r||!r.includes(o)){const l=()=>t();n.set(o,l),o.enabledProperty.lazyLink(l),o.keyDescriptorProperty.lazyLink(l),a=!0}a&&t()}),this.enabledHotkeysProperty.link((s,r)=>{if(this.modifierKeys=ie.uniq([...WD,...[...s].flatMap(a=>a.keyDescriptorProperty.value.modifierKeys)]),r)for(const a of r)!s.includes(a)&&this.activeHotkeys.has(a)&&this.removeActiveHotkey(a,null,!1);this.updateHotkeyStatus(null)}),or.keyDownStateChangedEmitter.addListener(s=>{const r=or.getEnglishKeysDown();if(!x8(this.englishKeysDown,r))this.englishKeysDown=r,this.updateHotkeyStatus(s);else for(const o of[...this.activeHotkeys])o.fireOnHold&&o.fireOnHoldTiming==="browser"&&o.fire(s)})}updateHotkeysFromInputListenerChange(e){lr.value&&lr.value.trail.nodes.includes(e)&&this.availableHotkeysProperty.recomputeDerivation()}getHotkeysForMainKey(e){return this.englishKeysDown.has(e)?[...this.enabledHotkeysProperty.value].filter(n=>n.keyDescriptorProperty.value.key!==e?!1:this.modifierKeys.every(r=>{const a=n.keyDescriptorProperty.value.ignoredModifierKeys;return this.englishKeysDown.has(r)===n.keysProperty.value.includes(r)||a.includes(r)})):[]}updateHotkeyStatus(e){const t=Qe.getEventCode(e),n=t?Zy(t):null;for(const s of this.enabledHotkeysProperty.value){const r=s.keyDescriptorProperty.value.key,a=this.getHotkeysForMainKey(r).includes(s),o=!s.interrupted||e&&e.type==="keydown",l=a&&o,h=this.activeHotkeys.has(s),c=s.keyDescriptorProperty.value.key;l&&!h?this.addActiveHotkey(s,e,c===n):!l&&h&&this.removeActiveHotkey(s,e,c===n)}}addActiveHotkey(e,t,n){this.activeHotkeys.add(e);const s=n&&e.fireOnDown;e.onPress(t,s)}removeActiveHotkey(e,t,n){this.activeHotkeys.delete(e);const s=n&&!e.fireOnDown,r=!n;e.onRelease(t,r,s)}interruptHotkey(e){this.removeActiveHotkey(e,null,!1)}}const k2=new E8;class Ic{constructor(e,t){this.canvas=e,this.context=t,this.resetStyles()}resetStyles(){this.fillStyle=void 0,this.strokeStyle=void 0,this.lineWidth=void 0,this.lineCap=void 0,this.lineJoin=void 0,this.lineDash=void 0,this.lineDashOffset=void 0,this.miterLimit=void 0,this.font=void 0,this.direction=void 0}setDimensions(e,t){this.canvas.width=e,this.canvas.height=t,this.resetStyles()}setFillStyle(e){e&&ai(e)&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.fillStyle!==e&&(this.fillStyle=e,this.context.fillStyle=e)}setStrokeStyle(e){e&&ai(e)&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.strokeStyle!==e&&(this.strokeStyle=e,this.context.strokeStyle=e)}setLineWidth(e){this.lineWidth!==e&&(this.lineWidth=e,this.context.lineWidth=e)}setLineCap(e){this.lineCap!==e&&(this.lineCap=e,this.context.lineCap=e)}setLineJoin(e){this.lineJoin!==e&&(this.lineJoin=e,this.context.lineJoin=e)}setMiterLimit(e){this.miterLimit!==e&&(this.miterLimit=e,this.context.miterLimit=e)}setLineDash(e){this.lineDash!==e&&(this.lineDash=e,this.context.setLineDash?this.context.setLineDash(e===null?[]:e):this.context.mozDash!==void 0?this.context.mozDash=e:this.context.webkitLineDash!==void 0&&(this.context.webkitLineDash=e||[]))}setLineDashOffset(e){this.lineDashOffset!==e&&(this.lineDashOffset=e,this.context.lineDashOffset!==void 0?this.context.lineDashOffset=e:this.context.webkitLineDashOffset!==void 0&&(this.context.webkitLineDashOffset=e))}setFont(e){this.font!==e&&(this.font=e,this.context.font=e)}setDirection(e){this.direction!==e&&(this.direction=e,this.context.direction=e)}}class V8{constructor(e){this.node=e,this.selfPruned=!1,this.selfInclusive=!1,this.subtreePrunable=!0,this.subtreePickableCount=0,this.mouseInclusiveBounds=pt.NOTHING.copy(),this.mouseExclusiveBounds=pt.NOTHING.copy(),this.touchInclusiveBounds=pt.NOTHING.copy(),this.touchExclusiveBounds=pt.NOTHING.copy(),this.mouseInclusiveDirty=!0,this.mouseExclusiveDirty=!0,this.touchInclusiveDirty=!0,this.touchExclusiveDirty=!0,this.scratchVector=new Oe(0,0)}hitTest(e,t,n){const s=this.selfInclusive;return t?s?this.validateMouseInclusive():this.validateMouseExclusive():n?s?this.validateTouchInclusive():this.validateTouchExclusive():this.node.validateBounds(),this.recursiveHitTest(e,t,n,!1)}recursiveHitTest(e,t,n,s){if(s=s||this.selfInclusive,this.selfPruned||!s&&this.subtreePrunable)return null;let r;if(t?r=s?this.mouseInclusiveBounds:this.mouseExclusiveBounds:n?r=s?this.touchInclusiveBounds:this.touchExclusiveBounds:r=this.node.bounds,!r.containsPoint(e))return null;const a=this.node._transform.getInverse().multiplyVector2(this.scratchVector.set(e)),o=this.node.clipArea;if(o!==null&&!o.containsPoint(a))return null;for(let l=this.node._children.length-1;l>=0;l--){const c=this.node._children[l]._picker.recursiveHitTest(a,t,n,s);if(c)return c.addAncestor(this.node,l)}return t&&this.node._mouseArea?this.node._mouseArea.containsPoint(a)?new Yi(this.node):null:n&&this.node._touchArea?this.node._touchArea.containsPoint(a)?new Yi(this.node):null:this.node.selfBounds.containsPoint(a)&&this.node.containsPointSelf(a)?new Yi(this.node):null}invalidate(e,t){let n=!!t||!this.mouseInclusiveDirty||!this.touchInclusiveDirty;if(this.mouseInclusiveDirty=!0,this.touchInclusiveDirty=!0,e&&(n=n||!this.mouseExclusiveDirty||!this.touchExclusiveDirty,this.mouseExclusiveDirty=!0,this.touchExclusiveDirty=!0),!this.selfPruned&&n){const s=this.node._parents;for(let r=0;r<s.length;r++)s[r]._picker.invalidate(e||this.selfInclusive,!1)}}validateMouseInclusive(){if(!this.mouseInclusiveDirty)return;this.mouseInclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const n=e[t]._picker;n.selfPruned||(n.validateMouseInclusive(),this.mouseInclusiveBounds.includeBounds(n.mouseInclusiveBounds))}this.applyAreasAndTransform(this.mouseInclusiveBounds,this.node._mouseArea),this.mouseInclusiveDirty=!1}validateMouseExclusive(){if(!this.mouseExclusiveDirty)return;this.mouseExclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const n=e[t]._picker;n.subtreePrunable||(n.selfInclusive?(n.validateMouseInclusive(),this.mouseExclusiveBounds.includeBounds(n.mouseInclusiveBounds)):(n.validateMouseExclusive(),this.mouseExclusiveBounds.includeBounds(n.mouseExclusiveBounds)))}this.applyAreasAndTransform(this.mouseExclusiveBounds,this.node._mouseArea),this.mouseExclusiveDirty=!1}validateTouchInclusive(){if(!this.touchInclusiveDirty)return;this.touchInclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const n=e[t]._picker;n.selfPruned||(n.validateTouchInclusive(),this.touchInclusiveBounds.includeBounds(n.touchInclusiveBounds))}this.applyAreasAndTransform(this.touchInclusiveBounds,this.node._touchArea),this.touchInclusiveDirty=!1}validateTouchExclusive(){if(!this.touchExclusiveDirty)return;this.touchExclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const n=e[t]._picker;n.subtreePrunable||(n.selfInclusive?(n.validateTouchInclusive(),this.touchExclusiveBounds.includeBounds(n.touchInclusiveBounds)):(n.validateTouchExclusive(),this.touchExclusiveBounds.includeBounds(n.touchExclusiveBounds)))}this.applyAreasAndTransform(this.touchExclusiveBounds,this.node._touchArea),this.touchExclusiveDirty=!1}applyAreasAndTransform(e,t){t&&e.includeBounds(t instanceof pt?t:t.bounds);const n=this.node.clipArea;if(n){const s=n.bounds;e.minX=Math.max(e.minX,s.minX),e.minY=Math.max(e.minY,s.minY),e.maxX=Math.min(e.maxX,s.maxX),e.maxY=Math.min(e.maxY,s.maxY)}this.node.transformBoundsFromLocalToParent(e)}onInsertChild(e){if(!e._picker.selfPruned){const t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(1),this.invalidate(t,!0)}}onRemoveChild(e){if(!e._picker.selfPruned){const t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(-1),this.invalidate(t,!0)}}onAddInputListener(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(1)}onRemoveInputListener(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(-1)}onPickableChange(e,t){this.checkSelfPruned(),this.checkSelfInclusive(),this.checkSubtreePrunable();const n=(e===!0?-1:0)+(t===!0?1:0);n&&this.changePickableCount(n)}onVisibilityChange(){this.checkSelfPruned(),this.checkSubtreePrunable()}onMouseAreaChange(){this.invalidate(!0)}onTouchAreaChange(){this.invalidate(!0)}onTransformChange(){this.invalidate(!0)}onSelfBoundsDirty(){this.invalidate(!0)}onClipAreaChange(){this.invalidate(!0)}checkSelfPruned(){const e=this.node.pickableProperty.value===!1||!this.node.isVisible();if(this.selfPruned!==e){this.selfPruned=e;const t=this.node._parents;for(let n=0;n<t.length;n++){const s=t[n]._picker;this.subtreePickableCount>0?(s.invalidate(!0,!0),s.changePickableCount(this.selfPruned?-1:1)):s.invalidate(!1,!0)}}}checkSelfInclusive(){const e=this.node.pickableProperty.value===!0||this.node._inputListeners.length>0;this.selfInclusive!==e&&(this.selfInclusive=e,this.invalidate(!0,!0))}checkSubtreePrunable(){const e=this.node.pickableProperty.value===!1||!this.node.isVisible()||this.node.pickableProperty.value!==!0&&this.subtreePickableCount===0;this.subtreePrunable!==e&&(this.subtreePrunable=e,this.invalidate(!0,!0))}changePickableCount(e){if(e===0)return;const t=this.subtreePickableCount===0;this.subtreePickableCount+=e;const n=this.subtreePickableCount===0;if(this.checkSubtreePrunable(),!this.selfPruned&&t!==n){const s=this.node._parents.length;for(let r=0;r<s;r++)this.node._parents[r]._picker.changePickableCount(t?1:-1)}}isPotentiallyPickable(){return!this.subtreePrunable&&this.node.inputEnabled}audit(){}}const mu=[qe.bitmaskCanvas,qe.bitmaskSVG,qe.bitmaskDOM,qe.bitmaskWebGL,qe.bitmaskSingleCanvas,qe.bitmaskSingleSVG,qe.bitmaskNotPainted,qe.bitmaskBoundsValid,qe.bitmaskNoPDOM,qe.bitmaskLacksCanvas,qe.bitmaskLacksSVG,qe.bitmaskLacksDOM,qe.bitmaskLacksWebGL],kI={};mu.forEach((i,e)=>{kI[i]=e});const fc=mu.length;let PS=0;for(let i=0;i<fc;i++)PS|=mu[i];class Ll{constructor(e){this.node=e,this._counts=new Int16Array(fc),this.bitmask=PS,this.selfBitmask=Ll.summaryBitmaskForNodeSelf(e),this.summaryChange(this.bitmask,this.selfBitmask);const t=this.selfChange.bind(this);this.node.filterChangeEmitter.addListener(t),this.node.clipAreaProperty.lazyLink(t),this.node.rendererSummaryRefreshEmitter.addListener(t)}summaryChange(e,t){const n=e^t;let s=0,r=0;for(let a=0;a<fc;a++){const o=mu[a],l=kI[o];o&n&&(o&t?(this._counts[l]--,this._counts[l]===0&&(r|=o)):(this._counts[l]++,this._counts[l]===1&&(s|=o)))}if(s||r){const a=this.bitmask;for(let l=0;l<fc;l++){const h=mu[l];r&h&&(this.bitmask|=h),s&h&&(this.bitmask^=h)}this.node.instanceRefreshEmitter.emit(),this.node.onSummaryChange(a,this.bitmask);const o=this.node._parents.length;for(let l=0;l<o;l++)this.node._parents[l]._rendererSummary.summaryChange(s,r)}}selfChange(){const e=this.selfBitmask,t=Ll.summaryBitmaskForNodeSelf(this.node);e!==t&&(this.summaryChange(e,t),this.selfBitmask=t)}computeBitmask(){let e=0;for(let t=0;t<fc;t++)this._counts[t]===0&&(e|=mu[t]);return e}isSubtreeFullyCompatible(e){return!!(e&this.bitmask)}isSubtreeContainingCompatible(e){return!(e<<qe.bitmaskLacksShift&this.bitmask)}isSingleCanvasSupported(){return!!(qe.bitmaskSingleCanvas&this.bitmask)}isSingleSVGSupported(){return!!(qe.bitmaskSingleSVG&this.bitmask)}isNotPainted(){return!!(qe.bitmaskNotPainted&this.bitmask)}hasNoPDOM(){return!!(qe.bitmaskNoPDOM&this.bitmask)}areBoundsValid(){return!!(qe.bitmaskBoundsValid&this.bitmask)}isSubtreeRenderedExclusivelySVG(e){if(!this.isSingleSVGSupported())return!1;for(let t=0;t<qe.numActiveRenderers;t++){const n=qe.bitmaskOrder(e,t);if(qe.bitmaskSVG&n)return!0;if(this.isSubtreeContainingCompatible(n))return!1}return!1}isSubtreeRenderedExclusivelyCanvas(e){if(!this.isSingleCanvasSupported())return!1;for(let t=0;t<qe.numActiveRenderers;t++){const n=qe.bitmaskOrder(e,t);if(qe.bitmaskCanvas&n)return!0;if(this.isSubtreeContainingCompatible(n))return!1}return!1}audit(){}toString(){let e=Ll.bitmaskToString(this.bitmask);for(let t=0;t<fc;t++){const n=mu[t],s=this._counts[t];s!==0&&(e+=` ${Ll.bitToString(n)}:${s}`)}return e}static summaryBitmaskForNodeSelf(e){let t=e._rendererBitmask;e.isPainted()?t|=(e._rendererBitmask&qe.bitmaskCurrentRendererArea^qe.bitmaskCurrentRendererArea)<<qe.bitmaskLacksShift:t|=qe.bitmaskCurrentRendererArea<<qe.bitmaskLacksShift;const n=e._cssTransform||e._layerSplit,s=e._renderer;return!n&&qe.isSVG(e._rendererBitmask)&&(!s||qe.isSVG(s))&&(t|=qe.bitmaskSingleSVG),!n&&qe.isCanvas(e._rendererBitmask)&&(!s||qe.isCanvas(s))&&(t|=qe.bitmaskSingleCanvas),e.isPainted()||(t|=qe.bitmaskNotPainted),e.areSelfBoundsValid()&&(t|=qe.bitmaskBoundsValid),!e.hasPDOMContent&&!e.hasPDOMOrder()&&(t|=qe.bitmaskNoPDOM),t}static bitToString(e){return e===qe.bitmaskCanvas?"Canvas":e===qe.bitmaskSVG?"SVG":e===qe.bitmaskDOM?"DOM":e===qe.bitmaskWebGL?"WebGL":e===qe.bitmaskLacksCanvas?"(-Canvas)":e===qe.bitmaskLacksSVG?"(-SVG)":e===qe.bitmaskLacksDOM?"(-DOM)":e===qe.bitmaskLacksWebGL?"(-WebGL)":e===qe.bitmaskSingleCanvas?"SingleCanvas":e===qe.bitmaskSingleSVG?"SingleSVG":e===qe.bitmaskNotPainted?"NotPainted":e===qe.bitmaskBoundsValid?"BoundsValid":e===qe.bitmaskNoPDOM?"NotAccessible":"?"}static bitmaskToString(e){let t="";for(let n=0;n<fc;n++){const s=mu[n];e&s&&(t+=`${Ll.bitToString(s)} `)}return t}}Ll.bitmaskAll=PS;let k8=1;const gm=pt.NOTHING.copy(),C8=pt.NOTHING.copy(),nA=new It,sA=rv.TANDEM_NAME,rA="visibleProperty",aA="inputEnabledProperty",CI=!1,zh=["leftTop","centerTop","rightTop","leftCenter","center","rightCenter","leftBottom","centerBottom","rightBottom","left","right","top","bottom","centerX","centerY"],D8=["children","cursor","phetioVisiblePropertyInstrumented","visibleProperty","visible","pickableProperty","pickable","phetioEnabledPropertyInstrumented","enabledProperty","enabled","phetioInputEnabledPropertyInstrumented","inputEnabledProperty","inputEnabled","inputListeners","opacity","disabledOpacity","filters","matrix","translation","x","y","rotation","scale","excludeInvisibleChildrenFromBounds","interruptSubtreeOnInvisible","layoutOptions","localBounds","maxWidth","maxHeight","renderer","layerSplit","usesOpacity","cssTransform","excludeInvisible","webglScale","preventFit","mouseArea","touchArea","clipArea","transformBounds",...zh],Ps={phetioVisiblePropertyInstrumented:!0,visible:!0,opacity:1,disabledOpacity:1,pickable:null,enabled:!0,phetioEnabledPropertyInstrumented:!1,inputEnabled:!0,phetioInputEnabledPropertyInstrumented:!1,clipArea:null,mouseArea:null,touchArea:null,cursor:null,transformBounds:!1,maxWidth:null,maxHeight:null,renderer:null,usesOpacity:!1,layerSplit:!1,cssTransform:!1,excludeInvisible:!1,webglScale:null,preventFit:!1},I8=Ps.renderer===null?0:qe.fromName(Ps.renderer);let Ge=class Uy extends Dr{constructor(e){super(),this._localBoundsOverridden=!1,this._excludeInvisibleChildrenFromBounds=!1,this._interruptSubtreeOnInvisible=!0,this._layoutOptions=null,this._boundsDirty=!0,this._localBoundsDirty=!0,this._selfBoundsDirty=!0,this._childBoundsDirty=!0,this.childrenChangedEmitter=new un,this.childInsertedEmitter=new un,this.childRemovedEmitter=new un,this.childrenReorderedEmitter=new un,this.parentAddedEmitter=new un,this.parentRemovedEmitter=new un,this.transformEmitter=new un,this.instanceRefreshEmitter=new un,this.rendererSummaryRefreshEmitter=new un,this.filterChangeEmitter=new un,this.changedInstanceEmitter=new un,this.rootedDisplayChangedEmitter=new un,this.layoutOptionsChangedEmitter=new un,this._activeParentLayoutConstraint=null,this._isNode=!0,this._id=k8++,this._instances=[],this._rootedDisplays=[],this._drawables=[],this._visibleProperty=new Nl(Ps.visible,Ps.phetioVisiblePropertyInstrumented,this.onVisiblePropertyChange.bind(this)),this.opacityProperty=new oi(Ps.opacity,this.onOpacityPropertyChange.bind(this)),this.disabledOpacityProperty=new oi(Ps.disabledOpacity,this.onDisabledOpacityPropertyChange.bind(this)),this._pickableProperty=new Nl(Ps.pickable,!1,this.onPickablePropertyChange.bind(this)),this._enabledProperty=new Nl(Ps.enabled,Ps.phetioEnabledPropertyInstrumented,this.onEnabledPropertyChange.bind(this)),this._inputEnabledProperty=new Nl(Ps.inputEnabled,Ps.phetioInputEnabledPropertyInstrumented),this.clipAreaProperty=new oi(Ps.clipArea),this.voicingVisibleProperty=new oi(!0),this._mouseArea=Ps.mouseArea,this._touchArea=Ps.touchArea,this._cursor=Ps.cursor,this._children=[],this._parents=[],this._transformBounds=Ps.transformBounds,this._transform=new $r,this._transformListener=this.onTransformChange.bind(this),this._transform.changeEmitter.addListener(this._transformListener),this._maxWidth=Ps.maxWidth,this._maxHeight=Ps.maxHeight,this._appliedScaleFactor=1,this._inputListeners=[],this._renderer=I8,this._usesOpacity=Ps.usesOpacity,this._layerSplit=Ps.layerSplit,this._cssTransform=Ps.cssTransform,this._excludeInvisible=Ps.excludeInvisible,this._webglScale=Ps.webglScale,this._preventFit=Ps.preventFit,this.inputEnabledProperty.lazyLink(this.pdomBoundInputEnabledListener);const t=this.onBoundsListenersAddedOrRemoved.bind(this),n=this.validateBounds.bind(this),s=this.validateSelfBounds.bind(this);this.boundsProperty=new cy(pt.NOTHING.copy(),n),this.boundsProperty.changeCount=t,this.localBoundsProperty=new cy(pt.NOTHING.copy(),n),this.localBoundsProperty.changeCount=t,this.childBoundsProperty=new cy(pt.NOTHING.copy(),n),this.childBoundsProperty.changeCount=t,this.selfBoundsProperty=new cy(pt.NOTHING.copy(),s),this._filters=[],this._rendererBitmask=qe.bitmaskNodeDefault,this._rendererSummary=new Ll(this),this._boundsEventCount=0,this._boundsEventSelfCount=0,this._picker=new V8(this),this._isGettingRemovedFromParent=!1,e&&this.mutate(e)}insertChild(e,t,n){return this._picker.onInsertChild(t),this.changeBoundsEventCount(t._boundsEventCount>0?1:0),this._rendererSummary.summaryChange(Ll.bitmaskAll,t._rendererSummary.bitmask),t._parents.push(this),this._children.splice(e,0,t),t._rendererSummary.hasNoPDOM()||this.onPDOMAddChild(t),t.invalidateBounds(),this._boundsDirty=!0,this.childInsertedEmitter.emit(t,e),t.parentAddedEmitter.emit(this),!n&&this.childrenChangedEmitter.emit(),this}addChild(e,t){return this.insertChild(this._children.length,e,t),this}removeChild(e,t){const n=ie.indexOf(this._children,e);return this.removeChildWithIndex(e,n,t),this}removeChildAt(e,t){const n=this._children[e];return this.removeChildWithIndex(n,e,t),this}removeChildWithIndex(e,t,n){const s=ie.indexOf(e._parents,this);e._isGettingRemovedFromParent=!0,e._rendererSummary.hasNoPDOM()||this.onPDOMRemoveChild(e),this._picker.onRemoveChild(e),this.changeBoundsEventCount(e._boundsEventCount>0?-1:0),this._rendererSummary.summaryChange(e._rendererSummary.bitmask,Ll.bitmaskAll),e._parents.splice(s,1),this._children.splice(t,1),e._isGettingRemovedFromParent=!1,this.invalidateBounds(),this._childBoundsDirty=!0,this.childRemovedEmitter.emit(e,t),e.parentRemovedEmitter.emit(this),!n&&this.childrenChangedEmitter.emit()}moveChildToIndex(e,t){const n=this.indexOfChild(e);return this._children[t]!==e&&(this._children.splice(n,1),this._children.splice(t,0,e),this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(Math.min(n,t),Math.max(n,t)),this.childrenChangedEmitter.emit()),this}removeAllChildren(){return this.setChildren([]),this}setChildren(e){const t=[],n=[],s=[];let r;for(Cc(e,this._children,n,t,s),r=t.length-1;r>=0;r--)this.removeChild(t[r],!0);let a=-1,o=-1;for(r=0;r<s.length;r++){const h=s[r];this._children[r]!==h&&(this._children[r]=h,a===-1&&(a=r),o=r)}const l=a!==-1;if(l&&(this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(a,o)),n.length){let h=0,c=n[h];for(r=0;r<e.length;r++)e[r]===c&&(this.insertChild(r,c,!0),c=n[++h])}return(t.length!==0||n.length!==0||l)&&this.childrenChangedEmitter.emit(),this}set children(e){this.setChildren(e)}get children(){return this.getChildren()}getChildren(){return this._children.slice(0)}getChildrenCount(){return this._children.length}getParents(){return this._parents.slice(0)}get parents(){return this.getParents()}getParent(){return this._parents.length?this._parents[0]:null}get parent(){return this.getParent()}getChildAt(e){return this._children[e]}indexOfParent(e){return ie.indexOf(this._parents,e)}indexOfChild(e){return ie.indexOf(this._children,e)}moveToFront(){return ie.each(this.parents,e=>e.moveChildToFront(this)),this}moveChildToFront(e){return this.moveChildToIndex(e,this._children.length-1)}moveForward(){return this.parents.forEach(e=>e.moveChildForward(this)),this}moveChildForward(e){const t=this.indexOfChild(e);return t<this.getChildrenCount()-1&&this.moveChildToIndex(e,t+1),this}moveBackward(){return this.parents.forEach(e=>e.moveChildBackward(this)),this}moveChildBackward(e){const t=this.indexOfChild(e);return t>0&&this.moveChildToIndex(e,t-1),this}moveToBack(){return ie.each(this.parents,e=>e.moveChildToBack(this)),this}moveChildToBack(e){return this.moveChildToIndex(e,0)}replaceChild(e,t){const n=this.indexOfChild(e),s=e.focused;return this.removeChild(e,!0),this.insertChild(n,t,!0),this.childrenChangedEmitter.emit(),s&&t.focusable&&t.focus(),this}detach(){return ie.each(this._parents.slice(0),e=>e.removeChild(this)),this}changeBoundsEventCount(e){if(e!==0){const t=this._boundsEventCount===0;this._boundsEventCount+=e;const n=this._boundsEventCount===0;if(t!==n){const s=t?1:-1,r=this._parents.length;for(let a=0;a<r;a++)this._parents[a].changeBoundsEventCount(s)}}}validateSelfBounds(){if(this._selfBoundsDirty){const e=gm.set(this.selfBoundsProperty._value),t=this.updateSelfBounds();return this._selfBoundsDirty=!1,t&&this.selfBoundsProperty.notifyListeners(e),!0}return!1}validateBounds(){let e,n=this.validateSelfBounds();const s=this.childBoundsProperty._value,r=this.localBoundsProperty._value,a=this.selfBoundsProperty._value,o=this.boundsProperty._value;if(this._childBoundsDirty){n=!0;let l=!0;for(;l;)for(l=!1,e=this._children.length;e--;){const c=this._children[e];c&&(l=c.validateBounds()||l)}const h=gm.set(s);for(s.set(pt.NOTHING),e=this._children.length;e--;){const c=this._children[e];(c&&!this._excludeInvisibleChildrenFromBounds||c.isVisible())&&s.includeBounds(c.bounds)}this._childBoundsDirty=!1,s.equals(h)||s.equalsEpsilon(h,1e-13)||this.childBoundsProperty.notifyListeners(h)}if(this._localBoundsDirty){n=!0,this._localBoundsDirty=!1;const l=gm.set(r);if(!this._localBoundsOverridden){r.set(a).includeBounds(s);const h=this.clipArea;h&&r.constrainBounds(h.bounds)}(this._maxWidth!==null||this._maxHeight!==null)&&this.updateMaxDimension(r),r.equals(l)||(this._boundsDirty=!0,r.equalsEpsilon(l,1e-13)||this.localBoundsProperty.notifyListeners(l))}if(this._boundsDirty){n=!0,this._boundsDirty=!1;const l=gm.set(o);if(this._transformBounds&&!this._transform.getMatrix().isAxisAligned()){const h=nA.set(this.getMatrix());o.set(pt.NOTHING),this._includeTransformedSubtreeBounds(h,o);const c=this.clipArea;c&&o.constrainBounds(c.getBoundsWithTransform(h))}else o.set(r),this.transformBoundsFromLocalToParent(o);if(!o.equals(l)){for(e=this._parents.length;e--;)this._parents[e].invalidateBounds();o.equalsEpsilon(l,1e-13)||this.boundsProperty.notifyListeners(l)}}return(this._childBoundsDirty||this._boundsDirty)&&this.validateBounds(),n}_includeTransformedSubtreeBounds(e,t){this.selfBounds.isEmpty()||t.includeBounds(this.getTransformedSelfBounds(e));const n=this._children.length;for(let s=0;s<n;s++){const r=this._children[s];e.multiplyMatrix(r._transform.getMatrix()),r._includeTransformedSubtreeBounds(e,t),e.multiplyMatrix(r._transform.getInverse())}return t}validateWatchedBounds(){for(;this.watchedBoundsScan(););}watchedBoundsScan(){if(this._boundsEventSelfCount!==0)return this.validateBounds();if(this._boundsEventCount>0&&this._childBoundsDirty){let e=!1;const t=this._children.length;for(let n=0;n<t;n++)e=this._children[n].watchedBoundsScan()||e;return e}else return!1}invalidateBounds(){this._boundsDirty=!0,this._localBoundsDirty=!0;let e=this._parents.length;for(;e--;)this._parents[e].invalidateChildBounds()}invalidateChildBounds(){if(!this._childBoundsDirty){this._childBoundsDirty=!0,this._localBoundsDirty=!0;let e=this._parents.length;for(;e--;)this._parents[e].invalidateChildBounds()}}invalidateSelf(e){const t=this.selfBoundsProperty._value;if(!e)this._selfBoundsDirty=!0,this.invalidateBounds(),this._picker.onSelfBoundsDirty();else if(this._selfBoundsDirty=!1,!t.equals(e)){const n=gm.set(t);this.invalidateBounds(),this._picker.onSelfBoundsDirty(),t.set(e),this.selfBoundsProperty.notifyListeners(n)}}updateSelfBounds(){return!1}hasChild(e){return ie.includes(this._children,e)}getSelfShape(){return this.selfBounds.isEmpty()?new zt:zt.bounds(this.selfBounds)}getSelfBounds(){return this.selfBoundsProperty.value}get selfBounds(){return this.getSelfBounds()}getSafeSelfBounds(){return this.selfBoundsProperty.value}get safeSelfBounds(){return this.getSafeSelfBounds()}getChildBounds(){return this.childBoundsProperty.value}get childBounds(){return this.getChildBounds()}getLocalBounds(){return this.localBoundsProperty.value}get localBounds(){return this.getLocalBounds()}set localBounds(e){this.setLocalBounds(e)}get localBoundsOverridden(){return this._localBoundsOverridden}setLocalBounds(e){const t=this.localBoundsProperty._value,n=t.copy();if(e===null)this._localBoundsOverridden&&(this._localBoundsOverridden=!1,this.localBoundsProperty.notifyListeners(n),this.invalidateBounds());else{const s=!e.equals(t)||!this._localBoundsOverridden;s&&t.set(e),this._localBoundsOverridden||(this._localBoundsOverridden=!0),s&&(this.localBoundsProperty.notifyListeners(n),this.invalidateBounds())}return this}getTransformedSelfBounds(e){return this.selfBounds.transformed(e)}getTransformedSafeSelfBounds(e){return this.safeSelfBounds.transformed(e)}getSafeTransformedVisibleBounds(e){const t=(e||It.IDENTITY).timesMatrix(this.matrix),n=pt.NOTHING.copy();if(this.visibleProperty.value&&(this.selfBounds.isEmpty()||n.includeBounds(this.getTransformedSafeSelfBounds(t)),this._children.length))for(let s=0;s<this._children.length;s++)n.includeBounds(this._children[s].getSafeTransformedVisibleBounds(t));return n}get safeTransformedVisibleBounds(){return this.getSafeTransformedVisibleBounds()}setTransformBounds(e){return this._transformBounds!==e&&(this._transformBounds=e,this.invalidateBounds()),this}set transformBounds(e){this.setTransformBounds(e)}get transformBounds(){return this.getTransformBounds()}getTransformBounds(){return this._transformBounds}getBounds(){return this.boundsProperty.value}get bounds(){return this.getBounds()}getVisibleLocalBounds(){const e=this.selfBounds.copy();let t=this._children.length;for(;t--;)e.includeBounds(this._children[t].getVisibleBounds());const n=this.clipArea;return n&&e.constrainBounds(n.bounds),e}get visibleLocalBounds(){return this.getVisibleLocalBounds()}getVisibleBounds(){return this.isVisible()?this.getVisibleLocalBounds().transform(this.getMatrix()):pt.NOTHING}get visibleBounds(){return this.getVisibleBounds()}hitTest(e,t,n){return this._picker.hitTest(e,!!t,!!n)}trailUnderPointer(e){return e.point===null?null:this.hitTest(e.point,e.type==="mouse",e.isTouchLike())}containsPoint(e){return this.hitTest(e)!==null}containsPointSelf(e){return this.selfBounds.containsPoint(e)}intersectsBoundsSelf(e){return this.selfBounds.intersectsBounds(e)}isPhetioMouseHittable(e){return this.pickable===!1&&!this.isAnyDescendantAPhetioMouseHitTarget()?!1:this.visible&&(this.clipArea===null||this.clipArea.containsPoint(this._transform.getInverse().timesVector2(e)))}isAnyDescendantAPhetioMouseHitTarget(){return this.getPhetioMouseHitTarget()!=="phetioNotSelectable"||ie.some(this.children,e=>e.isAnyDescendantAPhetioMouseHitTarget())}getPhetioMouseHit(e){if(!this.isPhetioMouseHittable(e))return null;const t=this._transform.getInverse().timesVector2(e);let n=null;for(let s=this._children.length-1;s>=0;s--){const r=this._children[s].getPhetioMouseHit(t);if(r instanceof rn)return r;r==="phetioNotSelectable"&&(n=!0)}return n?this.getPhetioMouseHitTarget():this._mouseArea?this._mouseArea.containsPoint(t)?this.getPhetioMouseHitTarget():null:this.selfBounds.containsPoint(t)&&this.containsPointSelf(t)?this.getPhetioMouseHitTarget():null}isPainted(){return!1}areSelfBoundsValid(){return!0}hasParent(){return this._parents.length!==0}hasChildren(){return this._children.length>0}isChildIncludedInLayout(e){return e.bounds.isValid()&&(!this._excludeInvisibleChildrenFromBounds||e.visible)}walkDepthFirst(e){e(this);const t=this._children.length;for(let n=0;n<t;n++)this._children[n].walkDepthFirst(e)}addInputListener(e,t){return ie.includes(this._inputListeners,e)||(this._inputListeners.push(e),this._picker.onAddInputListener(),e.hotkeys&&k2.updateHotkeysFromInputListenerChange(this),t?.disposer&&this.addDisposerAction("inputListener",e,t.disposer,()=>this.removeInputListener(e))),this}removeInputListener(e){const t=ie.indexOf(this._inputListeners,e);return t>=0&&(this._inputListeners.splice(t,1),this._picker.onRemoveInputListener(),e.hotkeys&&k2.updateHotkeysFromInputListenerChange(this),this.removeDisposerAction("inputListener",e)),this}hasInputListener(e){for(let t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}interruptInput(){const e=this.inputListeners;for(let t=0;t<e.length;t++){const n=e[t];n.interrupt&&n.interrupt()}return this}interruptSubtreeInput(){this.interruptInput();const e=this._children.slice();for(let t=0;t<e.length;t++){const n=e[t];n._picker.isPotentiallyPickable()&&n.interruptSubtreeInput()}return this}translate(e,t,n){if(typeof e=="number"){if(Math.abs(e)<1e-12&&Math.abs(t)<1e-12)return;n?this.prependTranslation(e,t):this.appendMatrix(nA.setToTranslation(e,t))}else{const s=e;if(!s.x&&!s.y)return;this.translate(s.x,s.y,t)}}scale(e,t,n){if(typeof e=="number")if(t===void 0||typeof t=="boolean")this.scale(e,e,t);else{if(e===1&&t===1)return;n?this.prependMatrix(It.scaling(e,t)):this.appendMatrix(It.scaling(e,t))}else{const s=e;this.scale(s.x,s.y,t)}}rotate(e,t){e%(2*Math.PI)!==0&&(t?this.prependMatrix(It.rotation2(e)):this.appendMatrix(It.rotation2(e)))}rotateAround(e,t){let n=It.translation(-e.x,-e.y);return n=It.rotation2(t).timesMatrix(n),n=It.translation(e.x,e.y).timesMatrix(n),this.prependMatrix(n),this}setX(e){return this.translate(e-this.getX(),0,!0),this}set x(e){this.setX(e)}get x(){return this.getX()}getX(){return this._transform.getMatrix().m02()}setY(e){return this.translate(0,e-this.getY(),!0),this}set y(e){this.setY(e)}get y(){return this.getY()}getY(){return this._transform.getMatrix().m12()}setScaleMagnitude(e,t){const n=this.getScaleVector();return typeof e=="number"?(t===void 0&&(t=e),this.appendMatrix(It.scaling(e/n.x,t/n.y))):this.appendMatrix(It.scaling(e.x/n.x,e.y/n.y)),this}getScaleVector(){return this._transform.getMatrix().getScaleVector()}setRotation(e){return this.appendMatrix(nA.setToRotationZ(e-this.getRotation())),this}set rotation(e){this.setRotation(e)}get rotation(){return this.getRotation()}getRotation(){return this._transform.getMatrix().getRotation()}setTranslation(e,t){const n=this._transform.getMatrix(),s=n.m02(),r=n.m12();let a,o;return typeof e=="number"?(a=e-s,o=t-r):(a=e.x-s,o=e.y-r),this.translate(a,o,!0),this}set translation(e){this.setTranslation(e)}get translation(){return this.getTranslation()}getTranslation(){const e=this._transform.getMatrix();return new Oe(e.m02(),e.m12())}appendMatrix(e){this._transform.append(e)}prependMatrix(e){this._transform.prepend(e)}prependTranslation(e,t){!e&&!t||this._transform.prependTranslation(e,t)}setMatrix(e){this._transform.setMatrix(e)}set matrix(e){this.setMatrix(e)}get matrix(){return this.getMatrix()}getMatrix(){return this._transform.getMatrix()}getTransform(){return this._transform}get transform(){return this.getTransform()}resetTransform(){this.setMatrix(It.IDENTITY)}onTransformChange(){this.invalidateBounds(),this._picker.onTransformChange(),this.transformEmitter.emit()}onSummaryChange(e,t){this._pdomDisplaysInfo.onSummaryChange(e,t)}updateMaxDimension(e){const t=this._appliedScaleFactor;let n=1;if(this._maxWidth!==null){const r=e.width;r>this._maxWidth&&(n=Math.min(n,this._maxWidth/r))}if(this._maxHeight!==null){const r=e.height;r>this._maxHeight&&(n=Math.min(n,this._maxHeight/r))}const s=n/t;s!==1&&(this._appliedScaleFactor=n,this.scale(s))}auditMaxDimensions(){}onMaxDimensionChange(e,t){e===null&&t!==null?(this.changeBoundsEventCount(1),this._boundsEventSelfCount++):e!==null&&t===null&&(this.changeBoundsEventCount(-1),this._boundsEventSelfCount--)}setMaxWidth(e){this._maxWidth!==e&&(this.onMaxDimensionChange(this._maxWidth,e),this._maxWidth=e,this.updateMaxDimension(this.localBoundsProperty.value))}set maxWidth(e){this.setMaxWidth(e)}get maxWidth(){return this.getMaxWidth()}getMaxWidth(){return this._maxWidth}setMaxHeight(e){this._maxHeight!==e&&(this.onMaxDimensionChange(this._maxHeight,e),this._maxHeight=e,this.updateMaxDimension(this.localBoundsProperty.value))}set maxHeight(e){this.setMaxHeight(e)}get maxHeight(){return this.getMaxHeight()}getMaxHeight(){return this._maxHeight}setLeft(e){const t=this.getLeft();return isFinite(t)&&this.translate(e-t,0,!0),this}set left(e){this.setLeft(e)}get left(){return this.getLeft()}getLeft(){return this.getBounds().minX}setRight(e){const t=this.getRight();return isFinite(t)&&this.translate(e-t,0,!0),this}set right(e){this.setRight(e)}get right(){return this.getRight()}getRight(){return this.getBounds().maxX}setCenterX(e){const t=this.getCenterX();return isFinite(t)&&this.translate(e-t,0,!0),this}set centerX(e){this.setCenterX(e)}get centerX(){return this.getCenterX()}getCenterX(){return this.getBounds().getCenterX()}setCenterY(e){const t=this.getCenterY();return isFinite(t)&&this.translate(0,e-t,!0),this}set centerY(e){this.setCenterY(e)}get centerY(){return this.getCenterY()}getCenterY(){return this.getBounds().getCenterY()}setTop(e){const t=this.getTop();return isFinite(t)&&this.translate(0,e-t,!0),this}set top(e){this.setTop(e)}get top(){return this.getTop()}getTop(){return this.getBounds().minY}setBottom(e){const t=this.getBottom();return isFinite(t)&&this.translate(0,e-t,!0),this}set bottom(e){this.setBottom(e)}get bottom(){return this.getBottom()}getBottom(){return this.getBounds().maxY}setLeftTop(e){const t=this.getLeftTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftTop(e){this.setLeftTop(e)}get leftTop(){return this.getLeftTop()}getLeftTop(){return this.getBounds().getLeftTop()}setCenterTop(e){const t=this.getCenterTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set centerTop(e){this.setCenterTop(e)}get centerTop(){return this.getCenterTop()}getCenterTop(){return this.getBounds().getCenterTop()}setRightTop(e){const t=this.getRightTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightTop(e){this.setRightTop(e)}get rightTop(){return this.getRightTop()}getRightTop(){return this.getBounds().getRightTop()}setLeftCenter(e){const t=this.getLeftCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftCenter(e){this.setLeftCenter(e)}get leftCenter(){return this.getLeftCenter()}getLeftCenter(){return this.getBounds().getLeftCenter()}setCenter(e){const t=this.getCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this.getBounds().getCenter()}setRightCenter(e){const t=this.getRightCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightCenter(e){this.setRightCenter(e)}get rightCenter(){return this.getRightCenter()}getRightCenter(){return this.getBounds().getRightCenter()}setLeftBottom(e){const t=this.getLeftBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftBottom(e){this.setLeftBottom(e)}get leftBottom(){return this.getLeftBottom()}getLeftBottom(){return this.getBounds().getLeftBottom()}setCenterBottom(e){const t=this.getCenterBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set centerBottom(e){this.setCenterBottom(e)}get centerBottom(){return this.getCenterBottom()}getCenterBottom(){return this.getBounds().getCenterBottom()}setRightBottom(e){const t=this.getRightBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightBottom(e){this.setRightBottom(e)}get rightBottom(){return this.getRightBottom()}getRightBottom(){return this.getBounds().getRightBottom()}getWidth(){return this.getBounds().getWidth()}get width(){return this.getWidth()}getHeight(){return this.getBounds().getHeight()}get height(){return this.getHeight()}getLocalWidth(){return this.getLocalBounds().getWidth()}get localWidth(){return this.getLocalWidth()}getLocalHeight(){return this.getLocalBounds().getHeight()}get localHeight(){return this.getLocalHeight()}getLocalLeft(){return this.getLocalBounds().minX}get localLeft(){return this.getLocalLeft()}getLocalRight(){return this.getLocalBounds().maxX}get localRight(){return this.getLocalRight()}getLocalCenterX(){return this.getLocalBounds().getCenterX()}get localCenterX(){return this.getLocalCenterX()}getLocalCenterY(){return this.getLocalBounds().getCenterY()}get localCenterY(){return this.getLocalCenterY()}getLocalTop(){return this.getLocalBounds().minY}get localTop(){return this.getLocalTop()}getLocalBottom(){return this.getLocalBounds().maxY}get localBottom(){return this.getLocalBottom()}getLocalLeftTop(){return this.getLocalBounds().getLeftTop()}get localLeftTop(){return this.getLocalLeftTop()}getLocalCenterTop(){return this.getLocalBounds().getCenterTop()}get localCenterTop(){return this.getLocalCenterTop()}getLocalRightTop(){return this.getLocalBounds().getRightTop()}get localRightTop(){return this.getLocalRightTop()}getLocalLeftCenter(){return this.getLocalBounds().getLeftCenter()}get localLeftCenter(){return this.getLocalLeftCenter()}getLocalCenter(){return this.getLocalBounds().getCenter()}get localCenter(){return this.getLocalCenter()}getLocalRightCenter(){return this.getLocalBounds().getRightCenter()}get localRightCenter(){return this.getLocalRightCenter()}getLocalLeftBottom(){return this.getLocalBounds().getLeftBottom()}get localLeftBottom(){return this.getLocalLeftBottom()}getLocalCenterBottom(){return this.getLocalBounds().getCenterBottom()}get localCenterBottom(){return this.getLocalCenterBottom()}getLocalRightBottom(){return this.getLocalBounds().getRightBottom()}get localRightBottom(){return this.getLocalRightBottom()}getId(){return this._id}get id(){return this.getId()}onVisiblePropertyChange(e){!e&&this._interruptSubtreeOnInvisible&&this.interruptSubtreeInput(),this._picker.onVisibilityChange(),this._pdomDisplaysInfo.onVisibilityChange(e);for(let t=0;t<this._parents.length;t++){const n=this._parents[t];n._excludeInvisibleChildrenFromBounds&&n.invalidateChildBounds()}}setVisibleProperty(e){return this._visibleProperty.setTargetProperty(e,this,rA)}set visibleProperty(e){this.setVisibleProperty(e)}get visibleProperty(){return this.getVisibleProperty()}getVisibleProperty(){return this._visibleProperty}setVisible(e){return this.visibleProperty.set(e),this}set visible(e){this.setVisible(e)}get visible(){return this.isVisible()}isVisible(){return this.visibleProperty.value}setPhetioVisiblePropertyInstrumented(e){return this._visibleProperty.setTargetPropertyInstrumented(e,this)}set phetioVisiblePropertyInstrumented(e){this.setPhetioVisiblePropertyInstrumented(e)}get phetioVisiblePropertyInstrumented(){return this.getPhetioVisiblePropertyInstrumented()}getPhetioVisiblePropertyInstrumented(){return this._visibleProperty.getTargetPropertyInstrumented()}swapVisibility(e){const t=this.visible?this:e,n=this.visible?e:this,s=t.focused;return t.visible=!1,n.visible=!0,s&&n.focusable&&n.focus(),this}setOpacity(e){if(e<0||e>1)throw new Error(`opacity out of range: ${e}`);this.opacityProperty.value=e}set opacity(e){this.setOpacity(e)}get opacity(){return this.getOpacity()}getOpacity(){return this.opacityProperty.value}setDisabledOpacity(e){if(e<0||e>1)throw new Error(`disabledOpacity out of range: ${e}`);return this.disabledOpacityProperty.value=e,this}set disabledOpacity(e){this.setDisabledOpacity(e)}get disabledOpacity(){return this.getDisabledOpacity()}getDisabledOpacity(){return this.disabledOpacityProperty.value}getEffectiveOpacity(){return this.opacityProperty.value*(this.enabledProperty.value?1:this.disabledOpacityProperty.value)}get effectiveOpacity(){return this.getEffectiveOpacity()}onOpacityPropertyChange(){this.filterChangeEmitter.emit()}onDisabledOpacityPropertyChange(){this._enabledProperty.value||this.filterChangeEmitter.emit()}setFilters(e){this._filters.length=0,this._filters.push(...e),this.invalidateHint(),this.filterChangeEmitter.emit()}set filters(e){this.setFilters(e)}get filters(){return this.getFilters()}getFilters(){return this._filters.slice()}setPickableProperty(e){return this._pickableProperty.setTargetProperty(e,this,null)}set pickableProperty(e){this.setPickableProperty(e)}get pickableProperty(){return this.getPickableProperty()}getPickableProperty(){return this._pickableProperty}setPickable(e){return this._pickableProperty.set(e),this}set pickable(e){this.setPickable(e)}get pickable(){return this.isPickable()}isPickable(){return this._pickableProperty.value}onPickablePropertyChange(e,t){this._picker.onPickableChange(t,e)}setEnabledProperty(e){return this._enabledProperty.setTargetProperty(e,this,sA)}set enabledProperty(e){this.setEnabledProperty(e)}get enabledProperty(){return this.getEnabledProperty()}getEnabledProperty(){return this._enabledProperty}setPhetioEnabledPropertyInstrumented(e){return this._enabledProperty.setTargetPropertyInstrumented(e,this)}set phetioEnabledPropertyInstrumented(e){this.setPhetioEnabledPropertyInstrumented(e)}get phetioEnabledPropertyInstrumented(){return this.getPhetioEnabledPropertyInstrumented()}getPhetioEnabledPropertyInstrumented(){return this._enabledProperty.getTargetPropertyInstrumented()}setEnabled(e){return this._enabledProperty.set(e),this}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabledProperty.value}onEnabledPropertyChange(e){!e&&this.interruptSubtreeInput(),this.inputEnabledProperty.isSettable()&&(this.inputEnabled=e),this.disabledOpacityProperty.value!==1&&this.filterChangeEmitter.emit()}setInputEnabledProperty(e){return this._inputEnabledProperty.setTargetProperty(e,this,aA)}set inputEnabledProperty(e){this.setInputEnabledProperty(e)}get inputEnabledProperty(){return this.getInputEnabledProperty()}getInputEnabledProperty(){return this._inputEnabledProperty}setPhetioInputEnabledPropertyInstrumented(e){return this._inputEnabledProperty.setTargetPropertyInstrumented(e,this)}set phetioInputEnabledPropertyInstrumented(e){this.setPhetioInputEnabledPropertyInstrumented(e)}get phetioInputEnabledPropertyInstrumented(){return this.getPhetioInputEnabledPropertyInstrumented()}getPhetioInputEnabledPropertyInstrumented(){return this._inputEnabledProperty.getTargetPropertyInstrumented()}setInputEnabled(e){this.inputEnabledProperty.value=e}set inputEnabled(e){this.setInputEnabled(e)}get inputEnabled(){return this.isInputEnabled()}isInputEnabled(){return this.inputEnabledProperty.value}setInputListeners(e){for(;this._inputListeners.length;)this.removeInputListener(this._inputListeners[0]);for(let t=0;t<e.length;t++)this.addInputListener(e[t]);return this}set inputListeners(e){this.setInputListeners(e)}get inputListeners(){return this.getInputListeners()}getInputListeners(){return this._inputListeners.slice(0)}setCursor(e){this._cursor=e==="auto"?null:e}set cursor(e){this.setCursor(e)}get cursor(){return this.getCursor()}getCursor(){return this._cursor}getEffectiveCursor(){if(this._cursor)return this._cursor;for(let e=0;e<this._inputListeners.length;e++){const t=this._inputListeners[e];if(t.cursor)return t.cursor}return null}setMouseArea(e){return this._mouseArea!==e&&(this._mouseArea=e,this._picker.onMouseAreaChange()),this}set mouseArea(e){this.setMouseArea(e)}get mouseArea(){return this.getMouseArea()}getMouseArea(){return this._mouseArea}setTouchArea(e){return this._touchArea!==e&&(this._touchArea=e,this._picker.onTouchAreaChange()),this}set touchArea(e){this.setTouchArea(e)}get touchArea(){return this.getTouchArea()}getTouchArea(){return this._touchArea}setClipArea(e){this.clipArea!==e&&(this.clipAreaProperty.value=e,this.invalidateBounds(),this._picker.onClipAreaChange())}set clipArea(e){this.setClipArea(e)}get clipArea(){return this.getClipArea()}getClipArea(){return this.clipAreaProperty.value}hasClipArea(){return this.clipArea!==null}setRendererBitmask(e){e!==this._rendererBitmask&&(this._rendererBitmask=e,this._rendererSummary.selfChange(),this.instanceRefreshEmitter.emit())}invalidateSupportedRenderers(){}invalidateHint(){this.rendererSummaryRefreshEmitter.emit(),this.instanceRefreshEmitter.emit()}setRenderer(e){let t=0;e==="canvas"?t=qe.bitmaskCanvas:e==="svg"?t=qe.bitmaskSVG:e==="dom"?t=qe.bitmaskDOM:e==="webgl"&&(t=qe.bitmaskWebGL),this._renderer!==t&&(this._renderer=t,this.invalidateHint())}set renderer(e){this.setRenderer(e)}get renderer(){return this.getRenderer()}getRenderer(){return this._renderer===0?null:this._renderer===qe.bitmaskCanvas?"canvas":this._renderer===qe.bitmaskSVG?"svg":this._renderer===qe.bitmaskDOM?"dom":this._renderer===qe.bitmaskWebGL?"webgl":null}setLayerSplit(e){e!==this._layerSplit&&(this._layerSplit=e,this.invalidateHint())}set layerSplit(e){this.setLayerSplit(e)}get layerSplit(){return this.isLayerSplit()}isLayerSplit(){return this._layerSplit}setUsesOpacity(e){e!==this._usesOpacity&&(this._usesOpacity=e,this.invalidateHint())}set usesOpacity(e){this.setUsesOpacity(e)}get usesOpacity(){return this.getUsesOpacity()}getUsesOpacity(){return this._usesOpacity}setCSSTransform(e){e!==this._cssTransform&&(this._cssTransform=e,this.invalidateHint())}set cssTransform(e){this.setCSSTransform(e)}get cssTransform(){return this.isCSSTransformed()}isCSSTransformed(){return this._cssTransform}setExcludeInvisible(e){e!==this._excludeInvisible&&(this._excludeInvisible=e,this.invalidateHint())}set excludeInvisible(e){this.setExcludeInvisible(e)}get excludeInvisible(){return this.isExcludeInvisible()}isExcludeInvisible(){return this._excludeInvisible}setExcludeInvisibleChildrenFromBounds(e){e!==this._excludeInvisibleChildrenFromBounds&&(this._excludeInvisibleChildrenFromBounds=e,this.invalidateBounds())}set excludeInvisibleChildrenFromBounds(e){this.setExcludeInvisibleChildrenFromBounds(e)}get excludeInvisibleChildrenFromBounds(){return this.isExcludeInvisibleChildrenFromBounds()}isExcludeInvisibleChildrenFromBounds(){return this._excludeInvisibleChildrenFromBounds}setInterruptSubtreeOnInvisible(e){e!==this._interruptSubtreeOnInvisible&&(this._interruptSubtreeOnInvisible=e)}set interruptSubtreeOnInvisible(e){this.setInterruptSubtreeOnInvisible(e)}get interruptSubtreeOnInvisible(){return this.isInterruptSubtreeOnInvisible()}isInterruptSubtreeOnInvisible(){return this._interruptSubtreeOnInvisible}setLayoutOptions(e){e!==this._layoutOptions&&(this._layoutOptions=e,this.layoutOptionsChangedEmitter.emit())}set layoutOptions(e){this.setLayoutOptions(e)}get layoutOptions(){return this.getLayoutOptions()}getLayoutOptions(){return this._layoutOptions}mutateLayoutOptions(e){this.layoutOptions=so()({},this.layoutOptions||{},e)}get widthSizable(){return!1}get heightSizable(){return!1}get extendsWidthSizable(){return!1}get extendsHeightSizable(){return!1}get extendsSizable(){return!1}setPreventFit(e){e!==this._preventFit&&(this._preventFit=e,this.invalidateHint())}set preventFit(e){this.setPreventFit(e)}get preventFit(){return this.isPreventFit()}isPreventFit(){return this._preventFit}setWebGLScale(e){e!==this._webglScale&&(this._webglScale=e,this.invalidateHint())}set webglScale(e){this.setWebGLScale(e)}get webglScale(){return this.getWebGLScale()}getWebGLScale(){return this._webglScale}getUniqueTrail(e){if(e)return this.getTrails(e)[0];{const t=new Yi;let n=this;for(;n;)t.addAncestor(n),n=n._parents[0];return t}}getUniqueTrailTo(e){return this.getUniqueTrail(t=>e===t)}getTrails(e){e=e||Uy.defaultTrailPredicate;const t=[],n=new Yi(this);return Yi.appendAncestorTrailsWithPredicate(t,n,e),t}getTrailsTo(e){return this.getTrails(t=>t===e)}getLeafTrails(e){e=e||Uy.defaultLeafTrailPredicate;const t=[],n=new Yi(this);return Yi.appendDescendantTrailsWithPredicate(t,n,e),t}getLeafTrailsTo(e){return this.getLeafTrails(t=>t===e)}getUniqueLeafTrail(e){return this.getLeafTrails(e)[0]}getUniqueLeafTrailTo(e){return this.getUniqueLeafTrail(t=>t===e)}getConnectedNodes(){const e=[];let t=this._children.concat(this._parents).concat(this);for(;t.length;){const n=t.pop();ie.includes(e,n)||(e.push(n),t=t.concat(n._children,n._parents))}return e}getSubtreeNodes(){const e=[];let t=this._children.concat(this);for(;t.length;){const n=t.pop();ie.includes(e,n)||(e.push(n),t=t.concat(n._children))}return e}getTopologicallySortedNodes(){const e={},t=[],n=[];let s;ie.each(this.getConnectedNodes(),a=>{e[a.id]={},ie.each(a._children,o=>{e[a.id][o.id]=!0}),a.parents.length||t.push(a)});function r(a){delete e[s.id][a.id],ie.every(e,o=>!o[a.id])&&t.push(a)}for(;t.length;)s=t.pop(),n.push(s),ie.each(s._children,r);return n}canAddChild(e){if(this===e||ie.includes(this._children,e))return!1;const t={},n=[];let s;ie.each(this.getConnectedNodes().concat(e.getConnectedNodes()),a=>{t[a.id]={},ie.each(a._children,o=>{t[a.id][o.id]=!0}),!a.parents.length&&a!==e&&n.push(a)}),t[this.id][e.id]=!0;function r(a){delete t[s.id][a.id],ie.every(t,o=>!o[a.id])&&n.push(a)}for(;n.length;)s=n.pop(),ie.each(s._children,r),s===this&&r(e);return ie.every(t,a=>ie.every(a,o=>!1))}canvasPaintSelf(e,t){}renderToCanvasSelf(e,t){this.isPainted()&&this._rendererBitmask&qe.bitmaskCanvas&&this.canvasPaintSelf(e,t)}renderToCanvasSubtree(e,t){t=t||It.identity(),e.resetStyles(),this.renderToCanvasSelf(e,t);for(let n=0;n<this._children.length;n++){const s=this._children[n];if(s.isVisible()&&s.bounds.isValid()){const r=s.effectiveOpacity!==1||s.clipArea||s._filters.length;if(e.context.save(),t.multiplyMatrix(s._transform.getMatrix()),t.canvasSetTransform(e.context),r){const a=s.localBounds.transformed(t).dilate(4).roundOut().constrainBounds(C8.setMinMax(0,0,e.canvas.width,e.canvas.height));if(a.width>0&&a.height>0){const o=document.createElement("canvas");o.width=a.width,o.height=a.height;const l=o.getContext("2d"),h=new Ic(o,l),c=t.copy().prependTranslation(-a.minX,-a.minY);c.canvasSetTransform(l),s.renderToCanvasSubtree(h,c),e.context.save(),s.clipArea&&(e.context.beginPath(),s.clipArea.writeToContext(e.context),e.context.clip()),e.context.setTransform(1,0,0,1,0,0),e.context.globalAlpha=s.effectiveOpacity;let f=!1;s._filters.length&&(mi.canvasFilter&&ie.every(s._filters,g=>g.isDOMCompatible())?(e.context.filter=s._filters.map(g=>g.getCSSFilterString()).join(" "),f=!0):s._filters.forEach(g=>g.applyCanvasFilter(h))),e.context.drawImage(o,a.minX,a.minY),e.context.restore(),f&&(e.context.filter="none")}}else s.renderToCanvasSubtree(e,t);t.multiplyMatrix(s._transform.getInverse()),e.context.restore()}}}renderToCanvas(e,t,n,s){e.width=e.width,s&&(t.fillStyle=s,t.fillRect(0,0,e.width,e.height));const r=new Ic(e,t);this.renderToCanvasSubtree(r,It.identity()),n&&n()}toCanvas(e,t,n,s,r){const o=this.getBounds().union(this.localToParentBounds(this.getSafeSelfBounds()));t=t!==void 0?t:Math.ceil(2-o.minX),n=n!==void 0?n:Math.ceil(2-o.minY),s=s!==void 0?s:Math.ceil(o.getWidth()+2*2),r=r!==void 0?r:Math.ceil(o.getHeight()+2*2);const l=document.createElement("canvas");l.width=s,l.height=r;const h=l.getContext("2d");h.translate(t,n),this._transform.getMatrix().canvasAppendTransform(h);const c=new Ic(l,h);this.renderToCanvasSubtree(c,It.translation(t,n).timesMatrix(this._transform.getMatrix())),e(l,t,n,s,r)}toDataURL(e,t,n,s,r){this.toCanvas((a,o,l,h,c)=>{e(a.toDataURL(),o,l,h,c)},t,n,s,r)}toImage(e,t,n,s,r){this.toDataURL((a,o,l)=>{const h=document.createElement("img");h.onload=()=>{e(h,o,l);try{delete h.onload}catch{}},h.src=a},t,n,s,r)}createDOMDrawable(e,t){throw new Error("createDOMDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createSVGDrawable(e,t){throw new Error("createSVGDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createCanvasDrawable(e,t){throw new Error("createCanvasDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createWebGLDrawable(e,t){throw new Error("createWebGLDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}getInstances(){return this._instances}get instances(){return this.getInstances()}addInstance(e){this._instances.push(e),this.changedInstanceEmitter.emit(e,!0)}removeInstance(e){const t=ie.indexOf(this._instances,e);this._instances.splice(t,1),this.changedInstanceEmitter.emit(e,!1)}wasVisuallyDisplayed(e){for(let t=0;t<this._instances.length;t++){const n=this._instances[t];if(n.visible&&(!e||n.display===e))return!0}return!1}getRootedDisplays(){return this._rootedDisplays}get rootedDisplays(){return this.getRootedDisplays()}addRootedDisplay(e){this._rootedDisplays.push(e),this._pdomDisplaysInfo.onAddedRootedDisplay(e),this.rootedDisplayChangedEmitter.emit(e)}removeRootedDisplay(e){const t=ie.indexOf(this._rootedDisplays,e);this._rootedDisplays.splice(t,1),this._pdomDisplaysInfo.onRemovedRootedDisplay(e),this.rootedDisplayChangedEmitter.emit(e)}getRecursiveConnectedDisplays(e){this.rootedDisplays.length&&e.push(...this.rootedDisplays);for(let t=0;t<this._parents.length;t++)e.push(...this._parents[t].getRecursiveConnectedDisplays(e));return ie.uniq(e)}getConnectedDisplays(){return ie.uniq(this.getRecursiveConnectedDisplays([]))}localToParentPoint(e){return this._transform.transformPosition2(e)}localToParentBounds(e){return this._transform.transformBounds2(e)}parentToLocalPoint(e){return this._transform.inversePosition2(e)}parentToLocalBounds(e){return this._transform.inverseBounds2(e)}transformBoundsFromLocalToParent(e){return e.transform(this._transform.getMatrix())}transformBoundsFromParentToLocal(e){return e.transform(this._transform.getInverse())}getLocalToGlobalMatrix(){let e=this;const t=[];for(;e;)t.push(e._transform.getMatrix()),e=e._parents[0];const n=It.identity();for(let s=t.length-1;s>=0;s--)n.multiplyMatrix(t[s]);return n}getUniqueTransform(){return new $r(this.getLocalToGlobalMatrix())}getGlobalToLocalMatrix(){return this.getLocalToGlobalMatrix().invert()}localToGlobalPoint(e){let t=this;const n=e.copy();for(;t;)t._transform.getMatrix().multiplyVector2(n),t=t._parents[0];return n}globalToLocalPoint(e){let t=this;const n=[];for(;t;)n.push(t._transform),t=t._parents[0];const s=e.copy();for(let r=n.length-1;r>=0;r--)n[r].getInverse().multiplyVector2(s);return s}localToGlobalBounds(e){return e.transformed(this.getLocalToGlobalMatrix())}globalToLocalBounds(e){return e.transformed(this.getGlobalToLocalMatrix())}parentToGlobalPoint(e){return this.parents.length?this.parents[0].localToGlobalPoint(e):e}parentToGlobalBounds(e){return this.parents.length?this.parents[0].localToGlobalBounds(e):e}globalToParentPoint(e){return this.parents.length?this.parents[0].globalToLocalPoint(e):e}globalToParentBounds(e){return this.parents.length?this.parents[0].globalToLocalBounds(e):e}getGlobalBounds(){return this.parentToGlobalBounds(this.getBounds())}get globalBounds(){return this.getGlobalBounds()}boundsOf(e){return this.globalToLocalBounds(e.getGlobalBounds())}boundsTo(e){return e.globalToLocalBounds(this.getGlobalBounds())}attachDrawable(e){return this._drawables.push(e),this}detachDrawable(e){const t=ie.indexOf(this._drawables,e);return this._drawables.splice(t,1),this}mutate(e){if(!e)return this;const t=this._mutatorKeys;for(let n=0;n<t.length;n++){const s=t[n];if(e[s]!==void 0){const r=Object.getOwnPropertyDescriptor(Uy.prototype,s);r&&typeof r.value=="function"?this[s](e[s]):this[s]=e[s]}}return this.initializePhetioObject(L8,e),this}initializePhetioObject(e,t){const n=this.isPhetioInstrumented();super.initializePhetioObject(e,t),R.PHET_IO_ENABLED&&!n&&this.isPhetioInstrumented()&&(this._visibleProperty.initializePhetio(this,rA,()=>new Qt(this.visible,Ut({phetioReadOnly:this.phetioReadOnly,tandem:this.tandem.createTandem(rA),phetioDocumentation:"Controls whether the Node will be visible (and interactive)."},t.visiblePropertyOptions))),this._enabledProperty.initializePhetio(this,sA,()=>new rv(this.enabled,Ut({phetioReadOnly:this.phetioReadOnly,phetioDocumentation:'Sets whether the node is enabled. This will set whether input is enabled for this Node and most often children as well. It will also control and toggle the "disabled look" of the node.',tandem:this.tandem.createTandem(sA)},t.enabledPropertyOptions))),this._inputEnabledProperty.initializePhetio(this,aA,()=>new Mt(this.inputEnabled,Ut({phetioReadOnly:this.phetioReadOnly,tandem:this.tandem.createTandem(aA),phetioValueType:Fs,phetioFeatured:!0,phetioDocumentation:"Sets whether the element will have input enabled, and hence be interactive."},t.inputEnabledPropertyOptions))))}setVoicingVisible(e){this.voicingVisibleProperty.value!==e&&(this.voicingVisibleProperty.value=e)}set voicingVisible(e){this.setVoicingVisible(e)}get voicingVisible(){return this.isVoicingVisible()}isVoicingVisible(){return this.voicingVisibleProperty.value}getDebugHTMLExtras(){return""}toString(){return`${this.constructor.name}#${this.id}`}auditInstanceSubtreeForDisplay(e){}onBoundsListenersAddedOrRemoved(e){this.changeBoundsEventCount(e),this._boundsEventSelfCount+=e}dispose(){this.disposeParallelDOM(),this.removeAllChildren(),this.detach(),this._inputEnabledProperty.dispose(),this._enabledProperty.dispose(),this._pickableProperty.dispose(),this._visibleProperty.dispose(),super.dispose()}disposeSubtree(){if(!this.isDisposed){const e=this.children;this.dispose();for(let t=0;t<e.length;t++)e[t].disposeSubtree()}}static defaultTrailPredicate(e){return e._parents.length===0}static defaultLeafTrailPredicate(e){return e._children.length===0}};Ge.REQUIRES_BOUNDS_OPTION_KEYS=zh;Ge.DEFAULT_NODE_OPTIONS=Ps;Ge.prototype._mutatorKeys=E2.concat(D8);Ge.prototype.drawableMarkFlags=[];Ge.NodeIO=new ui("NodeIO",{valueType:Ge,documentation:"The base type for graphical and potentially interactive objects.",metadataDefaults:{phetioState:CI}});const L8={phetioType:Ge.NodeIO,phetioState:CI};class Lo{constructor(e,t,n,s){this.handled=!1,this.aborted=!1,this.trail=e,this.type=t,this.pointer=n,this.context=s,this.domEvent=s.domEvent,this.activeElement=s.activeElement,this.currentTarget=null,this.target=e.lastNode(),this.isPrimary=n.type!=="mouse"||!this.domEvent||this.domEvent.button===0,n.lastEventContext=s}handle(){this.handled=!0}abort(){this.aborted=!0}isFromPDOM(){return this.pointer.type==="pdom"}canStartPress(){return!this.pointer.isAttached()&&(this.pointer.type!=="mouse"||this.domEvent.button===0)}}Lo.SceneryEventIO=new ui("SceneryEventIO",{valueType:Lo,documentation:'An event, with a "point" field',toStateObject:i=>({type:i.type,domEventType:fi(zc).toStateObject(i.domEvent),point:i.pointer&&i.pointer.point?Oe.Vector2IO.toStateObject(i.pointer.point):null}),stateSchema:{type:xi,domEventType:fi(zc),point:fi(Oe.Vector2IO)}});let M8=0;const O8=ie.constant(!0),N8=i=>i.isPressed;class Fa extends Ef{constructor(e){const t=Ne()({press:ie.noop,release:ie.noop,targetNode:null,drag:ie.noop,attach:!0,mouseButton:0,pressCursor:"pointer",useInputListenerCursor:!1,canStartPress:O8,a11yLooksPressedInterval:100,collapseDragEvents:!1,phetioPressActionInstrumented:!0,phetioReleaseActionInstrumented:!0,phetioEnabledPropertyInstrumented:!1,tandem:R.REQUIRED,phetioReadOnly:!0,phetioFeatured:rn.DEFAULT_OPTIONS.phetioFeatured},e);super(t),this._isPressListener=!0,this._id=M8++,this._mouseButton=t.mouseButton,this._a11yLooksPressedInterval=t.a11yLooksPressedInterval,this._pressCursor=t.pressCursor,this._pressListener=t.press,this._releaseListener=t.release,this._dragListener=t.drag,this._canStartPress=t.canStartPress,this._targetNode=t.targetNode,this._attach=t.attach,this._collapseDragEvents=t.collapseDragEvents,this.overPointers=xf(),this.isPressedProperty=new Qt(!1,{reentrant:!0}),this.isOverProperty=new Qt(!1),this.isOverOrFocusedProperty=new Qt(!1),this.isHoveringProperty=new Qt(!1),this.isHighlightedProperty=new Qt(!1),this.isFocusedProperty=new Qt(!1),this.cursorProperty=new Dt([this.enabledProperty],n=>t.useInputListenerCursor&&n&&this._attach?this._pressCursor:null),this.pointer=null,this.pressedTrail=null,this.interrupted=!1,this._pendingCollapsedDragEvent=null,this._listeningToPointer=!1,this._isHoveringListener=this.invalidateHovering.bind(this),this._isHighlightedListener=this.invalidateHighlighted.bind(this),this.pdomClickingProperty=new Qt(!1),this.looksPressedProperty=Dt.or([this.pdomClickingProperty,this.isPressedProperty]),this._pdomClickingTimeoutListener=null,this._pointerListener={up:this.pointerUp.bind(this),cancel:this.pointerCancel.bind(this),move:this.pointerMove.bind(this),interrupt:this.pointerInterrupt.bind(this),listener:this},this._pressAction=new Zi(this.onPress.bind(this),{tandem:t.phetioPressActionInstrumented?t.tandem.createTandem("pressAction"):R.OPT_OUT,phetioDocumentation:"Executes whenever a press occurs. The first argument when executing can be used to convey info about the SceneryEvent.",phetioReadOnly:t.phetioReadOnly,phetioFeatured:t.phetioFeatured,phetioEventType:vi.USER,parameters:[{name:"event",phetioType:Lo.SceneryEventIO},{phetioPrivate:!0,valueType:[Ge,null]},{phetioPrivate:!0,valueType:["function",null]}]}),this._releaseAction=new Zi(this.onRelease.bind(this),{parameters:[{name:"event",phetioType:fi(Lo.SceneryEventIO)},{phetioPrivate:!0,valueType:["function",null]}],tandem:t.phetioReleaseActionInstrumented?t.tandem.createTandem("releaseAction"):R.OPT_OUT,phetioDocumentation:"Executes whenever a release occurs.",phetioReadOnly:t.phetioReadOnly,phetioFeatured:t.phetioFeatured,phetioEventType:vi.USER}),this.display=null,this.boundInvalidateOverListener=this.invalidateOver.bind(this),this.overPointers.lengthProperty.link(this.invalidateOver.bind(this)),this.isFocusedProperty.link(this.invalidateOver.bind(this)),this.overPointers.lengthProperty.link(this._isHoveringListener),this.isPressedProperty.link(this._isHoveringListener),this.overPointers.addItemAddedListener(n=>n.isDownProperty.link(this._isHoveringListener)),this.overPointers.addItemRemovedListener(n=>n.isDownProperty.unlink(this._isHoveringListener)),this.isHoveringProperty.link(this._isHighlightedListener),this.isPressedProperty.link(this._isHighlightedListener),this.enabledProperty.lazyLink(this.onEnabledPropertyChange.bind(this))}get isPressed(){return this.isPressedProperty.value}get cursor(){return this.cursorProperty.value}get attach(){return this._attach}get targetNode(){return this._targetNode}getCurrentTarget(){return this.pressedTrail.lastNode()}get currentTarget(){return this.getCurrentTarget()}canPress(e){return!!this.enabledProperty.value&&!this.isPressed&&this._canStartPress(e,this)&&(!(e.pointer instanceof Qm)||e.domEvent.button===this._mouseButton)&&(!this._attach||!e.pointer.isAttached())}canClick(){return this.enabledProperty.value&&!this.isPressed&&this._canStartPress(null,this)}press(e,t,n){return this.canPress(e)?(this.flushCollapsedDrag(),this._pressAction.execute(e,t||null,n||null),!0):!1}release(e,t){this.flushCollapsedDrag(),this._releaseAction.execute(e||null,t||null)}drag(e){this.isPressed&&this._dragListener(e,this)}interrupt(){this.pdomClickingProperty.value?(this.interrupted=!0,this._listeningToPointer?this.release():(this.isPressedProperty.value=!1,this._releaseListener(null,this)),zn.hasListener(this._pdomClickingTimeoutListener)&&(zn.clearTimeout(this._pdomClickingTimeoutListener),this.pdomClickingProperty.isDisposed||(this.pdomClickingProperty.value=!1))):this.isPressed&&(this.interrupted=!0,this.release())}clearOverPointers(){this.overPointers.clear()}step(){this.flushCollapsedDrag()}setCreatePanTargetBounds(e){this._pointerListener.createPanTargetBounds=e}set createPanTargetBounds(e){this.setCreatePanTargetBounds(e)}setCreatePanTargetBoundsFromTrail(e){this.setCreatePanTargetBounds(()=>e.localToGlobalBounds(e.lastNode().localBounds))}set createPanTargetBoundsFromTrail(e){this.setCreatePanTargetBoundsFromTrail(e)}flushCollapsedDrag(){this._pendingCollapsedDragEvent&&this.drag(this._pendingCollapsedDragEvent),this._pendingCollapsedDragEvent=null}invalidateOver(){let e=!1;if(this._listeningToPointer)e=!1;else for(let t=0;t<this.overPointers.length;t++)if(this.overPointers.get(t).isAttached()){e=!0;break}this.isOverProperty.value=this.overPointers.length>0&&!e,this.isOverOrFocusedProperty.value=this.isOverProperty.value||this.isFocusedProperty.value&&!!this.display&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.value}invalidateHovering(){for(let e=0;e<this.overPointers.length;e++){const t=this.overPointers[e];if(!t.isDown||t===this.pointer){this.isHoveringProperty.value=!0;return}}this.isHoveringProperty.value=!1}invalidateHighlighted(){this.isHighlightedProperty.value=this.isHoveringProperty.value||this.isPressedProperty.value}onEnabledPropertyChange(e){!e&&this.interrupt()}onPress(e,t,n){const s=t||this._targetNode;this.pointer=e.pointer,this.pressedTrail=s?s.getUniqueTrail():e.trail.subtrailTo(e.currentTarget,!1),this.interrupted=!1,this.pointer.addInputListener(this._pointerListener,this._attach),this._listeningToPointer=!0,this.pointer.cursor=this.pressedTrail.lastNode().getEffectiveCursor()||this._pressCursor,this.isPressedProperty.value=!0,this._pressListener(e,this),n&&n()}onRelease(e,t){const n=this;n.pointer.removeInputListener(this._pointerListener),this._listeningToPointer=!1,this.isPressedProperty.value=!1,this._releaseListener(e,this),t&&t(),n.pointer.cursor=null,this.pointer=null,this.pressedTrail=null}down(e){this.press(e)}up(e){this.invalidateOver(),this.invalidateHovering()}enter(e){this.overPointers.push(e.pointer)}move(e){this.invalidateOver()}exit(e){this.overPointers.includes(e.pointer)&&this.overPointers.remove(e.pointer)}pointerUp(e){this.isPressed&&this.release(e)}pointerCancel(e){this.isPressed&&this.interrupt()}pointerMove(e){this.isPressed&&(this._collapseDragEvents?this._pendingCollapsedDragEvent=e:this.drag(e))}pointerInterrupt(){this.interrupt()}click(e,t){return this.canClick()&&(this.interrupted=!1,this.pdomClickingProperty.value=!0,this.isFocusedProperty.value=!0,this.isPressedProperty.value=!0,this._pressListener(e,this),t&&t(),this.isPressedProperty.value=!1,this._releaseListener(e,this),zn.clearTimeout(this._pdomClickingTimeoutListener),this._pdomClickingTimeoutListener=zn.setTimeout(()=>{this.pdomClickingProperty.isDisposed||(this.pdomClickingProperty.value=!1)},this._a11yLooksPressedInterval)),!0}focus(e){const t=e.trail.rootNode().getRootedDisplays().filter(n=>n.isAccessible());this.display=t[0],this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)||this.display.focusManager.pdomFocusHighlightsVisibleProperty.link(this.boundInvalidateOverListener),this.isFocusedProperty.value=!0}blur(){this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),this.isFocusedProperty.value=!1}dispose(){this.overPointers.clear(),this._listeningToPointer&&N8(this)&&this.pointer.removeInputListener(this._pointerListener),this.isPressedProperty.isDisposed||(this.isPressedProperty.unlink(this._isHighlightedListener),this.isPressedProperty.unlink(this._isHoveringListener)),!this.isHoveringProperty.isDisposed&&this.isHoveringProperty.unlink(this._isHighlightedListener),this._pressAction.dispose(),this._releaseAction.dispose(),this.looksPressedProperty.dispose(),this.pdomClickingProperty.dispose(),this.cursorProperty.dispose(),this.isFocusedProperty.dispose(),this.isHighlightedProperty.dispose(),this.isHoveringProperty.dispose(),this.isOverOrFocusedProperty.dispose(),this.isOverProperty.dispose(),this.isPressedProperty.dispose(),this.overPointers.dispose(),this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),super.dispose()}}Fa.phetioAPI={pressAction:{phetioType:Zi.PhetioActionIO([Lo.SceneryEventIO])},releaseAction:{phetioType:Zi.PhetioActionIO([fi(Lo.SceneryEventIO)])}};let R8=1;class to{initialize(e){return this.id=this.id||R8++,this.clean(),this.renderer=e,this.dirty=!0,this.isDisposed=!1,this.linksDirty=!1,this.visibleProperty=new oi(!0),this.fittableProperty=new oi(!0),this}clean(){this.parentDrawable=null,this.backbone=null,this.pendingParentDrawable=null,this.pendingBackbone=null,this.pendingAddition=!1,this.pendingRemoval=!1,this.previousDrawable=null,this.nextDrawable=null,this.oldPreviousDrawable=null,this.oldNextDrawable=null,this.visibleProperty&&this.visibleProperty.removeAllListeners(),this.fittableProperty&&this.fittableProperty.removeAllListeners()}update(){let e=!1;return this.dirty&&!this.isDisposed&&(this.dirty=!1,e=!0),e}setVisible(e){this.visibleProperty.value=e}set visible(e){this.setVisible(e)}isVisible(){return this.visibleProperty.value}get visible(){return this.isVisible()}setFittable(e){this.fittableProperty.value=e}set fittable(e){this.setFittable(e)}isFittable(){return this.fittableProperty.value}get fittable(){return this.isFittable()}setBlockBackbone(e){this.parentDrawable=e,this.backbone=e,this.pendingParentDrawable=e,this.pendingBackbone=e,this.pendingAddition=!1,this.pendingRemoval=!1}notePendingAddition(e,t,n){this.pendingParentDrawable=t,this.pendingBackbone=n,this.pendingAddition=!0,this.pendingRemoval||e.markDrawableChangedBlock(this)}notePendingRemoval(e){this.pendingRemoval=!0,this.pendingAddition||e.markDrawableChangedBlock(this)}notePendingMove(e,t){this.pendingParentDrawable=t,(!this.pendingRemoval||!this.pendingAddition)&&e.markDrawableChangedBlock(this),this.pendingAddition=!0,this.pendingRemoval=!0}updateBlock(){let e=!1;return(this.pendingRemoval||this.pendingAddition)&&(e=!this.pendingRemoval||!this.pendingAddition||this.parentDrawable!==this.pendingParentDrawable||this.backbone!==this.pendingBackbone,e?(this.pendingRemoval&&(this.parentDrawable.removeDrawable(this),this.pendingAddition||(this.pendingParentDrawable=null,this.pendingBackbone=null)),this.parentDrawable=this.pendingParentDrawable,this.backbone=this.pendingBackbone,this.pendingAddition&&this.parentDrawable.addDrawable(this)):this.pendingAddition&&qe.isCanvas(this.renderer)&&this.parentDrawable.onPotentiallyMovedDrawable(this),this.pendingAddition=!1,this.pendingRemoval=!1),e}updateLinks(){this.oldNextDrawable=this.nextDrawable,this.oldPreviousDrawable=this.previousDrawable,this.linksDirty=!1}markDirty(){this.dirty||(this.dirty=!0,this.parentDrawable&&this.parentDrawable.markDirtyDrawable(this))}markLinksDirty(e){this.linksDirty||(this.linksDirty=!0,e.markDrawableForLinksUpdate(this))}markForDisposal(e){to.disconnectBefore(this,e),to.disconnectAfter(this,e),e.markDrawableForDisposal(this)}disposeImmediately(e){to.disconnectBefore(this,e),to.disconnectAfter(this,e),this.dispose()}dispose(){this.clean(),this.isDisposed=!0,this.freeToPool()}audit(e,t,n){}toString(){return`${this.constructor.name}#${this.id}`}toDetailedString(){return this.toString()}static connectDrawables(e,t,n){e.nextDrawable!==t&&(e.nextDrawable&&(e.nextDrawable.markLinksDirty(n),e.nextDrawable.previousDrawable=null),t.previousDrawable&&(t.previousDrawable.markLinksDirty(n),t.previousDrawable.nextDrawable=null),e.nextDrawable=t,t.previousDrawable=e,e.markLinksDirty(n),t.markLinksDirty(n))}static disconnectBefore(e,t){e.previousDrawable&&(e.markLinksDirty(t),e.previousDrawable.markLinksDirty(t),e.previousDrawable.nextDrawable=null,e.previousDrawable=null)}static disconnectAfter(e,t){e.nextDrawable&&(e.markLinksDirty(t),e.nextDrawable.markLinksDirty(t),e.nextDrawable.previousDrawable=null,e.nextDrawable=null)}static listToArray(e,t){const n=[];for(let s=e;n.push(s),s!==t;s=s.nextDrawable);return n}static oldListToArray(e,t){const n=[];for(let s=e;n.push(s),s!==t;s=s.oldNextDrawable);return n}}class Gb extends to{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return super.initialize(e),this.drawableVisibilityListener=this.drawableVisibilityListener||this.updateSelfVisibility.bind(this),this.instance=t,this.node=t.trail.lastNode(),this.node.attachDrawable(this),this.instance.selfVisibleEmitter.addListener(this.drawableVisibilityListener),this.updateSelfVisibility(),this}dispose(){this.instance.selfVisibleEmitter.removeListener(this.drawableVisibilityListener),this.node.detachDrawable(this),this.instance=null,this.node=null,super.dispose()}updateSelfVisibility(){this.visible=this.instance.selfVisible}toDetailedString(){return`${this.toString()} (${this.instance.trail.toPathString()})`}}class fd extends Gb{initialize(e,t){super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute()}markTransformDirty(){this.markDirty()}markPaintDirty(){this.markDirty()}updateSelfVisibility(){super.updateSelfVisibility(),this.markDirty()}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}const Hd="(-?\\d{1,3}%?)",lE="(\\d+|\\d*\\.\\d+)",Ud="(\\d{1,3})";function Gd(i){let e=1;return i.endsWith("%")&&(e=2.55,i=i.slice(0,i.length-1)),ws(Number(i)*e)}let ct=class xn{constructor(e,t,n,s){this.changeEmitter=new un,this.set(e,t,n,s)}copy(){return new xn(this.r,this.g,this.b,this.a)}set(e,t,n,s){if(e===null)this.setRGBA(0,0,0,0);else if(typeof e=="string")this.setCSS(e);else if(e instanceof xn)this.setRGBA(e.r,e.g,e.b,e.a);else if(n===void 0){const r=e>>16&255,a=e>>8&255,o=e>>0&255,l=t===void 0?1:t;this.setRGBA(r,a,o,l)}else this.setRGBA(e,t,n,s===void 0?1:s);return this}getRed(){return this.r}get red(){return this.getRed()}set red(e){this.setRed(e)}setRed(e){return this.setRGBA(e,this.g,this.b,this.a)}getGreen(){return this.g}get green(){return this.getGreen()}set green(e){this.setGreen(e)}setGreen(e){return this.setRGBA(this.r,e,this.b,this.a)}getBlue(){return this.b}get blue(){return this.getBlue()}set blue(e){this.setBlue(e)}setBlue(e){return this.setRGBA(this.r,this.g,e,this.a)}getAlpha(){return this.a}get alpha(){return this.getAlpha()}set alpha(e){this.setAlpha(e)}setAlpha(e){return this.setRGBA(this.r,this.g,this.b,e)}setRGBA(e,t,n,s){return this.r=ws(Xn(e,0,255)),this.g=ws(Xn(t,0,255)),this.b=ws(Xn(n,0,255)),this.a=Xn(s,0,1),this.updateColor(),this}blend(e,t){const s=Math.pow(this.r,2.4),r=Math.pow(e.r,2.4),a=Math.pow(this.g,2.4),o=Math.pow(e.g,2.4),l=Math.pow(this.b,2.4),h=Math.pow(e.b,2.4),c=Math.pow(s+(r-s)*t,1/2.4),f=Math.pow(a+(o-a)*t,1/2.4),g=Math.pow(l+(h-l)*t,1/2.4),v=this.a+(e.a-this.a)*t;return new xn(c,f,g,v)}computeCSS(){if(this.a===1)return`rgb(${this.r},${this.g},${this.b})`;{let e=this.a.toFixed(20);for(;e.length>=2&&e.endsWith("0")&&e[e.length-2]!==".";)e=e.slice(0,e.length-1);const t=this.a===0||this.a===1?this.a:e;return`rgba(${this.r},${this.g},${this.b},${t})`}}toCSS(){return this._css}setCSS(e){let t=!1;const n=xn.preprocessCSS(e);for(let s=0;s<xn.formatParsers.length;s++){const r=xn.formatParsers[s],a=r.regexp.exec(n);if(a){r.apply(this,a),t=!0;break}}if(!t)throw new Error(`Color unable to parse color string: ${e}`);return this.updateColor(),this}toNumber(){return(this.r<<16)+(this.g<<8)+this.b}updateColor(){const e=this._css;this._css=this.computeCSS(),e!==this._css&&this.changeEmitter.emit()}setImmutable(){return this}getCanvasStyle(){return this.toCSS()}setHSLA(e,t,n,s){e=e%360/360,t=Xn(t/100,0,1),n=Xn(n/100,0,1);let r;n<.5?r=n*(t+1):r=n+t-n*t;const a=n*2-r;return this.r=ws(xn.hueToRGB(a,r,e+1/3)*255),this.g=ws(xn.hueToRGB(a,r,e)*255),this.b=ws(xn.hueToRGB(a,r,e-1/3)*255),this.a=Xn(s,0,1),this.updateColor(),this}getHSLA(){return[this.getHue(),this.getSaturation(),this.getLightness(),this.getAlpha()]}getHue(){const e=this.r/255,t=this.g/255,n=this.b/255,s=Math.max(e,t,n),r=Math.min(e,t,n),a=s-r;let o=0;return a!==0&&(s===e?o=(t-n)/a%6:s===t?o=(n-e)/a+2:o=(e-t)/a+4,o=ws(o*60),o<0&&(o+=360)),o}getSaturation(){const e=this.r/255,t=this.g/255,n=this.b/255,s=Math.max(e,t,n),r=Math.min(e,t,n),a=s-r,o=(s+r)/2;let l=0;return a!==0&&(l=o>.5?a/(2-s-r):a/(s+r)),ws(l*100)}getLightness(){const e=this.r/255,t=this.g/255,n=this.b/255,s=Math.max(e,t,n),r=Math.min(e,t,n),a=(s+r)/2;return ws(a*100)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}withAlpha(e){return new xn(this.r,this.g,this.b,e)}checkFactor(e){return e===void 0?.7:e}brighterColor(e){e=this.checkFactor(e);const t=Math.min(255,Math.floor(this.r/e)),n=Math.min(255,Math.floor(this.g/e)),s=Math.min(255,Math.floor(this.b/e));return new xn(t,n,s,this.a)}colorUtilsBrighter(e){e=this.checkFactor(e);const t=Math.min(255,this.getRed()+Math.floor(e*(255-this.getRed()))),n=Math.min(255,this.getGreen()+Math.floor(e*(255-this.getGreen()))),s=Math.min(255,this.getBlue()+Math.floor(e*(255-this.getBlue())));return new xn(t,n,s,this.getAlpha())}darkerColor(e){e=this.checkFactor(e);const t=Math.max(0,Math.floor(e*this.r)),n=Math.max(0,Math.floor(e*this.g)),s=Math.max(0,Math.floor(e*this.b));return new xn(t,n,s,this.a)}colorUtilsDarker(e){e=this.checkFactor(e);const t=Math.max(0,this.getRed()-Math.floor(e*this.getRed())),n=Math.max(0,this.getGreen()-Math.floor(e*this.getGreen())),s=Math.max(0,this.getBlue()-Math.floor(e*this.getBlue()));return new xn(t,n,s,this.getAlpha())}colorUtilsBrightness(e){return e===0?this:e>0?this.colorUtilsBrighter(e):this.colorUtilsDarker(-e)}toString(){return`${this.constructor.name}[r:${this.r} g:${this.g} b:${this.b} a:${this.a}]`}toHexString(){let e=this.toNumber().toString(16);for(;e.length<6;)e=`0${e}`;return`#${e}`}toStateObject(){return{r:this.r,g:this.g,b:this.b,a:this.a}}static hueToRGB(e,t,n){return n<0&&(n=n+1),n>1&&(n=n-1),n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}static toColor(e){return e===null?xn.TRANSPARENT:e instanceof xn?e:typeof e=="string"?new xn(e):xn.toColor(e.value)}static interpolateRGBA(e,t,n){if(n<0||n>1)throw new Error(`distance must be between 0 and 1: ${n}`);const s=Math.floor(Or(0,1,e.r,t.r,n)),r=Math.floor(Or(0,1,e.g,t.g,n)),a=Math.floor(Or(0,1,e.b,t.b,n)),o=Or(0,1,e.a,t.a,n);return new xn(s,r,a,o)}static supersampleBlend(e){const n=e.map(g=>Math.pow(g.r/255,2.2)),s=e.map(g=>Math.pow(g.g/255,2.2)),r=e.map(g=>Math.pow(g.b/255,2.2)),a=e.map(g=>Math.pow(g.a,2.2)),o=ie.sum(a);if(o===0)return new xn(0,0,0,0);const l=ie.sum(ie.range(0,e.length).map(g=>n[g]*a[g]))/o,h=ie.sum(ie.range(0,e.length).map(g=>s[g]*a[g]))/o,c=ie.sum(ie.range(0,e.length).map(g=>r[g]*a[g]))/o,f=o/e.length;return new xn(Math.floor(Math.pow(l,1/2.2)*255),Math.floor(Math.pow(h,1/2.2)*255),Math.floor(Math.pow(c,1/2.2)*255),Math.pow(f,1/2.2))}static fromStateObject(e){return new xn(e.r,e.g,e.b,e.a)}static hsla(e,t,n,s){return new xn(0,0,0,1).setHSLA(e,t,n,s)}static checkPaintString(e){}static checkPaint(e){typeof e=="string"?xn.checkPaintString(e):ai(e)&&typeof e.value=="string"&&xn.checkPaintString(e.value)}static getLuminance(e){const t=xn.toColor(e);return t.red*.2126+t.green*.7152+t.blue*.0722}static toGrayscale(e){const t=xn.getLuminance(e);return new xn(t,t,t)}static isDarkColor(e,t=186){return xn.getLuminance(e)<t}static isLightColor(e,t){return!xn.isDarkColor(e,t)}static grayColor(e,t){return new xn(e,e,e,t)}static preprocessCSS(e){let t=e.replace(/ /g,"").toLowerCase();const n=xn.colorKeywords[t];return n&&(t=`#${n}`),t}static isCSSColorString(e){const t=xn.preprocessCSS(e);for(let n=0;n<xn.formatParsers.length;n++)if(xn.formatParsers[n].regexp.exec(t))return!0;return!1}};ct.formatParsers=[{regexp:/^transparent$/,apply:(i,e)=>{i.setRGBA(0,0,0,0)}},{regexp:/^#(\w{1})(\w{1})(\w{1})$/,apply:(i,e)=>{i.setRGBA(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1)}},{regexp:/^#(\w{2})(\w{2})(\w{2})$/,apply:(i,e)=>{i.setRGBA(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1)}},{regexp:new RegExp(`^rgb\\(${Hd},${Hd},${Hd}\\)$`),apply:(i,e)=>{i.setRGBA(Gd(e[1]),Gd(e[2]),Gd(e[3]),1)}},{regexp:new RegExp(`^rgba\\(${Hd},${Hd},${Hd},${lE}\\)$`),apply:(i,e)=>{i.setRGBA(Gd(e[1]),Gd(e[2]),Gd(e[3]),Number(e[4]))}},{regexp:new RegExp(`^hsl\\(${Ud},${Ud}%,${Ud}%\\)$`),apply:(i,e)=>{i.setHSLA(Number(e[1]),Number(e[2]),Number(e[3]),1)}},{regexp:new RegExp(`^hsla\\(${Ud},${Ud}%,${Ud}%,${lE}\\)$`),apply:(i,e)=>{i.setHSLA(Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4]))}}];ct.basicColorKeywords={aqua:"00ffff",black:"000000",blue:"0000ff",fuchsia:"ff00ff",gray:"808080",green:"008000",lime:"00ff00",maroon:"800000",navy:"000080",olive:"808000",purple:"800080",red:"ff0000",silver:"c0c0c0",teal:"008080",white:"ffffff",yellow:"ffff00"};ct.colorKeywords={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};ct.BLACK=ct.black=new ct(0,0,0).setImmutable();ct.BLUE=ct.blue=new ct(0,0,255).setImmutable();ct.CYAN=ct.cyan=new ct(0,255,255).setImmutable();ct.DARK_GRAY=ct.darkGray=new ct(64,64,64).setImmutable();ct.GRAY=ct.gray=new ct(128,128,128).setImmutable();ct.GREEN=ct.green=new ct(0,255,0).setImmutable();ct.LIGHT_GRAY=ct.lightGray=new ct(192,192,192).setImmutable();ct.MAGENTA=ct.magenta=new ct(255,0,255).setImmutable();ct.ORANGE=ct.orange=new ct(255,200,0).setImmutable();ct.PINK=ct.pink=new ct(255,175,175).setImmutable();ct.RED=ct.red=new ct(255,0,0).setImmutable();ct.WHITE=ct.white=new ct(255,255,255).setImmutable();ct.YELLOW=ct.yellow=new ct(255,255,0).setImmutable();ct.TRANSPARENT=ct.transparent=new ct(0,0,0,0).setImmutable();new ct("blue");ct.ColorIO=new ui("ColorIO",{valueType:ct,documentation:"A color, with rgba",toStateObject:i=>i.toStateObject(),fromStateObject:i=>new ct(i.r,i.g,i.b,i.a),stateSchema:{r:Ii,g:Ii,b:Ii,a:Ii}});let B8=1;class Ul{constructor(){this.id=`paint${B8++}`,this.transformMatrix=null}setTransformMatrix(e){return this.transformMatrix!==e&&(this.transformMatrix=e),this}toString(){return this.id}}Ul.prototype.isPaint=!0;class ll extends Ul{constructor(){super(),this.stops=[],this.lastStopRatio=0,this.canvasGradient=null,this.colorStopsDirty=!1,this.lastColorStopValues=[]}addColorStop(e,t){if(this.lastStopRatio>e)throw new Error("Color stops not specified in the order of increasing ratios");return this.lastStopRatio=e,this.stops.push({ratio:e,color:t}),this.lastColorStopValues.push(""),this}getSVGStops(){return this.stops}invalidateCanvasGradient(){this.colorStopsDirty=!0}haveCanvasColorStopsChanged(){if(this.lastColorStopValues===null)return!0;for(let e=0;e<this.stops.length;e++)if(ll.colorToString(this.stops[e].color)!==this.lastColorStopValues[e])return!0;return!1}getCanvasStyle(){if(!this.canvasGradient||this.colorStopsDirty&&this.haveCanvasColorStopsChanged()){this.colorStopsDirty=!1,zi(this.lastColorStopValues),this.canvasGradient=this.createCanvasGradient();for(let e=0;e<this.stops.length;e++){const t=this.stops[e],n=ll.colorToString(t.color);this.canvasGradient.addColorStop(t.ratio,n),this.lastColorStopValues.push(n)}}return this.canvasGradient}static colorToString(e){return ai(e)&&(e=e.value),e===null&&(e="transparent"),e instanceof ct&&(e=e.toCSS()),e}}ll.prototype.isGradient=!0;class eg{constructor(e){this.primary=null,this.changeCallback=e,this.notifyChangeCallback=this.notifyChanged.bind(this),this.updateSecondaryListener=this.updateSecondary.bind(this),this.secondaryPropertyCountsMap={}}setPrimary(e){e!==this.primary&&(this.detachPrimary(this.primary),this.primary=e,this.attachPrimary(e),this.notifyChangeCallback())}clean(){this.detachPrimary(this.primary),this.primary=null}updateSecondary(e,t,n){const s=this.secondaryPropertyCountsMap[n.id];for(let r=0;r<s;r++)this.attachSecondary(e);this.notifyChangeCallback()}attachPrimary(e){if(ai(e))this.secondaryLazyLinkProperty(e),this.attachSecondary(e.get());else if(e instanceof ct)e.setImmutable();else if(e instanceof ll)for(let t=0;t<e.stops.length;t++)this.attachPrimary(e.stops[t].color)}detachPrimary(e){if(ai(e))this.secondaryUnlinkProperty(e);else if(e instanceof ll)for(let t=0;t<e.stops.length;t++)this.detachPrimary(e.stops[t].color)}attachSecondary(e){e instanceof ct&&e.setImmutable()}notifyChanged(){this.primary instanceof ll&&this.primary.invalidateCanvasGradient(),this.changeCallback()}secondaryLazyLinkProperty(e){const t=e.id;this.secondaryPropertyCountsMap[t]?this.secondaryPropertyCountsMap[t]++:(this.secondaryPropertyCountsMap[t]=1,e.lazyLink(this.updateSecondaryListener))}secondaryUnlinkProperty(e){const t=e.id;--this.secondaryPropertyCountsMap[t]===0&&(delete this.secondaryPropertyCountsMap[t],e.isDisposed||e.unlink(this.updateSecondaryListener))}}const a0=gr(i=>class extends i{initialize(e,t,...n){super.initialize(e,t,...n),this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new eg(this.fillCallback),this.strokeObserver=this.strokeObserver||new eg(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}dispose(){this.fillObserver.clean(),this.strokeObserver.clean(),super.dispose()}markDirtyFill(){this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}markDirtyStroke(){this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}markDirtyLineWidth(){this.markPaintDirty()}markDirtyLineOptions(){this.markPaintDirty()}markDirtyCachedPaints(){this.markPaintDirty()}});class C2 extends a0(fd){paintCanvas(e,t,n){const s=e.context;t.hasShape()&&(s.beginPath(),t._shape.writeToContext(s),t.hasFill()&&(t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e)))}markDirtyShape(){this.markPaintDirty()}}es.mixInto(C2);const o0=gr(i=>class extends i{initialize(e,t,...n){super.initialize(e,t,...n),this.dirtyFill=!0,this.hadStroke=!1,this.dirtyStroke=!0,this.dirtyLineWidth=!0,this.dirtyLineOptions=!0,this.dirtyCachedPaints=!0,this.lastCachedPaints=[],this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new eg(this.fillCallback),this.strokeObserver=this.strokeObserver||new eg(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}cleanPaintableState(){this.dirtyFill=!1,this.dirtyStroke=!1,this.dirtyLineWidth=!1,this.dirtyLineOptions=!1,this.dirtyCachedPaints=!1,this.hadStroke=this.node.getStroke()!==null}dispose(){super.dispose(),this.fillObserver.clean(),this.strokeObserver.clean()}markDirtyFill(){this.dirtyFill=!0,this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}markDirtyStroke(){this.dirtyStroke=!0,this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}markDirtyLineWidth(){this.dirtyLineWidth=!0,this.markPaintDirty()}markDirtyLineOptions(){this.dirtyLineOptions=!0,this.markPaintDirty()}markDirtyCachedPaints(){this.dirtyCachedPaints=!0,this.markPaintDirty()}}),q8=gr(i=>class extends o0(i){initialize(e,t,...n){super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyShape=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyShape(){this.dirtyShape=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyShape=!1}}),Kn="http://www.w3.org/2000/svg";class z8{constructor(){this.initialize()}initialize(){this.svgBlock=null,this.fillStyle="none",this.strokeStyle="none",this.fillPaint=null,this.strokePaint=null,this.updateBaseStyle(),this.strokeDetailStyle=""}dispose(){this.releaseFillPaint(),this.releaseStrokePaint()}releaseFillPaint(){this.fillPaint&&(this.svgBlock.decrementPaint(this.fillPaint),this.fillPaint=null)}releaseStrokePaint(){this.strokePaint&&(this.svgBlock.decrementPaint(this.strokePaint),this.strokePaint=null)}updateFill(e,t){const n=hE(t,e);t!==this.fillPaint&&(this.releaseFillPaint(),t&&t.isPaint&&(this.fillPaint=t,e.incrementPaint(t))),n!==this.fillStyle&&(this.fillStyle=n,this.updateBaseStyle())}updateStroke(e,t){const n=hE(t,e);t!==this.strokePaint&&(this.releaseStrokePaint(),t&&t.isPaint&&(this.strokePaint=t,e.incrementPaint(t))),n!==this.strokeStyle&&(this.strokeStyle=n,this.updateBaseStyle())}updateBaseStyle(){this.baseStyle=`fill: ${this.fillStyle}; stroke: ${this.strokeStyle};`}updateStrokeDetailStyle(e){let t="";const n=e.getLineWidth();n!==1&&(t+=`stroke-width: ${n};`);const s=e.getLineCap();s!=="butt"&&(t+=`stroke-linecap: ${s};`);const r=e.getLineJoin();r!=="miter"&&(t+=`stroke-linejoin: ${r};`);const a=e.getMiterLimit();t+=`stroke-miterlimit: ${a};`,e.hasLineDash()&&(t+=`stroke-dasharray: ${e.getLineDash().join(",")};`,t+=`stroke-dashoffset: ${e.getLineDashOffset()};`),this.strokeDetailStyle=t}updateSVGBlock(e){const t=this.svgBlock;t&&(this.fillPaint&&t.decrementPaint(this.fillPaint),this.strokePaint&&t.decrementPaint(this.strokePaint)),this.svgBlock=e,this.fillPaint&&e.incrementPaint(this.fillPaint),this.strokePaint&&e.incrementPaint(this.strokePaint)}}function hE(i,e){return i?i.toCSS?i.toCSS():i.isPaint?`url(#${i.id}-${e?e.id:"noblock"})`:i:"none"}const py=[],fy=[],uE=[],F8=[];class Vf extends Gb{initialize(e,t,n,s){return super.initialize(e,t),this.usesPaint=n,this.keepElements=s,this.svgElement=null,this.svgBlock=null,this.usesPaint&&(this.paintState?this.paintState.initialize():this.paintState=new z8),this}update(){return super.update()?(this.updateSVG(),!0):!1}setCachedPaints(e){Cc(this.lastCachedPaints,e,py,fy,uE);for(let t=0;t<fy.length;t++)this.svgBlock.incrementPaint(fy[t]);for(let t=0;t<py.length;t++)this.svgBlock.decrementPaint(py[t]);py.length=0,fy.length=0,uE.length=0,this.lastCachedPaints.length=0,this.lastCachedPaints.push(...e)}updateSVG(){this.usesPaint&&this.dirtyCachedPaints&&this.setCachedPaints(this.node._cachedPaints),this.paintDirty&&this.updateSVGSelf(this.node,this.svgElement),this.setToCleanState()}updateFillStrokeStyle(e){if(!this.usesPaint)return;this.dirtyFill&&this.paintState.updateFill(this.svgBlock,this.node.getFillValue()),this.dirtyStroke&&this.paintState.updateStroke(this.svgBlock,this.node.getStrokeValue());const t=this.dirtyLineWidth||this.dirtyLineOptions;t&&this.paintState.updateStrokeDetailStyle(this.node),(this.dirtyFill||this.dirtyStroke||t)&&e.setAttribute("style",this.paintState.baseStyle+this.paintState.strokeDetailStyle),this.cleanPaintableState()}updateSVGBlock(e){const t=this.svgBlock;if(this.usesPaint&&t)for(let n=0;n<this.lastCachedPaints.length;n++)t.decrementPaint(this.lastCachedPaints[n]);if(this.svgBlock=e,this.usesPaint)for(let n=0;n<this.lastCachedPaints.length;n++)e.incrementPaint(this.lastCachedPaints[n]);this.updateDefsSelf&&this.updateDefsSelf(e),this.usesPaint&&this.paintState.updateSVGBlock(e),this.usesPaint&&this.markDirtyFill(),this.usesPaint&&this.markDirtyStroke()}dispose(){this.keepElements||(this.svgElement=null),this.updateDefsSelf&&this.updateDefsSelf(null),this.usesPaint&&(this.setCachedPaints(F8),this.paintState.dispose()),this.defs=null,this.svgBlock=null,super.dispose()}}const H8=!0;class DI extends q8(Vf){initialize(e,t){super.initialize(e,t,!0,H8),this.svgElement=this.svgElement||document.createElementNS(Kn,"path")}updateSVGSelf(){const e=this.svgElement;if(this.dirtyShape){let t=this.node.hasShape()?this.node._shape.getSVGPath():"";t||(t="M0 0"),e.setAttribute("d",`${t}${Zn.safari?" M0 0":""}`)}this.updateFillStrokeStyle(e)}}es.mixInto(DI);const TS=(i,e)=>{Yr()&&i&&e.forEach(t=>{jt(Object.getOwnPropertyDescriptor(i,t)||ie.some(eS(i.constructor).map(n=>Object.getOwnPropertyDescriptor(n.prototype,t))),`property not defined: ${t}`)})},U8=Zn.safari5,II=["fill","fillPickable","stroke","strokePickable","lineWidth","lineCap","lineJoin","miterLimit","lineDash","lineDashOffset","cachedPaints"],Lm={fill:null,fillPickable:!0,stroke:null,strokePickable:!1,lineWidth:rp.lineWidth,lineCap:rp.lineCap,lineJoin:rp.lineJoin,lineDashOffset:rp.lineDashOffset,miterLimit:rp.miterLimit},LI=["fill","stroke","lineWidth","lineOptions","cachedPaints"],xS=gr(i=>class extends i{constructor(...t){super(...t),TS(this,["_drawables"]),this._fill=Lm.fill,this._fillPickable=Lm.fillPickable,this._stroke=Lm.stroke,this._strokePickable=Lm.strokePickable,this._cachedPaints=[],this._lineDrawingStyles=new Hc}setFill(t){return this._fill!==t&&(this._fill=t,this.invalidateFill()),this}set fill(t){this.setFill(t)}get fill(){return this.getFill()}getFill(){return this._fill}hasFill(){return this.getFillValue()!==null}getFillValue(){const t=this.getFill();return ai(t)?t.get():t}get fillValue(){return this.getFillValue()}setStroke(t){return this._stroke!==t&&(this._stroke=t,this.invalidateStroke()),this}set stroke(t){this.setStroke(t)}get stroke(){return this.getStroke()}getStroke(){return this._stroke}hasStroke(){return this.getStrokeValue()!==null}hasPaintableStroke(){return this.hasStroke()&&this.getLineWidth()>0}getStrokeValue(){const t=this.getStroke();return ai(t)?t.get():t}get strokeValue(){return this.getStrokeValue()}setFillPickable(t){return this._fillPickable!==t&&(this._fillPickable=t,this.invalidateFill()),this}set fillPickable(t){this.setFillPickable(t)}get fillPickable(){return this.isFillPickable()}isFillPickable(){return this._fillPickable}setStrokePickable(t){return this._strokePickable!==t&&(this._strokePickable=t,this.invalidateStroke()),this}set strokePickable(t){this.setStrokePickable(t)}get strokePickable(){return this.isStrokePickable()}isStrokePickable(){return this._strokePickable}setLineWidth(t){if(this.getLineWidth()!==t){this._lineDrawingStyles.lineWidth=t,this.invalidateStroke();const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyLineWidth()}return this}set lineWidth(t){this.setLineWidth(t)}get lineWidth(){return this.getLineWidth()}getLineWidth(){return this._lineDrawingStyles.lineWidth}setLineCap(t){if(this._lineDrawingStyles.lineCap!==t){this._lineDrawingStyles.lineCap=t,this.invalidateStroke();const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineCap(t){this.setLineCap(t)}get lineCap(){return this.getLineCap()}getLineCap(){return this._lineDrawingStyles.lineCap}setLineJoin(t){if(this._lineDrawingStyles.lineJoin!==t){this._lineDrawingStyles.lineJoin=t,this.invalidateStroke();const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineJoin(t){this.setLineJoin(t)}get lineJoin(){return this.getLineJoin()}getLineJoin(){return this._lineDrawingStyles.lineJoin}setMiterLimit(t){if(this._lineDrawingStyles.miterLimit!==t){this._lineDrawingStyles.miterLimit=t,this.invalidateStroke();const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyLineOptions()}return this}set miterLimit(t){this.setMiterLimit(t)}get miterLimit(){return this.getMiterLimit()}getMiterLimit(){return this._lineDrawingStyles.miterLimit}setLineDash(t){if(this._lineDrawingStyles.lineDash!==t){this._lineDrawingStyles.lineDash=t||[],this.invalidateStroke();const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineDash(t){this.setLineDash(t)}get lineDash(){return this.getLineDash()}getLineDash(){return this._lineDrawingStyles.lineDash}hasLineDash(){return!!this._lineDrawingStyles.lineDash.length}setLineDashOffset(t){if(this._lineDrawingStyles.lineDashOffset!==t){this._lineDrawingStyles.lineDashOffset=t,this.invalidateStroke();const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineDashOffset(t){this.setLineDashOffset(t)}get lineDashOffset(){return this.getLineDashOffset()}getLineDashOffset(){return this._lineDrawingStyles.lineDashOffset}setLineStyles(t){return this._lineDrawingStyles=t,this.invalidateStroke(),this}set lineStyles(t){this.setLineStyles(t)}get lineStyles(){return this.getLineStyles()}getLineStyles(){return this._lineDrawingStyles}setCachedPaints(t){this._cachedPaints=t.filter(s=>s instanceof Ul);const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyCachedPaints();return this}set cachedPaints(t){this.setCachedPaints(t)}get cachedPaints(){return this.getCachedPaints()}getCachedPaints(){return this._cachedPaints}addCachedPaint(t){if(t instanceof Ul){this._cachedPaints.push(t);const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyCachedPaints()}}removeCachedPaint(t){if(t instanceof Ul){gs(this._cachedPaints,t);const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyCachedPaints()}}beforeCanvasFill(t){const n=this.getFillValue();t.setFillStyle(n),n.transformMatrix&&(t.context.save(),n.transformMatrix.canvasAppendTransform(t.context))}afterCanvasFill(t){this.getFillValue().transformMatrix&&t.context.restore()}beforeCanvasStroke(t){const n=this.getStrokeValue();if(t.setStrokeStyle(this._stroke),t.setLineCap(this.getLineCap()),t.setLineJoin(this.getLineJoin()),n.transformMatrix){const r=1/n.transformMatrix.getScaleVector().x;t.context.save(),n.transformMatrix.canvasAppendTransform(t.context),t.setLineWidth(this.getLineWidth()*r),t.setMiterLimit(this.getMiterLimit()*r),t.setLineDash(this.getLineDash().map(a=>a*r)),t.setLineDashOffset(this.getLineDashOffset()*r)}else t.setLineWidth(this.getLineWidth()),t.setMiterLimit(this.getMiterLimit()),t.setLineDash(this.getLineDash()),t.setLineDashOffset(this.getLineDashOffset())}afterCanvasStroke(t){this.getStrokeValue().transformMatrix&&t.context.restore()}getCSSFill(){const t=this.getFillValue();return t?t.toCSS?t.toCSS():t:"transparent"}getSimpleCSSStroke(){const t=this.getStrokeValue();return t?t.toCSS?t.toCSS():t:"transparent"}appendFillablePropString(t,n){return this._fill&&(n&&(n+=`,
`),typeof this.getFillValue()=="string"?n+=`${t}fill: '${this.getFillValue()}'`:n+=`${t}fill: ${this.getFillValue()}`),n}appendStrokablePropString(t,n){function s(r,a,o){n&&(n+=`,
`),!o&&typeof a=="string"?n+=`${t+r}: '${a}'`:n+=`${t+r}: ${a}`}if(this._stroke){const r=new Hc,a=this.getStrokeValue();typeof a=="string"?s("stroke",a):s("stroke",a?a.toString():"null",!0),ie.each(["lineWidth","lineCap","miterLimit","lineJoin","lineDashOffset"],o=>{this[o]!==r[o]&&s(o,this[o])}),this.lineDash.length&&s("lineDash",JSON.stringify(this.lineDash),!0)}return n}getFillRendererBitmask(){let t=0;return U8&&this._fill&&this._fill.isGradient||(t|=qe.bitmaskSVG),t|=qe.bitmaskCanvas,this.hasFill()&&(this._fill&&this._fill.isPattern||this._fill&&this._fill.isGradient)||(t|=qe.bitmaskDOM,t|=qe.bitmaskWebGL),t}getStrokeRendererBitmask(){let t=0;return t|=qe.bitmaskCanvas,t|=qe.bitmaskSVG,this.hasStroke()||(t|=qe.bitmaskDOM,t|=qe.bitmaskWebGL),t}invalidateFill(){this.invalidateSupportedRenderers();const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyFill()}invalidateStroke(){this.invalidateSupportedRenderers();const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyStroke()}});xS.DEFAULT_OPTIONS=Lm;const G8=["boundsMethod","shape","shapeProperty"],Gy={shape:null,boundsMethod:"accurate"};let bi=class extends xS(Ge){constructor(e,t){e||t?.shape;const n={boundsMethod:Gy.boundsMethod};ai(e)?n.shapeProperty=e:n.shape=e;const s=Ne()(n,t);super(),this._shapeProperty=new Nl(null,!1,this.onShapePropertyChange.bind(this)),this._shape=Gy.shape,this._strokedShape=null,this._boundsMethod=Gy.boundsMethod,this._invalidShapeListener=this.invalidateShape.bind(this),this._invalidShapeListenerAttached=!1,this.invalidateSupportedRenderers(),this.mutate(s)}setShape(e){return this._shapeProperty.value=e,this}set shape(e){this.setShape(e)}get shape(){return this.getShape()}getShape(){return this._shape}onShapePropertyChange(e){this._shape!==e&&(this._invalidShapeListenerAttached&&this.detachShapeListener(),typeof e=="string"&&(e=new zt(e)),this._shape=e,this.invalidateShape(),this._shape&&!this._shape.isImmutable()&&this.attachShapeListener())}setShapeProperty(e){return this._shapeProperty.setTargetProperty(e)}set shapeProperty(e){this.setShapeProperty(e)}get shapeProperty(){return this.getShapeProperty()}getShapeProperty(){return this._shapeProperty}getStrokedShape(){return this._strokedShape||(this._strokedShape=this.getShape().getStrokedShape(this._lineDrawingStyles)),this._strokedShape}getPathRendererBitmask(){return qe.bitmaskCanvas|qe.bitmaskSVG}invalidateSupportedRenderers(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getPathRendererBitmask())}invalidateShape(){this.invalidatePath();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyShape();this._invalidShapeListenerAttached&&this._shape&&this._shape.isImmutable()&&this.detachShapeListener()}invalidatePath(){this._strokedShape=null,this.invalidateSelf()}attachShapeListener(){this.isDisposed||(this._shape.invalidatedEmitter.addListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!0)}detachShapeListener(){this._shape.invalidatedEmitter.removeListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!1}updateSelfBounds(){const e=this.hasShape()?this.computeShapeBounds():pt.NOTHING,t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}setBoundsMethod(e){return this._boundsMethod!==e&&(this._boundsMethod=e,this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit()),this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}computeShapeBounds(){const e=this.getShape();if(this._boundsMethod==="none"||!e)return pt.NOTHING;if(!this.hasPaintableStroke()||this._boundsMethod==="unstroked")return e.bounds;if(this._boundsMethod==="accurate")return e.getStrokedBounds(this.getLineStyles());{let t;return this._boundsMethod==="safePadding"&&this.getLineJoin()==="miter"?t=this.getMiterLimit():this.getLineCap()==="square"?t=Math.SQRT2:t=1,e.bounds.dilated(t*this.getLineWidth()/2)}}areSelfBoundsValid(){return this._boundsMethod==="accurate"||this._boundsMethod==="safePadding"?!0:this._boundsMethod==="none"?!1:!this.hasStroke()}getTransformedSelfBounds(e){return(this._stroke?this.getStrokedShape():this.getShape()).getBoundsWithTransform(e)}getTransformedSafeSelfBounds(e){return this.getTransformedSelfBounds(e)}invalidateStroke(){this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit(),super.invalidateStroke()}hasShape(){return!!this._shape}canvasPaintSelf(e,t){C2.prototype.paintCanvas(e,this,t)}createSVGDrawable(e,t){return DI.createFromPool(e,t)}createCanvasDrawable(e,t){return C2.createFromPool(e,t)}isPainted(){return!0}containsPointSelf(e){let t=!1;return this.hasShape()&&(this._fillPickable&&(t=this.getShape().containsPoint(e)),!t&&this._strokePickable&&(t=this.getStrokedShape().containsPoint(e))),t}getSelfShape(){return zt.union([...this.hasShape()&&this._fillPickable?[this.getShape()]:[],...this.hasShape()&&this._strokePickable?[this.getStrokedShape()]:[]])}intersectsBoundsSelf(e){return this._shape?this._shape.intersectsBounds(e):!1}requiresSVGBoundsWorkaround(){if(!this._stroke||!(this._stroke instanceof Ul)||!this.hasShape())return!1;const e=this.computeShapeBounds();return e.width*e.height===0}getDebugHTMLExtras(){return this._shape?` (<span style="color: #88f" onclick="window.open( 'data:text/plain;charset=utf-8,' + encodeURIComponent( '${this._shape.getSVGPath()}' ) );">path</span>)`:""}dispose(){this._invalidShapeListenerAttached&&this.detachShapeListener(),this._shapeProperty.dispose(),super.dispose()}mutate(e){return super.mutate(e)}};bi.DEFAULT_PATH_OPTIONS=Ut({},Ge.DEFAULT_NODE_OPTIONS,Gy);bi.prototype._mutatorKeys=[...II,...G8,...Ge.prototype._mutatorKeys];bi.prototype.drawableMarkFlags=[...Ge.prototype.drawableMarkFlags,...LI,"shape"];const W8={width:sr,height:sr};class ji{constructor(e,t){this.width=e,this.height=t}toString(){return`[${this.width}w, ${this.height}h]`}set(e){return this.width=e.width,this.height=e.height,this}setWidth(e){return this.width=e,this}setHeight(e){return this.height=e,this}copy(e){return e?e.set(this):new ji(this.width,this.height)}swapped(){return new ji(this.height,this.width)}toBounds(e,t){return e=e!==void 0?e:0,t=t!==void 0?t:0,new pt(e,t,this.width+e,this.height+t)}equals(e){return this.width===e.width&&this.height===e.height}equalsEpsilon(e,t=0){return Math.max(Math.abs(this.width-e.width),Math.abs(this.height-e.height))<=t}toStateObject(){return{width:sr.toStateObject(this.width),height:sr.toStateObject(this.height)}}static fromStateObject(e){return new ji(sr.fromStateObject(e.width),sr.fromStateObject(e.height))}}ji.Dimension2IO=new ui("Dimension2IO",{valueType:ji,documentation:'A dimension with "width" and "height" members.',stateSchema:W8,toStateObject:i=>i.toStateObject(),fromStateObject:i=>ji.fromStateObject(i)});class D2 extends a0(fd){writeRectangularPath(e,t){e.beginPath(),e.moveTo(t._rectX,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY+t._rectHeight),e.lineTo(t._rectX,t._rectY+t._rectHeight),e.closePath()}paintCanvas(e,t,n){const s=e.context;if(t.isRounded()){s.beginPath();const r=t.getMaximumArcSize(),a=Math.min(t._cornerXRadius,r),o=Math.min(t._cornerYRadius,r),l=t._rectX+a,h=t._rectX+t._rectWidth-a,c=t._rectY+o,f=t._rectY+t._rectHeight-o;a===o?(s.arc(h,c,a,-Math.PI/2,0,!1),s.arc(h,f,a,0,Math.PI/2,!1),s.arc(l,f,a,Math.PI/2,Math.PI,!1),s.arc(l,c,a,Math.PI,Math.PI*3/2,!1)):(s.ellipse(h,c,a,o,0,-Math.PI/2,0,!1),s.ellipse(h,f,a,o,0,0,Math.PI/2,!1),s.ellipse(l,f,a,o,0,Math.PI/2,Math.PI,!1),s.ellipse(l,c,a,o,0,Math.PI,Math.PI*3/2,!1)),s.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e))}else t.hasFill()&&(t.getFillValue().transformMatrix?(this.writeRectangularPath(s,t),t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)):(t.beforeCanvasFill(e),s.fillRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasFill(e))),t.hasPaintableStroke()&&(t.getStrokeValue().transformMatrix?(this.writeRectangularPath(s,t),t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e)):(t.beforeCanvasStroke(e),s.strokeRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasStroke(e)))}markDirtyRectangle(){this.markPaintDirty()}markDirtyX(){this.markDirtyRectangle()}markDirtyY(){this.markDirtyRectangle()}markDirtyWidth(){this.markDirtyRectangle()}markDirtyHeight(){this.markDirtyRectangle()}markDirtyCornerXRadius(){this.markDirtyRectangle()}markDirtyCornerYRadius(){this.markDirtyRectangle()}}es.mixInto(D2);class l0 extends Gb{initialize(e,t){return super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.markTransformDirty(),this.visibilityDirty=!0,t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}markTransformDirty(){this.transformDirty=!0,this.markDirty()}getTransformMatrix(){return this.instance.relativeTransform.validate(),this.instance.relativeTransform.matrix}update(){return super.update()?(this.updateDOM(),this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.visibility=this.visible?"":"hidden"),this.cleanPaintableState&&this.cleanPaintableState(),!0):!1}updateDOM(){}updateSelfVisibility(){super.updateSelfVisibility(),this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}const ES=gr(i=>class extends o0(i){initialize(e,t,...n){super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyRectangle(){this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0,this.markPaintDirty()}markDirtyX(){this.dirtyX=!0,this.markPaintDirty()}markDirtyY(){this.dirtyY=!0,this.markPaintDirty()}markDirtyWidth(){this.dirtyWidth=!0,this.markPaintDirty()}markDirtyHeight(){this.dirtyHeight=!0,this.markPaintDirty()}markDirtyCornerXRadius(){this.dirtyCornerXRadius=!0,this.markPaintDirty()}markDirtyCornerYRadius(){this.dirtyCornerYRadius=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyX=!1,this.dirtyY=!1,this.dirtyWidth=!1,this.dirtyHeight=!1,this.dirtyCornerXRadius=!1,this.dirtyCornerYRadius=!1}}),K8=document.createElement("canvas"),Pp=K8.getContext("2d");function cu(i,e){return new Oe(i,e)}const oA=mi.transform,Y8=mi.transformOrigin||"transformOrigin";let cE=!0,lA;const Qi={prepareForTransform(i){i.style[Y8]="top left"},applyPreparedTransform(i,e){e.style[oA]=i.getCSSTransform()},setTransform(i,e){e.style[oA]=i},unsetTransform(i){i.style[oA]=""},polyfillRequestAnimationFrame(){(!self.requestAnimationFrame||!self.cancelAnimationFrame)&&(!mi.requestAnimationFrame||!mi.cancelAnimationFrame?(self.requestAnimationFrame=i=>{const e=Date.now();return self.setTimeout(()=>{i(Date.now()-e)},16)},self.cancelAnimationFrame=clearTimeout):(self.requestAnimationFrame=window[mi.requestAnimationFrame],self.cancelAnimationFrame=window[mi.cancelAnimationFrame]))},backingStorePixelRatio(i){return i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1},backingScale(i){if("devicePixelRatio"in self){const e=Qi.backingStorePixelRatio(i);return self.devicePixelRatio/e}return 1},supportsNativeCanvasFilter(){return!!mi.canvasFilter},supportsImageDataCanvasFilter(){return Qi.backingStorePixelRatio(Pp)===1},scanBounds(i,e,t){const n=ie.map(ie.range(e),()=>!1),s=ie.map(ie.range(e),()=>!1);for(let c=0;c<e;c++)for(let f=0;f<e;f++){const g=4*(f*e+c);(i.data[g]!==0||i.data[g+1]!==0||i.data[g+2]!==0||i.data[g+3]!==0)&&(n[c]=!0,s[f]=!0)}const r=ie.indexOf(n,!0),a=ie.lastIndexOf(n,!0),o=ie.indexOf(s,!0),l=ie.lastIndexOf(s,!0),h=e/16;return{minBounds:new pt(r<1||r>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(cu(r+1+h,0)).x,o<1||o>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(cu(0,o+1+h)).y,a<1||a>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(cu(a-h,0)).x,l<1||l>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(cu(0,l-h)).y),maxBounds:new pt(r<1||r>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(cu(r-1-h,0)).x,o<1||o>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(cu(0,o-1-h)).y,a<1||a>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(cu(a+2+h,0)).x,l<1||l>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(cu(0,l+2+h)).y)}},canvasAccurateBounds(i,e){const t=e&&e.precision?e.precision:.001,n=e&&e.resolution?e.resolution:128,s=e&&e.initialScale?e.initialScale:1/16;let r=pt.NOTHING,a=pt.EVERYTHING;const o=document.createElement("canvas");o.width=n,o.height=n;const l=o.getContext("2d");function h(T){l.save(),T.matrix.canvasSetTransform(l),i(l),l.restore();const D=l.getImageData(0,0,n,n),M=Qi.scanBounds(D,n,T);return l.clearRect(0,0,n,n),M}function c(T){const M=(n-4)/(T.maxX-T.minX),B=(n-2*2)/(T.maxY-T.minY),O=-M*T.minX+2,x=-B*T.minY+2;return new $r(It.translation(O,x).timesMatrix(It.scaling(M,B)))}const f=new $r;f.append(It.translation(n/2,n/2)),f.append(It.scaling(s));const g=h(f);r=r.union(g.minBounds),a=a.intersection(g.maxBounds);let v,A,P;for(v=a.minY,A=a.maxY;isFinite(r.minX)&&isFinite(a.minX)&&Math.abs(r.minX-a.minX)>t&&(P=h(c(new pt(a.minX,v,r.minX,A))),!(r.minX<=P.minBounds.minX&&a.minX>=P.maxBounds.minX));)r=r.withMinX(Math.min(r.minX,P.minBounds.minX)),a=a.withMinX(Math.max(a.minX,P.maxBounds.minX)),v=Math.max(v,P.maxBounds.minY),A=Math.min(A,P.maxBounds.maxY);for(v=a.minY,A=a.maxY;isFinite(r.maxX)&&isFinite(a.maxX)&&Math.abs(r.maxX-a.maxX)>t&&(P=h(c(new pt(r.maxX,v,a.maxX,A))),!(r.maxX>=P.minBounds.maxX&&a.maxX<=P.maxBounds.maxX));)r=r.withMaxX(Math.max(r.maxX,P.minBounds.maxX)),a=a.withMaxX(Math.min(a.maxX,P.maxBounds.maxX)),v=Math.max(v,P.maxBounds.minY),A=Math.min(A,P.maxBounds.maxY);for(v=a.minX,A=a.maxX;isFinite(r.minY)&&isFinite(a.minY)&&Math.abs(r.minY-a.minY)>t&&(P=h(c(new pt(v,a.minY,A,r.minY))),!(r.minY<=P.minBounds.minY&&a.minY>=P.maxBounds.minY));)r=r.withMinY(Math.min(r.minY,P.minBounds.minY)),a=a.withMinY(Math.max(a.minY,P.maxBounds.minY)),v=Math.max(v,P.maxBounds.minX),A=Math.min(A,P.maxBounds.maxX);for(v=a.minX,A=a.maxX;isFinite(r.maxY)&&isFinite(a.maxY)&&Math.abs(r.maxY-a.maxY)>t&&(P=h(c(new pt(v,r.maxY,A,a.maxY))),!(r.maxY>=P.minBounds.maxY&&a.maxY<=P.maxBounds.maxY));)r=r.withMaxY(Math.max(r.maxY,P.minBounds.maxY)),a=a.withMaxY(Math.min(a.maxY,P.maxBounds.maxY)),v=Math.max(v,P.maxBounds.minX),A=Math.min(A,P.maxBounds.maxX);const w=new pt(isFinite(r.minX)&&isFinite(a.minX)?(r.minX+a.minX)/2:Number.POSITIVE_INFINITY,isFinite(r.minY)&&isFinite(a.minY)?(r.minY+a.minY)/2:Number.POSITIVE_INFINITY,isFinite(r.maxX)&&isFinite(a.maxX)?(r.maxX+a.maxX)/2:Number.NEGATIVE_INFINITY,isFinite(r.maxY)&&isFinite(a.maxY)?(r.maxY+a.maxY)/2:Number.NEGATIVE_INFINITY);return w.minBounds=r,w.maxBounds=a,w.isConsistent=a.containsBounds(r),w.precision=Math.max(Math.abs(r.minX-a.minX),Math.abs(r.minY-a.minY),Math.abs(r.maxX-a.maxX),Math.abs(r.maxY-a.maxY)),w},toPowerOf2(i){let e=1;for(;e<i;)e*=2;return e},createShader(i,e,t){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),i.getShaderParameter(n,i.COMPILE_STATUS)||(console.log("GLSL compile error:"),console.log(i.getShaderInfoLog(n)),console.log(e)),n},applyWebGLContextDefaults(i){i.clearColor(0,0,0,0),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA)},setWebGLEnabled(i){cE=i},checkWebGLSupport(i){if(!cE)return!1;const e=document.createElement("canvas"),t={failIfMajorPerformanceCaveat:!0};try{const n=!!self.WebGLRenderingContext&&(e.getContext("webgl",t)||e.getContext("experimental-webgl",t));if(!n)return!1;if(i){for(let s=0;s<i.length;s++)if(n.getExtension(i[s])===null)return!1}return!0}catch{return!1}},checkIE11StencilSupport(){const i=document.createElement("canvas");try{const e=!!self.WebGLRenderingContext&&(i.getContext("webgl")||i.getContext("experimental-webgl"));return e?(e.clearStencil(0),e.getError()===0):!1}catch{return!1}},get isWebGLSupported(){return lA===void 0&&(lA=Qi.checkWebGLSupport()),lA},loseContext(i){const e=i.getExtension("WEBGL_lose_context");e&&(e.loseContext(),setTimeout(()=>{e.restoreContext()},1e3))},safariEmbeddingMarkWorkaround(i){if(Zn.safari){const e=i.split("");let t="",n=!1;for(let s=0;s<e.length;s++){const r=e[s],a=r==="‪"||r==="‫"||r==="‬";n&&a&&(t+="​"),t+=r,n=a}return t}else return i}},hA=It.pool.fetch();class MI extends ES(l0){constructor(e,t){super(e,t),Qi.prepareForTransform(this.domElement)}initialize(e,t){if(super.initialize(e,t),!this.fillElement||!this.strokeElement){const n=document.createElement("div");this.fillElement=n,n.style.display="block",n.style.position="absolute",n.style.left="0",n.style.top="0",n.style.pointerEvents="none";const s=document.createElement("div");this.strokeElement=s,s.style.display="block",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.pointerEvents="none",n.appendChild(s)}this.domElement=this.fillElement}updateDOM(){const e=this.node,t=this.fillElement,n=this.strokeElement;if(this.paintDirty){const s=Math.min(e._cornerXRadius,e._cornerYRadius),r=this.dirtyCornerXRadius||this.dirtyCornerYRadius;if(this.dirtyWidth&&(t.style.width=`${e._rectWidth}px`),this.dirtyHeight&&(t.style.height=`${e._rectHeight}px`),r&&(t.style[mi.borderRadius]=`${s}px`),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?n.style.borderStyle="solid":n.style.borderStyle="none"),e.hasStroke()){const a=!this.hadStroke;(a||this.dirtyWidth||this.dirtyLineWidth)&&(n.style.width=`${e._rectWidth-e.getLineWidth()}px`),(a||this.dirtyHeight||this.dirtyLineWidth)&&(n.style.height=`${e._rectHeight-e.getLineWidth()}px`),(a||this.dirtyLineWidth)&&(n.style.left=`${-e.getLineWidth()/2}px`,n.style.top=`${-e.getLineWidth()/2}px`,n.style.borderWidth=`${e.getLineWidth()}px`),(a||this.dirtyStroke)&&(n.style.borderColor=e.getSimpleCSSStroke()),(a||r||this.dirtyLineWidth||this.dirtyLineOptions)&&(n.style[mi.borderRadius]=e.isRounded()||e.getLineJoin()==="round"?`${s+e.getLineWidth()/2}px`:"0")}}if(this.transformDirty||this.dirtyX||this.dirtyY){hA.set(this.getTransformMatrix());const s=It.translation(e._rectX,e._rectY);hA.multiplyMatrix(s),s.freeToPool(),Qi.applyPreparedTransform(hA,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}es.mixInto(MI);const j8=!0;class OI extends ES(Vf){initialize(e,t){super.initialize(e,t,!0,j8),this.lastArcW=-1,this.lastArcH=-1,this.svgElement=this.svgElement||document.createElementNS(Kn,"rect")}updateSVGSelf(){const e=this.svgElement;if(this.dirtyX&&e.setAttribute("x",this.node._rectX),this.dirtyY&&e.setAttribute("y",this.node._rectY),this.dirtyWidth&&e.setAttribute("width",this.node._rectWidth),this.dirtyHeight&&e.setAttribute("height",this.node._rectHeight),this.dirtyCornerXRadius||this.dirtyCornerYRadius||this.dirtyWidth||this.dirtyHeight){let t=0,n=0;if(this.node.isRounded()){const s=this.node.getMaximumArcSize();t=Math.min(this.node._cornerXRadius,s),n=Math.min(this.node._cornerYRadius,s)}t!==this.lastArcW&&(this.lastArcW=t,e.setAttribute("rx",t)),n!==this.lastArcH&&(this.lastArcH=n,e.setAttribute("ry",n))}this.updateFillStrokeStyle(e)}}es.mixInto(OI);class VS extends Gb{initialize(e,t){return super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}markTransformDirty(){this.markDirty()}updateSelfVisibility(){super.updateSelfVisibility(),this.markDirty()}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}const X8=new ct("transparent");class kS extends ES(VS){initialize(e,t){super.initialize(e,t),this.vertexArray||(this.vertexArray=new Float32Array(6*6)),this.upperLeft=new Oe(0,0),this.lowerLeft=new Oe(0,0),this.upperRight=new Oe(0,0),this.lowerRight=new Oe(0,0),this.transformDirty=!0,this.includeVertices=!0}onAddToBlock(e){this.webglBlock=e,this.markDirty()}onRemoveFromBlock(e){}markTransformDirty(){this.transformDirty=!0,super.markTransformDirty()}update(){if(!super.update())return!1;if(this.dirtyFill&&(this.includeVertices=this.node.hasFill(),this.includeVertices)){const e=ai(this.node.fill)?this.node.fill.value:this.node.fill,t=X8.set(e),n=t.red/255,s=t.green/255,r=t.blue/255,a=t.alpha;for(let o=0;o<6;o++){const l=o*6;this.vertexArray[2+l]=n,this.vertexArray[3+l]=s,this.vertexArray[4+l]=r,this.vertexArray[5+l]=a}}if(this.transformDirty||this.dirtyX||this.dirtyY||this.dirtyWidth||this.dirtyHeight){this.transformDirty=!1;const e=this.node._rectX,t=this.node._rectY,n=this.node._rectWidth,s=this.node._rectHeight,r=this.instance.relativeTransform.matrix;r.multiplyVector2(this.upperLeft.setXY(e,t)),r.multiplyVector2(this.lowerLeft.setXY(e,t+s)),r.multiplyVector2(this.upperRight.setXY(e+n,t)),r.multiplyVector2(this.lowerRight.setXY(e+n,t+s)),this.vertexArray[0]=this.upperLeft.x,this.vertexArray[1]=this.upperLeft.y,this.vertexArray[6]=this.lowerLeft.x,this.vertexArray[7]=this.lowerLeft.y,this.vertexArray[12]=this.upperRight.x,this.vertexArray[13]=this.upperRight.y,this.vertexArray[18]=this.upperRight.x,this.vertexArray[19]=this.upperRight.y,this.vertexArray[24]=this.lowerLeft.x,this.vertexArray[25]=this.lowerLeft.y,this.vertexArray[30]=this.lowerRight.x,this.vertexArray[31]=this.lowerRight.y}return this.setToCleanState(),this.cleanPaintableState(),!0}}kS.prototype.webglRenderer=qe.webglVertexColorPolygons;es.mixInto(kS);const zu=(i,e,t)=>{const n=`_${i}PendingOptions`,s=`_${i}IsConstructed`;return class extends t{constructor(...a){super(...a),this[s]=!0,this.mutate(this[n]),this[n]=void 0}mutate(a){return a&&!this[s]&&(this[n]=Ut(this[n]||{},ie.pick(a,e)),a=ie.omit(a,e)),super.mutate(a)}}},my=1e-9,I2=["preferredHeight","minimumHeight","localPreferredHeight","localMinimumHeight","heightSizable"],Q8=gr(i=>{const e=zu("HeightSizable",I2,class extends i{constructor(...n){super(...n),this.preferredHeightProperty=new oi(null),this.minimumHeightProperty=new oi(null),this.localPreferredHeightProperty=new oi(null),this.localMinimumHeightProperty=new oi(null),this.isHeightResizableProperty=new oi(!0),this._preferredSizeChanging=!1,this._minimumSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock=!1,this._minimumSizeChangeAttemptDuringLock=!1,this._updatePreferredHeightListener=this._updatePreferredHeight.bind(this),this._updateLocalPreferredHeightListener=this._updateLocalPreferredHeight.bind(this),this._updateMinimumHeightListener=this._updateMinimumHeight.bind(this),this._updateLocalMinimumHeightListener=this._updateLocalMinimumHeight.bind(this),this.preferredHeightProperty.lazyLink(this._updateLocalPreferredHeightListener),this.localPreferredHeightProperty.lazyLink(this._updatePreferredHeightListener),this.minimumHeightProperty.lazyLink(this._updateLocalMinimumHeightListener),this.localMinimumHeightProperty.lazyLink(this._updateMinimumHeightListener),this.transformEmitter.addListener(this._updateLocalPreferredHeightListener),this.transformEmitter.addListener(this._updateMinimumHeightListener)}get preferredHeight(){return this.preferredHeightProperty.value}set preferredHeight(n){this.preferredHeightProperty.value=n}get localPreferredHeight(){return this.localPreferredHeightProperty.value}set localPreferredHeight(n){this.localPreferredHeightProperty.value=n}get minimumHeight(){return this.minimumHeightProperty.value}set minimumHeight(n){this.minimumHeightProperty.value=n}get localMinimumHeight(){return this.localMinimumHeightProperty.value}set localMinimumHeight(n){this.localMinimumHeightProperty.value=n}get heightSizable(){return this.isHeightResizableProperty.value}set heightSizable(n){this.isHeightResizableProperty.value=n}get extendsHeightSizable(){return!0}validateLocalPreferredHeight(){}_calculateLocalPreferredHeight(){return this.matrix.isAligned()&&this.preferredHeight!==null?Math.abs(this.transform.inverseDeltaY(this.preferredHeight)):null}_onReentrantPreferredHeight(){this._updateLocalPreferredHeightListener()}_updateLocalPreferredHeight(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0;do{this._preferredSizeChangeAttemptDuringLock=!1;const n=this._calculateLocalPreferredHeight();(this.localPreferredHeightProperty.value===null||n===null||Math.abs(this.localPreferredHeightProperty.value-n)>my)&&(this.localPreferredHeightProperty.value=n)}while(this._preferredSizeChangeAttemptDuringLock);this._preferredSizeChanging=!1}}_calculatePreferredHeight(){return this.matrix.isAligned()&&this.localPreferredHeight!==null?Math.abs(this.transform.transformDeltaY(this.localPreferredHeight)):null}_updatePreferredHeight(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0,this._preferredSizeChangeAttemptDuringLock=!1;const n=this._calculatePreferredHeight();(this.preferredHeightProperty.value===null||n===null||Math.abs(this.preferredHeightProperty.value-n)>my)&&(this.preferredHeightProperty.value=n),this._preferredSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock&&this._onReentrantPreferredHeight()}}_calculateLocalMinimumHeight(){return this.matrix.isAligned()&&this.minimumHeight!==null?Math.abs(this.transform.inverseDeltaY(this.minimumHeight)):null}_onReentrantLocalMinimumHeight(){this._updateMinimumHeight()}_updateLocalMinimumHeight(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0,this._minimumSizeChangeAttemptDuringLock=!1;const n=this._calculateLocalMinimumHeight();(this.localMinimumHeightProperty.value===null||n===null||Math.abs(this.localMinimumHeightProperty.value-n)>my)&&(this.localMinimumHeightProperty.value=n),this._minimumSizeChanging=!1,this._minimumSizeChangeAttemptDuringLock&&this._onReentrantLocalMinimumHeight()}}_calculateMinimumHeight(){return this.matrix.isAligned()&&this.localMinimumHeight!==null?Math.abs(this.transform.transformDeltaY(this.localMinimumHeight)):null}_updateMinimumHeight(){if(!this._minimumSizeChanging){this._minimumSizeChanging=!0;do{this._minimumSizeChangeAttemptDuringLock=!1;const n=this._calculateMinimumHeight();(this.minimumHeightProperty.value===null||n===null||Math.abs(this.minimumHeightProperty.value-n)>my)&&(this.minimumHeightProperty.value=n)}while(this._minimumSizeChangeAttemptDuringLock);this._minimumSizeChanging=!1}}mutate(n){return super.mutate(n)}});if(e.prototype._mutatorKeys){const t=e.prototype._mutatorKeys,n=I2,s=t.indexOf(zh[0]);e.prototype._mutatorKeys=[...t.slice(0,s),...n,...t.slice(s)]}return e}),gy=1e-9,L2=["preferredWidth","minimumWidth","localPreferredWidth","localMinimumWidth","widthSizable"],nh=gr(i=>{const e=zu("WidthSizable",L2,class extends i{constructor(...n){super(...n),this.preferredWidthProperty=new oi(null),this.minimumWidthProperty=new oi(null),this.localPreferredWidthProperty=new oi(null),this.localMinimumWidthProperty=new oi(null),this.isWidthResizableProperty=new oi(!0),this._preferredSizeChanging=!1,this._minimumSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock=!1,this._minimumSizeChangeAttemptDuringLock=!1,this._updatePreferredWidthListener=this._updatePreferredWidth.bind(this),this._updateLocalPreferredWidthListener=this._updateLocalPreferredWidth.bind(this),this._updateMinimumWidthListener=this._updateMinimumWidth.bind(this),this._updateLocalMinimumWidthListener=this._updateLocalMinimumWidth.bind(this),this.preferredWidthProperty.lazyLink(this._updateLocalPreferredWidthListener),this.localPreferredWidthProperty.lazyLink(this._updatePreferredWidthListener),this.minimumWidthProperty.lazyLink(this._updateLocalMinimumWidthListener),this.localMinimumWidthProperty.lazyLink(this._updateMinimumWidthListener),this.transformEmitter.addListener(this._updateLocalPreferredWidthListener),this.transformEmitter.addListener(this._updateMinimumWidthListener)}get preferredWidth(){return this.preferredWidthProperty.value}set preferredWidth(n){this.preferredWidthProperty.value=n}get localPreferredWidth(){return this.localPreferredWidthProperty.value}set localPreferredWidth(n){this.localPreferredWidthProperty.value=n}get minimumWidth(){return this.minimumWidthProperty.value}set minimumWidth(n){this.minimumWidthProperty.value=n}get localMinimumWidth(){return this.localMinimumWidthProperty.value}set localMinimumWidth(n){this.localMinimumWidthProperty.value=n}get widthSizable(){return this.isWidthResizableProperty.value}set widthSizable(n){this.isWidthResizableProperty.value=n}get extendsWidthSizable(){return!0}validateLocalPreferredWidth(){}_calculateLocalPreferredWidth(){return this.matrix.isAligned()&&this.preferredWidth!==null?Math.abs(this.transform.inverseDeltaX(this.preferredWidth)):null}_onReentrantPreferredWidth(){this._updateLocalPreferredWidthListener()}_updateLocalPreferredWidth(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0;do{this._preferredSizeChangeAttemptDuringLock=!1;const n=this._calculateLocalPreferredWidth();(this.localPreferredWidthProperty.value===null||n===null||Math.abs(this.localPreferredWidthProperty.value-n)>gy)&&(this.localPreferredWidthProperty.value=n)}while(this._preferredSizeChangeAttemptDuringLock);this._preferredSizeChanging=!1}}_calculatePreferredWidth(){return this.matrix.isAligned()&&this.localPreferredWidth!==null?Math.abs(this.transform.transformDeltaX(this.localPreferredWidth)):null}_updatePreferredWidth(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0,this._preferredSizeChangeAttemptDuringLock=!1;const n=this._calculatePreferredWidth();(this.preferredWidthProperty.value===null||n===null||Math.abs(this.preferredWidthProperty.value-n)>gy)&&(this.preferredWidthProperty.value=n),this._preferredSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock&&this._onReentrantPreferredWidth()}}_calculateLocalMinimumWidth(){return this.matrix.isAligned()&&this.minimumWidth!==null?Math.abs(this.transform.inverseDeltaX(this.minimumWidth)):null}_onReentrantLocalMinimumWidth(){this._updateMinimumWidthListener()}_updateLocalMinimumWidth(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0;const n=this._calculateLocalMinimumWidth();this._minimumSizeChangeAttemptDuringLock=!1,(this.localMinimumWidthProperty.value===null||n===null||Math.abs(this.localMinimumWidthProperty.value-n)>gy)&&(this.localMinimumWidthProperty.value=n),this._minimumSizeChanging=!1,this._minimumSizeChangeAttemptDuringLock&&this._onReentrantLocalMinimumWidth()}}_calculateMinimumWidth(){return this.matrix.isAligned()&&this.localMinimumWidth!==null?Math.abs(this.transform.transformDeltaX(this.localMinimumWidth)):null}_updateMinimumWidth(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0;do{this._minimumSizeChangeAttemptDuringLock=!1;const n=this._calculateMinimumWidth();(this.minimumWidthProperty.value===null||n===null||Math.abs(this.minimumWidthProperty.value-n)>gy)&&(this.minimumWidthProperty.value=n)}while(this._minimumSizeChangeAttemptDuringLock);this._minimumSizeChanging=!1}}mutate(n){return super.mutate(n)}});if(e.prototype._mutatorKeys){const t=e.prototype._mutatorKeys,n=L2,s=t.indexOf(zh[0]);e.prototype._mutatorKeys=[...t.slice(0,s),...n,...t.slice(s)]}return e}),dE=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable"],NI=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable",...L2,...I2],md=gr(i=>{const e=zu("Sizable",dE,class extends nh(Q8(i)){constructor(...n){super(...n),this.preferredWidthProperty.lazyLink(this._updateLocalPreferredHeightListener),this.preferredHeightProperty.lazyLink(this._updateLocalPreferredWidthListener),this.localPreferredWidthProperty.lazyLink(this._updatePreferredHeightListener),this.localPreferredHeightProperty.lazyLink(this._updatePreferredWidthListener),this.minimumWidthProperty.lazyLink(this._updateLocalMinimumHeightListener),this.minimumHeightProperty.lazyLink(this._updateLocalMinimumWidthListener),this.localMinimumWidthProperty.lazyLink(this._updateMinimumHeightListener),this.localMinimumHeightProperty.lazyLink(this._updateMinimumWidthListener)}get preferredSize(){return this.preferredWidth===null||this.preferredHeight===null?null:new ji(this.preferredWidth,this.preferredHeight)}set preferredSize(n){this.preferredWidth=n===null?null:n.width,this.preferredHeight=n===null?null:n.height}get localPreferredSize(){return this.localPreferredWidth===null||this.localPreferredHeight===null?null:new ji(this.localPreferredWidth,this.localPreferredHeight)}set localPreferredSize(n){this.localPreferredWidth=n===null?null:n.width,this.localPreferredHeight=n===null?null:n.height}get minimumSize(){return this.minimumWidth===null||this.minimumHeight===null?null:new ji(this.minimumWidth,this.minimumHeight)}set minimumSize(n){this.minimumWidth=n===null?null:n.width,this.minimumHeight=n===null?null:n.height}get localMinimumSize(){return this.localMinimumWidth===null||this.localMinimumHeight===null?null:new ji(this.localMinimumWidth,this.localMinimumHeight)}set localMinimumSize(n){this.localMinimumWidth=n===null?null:n.width,this.localMinimumHeight=n===null?null:n.height}get sizable(){return this.widthSizable}set sizable(n){this.widthSizable=n,this.heightSizable=n}get extendsSizable(){return!0}validateLocalPreferredSize(){}mutate(n){return Na(n,["preferredSize"],["preferredWidth","preferredHeight"]),Na(n,["localPreferredSize"],["localPreferredWidth","localPreferredHeight"]),Na(n,["minimumSize"],["minimumWidth","minimumHeight"]),Na(n,["localMinimumSize"],["localMinimumWidth","localMinimumHeight"]),Na(n,["sizable"],["widthSizable","heightSizable"]),super.mutate(n)}_calculateLocalPreferredWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.preferredWidth!==null)return Math.abs(this.transform.inverseDeltaX(this.preferredWidth))}else if(this.preferredHeight!==null)return Math.abs(this.transform.getInverse().m01()*this.preferredHeight)}return null}_calculateLocalPreferredHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.preferredHeight!==null)return Math.abs(this.transform.inverseDeltaY(this.preferredHeight))}else if(this.preferredWidth!==null)return Math.abs(this.transform.getInverse().m10()*this.preferredWidth)}return null}_calculatePreferredWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localPreferredWidth!==null)return Math.abs(this.transform.transformDeltaX(this.localPreferredWidth))}else if(this.localPreferredHeight!==null)return Math.abs(this.transform.matrix.m01()*this.localPreferredHeight)}return null}_calculatePreferredHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localPreferredHeight!==null)return Math.abs(this.transform.transformDeltaY(this.localPreferredHeight))}else if(this.localPreferredWidth!==null)return Math.abs(this.transform.matrix.m10()*this.localPreferredWidth)}return null}_onReentrantLocalMinimumWidth(){this._updateMinimumWidthListener(),this._updateMinimumHeightListener()}_onReentrantLocalMinimumHeight(){this._updateMinimumWidthListener(),this._updateMinimumHeightListener()}_onReentrantPreferredWidth(){this._updateLocalPreferredWidthListener(),this._updateLocalPreferredHeightListener()}_onReentrantPreferredHeight(){this._updateLocalPreferredWidthListener(),this._updateLocalPreferredHeightListener()}_calculateLocalMinimumWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.minimumWidth!==null)return Math.abs(this.transform.inverseDeltaX(this.minimumWidth))}else if(this.minimumHeight!==null)return Math.abs(this.transform.getInverse().m01()*this.minimumHeight)}return null}_calculateLocalMinimumHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.minimumHeight!==null)return Math.abs(this.transform.inverseDeltaY(this.minimumHeight))}else if(this.minimumWidth!==null)return Math.abs(this.transform.getInverse().m10()*this.minimumWidth)}return null}_calculateMinimumWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localMinimumWidth!==null)return Math.abs(this.transform.transformDeltaX(this.localMinimumWidth))}else if(this.localMinimumHeight!==null)return Math.abs(this.transform.matrix.m01()*this.localMinimumHeight)}return null}_calculateMinimumHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localMinimumHeight!==null)return Math.abs(this.transform.transformDeltaY(this.localMinimumHeight))}else if(this.localMinimumWidth!==null)return Math.abs(this.transform.matrix.m10()*this.localMinimumWidth)}return null}});if(e.prototype._mutatorKeys){const t=e.prototype._mutatorKeys,n=dE,s=t.indexOf(zh[0]);e.prototype._mutatorKeys=[...t.slice(0,s),...n,...t.slice(s)]}return e}),zm="http://www.w3.org/1999/xlink";class tg{constructor(e){this.initialize(e)}initialize(e){const t=this.definition!==void 0;return this.definition=this.definition||document.createElementNS(Kn,"pattern"),t||(this.definition.setAttribute("patternUnits","userSpaceOnUse"),this.definition.setAttribute("patternContentUnits","userSpaceOnUse")),e.transformMatrix?this.definition.setAttribute("patternTransform",e.transformMatrix.getSVGTransform()):this.definition.removeAttribute("patternTransform"),this.definition.setAttribute("x","0"),this.definition.setAttribute("y","0"),this.definition.setAttribute("width",""+e.image.width),this.definition.setAttribute("height",""+e.image.height),this.imageElement=this.imageElement||document.createElementNS(Kn,"image"),this.imageElement.setAttribute("x","0"),this.imageElement.setAttribute("y","0"),this.imageElement.setAttribute("width",`${e.image.width}px`),this.imageElement.setAttribute("height",`${e.image.height}px`),this.imageElement.setAttributeNS(zm,"xlink:href",e.image.src),t||this.definition.appendChild(this.imageElement),this}update(){}dispose(){this.freeToPool()}freeToPool(){tg.pool.freeToPool(this)}}tg.pool=new us(tg);class Wb extends Ul{constructor(e){super(),this.image=e,this.canvasPattern=Pp.createPattern(e,"repeat")}getCanvasStyle(){return this.canvasPattern}createSVGPaint(e){return tg.pool.create(this)}toString(){return`Pattern( ${this.image.src} )`}}Wb.prototype.isPattern=!0;const J8=["rectBounds","rectSize","rectX","rectY","rectWidth","rectHeight","cornerRadius","cornerXRadius","cornerYRadius"],RI=md(bi);class xt extends RI{constructor(e,t,n,s,r,a,o){const l={sizable:!1};super(null,l);let h={};this._rectX=0,this._rectY=0,this._rectWidth=0,this._rectHeight=0,this._cornerXRadius=0,this._cornerYRadius=0,typeof e=="object"?e instanceof pt?typeof t!="number"?h=Ut(h,{rectBounds:e},t):h=Ut(h,{rectBounds:e,cornerXRadius:t,cornerYRadius:n},s):h=Ut(h,e):a===void 0?h=Ut(h,{rectX:e,rectY:t,rectWidth:n,rectHeight:s},r):h=Ut(h,{rectX:e,rectY:t,rectWidth:n,rectHeight:s,cornerXRadius:r,cornerYRadius:a},o),this.localPreferredWidthProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localPreferredHeightProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localMinimumWidthProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localMinimumHeightProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.mutate(h)}getMaximumArcSize(){return Math.min(this._rectWidth/2,this._rectHeight/2)}getStrokeRendererBitmask(){let e=super.getStrokeRendererBitmask();const t=this.getStroke();return t&&!(t instanceof ll)&&!(t instanceof Wb)&&!this.hasLineDash()&&(this.getLineJoin()==="miter"||this.getLineJoin()==="round"&&mi.borderRadius)&&(e|=qe.bitmaskDOM),this.hasStroke()||(e|=qe.bitmaskWebGL),e}getPathRendererBitmask(){let e=qe.bitmaskCanvas|qe.bitmaskSVG;const t=this.getMaximumArcSize();return(!this.hasStroke()||this.getLineWidth()<=this._rectHeight&&this.getLineWidth()<=this._rectWidth)&&(!this.isRounded()||mi.borderRadius&&this._cornerXRadius===this._cornerYRadius)&&this._cornerYRadius<=t&&this._cornerXRadius<=t&&(e|=qe.bitmaskDOM),!this.hasStroke()&&!this.isRounded()&&(e|=qe.bitmaskWebGL),e}setRect(e,t,n,s,r,a){const o=r!==void 0,l=a!==void 0;if(this._rectX===e&&this._rectY===t&&this._rectWidth===n&&this._rectHeight===s&&(!o||this._cornerXRadius===r)&&(!l||this._cornerYRadius===a))return this;this._rectX=e,this._rectY=t,this._rectWidth=n,this._rectHeight=s,this._cornerXRadius=o?r:this._cornerXRadius,this._cornerYRadius=l?a:this._cornerYRadius;const h=this._drawables.length;for(let c=0;c<h;c++)this._drawables[c].markDirtyRectangle();return this.invalidateRectangle(),this}setRectX(e){if(this._rectX!==e){this._rectX=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyX();this.invalidateRectangle()}return this}set rectX(e){this.setRectX(e)}get rectX(){return this.getRectX()}getRectX(){return this._rectX}setRectY(e){if(this._rectY!==e){this._rectY=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyY();this.invalidateRectangle()}return this}set rectY(e){this.setRectY(e)}get rectY(){return this.getRectY()}getRectY(){return this._rectY}setRectWidth(e){if(this._rectWidth!==e){this._rectWidth=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyWidth();this.invalidateRectangle()}return this}set rectWidth(e){this.setRectWidth(e)}get rectWidth(){return this.getRectWidth()}getRectWidth(){return this._rectWidth}setRectHeight(e){if(this._rectHeight!==e){this._rectHeight=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyHeight();this.invalidateRectangle()}return this}set rectHeight(e){this.setRectHeight(e)}get rectHeight(){return this.getRectHeight()}getRectHeight(){return this._rectHeight}setCornerXRadius(e){if(this._cornerXRadius!==e){this._cornerXRadius=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyCornerXRadius();this.invalidateRectangle()}return this}set cornerXRadius(e){this.setCornerXRadius(e)}get cornerXRadius(){return this.getCornerXRadius()}getCornerXRadius(){return this._cornerXRadius}setCornerYRadius(e){if(this._cornerYRadius!==e){this._cornerYRadius=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyCornerYRadius();this.invalidateRectangle()}return this}set cornerYRadius(e){this.setCornerYRadius(e)}get cornerYRadius(){return this.getCornerYRadius()}getCornerYRadius(){return this._cornerYRadius}setRectBounds(e){return this.setRect(e.x,e.y,e.width,e.height),this}set rectBounds(e){this.setRectBounds(e)}get rectBounds(){return this.getRectBounds()}getRectBounds(){return pt.rect(this._rectX,this._rectY,this._rectWidth,this._rectHeight)}setRectSize(e){return this.setRectWidth(e.width),this.setRectHeight(e.height),this}set rectSize(e){this.setRectSize(e)}get rectSize(){return this.getRectSize()}getRectSize(){return new ji(this._rectWidth,this._rectHeight)}setRectWidthFromRight(e){if(this._rectWidth!==e){const t=this._rectX+this._rectWidth;this.setRectWidth(e),this.setRectX(t-e)}return this}set rectWidthFromRight(e){this.setRectWidthFromRight(e)}get rectWidthFromRight(){return this.getRectWidth()}setRectHeightFromBottom(e){if(this._rectHeight!==e){const t=this._rectY+this._rectHeight;this.setRectHeight(e),this.setRectY(t-e)}return this}set rectHeightFromBottom(e){this.setRectHeightFromBottom(e)}get rectHeightFromBottom(){return this.getRectHeight()}isRounded(){return this._cornerXRadius!==0&&this._cornerYRadius!==0}computeShapeBounds(){let e=new pt(this._rectX,this._rectY,this._rectX+this._rectWidth,this._rectY+this._rectHeight);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}createRectangleShape(){if(this.isRounded()){const e=Math.min(this._rectWidth/2,this._rectHeight/2);return zt.roundRectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight,Math.min(e,this._cornerXRadius),Math.min(e,this._cornerYRadius)).makeImmutable()}else return zt.rectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight).makeImmutable()}invalidateRectangle(){this._shape=null,this.invalidatePath(),this.invalidateSupportedRenderers()}updatePreferredSizes(){let e=this.localPreferredWidth,t=this.localPreferredHeight;e!==null&&(e=Math.max(e,this.localMinimumWidth||0)),t!==null&&(t=Math.max(t,this.localMinimumHeight||0)),e!==null&&(this.rectWidth=this.hasStroke()?e-this.lineWidth:e),t!==null&&(this.rectHeight=this.hasStroke()?t-this.lineWidth:t)}invalidateStroke(){super.invalidateStroke(),this.updatePreferredSizes()}containsPointSelf(e){const t=this._rectX,n=this._rectY,s=this._rectWidth,r=this._rectHeight,a=this._cornerXRadius,o=this._cornerYRadius,l=this.getLineWidth()/2;let h=!0;if(this._strokePickable){const c=this.isRounded();if(!c&&this.getLineJoin()==="bevel")return super.containsPointSelf(e);const f=this.getLineJoin()==="miter"&&!c;h=h&&xt.intersects(t-l,n-l,s+2*l,r+2*l,f?0:a+l,f?0:o+l,e)}return this._fillPickable?this._strokePickable?h:xt.intersects(t,n,s,r,a,o,e):this._strokePickable?h&&!xt.intersects(t+l,n+l,s-2*l,r-2*l,a-l,o-l,e):!1}intersectsBoundsSelf(e){return!this.computeShapeBounds().intersection(e).isEmpty()}canvasPaintSelf(e,t){D2.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return MI.createFromPool(e,t)}createSVGDrawable(e,t){return OI.createFromPool(e,t)}createCanvasDrawable(e,t){return D2.createFromPool(e,t)}createWebGLDrawable(e,t){return kS.createFromPool(e,t)}setShape(e){if(e!==null)throw new Error("Cannot set the shape of a Rectangle to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createRectangleShape()),this._shape}hasShape(){return!0}setShapeProperty(e){if(e!==null)throw new Error("Cannot set the shapeProperty of a Rectangle to something non-null, it handles this itself");return this}setCornerRadius(e){return this.setCornerXRadius(e),this.setCornerYRadius(e),this}set cornerRadius(e){this.setCornerRadius(e)}get cornerRadius(){return this.getCornerRadius()}getCornerRadius(){return this._cornerXRadius}mutate(e){return super.mutate(e)}static intersects(e,t,n,s,r,a,o){const l=o.x>=e&&o.x<=e+n&&o.y>=t&&o.y<=t+s;if(!l||r<=0||a<=0)return l;const h=Math.min(n/2,s/2);r=Math.min(h,r),a=Math.min(h,a);let c,f,g=!1;if(o.x<e+n/2?(c=e+r,g=g||o.x>=c):(c=e+n-r,g=g||o.x<=c),g||(o.y<t+s/2?(f=t+a,g=g||o.y>=f):(f=t+s-a,g=g||o.y<=f),g))return!0;let v=o.x-c,A=o.y-f;return v/=r,A/=a,v*=v,A*=A,v+A<=1}static rect(e,t,n,s,r){return new xt(e,t,n,s,0,0,r)}static roundedRect(e,t,n,s,r,a,o){return new xt(e,t,n,s,r,a,o)}static bounds(e,t){return new xt(e.minX,e.minY,e.width,e.height,t)}static roundedBounds(e,t,n,s){return new xt(e.minX,e.minY,e.width,e.height,t,n,s)}static dimension(e,t){return new xt(0,0,e.width,e.height,0,0,t)}}xt.prototype._mutatorKeys=[...J8,...RI.prototype._mutatorKeys];xt.prototype.drawableMarkFlags=bi.prototype.drawableMarkFlags.concat(["x","y","width","height","cornerXRadius","cornerYRadius"]).filter(i=>i!=="shape");var h0={},BI={},Qh={};Object.defineProperty(Qh,"__esModule",{value:!0});Qh.arrayIncludes=t9;Qh.endsWith=$8;Qh.isRealNaN=M2;Qh.startsWith=Z8;Qh.stringIncludes=e9;function Z8(i,e,t){return i.substr(t||0,e.length)===e}function $8(i,e,t){var n=(t||i.length)-e.length,s=i.lastIndexOf(e,n);return s!==-1&&s===n}function e9(i,e,t){return i.indexOf(e,t||0)!==-1}function M2(i){return typeof i=="number"&&isNaN(i)}function t9(i,e,t){var n=i.length;if(n===0)return!1;for(var s=t|0,r=M2(e),a=s>=0?s:n+s;a<n;){var o=i[a++];if(o===e||r&&M2(o))return!0}return!1}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.copyPosition=r,i.default=a,i.feedPosition=t,i.findTextEnd=h,i.isWhitespaceChar=A,i.jumpPosition=n,i.lex=o,i.lexComment=f,i.lexSkipTag=D,i.lexTag=g,i.lexTagAttributes=w,i.lexTagName=P,i.lexText=c,i.makeInitialPosition=s;var e=Qh;function t(M,B,O){for(var x=M.index,Z=M.index=x+O,de=x;de<Z;de++){var $=B.charAt(de);$===`
`?(M.line++,M.column=0):M.column++}}function n(M,B,O){var x=O-M.index;return t(M,B,x)}function s(){return{index:0,column:0,line:0}}function r(M){return{index:M.index,line:M.line,column:M.column}}function a(M,B){var O={str:M,options:B,position:s(),tokens:[]};return o(O),O.tokens}function o(M){for(var B=M.str,O=M.options.childlessTags,x=B.length;M.position.index<x;){var Z=M.position.index;if(c(M),M.position.index===Z){var de=(0,e.startsWith)(B,"!--",Z+1);if(de)f(M);else{var $=g(M),me=$.toLowerCase();(0,e.arrayIncludes)(O,me)&&D($,M)}}}}var l=/[A-Za-z0-9]/;function h(M,B){for(;;){var O=M.indexOf("<",B);if(O===-1)return O;var x=M.charAt(O+1);if(x==="/"||x==="!"||l.test(x))return O;B=O+1}}function c(M){var B="text",O=M.str,x=M.position,Z=h(O,x.index);if(Z!==x.index){Z===-1&&(Z=O.length);var de=r(x),$=O.slice(x.index,Z);n(x,O,Z);var me=r(x);M.tokens.push({type:B,content:$,position:{start:de,end:me}})}}function f(M){var B=M.str,O=M.position,x=r(O);t(O,B,4);var Z=B.indexOf("-->",O.index),de=Z+3;Z===-1&&(Z=de=B.length);var $=B.slice(O.index,Z);n(O,B,de),M.tokens.push({type:"comment",content:$,position:{start:x,end:r(O)}})}function g(M){var B=M.str,O=M.position;{var x=B.charAt(O.index+1),Z=x==="/",de=r(O);t(O,B,Z?2:1),M.tokens.push({type:"tag-start",close:Z,position:{start:de}})}var $=P(M);w(M);{var me=B.charAt(O.index),ue=me==="/";t(O,B,ue?2:1);var Se=r(O);M.tokens.push({type:"tag-end",close:ue,position:{end:Se}})}return $}var v=/\s/;function A(M){return v.test(M)}function P(M){for(var B=M.str,O=M.position,x=B.length,Z=O.index;Z<x;){var de=B.charAt(Z),$=!(A(de)||de==="/"||de===">");if($)break;Z++}for(var me=Z+1;me<x;){var ue=B.charAt(me),Se=!(A(ue)||ue==="/"||ue===">");if(!Se)break;me++}n(O,B,me);var Te=B.slice(Z,me);return M.tokens.push({type:"tag",content:Te}),Te}function w(M){for(var B=M.str,O=M.position,x=M.tokens,Z=O.index,de=null,$=Z,me=[],ue=B.length;Z<ue;){var Se=B.charAt(Z);if(de){var Te=Se===de;Te&&(de=null),Z++;continue}var Re=Se==="/"||Se===">";if(Re){Z!==$&&me.push(B.slice($,Z));break}var We=A(Se);if(We){Z!==$&&me.push(B.slice($,Z)),$=Z+1,Z++;continue}var Le=Se==="'"||Se==='"';if(Le){de=Se,Z++;continue}Z++}n(O,B,Z);for(var lt=me.length,st="attribute",De=0;De<lt;De++){var et=me[De],Ke=et.indexOf("=")===-1;if(Ke){var Ct=me[De+1];if(Ct&&(0,e.startsWith)(Ct,"=")){if(Ct.length>1){var dt=et+Ct;x.push({type:st,content:dt}),De+=1;continue}var Et=me[De+2];if(De+=1,Et){var ut=et+"="+Et;x.push({type:st,content:ut}),De+=1;continue}}}if((0,e.endsWith)(et,"=")){var Wt=me[De+1];if(Wt&&!(0,e.stringIncludes)(Wt,"=")){var Nt=et+Wt;x.push({type:st,content:Nt}),De+=1;continue}var ci=et.slice(0,-1);x.push({type:st,content:ci});continue}x.push({type:st,content:et})}}var T=[].push;function D(M,B){for(var O=B.str,x=B.position,Z=B.tokens,de=M.toLowerCase(),$=O.length,me=x.index;me<$;){var ue=O.indexOf("</",me);if(ue===-1){c(B);break}var Se=r(x);n(Se,O,ue);var Te={str:O,position:Se,tokens:[]},Re=g(Te);if(de!==Re.toLowerCase()){me=Te.position.index;continue}if(ue!==x.index){var We=r(x);n(x,O,ue),Z.push({type:"text",content:O.slice(We.index,ue),position:{start:We,end:r(x)}})}T.apply(Z,Te.tokens),n(x,O,Te.position.index);break}}})(BI);var qI={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=t,i.hasTerminalParent=n,i.parse=r,i.rewindStack=s;var e=Qh;function t(a,o){var l={tagName:null,children:[]},h={tokens:a,options:o,cursor:0,stack:[l]};return r(h),l.children}function n(a,o,l){var h=l[a];if(h)for(var c=o.length-1;c>=0;){var f=o[c].tagName;if(f===a)break;if((0,e.arrayIncludes)(h,f))return!0;c--}return!1}function s(a,o,l,h){a[o].position.end=h;for(var c=o+1,f=a.length;c<f;c++)a[c].position.end=l;a.splice(o)}function r(a){for(var o=a.tokens,l=a.options,h=a.stack,c=h[h.length-1].children,f=o.length,g=a.cursor;g<f;){var v=o[g];if(v.type!=="tag-start"){c.push(v),g++;continue}var A=o[++g];g++;var P=A.content.toLowerCase();if(v.close){for(var w=h.length,T=!1;--w>-1;)if(h[w].tagName===P){T=!0;break}for(;g<f;){var D=o[g];if(D.type!=="tag-end")break;g++}if(T){s(h,w,v.position.start,o[g-1].position.end);break}else continue}var M=(0,e.arrayIncludes)(l.closingTags,P),B=M;if(B){var O=l.closingTagAncestorBreakers;B=!n(P,h,O)}if(B)for(var x=h.length-1;x>0;){if(P===h[x].tagName){s(h,x,v.position.start,v.position.start);var Z=x-1;c=h[Z].children;break}x=x-1}for(var de=[],$=void 0;g<f&&($=o[g],$.type!=="tag-end");)de.push($.content),g++;g++;var me=[],ue={start:v.position.start,end:$.position.end},Se={type:"element",tagName:A.content,attributes:de,children:me,position:ue};c.push(Se);var Te=!($.close||(0,e.arrayIncludes)(l.voidTags,P));if(Te){var Re=h.push({tagName:P,children:me,position:ue}),We={tokens:o,options:l,cursor:g,stack:h};r(We),g=We.cursor;var Le=h.length===Re;Le&&(Se.position.end=o[g-1].position.end)}}a.cursor=g}})(qI);var kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.format=HI;kf.formatAttributes=UI;kf.splitHead=zI;kf.unquote=FI;function zI(i,e){var t=i.indexOf(e);return t===-1?[i]:[i.slice(0,t),i.slice(t+e.length)]}function FI(i){var e=i.charAt(0),t=i.length-1,n=e==='"'||e==="'";return n&&e===i.charAt(t)?i.slice(1,t):i}function HI(i,e){return i.map(function(t){var n=t.type,s=n==="element"?{type:n,tagName:t.tagName.toLowerCase(),attributes:UI(t.attributes),children:HI(t.children,e)}:{type:n,content:t.content};return e.includePositions&&(s.position=t.position),s})}function UI(i){return i.map(function(e){var t=zI(e.trim(),"="),n=t[0],s=typeof t[1]=="string"?FI(t[1]):null;return{key:n,value:s}})}var GI={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.formatAttributes=t,i.toHTML=n;var e=Qh;function t(r,a){return r.reduce(function(o,l){var h=l.key,c=l.value;if(c===null)return"".concat(o," ").concat(h);var f;if(a){var g=c.indexOf('"')!==-1;f=g?"'":'"'}else{var v=c.indexOf("'")!==-1;f=v?'"':"'"}return"".concat(o," ").concat(h,"=").concat(f).concat(c).concat(f)},"")}function n(r,a){return r.map(function(o){if(o.type==="text")return o.content;if(o.type==="comment")return"\x3C!--".concat(o.content,"-->");var l=o.tagName,h=o.attributes,c=o.children,f=(0,e.arrayIncludes)(a.voidTags,l.toLowerCase());return f?"<".concat(l).concat(t(h,a.preferDoubleQuoteAttributes),">"):"<".concat(l).concat(t(h,a.preferDoubleQuoteAttributes),">").concat(n(c,a),"</").concat(l,">")}).join("")}var s={toHTML:n};i.default=s})(GI);var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.voidTags=Rl.closingTags=Rl.closingTagAncestorBreakers=Rl.childlessTags=void 0;var i9=["style","script","template"];Rl.childlessTags=i9;var n9=["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"];Rl.closingTags=n9;var s9={li:["ul","ol","menu"],dt:["dl"],dd:["dl"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table"],td:["table"]};Rl.closingTagAncestorBreakers=s9;var r9=["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];Rl.voidTags=r9;Object.defineProperty(h0,"__esModule",{value:!0});var uA=h0.parse=u9;h0.parseDefaults=void 0;h0.stringify=c9;var a9=WI(BI),o9=WI(qI),l9=kf,h9=GI,yy=Rl;function WI(i){return i&&i.__esModule?i:{default:i}}var CS={voidTags:yy.voidTags,closingTags:yy.closingTags,childlessTags:yy.childlessTags,closingTagAncestorBreakers:yy.closingTagAncestorBreakers,includePositions:!1,preferDoubleQuoteAttributes:!1};h0.parseDefaults=CS;function u9(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:CS,t=(0,a9.default)(i,e),n=(0,o9.default)(t,e);return(0,l9.format)(n,e)}function c9(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:CS;return(0,h9.toHTML)(i,e)}class Kb extends Dt{constructor(e,t,n){const s=Ne()({phetioFeatured:!0,phetioValueType:xi,tandemNameSuffix:"StringProperty"},n);super(e,t,s)}}class Cf extends Mt{constructor(e,t){const n=Ne()({valueType:"string",phetioValueType:xi},t);super(e,n)}}const d9=["view","linked","string","none"],KI=new Mt("none",{tandem:R.GENERAL_VIEW.createTandem("phetioElementSelectionProperty"),phetioValueType:xi,validValues:d9,phetioState:!1,phetioDocumentation:'Specifies how PhET-iO Elements are being selected. "view": the target view element, "linked": the corresponding linked element of the view element (if there is one), "string": select only string elements in the sim, "none": no active selection.'});function fp(i,...e){return ie.each(e,t=>{if(t)for(const n in t){const s=Object.getOwnPropertyDescriptor(t,n);s&&(typeof s.get=="function"||t[n]!==void 0)&&Object.defineProperty(i,n,s)}}),i}const p9=gr(i=>class extends a0(i){initialize(e,t,...n){super.initialize(e,t,...n),this.paintDirty=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyLine(){this.markPaintDirty()}markDirtyP1(){this.markPaintDirty()}markDirtyP2(){this.markPaintDirty()}markDirtyX1(){this.markPaintDirty()}markDirtyY1(){this.markPaintDirty()}markDirtyX2(){this.markPaintDirty()}markDirtyY2(){this.markPaintDirty()}});class O2 extends p9(fd){paintCanvas(e,t,n){const s=e.context;s.beginPath(),s.moveTo(t.x1,t.y1),s.lineTo(t.x2,t.y2),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e))}}es.mixInto(O2);const f9=gr(i=>class extends o0(i){initialize(e,t,...n){super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyLine(){this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}markDirtyP1(){this.dirtyX1=!0,this.dirtyY1=!0,this.markPaintDirty()}markDirtyP2(){this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}markDirtyX1(){this.dirtyX1=!0,this.markPaintDirty()}markDirtyY1(){this.dirtyY1=!0,this.markPaintDirty()}markDirtyX2(){this.dirtyX2=!0,this.markPaintDirty()}markDirtyY2(){this.dirtyY2=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyX1=!1,this.dirtyY1=!1,this.dirtyX2=!1,this.dirtyY2=!1}}),m9=!0;class YI extends f9(Vf){initialize(e,t){super.initialize(e,t,!0,m9),this.svgElement=this.svgElement||document.createElementNS(Kn,"line")}updateSVGSelf(){const e=this.svgElement;this.dirtyX1&&e.setAttribute("x1",this.node.x1),this.dirtyY1&&e.setAttribute("y1",this.node.y1),this.dirtyX2&&e.setAttribute("x2",this.node.x2),this.dirtyY2&&e.setAttribute("y2",this.node.y2),this.updateFillStrokeStyle(e)}}es.mixInto(YI);const g9=["p1","p2","x1","y1","x2","y2"];let Fh=class extends bi{constructor(e,t,n,s,r){super(null),this._x1=0,this._y1=0,this._x2=0,this._y2=0,typeof e=="object"?e instanceof Oe?r=fp({x1:e.x,y1:e.y,x2:t.x,y2:t.y,strokePickable:!0},n):r=fp({strokePickable:!0},e):r=fp({x1:e,y1:t,x2:n,y2:s,strokePickable:!0},r),this.mutate(r)}setLine(e,t,n,s){this._x1=e,this._y1=t,this._x2=n,this._y2=s;const r=this._drawables.length;for(let a=0;a<r;a++)this._drawables[a].markDirtyLine();return this.invalidateLine(),this}setPoint1(e,t){typeof e=="number"?(this._x1=e,this._y1=t):(this._x1=e.x,this._y1=e.y);const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyP1();return this.invalidateLine(),this}set p1(e){this.setPoint1(e)}get p1(){return new Oe(this._x1,this._y1)}setPoint2(e,t){typeof e=="number"?(this._x2=e,this._y2=t):(this._x2=e.x,this._y2=e.y);const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyP2();return this.invalidateLine(),this}set p2(e){this.setPoint2(e)}get p2(){return new Oe(this._x2,this._y2)}setX1(e){if(this._x1!==e){this._x1=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyX1();this.invalidateLine()}return this}set x1(e){this.setX1(e)}get x1(){return this.getX1()}getX1(){return this._x1}setY1(e){if(this._y1!==e){this._y1=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyY1();this.invalidateLine()}return this}set y1(e){this.setY1(e)}get y1(){return this.getY1()}getY1(){return this._y1}setX2(e){if(this._x2!==e){this._x2=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyX2();this.invalidateLine()}return this}set x2(e){this.setX2(e)}get x2(){return this.getX2()}getX2(){return this._x2}setY2(e){if(this._y2!==e){this._y2=e;const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyY2();this.invalidateLine()}return this}set y2(e){this.setY2(e)}get y2(){return this.getY2()}getY2(){return this._y2}createLineShape(){return zt.lineSegment(this._x1,this._y1,this._x2,this._y2).makeImmutable()}invalidateLine(){this._shape=null,this.invalidatePath()}containsPointSelf(e){return this._strokePickable?super.containsPointSelf(e):!1}canvasPaintSelf(e,t){O2.prototype.paintCanvas(e,this,t)}computeShapeBounds(){if(this._stroke){const e=this.getLineCap(),t=this.getLineWidth()/2;if(e==="round")return new pt(Math.min(this._x1,this._x2)-t,Math.min(this._y1,this._y2)-t,Math.max(this._x1,this._x2)+t,Math.max(this._y1,this._y2)+t);{const n=this._x2-this._x1,s=this._y2-this._y1,r=Math.sqrt(n*n+s*s);if(r===0)return new pt(this._x1-t,this._y1-t,this._x2+t,this._y2+t);const a=t*n/r,o=t*s/r,l=pt.NOTHING.copy();return e==="butt"?(l.addCoordinates(this._x1-o,this._y1+a),l.addCoordinates(this._x1+o,this._y1-a),l.addCoordinates(this._x2-o,this._y2+a),l.addCoordinates(this._x2+o,this._y2-a)):(l.addCoordinates(this._x1-a-o,this._y1-o+a),l.addCoordinates(this._x1-a+o,this._y1-o-a),l.addCoordinates(this._x2+a-o,this._y2+o+a),l.addCoordinates(this._x2+a+o,this._y2+o-a)),l}}else{const e=pt.NOTHING.copy();return e.addCoordinates(this._x1,this._y1),e.addCoordinates(this._x2,this._y2),e}}createSVGDrawable(e,t){return YI.createFromPool(e,t)}createCanvasDrawable(e,t){return O2.createFromPool(e,t)}setShape(e){if(e!==null)throw new Error("Cannot set the shape of a Line to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createLineShape()),this._shape}hasShape(){return!0}setShapeProperty(e){if(e!==null)throw new Error("Cannot set the shapeProperty of a Line to something non-null, it handles this itself");return this}mutate(e){return super.mutate(e)}getFillRendererBitmask(){return qe.bitmaskCanvas|qe.bitmaskSVG|qe.bitmaskDOM|qe.bitmaskWebGL}};Fh.prototype._mutatorKeys=g9.concat(bi.prototype._mutatorKeys);Fh.prototype.drawableMarkFlags=bi.prototype.drawableMarkFlags.concat(["line","p1","p2","x1","x2","y1","y2"]).filter(i=>i!=="shape");function N2(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/ /g,"&nbsp;")}const y9=["normal","italic","oblique"],v9=["normal","small-caps"],b9=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],_9=["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"];let hr=class Ch extends rn{constructor(e){const t=Ne()({style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"10px",lineHeight:"normal",family:"sans-serif",phetioType:Ch.FontIO},e);super(t),this._style=t.style,this._variant=t.variant,this._weight=`${t.weight}`,this._stretch=t.stretch,this._size=Ch.castSize(t.size),this._lineHeight=t.lineHeight,this._family=t.family,this._font=this.computeShorthand()}getFont(){return this._font}get font(){return this.getFont()}getStyle(){return this._style}get style(){return this.getStyle()}getVariant(){return this._variant}get variant(){return this.getVariant()}getWeight(){return this._weight}get weight(){return this.getWeight()}getStretch(){return this._stretch}get stretch(){return this.getStretch()}getSize(){return this._size}get size(){return this.getSize()}getNumericSize(){const e=this._size.match(/^(\d+)px$/);if(e)return Number(e[1]);const t=this._size.match(/^(\d+)pt$/);if(t)return .75*Number(t[1]);const n=this._size.match(/^(\d+)em$/);return n?Number(n[1])/16:12}get numericSize(){return this.getNumericSize()}getLineHeight(){return this._lineHeight}get lineHeight(){return this.getLineHeight()}getFamily(){return this._family}get family(){return this.getFamily()}copy(e){return new Ch(Ut({style:this._style,variant:this._variant,weight:this._weight,stretch:this._stretch,size:this._size,lineHeight:this._lineHeight,family:this._family},e))}computeShorthand(){let e="";return this._style!=="normal"&&(e+=`${this._style} `),this._variant!=="normal"&&(e+=`${this._variant} `),this._weight!=="normal"&&(e+=`${this._weight} `),this._stretch!=="normal"&&(e+=`${this._stretch} `),e+=this._size,this._lineHeight!=="normal"&&(e+=`/${this._lineHeight}`),e+=` ${this._family}`,e}toCSS(){return this.getFont()}static castSize(e){return typeof e=="number"?`${e}px`:e}static isFontStyle(e){return y9.includes(e)}static isFontVariant(e){return v9.includes(e)}static isFontWeight(e){return b9.includes(e)}static isFontStretch(e){return _9.includes(e)}static fromCSS(e){const t={},n=ie.filter(e.split(/[\x09\x0A\x0C\x0D\x20]/),s=>s.length>0);for(let s=0;s<n.length;s++){const r=n[s];if(r!=="normal")if(Ch.isFontStyle(r))t.style=r;else if(Ch.isFontVariant(r))t.variant=r;else if(Ch.isFontWeight(r))t.weight=r;else if(Ch.isFontStretch(r))t.stretch=r;else{const a=r.split(/\//);t.size=a[0],a[1]&&(t.lineHeight=a[1]),t.family=n.slice(s+1).join(" ");break}}return new Ch(t)}};hr.DEFAULT=new hr;hr.FontIO=new ui("FontIO",{valueType:hr,documentation:"Font handling for text drawing. Options:<ul><li><strong>style:</strong> normal      &mdash; normal | italic | oblique </li><li><strong>variant:</strong> normal    &mdash; normal | small-caps </li><li><strong>weight:</strong> normal     &mdash; normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 </li><li><strong>stretch:</strong> normal    &mdash; normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded </li><li><strong>size:</strong> 10px         &mdash; absolute-size | relative-size | length | percentage -- unitless number interpreted as px. absolute suffixes: cm, mm, in, pt, pc, px. relative suffixes: em, ex, ch, rem, vw, vh, vmin, vmax. </li><li><strong>lineHeight:</strong> normal &mdash; normal | number | length | percentage -- NOTE: Canvas spec forces line-height to normal </li><li><strong>family:</strong> sans-serif &mdash; comma-separated list of families, including generic families (serif, sans-serif, cursive, fantasy, monospace). ideally escape with double-quotes</li></ul>",toStateObject:i=>({style:i.getStyle(),variant:i.getVariant(),weight:i.getWeight(),stretch:i.getStretch(),size:i.getSize(),lineHeight:i.getLineHeight(),family:i.getFamily()}),fromStateObject(i){return new hr(i)},stateSchema:{style:xi,variant:xi,weight:xi,stretch:xi,size:xi,lineHeight:xi,family:xi}});const pE="sceneryTextSizeContainer",fE="sceneryTextSizeElement";let Vl,Wo;const mE={};let gE=!1;class $a{static approximateSVGBounds(e,t){if(!Vl.parentNode)if(document.body)document.body.appendChild(Vl);else throw new Error("No document.body and trying to get approximate SVG bounds of a Text node");$a.setSVGTextAttributes(Wo,e,t);const n=Wo.getBBox();return n.width===0&&n.height===0&&t.length>0?(gE||(gE=!0,console.log("WARNING: Guessing text bounds, is the simulation hidden? See https://github.com/phetsims/chipper/issues/768")),$a.guessSVGBounds(e,t)):new pt(n.x,n.y,n.x+n.width,n.y+n.height)}static guessSVGBounds(e,t){const n=e.getNumericSize(),s=e.weight==="bold";return new pt(0,-.9*n,(s?.435:.4)*n*t.length,.22*n)}static accurateCanvasBounds(e){const t=Pp;t.font=e._font.toCSS(),t.direction="ltr";const n=t.measureText(e.renderedText);return new pt(-n.actualBoundingBoxLeft,-n.actualBoundingBoxAscent,n.actualBoundingBoxRight,n.actualBoundingBoxDescent)}static accurateCanvasBoundsFallback(e){const t=$a.approximateSVGBounds(e._font,e.renderedText);if(!e.renderedText.length||t.width===0)return t;const n=Qi.canvasAccurateBounds(s=>{if(s.font=e._font.toCSS(),s.direction="ltr",s.fillText(e.renderedText,0,0),e.hasPaintableStroke()){const r=new Ic(null,s);e.beforeCanvasStroke(r),s.strokeText(e.renderedText,0,0),e.afterCanvasStroke(r)}},{precision:.5,resolution:128,initialScale:32/Math.max(Math.abs(t.minX),Math.abs(t.minY),Math.abs(t.maxX),Math.abs(t.maxY))});return n.isFinite()?n:t}static getVerticalBounds(e){const t=e.toCSS();let n=mE[t];return n||(n=mE[t]=$a.approximateSVGBounds(e,"m")),n}static approximateCanvasWidth(e,t){const n=Pp;return n.font=e.toCSS(),n.direction="ltr",n.measureText(t).width}static approximateHybridBounds(e,t){const n=$a.getVerticalBounds(e),s=$a.approximateCanvasWidth(e,t);return new pt(0,n.minY,s,n.maxY)}static approximateDOMBounds(e,t){const s=document.createElement("div");s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.setProperty("padding","0","important"),s.style.setProperty("margin","0","important"),s.style.display="hidden";const r=document.createElement("span");r.style.font=e.toCSS(),r.appendChild(t),r.setAttribute("direction","ltr");const a=document.createElement("div");a.style.verticalAlign="baseline",a.style.display="inline-block",a.style.width="0px",a.style.height="1024px",a.style.setProperty("margin","0","important"),a.style.setProperty("padding","0","important"),s.appendChild(r),s.appendChild(a),document.body.appendChild(s);const o=r.getBoundingClientRect(),l=s.getBoundingClientRect(),h=new pt(o.left,o.top-1024,o.right+1,o.bottom-1024).shiftedXY(-l.left,-l.top);return document.body.removeChild(s),h}static approximateImprovedDOMBounds(e,t){const n=document.createElement("div");n.style.display="inline-block",n.style.font=e.toCSS(),n.style.color="transparent",n.style.padding="0 !important",n.style.margin="0 !important",n.style.position="absolute",n.style.left="0",n.style.top="0",n.setAttribute("direction","ltr"),n.appendChild(t),document.body.appendChild(n);const s=new pt(n.offsetLeft,n.offsetTop,n.offsetLeft+n.offsetWidth+1,n.offsetTop+n.offsetHeight+1);document.body.removeChild(n);const r=$a.getVerticalBounds(e);return s.shiftedY(r.minY)}static setSVGTextAttributes(e,t,n){e.setAttribute("direction","ltr"),e.setAttribute("font-family",t.getFamily()),e.setAttribute("font-size",t.getSize()),e.setAttribute("font-style",t.getStyle()),e.setAttribute("font-weight",t.getWeight()),e.setAttribute("font-stretch",t.getStretch()),e.lastChild.nodeValue=n}static initializeTextBounds(){Vl=document.getElementById(pE),Vl||(Vl=document.createElementNS(Kn,"svg"),Vl.setAttribute("width","2"),Vl.setAttribute("height","2"),Vl.setAttribute("id",pE),Vl.setAttribute("style","visibility: hidden; pointer-events: none; position: absolute; left: -65535px; right: -65535px;")),Wo=document.getElementById(fE),Wo||(Wo=document.createElementNS(Kn,"text"),Wo.appendChild(document.createTextNode("")),Wo.setAttribute("dominant-baseline","alphabetic"),Wo.setAttribute("text-rendering","geometricPrecision"),Wo.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Wo.setAttribute("id",fE),Vl.appendChild(Wo))}}class R2 extends a0(fd){paintCanvas(e,t,n){const s=e.context;(t.hasFill()||t.hasPaintableStroke())&&(e.setFont(t._font.getFont()),e.setDirection("ltr")),t.hasFill()&&(t.beforeCanvasFill(e),s.fillText(t.renderedText,0,0),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.strokeText(t.renderedText,0,0),t.afterCanvasStroke(e))}markDirtyText(){this.markPaintDirty()}markDirtyFont(){this.markPaintDirty()}markDirtyBounds(){this.markPaintDirty()}}es.mixInto(R2);const jI=gr(i=>class extends o0(i){initialize(e,t,...n){super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyText=!0,this.dirtyFont=!0,this.dirtyBounds=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyText(){this.dirtyText=!0,this.markPaintDirty()}markDirtyFont(){this.dirtyFont=!0,this.markPaintDirty()}markDirtyBounds(){this.dirtyBounds=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyText=!1,this.dirtyFont=!1,this.dirtyBounds=!1}}),cA=It.pool.fetch();class XI extends jI(l0){constructor(e,t){super(e,t),Qi.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement||(this.domElement=document.createElement("div"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0",this.domElement.setAttribute("dir","ltr"))}updateDOM(){const e=this.node,t=this.domElement;if(this.paintDirty&&(this.dirtyFont&&(t.style.font=e.getFont()),this.dirtyStroke&&(t.style.color=e.getCSSFill()),this.dirtyBounds&&(t.style.width=`${e.getSelfBounds().width}px`,t.style.height=`${e.getSelfBounds().height}px`),this.dirtyText&&(t.textContent=e.renderedText)),this.transformDirty||this.dirtyText||this.dirtyFont||this.dirtyBounds){const n=e.getSelfBounds().minY;cA.set(this.getTransformMatrix());const s=It.translation(0,n);cA.multiplyMatrix(s),s.freeToPool(),Qi.applyPreparedTransform(cA,t)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}es.mixInto(XI);const A9=!0,w9=!Zn.edge,yE=Zn.safari;class QI extends jI(Vf){initialize(e,t){if(super.initialize(e,t,!0,A9),this.hasLength=!1,!this.svgElement){const n=document.createElementNS(Kn,"text");if(this.text=n,yE){const s=document.createElementNS(Kn,"g");s.appendChild(n),this.svgElement=s,this.workaroundRect=document.createElementNS(Kn,"rect"),this.workaroundRect.setAttribute("fill","transparent"),s.appendChild(this.workaroundRect)}else this.svgElement=n;n.appendChild(document.createTextNode("")),n.setAttribute("dominant-baseline","alphabetic"),n.setAttribute("text-rendering","geometricPrecision"),n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.setAttribute("direction","ltr")}}updateSVGSelf(){const e=this.text;if(this.dirtyFont&&(e.setAttribute("font-family",this.node._font.getFamily()),e.setAttribute("font-size",this.node._font.getSize()),e.setAttribute("font-style",this.node._font.getStyle()),e.setAttribute("font-weight",this.node._font.getWeight()),e.setAttribute("font-stretch",this.node._font.getStretch())),this.dirtyText){let t=Qi.safariEmbeddingMarkWorkaround(this.node.renderedText);Zn.firefox&&(t="​"+t),e.lastChild.nodeValue=t}if(this.dirtyBounds&&w9&&(this.node._boundsMethod!=="accurate"&&isFinite(this.node.selfBounds.width)?(this.hasLength||(this.hasLength=!0,e.setAttribute("lengthAdjust","spacingAndGlyphs")),e.setAttribute("textLength",this.node.selfBounds.width)):this.hasLength&&(this.hasLength=!1,e.removeAttribute("lengthAdjust"),e.removeAttribute("textLength")),yE)){const s=this.node.selfBounds.width*.2,r=this.node.selfBounds.height*.2;this.workaroundRect.setAttribute("x",this.node.selfBounds.minX-s),this.workaroundRect.setAttribute("y",this.node.selfBounds.minY-r),this.workaroundRect.setAttribute("width",this.node.selfBounds.width+2*s),this.workaroundRect.setAttribute("height",this.node.selfBounds.height+2*r)}this.updateFillStrokeStyle(e)}}es.mixInto(QI);const DS="stringProperty",S9=["boundsMethod",DS,"string","font","fontWeight","fontFamily","fontStretch","fontStyle","fontSize"],P9=self.navigator.userAgent.includes("like Gecko) Version/5")&&self.navigator.userAgent.includes("Safari/");class kt extends xS(Ge){constructor(e,t){super(),this._stringProperty=new Nl("",!0,this.onStringPropertyChange.bind(this)),this._font=hr.DEFAULT,this._boundsMethod="hybrid",this._isHTML=!1,this._cachedRenderedText=null;const n=fp({fill:"#000000",tandemNameSuffix:"Text",phetioType:kt.TextIO,phetioVisiblePropertyInstrumented:!1},t);typeof e=="string"||typeof e=="number"?n.string=e:n.stringProperty=e,this.mutate(n),this.invalidateSupportedRenderers()}mutate(e){return super.mutate(e)}setString(e){return e=`${e}`,this._stringProperty.set(e),this}set string(e){this.setString(e)}get string(){return this.getString()}getString(){return this._stringProperty.value}getRenderedText(){return this._cachedRenderedText===null&&(this._cachedRenderedText=this.string.replace(" "," "),Zn.edge&&(this._cachedRenderedText=kt.simplifyEmbeddingMarks(this._cachedRenderedText))),this._cachedRenderedText}get renderedText(){return this.getRenderedText()}onStringPropertyChange(){this._cachedRenderedText=null;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyText();this.invalidateText()}setStringProperty(e){return this._stringProperty.setTargetProperty(e,this,kt.STRING_PROPERTY_TANDEM_NAME)}set stringProperty(e){this.setStringProperty(e)}get stringProperty(){return this.getStringProperty()}getStringProperty(){return this._stringProperty}initializePhetioObject(e,t){const n=this.isPhetioInstrumented();super.initializePhetioObject(e,t),R.PHET_IO_ENABLED&&!n&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,kt.STRING_PROPERTY_TANDEM_NAME,()=>new Cf(this.string,Ut({phetioReadOnly:!0,tandem:this.tandem.createTandem(kt.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},t.stringPropertyOptions)))}getPhetioMouseHitTarget(e=!1){return KI.value==="string"?this.getStringPropertyPhetioMouseHitTarget(e):super.getPhetioMouseHitTarget(e)}getStringPropertyPhetioMouseHitTarget(e=!1){const t=this._stringProperty.getTargetProperty();return t instanceof rn?t.getPhetioMouseHitTarget(e):"phetioNotSelectable"}setBoundsMethod(e){if(e!==this._boundsMethod){this._boundsMethod=e,this.invalidateSupportedRenderers();const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyBounds();this.invalidateText(),this.rendererSummaryRefreshEmitter.emit()}return this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}getTextRendererBitmask(){let e=0;return this._boundsMethod!=="fast"&&!this._isHTML&&(e|=qe.bitmaskCanvas),this._isHTML||(e|=qe.bitmaskSVG),e|=qe.bitmaskDOM,e}invalidateSupportedRenderers(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getTextRendererBitmask())}invalidateText(){this.invalidateSelf();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyBounds();this.invalidateSupportedRenderers()}updateSelfBounds(){let e;this._isHTML||P9&&this._boundsMethod!=="accurate"?e=$a.approximateDOMBounds(this._font,this.getDOMTextNode()):this._boundsMethod==="hybrid"?e=$a.approximateHybridBounds(this._font,this.renderedText):this._boundsMethod==="accurate"?e=$a.accurateCanvasBounds(this):e=$a.approximateSVGBounds(this._font,this.renderedText),this.hasStroke()&&e.dilate(this.getLineWidth()/2);const t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}invalidateStroke(){this.invalidateText(),super.invalidateStroke()}invalidateFill(){this.invalidateText(),super.invalidateFill()}canvasPaintSelf(e,t){R2.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return XI.createFromPool(e,t)}createSVGDrawable(e,t){return QI.createFromPool(e,t)}createCanvasDrawable(e,t){return R2.createFromPool(e,t)}getDOMTextNode(){if(this._isHTML){const e=document.createElement("span");return e.innerHTML=this.string,e}else return document.createTextNode(this.renderedText)}getSafeSelfBounds(){const t=this.getSelfBounds();return t.dilatedXY(1*t.width,1*t.height)}setFont(e){if(e!==(typeof e=="string"?this._font.toCSS():this._font)){this._font=typeof e=="string"?hr.fromCSS(e):e;const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyFont();this.invalidateText()}return this}set font(e){this.setFont(e)}get font(){return this.getFont()}getFont(){return this._font.getFont()}setFontWeight(e){return this.setFont(this._font.copy({weight:e}))}set fontWeight(e){this.setFontWeight(e)}get fontWeight(){return this.getFontWeight()}getFontWeight(){return this._font.getWeight()}setFontFamily(e){return this.setFont(this._font.copy({family:e}))}set fontFamily(e){this.setFontFamily(e)}get fontFamily(){return this.getFontFamily()}getFontFamily(){return this._font.getFamily()}setFontStretch(e){return this.setFont(this._font.copy({stretch:e}))}set fontStretch(e){this.setFontStretch(e)}get fontStretch(){return this.getFontStretch()}getFontStretch(){return this._font.getStretch()}setFontStyle(e){return this.setFont(this._font.copy({style:e}))}set fontStyle(e){this.setFontStyle(e)}get fontStyle(){return this.getFontStyle()}getFontStyle(){return this._font.getStyle()}setFontSize(e){return this.setFont(this._font.copy({size:e}))}set fontSize(e){this.setFontSize(e)}get fontSize(){return this.getFontSize()}getFontSize(){return this._font.getSize()}isPainted(){return!0}areSelfBoundsValid(){return this._boundsMethod==="accurate"}getDebugHTMLExtras(){return` "${N2(this.renderedText)}"${this._isHTML?" (html)":""}`}dispose(){super.dispose(),this._stringProperty.dispose()}static embeddedDebugString(e){return e.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")}static simplifyEmbeddingMarks(e){const t={dir:null,children:[],parent:null};let n=t;for(let h=0;h<e.length;h++){const c=e.charAt(h);if(c===T9||c===x9){const f={dir:c,children:[],parent:n};n.children.push(f),n=f}else c===E9?n=n.parent:n.children.push(c)}function s(h){for(let c=h.children.length-1;c>=0;c--){const f=h.children[c];typeof f!="string"&&h.dir===f.dir&&h.children.splice(c,1,...f.children)}}function r(h){h.children.length===1&&typeof h.children[0]!="string"&&h.children[0].dir&&(h.dir=h.children[0].dir,h.children=h.children[0].children)}function a(h){for(let c=h.children.length-1;c>=1;c--){const f=h.children[c-1],g=h.children[c];typeof g!="string"&&typeof f!="string"&&g.dir&&f.dir===g.dir&&(f.children=f.children.concat(g.children),h.children.splice(c,1),a(f))}}function o(h){if(typeof h!="string"){for(let c=0;c<h.children.length;c++)o(h.children[c]);r(h),s(h),a(h)}return h}function l(h){if(typeof h=="string")return h;const c=h.children.map(l).join("");return h.dir?`${h.dir+c}‬`:c}return l(o(t))}}kt.STRING_PROPERTY_NAME=DS;kt.STRING_PROPERTY_TANDEM_NAME=DS;kt.prototype._mutatorKeys=[...II,...S9,...Ge.prototype._mutatorKeys];kt.prototype.drawableMarkFlags=[...Ge.prototype.drawableMarkFlags,...LI,"text","font","bounds"];const T9="‪",x9="‫",E9="‬";$a.initializeTextBounds();kt.TextIO=new ui("TextIO",{valueType:kt,supertype:Ge.NodeIO,documentation:"Text that is displayed in the simulation. TextIO has a nested PropertyIO.&lt;String&gt; for the current string value."});var Yb={},JI={};(function(i){i.__esModule=!0,i.default=new Uint8Array([0,14,8,0,0,0,0,0,0,2,26,160,229,85,123,52,155,89,191,62,223,76,47,51,83,151,94,166,85,37,50,180,40,90,169,170,106,16,249,74,141,26,138,150,22,173,72,85,21,37,65,67,93,34,73,59,84,181,110,167,40,53,69,234,78,221,239,151,144,124,69,27,21,196,61,42,33,82,247,75,80,18,137,92,63,109,231,172,179,230,59,231,172,175,255,159,223,218,235,253,173,189,222,223,222,239,243,252,158,103,239,151,61,14,233,27,235,4,144,3,181,176,77,104,63,60,32,226,147,58,99,171,10,168,110,247,49,59,239,75,220,214,144,85,255,18,249,119,24,246,87,182,99,224,81,146,162,97,74,74,208,150,54,85,123,132,109,85,105,182,95,103,82,218,29,177,107,71,12,243,46,60,207,162,45,84,28,57,229,87,249,86,110,24,8,32,155,203,6,159,233,187,176,7,17,212,103,33,143,145,57,213,241,131,135,205,164,199,83,197,89,231,155,79,14,142,140,222,140,5,108,6,172,42,207,201,29,116,100,101,71,27,29,241,206,121,116,214,104,62,231,177,233,174,195,183,162,244,52,214,244,222,202,160,78,84,118,252,228,251,121,59,116,99,69,167,165,69,241,46,202,121,72,192,13,115,128,236,153,126,51,37,64,80,191,57,240,123,25,189,182,195,7,248,47,110,69,131,15,57,223,122,100,112,118,244,214,99,8,131,54,157,243,187,182,201,144,189,229,247,151,106,251,126,221,13,227,244,145,39,185,14,233,143,25,9,167,174,81,14,32,49,54,122,237,202,123,78,12,111,148,208,236,62,3,129,117,152,182,97,54,166,229,14,230,223,237,52,151,229,198,236,250,195,123,166,40,62,97,224,43,236,139,138,30,223,1,29,122,100,80,158,15,213,175,57,91,126,129,243,86,252,164,249,252,206,171,111,255,74,17,27,126,55,89,90,119,148,103,121,88,243,197,113,236,46,135,238,83,228,239,172,75,43,223,237,186,177,92,249,88,152,122,47,251,47,160,242,183,169,234,69,31,214,242,176,57,99,90,208,245,23,178,171,199,53,181,139,218,254,123,243,75,197,95,218,114,219,59,206,234,55,211,130,125,250,221,207,119,166,58,187,199,247,16,10,177,53,24,47,228,54,99,104,141,238,159,43,228,188,115,242,107,251,247,153,101,88,56,45,252,168,26,181,215,236,135,103,102,192,200,253,71,110,69,125,218,247,103,163,186,246,151,28,253,83,0,157,8,149,95,119,94,13,45,202,78,216,38,157,29,47,215,60,159,93,161,120,51,230,242,239,255,83,129,85,45,224,95,64,253,159,162,226,52,128,223,166,41,78,245,27,11,129,157,150,255,2,50,241,111,209,135,221,227,126,140,248,170,100,85,219,17,37,191,170,118,149,21,208,116,238,191,10,255,31,230,113,167,222,237,48,45,120,225,158,240,165,105,178,245,163,238,242,188,138,111,45,244,255,198,194,134,223,76,191,177,59,234,223,72,154,244,44,241,167,215,107,246,255,222,237,137,255,59,68,9,95,28,65,56,153,156,120,255,195,4,86,181,171,91,250,162,231,103,253,238,170,115,253,251,117,74,13,190,118,11,226,153,80,244,234,39,121,131,161,254,191,31,56,89,187,202,94,197,17,49,216,245,213,221,228,173,167,254,161,28,231,119,78,17,237,83,76,151,47,9,250,117,118,148,194,223,126,37,210,252,154,20,190,166,182,211,68,108,88,243,59,230,85,218,98,228,210,167,55,6,188,73,225,223,96,193,227,38,141,26,43,197,190,239,137,205,43,74,174,131,227,12,192,200,85,154,179,84,234,60,77,44,44,143,23,44,10,242,11,203,79,10,22,141,220,2,196,101,37,166,180,29,248,75,38,92,197,118,39,252,78,19,131,66,222,48,131,225,128,242,131,247,60,135,24,204,113,135,25,195,14,40,123,120,143,58,196,64,147,51,204,232,117,64,157,129,247,212,153,24,120,173,15,51,200,14,168,195,240,30,139,237,53,107,195,140,127,56,144,67,225,128,18,72,112,55,247,42,80,86,0,87,48,61,123,30,39,234,56,45,178,35,47,93,254,65,181,124,68,83,136,82,166,27,241,222,255,62,245,171,188,120,71,164,16,74,100,174,73,222,255,48,117,51,225,192,62,229,200,207,122,90,196,169,95,123,198,131,49,241,150,1,126,140,119,163,238,184,7,74,28,85,71,251,225,29,228,177,35,139,222,25,231,55,162,36,140,91,153,103,141,238,186,245,253,151,26,6,94,127,158,41,157,30,193,224,32,127,236,179,34,212,93,158,31,13,14,58,30,112,91,250,20,42,27,204,141,136,164,107,92,191,219,212,131,216,13,75,46,221,209,74,181,19,28,142,169,81,188,227,93,227,16,111,58,231,241,217,197,7,186,79,41,152,109,67,236,252,142,66,101,38,150,232,172,84,84,189,57,100,188,124,242,30,240,184,130,182,60,9,42,113,2,246,26,210,246,226,166,33,34,55,89,174,126,189,213,212,27,215,109,201,250,251,131,250,9,191,108,27,205,230,84,243,127,6,234,97,47,158,213,27,221,37,85,253,240,89,232,127,236,47,233,68,151,55,145,172,124,182,93,183,187,81,101,245,171,155,32,57,15,53,174,255,182,109,167,163,225,243,248,155,147,31,252,105,40,197,240,237,79,127,190,40,254,221,163,210,103,219,166,154,235,16,33,9,254,75,245,22,85,126,69,138,9,200,200,213,230,27,155,106,101,189,49,42,144,60,74,11,141,54,108,108,215,9,134,134,158,224,11,29,166,193,79,87,69,46,227,146,7,180,104,172,227,196,133,150,161,212,216,217,34,4,127,80,81,159,43,122,117,18,86,39,122,243,140,4,50,212,69,218,72,142,178,62,169,153,56,177,247,198,109,17,98,94,225,38,116,88,226,0,224,229,64,34,111,33,160,117,173,110,181,46,56,55,203,135,146,224,176,28,74,0,241,197,148,44,208,54,26,215,156,0,211,125,153,250,81,148,126,154,50,58,177,104,222,104,53,177,20,45,55,247,199,28,44,119,78,179,60,121,58,229,116,198,216,138,192,203,93,181,3,161,115,11,122,52,170,209,245,13,184,237,102,185,125,32,17,175,47,131,39,160,146,168,170,169,176,183,91,68,184,112,47,74,154,223,12,185,47,225,20,238,215,122,45,223,242,180,175,34,55,175,120,195,59,147,24,212,139,19,171,151,168,9,178,23,184,37,78,207,132,225,233,126,180,88,190,238,242,160,6,74,107,112,110,202,77,137,248,174,86,250,115,83,207,89,225,36,56,81,81,240,201,46,37,23,198,60,87,8,151,158,104,231,191,175,177,229,4,255,238,81,23,63,229,231,218,100,67,241,175,158,80,143,127,107,125,50,228,186,5,6,200,202,240,163,177,192,130,87,196,140,58,226,122,17,117,141,123,112,38,67,232,137,137,24,67,150,168,93,32,59,169,176,129,24,170,185,135,11,110,217,89,41,35,220,85,14,138,127,215,26,194,231,103,162,34,240,168,61,108,120,148,185,120,210,57,189,186,155,242,113,83,223,165,161,253,254,141,131,227,18,151,165,227,99,19,97,207,65,20,190,221,17,90,97,55,56,79,28,59,14,250,185,95,162,65,71,12,236,246,107,232,7,143,65,43,166,254,94,11,25,84,150,34,34,116,229,73,118,126,235,97,83,215,201,164,21,87,15,40,34,108,160,94,90,133,189,125,90,23,153,45,70,44,75,7,107,173,83,55,105,13,151,19,164,179,83,108,71,13,46,162,90,74,29,147,144,5,232,95,22,80,217,166,186,200,98,241,165,105,48,252,34,33,241,34,65,106,55,8,10,78,52,52,99,174,16,226,86,121,26,22,198,143,230,184,200,38,73,172,55,165,118,234,88,185,44,211,55,39,17,146,200,168,40,154,73,211,203,42,225,114,124,47,245,7,42,106,174,110,180,8,120,225,109,244,73,106,60,67,69,199,41,29,32,148,241,120,125,107,45,212,85,2,158,77,176,160,90,183,139,47,95,1,188,220,140,159,31,189,40,224,41,83,159,159,94,17,14,172,144,184,136,26,24,150,110,179,4,242,193,208,133,73,175,61,73,169,12,127,167,222,251,210,154,64,198,16,148,172,98,36,23,51,184,244,161,163,140,38,6,55,64,249,168,58,65,67,171,216,103,105,113,180,165,231,80,50,234,72,97,6,222,84,93,218,231,197,206,217,24,204,66,191,63,122,3,138,11,161,204,97,219,234,113,251,92,228,200,182,156,8,106,241,156,252,211,69,40,43,44,170,82,180,90,71,230,154,74,90,110,207,128,194,153,183,8,50,180,162,206,141,177,130,57,2,211,155,226,142,163,10,154,214,199,110,183,218,218,143,80,153,22,70,67,210,54,218,40,210,233,37,70,171,72,126,80,146,124,117,98,35,177,116,14,75,233,222,108,124,143,238,158,105,18,23,174,72,115,240,47,181,123,125,240,249,235,119,9,121,190,10,105,67,119,88,205,97,112,146,118,108,203,172,97,218,89,102,47,26,94,128,95,26,200,188,39,138,73,229,93,17,226,23,136,115,206,184,1,242,52,56,193,210,42,113,161,194,16,12,114,39,0,158,26,69,207,5,150,18,174,177,154,226,243,48,102,243,77,245,162,180,23,130,65,56,175,102,67,200,60,18,49,27,33,5,112,189,244,182,15,193,174,9,139,29,171,10,146,89,180,43,125,103,83,69,66,76,170,106,103,88,246,177,225,158,196,215,126,200,233,186,199,110,248,233,62,87,205,102,145,117,119,179,207,236,112,127,48,241,220,29,82,147,50,18,206,225,253,194,101,198,156,113,145,14,137,45,131,164,168,144,7,146,151,12,159,142,178,151,51,226,164,209,9,28,96,172,161,16,34,5,36,40,180,202,43,11,36,119,29,131,90,141,219,131,115,196,160,30,97,218,112,54,226,137,112,124,164,145,249,4,122,76,11,196,14,47,244,115,56,84,79,159,81,102,99,181,48,103,138,25,225,31,184,228,143,89,242,254,92,169,161,170,150,102,57,84,125,152,149,77,12,242,142,75,143,75,171,229,38,215,70,44,7,38,243,12,203,94,154,83,194,56,145,45,19,204,218,94,27,26,168,75,61,110,120,18,36,104,101,57,52,204,148,37,229,203,212,47,229,196,77,220,245,75,43,188,232,50,155,110,181,254,226,134,235,107,67,245,227,237,90,158,9,213,48,149,228,211,42,73,78,35,197,158,167,216,123,124,38,52,145,91,67,180,133,138,158,230,214,2,246,205,102,219,17,70,163,152,151,205,54,189,230,207,18,70,81,73,151,58,193,115,159,62,218,79,180,222,71,35,173,196,80,87,236,203,181,63,76,186,252,54,66,51,105,141,239,199,128,54,243,30,250,229,118,76,205,22,83,164,201,60,213,130,12,187,2,121,251,252,232,10,230,99,215,1,167,104,115,155,197,174,107,164,166,99,225,104,83,235,189,38,105,28,52,227,13,30,221,198,86,239,134,116,105,151,182,159,78,97,141,150,177,155,171,171,122,124,252,17,254,78,233,139,181,39,102,170,96,9,106,176,37,236,229,144,121,163,82,73,230,93,241,145,53,107,242,178,80,211,211,75,176,26,145,68,52,246,32,136,206,62,103,9,107,172,80,213,30,114,24,255,99,2,200,246,223,22,3,77,236,221,202,161,188,97,102,123,188,144,72,88,174,122,43,232,131,129,193,226,154,36,14,76,134,172,53,43,154,213,243,129,198,194,140,48,66,157,215,152,241,78,95,183,11,43,198,9,31,148,201,28,46,72,141,151,187,4,72,62,131,77,114,83,226,133,242,97,106,173,166,42,67,98,143,6,11,99,167,222,170,136,100,182,233,38,35,114,131,188,234,77,236,139,66,168,113,225,54,226,165,196,199,193,0,67,185,46,53,182,68,168,122,148,78,71,119,87,109,0,234,41,105,207,217,224,87,108,54,200,204,133,124,255,186,15,9,26,102,213,37,48,62,84,224,73,93,218,216,200,151,8,159,159,142,17,234,10,242,69,132,88,95,176,116,111,25,181,145,202,74,171,150,14,208,213,202,17,79,145,21,106,130,226,133,144,185,10,11,62,58,133,197,53,73,70,61,160,157,146,147,231,102,171,73,32,150,169,56,146,162,147,212,37,125,36,49,11,62,50,181,90,197,134,144,69,197,243,184,61,63,223,30,229,247,244,152,139,169,155,252,58,189,205,228,9,234,180,225,126,91,128,148,37,112,193,81,142,81,86,153,41,62,146,203,23,8,5,98,145,247,128,148,203,179,165,75,194,73,213,226,27,231,92,232,170,200,136,188,113,133,177,21,184,167,251,189,110,202,152,52,8,247,150,217,123,113,253,152,221,255,239,177,122,125,157,152,199,241,125,200,41,101,150,63,32,94,146,214,46,151,121,250,255,116,136,230,133,107,219,29,236,251,241,210,83,90,214,141,126,110,72,153,235,220,2,136,45,177,245,66,27,235,246,232,4,43,141,48,31,199,97,29,17,11,175,133,15,211,158,230,170,224,66,94,137,109,123,100,105,137,244,194,71,77,133,19,139,171,40,111,233,194,175,200,200,245,22,251,54,163,115,142,42,131,24,78,230,198,16,210,223,99,145,122,31,215,124,193,125,92,156,131,108,191,63,176,100,84,46,223,56,86,86,92,9,191,0,68,167,175,67,170,239,217,158,64,95,222,114,31,111,30,19,43,188,206,84,145,249,176,98,87,248,131,48,146,125,111,84,25,247,240,102,233,78,15,91,38,115,28,76,230,249,23,160,162,230,3,167,244,87,50,233,12,220,187,225,75,234,102,9,39,231,246,101,146,70,117,173,85,170,187,153,208,148,87,34,218,124,95,70,147,140,135,9,131,55,90,94,88,90,238,174,228,87,135,155,172,203,46,157,251,17,201,22,189,169,139,171,200,17,192,210,23,53,41,91,10,116,79,168,35,73,99,46,100,128,200,204,222,242,85,166,115,159,229,67,95,44,151,36,213,11,251,192,13,55,62,72,211,57,251,232,51,181,48,75,207,137,180,105,85,10,113,248,14,16,76,110,41,90,38,39,181,208,13,155,179,136,192,227,27,162,79,246,216,17,236,149,217,77,234,61,68,103,173,91,245,230,247,244,224,60,154,83,128,112,2,60,225,175,155,45,166,14,111,95,151,79,86,120,201,189,177,5,0,92,253,210,187,107,128,165,224,176,37,84,249,137,96,151,14,9,156,185,59,5,129,79,77,155,175,207,186,194,115,73,176,208,32,199,229,232,131,88,252,224,4,189,148,77,231,128,82,73,117,2,148,206,117,138,110,150,159,213,97,85,169,138,38,108,206,104,82,68,174,2,92,179,71,173,21,158,52,44,129,119,16,249,35,21,56,198,152,8,108,119,94,248,54,115,176,37,111,19,116,157,67,141,175,132,233,102,186,21,84,182,216,118,163,212,48,192,227,190,4,122,202,12,63,153,219,178,144,15,36,181,137,242,182,28,63,80,240,10,201,97,158,127,160,76,89,190,177,47,112,99,229,58,74,136,0,107,219,98,194,154,49,185,161,94,170,109,142,43,235,168,205,30,146,126,34,194,56,252,247,232,184,131,151,53,235,233,69,157,236,26,88,234,105,107,52,3,100,76,231,166,123,145,32,158,112,36,65,20,198,163,212,250,137,140,91,80,167,198,37,194,61,7,235,155,216,247,50,80,232,41,193,118,206,127,118,199,21,107,114,128,62,197,97,180,97,111,235,228,206,47,59,116,29,9,121,121,127,188,26,65,83,63,119,86,218,153,139,176,11,236,45,85,163,4,197,250,209,166,202,234,240,236,48,92,146,215,62,80,198,52,19,93,9,195,133,17,162,55,252,53,214,141,164,222,132,214,174,62,59,63,184,97,227,237,48,188,188,20,244,79])})(JI);var ZI={},$I={};(function(i){i.__esModule=!0;var e=0,t=-3,n=function(){function $(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}return $}();i.Tree=n;var s=function(){function $(me,ue){this.source=me,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=ue,this.destLen=0,this.ltree=new n,this.dtree=new n}return $}();i.Data=s;var r=new n,a=new n,o=new Uint8Array(30),l=new Uint16Array(30),h=new Uint8Array(30),c=new Uint16Array(30),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=new n,v=new Uint8Array(320);function A($,me,ue,Se){var Te,Re;for(Te=0;Te<ue;++Te)$[Te]=0;for(Te=0;Te<30-ue;++Te)$[Te+ue]=Te/ue|0;for(Re=Se,Te=0;Te<30;++Te)me[Te]=Re,Re+=1<<$[Te]}function P($,me){var ue;for(ue=0;ue<7;++ue)$.table[ue]=0;for($.table[7]=24,$.table[8]=152,$.table[9]=112,ue=0;ue<24;++ue)$.trans[ue]=256+ue;for(ue=0;ue<144;++ue)$.trans[24+ue]=ue;for(ue=0;ue<8;++ue)$.trans[168+ue]=280+ue;for(ue=0;ue<112;++ue)$.trans[176+ue]=144+ue;for(ue=0;ue<5;++ue)me.table[ue]=0;for(me.table[5]=32,ue=0;ue<32;++ue)me.trans[ue]=ue}var w=new Uint16Array(16);function T($,me,ue,Se){var Te,Re;for(Te=0;Te<16;++Te)$.table[Te]=0;for(Te=0;Te<Se;++Te)$.table[me[ue+Te]]++;for($.table[0]=0,Re=0,Te=0;Te<16;++Te)w[Te]=Re,Re+=$.table[Te];for(Te=0;Te<Se;++Te)me[ue+Te]&&($.trans[w[me[ue+Te]]++]=Te)}function D($){$.bitcount--||($.tag=$.source[$.sourceIndex++],$.bitcount=7);var me=$.tag&1;return $.tag>>>=1,me}function M($,me,ue){if(!me)return ue;for(;$.bitcount<24;)$.tag|=$.source[$.sourceIndex++]<<$.bitcount,$.bitcount+=8;var Se=$.tag&65535>>>16-me;return $.tag>>>=me,$.bitcount-=me,Se+ue}function B($,me){for(;$.bitcount<24;)$.tag|=$.source[$.sourceIndex++]<<$.bitcount,$.bitcount+=8;var ue=0,Se=0,Te=0,Re=$.tag;do Se=2*Se+(Re&1),Re>>>=1,++Te,ue+=me.table[Te],Se-=me.table[Te];while(Se>=0);return $.tag=Re,$.bitcount-=Te,me.trans[ue+Se]}function O($,me,ue){var Se,Te,Re,We,Le,lt;for(Se=M($,5,257),Te=M($,5,1),Re=M($,4,4),We=0;We<19;++We)v[We]=0;for(We=0;We<Re;++We){var st=M($,3,0);v[f[We]]=st}for(T(g,v,0,19),Le=0;Le<Se+Te;){var De=B($,g);switch(De){case 16:var et=v[Le-1];for(lt=M($,2,3);lt;--lt)v[Le++]=et;break;case 17:for(lt=M($,3,3);lt;--lt)v[Le++]=0;break;case 18:for(lt=M($,7,11);lt;--lt)v[Le++]=0;break;default:v[Le++]=De;break}}T(me,v,0,Se),T(ue,v,Se,Te)}function x($,me,ue){for(;;){var Se=B($,me);if(Se===256)return e;if(Se<256)$.dest[$.destLen++]=Se;else{var Te=void 0,Re=void 0,We=void 0,Le=void 0;for(Se-=257,Te=M($,o[Se],l[Se]),Re=B($,ue),We=$.destLen-M($,h[Re],c[Re]),Le=We;Le<We+Te;++Le)$.dest[$.destLen++]=$.dest[Le]}}}function Z($){for(var me,ue,Se;$.bitcount>8;)$.sourceIndex--,$.bitcount-=8;if(me=$.source[$.sourceIndex+1],me=256*me+$.source[$.sourceIndex],ue=$.source[$.sourceIndex+3],ue=256*ue+$.source[$.sourceIndex+2],me!==(~ue&65535))return t;for($.sourceIndex+=4,Se=me;Se;--Se)$.dest[$.destLen++]=$.source[$.sourceIndex++];return $.bitcount=0,e}function de($,me){var ue=new s($,me),Se,Te,Re;do{switch(Se=D(ue),Te=M(ue,2,0),Te){case 0:Re=Z(ue);break;case 1:Re=x(ue,r,a);break;case 2:O(ue,ue.ltree,ue.dtree),Re=x(ue,ue.ltree,ue.dtree);break;default:Re=t}if(Re!==e)throw new Error("Data error")}while(!Se);return ue.destLen<ue.dest.length?typeof ue.dest.slice=="function"?ue.dest.slice(0,ue.destLen):ue.dest.subarray(0,ue.destLen):ue.dest}i.default=de,P(r,a),A(o,l,4,3),A(h,c,2,1),o[28]=0,l[28]=258})($I);(function(i){i.__esModule=!0;var e=$I,t=11,n=5,s=t-n,r=65536>>t,a=1<<s,o=a-1,l=2,h=1<<n,c=h-1,f=65536>>n,g=1024>>n,v=f+g,A=v,P=32,w=A+P,T=1<<l,D=function(){function M(B){var O=new DataView(B.buffer);this.highStart=O.getUint32(0),this.errorValue=O.getUint32(4);var x=O.getUint32(8);B=B.subarray(12),B=e.default(B,new Uint8Array(x)),B=e.default(B,new Uint8Array(x)),this.data=new Uint32Array(B.buffer)}return M.prototype.get=function(B){var O;return B<0||B>1114111?this.errorValue:B<55296||B>56319&&B<=65535?(O=(this.data[B>>n]<<l)+(B&c),this.data[O]):B<=65535?(O=(this.data[f+(B-55296>>n)]<<l)+(B&c),this.data[O]):B<this.highStart?(O=this.data[w-r+(B>>t)],O=this.data[O+(B>>n&o)],O=(O<<l)+(B&c),this.data[O]):this.data[this.data.length-T]},M}();i.default=D})(ZI);var on={};on.__esModule=!0;on.OP=0;on.CL=1;on.CP=2;on.QU=3;on.GL=4;on.NS=5;on.EX=6;on.SY=7;on.IS=8;on.PR=9;on.PO=10;on.NU=11;on.AL=12;on.HL=13;on.ID=14;on.IN=15;on.HY=16;on.BA=17;on.BB=18;on.B2=19;on.ZW=20;on.CM=21;on.WJ=22;on.H2=23;on.H3=24;on.JL=25;on.JV=26;on.JT=27;on.RI=28;on.AI=29;on.BK=30;on.CB=31;on.CJ=32;on.CR=33;on.LF=34;on.NL=35;on.SA=36;on.SG=37;on.SP=38;on.XX=39;var eL={};(function(i){i.__esModule=!0,i.DI_BRK=0,i.IN_BRK=1,i.CI_BRK=2,i.CP_BRK=3,i.PR_BRK=4,i.pairTable=[[i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.CP_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.PR_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK],[i.IN_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.IN_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK],[i.IN_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.IN_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.IN_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.IN_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.DI_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.DI_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.IN_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.PR_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.IN_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK],[i.IN_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.DI_BRK],[i.DI_BRK,i.PR_BRK,i.PR_BRK,i.IN_BRK,i.IN_BRK,i.IN_BRK,i.PR_BRK,i.PR_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK,i.IN_BRK,i.DI_BRK,i.DI_BRK,i.PR_BRK,i.CI_BRK,i.PR_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.DI_BRK,i.IN_BRK]]})(eL);Yb.__esModule=!0;var V9=JI,k9=ZI,Rn=on,ym=eL,C9=new k9.default(V9.default);function vE(i){switch(i){case Rn.AI:return Rn.AL;case Rn.SA:case Rn.SG:case Rn.XX:return Rn.AL;case Rn.CJ:return Rn.NS;default:return i}}function bE(i){switch(i){case Rn.LF:case Rn.NL:return Rn.BK;case Rn.CB:return Rn.BA;case Rn.SP:return Rn.WJ;default:return i}}var Mm=function(){function i(e,t,n){n===void 0&&(n=!1),this.position=e,this.spacePos=t,this.required=n}return i}();Yb.Break=Mm;var D9=function(){function i(e){this.node=e,this.pos=0,this.lastPos=0,this.curClass=null,this.nextClass=null}return i.prototype.nextCodePoint=function(){var e=this.node.charCodeAt(this.pos++),t=this.node.charCodeAt(this.pos);return 55296<=e&&e<=56319&&56320<=t&&t<=57343?(this.pos++,(e-55296)*1024+(t-56320)+65536):e},i.prototype.nextCharClass=function(e){return vE(C9.get(this.nextCodePoint()))},i.prototype.nextBreak=function(){var e=null,t=null,n=!1;for(this.curClass===null&&(this.curClass=bE(this.nextCharClass()));this.pos<this.node.length;){if(this.lastPos=this.pos,t=this.nextClass,this.nextClass=this.nextCharClass(),this.curClass===Rn.BK||this.curClass===Rn.CR&&this.nextClass!==Rn.LF)return this.curClass=bE(vE(this.nextClass)),new Mm(this.lastPos,this.lastPos,!0);var s=null;switch(this.nextClass){case Rn.SP:s=this.curClass;break;case Rn.BK:case Rn.LF:case Rn.NL:s=Rn.BK;break;case Rn.CR:s=Rn.CR;break;case Rn.CB:s=Rn.BA;break;default:s=null;break}if(this.nextClass===Rn.SP&&t!==Rn.SP&&(e=this.lastPos),s!==null){if(this.curClass=s,this.nextClass===Rn.CB)return new Mm(this.lastPos,e!==null?e:this.lastPos);continue}switch(ym.pairTable[this.curClass][this.nextClass]){case ym.DI_BRK:n=!0;break;case ym.IN_BRK:n=t===Rn.SP;break;case ym.CI_BRK:if(n=t===Rn.SP,!n)continue;break;case ym.CP_BRK:if(t!==Rn.SP)continue;break}if(!n&&this.nextClass!==Rn.SP&&(e=null),this.curClass=this.nextClass,n)return new Mm(this.lastPos,e!==null?e:this.lastPos)}if(this.pos>=this.node.length)return this.lastPos<this.node.length?(this.lastPos=this.node.length,new Mm(this.node.length,e!==null?e:this.node.length)):null},i}();Yb.LineBreaker=D9;var I9=Yb,L9=I9.LineBreaker;const _E=(i,e)=>{const t=Ne()({requiredOnly:!1},e),n=[],s=new L9(i);s[Symbol.iterator]=()=>({next(){const a=s.nextBreak();return a!==null?{value:a,done:!1}:{done:!0}}});let r=0;for(const a of s){const o=a.position;t.requiredOnly&&!a.required||(r!==o&&n.push(new qi(r,o)),r=a.position)}return r<i.length&&n.push(new qi(r,i.length)),n};var av={exports:{}};/*! https://mths.be/he v1.1.1 by @mathias | MIT license */av.exports;(function(i,e){(function(t){var n=e,s=i&&i.exports==n&&i,r=typeof $s=="object"&&$s;(r.global===r||r.window===r)&&(t=r);var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/[\x01-\x7F]/g,l=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,h=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,c={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","	":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon","ˆ":"circ","ˇ":"caron","°":"deg","©":"copy","®":"reg","℗":"copysr","℘":"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash","⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof","⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","𝒶":"ascr","𝕒":"aopf","𝔞":"afr","𝔸":"Aopf","𝔄":"Afr","𝒜":"Ascr",ª:"ordf",á:"aacute",Á:"Aacute",à:"agrave",À:"Agrave",ă:"abreve",Ă:"Abreve",â:"acirc",Â:"Acirc",å:"aring",Å:"angst",ä:"auml",Ä:"Auml",ã:"atilde",Ã:"Atilde",ą:"aogon",Ą:"Aogon",ā:"amacr",Ā:"Amacr",æ:"aelig",Æ:"AElig","𝒷":"bscr","𝕓":"bopf","𝔟":"bfr","𝔹":"Bopf",ℬ:"Bscr","𝔅":"Bfr","𝔠":"cfr","𝒸":"cscr","𝕔":"copf",ℭ:"Cfr","𝒞":"Cscr",ℂ:"Copf",ć:"cacute",Ć:"Cacute",ĉ:"ccirc",Ĉ:"Ccirc",č:"ccaron",Č:"Ccaron",ċ:"cdot",Ċ:"Cdot",ç:"ccedil",Ç:"Ccedil","℅":"incare","𝔡":"dfr","ⅆ":"dd","𝕕":"dopf","𝒹":"dscr","𝒟":"Dscr","𝔇":"Dfr","ⅅ":"DD","𝔻":"Dopf",ď:"dcaron",Ď:"Dcaron",đ:"dstrok",Đ:"Dstrok",ð:"eth",Ð:"ETH","ⅇ":"ee",ℯ:"escr","𝔢":"efr","𝕖":"eopf",ℰ:"Escr","𝔈":"Efr","𝔼":"Eopf",é:"eacute",É:"Eacute",è:"egrave",È:"Egrave",ê:"ecirc",Ê:"Ecirc",ě:"ecaron",Ě:"Ecaron",ë:"euml",Ë:"Euml",ė:"edot",Ė:"Edot",ę:"eogon",Ę:"Eogon",ē:"emacr",Ē:"Emacr","𝔣":"ffr","𝕗":"fopf","𝒻":"fscr","𝔉":"Ffr","𝔽":"Fopf",ℱ:"Fscr",ﬀ:"fflig",ﬃ:"ffilig",ﬄ:"ffllig",ﬁ:"filig",fj:"fjlig",ﬂ:"fllig",ƒ:"fnof",ℊ:"gscr","𝕘":"gopf","𝔤":"gfr","𝒢":"Gscr","𝔾":"Gopf","𝔊":"Gfr",ǵ:"gacute",ğ:"gbreve",Ğ:"Gbreve",ĝ:"gcirc",Ĝ:"Gcirc",ġ:"gdot",Ġ:"Gdot",Ģ:"Gcedil","𝔥":"hfr",ℎ:"planckh","𝒽":"hscr","𝕙":"hopf",ℋ:"Hscr",ℌ:"Hfr",ℍ:"Hopf",ĥ:"hcirc",Ĥ:"Hcirc",ℏ:"hbar",ħ:"hstrok",Ħ:"Hstrok","𝕚":"iopf","𝔦":"ifr","𝒾":"iscr","ⅈ":"ii","𝕀":"Iopf",ℐ:"Iscr",ℑ:"Im",í:"iacute",Í:"Iacute",ì:"igrave",Ì:"Igrave",î:"icirc",Î:"Icirc",ï:"iuml",Ï:"Iuml",ĩ:"itilde",Ĩ:"Itilde",İ:"Idot",į:"iogon",Į:"Iogon",ī:"imacr",Ī:"Imacr",ĳ:"ijlig",Ĳ:"IJlig",ı:"imath","𝒿":"jscr","𝕛":"jopf","𝔧":"jfr","𝒥":"Jscr","𝔍":"Jfr","𝕁":"Jopf",ĵ:"jcirc",Ĵ:"Jcirc","ȷ":"jmath","𝕜":"kopf","𝓀":"kscr","𝔨":"kfr","𝒦":"Kscr","𝕂":"Kopf","𝔎":"Kfr",ķ:"kcedil",Ķ:"Kcedil","𝔩":"lfr","𝓁":"lscr",ℓ:"ell","𝕝":"lopf",ℒ:"Lscr","𝔏":"Lfr","𝕃":"Lopf",ĺ:"lacute",Ĺ:"Lacute",ľ:"lcaron",Ľ:"Lcaron",ļ:"lcedil",Ļ:"Lcedil",ł:"lstrok",Ł:"Lstrok",ŀ:"lmidot",Ŀ:"Lmidot","𝔪":"mfr","𝕞":"mopf","𝓂":"mscr","𝔐":"Mfr","𝕄":"Mopf",ℳ:"Mscr","𝔫":"nfr","𝕟":"nopf","𝓃":"nscr",ℕ:"Nopf","𝒩":"Nscr","𝔑":"Nfr",ń:"nacute",Ń:"Nacute",ň:"ncaron",Ň:"Ncaron",ñ:"ntilde",Ñ:"Ntilde",ņ:"ncedil",Ņ:"Ncedil","№":"numero",ŋ:"eng",Ŋ:"ENG","𝕠":"oopf","𝔬":"ofr",ℴ:"oscr","𝒪":"Oscr","𝔒":"Ofr","𝕆":"Oopf",º:"ordm",ó:"oacute",Ó:"Oacute",ò:"ograve",Ò:"Ograve",ô:"ocirc",Ô:"Ocirc",ö:"ouml",Ö:"Ouml",ő:"odblac",Ő:"Odblac",õ:"otilde",Õ:"Otilde",ø:"oslash",Ø:"Oslash",ō:"omacr",Ō:"Omacr",œ:"oelig",Œ:"OElig","𝔭":"pfr","𝓅":"pscr","𝕡":"popf",ℙ:"Popf","𝔓":"Pfr","𝒫":"Pscr","𝕢":"qopf","𝔮":"qfr","𝓆":"qscr","𝒬":"Qscr","𝔔":"Qfr",ℚ:"Qopf",ĸ:"kgreen","𝔯":"rfr","𝕣":"ropf","𝓇":"rscr",ℛ:"Rscr",ℜ:"Re",ℝ:"Ropf",ŕ:"racute",Ŕ:"Racute",ř:"rcaron",Ř:"Rcaron",ŗ:"rcedil",Ŗ:"Rcedil","𝕤":"sopf","𝓈":"sscr","𝔰":"sfr","𝕊":"Sopf","𝔖":"Sfr","𝒮":"Sscr","Ⓢ":"oS",ś:"sacute",Ś:"Sacute",ŝ:"scirc",Ŝ:"Scirc",š:"scaron",Š:"Scaron",ş:"scedil",Ş:"Scedil",ß:"szlig","𝔱":"tfr","𝓉":"tscr","𝕥":"topf","𝒯":"Tscr","𝔗":"Tfr","𝕋":"Topf",ť:"tcaron",Ť:"Tcaron",ţ:"tcedil",Ţ:"Tcedil","™":"trade",ŧ:"tstrok",Ŧ:"Tstrok","𝓊":"uscr","𝕦":"uopf","𝔲":"ufr","𝕌":"Uopf","𝔘":"Ufr","𝒰":"Uscr",ú:"uacute",Ú:"Uacute",ù:"ugrave",Ù:"Ugrave",ŭ:"ubreve",Ŭ:"Ubreve",û:"ucirc",Û:"Ucirc",ů:"uring",Ů:"Uring",ü:"uuml",Ü:"Uuml",ű:"udblac",Ű:"Udblac",ũ:"utilde",Ũ:"Utilde",ų:"uogon",Ų:"Uogon",ū:"umacr",Ū:"Umacr","𝔳":"vfr","𝕧":"vopf","𝓋":"vscr","𝔙":"Vfr","𝕍":"Vopf","𝒱":"Vscr","𝕨":"wopf","𝓌":"wscr","𝔴":"wfr","𝒲":"Wscr","𝕎":"Wopf","𝔚":"Wfr",ŵ:"wcirc",Ŵ:"Wcirc","𝔵":"xfr","𝓍":"xscr","𝕩":"xopf","𝕏":"Xopf","𝔛":"Xfr","𝒳":"Xscr","𝔶":"yfr","𝓎":"yscr","𝕪":"yopf","𝒴":"Yscr","𝔜":"Yfr","𝕐":"Yopf",ý:"yacute",Ý:"Yacute",ŷ:"ycirc",Ŷ:"Ycirc",ÿ:"yuml",Ÿ:"Yuml","𝓏":"zscr","𝔷":"zfr","𝕫":"zopf",ℨ:"Zfr",ℤ:"Zopf","𝒵":"Zscr",ź:"zacute",Ź:"Zacute",ž:"zcaron",Ž:"Zcaron",ż:"zdot",Ż:"Zdot",Ƶ:"imped",þ:"thorn",Þ:"THORN",ŉ:"napos",α:"alpha",Α:"Alpha",β:"beta",Β:"Beta",γ:"gamma",Γ:"Gamma",δ:"delta",Δ:"Delta",ε:"epsi","ϵ":"epsiv",Ε:"Epsilon",ϝ:"gammad",Ϝ:"Gammad",ζ:"zeta",Ζ:"Zeta",η:"eta",Η:"Eta",θ:"theta",ϑ:"thetav",Θ:"Theta",ι:"iota",Ι:"Iota",κ:"kappa",ϰ:"kappav",Κ:"Kappa",λ:"lambda",Λ:"Lambda",μ:"mu",µ:"micro",Μ:"Mu",ν:"nu",Ν:"Nu",ξ:"xi",Ξ:"Xi",ο:"omicron",Ο:"Omicron",π:"pi",ϖ:"piv",Π:"Pi",ρ:"rho",ϱ:"rhov",Ρ:"Rho",σ:"sigma",Σ:"Sigma",ς:"sigmaf",τ:"tau",Τ:"Tau",υ:"upsi",Υ:"Upsilon",ϒ:"Upsi",φ:"phi",ϕ:"phiv",Φ:"Phi",χ:"chi",Χ:"Chi",ψ:"psi",Ψ:"Psi",ω:"omega",Ω:"ohm",а:"acy",А:"Acy",б:"bcy",Б:"Bcy",в:"vcy",В:"Vcy",г:"gcy",Г:"Gcy",ѓ:"gjcy",Ѓ:"GJcy",д:"dcy",Д:"Dcy",ђ:"djcy",Ђ:"DJcy",е:"iecy",Е:"IEcy",ё:"iocy",Ё:"IOcy",є:"jukcy",Є:"Jukcy",ж:"zhcy",Ж:"ZHcy",з:"zcy",З:"Zcy",ѕ:"dscy",Ѕ:"DScy",и:"icy",И:"Icy",і:"iukcy",І:"Iukcy",ї:"yicy",Ї:"YIcy",й:"jcy",Й:"Jcy",ј:"jsercy",Ј:"Jsercy",к:"kcy",К:"Kcy",ќ:"kjcy",Ќ:"KJcy",л:"lcy",Л:"Lcy",љ:"ljcy",Љ:"LJcy",м:"mcy",М:"Mcy",н:"ncy",Н:"Ncy",њ:"njcy",Њ:"NJcy",о:"ocy",О:"Ocy",п:"pcy",П:"Pcy",р:"rcy",Р:"Rcy",с:"scy",С:"Scy",т:"tcy",Т:"Tcy",ћ:"tshcy",Ћ:"TSHcy",у:"ucy",У:"Ucy",ў:"ubrcy",Ў:"Ubrcy",ф:"fcy",Ф:"Fcy",х:"khcy",Х:"KHcy",ц:"tscy",Ц:"TScy",ч:"chcy",Ч:"CHcy",џ:"dzcy",Џ:"DZcy",ш:"shcy",Ш:"SHcy",щ:"shchcy",Щ:"SHCHcy",ъ:"hardcy",Ъ:"HARDcy",ы:"ycy",Ы:"Ycy",ь:"softcy",Ь:"SOFTcy",э:"ecy",Э:"Ecy",ю:"yucy",Ю:"YUcy",я:"yacy",Я:"YAcy",ℵ:"aleph",ℶ:"beth",ℷ:"gimel",ℸ:"daleth"},f=/["&'<>`]/g,g={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},v=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,A=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,P=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)([=a-zA-Z0-9])?/g,w={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},T={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},D={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},M=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],B=String.fromCharCode,O={},x=O.hasOwnProperty,Z=function(De,et){return x.call(De,et)},de=function(De,et){for(var Ke=-1,Ct=De.length;++Ke<Ct;)if(De[Ke]==et)return!0;return!1},$=function(De,et){if(!De)return et;var Ke={},Ct;for(Ct in et)Ke[Ct]=Z(De,Ct)?De[Ct]:et[Ct];return Ke},me=function(De,et){var Ke="";return De>=55296&&De<=57343||De>1114111?(et&&Te("character reference outside the permissible Unicode range"),"�"):Z(D,De)?(et&&Te("disallowed character reference"),D[De]):(et&&de(M,De)&&Te("disallowed character reference"),De>65535&&(De-=65536,Ke+=B(De>>>10&1023|55296),De=56320|De&1023),Ke+=B(De),Ke)},ue=function(De){return"&#x"+De.toString(16).toUpperCase()+";"},Se=function(De){return"&#"+De+";"},Te=function(De){throw Error("Parse error: "+De)},Re=function(De,et){et=$(et,Re.options);var Ke=et.strict;Ke&&A.test(De)&&Te("forbidden code point");var Ct=et.encodeEverything,dt=et.useNamedReferences,Et=et.allowUnsafeSymbols,ut=et.decimal?Se:ue,Wt=function(Nt){return ut(Nt.charCodeAt(0))};return Ct?(De=De.replace(o,function(Nt){return dt&&Z(c,Nt)?"&"+c[Nt]+";":Wt(Nt)}),dt&&(De=De.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),dt&&(De=De.replace(h,function(Nt){return"&"+c[Nt]+";"}))):dt?(Et||(De=De.replace(f,function(Nt){return"&"+c[Nt]+";"})),De=De.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),De=De.replace(h,function(Nt){return"&"+c[Nt]+";"})):Et||(De=De.replace(f,Wt)),De.replace(a,function(Nt){var ci=Nt.charCodeAt(0),Yt=Nt.charCodeAt(1),Pe=(ci-55296)*1024+Yt-56320+65536;return ut(Pe)}).replace(l,Wt)};Re.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var We=function(De,et){et=$(et,We.options);var Ke=et.strict;return Ke&&v.test(De)&&Te("malformed character reference"),De.replace(P,function(Ct,dt,Et,ut,Wt,Nt,ci,Yt){var Pe,pe,bt,wt,Gt,Ft;return dt?(bt=dt,pe=Et,Ke&&!pe&&Te("character reference was not terminated by a semicolon"),Pe=parseInt(bt,10),me(Pe,Ke)):ut?(wt=ut,pe=Wt,Ke&&!pe&&Te("character reference was not terminated by a semicolon"),Pe=parseInt(wt,16),me(Pe,Ke)):Nt?(Gt=Nt,Z(w,Gt)?w[Gt]:(Ke&&Te("named character reference was not terminated by a semicolon"),Ct)):(Gt=ci,Ft=Yt,Ft&&et.isAttributeValue?(Ke&&Ft=="="&&Te("`&` did not start a character reference"),Ct):(Ke&&Te("named character reference was not terminated by a semicolon"),T[Gt]+(Ft||"")))})};We.options={isAttributeValue:!1,strict:!1};var Le=function(De){return De.replace(f,function(et){return g[et]})},lt={version:"1.1.1",encode:Re,decode:We,escape:Le,unescape:We};if(n&&!n.nodeType)if(s)s.exports=lt;else for(var st in lt)Z(lt,st)&&(n[st]=lt[st]);else t.he=lt})($s)})(av,av.exports);var M9=av.exports;const O9=t0(M9),B2=(i,e)=>{const t=O9.decode(i);return e===void 0?t:`${e?"‪":"‫"}${t}‬`},u0=gr(i=>class extends i{get isCleanable(){return!0}clean(){const t=this;for(let n=t._children.length-1;n>=0;n--){const s=t._children[n];t.removeChild(s),s.isCleanable&&s.clean()}t.matrix=It.IDENTITY,t.freeToPool()}});class Lc extends u0(Ge){constructor(e){super(),this.initialize(e)}initialize(e){return this.isLTR=e,this.leftSpacing=0,this.rightSpacing=0,this}addElement(e){const t=this.children.length>0,n=e.width>0,s=e.getScaleVector().x,r=e.leftSpacing*s,a=e.rightSpacing*s;if(!t&&!n)return!1;if(t)if(!n)this.isLTR?this.rightSpacing+=r+a:this.leftSpacing+=r+a;else return this.isLTR?(e.left=this.localRight+this.rightSpacing+r,this.rightSpacing=a):(e.right=this.localLeft-this.leftSpacing-a,this.leftSpacing=r),this.addChild(e),!0;else return this.isLTR?(e.left=0,this.leftSpacing=r,this.rightSpacing=a):(e.right=0,this.leftSpacing=r,this.rightSpacing=a),this.addChild(e),!0;return!1}addExtraBeforeSpacing(e){this.isLTR?this.leftSpacing+=e:this.rightSpacing+=e}freeToPool(){Lc.pool.freeToPool(this)}}Lc.pool=new us(Lc);const dA=i=>i.type.toLowerCase()==="element",pA=i=>i.type.toLowerCase()==="text",Qa={scratchText:new kt(""),himalayaGetAttribute(i,e){if(!e)return null;const t=ie.find(e.attributes,n=>n.key===i);return t&&t.value||null},himalayaStyleStringToMap(i){const e=i.split(";"),t={};return e.forEach(n=>{if(n.length>0){const s=n.split(":");t[s[0].trim()]=s[1].trim()}}),t}};class yu extends u0(kt){constructor(e,t,n,s,r,a,o){super(""),this.initialize(e,t,n,s,r,a,o)}initialize(e,t,n,s,r,a,o){let l="";for(;e.startsWith(" ");)l+=" ",e=e.slice(1);let h="";for(;e.endsWith(" ");)h=" ",e=e.slice(0,e.length-1);this.string=B2(e,t),this.boundsMethod=s,this.font=n,this.fill=r,this.stroke=a,this.lineWidth=o;const c=l.length?Qa.scratchText.setString(l).setFont(n).width:0,f=h.length?Qa.scratchText.setString(h).setFont(n).width:0;return this.leftSpacing=t?c:f,this.rightSpacing=t?f:c,this}clean(){super.clean(),this.fill=null,this.stroke=null}fitsIn(e,t,n){return this.width+(t?n?this.leftSpacing:this.rightSpacing:0)<=e}freeToPool(){yu.pool.freeToPool(this)}}yu.pool=new us(yu);const Cu=new Qt(!self?.phet?.chipper?.queryParameters||self?.phet?.chipper?.queryParameters?.allowLinks,{tandem:R.GENERAL_MODEL.createTandem("allowLinksProperty")});class jb{constructor(e){this.callbacks=[],this._delay=400,this._interval=100,this.delayID=null,this.intervalID=null,this.fired=!1,e?.delay!==void 0&&(this.delay=e.delay),e?.interval!==void 0&&(this.interval=e.interval),e?.callback&&this.callbacks.push(e.callback)}isRunning(){return this.delayID!==null||this.intervalID!==null}start(){this.isRunning()||(this.fired=!1,this.delayID=zn.setTimeout(()=>{this.delayID=null,this.intervalID=zn.setInterval(()=>this.fire(),this.interval),this.fire()},this.delay))}stop(e){this.isRunning()&&(this.delayID&&(zn.clearTimeout(this.delayID),this.delayID=null),this.intervalID&&(zn.clearInterval(this.intervalID),this.intervalID=null),e&&!this.fired&&this.fire())}addCallback(e){this.callbacks.includes(e)||this.callbacks.push(e)}removeCallback(e){const t=this.callbacks.indexOf(e);t!==-1&&this.callbacks.splice(t,1)}fire(){const e=this.callbacks.slice(0);for(let t=0;t<e.length;t++)e[t]();this.fired=!0}set delay(e){this._delay=e}get delay(){return this._delay}set interval(e){this._interval=e}get interval(){return this._interval}dispose(){this.stop(!1),this.callbacks.length=0}}class Rr extends Fa{constructor(e){const t=Ne()({fire:ie.noop,fireOnDown:!1,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:R.REQUIRED,phetioPressActionInstrumented:!1,phetioReleaseActionInstrumented:!1,phetioReadOnly:!0},e);super(t),this._fireOnDown=t.fireOnDown,this.firedEmitter=new kn({tandem:t.tandem.createTandem("firedEmitter"),phetioEventType:vi.USER,phetioReadOnly:t.phetioReadOnly,phetioDocumentation:"Emits at the time that the listener fires",parameters:[{name:"event",phetioType:fi(Lo.SceneryEventIO)}]}),this.firedEmitter.addListener(t.fire),t.fireOnHold&&(this._timer=new jb({callback:this.fire.bind(this,null),delay:t.fireOnHoldDelay,interval:t.fireOnHoldInterval}))}fire(e){this.firedEmitter.emit(e)}press(e,t,n){return super.press(e,t,()=>{this._fireOnDown&&this.fire(e),this._timer&&this._timer.start(),n&&n()})}release(e,t){super.release(e,()=>{const n=!this._fireOnDown&&this.isHoveringProperty.value&&!this.interrupted;this._timer?this._timer.stop(n):n&&this.fire(e||null),t&&t()})}click(e,t){return super.click(e,()=>{this.interrupted||this.fire(e),t&&t()})}interrupt(){super.interrupt(),this._timer&&this._timer.stop(!1)}dispose(){this.firedEmitter.dispose(),this._timer&&this._timer.dispose(),super.dispose()}}function hp(i,e=Cu.value){const t=phet&&phet.chipper&&phet.chipper.isFuzzEnabled();if(e&&!t){const n=self.open(i,"_blank");n&&n.focus()}}const AE=["interactiveHighlight","interactiveHighlightLayerable","interactiveHighlightEnabled"],Df=i=>{const e=zu("InteractiveHighlightingClass",AE,class extends i{constructor(...n){super(...n),this._pointer=null,this._forwardingHighlightForPointer=null,this.displays={},this._interactiveHighlight=null,this._interactiveHighlightLayerable=!1,this._interactiveHighlightEnabled=!0,this.interactiveHighlightChangedEmitter=new un,this._isInteractiveHighlightActiveProperty=new oi(!1),this._activationListener={enter:this._onPointerEntered.bind(this),over:this._onPointerOver.bind(this),move:this._onPointerMove.bind(this),exit:this._onPointerExited.bind(this),down:this._onPointerDown.bind(this)},this._changedInstanceListener=this.onChangedInstance.bind(this),this.changedInstanceEmitter.addListener(this._changedInstanceListener),this._interactiveHighlightingEnabledListener=this._onInteractiveHighlightingEnabledChange.bind(this),this._boundPointerFocusClearedListener=this.handleLockedPointerFocusCleared.bind(this);const s=this._onPointerRelease.bind(this),r=this._onPointerCancel.bind(this);this._pointerListener={up:s,cancel:r,interrupt:r},this.isInteractiveHighlightActiveProperty=this._isInteractiveHighlightActiveProperty}get _isInteractiveHighlighting(){return!0}static get _mixesInteractiveHighlighting(){return!0}setInteractiveHighlight(n){this._interactiveHighlight!==n&&(this._interactiveHighlight=n,this._interactiveHighlightLayerable&&(n.visible=!1),this.interactiveHighlightChangedEmitter.emit())}set interactiveHighlight(n){this.setInteractiveHighlight(n)}get interactiveHighlight(){return this.getInteractiveHighlight()}getInteractiveHighlight(){return this._interactiveHighlight}setInteractiveHighlightLayerable(n){this._interactiveHighlightLayerable!==n&&(this._interactiveHighlightLayerable=n,this._interactiveHighlight&&(this._interactiveHighlight.visible=!1,this.interactiveHighlightChangedEmitter.emit()))}set interactiveHighlightLayerable(n){this.setInteractiveHighlightLayerable(n)}get interactiveHighlightLayerable(){return this.getInteractiveHighlightLayerable()}getInteractiveHighlightLayerable(){return this._interactiveHighlightLayerable}setInteractiveHighlightEnabled(n){this._interactiveHighlightEnabled=n;const s=Object.keys(this.displays);for(let r=0;r<s.length;r++){const a=this.displays[s[r]];this._interactiveHighlightingEnabledListener(a.focusManager.pointerHighlightsVisibleProperty.value)}}getInteractiveHighlightEnabled(){return this._interactiveHighlightEnabled}set interactiveHighlightEnabled(n){this.setInteractiveHighlightEnabled(n)}get interactiveHighlightEnabled(){return this.getInteractiveHighlightEnabled()}isInteractiveHighlightActivated(){let n=!1;const s=Object.keys(this.displays);for(let r=0;r<s.length;r++){const a=this.displays[s[r]];if(a.focusManager.pointerHighlightsVisibleProperty.value){const o=a.focusManager.pointerFocusProperty.value,l=a.focusManager.lockedPointerFocusProperty.value;if(l){if(l?.trail.lastNode()===this){n=!0;break}}else if(o?.trail.lastNode()===this){n=!0;break}}}return n}handleHighlightActiveChange(){this._isInteractiveHighlightActiveProperty.value=this.isInteractiveHighlightActivated()}dispose(){this.changedInstanceEmitter.removeListener(this._changedInstanceListener),this.hasInputListener(this._activationListener)&&this.removeInputListener(this._activationListener),this._pointer&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null),this._forwardingHighlightForPointer=null;const n=Object.keys(this.displays);for(let s=0;s<n.length;s++){const r=this.displays[n[s]];this.onDisplayRemoved(r),delete this.displays[n[s]]}super.dispose&&super.dispose()}_onPointerOver(n){const s=n.trail.nodes.find(r=>r.groupFocusHighlight&&ku(r));if(s){const r=n.trail.subtrailTo(s),a=Object.values(this.displays);for(let o=0;o<a.length;o++){const l=a[o];l.focusManager.pointerFocusProperty.value===null&&l.focusManager.pointerFocusProperty.set(new el(l,r))}}}_onPointerEntered(n){let s=!1;const r=Object.values(this.displays);for(let a=0;a<r.length;a++){const o=r[a];if(o.focusManager.pointerFocusProperty.value===null||!n.trail.equals(o.focusManager.pointerFocusProperty.value.trail)){const l=new el(o,n.trail);o.focusManager.pointerFocusProperty.set(l),o.focusManager.lockedPointerFocusProperty.value===null&&n.pointer.attachedListener&&(this.lockHighlight(l,o.focusManager),s=!0)}}s&&this.savePointer(n.pointer)}_onPointerMove(n){let s=!1;const r=Object.values(this.displays);for(let a=0;a<r.length;a++){const o=r[a],l=n.trail.subtrailTo(this);if((o.focusManager.pointerFocusProperty.value===null||!l.equals(o.focusManager.pointerFocusProperty.value.trail))&&!this.getDescendantsUseHighlighting(n.trail)){const h=new el(o,l);o.focusManager.pointerFocusProperty.set(h),o.focusManager.lockedPointerFocusProperty.value===null&&n.pointer.attachedListener&&(this.lockHighlight(h,o.focusManager),s=!0)}}s&&this.savePointer(n.pointer)}_onPointerExited(n){const s=Object.values(this.displays);for(let r=0;r<s.length;r++){const a=s[r];a.focusManager.pointerFocusProperty.set(null);const o=a.focusManager.lockedPointerFocusProperty.value;!n.trail.isPickable()&&(o===null||n.trail.containsNode(o.trail.lastNode()))&&this._onPointerRelease(n)}}_onPointerDown(n){if(this._pointer===null){let s=!1;const r=Object.values(this.displays);for(let a=0;a<r.length;a++){const o=r[a],l=o.focusManager.pointerFocusProperty.value,h=!!o.focusManager.lockedPointerFocusProperty.value;l&&!h&&(this.lockHighlight(l,o.focusManager),s=!0)}s&&this.savePointer(n.pointer)}}onDisplayAdded(n){n.focusManager.pointerHighlightsVisibleProperty.hasListener(this._interactiveHighlightingEnabledListener)||n.focusManager.pointerHighlightsVisibleProperty.link(this._interactiveHighlightingEnabledListener),this._forwardingHighlightForPointer&&(n.focusManager.pointerFocusProperty.value===null&&this.manualActivateAndLock(this._forwardingHighlightForPointer),this._forwardingHighlightForPointer=null)}onDisplayRemoved(n){n.focusManager.lockedPointerFocusProperty.hasListener(this._boundPointerFocusClearedListener)&&n.focusManager.lockedPointerFocusProperty.unlink(this._boundPointerFocusClearedListener),n.focusManager.pointerHighlightsVisibleProperty.unlink(this._interactiveHighlightingEnabledListener)}_onPointerRelease(n){const s=Object.values(this.displays);for(let r=0;r<s.length;r++){const a=s[r];a.focusManager.lockedPointerFocusProperty.value=null,a.focusManager.lockedPointerFocusProperty.hasListener(this._boundPointerFocusClearedListener)&&a.focusManager.lockedPointerFocusProperty.unlink(this._boundPointerFocusClearedListener)}this._pointer&&this._pointer.listeners.includes(this._pointerListener)&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null)}_onPointerCancel(n){const s=Object.values(this.displays);for(let r=0;r<s.length;r++)s[r].focusManager.pointerFocusProperty.set(null);this._onPointerRelease(n)}savePointer(n){this._pointer=n,this._pointer.addInputListener(this._pointerListener)}lockHighlight(n,s){s.lockedPointerFocusProperty.set(new el(n.display,n.trail.copy())),s.lockedPointerFocusProperty.link(this._boundPointerFocusClearedListener)}unlockHighlight(){Object.values(this.displays).forEach(n=>{n.focusManager.pointerFocusProperty.value=null}),this.handleLockedPointerFocusCleared(null)}forwardInteractiveHighlight(n){Object.values(this.displays).length===0?this._forwardingHighlightForPointer=n.pointer:Object.values(this.displays).forEach(s=>{s.focusManager.pointerFocusProperty.value===null&&this.manualActivateAndLock(n.pointer)})}manualActivateAndLock(n){const s=this.getTrails();if(s.length===1){const r=s[0],a=Object.values(this.displays);for(let o=0;o<a.length;o++){const l=a[o],h=new el(l,r);l.focusManager.pointerFocusProperty.set(h),this.lockHighlight(h,l.focusManager),this.savePointer(n)}}}handleLockedPointerFocusCleared(n){n===null&&this._onPointerRelease()}_onInteractiveHighlightingEnabledChange(n){const s=n&&this._interactiveHighlightEnabled,r=this.hasInputListener(this._activationListener);s&&!r?this.addInputListener(this._activationListener):!s&&r&&this.removeInputListener(this._activationListener),this.handleHighlightActiveChange()}onChangedInstance(n,s){const r=n.trail.uniqueId;if(s){const a=n.display;this.displays[r]=a,this.onDisplayAdded(a)}else{const a=this.displays[r];n.node.instances.length===0&&this.onDisplayRemoved(a),delete this.displays[r]}}getDescendantsUseHighlighting(n){const s=n.nodes.indexOf(this),r=n.nodes.slice(s+1,n.nodes.length);let a=!1;for(let o=0;o<r.length;o++)if(ku(r[o])){a=!0;break}return a}mutate(n){return super.mutate(n)}});return e.prototype._mutatorKeys=AE.concat(e.prototype._mutatorKeys),e};Df.forwardInteractiveHighlightFromPress=(i,e)=>{i.getLeafTrails().some(n=>n.nodes.some(s=>ku(s)?(s.forwardInteractiveHighlight(e),!0):!1))};const N9=4;let q2=1;class xo extends js{constructor(e){super(),this.attributeString=e}}xo.POLITE=new xo("polite");xo.ASSERTIVE=new xo("assertive");xo.enumeration=new Sr(xo);function wE(i){const e=i.attributeString,t=document.createElement("div");for(let n=1;n<=N9;n++){const s=document.createElement("p");s.setAttribute("id",`elements-${q2}-${e}-${n}`),s.setAttribute("aria-live",e),t.appendChild(s)}return t}class If extends wp{constructor(e){const t=Ne()({respectResponseCollectorProperties:!1,lang:"en"},e);super(t),this.politeElementIndex=0,this.assertiveElementIndex=0,this.ariaLiveContainer=document.createElement("div"),this.ariaLiveContainer.setAttribute("lang",t.lang),this.ariaLiveContainer.setAttribute("id",`aria-live-elements-${q2}`),this.ariaLiveContainer.setAttribute("style","position: absolute; left: 0px; top: 0px; width: 0px; height: 0px; clip: rect(0px 0px 0px 0px); pointer-events: none;");const n=wE(xo.POLITE),s=wE(xo.ASSERTIVE);this.ariaLiveContainer.appendChild(n),this.ariaLiveContainer.appendChild(s),this.politeElements=Array.from(n.children),this.assertiveElements=Array.from(s.children),q2++}announce(e,t,n){const s=Ne()({ariaLivePriority:xo.POLITE},n);if(this.hasSpoken=!0,e){if(ai(e)&&(e=e.value),s.ariaLivePriority===xo.POLITE){const r=this.politeElements[this.politeElementIndex];this.updateLiveElement(r,e,t),this.politeElementIndex=(this.politeElementIndex+1)%this.politeElements.length}else if(s.ariaLivePriority===xo.ASSERTIVE){const r=this.assertiveElements[this.assertiveElementIndex];this.updateLiveElement(r,e,t),this.assertiveElementIndex=(this.assertiveElementIndex+1)%this.assertiveElements.length}}this.announcementCompleteEmitter.emit(t,e)}cancel(){}cancelUtterance(e){}updateLiveElement(e,t,n){e.textContent="",e.hidden=!1,this.readyToAnnounce=!1,zn.setTimeout(()=>{n.predicate()?(Ti.setTextContent(e,t),zn.setTimeout(()=>{Zn.safari&&!Zn.mobileSafari?e.hidden=!0:e.textContent="",this.readyToAnnounce=!0},If.ARIA_LIVE_DELAY)):this.readyToAnnounce=!0},0)}}If.ARIA_LIVE_DELAY=200;If.AriaLive=xo;class R9 extends th{constructor(e){super(),this.utterance=e,this.timeInQueue=0,this.stableTime=0,this.utterancePriorityListener=null}dispose(){this.utterancePriorityListener&&(this.utterance.priorityProperty.unlink(this.utterancePriorityListener),this.utterancePriorityListener=null),super.dispose()}}class Xb extends rn{constructor(e,t){const n=Ne()({debug:!1,initialize:!0,featureSpecificAnnouncingControlPropertyName:null},t);super(n),this.announcer=e,this._initialized=n.initialize,this.featureSpecificAnnouncingControlPropertyName=n.featureSpecificAnnouncingControlPropertyName,this.queue=[],this._muted=!1,this._enabled=!0,this.announcingUtteranceWrapper=null,this.debug=n.debug,this.announcer.announcementCompleteEmitter.addListener(s=>{this.announcingUtteranceWrapper&&s===this.announcingUtteranceWrapper.utterance&&(!this.announcingUtteranceWrapper.isDisposed&&this.announcingUtteranceWrapper.dispose(),this.announcingUtteranceWrapper=null)}),this.stepQueueListener=null,this._initialized&&(this.stepQueueListener=this.stepQueue.bind(this),zn.addListener(this.stepQueueListener))}get length(){return this.queue.length}addToBack(e){if(this.initializedAndEnabled)if(!this.announcer.hasSpoken)this.announceImmediately(e);else{const t=this.prepareUtterance(e);this.queue.push(t),this.debug&&console.log("addToBack"),this.addPriorityListenerAndPrioritizeQueue(t)}}addToFront(e){if(mD("`addToFront()` has been deprecated because it is confusing, and most of the time doesn't do what is expected, because Utterances are announced based on time-in-queue first, and then position in the queue. It is recommended to use addToBack, and then timing variables on Utterances, or instead call queue.clear() before adding a more important alert to the queue."),!this.initializedAndEnabled)return;const t=this.prepareUtterance(e);this.queue.unshift(t)}addPriorityListenerAndPrioritizeQueue(e){e.utterancePriorityListener=()=>{this.prioritizeUtterances(e)},e.utterance.priorityProperty.link(e.utterancePriorityListener)}prepareUtterance(e){e instanceof Sn||(e=new Sn({alert:e}));const t=new R9(e);return this.removeOthersAndUpdateUtteranceWrapper(t),t.stableTime=0,t}removeUtterance(e){const t=n=>n.utterance===e;ie.remove(this.queue,t).forEach(n=>n.dispose())}prioritizeUtterances(e){let t=this.queue.indexOf(e);const n=t>=0;let s;n?s=t-1:s=-1;for(let r=s;r>=0;r--){const a=this.queue[r];this.shouldUtteranceCancelOther(e.utterance,a.utterance)&&this.removeUtterance(a.utterance)}if(n){t=this.queue.indexOf(e);const r=this.queue[t+1];r&&this.shouldUtteranceCancelOther(r.utterance,e.utterance)&&this.removeUtterance(e.utterance)}this.queue.length>0&&this.announcer.onUtterancePriorityChange(this.queue[0].utterance)}shouldUtteranceCancelOther(e,t){return this.announcer.shouldUtteranceCancelOther(e,t)}removeOthersAndUpdateUtteranceWrapper(e){const t=[];for(let n=0;n<this.queue.length;n++){const s=this.queue[n];s.utterance===e.utterance&&t.push(s.timeInQueue)}t.length>=1&&(e.timeInQueue=Math.max(...t)),ie.remove(this.queue,n=>n.utterance===e.utterance).forEach(n=>n.dispose())}get initializedAndEnabled(){return this._enabled&&this._initialized}pruneDisposedUtterances(){const e=this.queue.slice();this.queue.length=0;for(let t=0;t<e.length;t++){const n=e[t];n.utterance.isDisposed?n.dispose():this.queue.push(n)}}getNextUtterance(){let e=null;for(let t=0;t<this.queue.length;t++){const n=this.queue[t];if(n.stableTime>n.utterance.alertStableDelay||n.timeInQueue>n.utterance.alertMaximumDelay){e=n;break}}return e}hasUtterance(e){for(let t=0;t<this.queue.length;t++){const n=this.queue[t];if(e===n.utterance)return!0}return!1}clear(){this.debug&&console.log("UtteranceQueue.clear()"),this.queue.forEach(e=>e.dispose()),this.queue.length=0}cancelUtterance(e){this.announcer.cancelUtterance(e),this.hasUtterance(e)&&this.removeUtterance(e)}cancel(){this.debug&&console.log("UtteranceQueue.cancel()"),this.clear(),this.announcer.cancel()}setMuted(e){this._muted=e}set muted(e){this.setMuted(e)}get muted(){return this.getMuted()}getMuted(){return this._muted}setEnabled(e){this._enabled=e}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabled}stepQueue(e){if(this._enabled&&(e*=1e3,this.queue.length>0)){this.pruneDisposedUtterances();for(let n=0;n<this.queue.length;n++){const s=this.queue[n];s.timeInQueue+=e,s.stableTime+=e}const t=this.getNextUtterance();t&&this.attemptToAnnounce(t)}}announceImmediately(e){if(this.initializedAndEnabled&&(this.debug&&console.log("announceImmediately"),e instanceof Sn||(e=new Sn({alert:e})),this.announcingUtteranceWrapper===null||this.announcer.shouldUtteranceCancelOther(e,this.announcingUtteranceWrapper.utterance))){const t=this.prepareUtterance(e);t.stableTime=Number.POSITIVE_INFINITY,t.timeInQueue=Number.POSITIVE_INFINITY,this.queue.unshift(t),this.addPriorityListenerAndPrioritizeQueue(t),this.queue.includes(t)&&this.attemptToAnnounce(t)}}attemptToAnnounce(e){const t=e.utterance;if(this.announcer.readyToAnnounce){const n=t.getAlertText(this.announcer.respectResponseCollectorProperties);this.debug&&console.log("ready to announce in attemptToAnnounce(): ",n);const s=!this.featureSpecificAnnouncingControlPropertyName||t[this.featureSpecificAnnouncingControlPropertyName].value,r=t.canAnnounceProperty.value&&t.predicate()&&s;!this._muted&&r&&n!==""?(this.announcingUtteranceWrapper=e,this.debug&&console.log("announcing: ",n),this.announcer.announce(n,t,t.announcerOptions)):this.debug&&console.log("announcer readyToAnnounce but utterance cannot announce, will not be spoken: ",n),this.queue.includes(e)&&(ie.remove(this.queue,e),!e.isDisposed&&this.announcingUtteranceWrapper!==e&&e.dispose())}else this.debug&&console.log("announcer not readyToAnnounce")}dispose(){this._initialized&&zn.removeListener(this.stepQueueListener),super.dispose()}static fromFactory(){const e=new If,t=new Xb(e),n=e.ariaLiveContainer;document.body?document.body.appendChild(n):document.children[0].appendChild(n);let s=0;const r=a=>{const o=a-s;s=a,zn.emit(o/1e3),self.requestAnimationFrame(r)};return self.requestAnimationFrame(r),t}}const Eo=new Xb($i,{featureSpecificAnnouncingControlPropertyName:"voicingCanAnnounceProperty"});Eo.enabled=!1;const B9=1;class q9 extends Fa{constructor(e){let t=null;super({attach:!1,press:n=>{t=n.pointer.point},drag:n=>{n&&t&&t.distance(n.pointer.point)>B9&&this.interrupt()},release:n=>{n&&!this.interrupted&&e.voicingSpeakResponse({nameResponse:e.voicingNameResponse,hintResponse:e.voicingHintResponse})}})}}function z9(i){if(!(i instanceof Sn))throw new Error("utterance is not an Utterance")}class SE extends Sn{constructor(e){super(e)}}const z2=["voicingNameResponse","voicingObjectResponse","voicingContextResponse","voicingHintResponse","voicingUtterance","voicingResponsePatternCollection","voicingIgnoreVoicingManagerProperties","voicingFocusListener","voicingPressable"],ys=i=>{const e=zu("Voicing",z2,class tL extends Df(i){constructor(...n){super(...n),this._voicingPressable=!1,this._voicingNameResponseOverride=!1,this._voicingHintResponseOverride=!1,this._boundInstanceCanVoiceChangeListener=this.onInstanceCanVoiceChange.bind(this),this._voicingUtterance=null,tL.prototype.initialize.call(this)}initialize(...n){return super.initialize&&super.initialize(n),this._voicingCanSpeakProperty=new oi(!0),this._voicingResponsePacket=new tl,this._voicingFocusListener=this.defaultFocusListener,this._voicingActivationListener=null,this._voicingPressable=!1,this.setVoicingUtterance(new SE),this._voicingCanSpeakCount=0,this._boundInstancesChangedListener=this.addOrRemoveInstanceListeners.bind(this),this.changedInstanceEmitter.addListener(this._boundInstancesChangedListener),this._speakContentOnFocusListener={focus:s=>{this._voicingFocusListener&&this._voicingFocusListener(s)}},this.addInputListener(this._speakContentOnFocusListener),this}voicingSpeakFullResponse(n){const s=Ut({},n);s.hasOwnProperty("nameResponse")||(s.nameResponse=this._voicingResponsePacket.nameResponse),s.hasOwnProperty("objectResponse")||(s.objectResponse=this._voicingResponsePacket.objectResponse),s.hasOwnProperty("contextResponse")||(s.contextResponse=this._voicingResponsePacket.contextResponse),s.hasOwnProperty("hintResponse")||(s.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(s)}voicingSpeakResponse(n){const s=Ut({nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null},n);this.collectAndSpeakResponse(s)}voicingSpeakNameResponse(n){const s=Ut({},n);s.hasOwnProperty("nameResponse")||(s.nameResponse=this._voicingResponsePacket.nameResponse),this.collectAndSpeakResponse(s)}voicingSpeakObjectResponse(n){const s=Ut({},n);s.hasOwnProperty("objectResponse")||(s.objectResponse=this._voicingResponsePacket.objectResponse),this.collectAndSpeakResponse(s)}voicingSpeakContextResponse(n){const s=Ut({},n);s.hasOwnProperty("contextResponse")||(s.contextResponse=this._voicingResponsePacket.contextResponse),this.collectAndSpeakResponse(s)}voicingSpeakHintResponse(n){const s=Ut({},n);s.hasOwnProperty("hintResponse")||(s.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(s)}collectAndSpeakResponse(n){this.speakContent(this.collectResponse(n))}collectResponse(n){const s=Ut({ignoreProperties:this._voicingResponsePacket.ignoreProperties,responsePatternCollection:this._voicingResponsePacket.responsePatternCollection,utterance:this.voicingUtterance},n);let r=pu.collectResponses(s);return s.utterance&&(s.utterance.alert=r,r=s.utterance),r}speakContent(n){const s=!R.PHET_IO_ENABLED||!this.isInsidePhetioArchetype();n&&s&&Eo.addToBack(n)}setVoicingNameResponse(n){this._voicingNameResponseOverride=n!==null,this._voicingResponsePacket.nameResponse=n}set voicingNameResponse(n){this.setVoicingNameResponse(n)}get voicingNameResponse(){return this.getVoicingNameResponse()}getVoicingNameResponse(){return this._voicingResponsePacket.nameResponse}applyDefaultNameResponse(n){this._voicingNameResponseOverride||(this._voicingResponsePacket.nameResponse=n)}setVoicingObjectResponse(n){this._voicingResponsePacket.objectResponse=n}set voicingObjectResponse(n){this.setVoicingObjectResponse(n)}get voicingObjectResponse(){return this.getVoicingObjectResponse()}getVoicingObjectResponse(){return this._voicingResponsePacket.objectResponse}setVoicingContextResponse(n){this._voicingResponsePacket.contextResponse=n}set voicingContextResponse(n){this.setVoicingContextResponse(n)}get voicingContextResponse(){return this.getVoicingContextResponse()}getVoicingContextResponse(){return this._voicingResponsePacket.contextResponse}setVoicingHintResponse(n){this._voicingHintResponseOverride=n!==null,this._voicingResponsePacket.hintResponse=n}set voicingHintResponse(n){this.setVoicingHintResponse(n)}get voicingHintResponse(){return this.getVoicingHintResponse()}getVoicingHintResponse(){return this._voicingResponsePacket.hintResponse}applyDefaultHintResponse(n){this._voicingHintResponseOverride||(this._voicingResponsePacket.hintResponse=n)}setVoicingIgnoreVoicingManagerProperties(n){this._voicingResponsePacket.ignoreProperties=n}set voicingIgnoreVoicingManagerProperties(n){this.setVoicingIgnoreVoicingManagerProperties(n)}get voicingIgnoreVoicingManagerProperties(){return this.getVoicingIgnoreVoicingManagerProperties()}getVoicingIgnoreVoicingManagerProperties(){return this._voicingResponsePacket.ignoreProperties}setVoicingResponsePatternCollection(n){this._voicingResponsePacket.responsePatternCollection=n}set voicingResponsePatternCollection(n){this.setVoicingResponsePatternCollection(n)}get voicingResponsePatternCollection(){return this.getVoicingResponsePatternCollection()}getVoicingResponsePatternCollection(){return this._voicingResponsePacket.responsePatternCollection}setVoicingUtterance(n){this._voicingUtterance!==n&&(this._voicingUtterance&&this.cleanVoicingUtterance(),ys.registerUtteranceToVoicingNode(n,this),this._voicingUtterance=n)}set voicingUtterance(n){this.setVoicingUtterance(n)}get voicingUtterance(){return this.getVoicingUtterance()}getVoicingUtterance(){return z9(this._voicingUtterance),this._voicingUtterance}setVoicingPressable(n){n!==this._voicingPressable&&(n?(this._voicingActivationListener=new q9(this),this.addInputListener(this._voicingActivationListener)):!n&&this._voicingActivationListener&&(this.removeInputListener(this._voicingActivationListener),this._voicingActivationListener.dispose(),this._voicingActivationListener=null),this._voicingPressable=n)}set voicingPressable(n){this.setVoicingPressable(n)}get voicingPressable(){return this.getVoicingPressable()}getVoicingPressable(){return this._voicingPressable}setVoicingFocusListener(n){this._voicingFocusListener=n}set voicingFocusListener(n){this.setVoicingFocusListener(n)}get voicingFocusListener(){return this.getVoicingFocusListener()}getVoicingFocusListener(){return this._voicingFocusListener}defaultFocusListener(){this.voicingSpeakFullResponse({contextResponse:null})}get _isVoicing(){return!0}dispose(){if(this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingPressable){const n=this._voicingActivationListener;this.removeInputListener(n),n.dispose(),this._voicingActivationListener=null,this._voicingPressable=!1}this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),super.dispose()}clean(){if(this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingPressable){const n=this._voicingActivationListener;this.removeInputListener(n),n.dispose(),this._voicingActivationListener=null,this._voicingPressable=!1}this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),super.clean&&super.clean()}onInstanceCanVoiceChange(n){n?this._voicingCanSpeakCount++:this._voicingCanSpeakCount--,this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}handleInstancesChanged(n,s){n.visible&&n.voicingVisible&&(this._voicingCanSpeakCount=s?this._voicingCanSpeakCount+1:this._voicingCanSpeakCount-1),this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}addOrRemoveInstanceListeners(n,s){s?n.canVoiceEmitter.addListener(this._boundInstanceCanVoiceChangeListener):n.canVoiceEmitter.removeListener(this._boundInstanceCanVoiceChangeListener),this.handleInstancesChanged(n,s)}cleanVoicingUtterance(){this._voicingUtterance instanceof SE?this._voicingUtterance.dispose():this._voicingUtterance&&!this._voicingUtterance.isDisposed&&ys.unregisterUtteranceToVoicingNode(this._voicingUtterance,this)}mutate(n){return super.mutate(n)}});return e.prototype._mutatorKeys=z2.concat(e.prototype._mutatorKeys),e};ys.VOICING_OPTION_KEYS=z2;ys.alertUtterance=i=>{Eo.addToBack(i)};ys.registerUtteranceToVoicingNode=(i,e)=>{const t=i.voicingCanAnnounceProperties,n=e._voicingCanSpeakProperty;t.includes(n)||(i.voicingCanAnnounceProperties=t.concat([n]))};ys.unregisterUtteranceToVoicingNode=(i,e)=>{const t=i.voicingCanAnnounceProperties,n=e._voicingCanSpeakProperty,s=t.indexOf(n);i.voicingCanAnnounceProperties=t.splice(s,1)};ys.registerUtteranceToNode=(i,e)=>{const t=i.voicingCanAnnounceProperties;t.includes(e.visibleProperty)||(i.voicingCanAnnounceProperties=i.voicingCanAnnounceProperties.concat([e.visibleProperty])),t.includes(e.voicingVisibleProperty)||(i.voicingCanAnnounceProperties=i.voicingCanAnnounceProperties.concat([e.voicingVisibleProperty]))};ys.unregisterUtteranceToNode=(i,e)=>{const t=i.voicingCanAnnounceProperties,n=t.indexOf(e.visibleProperty),r=t.splice(n,1).indexOf(e.voicingVisibleProperty),a=t.splice(r,1);i.voicingCanAnnounceProperties=a};ys.BASIC_ACCESSIBLE_NAME_BEHAVIOR=(i,e,t)=>{const n=i;return e=Dr.BASIC_ACCESSIBLE_NAME_BEHAVIOR(n,e,t),n.applyDefaultNameResponse(t),e};ys.BASIC_HELP_TEXT_BEHAVIOR=(i,e,t)=>{const n=i;return e=Dr.HELP_TEXT_AFTER_CONTENT(n,e,t),n.applyDefaultHintResponse(t),e};class ig extends ys(u0(Ge)){constructor(e,t){super(),this.fireListener=null,this.accessibleInputListener=null,this.allowLinksListener=null,this.initialize(e,t,!1),this.mutate({cursor:"pointer",tagName:"a"})}initialize(e,t,n=!0){return n&&super.initialize(),this.innerContent=e,this.voicingNameResponse=e,typeof t=="function"?(this.fireListener=new Rr({fire:t,tandem:R.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href","#"),this.setPDOMAttribute("target","_self"),this.accessibleInputListener={click:s=>{s.domEvent&&s.domEvent.preventDefault(),t()}},this.addInputListener(this.accessibleInputListener)):(this.fireListener=new Rr({fire:s=>{s?.isFromPDOM()&&s.domEvent.preventDefault(),self._linkEventsHandled&&s.handle(),hp(t)},tandem:R.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href",t),this.setPDOMAttribute("target","_blank"),this.allowLinksListener=s=>{this.visible=s},Cu.link(this.allowLinksListener)),this}clean(){super.clean(),this.fireListener&&(this.removeInputListener(this.fireListener),this.fireListener.dispose()),this.fireListener=null,this.accessibleInputListener&&(this.removeInputListener(this.accessibleInputListener),this.accessibleInputListener=null),this.allowLinksListener&&(Cu.unlink(this.allowLinksListener),this.allowLinksListener=null)}freeToPool(){ig.pool.freeToPool(this)}}ig.pool=new us(ig);class Tp extends u0(Ge){constructor(e){super(),this.leftSpacing=0,this.rightSpacing=0,this.initialize(e)}initialize(e){return this.addChild(e),this}clean(){super.clean(),this.removeAllChildren()}fitsIn(e){return this.width<=e}freeToPool(){Tp.pool.freeToPool(this)}}Tp.pool=new us(Tp);class ng extends u0(Ge){constructor(e){super(),this.initialize(e)}initialize(e){return this.localBounds=new pt(0,0,0,e),this}freeToPool(){ng.pool.freeToPool(this)}}ng.pool=new us(ng);const F9=["boundsMethod","font","fill","stroke","lineWidth","subScale","subXSpacing","subYOffset","supScale","supXSpacing","supYOffset","capHeightScale","underlineLineWidth","underlineHeightScale","strikethroughLineWidth","strikethroughHeightScale","linkFill","linkEventsHandled","links","nodes","tags","replaceNewlines","align","leading","lineWrap",kt.STRING_PROPERTY_NAME,"string"];ua.containsKey("stringTest");const H9=new hr({size:20}),U9=["b","strong","i","em","sub","sup","u","s"],Ko={COMPLETE:"COMPLETE",INCOMPLETE:"INCOMPLETE",NONE:"NONE"},iL={"font-family":"family","font-size":"size","font-stretch":"stretch","font-style":"style","font-variant":"variant","font-weight":"weight","line-height":"lineHeight"},PE=Object.keys(iL);class pi extends nh(Ge){constructor(e,t){const n=Ne()({fill:"#000000",tandemNameSuffix:"Text",phetioType:pi.RichTextIO,phetioVisiblePropertyInstrumented:!1},t);typeof e=="string"||typeof e=="number"?n.string=e:n.stringProperty=e,super(),this._font=H9,this._boundsMethod="hybrid",this._fill="#000000",this._stroke=null,this._lineWidth=1,this._subScale=.75,this._subXSpacing=0,this._subYOffset=0,this._supScale=.75,this._supXSpacing=0,this._supYOffset=0,this._capHeightScale=.75,this._underlineLineWidth=1,this._underlineHeightScale=.15,this._strikethroughLineWidth=1,this._strikethroughHeightScale=.3,this._linkFill="rgb(27,0,241)",this._linkEventsHandled=!1,this._links={},this._nodes={},this._tags={},this._replaceNewlines=!1,this._align="left",this._leading=0,this._lineWrap=null,this._linkItems=[],this._hasAddedLeafToLine=!1,this.needPendingMinimumWidth=!1,this.pendingMinimumWidth=0,this._stringProperty=new Nl("",!0,this.onStringPropertyChange.bind(this)),this.lineContainer=new Ge({}),this.addChild(this.lineContainer),this.rebuildRichText(),this.localPreferredWidthProperty.lazyLink(()=>this.rebuildRichText()),this.mutate(n)}onStringPropertyChange(){this.rebuildRichText()}setStringProperty(e){return this._stringProperty.setTargetProperty(e,this,pi.STRING_PROPERTY_TANDEM_NAME)}set stringProperty(e){this.setStringProperty(e)}get stringProperty(){return this.getStringProperty()}getStringProperty(){return this._stringProperty}getPhetioMouseHitTarget(e=!1){return KI.value==="string"?this.getStringPropertyPhetioMouseHitTarget(e):super.getPhetioMouseHitTarget(e)}getStringPropertyPhetioMouseHitTarget(e=!1){const t=this._stringProperty.getTargetProperty();return t instanceof rn?t.getPhetioMouseHitTarget(e):"phetioNotSelectable"}initializePhetioObject(e,t){const n=Ne()({},t),s=this.isPhetioInstrumented();super.initializePhetioObject(e,n),R.PHET_IO_ENABLED&&!s&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,pi.STRING_PROPERTY_TANDEM_NAME,()=>new Cf(this.string,Ut({phetioReadOnly:!0,tandem:this.tandem.createTandem(pi.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},n.stringPropertyOptions)))}rebuildRichText(){const e=this._lineWrap==="stretch";this.widthSizable=e,this.pendingMinimumWidth=0,this.needPendingMinimumWidth=e;const t=this._lineWrap==="stretch"?this.localPreferredWidth:this._lineWrap;if(this.freeChildrenToPool(),this.string===""){this.appendEmptyLeaf();return}let n=this.string.replace(/\u202a/g,'<span dir="ltr">').replace(/\u202b/g,'<span dir="rtl">').replace(/\u202c/g,"</span>");this._replaceNewlines&&(n=n.replace(/\n/g,"<br>"));let s;try{s=uA(n)}catch{s=uA("INVALID TRANSLATION")}this._linkItems.length=0;const r=t===null?Number.POSITIVE_INFINITY:t,a=!0;let o=Lc.pool.create(a);for(this._hasAddedLeafToLine=!1;s.length;){const l=s[0],h=o.bounds.isValid()?o.width:0,c=this.appendElement(o,l,this._font,this._fill,a,r-h,1);c!==Ko.NONE&&(o.bounds.isValid()?this.appendLine(o):this.appendLine(ng.pool.create(Qa.scratchText.setString("X").setFont(this._font).height)),o=Lc.pool.create(a),this._hasAddedLeafToLine=!1),c!==Ko.INCOMPLETE&&s.splice(0,1)}for(o.bounds.isValid()&&this.appendLine(o),this.lineContainer.getChildrenCount()===0&&this.appendEmptyLeaf(),this.alignLines();this._linkItems.length;)(()=>{const l=this._linkItems[0].element,h=this._linkItems[0].href;let c;const f=[];for(c=this._linkItems.length-1;c>=0;c--){const v=this._linkItems[c];v.element===l&&(f.push(v.node),this._linkItems.splice(c,1))}const g=ig.pool.create(l.innerContent,h);for(this.lineContainer.addChild(g),c=0;c<f.length;c++){const v=f[c],A=v.getUniqueTrailTo(this.lineContainer).getMatrix();v.detach(),v.matrix=A,g.addChild(v)}})();this._linkItems.length=0,this.localMinimumWidth=e?this.pendingMinimumWidth:this.localBounds.width}freeChildrenToPool(){for(;this.lineContainer._children.length;){const e=this.lineContainer._children[this.lineContainer._children.length-1];this.lineContainer.removeChild(e),e.clean()}}dispose(){this.freeChildrenToPool(),super.dispose(),this._stringProperty.dispose()}appendLine(e){this.lineContainer.bounds.isValid()&&(e.top=this.lineContainer.bottom+this._leading,e.left=0),this.lineContainer.addChild(e)}appendEmptyLeaf(){this.appendLine(yu.pool.create("",!0,this._font,this._boundsMethod,this._fill,this._stroke,this._lineWidth))}alignLines(){const e=this._align==="center"?"centerX":this._align,t=this.lineContainer[e];for(let n=0;n<this.lineContainer.getChildrenCount();n++)this.lineContainer.getChildAt(n)[e]=t}appendElement(e,t,n,s,r,a,o){let l=Ko.NONE,h;const c=r?e.rightSpacing:e.leftSpacing,f=a-c;if(pA(t)){if(h=yu.pool.create(t.content,r,n,this._boundsMethod,s,this._stroke,this._lineWidth),this.needPendingMinimumWidth&&(this.pendingMinimumWidth=Math.max(this.pendingMinimumWidth,Math.max(..._E(t.content).map(g=>{const v=t.content.slice(g.min,g.max),A=yu.pool.create(v,r,n,this._boundsMethod,s,this._stroke,this._lineWidth),P=A.width*o;return A.dispose(),P})))),!h.fitsIn(f,this._hasAddedLeafToLine,r)){const g=_E(t.content),v=A=>A.length===0?"":t.content.slice(A[0].min,A[A.length-1].max);if(this._hasAddedLeafToLine||g.length>1){const A=[];let P=!1;for(A.unshift(g.pop());g.length;)if(h.clean(),h=yu.pool.create(v(g),r,n,this._boundsMethod,s,this._stroke,this._lineWidth),!h.fitsIn(f,this._hasAddedLeafToLine,r)&&(this._hasAddedLeafToLine||g.length>1))A.unshift(g.pop());else{P=!0;break}if(P)l=Ko.INCOMPLETE,t.content=v(A);else return h.clean(),Ko.INCOMPLETE}}this._hasAddedLeafToLine=!0}else if(dA(t)){if(t.tagName==="br")return Ko.COMPLETE;if(t.tagName==="span"){const A=Qa.himalayaGetAttribute("dir",t);A&&(r=A==="ltr")}if(t.tagName==="node"){const A=Qa.himalayaGetAttribute("id",t),P=A&&this._nodes[A]||null;if(P){if(h=Tp.pool.create(P),this._hasAddedLeafToLine&&!h.fitsIn(f))return h.clean(),Ko.INCOMPLETE;const w=Qa.himalayaGetAttribute("align",t);if(w==="center"||w==="top"||w==="bottom"){const T=Qa.scratchText.setString("Test").setFont(n).bounds;w==="center"?h.centerY=T.centerY:w==="top"?h.top=T.top:w==="bottom"&&(h.bottom=T.bottom)}}else return l;this._hasAddedLeafToLine=!0}else h=Lc.pool.create(r);const g=Qa.himalayaGetAttribute("style",t);if(g){const A=Qa.himalayaStyleStringToMap(g);A.color&&(s=new ct(A.color));const P={};for(let w=0;w<PE.length;w++){const T=PE[w];A[T]&&(P[iL[T]]=A[T])}n=(typeof n=="string"?hr.fromCSS(n):n).copy(P)}if(t.tagName==="a"){let A=Qa.himalayaGetAttribute("href",t);if(A!==null&&this._links!==!0)if(A.startsWith("{{")&&A.indexOf("}}")===A.length-2){const P=A.slice(2,-2);A=this._links[P]}else A=null;A&&(this._linkFill!==null&&(s=this._linkFill),t.innerContent||(t.innerContent=pi.himalayaElementToAccessibleString(t)),this._linkItems.push({element:t,node:h,href:A}))}else t.tagName==="b"||t.tagName==="strong"?n=(typeof n=="string"?hr.fromCSS(n):n).copy({weight:"bold"}):t.tagName==="i"||t.tagName==="em"?n=(typeof n=="string"?hr.fromCSS(n):n).copy({style:"italic"}):t.tagName==="sub"?(h.scale(this._subScale),h.addExtraBeforeSpacing(this._subXSpacing),h.y+=this._subYOffset):t.tagName==="sup"&&(h.scale(this._supScale),h.addExtraBeforeSpacing(this._supXSpacing),h.y+=this._supYOffset);const v=h.getScaleVector().x;if(t.tagName!=="node"){for(;l===Ko.NONE&&t.children.length;){const A=h.bounds.isValid()?h.width:0,P=t.children[0];l=this.appendElement(h,P,n,s,r,a/v,o*v),l!==Ko.INCOMPLETE&&t.children.splice(0,1);const w=h.bounds.isValid()?h.width:0;a+=A-w}l===Ko.COMPLETE&&t.children.length&&(l=Ko.INCOMPLETE)}if(t.tagName==="sub")isFinite(h.height)&&(h.centerY=0);else if(t.tagName==="sup")isFinite(h.height)&&(h.centerY=Qa.scratchText.setString("X").setFont(n).top*this._capHeightScale);else if(t.tagName==="u"){const A=-h.top*this._underlineHeightScale;isFinite(h.top)&&h.addChild(new Fh(h.localLeft,A,h.localRight,A,{stroke:s,lineWidth:this._underlineLineWidth}))}else if(t.tagName==="s"){const A=h.top*this._strikethroughHeightScale;isFinite(h.top)&&h.addChild(new Fh(h.localLeft,A,h.localRight,A,{stroke:s,lineWidth:this._strikethroughLineWidth}))}if(this._tags&&this._tags[t.tagName]&&h.bounds.isValid()){const A=h,P=h.bounds;h=Tp.pool.create(this._tags[t.tagName](h)),A!==h&&(h.localBounds=P)}}return h&&(e.addElement(h)||(this._linkItems=this._linkItems.filter(v=>v.node!==h),h.clean())),l}setString(e){return e=`${e}`,this._stringProperty.set(e),this}set string(e){this.setString(e)}get string(){return this.getString()}getString(){return this._stringProperty.value}setBoundsMethod(e){return e!==this._boundsMethod&&(this._boundsMethod=e,this.rebuildRichText()),this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}setFont(e){return this._font!==e&&(this._font=e,this.rebuildRichText()),this}set font(e){this.setFont(e)}get font(){return this.getFont()}getFont(){return this._font}setFill(e){return this._fill!==e&&(this._fill=e,this.rebuildRichText()),this}set fill(e){this.setFill(e)}get fill(){return this.getFill()}getFill(){return this._fill}setStroke(e){return this._stroke!==e&&(this._stroke=e,this.rebuildRichText()),this}set stroke(e){this.setStroke(e)}get stroke(){return this.getStroke()}getStroke(){return this._stroke}setLineWidth(e){return this._lineWidth!==e&&(this._lineWidth=e,this.rebuildRichText()),this}set lineWidth(e){this.setLineWidth(e)}get lineWidth(){return this.getLineWidth()}getLineWidth(){return this._lineWidth}setSubScale(e){return this._subScale!==e&&(this._subScale=e,this.rebuildRichText()),this}set subScale(e){this.setSubScale(e)}get subScale(){return this.getSubScale()}getSubScale(){return this._subScale}setSubXSpacing(e){return this._subXSpacing!==e&&(this._subXSpacing=e,this.rebuildRichText()),this}set subXSpacing(e){this.setSubXSpacing(e)}get subXSpacing(){return this.getSubXSpacing()}getSubXSpacing(){return this._subXSpacing}setSubYOffset(e){return this._subYOffset!==e&&(this._subYOffset=e,this.rebuildRichText()),this}set subYOffset(e){this.setSubYOffset(e)}get subYOffset(){return this.getSubYOffset()}getSubYOffset(){return this._subYOffset}setSupScale(e){return this._supScale!==e&&(this._supScale=e,this.rebuildRichText()),this}set supScale(e){this.setSupScale(e)}get supScale(){return this.getSupScale()}getSupScale(){return this._supScale}setSupXSpacing(e){return this._supXSpacing!==e&&(this._supXSpacing=e,this.rebuildRichText()),this}set supXSpacing(e){this.setSupXSpacing(e)}get supXSpacing(){return this.getSupXSpacing()}getSupXSpacing(){return this._supXSpacing}setSupYOffset(e){return this._supYOffset!==e&&(this._supYOffset=e,this.rebuildRichText()),this}set supYOffset(e){this.setSupYOffset(e)}get supYOffset(){return this.getSupYOffset()}getSupYOffset(){return this._supYOffset}setCapHeightScale(e){return this._capHeightScale!==e&&(this._capHeightScale=e,this.rebuildRichText()),this}set capHeightScale(e){this.setCapHeightScale(e)}get capHeightScale(){return this.getCapHeightScale()}getCapHeightScale(){return this._capHeightScale}setUnderlineLineWidth(e){return this._underlineLineWidth!==e&&(this._underlineLineWidth=e,this.rebuildRichText()),this}set underlineLineWidth(e){this.setUnderlineLineWidth(e)}get underlineLineWidth(){return this.getUnderlineLineWidth()}getUnderlineLineWidth(){return this._underlineLineWidth}setUnderlineHeightScale(e){return this._underlineHeightScale!==e&&(this._underlineHeightScale=e,this.rebuildRichText()),this}set underlineHeightScale(e){this.setUnderlineHeightScale(e)}get underlineHeightScale(){return this.getUnderlineHeightScale()}getUnderlineHeightScale(){return this._underlineHeightScale}setStrikethroughLineWidth(e){return this._strikethroughLineWidth!==e&&(this._strikethroughLineWidth=e,this.rebuildRichText()),this}set strikethroughLineWidth(e){this.setStrikethroughLineWidth(e)}get strikethroughLineWidth(){return this.getStrikethroughLineWidth()}getStrikethroughLineWidth(){return this._strikethroughLineWidth}setStrikethroughHeightScale(e){return this._strikethroughHeightScale!==e&&(this._strikethroughHeightScale=e,this.rebuildRichText()),this}set strikethroughHeightScale(e){this.setStrikethroughHeightScale(e)}get strikethroughHeightScale(){return this.getStrikethroughHeightScale()}getStrikethroughHeightScale(){return this._strikethroughHeightScale}setLinkFill(e){return this._linkFill!==e&&(this._linkFill=e,this.rebuildRichText()),this}set linkFill(e){this.setLinkFill(e)}get linkFill(){return this.getLinkFill()}getLinkFill(){return this._linkFill}setLinkEventsHandled(e){return this._linkEventsHandled!==e&&(this._linkEventsHandled=e,this.rebuildRichText()),this}set linkEventsHandled(e){this.setLinkEventsHandled(e)}get linkEventsHandled(){return this.getLinkEventsHandled()}getLinkEventsHandled(){return this._linkEventsHandled}setLinks(e){return this._links!==e&&(this._links=e,this.rebuildRichText()),this}getLinks(){return this._links}set links(e){this.setLinks(e)}get links(){return this.getLinks()}setNodes(e){return this._nodes!==e&&(this._nodes=e,this.rebuildRichText()),this}getNodes(){return this._nodes}set nodes(e){this.setNodes(e)}get nodes(){return this.getNodes()}setTags(e){return this._tags!==e&&(this._tags=e,this.rebuildRichText()),this}getTags(){return this._tags}set tags(e){this.setTags(e)}get tags(){return this.getTags()}setReplaceNewlines(e){return this._replaceNewlines!==e&&(this._replaceNewlines=e,this.rebuildRichText()),this}set replaceNewlines(e){this.setReplaceNewlines(e)}get replaceNewlines(){return this.getReplaceNewlines()}getReplaceNewlines(){return this._replaceNewlines}setAlign(e){return this._align!==e&&(this._align=e,this.rebuildRichText()),this}set align(e){this.setAlign(e)}get align(){return this.getAlign()}getAlign(){return this._align}setLeading(e){return this._leading!==e&&(this._leading=e,this.rebuildRichText()),this}set leading(e){this.setLeading(e)}get leading(){return this.getLeading()}getLeading(){return this._leading}setLineWrap(e){return this._lineWrap!==e&&(this._lineWrap=e,this.rebuildRichText()),this}set lineWrap(e){this.setLineWrap(e)}get lineWrap(){return this.getLineWrap()}getLineWrap(){return this._lineWrap}mutate(e){return super.mutate(e)}static stringWithFont(e,t){return`<span style='font-style: ${t.style};font-variant: ${t.variant};font-weight: ${t.weight};font-stretch: ${t.stretch};font-size: ${t.size};font-family: ${t.family};line-height: ${t.lineHeight};'>${e}</span>`}static himalayaElementToString(e){if(pA(e))return B2(e.content);if(dA(e)){const t=e.children.map(s=>pi.himalayaElementToString(s)).join(""),n=Qa.himalayaGetAttribute("dir",e);return n==="ltr"||n==="rtl"?Gn.wrapDirection(t,n):t}else return""}static himalayaElementToAccessibleString(e){if(pA(e))return B2(e.content);if(dA(e)){let t=e.children.map(s=>pi.himalayaElementToAccessibleString(s)).join("");const n=Qa.himalayaGetAttribute("dir",e);return(n==="ltr"||n==="rtl")&&(t=Gn.wrapDirection(t,n)),ie.includes(U9,e.tagName)?`<${e.tagName}>${t}</${e.tagName}>`:t}else return""}static getAccessibleStringProperty(e){return new Kb([e],t=>{const n=uA(t);let s="";return n.forEach(r=>{s+=pi.himalayaElementToAccessibleString(r)}),s})}}pi.STRING_PROPERTY_TANDEM_NAME=kt.STRING_PROPERTY_TANDEM_NAME;pi.prototype._mutatorKeys=F9.concat(Ge.prototype._mutatorKeys);pi.RichTextIO=new ui("RichTextIO",{valueType:pi,supertype:Ge.NodeIO,documentation:"The PhET-iO Type for the scenery RichText node"});class nL extends Wb{constructor(e,t,n,s,r,a,o=It.IDENTITY){const l=document.createElement("img");function h(f,g,v,A,P){l.src=f.toDataURL()}new Ge({scale:t,children:[e]}).toCanvas(h,-n*t,-s*t,r*t,a*t),super(l),this.setTransformMatrix(o.timesMatrix(It.scaling(1/t)))}}class Qb extends wS{constructor(e,t,n){super(e,t,n),this.preferredSizeSet=new rl(!1,!1),this.lastAvailableBounds=pt.NOTHING.copy(),this.lastUsedBounds=pt.NOTHING.copy(),this._marginConstraint=e}reposition(e,t,n,s,r,a){const o=s&&this.isSizable(e)?t:this.getMinimumSize(e);this.attemptPreferredSize(e,o),a===wn.ORIGIN?this.positionOrigin(e,n+r):this.positionStart(e,n+(t-this.getCellBounds()[e.size])*a.padRatio);const l=this.getCellBounds();return this.lastAvailableBounds[e.minCoordinate]=n,this.lastAvailableBounds[e.maxCoordinate]=n+t,this.lastUsedBounds.set(l),l}get effectiveLeftMargin(){return this._leftMargin!==null?this._leftMargin:this._marginConstraint._leftMargin}get effectiveRightMargin(){return this._rightMargin!==null?this._rightMargin:this._marginConstraint._rightMargin}get effectiveTopMargin(){return this._topMargin!==null?this._topMargin:this._marginConstraint._topMargin}get effectiveBottomMargin(){return this._bottomMargin!==null?this._bottomMargin:this._marginConstraint._bottomMargin}getEffectiveMinMargin(e){return e===Ot.HORIZONTAL?this.effectiveLeftMargin:this.effectiveTopMargin}getEffectiveMaxMargin(e){return e===Ot.HORIZONTAL?this.effectiveRightMargin:this.effectiveBottomMargin}get effectiveMinContentWidth(){return this._minContentWidth!==null?this._minContentWidth:this._marginConstraint._minContentWidth}get effectiveMinContentHeight(){return this._minContentHeight!==null?this._minContentHeight:this._marginConstraint._minContentHeight}getEffectiveMinContent(e){return e===Ot.HORIZONTAL?this.effectiveMinContentWidth:this.effectiveMinContentHeight}get effectiveMaxContentWidth(){return this._maxContentWidth!==null?this._maxContentWidth:this._marginConstraint._maxContentWidth}get effectiveMaxContentHeight(){return this._maxContentHeight!==null?this._maxContentHeight:this._marginConstraint._maxContentHeight}getEffectiveMaxContent(e){return e===Ot.HORIZONTAL?this.effectiveMaxContentWidth:this.effectiveMaxContentHeight}getMinimumSize(e){return this.getEffectiveMinMargin(e)+Math.max(this.proxy.getMinimum(e),this.getEffectiveMinContent(e)||0)+this.getEffectiveMaxMargin(e)}getMaximumSize(e){return this.getEffectiveMinMargin(e)+(this.getEffectiveMaxContent(e)||Number.POSITIVE_INFINITY)+this.getEffectiveMaxMargin(e)}attemptPreferredSize(e,t){if(this.proxy[e.sizable]){const n=this.getMinimumSize(e),s=this.getMaximumSize(e);t=Xn(t,n,s);let r=t-this.getEffectiveMinMargin(e)-this.getEffectiveMaxMargin(e);const a=this.proxy.getMax(e);a!==null&&(r=Math.min(a,r)),this._marginConstraint.setProxyPreferredSize(e,this.proxy,r),this.preferredSizeSet.set(e,!0)}}unsetPreferredSize(e){this.proxy[e.sizable]&&this._marginConstraint.setProxyPreferredSize(e,this.proxy,null)}positionStart(e,t){const n=this.getEffectiveMinMargin(e)+t;this._marginConstraint.setProxyMinSide(e,this.proxy,n)}positionOrigin(e,t){this._marginConstraint.setProxyOrigin(e,this.proxy,t)}getOriginBounds(){return this.getCellBounds().shiftedXY(-this.proxy.x,-this.proxy.y)}getCellBounds(){return this.proxy.bounds.withOffsets(this.effectiveLeftMargin,this.effectiveTopMargin,this.effectiveRightMargin,this.effectiveBottomMargin)}dispose(){Ot.enumeration.values.forEach(e=>{this.preferredSizeSet.get(e)&&this.unsetPreferredSize(e)}),super.dispose()}static createHelperNode(e,t,n){const s=new Ge,r=.4,a=zt.union(e.map(v=>zt.bounds(v.lastAvailableBounds))),o=zt.union(e.map(v=>zt.bounds(v.lastUsedBounds))),l=zt.union(e.map(v=>zt.bounds(v.proxy.bounds))),h=zt.bounds(t).shapeDifference(a),c=a.shapeDifference(o),f=o.shapeDifference(l),g=(v,A,P)=>{const w=new kt(v,{font:new hr({size:6,family:"monospace"}),fill:A}),T=xt.bounds(w.bounds,{fill:P,children:[w]});return new nL(T,4,Math.floor(T.left),Math.ceil(T.top+1),Math.floor(T.width),Math.floor(T.height-2),It.rotation2(-Math.PI/4))};return s.addChild(new bi(h,{fill:g("spacing","#000","#fff"),opacity:.6})),s.addChild(new bi(c,{fill:g("empty","#aaa","#000"),opacity:.6})),s.addChild(new bi(f,{fill:g("margin","#600","#f00"),opacity:.6})),s.addChild(xt.bounds(t,{stroke:"white",lineDash:[2,2],lineDashOffset:2,lineWidth:r})),s.addChild(xt.bounds(t,{stroke:"black",lineDash:[2,2],lineWidth:r})),e.forEach(v=>{s.addChild(xt.bounds(v.getCellBounds(),{stroke:"rgba(0,255,0,1)",lineWidth:r}))}),e.forEach(v=>{s.addChild(xt.bounds(v.proxy.bounds,{stroke:"rgba(255,0,0,1)",lineWidth:r}))}),e.forEach(v=>{const A=v.getCellBounds(),P=new Fa({tandem:R.OPT_OUT});s.addChild(xt.bounds(A,{inputListeners:[P]}));let w=n(v);v.effectiveLeftMargin&&(w+=`leftMargin: ${v.effectiveLeftMargin}
`),v.effectiveRightMargin&&(w+=`rightMargin: ${v.effectiveRightMargin}
`),v.effectiveTopMargin&&(w+=`topMargin: ${v.effectiveTopMargin}
`),v.effectiveBottomMargin&&(w+=`bottomMargin: ${v.effectiveBottomMargin}
`),v.effectiveMinContentWidth&&(w+=`minContentWidth: ${v.effectiveMinContentWidth}
`),v.effectiveMinContentHeight&&(w+=`minContentHeight: ${v.effectiveMinContentHeight}
`),v.effectiveMaxContentWidth&&(w+=`maxContentWidth: ${v.effectiveMaxContentWidth}
`),v.effectiveMaxContentHeight&&(w+=`maxContentHeight: ${v.effectiveMaxContentHeight}
`),w+=`layoutOptions: ${JSON.stringify(v.node.layoutOptions,null,2).replace(/ /g,"&nbsp;")}
`;const T=new pi(w.trim().replace(/\n/g,"<br>"),{font:new hr({size:12})}),D=xt.bounds(T.bounds.dilated(3),{fill:"rgba(255,255,255,0.8)",children:[T],leftTop:A.leftTop});s.addChild(D),P.isOverProperty.link(M=>{D.visible=M})}),s}}[...yS];class G9 extends cI(Qb){constructor(e,t,n){super(e,t,n),this.size=0,this._isSeparator=!1,this.flowConstraint=e,this.orientation=e.orientation,this.onLayoutOptionsChange(!0)}get effectiveAlign(){return this._align!==null?this._align:this.flowConstraint._align}get effectiveCellAlign(){return this._cellAlign!==null?this._cellAlign:this.flowConstraint._cellAlign}get effectiveStretch(){return this._stretch!==null?this._stretch:this.flowConstraint._stretch}get effectiveGrow(){return this._grow!==null?this._grow:this.flowConstraint._grow}onLayoutOptionsChange(e=!1){this.node.layoutOptions&&this.setOptions(this.node.layoutOptions),super.onLayoutOptionsChange(),e||this.flowConstraint.updateLayoutAutomatically()}setOptions(e){const t=Ne()({isSeparator:!1},e);this._isSeparator=t.isSeparator,this.setConfigToInherit(t),this.mutateConfigurable(t)}}const W9={isValidValue:i=>!isNaN(i.x)&&!isNaN(i.y),validationMessage:"Vector2 x/y should not be NaN"};class Wy extends Mt{constructor(e,t){const n=Ne()({valueType:Oe,validBounds:null,validators:[],phetioValueType:Oe.Vector2IO},t);n.validators.push(W9),n.validBounds&&n.validators.push({validationMessage:"Vector2 is not within validBounds",isValidValue:s=>n.validBounds.containsPoint(s)}),super(e,n),this.validBounds=n.validBounds}}const sL=["resize","layoutOrigin"];class IS extends md(Ge){constructor(e){super(e),this.layoutOriginProperty=new Wy(Oe.ZERO)}linkLayoutBounds(){this._constraint.layoutBoundsProperty.link(e=>{this.localBounds=e})}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this._constraint.excludeInvisible=e}setChildren(e){if(this.constraint.isLocked)return super.setChildren(e);const t=this.getChildren();return this.constraint.lock(),super.setChildren(e),this.constraint.unlock(),ie.isEqual(t,e)||this.constraint.updateLayoutAutomatically(),this}updateLayout(){this._constraint.updateLayout()}get resize(){return this._constraint.enabled}set resize(e){this._constraint.enabled=e}get layoutOrigin(){return this.layoutOriginProperty.value}set layoutOrigin(e){this.layoutOriginProperty.value=e}get constraint(){return this._constraint}dispose(){this._constraint.dispose(),super.dispose()}}const Ha={DISABLED_OPACITY:.45,DEFAULT_COLOR_PROFILE:"default",PROJECTOR_COLOR_PROFILE:"projector"},K9=[...sL,...fI.filter(i=>i!=="excludeInvisible"),"forward","forwardProperty"],mc={orientation:"horizontal",spacing:0,align:"center",stretch:!1,forward:!0};class sh extends IS{constructor(e){const t=Ne()({excludeInvisibleChildrenFromBounds:!0,resize:!0,disabledOpacity:Ha.DISABLED_OPACITY,forward:mc.forward,forwardProperty:null},e);super(),this._cellMap=new Map,this._constraint=new vS(this,{preferredWidthProperty:this.localPreferredWidthProperty,preferredHeightProperty:this.localPreferredHeightProperty,minimumWidthProperty:this.localMinimumWidthProperty,minimumHeightProperty:this.localMinimumHeightProperty,layoutOriginProperty:this.layoutOriginProperty,orientation:mc.orientation,spacing:mc.spacing,align:mc.align,stretch:mc.stretch,excludeInvisible:!1}),this._forwardProperty=new Nl(mc.forward,!1,this.onFlowBoxForwardReverseChanged.bind(this)),this.onChildInserted=this.onFlowBoxChildInserted.bind(this),this.onChildRemoved=this.onFlowBoxChildRemoved.bind(this),this.onChildrenReordered=this.onFlowBoxChildrenReordered.bind(this),this.onChildrenChanged=this.onFlowBoxChildrenChanged.bind(this),this.childInsertedEmitter.addListener(this.onChildInserted),this.childRemovedEmitter.addListener(this.onChildRemoved),this.childrenReorderedEmitter.addListener(this.onChildrenReordered),this.childrenChangedEmitter.addListener(this.onChildrenChanged);const n=ie.omit(t,zh),s=ie.pick(t,zh);this._constraint.lock(),this.mutate(n),this._constraint.unlock(),this._constraint.updateLayout(),this.mutate(s),this.linkLayoutBounds()}onFlowBoxChildInserted(e,t){const n=new G9(this._constraint,e,this._constraint.createLayoutProxy(e));if(this._cellMap.set(e,n),this.forward)this._constraint.insertCell(t,n);else{const s=this._constraint.getCellQuantity()-t;this._constraint.insertCell(s,n)}}onFlowBoxChildRemoved(e){const t=this._cellMap.get(e);this._cellMap.delete(e),this._constraint.removeCell(t),t.dispose()}onFlowBoxChildrenReordered(e,t){const n=this._children.slice(e,t+1);this.forward||n.reverse(),this._constraint.reorderCells(n.map(s=>this._cellMap.get(s)),e,t)}onFlowBoxChildrenChanged(){this._constraint.updateLayoutAutomatically()}onFlowBoxForwardReverseChanged(){this.onFlowBoxChildrenReordered(0,this._children.length-1),this.onFlowBoxChildrenChanged()}getCell(e){return this._cellMap.get(e)}get orientation(){return this._constraint.orientation}set orientation(e){this._constraint.orientation=e}get spacing(){return this._constraint.spacing}set spacing(e){this._constraint.spacing=e}get lineSpacing(){return this._constraint.lineSpacing}set lineSpacing(e){this._constraint.lineSpacing=e}get justify(){return this._constraint.justify}set justify(e){this._constraint.justify=e}get justifyLines(){return this._constraint.justifyLines}set justifyLines(e){this._constraint.justifyLines=e}get wrap(){return this._constraint.wrap}set wrap(e){this._constraint.wrap=e}get align(){return this._constraint.align}set align(e){this._constraint.align=e}get stretch(){return this._constraint.stretch}set stretch(e){this._constraint.stretch=e}get grow(){return this._constraint.grow}set grow(e){this._constraint.grow=e}get margin(){return this._constraint.margin}set margin(e){this._constraint.margin=e}get xMargin(){return this._constraint.xMargin}set xMargin(e){this._constraint.xMargin=e}get yMargin(){return this._constraint.yMargin}set yMargin(e){this._constraint.yMargin=e}get leftMargin(){return this._constraint.leftMargin}set leftMargin(e){this._constraint.leftMargin=e}get rightMargin(){return this._constraint.rightMargin}set rightMargin(e){this._constraint.rightMargin=e}get topMargin(){return this._constraint.topMargin}set topMargin(e){this._constraint.topMargin=e}get bottomMargin(){return this._constraint.bottomMargin}set bottomMargin(e){this._constraint.bottomMargin=e}get minContentWidth(){return this._constraint.minContentWidth}set minContentWidth(e){this._constraint.minContentWidth=e}get minContentHeight(){return this._constraint.minContentHeight}set minContentHeight(e){this._constraint.minContentHeight=e}get maxContentWidth(){return this._constraint.maxContentWidth}set maxContentWidth(e){this._constraint.maxContentWidth=e}get maxContentHeight(){return this._constraint.maxContentHeight}set maxContentHeight(e){this._constraint.maxContentHeight=e}setForwardProperty(e){return this._forwardProperty.setTargetProperty(e,this,null)}set forwardProperty(e){this.setForwardProperty(e)}get forwardProperty(){return this.getForwardProperty()}getForwardProperty(){return this._forwardProperty}setForward(e){return this.forwardProperty.set(e),this}set forward(e){this.setForward(e)}get forward(){return this.isForward()}isForward(){return this.forwardProperty.value}dispose(){this._constraint.lock(),this.childInsertedEmitter.removeListener(this.onChildInserted),this.childRemovedEmitter.removeListener(this.onChildRemoved),this.childrenReorderedEmitter.removeListener(this.onChildrenReordered),this.childrenChangedEmitter.removeListener(this.onChildrenChanged),this._forwardProperty.dispose();for(const e of this._cellMap.values())e.dispose();super.dispose()}setOrientation(e){return this.orientation=e,this}getOrientation(){return this.orientation}setSpacing(e){return this.spacing=e,this}getSpacing(){return this.spacing}setAlign(e){return this.align=e,this}getAlign(){return this.align}setResize(e){return this.resize=e,this}isResize(){return this.resize}getHelperNode(){return Qb.createHelperNode(this.constraint.displayedCells,this.constraint.layoutBoundsProperty.value,t=>{let n="";const s=Ot.fromLayoutOrientation(t.orientation);return n+=`align: ${wn.internalToAlign(s,t.effectiveAlign)}
`,n+=`stretch: ${t.effectiveStretch}
`,n+=`grow: ${t.effectiveGrow}
`,n})}mutate(e){return e?super.mutate(e):this}}sh.DEFAULT_FLOW_BOX_OPTIONS=mc;sh.prototype._mutatorKeys=[...NI,...K9,...Ge.prototype._mutatorKeys];class _i extends sh{constructor(e){super(Ne()({orientation:"horizontal"},e))}onFlowBoxChildInserted(e,t){super.onFlowBoxChildInserted(e,t)}mutate(e){return super.mutate(e)}}const bs=(i,e)=>{const t=e.replace(new RegExp("^.*,"),""),n=atob(t),s=new Uint8Array(n.length);for(let r=0;r<s.length;r++)s[r]=n.charCodeAt(r);return s};class _s{constructor(){this.audioBufferProperty=new oi(null)}}let gt;self.AudioContext?gt=new self.AudioContext:self.webkitAudioContext?gt=new self.webkitAudioContext:(gt={},console.error("error: this browser does not support Web Audio"));const rL="data:audio/mpeg;base64,//twxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAvAAA6xgAFBQoKEBAVFRsbICAmJisrKzExNjY7O0FBRkZMTFFRV1dXXFxiYmdnbGxycnd3fX2CgoKIiI2Nk5OYmJ2do6OoqK6urrOzubm+vsTEycnOztTU2dnZ39/k5Orq7+/19fr6//8AAAA5TEFNRTMuOTlyAc0AAAAAAAAAABRgJAW0QgAAYAAAOsbaTGT/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7cMQAAA7dBSqUMwACca6u+zCwACApgAAXXczyPLdxZhAGAydwQABDIj/xEZEREf+Lu7u7/u7ve0Rd3etERv//7EAGAydsYQhyCEf3va73/vdxEREREE78RGRBMmnYPg+DgIHC5QH3rB/EAIHCCgQBAoCDsEFAgCBQ5BAMS4P8Hwff8Tg+/Ln/wfw/dtCpCmhkRCphx5RJJZZeBkRuhKWvyydbusLOy2X0io3WgGaNyeDJBmxPyYwBMkkASVLJiZ9hJJ6AbpW4kk99nJJYE5sSUUDSD0v2Uxg7HWSUR3HErRtlPe9nmg/mKDjSLtiEPSe+7iuGG73WurKU76Uc2rl97P/53S1Zi7F7bTdrqiJq7Yyv/6/4uDVj3sbtRSKhqLrLWf///+W7VaNBODMAAAAAhEmcl8uCdsv/+3LECACSeTVr3PYAAgosbbjzDui0GmTRO96xrR6OSGLxYWzCh0mEDaIBVQ1xdHw5aTTq1RBj58yvaK7kDNUcale1G/E8611+6daha6+Nuve72X/mq1vX4PrMdWcrz6xDa5mtWNdU7m/T6NNo///rm27+dT9a+Zkd6fT/g32p4lBxRRZUUEZkSpCIsNCAtctr9kCSmrzv/66lVQ1EAAAYJYBOUKeF2LY8JcplQlohfTxvMumyOzxtvJFI2I1iV/2+b7RFSrZTO6aJ5MkgHPUtQkCaHAveIIOrPtb93Iau5+y1NzYL9Qj73xM3UbSGUWHvsqfnJ4icIKCqmRkXHi7Fv5s+RbK+5lfBfsWpgmsPoMiQNQhUGq3ftfu6lZEQCAAdhIBYSUm4Mg3UkuGF41iEbgUdPDc0Got2R//7cMQPANKRa2aHsMvSTarsuPYZuF8aBIK5DNG4yVq00SKu45iMbvD0hnRdGZTLhUOlQUHEQxZI0nUJm0eSI9baV9KuyiRjoJrc+33zekx8HOlcjZN4SRow5KvReT0TCBrN5PBctW1DG1BO3JGo6UyE3L+XmU8bx+21n2sOs5ISgSu9fP1RoRMsZ77pdCNCIABRCfq0cp2mW1JA00GjDcnVzET1hxp6vWITR2PwVqBRd95y4yfxk4HlFxmuHsEjwSERbPSaPrt1rjJUq8jTztuqiMIVvokgVZPpldExIjDdS9MOF3tn6v8gSijYMhZdMloS84Dyk4Lsoac1AqaTR5XfbyTuuj6NOqzp1t9l4VzLVkgtFz8qLkpm8bfVkTwqWRSIAENhDHdSKh8TFYPi2SliEOJphuJA5jj/+3LEDQDTVTNihj00Sj4o7Hj2GbhRwjFogi0oCEEKpXkDQ1XO4UdTsldrplPYETbDxQUMN2RoQRERZZJQlaICdRovjetIl4a1AypaO64eFzYtvYbaiI8RsJrwhKL8V0lctGLEIJwUhc2no1E10MGWlobJRcTJOnBVN9RTe8x5xQY8gEhGeivAD9Kj2clnP0/r/o7f29wRGQgQABBRd4DWoKRz9PqW7bVVK8wKpJGy86YXjydIg7IaYyTkMnA2HwkDgymWHRgeURnDAzUiQpfWJbqrP1doW7Dr9JpEmgU3ufBglsjOYkLEluXfsxgU5RIm/ko4vtOUFPCpwXcpak5aDGo/HwkcpnNSBxyquxpaphphuZesaERW8FTYmOECqEVujZJWxNWpYjUiAAAAABXCElsN96SxSHuec//7cMQKANBlN2XHsMvKbSrr0PSbWKeMk7RApAVSWnGtss2qvAuSCo2gVOx7aTWgRwdC5Q5XKyMtVNm2IZy4mpVmLH7NfyhaRF/heeJh3pNkpMM/k7aMTihApGZc84qJyHSjTrYzLy6ivnLwz22bTM7drVPZtI9MRR3bZ+9w9Ltel/97bnYuNAAL8LFCONVLkcZinWN2qQORCmlQaUCJT9lzChDkF0X1hSqptOVIxmM7Ucp0/MfyWQlmdLghBKmIp2aFZWM5lgbPoUhg7qxmN4ISJCKXSnqNpc0uRnPprEOYXgy87ih5UlaYQL6pqaJsUsnzp5QwpzOkSOOOTWFwVqakTZwqdaj2KXRFTV0GKh7T2vvbe5QVFDwHXHqlajd9StYlCSAANRqSAJBoRRGHkjA6TxyIA+vliCT/+3LEDICQrSthZhh6yjIkbDj2DmFDE0z2x0vQCQoOhJx8rFAdFDZ2vbJInVXPpSeDcrLjyPC8sAiemDcKFpMhF92taG4+42EiJE1ZhgSicTrsjfS9/CvbIyoCrYmm3DfNNQ5WB0Q10HLJAbJkFwxC0Fu297fNssCm8QbOdO/tV193CKZmBAABKAVIlF5gMAgpbT/O44z8TDeq2eC+HqA1C7E7YpD9EOHZWJJIXXwqFJafKkaZZdeUkUBCEIBI+mpPYiwjK2c+A8hbbZ0dDQQHEkFHoymLa2AxYcIEUMoBuw5KalXDCLHkaBMydjxmN66RnpVdXDBxME0gEChkjzuO1DfKKlQPTu/9v+13e7u5VEUxAAAABwSD4UiRyLeZiLMih9sA4dhKdcRRCU8+ndKQ1pBGhsvHg3XLlP/7cMQWAI6I0WXHsGvJ8J1sOPYNufuFPYo0x0kMlqhDiah7AJAjhyh6wSZ9Q0zW4Fmbk5MFHDKCNKlXyosaC+UZEVWjIBeXysepCx8o6Hnlw99Pcn/nX7xI527e12HMSMQAAAZLEqHHAhktVh7RELbDJhIhuNWyQT1CWJsxIgkxgwokafXGxUcZiPnYTBebWTDm1GtWn8BaUuo1jFYMPL70cz7M6bZigguUndXaEhoGsIBrC6rofIZiBDspucY46sX9muDoPBsWHSspVvxWp8tep+vi/Pr/m/+qqFZFYiAAAAAFC7hekzJyZZ3DPXJLYJ3K6EgEKRDJAQqAAJ2tQkaMlJ9g2bWUVh9pkiZPrkJGOEC3SpVdVtOL2GV3u3WQKxUQ9pnsyKV0M7o+w7uitfchFc62amXq9jP/+3LEL4COtVtl56RNwc+c7Dj2DXiqImdumXoN5G0qdM1vGNpcQB6SK3stfTuhmYAAAPYxDlISOM0FaYScQ9cogwD5parHpabmJ02cKWFaxEmHzXEWQt1XXoQrr0x03A6yYQuPFiCooDQoADMSKNeSiBcJiFTW14plS3IQzZZ+zGUNiJQcVUyQHrrYTEJwCgUMtvaA5BZxkUNHiDpl1/7aiHJDMQAAAAd0PM3hxAzRwnszI9aOm6rP1Cz4kVEYDTgqjaIxSeFa6JUTE6ZAduaEgJFEQuoH1BUmWcgLonJImk1UGSej060BEKzkSvd3FAAcKYvbC5EajkYJHJt4WhjhkSOtLMnpG+e25jF+2IKxowYeXkTMqCiBRrK62W9MqhmKAAAlC7K4mQvz7bDlZi3uLyY4Cd+ileIl4//7cMRNAM+1J1/HpG3B9CRruPYOKDIUIfKFNyE20aoQMRidQ1TMr1HkdQpAaPaAfR1PmVh0sVsqnUJ9E3dkSwIE7XIhHBDikLgQfUa4kGkJQI4T07WgYkhdNcrlx3ztI6+nclBGyChIsak0m6ooFiykFiMdR02XdDUkEAAAABeVhMT4Q4vBoI4zFeh5yKRRoxZKlFZsZV+6GOTYUBUxsbq1Y/JbetkNqurITwvQn7unrGKo455/2ob/hWM6m/K2g7uR0dnbOk2v8RIzo+5ZUvPe/S9PekVx4v+JhTFxvHYyLuI6bRf3RXMd8HLtv/2qZFQxEAAAOCSHcYCfVg9RYz3cy9lxVSZfsYrcVNAqJH2eCC4rDI4HlSx8aLoAxpoicsqREoYYPB4FugaOFJwZcsVvFP1FeGEMm4T/+3LEYYCPESNh57BtyeElq7z0jbmgrq+MIEqRqRSYi0mPhTPRjNVrXp8LJ+SQ8uW7/DMGDumQ+rrzR3ryX3O92v+RqUY0MwAAAAAXTpGONc3KF+OsOo/FKbx/CSJZsYlI6vpgfMqj4UJDFS9C8Q05xZm37dchmZyevLGlS+Yo6iReBS3DRDRkkBm3NIU8lPqUlznCtWw5w498j/rVjQodLFEpY1rC7gWEYiNlrmpnowi9zVTjPdR42UgAACocAoQwUWABDmfHKCVTQThKTl+iZsqrjmg4BabHZYSJEZZOmEq84Q0z7rCMJCwVIgoYBKhkXK2JiFtvV10kLS9eIdhiKnBNcLuLLowUygguW4sUxbD+VRDovWHHNhlL4Svqcj+ywIECwcC0ofQAkOe4oFBcAXFFrV6V3UgAAP/7cMR7gI6FC1/nsGvB+aSrNMSPCAAAACh+NZyMh+4OMvxbieLOobGtP3q+cbgq0+jm4oFc/aijNyMkGkdgNjokoSXTQ5hQyfUbgoRR+Tp3iWggNLiOswIR29Sco88ct9tesg2pEnxe5uFkt0rIjthHI7d5ffJGfpThc2KGVrJKHCa4Mh0gwadW0Ox2ZoSKdWiFIgAQAAAYYh+qQy04eTISpHduURoTsCseKRCxwOaNwnB3iTifm6Xpf0imclarQ2DoNG8EwhEVgqiMCIQkoTNBBkEonHkC0Jrn4QYWJ1nj0dUbWnFWP1q1zMbapdrVZxU0cjdpCeN5nbFOAudL+0i28rLiM3xqRC9deil6Vf5KkQAAAACqQFnRAnqCJiqy4G8eStQLU9OvMh+TI9hdvWQsZbRmEgcUdZP/+3LElACQAPNXp7DUgfEl6rj0juC4ZUW9LDp0h8wMzLz4SBJfRFw/LqZGl9PZhl15roRZOEmRzzRiqcGgOhSG7TFjGAELhQhp+wZO8opy+7Wf24GvfjvoN+j1NaDpKN6//W/krZAABdHpTpuiQp4hyKKihY2M6WQ3k1ROKM4TDhIyM2uZ1PDFYXaMoxKgfKwxORaRDBIOhQUDJVEDRWOChN7MkK8zk1KZiogKKBMFJ+MIkWHqAsFBaK78t0i8H81vTiNZlGLJTvGfdfXMaGYnd/x37uRfFW83arGaiQAAAAC8JgjCkghYAksA1BQODEenTYS1r4kkIWLzMxtUrFcFyUZDq4PJAsKmDQDOOCQyLlAkCpKZGCY4cHk1Dg+vZ5BsG2LQSyiQEtVdwKBnEA6pOJxxDZkLBcafFf/7cMSoAI8Qz1ensHTJ25rq9PSO0Uk1gFwouoNGCTmqoD8Exh5BdIsR+tygKKJMlXsjtLwikYAcLEd50jhPsnhNEWtnicDOl3E00+hhw4LopmBzOCEc6qG0zzSm6XpLQh4UTPImEJg8MS0hkkKR0Ulcw9cTASAOqjSRJExf3ErpIpmVeRkSbBRmOTz1B2M5oqAWLFA4SYYQ4DaH89IgQXFwkLIBc3HI6rs00gAAAAFOryeKsnirMxGiek0Ql+fUU7FMysiRcyoJqtNypOEXRXjaQtGNsK0hPGEbgllldVShrGD8qB6fLMb+EcGMGHcHAJ2IBQGqS0sEKFgJhGHxSCLmYs2LSlDez/YymmTqRfRDVX58Kg5d6wWY7kR6RY6aLNNZQCiMioe5H7en/mQAS40Er5PinS6cC+P/+3LEwgGPxMVVpiR2gdOZKnz2GsjhwQ9MHYTgvoKnBCyD502kiySOjElIzEpLlvLTxZaBCW4hOPpvJoTBPoopYxFwkOdaciroWFLOf58cz0FjdWNPysc1jQy8uzLnn/9SNtnAuGnBMyre8AHTUOgHRUAAC6DiPU6U+1dRIOOCnAaJaRbhAAuoMUTel4QUIkl4pqyNe9RhhpYl4HnQLUuSeQVGlAo5CQmK3FoKltViaMi7CawAUYhAg4FamyWCOQUNLYoPGWr5qSQWFRqPLvbxSxPmRR6Nny3nOliflHGcEYni+kGEMY6kFXZ8IFeP9NDlc0Y8O9tcTsYSyIRwJGk86QER2vD08MQ9KCZdCZPGDaSKA/cu9pYXYj9bXIENI6y9o4NPcU1iT3vmnIuax/nDff/Po1CgAAry5P/7cMTbAJBZK1OnsHSBp6arKPSNskz4ribKE6ihPw63Iv44UDcDMAJFkHTodUNEPAdCCbH50wVBaJoHS6tfNnj1QwWUg7A4TlBdKa094m+FF4hwIGpCllgVzyXPfB/5xRSkgdVnKd35HakP2fGdZHTctg71l8rn8QHbWwgrOVyO/mQzDerZKjQAAAAAABM9eRVBLx50xGtp3TKVDI5x3aRYRjdHLxkQ6ICkXWpFfS83aaYkikisVazNFb3+T9SeYk01sVmnYc/Jc9RpTJTRfiQK8F7wNDliTLEd2zMe66+3khD800PDu2DqgnE4ycaSkIRSUHA9PH/+qo82UlLxSue6k1BNMJySA2DFwYqAV9OY/77LTLIEAYVNAFhCNInLT1ie1//TqiUwAAFMQUuSCKk8WxHHMlUNUCP/+3LE9oCYMSE8rD2cSeKlKjT2DXksr0uY1l5Dz6NBANsQpUAN8fr5lTLY1OBf09EiLl4uVhxNNYfvSCqBIKNrnq/4UYB7IujT5ZFm1GS1L5p+JJG8aNPztXsM7lPi8zk+CXkED1sET0MFJSmKR0VsV1RW0AAAAAAAxaiRbws7h9PRJNE5IRMZrqdLSwqNCY7zsMbSSXAh4rAk3DgLk4KW6KNCACLvjpapUKQ8nSpqyBSpAFFF5JeoRL6XWXiStXwEFL01GXJmq3rzi0qcR+4BXPEbbt4qh+C0xFAfjkpMk5mcmYvkJQ8iMCcoAYMmSIRjAhWOLCcvbB9hzl5wlNWXKkZEWxmWtW05TbXxJ39x2XvHRyW00uTSNKMgRMGBIWhO1Ob79lgRYIAADqIDuXBLHxMTdsW1CEIdN//7cMTrgJO8/0OMMNxBx54p9PMPSJvncnmFXE9XlS3LBZkqH6HIQDEbA4IiYCa0nICQqjodFNgc1g5FQQkAUCQmLa98f1jR6bIS9EkRHx+sVCJAldbn5ENjene5nEdndlq1o3zPg0oD1LDQBipA293w1Sn7+ffVFCAAAAABSVtlf9ozdYDWi1t9ljtfa+67lLHhhTB2QcovsmKmY2MWSDui4GRFpV5LDMhFQAwaq5ZEasz1kTzhxy4Cxm5BiMEkxEVDrB1M05ujIYeS/guZWrAcANMvuc8VPberlwLNKzChQ+hNlBWNo5hldcTiHsoGTQ+2LmWbNvWRm9R1/kZ4iIbpXRQevcLC5bMcs94buQowHACycWDk3cUcthq+hn0alIABVChRZlL/1mupeoeC31IpqtcN9iJO1kz/+3DE9YCWRSs/TDE8AdgbaXT2GmBVw3wSqeCJHIwAFhBizUymLcPdvHpLGcoz1WcxznUQ0uqcRosJPhOSZui9EEjrtWFmGADAOKiAEoEpOGEzCiE6OFlYtSeuZWWkNPUkLMuWsnMdVJRmsm9Cz/WW3gdAQoWNkQeFEyb2mCrLjRp5xG3zy6F3dn9CcZKSAAAAAKhDzrFtPUQ8bo8VIWwpTiLYWBDxYdQS4rlGoAmsQvhjG+aZbi2LSfTwiitTiUbmPT9acVW8W0PRqNNJDj+YqJPQKCHdI2SHFrdJo4t1uHm7mTkbRHjmE1tLGE45+945jkNBcLNRBtSL7BYLsuYn8iuUMaMvItk1SIggAAArQIuxbbDmXq5bPALE3fdOXuU6DQGDReah0uK0mbhx1iZqaLM0IkiMYsLI//tyxPMBlO0lP0wkfIJBG+h1h6V4cYNomiQTDAXtdxT1RK0uBMYtUG+LCik8hiKiJh+/Tqpgv2ZthPLNxPEFLQI0cLOgiuR3LHyHRqZSpF2fGOxeb0GmNmfjVvaDbLsYgoFAmpJoWBsbJ/1QEkb3JC+mawAAAAHafPSpezA32dVgimyt8Ax9SlaLmoJVeMmIgJ8onr5bopuD1pyjRzMMRRSURbUoDFOOFhLKWO/jzu4FgM3RKcFV6l6SxbllKZSsixWwLGLxW5RA78RVxXIaLAr+rBLnSD2hmUK8PniaIxZHAj1EsiOHR9apWIcb6srmK56s2iskmlQcMMD06RkGTRZc0OkzHaLid5Unv7hNA0PFEEU1m//+pyEB9FhFuVIrgkAZIoQyBzJcnDgRBFog3i5lyQCxBIkssGr/+3DE6YCPxM9Lp6R6EjKfqHWHmphgYgAYAKkoshwlqHFYctOIiFYWlixFzrTnIaHAoTEE72EMTGlWA1ql6n1ornaUwBoKs8prshUdjjW2vxJx2VCwuKLZDYbBKapQmioKhGkkTlRs0SLgtUA0cTkMKtoVp9WSx2a+42wr72KNioRp0u57lmRbyM3mpeAAABDdV3N0jroMbWAYkwVwmgQaoo5a5Iw3RvFRCzCLD+paIrx8DnMZh4AYZKtssQQeQSoNpDUsKehnFIq9+XTQ5AkJepnqLcRT7kac9G3rEk7Hjfj4q3eZ41py6rUplWwuQJHno4oSDvamqj5cTZhIQItdM5G2VaM0NRpbejEmmSCASaJXyPFgupDoklAAY0TNLsbxQqRVheo4fKrBVp9uMn2t1fTW0ZUZR6JY//tyxPYBlLEdOSww3EJkoCcg/CXxMw1YoYIRnKjAvJAanTLXNYoiam+nujSnk1h5Wfp0RBYZQBqa3kWoHBW2w34jcaeEpYFpmEo9jSPpwXx9JZsSLDXeGiGfGSar52VE58vIFTz3uZWKVmr3CvK5lx9/5vCt6rrEFv5ysLmoYblhUkrJiwp1f0JgAAAAA9rkcf1w2qtFRXjUCs5eahgwuYw9ibRy5rAoKZkiBQJ/odHxELJXKVpMvWyw+CkV45Sx9wXheVqDQ1tNSQ+WO/rI36clp7cnWm2ZPyweKVH8m4Dzk9HGzQ+V5wnp7aaIlHGBK3kCOAhW5uRzFnICtUJhoHHRnY6QFE1DuNCZo4EBWpw6kqBJ5hix9n/6pCCwAo+DnR5GTAMuwXReB4OBlKcdCLXZ8EmVxciXiHv/+3DE6QGRmOk6zCTcQk+e5yT8MXhIDMAJBCRXgYgkBvH4iQkSbP5rRDsizeUBJA1IhDAQsQAnJDUUSFzWh3GgTk0yMVgOaijLAkw4ISBwkELHF0xKDRuI95AjgwymZj1p0Xh/iYpqrE9gwwyTGFbzbPQfW0v//s338y2mzAAAAAAAAKhwOo4svV7xnLNXFmlfOU3V4KJXMYZ4ny6yUaGyUTysLTlKEgh0SIa2+4qCuZfo0MGCv42JrrcXYgN22VqaP+qbrhNKUMb567iwEABEpLB+yPTTA/qEIygOZbIKNpVHZrPMTkjUyqMgklYW5cN2TqaJBkSBdoKkoiAzBwZNmW29oox6lf/sT8db78BkQECbNJ9O5j5f5CWFAsGa40lJBiy6HLuLwL6sgFgqDpVg7Cg4rIoqmSud//tyxOqBkijxOywkfEIaHGd09JtAEaPNwDjg5KHjdH/TyWO1pPt41B1g18K1LOCEpsJeQ6gqzpcMfTghxbCbqhWWZ1HALGhR6wsUmRK2ISomIhguqfgyOTDkZyMOP2RRIjxYvWvd24YygNSaWDTwVSQTtvZwoVlB3/1/99UQkEAAAAABXD4wrxOUqOiESyIWFTm2h5hkrVkQTVCUPHahKDXBLiwASAzBfIeW4hafJMQolTSfjSbRPnbc2lsEqYROB3vjnXzBQ2eMUl0fqmahCHf10ioIE8Jlm2+rMQSxRlIiMT6NKdqVGfNKoNDE3iVrg0HyqrPCT3kLLx6adjS52uYIe2XLkADc5pj7Ok/40duJerKCyAbtkCH9LFkfGTpsFt4oiqEFeZYoLUkqdAAcYkNRhrQs8QpLuCP/+3DE8QGSINE7rLDaQkycppWHp0IILRLtgYECs/VtRPUBVhSBR1WSlLARENtFTpfsyHsdZmnasqEwDKWCcnUfsJJJWOVSiZF5DOjj4g+YvjJEojFTRYmLkNNvgjRIzjMW2TBZ3SI4QZzyqOtYxSgFmElB9Cxq3BST+r/t/9v//7f3KkAAABKpXhehmDKWpOrBCCNbLD25IAA5JeFnyqSYKlykAKscM2ES2ZxIYA3ojQgmUBFQslcQAnJkpYvuz+Dy8qtLd0UG9SVf+NoC4mXaWsm85TkNZH49LYabE/J0yK9RoYzh8miCbhIbOSWFh8F2GkZUdnJsggwaMG2LaO2Q4n9WaxvNUVEANPSEhceWFgGhOw+Jm1sjqiv/6zQAbJmTjltgmlfqLttKWfQTCV2OS5sCxJeKkhER//tyxPCBkQTRPaew2gKIH6Yhh6dIY1K5S7SqUukVADwG+Xu+kSUWLgLAQe9q52LSSMrSd8cO2EjRBQ5keryxH91WoTqGbBjuG9HehKtdTHTCRQZZ+qLjqFZLGKnNks0uzqjS7WeeTZNgNITOBoERhguJU3JexPGOddv/7GuotdqqUAAAEhLEDUau3fYQn08Mbchqq+S8S+EIhge6W3En3jcyWoYoIkqDTMOIs010266Y40CtFpiuwcKnbG0rERErXdWIqZA9MmMAY4voxhpS5FZpx3wvGknKvH0Yb9hIeeaPP5WtdKIRlkxbYVJC6/BYyTMaPywtqzA7e+hSSLTNdvLTr3fDiA2DYIsSVQRsc4X/+P6P/X/WsRgHxZruqdOvUYEsUoUoK4a/2Rs4gRZEdXOwtIdK1FFWRDH/+3DE7YGTIOEyzD06AiEZpuWHpwhdqgzWl3kzyyzus2dBLxQNdqLLJCMpWGcpAjJVyoPcyjNJoGpUUROF+uXaMhaOSCLVKqXVS2srIUVBpVFIss1YhgjcdzCHK5RpySUzstgqEjAdCoItm3xMOPzpd1qd5IYY9PPf1/soGQDEC4kylI5g6DZfxYVVVDkj+v5C0HlYiy5JFSwdMkkAYmYKZCnzKwwyNC2XELV0taIQEQyA6cLXHeSQ9j4FjFsEfKI7QDQD4AigwkykBjj4F6+BZmiYxuPzyRKbLcTW7grPtrJgxrUJXPaUb3wRIkDAgtJj0IWRor3JwdPWMgpZIMiEDjSp4WFL63u9fqkGrr/k//Qj//v9SAGpJpXrqiVhWQvU/Tfu4z5fqsaGy/W5oc5YpUGURHQhU0CD//tyxO6BktDXMMy9mgIpmSalh6bQvck8YjGgARpNFqrBUf0aUbFWJRo8QFGFMG0U4YkFwoKUCDDJ2ns1WDbeGcgtQigVR/HsvjmtTJlNrkyREtOEWC5KdPGosNGw+dcussRqIlV1E5p3PGrc8oBkEUiJfsVuqKrFnYwvrk/p39JhAAAAAA5B8WnIp26jeIbL8X4tp52FQwyhRB62oLbLVLQIg7CJlHNL8u+yYvarenbElE3rV6rEvG3RNe677sLBrmiLymQAo9gbAicHRIAOOheGJOPicTyWjLY9GkViSzHEuaedhjxpv2tZqqUL2/ZYYb3mi4aYgzI3OufM0CooKKeZaQW8VIBI3UbUH86VqVGrIRYeoRp36Ekwi4mgYH0nPagyVVJB2GyQUz4OBMVVXcIFDnLZ48Kkm6j/+3DE8IGTDNcuLD02wjoa5hmGJ0B3k/0HJgBJAgg6raSdYNGt11ir2FZE1wCFcz/L3c1aLXkz0ci6aTLsJdLnUtlSwy+C5yPD6P9SPa+jIIgy+VwLDUoqah8ElmWhmBY2e0q9QXiRFGg2SagQnFmUfNEtIWyIZKi7gVOiOSSWUwshCzAwpdu1dL////6P/7scmh1WyAAAADL8UKg50wyM40JkTtqdv4ziUurAt+K0kchpkjvSmNwC66mrxJD5MzYRSAP6u1zk+8yjTlUKVglFl8xUM3LoRAtczJgaLNxea9/LBTH7ur7F9MSHDiQFIhFBG4mRCJQMDkq0KXZHNnn+Wq/s1+1qTYbcAAABRC5aPTDUELUZO0MkHQnNvJmQICRAhzkGZEvcQEEZnEQygAICMIU6S9LyN5Qt//tyxO8Bk4ULM00weMJpmiWVrCW4TTBU6CGpwt0pH0pmkvm+SgDuNKL/obtOVjRPXXTUbZFonwJl8nHpUWloukCivj4yYHtih1diJmOB2+uswmEMV1HH2S8lvvRy8OCxcIg2AX1pHjw4k0SeQz6Fippw/Dn3KnC67Tdm4hIf/9f/VQ6AAAAAAfSxZMHvTFFVkeEP0QVpwIwOCKJc0Qc0lA+pdhAIpiutIQmSSALdpUQh/VTJeSNO9H6BnzcxlSYFOofGA4SBJgK03GRAZ811W5f060sAMkA6dA3sJ5d5ecDofrV50vQzhdBnoTBldZW8EDauI6e9j+vjdKJfp1EI6Vyss1/Lwbjx9+fCb0GnPqOZjxUp3d+LtEyASiWUJj6r2cBfM6MJEYJMvRZSkS/S0YFa0XCYcCAhzmb/+3DE5gCOyM8/rDBywnWaJemcMXhqqOi0YskoEnetpli73RWNCGXqFMCXRhnOZhvGgOAcJMksXEN0B6DUHCXAuC2HRG0F0JCHgbITw8NojpgLCkmxgswuSPHeHJa5CuuUtaRZpeospZ2nuEwcLAlGnw44esUGSNHubs+z1+/V5r/p//boIAAAMgviR7GmPsCgVuF13WGs6fuhVpQXYPDDQHnGRQCj+0xORhoQJFRFBHddilLDxIwkdFxczQoEWHWqjcmqztlTV0VhkLupiIXsVdenjrrCWOFhJNDQrDqqPl5AdZEM9Pw9SRuPahlWEkmeTIkNCDpdkqud+lgAVmDilrzhwXsXbqSKquszs5b/t/Q7/+zoRoD0r0FhTqqq6BwLZWRR9pUGl+lqoDF5v5F1Gk/V1OUtJije//tyxO4Bkt0JL4wweoJEmeWZh6bIiIrRy4IcUtQxKMQ8lZBBZsofF36fhMRWJqMNILtzABHdbit9VzlNLljmPCSCy6OR4OBSD0+PlhiYSElWfhvZlzmlK6HpjSV3ml+WejrjEeRmf9S/OFdFgkOCdwGAjgIlJJhVtKg/eaiv/76vQ3/3chpVNbCIAAAALtguFlbgNzXI01jFmIMMYvHoW2zWIjmSg/AhBLCnu5BHCajKP5Frl6zlqc5vJyAqkSkDvZVYedRwsx2pIgTi9RB+UsRAgMyyJE9LbuxBQpY50+RyXbvdU9lrXK0yjzQUC4fCBGViANgiNAjiMQrp2BqKqDLXHzoEcxi20rndK6V6DCCQQAX5TVhgoBjFRUjRKV5LLq9gV1HXep+4eTHaSDDtgd9eK7EglMxpSXT/+3DE7IGSMMsszDDaQk8fJYmGD1DAtLgdKMElJwYbGUSrXJmK4hQvhlDZJKeaQUKWWXZfIay8dIlKRnHLxxsucHLBgwEZI4tozrslqIT/RSAOLDjC3IK45Qxh28m97U2C6HJC7ulLtFei3P21////WjMAAAM8GWeIgIjJ/o8ww4heVPtlrrP2zGWpf0DQ0dDUoaFAzzIoPyC2AyRHQKjL8WYFwoFV2LHpQq+gKSsibu6LuoOKcIijorK0WYZSIXOqWGC/sAM/fB/qTF1Ij2MUl80wGEMgpouUJIGlhWgWRJLyaPLIm4szrb867RoLhxihG46WRz3yNLp29CH0SqLz/+9yq9u293uXu3rtmKiRUABcQQUHKEOOEV8jjfHadBJGMOAo0+aCNhCZitAPmcxlKcarJOJMLARZ//tyxOuAkOjLNaw9DYIdmSYxh46Yc21SoeCAIYklQah9MyhSzBOzE90LOyj2JChS8O4tALVBCKk5LklZKNhFMXZWsfPGNt3LWxPN1JlOBnHSCQmfXTeB5VqQQAyNMKFwy+ksUE4hQvr18Jtt8w3/7fXVIAAAABZOQ0NmHJ+KJpqYl+mNsTYi1hzX1LJQCvEvgpEkGw5i7JRAYQ1Bigqk4D2RQjxAhdA5ghw/R4rAjCoV5LxSk6MwAiFUPSApl1iIyVPIsZJ2oNUPHJZlX1A+eSmHorDwrR9ddUgaYmiKIdXm5NmvjXi0BC44q8RFjp6lq0mktSNJtkriaBGQPAY8UmhK3yqmd02iRT9HJfFOYUnSolEqULEjXFV+yxsUrW1J0o2XO0w9VRwV/NhbZYBgEJZ204QmMghsJC3/+3DE9oCTmM8pDGUxQh2YZej0m0AWSYtqIXIMEbwQQKyrQDgisCwiSZMJsgnGklI9RBg0VY6HpNLLhdc+oBCYoNqZ8TMtdDFW2ool8jlsq0TYEgKAlh0eGggGQkFmDBcXWeU9DFXzGbU5RDprRqVdEtXli36r/YxaYy93iqoQADgxgjEkHRs9Vy3Bhyr2MKsd9+xCBgShTSnMgN1ZtxnwVuaCDrpnCyRojltBQRIloJUxE9Fyv67SGDc20TL6oUu9bCNbGYU1uHXhayylwDge0E6wxIjRHQTNfXiu/Gs+BxPkOjlUIw+CDbIjCrGgLB6FuUpzi1owfYuOvap6dYoWU//wuq9ISTrY1hbOMb9CqiSJaOekSAv0FCq2tASJUUSvYjEWAsTgGHlDlNLaw8pXiuAv8qVhqbzE//twxPYBk/DHKSw9MwJClmVlh6ZYQFcI8VTp/OpG1uLeVJF005k4j+VxVgvjhZiVsAKISYJAWQ7nzCaiFHupWZUsiHMy0qXiq4PiCFJkEjt3kIIJJvZawmFYjaoJNcTcepl30Idub0bUX/av7b3tvZq9vRjFvSmsWZqOtdKVFwAAAC+GBswXS0xoMKXZH1YoHdyGEefpCcNpK0AKeH2eaXQouopYEcXE0WKQNUbgx3NLFxQ5uOY51WRbYqjmV7IUBC1UolpQvBgWBA4QWYAEUBZ7zDKe9l2kjLU3YqelcuFZ8GySIiBM8KHwoeetrM4O0GDu57w3W1xKmvXx2VAetH/0f6DNASrU6VVTgZejyquXngJXzFCy6IZatH5vaEZIkiAlLQUod0BpJgCEIRBG1w1M1kFkkjjSmP/7csTvgdLY0SisMHpCMpYlIYea0Iv/DyhyewcCIDJRGSrHDUlcBsIA7H0WY8DvBwjhpxTHElkQsjYmg3eJyCvZVQSzZGfmRiZNS3p7jjwNCFAJHw2VKNUH3KFNLhixZjYCUmLlLIIxiVAd+95S3rAtirHsrJm4fmWaxVR1g8XsDzSQ0IAFygYSQQAAAC3GPZkNUfZCVolR2i5OnInLK1nQqFcdaGiUfiwMzC1ikFUayaXCi2RHdHZ0fTo9HAvIsQ6lcnBIWjlgxULgfFRBWMklCYp7MpW/RIs9UbLW82RyAKVCAc8qJcdFMnCmenQ+Paw6o62V6vo0LYxe3///97HD3lDFINv4KWERLmpgCpGGO0iHE5e4CqsAho0OoBcpTdhkAGBogAsMK8Q0hOtBR+mXlvRCJnN+Pt+y//twxPABkLi3LSw8y8KalqRFh7MABs6gDTCgCLTH1XSSFQG+UbnIKWCbtH34h1xo2+tyTROfAofFJ8+qbPQfE43stpuU+RpIH5P6omrxjurqrO6B72a879aHOtpX3ujZWGv3oy07tW/6rt70M/1vob9bpkZJ2ZtnMHV0RVRjoQzXtrV2EZY1ZAAAf8kG5C97ENLFZrGWmSl8I2zkvT7o6zmHpKVpThTNaFi6BykGOR3HbD9JUaKoQijjRgypHA6DzfN8rMpVI/ZWwDBAkCT8Fqob/OUlo0WAwmExskIzyDIxRMY1pBV4u/cozdZKSHL3mX81fvMaK+UzdX9P/p/WQByJhFtvXJnlLgYBJ5X66YYW2zhA4vBKZWgOLcK2sObRoRQZMVKMgaX6rv87adihSl7cWgNq/LclrP/7csTrgI8YtS+nsRSCrT+kBYSLiOkypZcCpGIBkZhoCpVO3/e9ypTKhQsL4+BMOJRPiwSVhaOy6eQ4rcbh+fczSI17PhrPdG7uLPD9aFtOisIm1YhUsHwihgVEAVMmyd7jpJGxdt69uwufyFg9Ghc64KZpyXB4wbAofNBUIJErKghAAAB+RsGKW8oRlBjFyLqWA8CbJdfD/WC5oBpJCSk1zqO00CUGIEfHAfBrKNQExYx6kKL8ZkmpWPLFYXiSTQZiKVIjMQzAMRGKCvIBuAOimCozhGzNrHHBuYOlh4hUTCpONOhmbYbLPuaPFnAqObVsba56EUdybdP7TOP1Z7R2oZFJ1RClxcSeyPyxnCZgnPDqAprQcJCUnU3Fy5SnQteIBgkjC6bUHxEhoTBEImM6CXbIpOpNMFBc//twxOwAjxyTLSw8y8KVmOQVhhtIsyXUkZKDzJKmFGKeCMgORdUwhoXhPhin9NCOs6mhwjL7NBUqjpNICktCR9qVBeI45VNy0kkQpeKlAwpohqVGRj2qfKvZVYGuVoPGgjx1bO+8ipF+00TFAC4TkhUKLeWvJJWB0ng2WEBYQB9tXAADSWDpPMspz1J6eqEJZD181SsBXm8XMt4S0XAPKAPIGcLGHGUQOVyHmaVS4nsuHi0ybUB54XBLTBLGpksSY5EeuaNx9FSFQe1ZJrafaNq6FDJBWWgCLiwGILpItQVVLjoJLwwIkjg/dNiul17XKy96/8tb0+0lvYNUXqCkgcRVHwuNuTNELgKtZF5gqVTdoLvN2WFWHTKcNl87BYypIVTBa8GM7RSFgA7SZUMVYIiaCKzGkkWgtf/7csTugZDoqycnsHZCdZXjxYea0KiK8F5N1WyrYxqVImP45TuytvpC8bYygueJAGORAjT5xhpRVsyQs42pbK58hNBs7Iqo5Wo96/2Lm3t823svuiq2339tPv7Itz9mty3+yr+y6LRybMhWySIDIDRR6hDCjNVZzmKqgKIUY4txRQIQAABmGGhQa7o3OLPbE1t34syZ62IM8THYZ2eeRgLEVfBUj7EARIHItiKRqEyp0xjDEwQ04mV0bxpMrkPlXlzQbSfaEM8y0hCvNHx2Cqgg0njVYE5RimKWio5SPDu7syK9tkSh95b8H9a0Rpa/svfP1odtszIm5mr9v/3+/e/1177EZUUkyFuTUhfS91KxJGQjkPHcQqhMLoYBgbF1VQmot5QQTgS7OZxY3hxHM9MYJo6pW8sSuLcQ//twxO6BkJipIsekegJ9QaNBhItIM6I7sw2E+B6z2iv1cuHSF7e2OguC09IMrlSzOLuR9L4z9q8PPrsSYTp3STB0WCrg+koYEx4Fg7Bxax7GLvexDh6+w1nuZ4s3/pdursotvHkxIoOpey8WELTWF1DwSQCkAAB2WoIuve9bdmRNuwqeWIxmGWDWp5sTb0K0ZQsLAMuhxkwc5kbkw/g9dmbYG9V+ddikaQ89iNNrFlmMQWHjrTpZRzEszuz1adt1Ll+Ynq3SEoT5lxs6UNDLDWWzqE8WymDEk5SAuuMZ3Si9uttab/9moiVevJS7+tudX70bcitalZHsy67qV5yPussiC70VWTRzUd1M62cEwKBUtblBrNWgP+1tQl4narNNVyvN1JM4KtSYivVLZG7SgIwJmy9FrU1LF//7csTugZLaCx8sPFFCABUkJPCPgIfaRLNS7bkSqLO0+Sm79Oa4y468Rgq3KYdfyhm7NemsS6Qclli6Ugo4kzkOHEqLJIjmuqsrKt2L2Stey/+pG7/s6IY3ZOm/TT99/29ao6K19DWUZLsc99W7677UI+dZsPbaskn29eWslcWmMJ1STmmSJ0+0JBQBwB3CHkuLkYgfxxjcliqBkTxxp0g2HNUGc0jyP5JCzIhFGOZLcpELlUrUizlq8W4D9FK05SiJ7EXcRjrZunzeDFhXbWa8sTVcS7vb2xXOtdjiNOCKX/zMn7aVHL/19cv6+//X/+XX6LI2IVjkbPidcstTLfBE8JtYiGx1hZoQICJyEbBDAExQNABVQfiPHQr3BdjFUyyPS2l+fGlHGKu08YB1IUecx0ql+qFtNJaF//twxPWAk3YHHSwMXIp9wSLBgRupz2LkWFpxMxTajVPlQNCEl9WGBXQWHN4keNmWka9N4pm0B7rd/XeM42bKsyEJ5Wj2Qv8lij8R8aczFLIZ9WFbzS8uFo//RYq+d5Kcpl/1Tm9O+hEthuQ0mwzMBDgi0yMaBhaIY6BGECAAM1AD0axcbKMx0y2rqj06TkI2eJ1KI51stxOT6Sb8cYt7YdKNRjgezqEpXzlHmhRoz9V6jxe4s81I6hdqSytcYVXKsDGuFSOYM6tsHL2ZFbbRdva57tVrUZ69bsjMZnfZ2borP9NNbc23b//66PYspVqWoCetmD97O2e4lnoih0WOTlvyWHR9HZzJWrbAZxZIkEokIABkBnEGUjMql+KczfNQ/lajC+mil2JZRqzOonJOn8yOSkXMW+lc2P/7csTqABEaAxinhH8KOMEjGPCP4Y6LXUkeeR+3xFE5xlqFAravpamcQa43q2fnMusZrrOs6yTTmVcfOf6nJfCRSs5VCgy/6bYnRCej+W//mL8Sy+VG8jKUGN8mzXrbq5VM2ukNPKd5kDppMw82z9TyYMCUi5pc0xGHKW5wjR11eGpY6tcWa0CV7NKhs7hBRKNiqtmVVmp+yKp3veu+pbCGtEzdXLx7FpPVgk4eUpxWqlmNZW+h+b06a6J61Wrb6tM07KRN+itqltdNfr+9nka6zGqqIxequWhh0wuVzzWj3GJpwgnUUnqjKNlAcP5aJcsyyKRQqsREy4ofIU6uaIzRUNKxgTmDY+ICBQKEmAELDTZX1WGYk2vJFnBSHuqkhycqwzWtTUfMCwsKm+utfk7/8J/538PPIQsw//twxPEAkroNFMeI3UIowWKk8Jvh4SvCGEn0WisTCEJh/PDFMJC89a/huGxz+W7GHr1NDcSFyzV+KuNXFYVIiIlgiFSMMwKqQOjoJPIhsDKAKoDQpgVJVRSdHQDIyh9g0KYgMIwZJlYkpECwrAlEIQRBE8iZlUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUECAAACodnazoqLWqX+iqnqi/1RF+5Sy/LLSMjVlBAnQ/n//2Wkf/ZKR+Utl/VgoOOllIzWXsshl/y2X4stIyNWChgQdHlQyrauK2gtzXDef/7csTzAxK+DwwnlTuCM8GghICnaTzRor5hXS6b3kel6brXGab1bP+f7zMxym8dyTTivZGdwVSdUq8xxMvlKulOzuDkyqI0SfFCVBgHWmlUrW6G6ZmJhXTe8fuDNBSqTEFNRTMuOTkuM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//twxLqD0y4KxQEN+0gAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",Y9=bs(gt,rL),j9=_n.createLock(rL),Wc=new _s;let TE=!1;const ov=()=>{TE||(j9(),TE=!0)},X9=i=>{Wc.audioBufferProperty.value===null&&(Wc.audioBufferProperty.set(i),ov())},Q9=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Wc.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),ov()},xE=gt.decodeAudioData(Y9.buffer,X9,Q9);xE&&xE.then(i=>{Wc.audioBufferProperty.value===null&&(Wc.audioBufferProperty.set(i),ov())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),ov()});const vm=[],vy=[],Zo={addStateChangeListener(i,e){let t=vm.indexOf(i),n;t===-1?(vm.push(i),t=vm.length-1,n=[],vy.push(n),i.onstatechange=()=>{ie.clone(n).forEach(s=>{s(i.state)})}):n=vy[t],n.push(e)},removeStateChangeListener(i,e){const t=vm.indexOf(i),n=vy[t],s=n.indexOf(e);n.splice(s,1)},hasListener(i,e){let t=!1;const n=vm.indexOf(i);if(n>=0){const s=vy[n];s&&(t=s.includes(e))}return t}},To={DEFAULT_PARAM_CHANGE_TIME_CONSTANT:.015,DEFAULT_LINEAR_GAIN_CHANGE_TIME:.1,TWELFTH_ROOT_OF_TWO:Math.pow(2,1/12)};class hl extends js{}hl.BASIC=new hl;hl.EXTRA=new hl;hl.enumeration=new Sr(hl,{phetioDocumentation:"describes whether a sound is considered part of the basic or the extra sounds for the sim"});const J9=.15,Z9=.02,bm=To.DEFAULT_LINEAR_GAIN_CHANGE_TIME;class $9 extends rn{constructor(e){super({tandem:e,phetioState:!1,phetioDocumentation:"Controls the simulation's sound. For sims that do not support sound, this element and its children can be ignored."}),this.enabledProperty=new Qt(self.phet?.chipper?.queryParameters?.supportsSound||!1,{tandem:e?.createTandem("enabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether sound is enabled. Supported only if this sim supportsSound=true."}),this.extraSoundEnabledProperty=new Qt(self.phet?.chipper?.queryParameters?.extraSoundInitiallyEnabled||!1,{tandem:e?.createTandem("extraSoundEnabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether extra sound is enabled. Extra sound is additional sounds that can serve to improve the learning experience for individuals with visual disabilities. Note that not all simulations that support sound also support extra sound. Also note that the value is irrelevant when enabledProperty is false."}),this.soundGenerators=[],this._mainOutputLevel=1,this._reverbLevel=Z9,this.gainNodesForCategories=new Map,this.duckingProperties=xf(),this.initialized=!1,this.soundGeneratorsAwaitingAdd=[],this.mainGainNode=null,this.duckingGainNode=null,this.convolver=null,this.reverbGainNode=null,this.dryGainNode=null}initialize(e,t,n,s,r,a){const o=Ne()({categories:["sim-specific","user-interface"]},a),l=gt.currentTime,h=gt.createDynamicsCompressor();h.threshold.setValueAtTime(-6,l),h.knee.setValueAtTime(5,l),h.ratio.setValueAtTime(12,l),h.attack.setValueAtTime(0,l),h.release.setValueAtTime(.25,l),h.connect(gt.destination),this.duckingGainNode=gt.createGain(),this.duckingGainNode.connect(h),this.mainGainNode=gt.createGain(),this.mainGainNode.connect(this.duckingGainNode),this.convolver=gt.createConvolver();const c=w=>{w&&(this.convolver.buffer=w,Wc.audioBufferProperty.unlink(c))};Wc.audioBufferProperty.link(c),this.reverbGainNode=gt.createGain(),this.reverbGainNode.connect(this.mainGainNode),this.reverbGainNode.gain.setValueAtTime(this._reverbLevel,gt.currentTime),this.convolver.connect(this.reverbGainNode),this.dryGainNode=gt.createGain(),this.dryGainNode.gain.setValueAtTime(1-this._reverbLevel,gt.currentTime),this.dryGainNode.gain.linearRampToValueAtTime(1-this._reverbLevel,gt.currentTime+bm),this.dryGainNode.connect(this.mainGainNode),o.categories.forEach(w=>{const T=gt.createGain();T.connect(this.convolver),T.connect(this.dryGainNode),this.gainNodesForCategories.set(w,T)}),Cn.multilink([this.enabledProperty,t,e,n,s,r],(w,T,D,M,B,O)=>{const Z=w&&T&&D&&M&&B&&!O?this._mainOutputLevel:0;this.mainGainNode.gain.linearRampToValueAtTime(Z,gt.currentTime+bm)});const f=new Qt(!1),g=()=>{f.value=this.duckingProperties.reduce((w,T)=>w||T.value,!1)};f.lazyLink(w=>{const T=w?.05:.5,D=gt.currentTime;this.duckingGainNode?.gain.cancelScheduledValues(D),this.duckingGainNode?.gain.setTargetAtTime(w?J9:1,D,T)}),this.duckingProperties.addItemAddedListener(w=>{w.link(g);const T=D=>{D===w&&(D.unlink(g),this.duckingProperties.removeItemRemovedListener(T))};this.duckingProperties.addItemRemovedListener(T)});const v=()=>{self.removeEventListener("touchstart",A,!1),Gs.userGestureEmitter.hasListener(A)&&Gs.userGestureEmitter.removeListener(A)},A=()=>{gt.state!=="running"?(phet.log&&phet.log(`audio context not running, attempting to resume, state = ${gt.state}`),gt.resume().then(()=>{phet.log&&phet.log(`resume appears to have succeeded, phetAudioContext.state = ${gt.state}`),v()}).catch(w=>{const T=`error when trying to resume audio context, err = ${w}`;console.error(T)})):v()};self.addEventListener("touchstart",A,!1),Gs.userGestureEmitter.addListener(A);let P=gt.state;Zo.addStateChangeListener(gt,w=>{phet.log&&phet.log(`audio context state changed, old state = ${P}, new state = ${w}, audio context time = ${gt.currentTime}`),w!=="running"?(self.addEventListener("touchstart",A,!1),Gs.userGestureEmitter.hasListener(A)||Gs.userGestureEmitter.addListener(A)):console.log("AudioContext is now running."),P=w}),this.initialized=!0,this.soundGeneratorsAwaitingAdd.forEach(w=>{this.addSoundGenerator(w.soundGenerator,w.soundGeneratorAddOptions)}),this.soundGeneratorsAwaitingAdd.length=0}hasSoundGenerator(e){return this.soundGenerators.includes(e)}addSoundGenerator(e,t){if(t===void 0&&(t={}),!this.initialized){this.soundGeneratorsAwaitingAdd.push({soundGenerator:e,soundGeneratorAddOptions:t});return}this.hasSoundGenerator(e);const n=Ne()({categoryName:null},t);n.categoryName===null?(e.connect(this.convolver),e.connect(this.dryGainNode)):e.connect(this.gainNodesForCategories.get(n.categoryName)),this.soundGenerators.push(e)}removeSoundGenerator(e){if(!this.initialized){const t=this.soundGeneratorsAwaitingAdd.filter(n=>n.soundGenerator===e);for(;t.length>0;)gs(this.soundGeneratorsAwaitingAdd,t[0]),t.shift();return}e.isConnectedTo(this.convolver)&&e.disconnect(this.convolver),e.isConnectedTo(this.dryGainNode)&&e.disconnect(this.dryGainNode),this.gainNodesForCategories.forEach(t=>{e.isConnectedTo(t)&&e.disconnect(t)}),this.soundGenerators.splice(this.soundGenerators.indexOf(e),1)}setMainOutputLevel(e){if(!this.initialized){console.warn("an attempt was made to set the main output level on an uninitialized sound manager, ignoring");return}this._mainOutputLevel=e,this.enabledProperty.value&&this.mainGainNode.gain.linearRampToValueAtTime(e,gt.currentTime+bm)}set mainOutputLevel(e){this.setMainOutputLevel(e)}get mainOutputLevel(){return this.getMainOutputLevel()}getMainOutputLevel(){return this._mainOutputLevel}setOutputLevelForCategory(e,t){if(!this.initialized){console.warn("an attempt was made to set the output level for a sound category on an uninitialized sound manager, ignoring");return}const n=this.gainNodesForCategories.get(e);n&&n.gain.setValueAtTime(t,gt.currentTime)}addDuckingProperty(e){this.duckingProperties.add(e)}removeDuckingProperty(e){this.duckingProperties.remove(e)}getOutputLevelForCategory(e){return this.initialized?this.gainNodesForCategories.get(e).gain.value:(console.warn("an attempt was made to get the output level for a sound category on an uninitialized sound manager, returning 0"),0)}setReverbLevel(e){if(!this.initialized){console.warn("an attempt was made to set the reverb level on an uninitialized sound manager, ignoring");return}if(e!==this._reverbLevel){const t=gt.currentTime;this.reverbGainNode.gain.linearRampToValueAtTime(e,t+bm),this.dryGainNode.gain.linearRampToValueAtTime(1-e,t+bm),this._reverbLevel=e}}set reverbLevel(e){this.setReverbLevel(e)}get reverbLevel(){return this.getReverbLevel()}getReverbLevel(){return this._reverbLevel}set enabled(e){this.enabledProperty.value=e}get enabled(){return this.enabledProperty.value}set sonificationLevel(e){this.extraSoundEnabledProperty.value=e===hl.EXTRA}get sonificationLevel(){return this.extraSoundEnabledProperty.value?hl.EXTRA:hl.BASIC}logGain(e,t){}logMainGain(e){this.mainGainNode&&this.logGain(this.mainGainNode,e)}logReverbGain(e){this.reverbGainNode&&this.logGain(this.reverbGainNode,e)}}const io=new $9,e7=phet.chipper.supportsAnyVoicing()||phet.chipper.queryParameters.supportsSound;class t7 extends rn{constructor(e){super({tandem:e,phetioState:!1,phetioDocumentation:"Controls the simulation's audio features. This includes sound and voicing. For sims that do not support these features, this element and its children can be ignored."}),this.audioAllowed=phet.chipper.queryParameters.audio!=="disabled",this.audioEnabledProperty=new Qt(phet.chipper.queryParameters.audio==="enabled",{tandem:e.createTandem("audioEnabledProperty"),phetioFeatured:!0,phetioDocumentation:"toggles all audio features on and off; supported only if this sim supports audio features."}),this.audioAndSoundEnabledProperty=Dt.and([this.audioEnabledProperty,io.enabledProperty]),this.audioAndVoicingEnabledProperty=Dt.and([this.audioEnabledProperty,$i.enabledProperty]),this.anySubcomponentEnabledProperty=new Dt([io.enabledProperty,$i.enabledProperty],(t,n)=>t||n),this.anyOutputEnabledProperty=new Dt([this.audioEnabledProperty,this.anySubcomponentEnabledProperty],(t,n)=>t&&n)}initialize(e){if(e.preferencesModel.audioModel.supportsSound&&io.initialize(e.isConstructionCompleteProperty,this.audioEnabledProperty,e.browserTabVisibleProperty,e.activeProperty,Yl),e.preferencesModel.audioModel.supportsAnyVoicing&&$i.initialize(Gs.userGestureEmitter,{speechAllowedProperty:new Dt([e.isConstructionCompleteProperty,e.browserTabVisibleProperty,e.activeProperty,Yl,this.audioEnabledProperty],(t,n,s,r,a)=>t&&n&&s&&!r&&a)}),e.preferencesModel.audioModel.supportsSound&&e.preferencesModel.audioModel.supportsAnyVoicing){const t=new Qt(!1);$i.startSpeakingEmitter.addListener(()=>t.set(!0)),$i.endSpeakingEmitter.addListener(()=>t.set(!1)),io.addDuckingProperty(t)}}}const wu=new t7(e7?R.GENERAL_VIEW.createTandem("audioManager"):R.OPT_OUT),i7=new Fe(new He("JOIST/a11y.keyboardHelp.keyboardShortcuts",{en:"Keyboard Shortcuts"},R.OPT_OUT),R.OPT_OUT),n7=Math.log2||function(i){return Math.log(i)/Math.LN2},Dh={imageOpacity:1,initialWidth:0,initialHeight:0,mipmap:!1,mipmapBias:0,mipmapInitialLevel:4,mipmapMaxLevel:5,hitTestPixels:!1};let fA=null,mA=null;const aL=()=>(fA||(fA=document.createElement("canvas")),fA),s7=()=>(mA||(mA=aL().getContext("2d",{willReadFrequently:!0})),mA),pa=i=>class extends i{constructor(...t){super(...t),this._imageProperty=new Nl(null,!1,this.onImagePropertyChange.bind(this)),this._image=null,this._initialWidth=Dh.initialWidth,this._initialHeight=Dh.initialHeight,this._imageOpacity=Dh.imageOpacity,this._mipmap=Dh.mipmap,this._mipmapBias=Dh.mipmapBias,this._mipmapInitialLevel=Dh.mipmapInitialLevel,this._mipmapMaxLevel=Dh.mipmapMaxLevel,this._hitTestPixels=Dh.hitTestPixels,this._mipmapCanvases=[],this._mipmapURLs=[],this._mipmapData=null,this._imageLoadListener=this._onImageLoad.bind(this),this._imageLoadListenerAttached=!1,this._hitTestImageData=null,this.mipmapEmitter=new un}setImage(t){return this._imageProperty.value=t,this}set image(t){this.setImage(t)}get image(){return this.getImage()}getImage(){return this._image}onImagePropertyChange(t){let n=this._image!==t;if(n&&typeof t=="string"&&this._image&&this._image instanceof HTMLImageElement&&t===this._image.src&&(n=!1),n&&t===this._mipmapData&&(n=!1),n){if(this._initialWidth=0,this._initialHeight=0,this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),this._mipmapData=null,typeof t=="string"){const s=t;t=document.createElement("img"),t.src=s}else Array.isArray(t)&&(this._mipmapData=t,t=t[0].img,this._mipmapInitialLevel=this._mipmapMaxLevel=this._mipmapData.length,this._mipmap=!0);this._image=t,this._image instanceof HTMLImageElement&&(!this._image.width||!this._image.height)&&this._attachImageLoadListener(),this.invalidateImage()}}setImageProperty(t){return this._imageProperty.setTargetProperty(t)}set imageProperty(t){this.setImageProperty(t)}get imageProperty(){return this.getImageProperty()}getImageProperty(){return this._imageProperty}invalidateImage(){this.invalidateMipmaps(),this._invalidateHitTestData()}setImageWithSize(t,n,s){return this.setImage(t),this.setInitialWidth(n),this.setInitialHeight(s),this}setImageOpacity(t){this._imageOpacity!==t&&(this._imageOpacity=t)}set imageOpacity(t){this.setImageOpacity(t)}get imageOpacity(){return this.getImageOpacity()}getImageOpacity(){return this._imageOpacity}setInitialWidth(t){return t!==this._initialWidth&&(this._initialWidth=t,this.invalidateImage()),this}set initialWidth(t){this.setInitialWidth(t)}get initialWidth(){return this.getInitialWidth()}getInitialWidth(){return this._initialWidth}setInitialHeight(t){return t!==this._initialHeight&&(this._initialHeight=t,this.invalidateImage()),this}set initialHeight(t){this.setInitialHeight(t)}get initialHeight(){return this.getInitialHeight()}getInitialHeight(){return this._initialHeight}setMipmap(t){return this._mipmap!==t&&(this._mipmap=t,this.invalidateMipmaps()),this}set mipmap(t){this.setMipmap(t)}get mipmap(){return this.isMipmap()}isMipmap(){return this._mipmap}setMipmapBias(t){return this._mipmapBias!==t&&(this._mipmapBias=t,this.invalidateMipmaps()),this}set mipmapBias(t){this.setMipmapBias(t)}get mipmapBias(){return this.getMipmapBias()}getMipmapBias(){return this._mipmapBias}setMipmapInitialLevel(t){return this._mipmapInitialLevel!==t&&(this._mipmapInitialLevel=t,this.invalidateMipmaps()),this}set mipmapInitialLevel(t){this.setMipmapInitialLevel(t)}get mipmapInitialLevel(){return this.getMipmapInitialLevel()}getMipmapInitialLevel(){return this._mipmapInitialLevel}setMipmapMaxLevel(t){return this._mipmapMaxLevel!==t&&(this._mipmapMaxLevel=t,this.invalidateMipmaps()),this}set mipmapMaxLevel(t){this.setMipmapMaxLevel(t)}get mipmapMaxLevel(){return this.getMipmapMaxLevel()}getMipmapMaxLevel(){return this._mipmapMaxLevel}setHitTestPixels(t){return this._hitTestPixels!==t&&(this._hitTestPixels=t,this._invalidateHitTestData()),this}set hitTestPixels(t){this.setHitTestPixels(t)}get hitTestPixels(){return this.getHitTestPixels()}getHitTestPixels(){return this._hitTestPixels}_constructNextMipmap(){const t=this._mipmapCanvases.length,n=this._mipmapCanvases[t-1];if(n.width*n.height>2){const s=document.createElement("canvas");if(s.width=Math.ceil(n.width/2),s.height=Math.ceil(n.height/2),s.width>0&&s.height>0){const r=s.getContext("2d");r.scale(.5,.5),r.drawImage(n,0,0),this._mipmapCanvases.push(s),this._mipmapURLs.push(s.toDataURL())}}}invalidateMipmaps(){if(zi(this._mipmapCanvases),zi(this._mipmapURLs),this._image&&this._mipmap)if(this._mipmapData)for(let t=0;t<this._mipmapData.length;t++){const n=this._mipmapData[t].url;this._mipmapURLs.push(n);const s=this._mipmapData[t].updateCanvas;s&&s(),this._mipmapCanvases.push(this._mipmapData[t].canvas)}else{const t=document.createElement("canvas");if(t.width=this.getImageWidth(),t.height=this.getImageHeight(),t.width&&t.height){t.getContext("2d").drawImage(this._image,0,0),this._mipmapCanvases.push(t),this._mipmapURLs.push(t.toDataURL());let s=0;for(;++s<this._mipmapInitialLevel;)this._constructNextMipmap()}}this.mipmapEmitter.emit()}getMipmapLevel(t,n=0){const s=pa.getApproximateMatrixScale(t)*(self.devicePixelRatio||1);return this.getMipmapLevelFromScale(s,n)}getMipmapLevelFromScale(t,n=0){if(t>=1)return 0;let s=n7(1/t);if(s=ws(s+this._mipmapBias+n-.7),s<0&&(s=0),s>this._mipmapMaxLevel&&(s=this._mipmapMaxLevel),this.mipmap&&!this._mipmapCanvases[s]){let r=this._mipmapCanvases.length-1;for(;++r<=s;)this._constructNextMipmap();return Math.min(s,this._mipmapCanvases.length-1)}else return s}getMipmapCanvas(t){if(this._mipmapData){const n=this._mipmapData[t]&&this._mipmapData[t].updateCanvas;n&&n()}return this._mipmapCanvases[t]}getMipmapURL(t){return this._mipmapURLs[t]}hasMipmaps(){return this._mipmapCanvases.length>0}_invalidateHitTestData(){this._hitTestPixels&&this._image!==null&&(this._hitTestImageData=pa.getHitTestData(this._image,this.imageWidth,this.imageHeight))}getImageWidth(){if(this._image===null)return 0;const t=this._mipmapData?this._mipmapData[0].width:("naturalWidth"in this._image?this._image.naturalWidth:0)||this._image.width;return t===0?this._initialWidth:t}get imageWidth(){return this.getImageWidth()}getImageHeight(){if(this._image===null)return 0;const t=this._mipmapData?this._mipmapData[0].height:("naturalHeight"in this._image?this._image.naturalHeight:0)||this._image.height;return t===0?this._initialHeight:t}get imageHeight(){return this.getImageHeight()}getImageURL(){return this._image.src}_attachImageLoadListener(){this.isDisposed||(this._image.addEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!0)}_detachImageLoadListener(){this._image.removeEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!1}_onImageLoad(){this.invalidateImage(),this._detachImageLoadListener()}dispose(){this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),this._imageProperty.dispose(),super.dispose&&super.dispose()}};pa.getHitTestData=(i,e,t)=>{if(!("naturalWidth"in i&&i.naturalWidth||i.width)||!("naturalHeight"in i&&i.naturalHeight||i.height))return null;const n=aL(),s=s7();return n.width=e,n.height=t,s.drawImage(i,0,0),s.getImageData(0,0,e,t)};pa.testHitTestData=(i,e,t,n)=>{const s=Xn(Math.floor(n.x/e*i.width),0,i.width-1),r=Xn(Math.floor(n.y/t*i.height),0,i.height-1),a=4*(s+r*i.width)+3;return i.data[a]!==0};pa.hitTestDataToShape=(i,e,t)=>{const n=e/i.width,s=t/i.height,r=new zt;let a=!1,o=0;for(let l=0;l<i.height;l++){for(let h=0;h<i.width;h++){const c=4*(h+l*i.width)+3;i.data[c]!==0?a||(a=!0,o=h):a&&(a=!1,r.rect(o*n,l*n,n*(h-o),s))}a&&(a=!1,r.rect(o*n,l*n,n*(i.width-o),s))}return r.getSimplifiedAreaShape()};pa.createSVGImage=(i,e,t)=>{const n=document.createElementNS(Kn,"image");return n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`),n.setAttributeNS(zm,"xlink:href",i),n};pa.createFastMipmapFromCanvas=i=>{const e=[],t=i.toDataURL(),n=new self.Image;n.src=t,e.push({img:n,url:t,width:i.width,height:i.height,canvas:i});let s=i;for(;s.width>=2&&s.height>=2;){const r=document.createElement("canvas");r.width=Math.ceil(s.width/2),r.height=Math.ceil(s.height/2);const a=r.getContext("2d");a.setTransform(.5,0,0,.5,0,0),a.drawImage(s,0,0);const o={width:r.width,height:r.height,canvas:r,url:r.toDataURL(),img:new self.Image};o.img.src=o.url,s=r,e.push(o)}return e};pa.getApproximateMatrixScale=i=>(Math.sqrt(i.m00()*i.m00()+i.m10()*i.m10())+Math.sqrt(i.m01()*i.m01()+i.m11()*i.m11()))/2;pa.CANVAS_MIPMAP_BIAS_ADJUSTMENT=.5;pa.DEFAULT_OPTIONS=Dh;class F2 extends fd{paintCanvas(e,t,n){const s=t._imageOpacity!==1;if(t._image&&t._image.width!==0&&t._image.height!==0){if(s&&(e.context.save(),e.context.globalAlpha*=t._imageOpacity),t._mipmap&&t.hasMipmaps()){const r=t.getMipmapLevel(n,pa.CANVAS_MIPMAP_BIAS_ADJUSTMENT),a=t.getMipmapCanvas(r),o=Math.pow(2,r);e.context.drawImage(a,0,0,a.width*o,a.height*o)}else e.context.drawImage(t._image,0,0);s&&e.context.restore()}}markDirtyImage(){this.markPaintDirty()}markDirtyMipmap(){this.markPaintDirty()}markDirtyImageOpacity(){this.markPaintDirty()}}es.mixInto(F2);const LS=gr(i=>class extends i{initialize(e,t,...n){super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyImage=!0,this.dirtyImageOpacity=!0,this.dirtyMipmap=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyImage(){this.dirtyImage=!0,this.markPaintDirty()}markDirtyImageOpacity(){this.dirtyImageOpacity=!0,this.markPaintDirty()}markDirtyMipmap(){this.dirtyMipmap=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyImage=!1,this.dirtyImageOpacity=!1,this.dirtyMipmap=!1}});class oL extends LS(l0){constructor(e,t){super(e,t),Qi.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement||(this.domElement=document.createElement("img"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0"),this.hasOpacity=!1}updateDOM(){const e=this.node,t=this.domElement;this.paintDirty&&this.dirtyImage&&(t.src=e._image?e._image.src:"//:0"),this.dirtyImageOpacity&&(e._imageOpacity===1?this.hasOpacity&&(this.hasOpacity=!1,t.style.opacity=""):(this.hasOpacity=!0,t.style.opacity=e._imageOpacity)),this.transformDirty&&Qi.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.setToCleanState(),this.transformDirty=!1}dispose(){super.dispose()}}es.mixInto(oL);const r7=!0;class lL extends LS(Vf){initialize(e,t){super.initialize(e,t,!1,r7),this.svgElement=this.svgElement||document.createElementNS(Kn,"image"),this.svgElement.setAttribute("x","0"),this.svgElement.setAttribute("y","0"),this.hasOpacity=!1,this.usingMipmap=!1,this.mipmapLevel=-1,this._mipmapTransformListener=this._mipmapTransformListener||this.onMipmapTransform.bind(this),this._mipmapListener=this._mipmapListener||this.onMipmap.bind(this),this.node.mipmapEmitter.addListener(this._mipmapListener),this.updateMipmapStatus(t.node._mipmap)}updateSVGSelf(){const e=this.svgElement;this.dirtyImage?this.node._image?this.updateURL(e,!0):(e.setAttribute("width","0"),e.setAttribute("height","0"),e.setAttributeNS(zm,"xlink:href","//:0")):this.dirtyMipmap&&this.node._image&&this.updateURL(e,!1),this.dirtyImageOpacity&&(this.node._imageOpacity===1?this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity")):(this.hasOpacity=!0,e.setAttribute("opacity",this.node._imageOpacity)))}updateURL(e,t){let n=-1;if(this.node._mipmap&&(n=this.node.getMipmapLevel(this.instance.relativeTransform.matrix)),!(!t&&n===this.mipmapLevel))if(this.mipmapLevel>=0&&n===-1&&e.removeAttribute("transform"),this.mipmapLevel=n,this.node._mipmap&&this.node.hasMipmaps()){const s=this.node.getMipmapURL(n),r=this.node.getMipmapCanvas(n);e.setAttribute("width",`${r.width}px`),e.setAttribute("height",`${r.height}px`),e.setAttribute("transform",`scale(${Math.pow(2,n).toFixed(20)})`),e.setAttributeNS(zm,"xlink:href",s)}else e.setAttribute("width",`${this.node.getImageWidth()}px`),e.setAttribute("height",`${this.node.getImageHeight()}px`),e.setAttributeNS(zm,"xlink:href",this.node.getImageURL())}updateMipmapStatus(e){this.usingMipmap!==e&&(this.usingMipmap=e,e?(this.instance.relativeTransform.addListener(this._mipmapTransformListener),this.instance.relativeTransform.addPrecompute()):(this.instance.relativeTransform.removeListener(this._mipmapTransformListener),this.instance.relativeTransform.removePrecompute()),this.markDirtyMipmap())}onMipmap(){this.markDirtyMipmap(),this.updateMipmapStatus(this.node._mipmap)}onMipmapTransform(){this.markDirtyMipmap()}dispose(){this.updateMipmapStatus(!1),this.node.mipmapEmitter.removeListener(this._mipmapListener),super.dispose()}}es.mixInto(lL);const gd=5,_m=gd*0,Am=gd*1,wm=gd*2,Sm=gd*3,Pm=gd*4,Tm=gd*5,Wd=0,Kd=1,Yd=2,jd=3,Xd=4;class MS extends LS(VS){initialize(e,t){super.initialize(e,t),this.vertexArray=this.vertexArray||new Float32Array(gd*6),this.upperLeft=new Oe(0,0),this.lowerLeft=new Oe(0,0),this.upperRight=new Oe(0,0),this.lowerRight=new Oe(0,0),this.xyDirty=!0,this.uvDirty=!0,this.updatedOnce=!1,this.sprite=null}onAddToBlock(e){this.webglBlock=e,this.markDirty(),this.reserveSprite()}onRemoveFromBlock(e){this.unreserveSprite()}reserveSprite(){if(this.sprite){if(this.sprite.image===this.node._image)return;this.unreserveSprite()}const e=this.node.getImageWidth(),t=this.node.getImageHeight();this.sprite=e>0&&t>0?this.webglBlock.addSpriteSheetImage(this.node._image,e,t):null,this.xyDirty=!0,this.uvDirty=!0}unreserveSprite(){this.sprite&&this.webglBlock.removeSpriteSheetImage(this.sprite),this.sprite=null}markTransformDirty(){this.xyDirty=!0,super.markTransformDirty()}markPaintDirty(){this.xyDirty=!0,this.uvDirty=!0,this.markDirty()}update(){if(!super.update()||(this.reserveSprite(),(this.dirtyImageOpacity||!this.updatedOnce)&&(this.vertexArray[_m+Xd]=this.node._imageOpacity,this.vertexArray[Am+Xd]=this.node._imageOpacity,this.vertexArray[wm+Xd]=this.node._imageOpacity,this.vertexArray[Sm+Xd]=this.node._imageOpacity,this.vertexArray[Pm+Xd]=this.node._imageOpacity,this.vertexArray[Tm+Xd]=this.node._imageOpacity),this.updatedOnce=!0,!this.sprite))return!1;if(this.uvDirty){this.uvDirty=!1;const e=this.sprite.uvBounds;this.vertexArray[_m+Yd]=e.minX,this.vertexArray[_m+jd]=e.minY,this.vertexArray[Am+Yd]=e.minX,this.vertexArray[Am+jd]=e.maxY,this.vertexArray[wm+Yd]=e.maxX,this.vertexArray[wm+jd]=e.minY,this.vertexArray[Sm+Yd]=e.maxX,this.vertexArray[Sm+jd]=e.minY,this.vertexArray[Pm+Yd]=e.minX,this.vertexArray[Pm+jd]=e.maxY,this.vertexArray[Tm+Yd]=e.maxX,this.vertexArray[Tm+jd]=e.maxY}if(this.xyDirty){this.xyDirty=!1;const e=this.node.getImageWidth(),t=this.node.getImageHeight(),n=this.instance.relativeTransform.matrix;n.multiplyVector2(this.upperLeft.setXY(0,0)),n.multiplyVector2(this.lowerLeft.setXY(0,t)),n.multiplyVector2(this.upperRight.setXY(e,0)),n.multiplyVector2(this.lowerRight.setXY(e,t)),this.vertexArray[_m+Wd]=this.upperLeft.x,this.vertexArray[_m+Kd]=this.upperLeft.y,this.vertexArray[Am+Wd]=this.lowerLeft.x,this.vertexArray[Am+Kd]=this.lowerLeft.y,this.vertexArray[wm+Wd]=this.upperRight.x,this.vertexArray[wm+Kd]=this.upperRight.y,this.vertexArray[Sm+Wd]=this.upperRight.x,this.vertexArray[Sm+Kd]=this.upperRight.y,this.vertexArray[Pm+Wd]=this.lowerLeft.x,this.vertexArray[Pm+Kd]=this.lowerLeft.y,this.vertexArray[Tm+Wd]=this.lowerRight.x,this.vertexArray[Tm+Kd]=this.lowerRight.y}return!0}}MS.prototype.webglRenderer=qe.webglTexturedTriangles;es.mixInto(MS);class hL{constructor(e){this.rootBin=new mp(e,null)}allocate(e,t){const n=this.rootBin.findAvailableBin(e,t);if(n){const s=n.split(e,t);return s.use(),s}else return null}deallocate(e){e.unuse()}toString(){let e="",t="";function n(s){e+=`${t+s.toString()}
`,t=`${t}  `,ie.each(s.children,n),t=t.substring(2)}return n(this.rootBin),e}}class mp{constructor(e,t){this.bounds=e,this.parent=t,this.isSplit=!1,this.isUsed=!1,this.children=[]}findAvailableBin(e,t){if(this.isUsed)return null;if(this.bounds.width<e||this.bounds.height<t)return null;if(this.isSplit){for(let n=0;n<this.children.length;n++){const s=this.children[n].findAvailableBin(e,t);if(s)return s}return null}else return this}split(e,t){if(e===this.bounds.width&&t===this.bounds.height)return this;this.isSplit=!0;const n=this.bounds.minX+e,s=this.bounds.minY+t,r=new pt(this.bounds.minX,this.bounds.minY,n,s),a=new pt(n,this.bounds.minY,this.bounds.maxX,s),o=new pt(this.bounds.minX,s,this.bounds.maxX,this.bounds.maxY),l=new mp(r,this);return this.children.push(l),a.hasNonzeroArea()&&this.children.push(new mp(a,this)),o.hasNonzeroArea()&&this.children.push(new mp(o,this)),l}use(){this.isUsed=!0}unuse(){this.isUsed=!1,this.parent&&this.parent.attemptToCollapse()}attemptToCollapse(){for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.isSplit||t.isUsed)return}this.children=[],this.isSplit=!1,this.parent&&this.parent.attemptToCollapse()}toString(){return this.bounds.toString()+(this.isUsed?" used":"")}}hL.Bin=mp;const H2=new ji(1024,1024),Qd=1,by=1;class sg{constructor(e){this.useMipmaps=e,this.gl=null,this.texture=null,this.bounds=new pt(0,0,H2.width,H2.height),this.width=this.bounds.width,this.height=this.bounds.height,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.binPacker=new hL(this.bounds),this.dirty=!0,this.usedSprites=[],this.unusedSprites=[]}initializeContext(e){this.gl=e,this.createTexture()}createTexture(){const e=this.gl;this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.useMipmaps?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null),this.dirty=!1}updateTexture(){if(this.dirty){this.dirty=!1;const e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null)}}addImage(e,t,n){let s;for(s=0;s<this.usedSprites.length;s++){const a=this.usedSprites[s];if(a.image===e)return a.count++,a}for(s=0;s<this.unusedSprites.length;s++){const a=this.unusedSprites[s];if(a.image===e)return a.count++,this.unusedSprites.splice(s,1),this.usedSprites.push(a),a}let r;for(;!(r=this.binPacker.allocate(t+2*Qd+by,n+2*Qd+by))&&this.unusedSprites.length;){const a=this.unusedSprites.shift();this.dirty=!0;const o=a.bin.bounds;this.context.clearRect(o.x,o.y,o.width,o.height),this.binPacker.deallocate(a.bin)}if(r){const a=new pt((r.bounds.minX+Qd)/this.width,(r.bounds.minY+Qd)/this.height,(r.bounds.maxX-Qd-by)/this.width,(r.bounds.maxY-Qd-by)/this.height),o=new uL(this,r,a,e,1);return this.copyImageWithGutter(e,t,n,r.bounds.x,r.bounds.y),this.dirty=!0,this.usedSprites.push(o),o}else return null}removeImage(e){let t,n;for(n=0;n<this.usedSprites.length;n++)if(this.usedSprites[n].image===e){t=this.usedSprites[n];break}--t.count<=0&&(this.usedSprites.splice(n,1),this.unusedSprites.push(t))}containsImage(e){let t;for(t=0;t<this.usedSprites.length;t++)if(this.usedSprites[t].image===e)return!0;for(t=0;t<this.unusedSprites.length;t++)if(this.unusedSprites[t].image===e)return!0;return!1}copyImageWithGutter(e,t,n,s,r){this.copyImageRegion(e,1,1,0,0,s,r),this.copyImageRegion(e,1,1,t-1,0,s+1+t,r),this.copyImageRegion(e,1,1,t-1,n-1,s+1+t,r+1+n),this.copyImageRegion(e,1,1,0,n-1,s,r+1+n),this.copyImageRegion(e,t,1,0,0,s+1,r),this.copyImageRegion(e,t,1,0,n-1,s+1,r+1+n),this.copyImageRegion(e,1,n,0,0,s,r+1),this.copyImageRegion(e,1,n,t-1,0,s+1+t,r+1),this.context.drawImage(e,s+1,r+1)}copyImageRegion(e,t,n,s,r,a,o){this.context.drawImage(e,s,r,t,n,a,o,t,n)}}sg.MAX_DIMENSION=H2;let uL=class{constructor(e,t,n,s,r){this.spriteSheet=e,this.bin=t,this.uvBounds=n,this.image=s,this.count=r}};sg.Sprite=uL;const a7=["image","imageProperty","imageOpacity","imageBounds","initialWidth","initialHeight","mipmap","mipmapBias","mipmapInitialLevel","mipmapMaxLevel","hitTestPixels"];let ba=class extends pa(Ge){constructor(e,t){const n={};ai(e)?n.imageProperty=e:n.image=e;const s=Ne()(n,t);super(),this._imageBounds=null,this.mutate(s),this.invalidateSupportedRenderers()}invalidateImage(){this._image?this.invalidateSelf(this._imageBounds||new pt(0,0,this.getImageWidth(),this.getImageHeight())):this.invalidateSelf(pt.NOTHING);const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyImage();super.invalidateImage(),this.invalidateSupportedRenderers()}invalidateSupportedRenderers(){let e=qe.bitmaskCanvas;this.getImageWidth()<=sg.MAX_DIMENSION.width&&this.getImageHeight()<=sg.MAX_DIMENSION.height&&(e|=qe.bitmaskWebGL),this._image instanceof HTMLCanvasElement||(e|=qe.bitmaskSVG|qe.bitmaskDOM),this.setRendererBitmask(e)}setImageOpacity(e){const t=this._imageOpacity!==e;if(super.setImageOpacity(e),t){const n=this._drawables.length;for(let s=0;s<n;s++)this._drawables[s].markDirtyImageOpacity()}}setImageBounds(e){this._imageBounds!==e&&(this._imageBounds=e,this.invalidateImage())}set imageBounds(e){this.setImageBounds(e)}get imageBounds(){return this._imageBounds}getImageBounds(){return this._imageBounds}isPainted(){return!0}canvasPaintSelf(e,t){F2.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return oL.createFromPool(e,t)}createSVGDrawable(e,t){return lL.createFromPool(e,t)}createCanvasDrawable(e,t){return F2.createFromPool(e,t)}createWebGLDrawable(e,t){return MS.createFromPool(e,t)}containsPointSelf(e){const t=Ge.prototype.containsPointSelf.call(this,e);return!t||!this._hitTestPixels||!this._hitTestImageData?t:pa.testHitTestData(this._hitTestImageData,this.imageWidth,this.imageHeight,e)}getSelfShape(){return this._hitTestPixels&&this._hitTestImageData?pa.hitTestDataToShape(this._hitTestImageData,this.imageWidth,this.imageHeight):Ge.prototype.getSelfShape.call(this)}invalidateMipmaps(){const e=this._image&&this._mipmap&&!this._mipmapData;if(super.invalidateMipmaps(),e){const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyMipmap()}}mutate(e){return super.mutate(e)}};ba.DEFAULT_IMAGE_OPTIONS=Ut({},Ge.DEFAULT_NODE_OPTIONS,pa.DEFAULT_OPTIONS);ba.prototype._mutatorKeys=[...a7,...Ge.prototype._mutatorKeys];ba.prototype.drawableMarkFlags=[...Ge.prototype.drawableMarkFlags,"image","imageOpacity","mipmap"];ba.ImageIO=new ui("ImageIO",{valueType:ba,supertype:Ge.NodeIO,events:["changed"],methods:{setImage:{returnType:rr,parameterTypes:[xi],implementation:function(i){const e=new self.Image;e.src=i,this.image=e},documentation:"Set the image from a base64 string",invocableForReadOnlyElements:!1}}});const o7=new Fe(new He("SUN/a11y.closed",{en:"Closed"},R.OPT_OUT),R.OPT_OUT),l7=new Fe(new He("SUN/a11y.titleClosePattern",{en:"{{title}}, Close."},R.OPT_OUT),R.OPT_OUT),EE=i=>`${i}`;class _a extends Kb{constructor(e,t,n){const s=Ne()({formatNames:[],decimalPlaces:null,phetioFeatured:!0,tandemNameSuffix:"StringProperty"},n),r=[e],a={},o=Object.keys(t);o.forEach(l=>{const h=t[l];ai(h)&&r.push(h);let c=EE;if(s.decimalPlaces!==null&&(typeof s.decimalPlaces=="number"||s.decimalPlaces[l]!==null)){const f=typeof s.decimalPlaces=="number"||s.decimalPlaces===null?s.decimalPlaces:s.decimalPlaces[l];c=g=>EE(typeof g=="number"?pd(g,f):g)}s.maps&&s.maps.hasOwnProperty(l)?a[l]=f=>c(s.maps[l](f)):a[l]=c}),super(r,(...l)=>{const h=g=>{const v=r.indexOf(g);return v>=0?l[v]:g};let c=`${h(e)}`;s.formatNames.forEach((g,v)=>{c=c.replace(new RegExp(`\\{${v}\\}`,"g"),`{{${g}}}`)});const f=c.match(/\{\{[^{}]+\}\}/g)||[];for(let g=0;g<f.length;g++){const v=f[g],A=v.replace("{{","").replace("}}","");if(o.includes(A)){let P=h(t[A]);a[A]&&(P=a[A](P)),c=c.replace(v,`${P}`)}}return c},s)}}const h7=new Fe(new He("SCENERY_PHET/a11y.simSection.controlArea",{en:"Control Area"},R.OPT_OUT),R.OPT_OUT);class cL extends Ge{constructor(e,t){super(Ne()({containerTagName:"section",tagName:"div",labelContent:e,labelTagName:"h2"},t))}}class u7 extends cL{constructor(e){super(h7,e)}}const c7=new Fe(new He("SCENERY_PHET/a11y.simSection.playArea",{en:"Play Area"},R.OPT_OUT),R.OPT_OUT);class d7 extends cL{constructor(e){super(c7,e)}}const p7=new Fe(new He("SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint",{en:"If needed, check out keyboard shortcuts under Sim Resources."},R.OPT_OUT),R.OPT_OUT),f7=new Fe(new He("SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro",{en:"The {{screen}} changes as you play with it. It has a Play Area and a Control Area."},R.OPT_OUT),R.OPT_OUT),m7=new Fe(new He("SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern",{en:"{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area."},R.OPT_OUT),R.OPT_OUT);class g7 extends Ge{constructor(){super(),this.openingSummaryNode=new Ge({tagName:"p"});const e=new Ge({tagName:"p",innerContent:p7});this.addChild(this.openingSummaryNode),this.addChild(e),this.pdomOrder=[this.openingSummaryNode,null,e]}setIntroString(e,t,n){this.openingSummaryNode.innerContent=n&&t?Gn.fillIn(f7,{screen:t}):Gn.fillIn(m7,{sim:e})}}const dL=new pt(0,0,1024,618);class Rh extends Ge{constructor(e){const t=Ne()({layoutBounds:dL.copy(),layerSplit:!0,excludeInvisible:!0,tandem:R.REQUIRED,visiblePropertyOptions:{phetioState:!1,phetioReadOnly:!0},containerTagName:"article",tagName:"div",screenSummaryContent:null,includePDOMNodes:!0},e);super(t),this._screenSummaryContent=null,this.layoutBounds=t.layoutBounds,this.visibleBoundsProperty=new Mt(t.layoutBounds),this.pdomTitleNode=new Ge({tagName:"h1",focusHighlight:"invisible"}),this.pdomPlayAreaNode=new d7,this.pdomControlAreaNode=new u7,this.pdomScreenSummaryNode=new g7,t.screenSummaryContent&&this.setScreenSummaryContent(t.screenSummaryContent),this.visibleProperty.lazyLink(n=>{n?(this.pdomTitleNode.focusable=!0,this.pdomTitleNode.focus()):this.pdomTitleNode.focusable=!1}),this.pdomTitleNode.addInputListener({blur:()=>{this.pdomTitleNode.focusable=!1}}),this.pdomParentNode=new Ge({children:t.includePDOMNodes?[this.pdomTitleNode,this.pdomScreenSummaryNode,this.pdomControlAreaNode,this.pdomPlayAreaNode]:[this.pdomTitleNode]}),this.addChild(this.pdomParentNode),this.pdomParentNode.pdomOrder=t.includePDOMNodes?[this.pdomTitleNode,this.pdomScreenSummaryNode,this.pdomPlayAreaNode,this.pdomControlAreaNode]:[this.pdomTitleNode]}setPDOMOrder(e){throw new Error("Do not set the pdomOrder on ScreenView directly. Order Nodes under the `pdomScreenSummaryNode, pdomPlayAreaNode, and pdomControlAreaNode instead. This ensures that sims have a consistent heading structure and content is under those sections which is important for screen reader accessibility.")}setChildren(e){return Ge.prototype.setChildren.call(this,e),this.pdomParentNode&&!this.hasChild(this.pdomParentNode)&&(this.addChild(this.pdomParentNode),this.pdomParentNode.moveToBack()),this}getLayoutScale(e){return Rh.getLayoutScale(this.layoutBounds,e)}layout(e,t){this.matrix=Rh.getLayoutMatrix(this.layoutBounds,e,t),this.visibleBoundsProperty.value=this.parentToLocalBounds(e)}get screenSummaryContent(){return this._screenSummaryContent}set screenSummaryContent(e){this.setScreenSummaryContent(e)}setScreenSummaryContent(e){this._screenSummaryContent&&this.pdomScreenSummaryNode.removeChild(this._screenSummaryContent),this._screenSummaryContent=e,e&&this.pdomScreenSummaryNode.addChild(e)}setScreenSummaryIntroAndTitle(e,t,n,s){this.pdomScreenSummaryNode.setIntroString(e,t,s),this.pdomTitleNode.accessibleName=n}getVoicingOverviewContent(){return this._screenSummaryContent?this._screenSummaryContent.getVoicingOverviewString():null}getVoicingDetailsContent(){return this._screenSummaryContent?this._screenSummaryContent.getVoicingDetailsString():null}getVoicingHintContent(){return this._screenSummaryContent?this._screenSummaryContent.getVoicingInteractionHintString():null}interruptSubtreeInput(){return self.phet?.joist?.display?.interruptOtherPointers(),super.interruptSubtreeInput()}static getLayoutScale(e,t){return Math.min(t.width/e.width,t.height/e.height)}static getLayoutMatrix(e,t,n){const s=Ne()({verticalAlign:"center"},n),r=t.width,a=t.height,o=Rh.getLayoutScale(e,t);let l=0,h=0;return o===r/e.width?(h=a/o-e.height,s.verticalAlign==="center"&&(h/=2)):o===a/e.height&&(l=(r/o-e.width)/2),It.rowMajor(o,0,l*o+t.left,0,o,h*o+t.top,0,0,1)}step(e){}}Rh.DEFAULT_LAYOUT_BOUNDS=dL;const y7=i=>{jt(i.trim()===i,"path must be trimmed");const e=ie.get(self,i);return e!==void 0?e:null},VE=new Fe(new He("SCENERY_PHET/a11y.close",{en:"Close"},R.OPT_OUT),R.OPT_OUT),pL="data:audio/mpeg;base64,//swxAAABSAbF7TAgDE5nqu/MHICAAAAcDYkDIEtmZ+0OAIDonAEAIOjgnenW/yhz/g+fh+CEocif//+c5RVQlRIdHdXcHffj/DYYCgBdaS6OzOU+xCNTd7EPI6nQ7mODNUkXlljx1AXgvbsgTi8z3+Z7a8aMfHP9uQFmXb1f/cmZM/9//sIhYP//sNqQJAgNJhWTyGAwFAoAATS//syxAeACW0Hgbi1EBESBuvjNGAAfDtZrw0MQaBPJj2MwQyJDLEhJZGoPjAvCMnP3dlJiAtJ8xr/PKk5hYV//3KDxif//6MYVcnt//+VFswo04EQAACAAC9YdezBqNoZHHQDlUSCuyZAkxazLI1qAeiR+JfccaBj1xti9B5JXrESzzBnSIgoXKxEzkQCos+pbPmxfwWXkwAAFm+93//7MsQDgAh4Z1G5gwABEY3y9x5iAuzlQAAAAAB2Wop4QsaAhgpWdRTKJsZcpp1XP57ykSikyYckLZ4Ty1TSs+HageepBZpVjXhgAMSIXXKmU65I0d/7dt7v7sNgMBwALVb09GkvHVk7fqBciIEitH44DchaeFCkbZVn3vi+3iz997uspO3MNCwv4nKHDdB/+gTro/8WA6oYAgMAeW//+zLEAwAIZH9bHaGAAQMgrTTxid9Ko07zWxQmamYZMUXJVhdXnyiL/VNVCqJJVOgImNStCjd9bH2ZjwZ/qQYUyG79QVWCpgKmMChqVd/4VIkkywFXa2uRpIAhLLU5m1VG6LimpHOKzIapjKZdQGJoCUbq7bMoVyt+j5W6t+WZ/r/KqPLMbv1Kxurf//8tBTuFZBUABV3GwiMDZuFj//swxAUCB4SDK0ywaICeAyN0wyROlYmGu6/rSDZ4E2kDhIFxZeHE1XJXBGqqqgLGqsZQ8m6ArsXr1fUvL1lChr+v/7fq//SC5HLZU2AEjwW0VUCig+dQNmTNmsUQ+tQt+EhX+skFfU3+n+u7/hV6TEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",v7=bs(gt,pL),b7=_n.createLock(pL),xp=new _s;let kE=!1;const lv=()=>{kE||(b7(),kE=!0)},_7=i=>{xp.audioBufferProperty.value===null&&(xp.audioBufferProperty.set(i),lv())},A7=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),xp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),lv()},CE=gt.decodeAudioData(v7.buffer,_7,A7);CE&&CE.then(i=>{xp.audioBufferProperty.value===null&&(xp.audioBufferProperty.set(i),lv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),lv()});const fL="data:audio/mpeg;base64,//swxAAABsArNnTzABEnmTA3HoACAAIOAYznNNVnYDYAWAjClBSA3BwKB48VkSUAABBynBhYP5QMCc+T4JnwQcoH/6gff/Of/l4gAIJkjluslkskluuAAAkTmCV7K1w6pqz7VkryDnmQVVFCJY0HRFDgrNPT7QRsUHNV+KVNJRPtYt0/426/nj/Tv/sPVjjhtrzPbywAATqIdRsL//syxAOACHStW/2RACEMj6e2smAEqYAYhGmdJfGbQRJM6d5rUVhcXmZTOP9blIoBChWlL5hQoqBgpUdHqJ/1McBGpaGctDO3++hgIUqDV8QgqAAntdpnEwAD6ruLLBhIIEPkpGtP5xWnwVF2czcptv1Fgk0VRRGN9VJRU46pQrSVRX///853QKKZ0dz3cGnwCKBwcHYEIC0hEM5EMv/7MsQEAAiQXW+5hIAREZRslzKwACEMBgAAD9/MyuFW/l8vMAkS99TuX45zufo9JjH/gbUAtafz/MqCaqJP4IIAARGcawPpR8H3iefS7zg45qAIBFAAV1AtJXsx44xwqAZ24lKIsEc5bDMUuS6XnBEXQqAakxM3KX8vlruv28Pc++21X/p71t0ufET/PUOSB+v8FT3Fl3GALLrbdbr/+zLEA4AIWHtvuPWAEROSLXcegALRIIBAAAAIpME09Jpkm6HEpcYWjTFeQLCjn4NAjRM5fbfr4UULuXdO+HtlGqi0a/9EFQ66zxGCz/4GGlyg0HFHJZM7ZIAwEAAAErGUoi0JXI6UF+hiurPpjdxalUIbk1pRYWEUpY39w/BVt/p1i48ySduL+KRKEg8sPo/yoV/yLlIIpJIQSCOJ//swxAODxLAbO7xggDAAADSAAAAEweQCRznEiWHEqW49z3nuJf8Fbqzvw1+e6j3TPf/BakxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",w7=bs(gt,fL),S7=_n.createLock(fL),Ep=new _s;let DE=!1;const hv=()=>{DE||(S7(),DE=!0)},P7=i=>{Ep.audioBufferProperty.value===null&&(Ep.audioBufferProperty.set(i),hv())},T7=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Ep.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),hv()},IE=gt.decodeAudioData(w7.buffer,P7,T7);IE&&IE.then(i=>{Ep.audioBufferProperty.value===null&&(Ep.audioBufferProperty.set(i),hv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),hv()});const mL="data:audio/mpeg;base64,//swxAAAB5g/PnT2AAEODWz3MPACATcwAQxWRG8v4t4m5Y0gGrH+vEEIQ0J864QJgfEs//KUlhYscDHWH/BDD+7p8EAQBB3pBAEAQBABg+fwQAAABLbkkl+wAAAAAAApUEcylxWEbBYbjKTtTlM3eamWe5RAcBxA6VypWY/T+Lr1S1waL6rSucRXH9ORv3pvMuaX8aPVHAAHBUpB//syxAMCSChfPF28ABkDiqWd3bC1gSAHIAIB+Eua0PmBBI8GxoUDjBQgFHgkCKwrcSkWU6j9Sd+KaBUriJjhajVnvzMt1d7qnsZ///XxGarCW8ICUBSEMlofMKEEMUxHBpw1wME1UzDAIKgQMlzDhMDDKBify5qB0oNf2gp6peEUEQRlcTW9MN8XxQTaJeim2apgHXh0BA42HdjNLf/7MsQFggh4Wyguaea5EwulXc0k5sOdsU8HATEgJBsocOAYml+fvgPRkTAMqGk6FmJpDTjOn1MGkcUStpHsmIbInFwJGEsLanJYVDH8wCQSw4BWcJUpo5emDQ4bvFJ8R8GGQ8Y04EKYPAAk7BdNV8H2mJ54aS6xWdoQwIjE7LBlCLKCIUyihd/5O1Pr/Z//r//+ugAkgUDASheRbs7/+zLEBQIIMF0i7mknUQqKI43cjOo+4jDKZN4nQ+nnzAIQAIFAOgYZUEPnmTwex2HYpllk6m47QrXB/jCOonH1PVe/P+7f/yX////+oAJ/YCSrrMBgnNhCHMIDzMAgfM3JgRnS+W8QBgr0D4Pqy1k7lMfZVff9q1aA+omBkMhA4OM8FGFw99bPp+T/fX//9dUAKAcCZaSBQNNowTBB//swxAaDB/xNGm7hhtEICaLN3DDSlmkhAGok1mBAQFtknQ4AT4+pYJAiw0w4BwzUW4PaQgrVEGL6z0z0QVwH+d6Zr///6v8oAG7eA3pboQCSbFGAYeB2anAuc/ywAh/BhEZkqxPg7Bp8kJci1ITUM1YE9UZUPaWOT+Ks/zzcz8VejwR+j/T+z9HSADd3AQ+ZeKCgZHp2Fh8NAB5O//syxAkDR9RNFG7hJpD2jqINzpSynmlDBxw8IELTAVYo5IBlgwaHhk9qYTAyl58Dpjtf6q3Dv1vTRnvlv8S/6P9ABicJuxgUDmP6IKqoMDx1iggKEpYCCGUl4HnjMrXBkpxbk2rPIg7z9PwGIK9Ap1blL/0jaJjb9f+W/PU/5aoApe4BRQuWYMAobdPOYFIYaMk6fJDqYhBGg0Dsu//7MsQOgwiUUQZu4MdRBQogTdwY6oFDoaFxGnF+6NKF+px/5Pgxp7nlue5Ehb/4DjJz2n9+z8633/7v/KgFMbgIZImmDYHG86VGIYtGiJdHPZNmA4QJDruegBSAp2mvCtqonzjRyjPTPpc6RzbxeJPndFfzH/Zkv/9X75b/LSHIAAIqqsBDGcsQI0YnBj5+kYCQsu4vQoAi2rOVhXH/+zLED4JGvEEAbm0jUKoO4KmTCVZRFoN0WXzjW0zW6Q28yWOZvKPjXpnMNBsVda1ccCOMpS9GgcVUAh+JxR+hMHbWqv3wolHgh/gLfq3QCfwYlZ2+kmoAAAqSPYAAAZXQtxfw5RFhnCEoyBHegrALYEK6pBnXpBhS/4ci6AoaNlhus1y3kjUghRNDGRIyxJtzBboYMpeic0Op0DSX//swxCMCxQBO96eMy3C2A0AB73hMkPMgl18xMmNDDAXHMEdYykxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",x7=bs(gt,mL),E7=_n.createLock(mL),Vp=new _s;let LE=!1;const uv=()=>{LE||(E7(),LE=!0)},V7=i=>{Vp.audioBufferProperty.value===null&&(Vp.audioBufferProperty.set(i),uv())},k7=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Vp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),uv()},ME=gt.decodeAudioData(x7.buffer,V7,k7);ME&&ME.then(i=>{Vp.audioBufferProperty.value===null&&(Vp.audioBufferProperty.set(i),uv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),uv()});const gL="data:audio/mpeg;base64,//twxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAARAAAWCgAPDw8PDx4eHh4eHi0tLS0tLTw8PDw8PEtLS0tLS1paWlpaWmlpaWlpaXh4eHh4eIeHh4eHlpaWlpaWpaWlpaWltLS0tLS0w8PDw8PD0tLS0tLS4eHh4eHh8PDw8PDw//////8AAAA3TEFNRTMuOThyAc0AAAAAAAAAABRgJAZTQgAAYAAAFgoMxGP1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7cMQAAA7gbOxVvYACW5Fntz3AA5QAAyAQIBEys3MtCTFFg5TGPm8D3KgDTJuEccMxAZkMFHzKy0ykhAROIho0JQOFfTbU8iRzFi4zYwMgBiUFMRDxoHLdpJtwSEMGBAMAKWRFL8swriCVA0i2X2oxYpIxKJZScr2+g+8oCBQ5//5cP////y4P/y4fgEAoFAoFArLYAAAAAAMDYCMx+k2DAeA6MFEIcGgkCIdk1vDGDNcO0Mt0zUwRA+DC3HiMGkE03THtDaEMoMFkBAwKgmzBaBoMAgB8+fQzksxMVigyANDAggAQJN9mcHA4kFpgsEJllrRoCrC05kkQjR0MTisME7eQcphFoRHX7nUoy4CvF0UrhPiwWUy2x/P/PDDn/jLuqAGAAwDcEMMCHBhjCbwtwwKoHpMM+Ev/+3LECwNSzIkWXf2ACj+QoEXu5SkzE0he0zdxYLM8SH/zF7hbcxLcKaMHFCGjA5wQ0wSoE1MK+B4zAZAMwwDwDJMATAJjAxgRc1J/MpODbWY3W8MeEjJxMAAiO5iZUAhUFAIqBAUiEh4OCQSGGHArEVNUyE8wYKmTDJZl8pVXx5IYtUr673fO8xs0t7Ptb8bKV8UnuCIwTR2DLDFMMHUaMyDhPDIsI8M4ME00OMfT/wfHOBoKcxZUYjP9nDXBIzYicDQuIjXdjAyITWM0DiVnjL4Gza8sjHUVTPsCDQw/wMRJhEBZiGHIYMQkLaKoVCMsAmkcYk5vHm0AIAwSGW2TdCGTMcMMCMLyVipZcplALqSm/DURt95nlTdZjvOYyWrK46xN9WogBoCswawJDJACtMW4KExLSlDBsP/7cMQKABFIgQI17gASa5Mjaz3QAE3NLvnQ3agRDJ+DSMbgYExaABTE4EHMFIM4wwBnzAWAVMBYMAwgwkjBjDYNAKwyiLzEKxPMXsGB80aSkKDAQoMWgYtinyYmCYwER4ElzUrDHIBWSrc/T4pDAoBCwVZK7mOFNL3Wh2NUzOn6m+548/kht9JTqojAAAAEgMQKAAAAAAMA8A4wNw8DAgA9MMUIcQhtmGeEGYMAu5gnAomMSHcYCYNBkVBSmS+F8YBgAgGBJMHEU0xtw/zDiLVMxpn4xFAlAGbDnGZJgUfrl2aOjomK8jJwUMhgGABhAFRgKCwUAAu8k437py0SDRp6lj8Bgoski0Ff+++iWkItSgfwrAOkgGWY5f//9ne//7luZoyn9dUFRgAAwIBIw5CYxaOMxUGsxfH/+3LECQNQPJcafd4AGmmS38XvaShMaMQ29Y4HAKZcCMZWigIzAMzxoCgAmHoLiMUTLISzNunD5V0TlJYNXoQzCHBY5jACC4TFgiporE9rpO005iSiseWg60bdWG2ove12Uw7EwqDm/fmUQfYtQ1TWX9eWHZbQWm53a2WrVWZlFN+rfqa0QwzxGjEDGKMJIO8x+AJDCjO1MnMPU5+nqzFkYHM2I20x3iHDBzC1MLsZsxoAeTD9CsMMos8zVDZTN7EePxtJIxYgyDGTB+MPIHowBgGTADBbMMwC8wdAHQgAQwVwPlFxQBAwLQIhICgSXHCUCJKDiKuU7VAVVa7EVuui/6eCOSJLoN/GpSyzj/3aWls7w7EMufvur0t//tfyepULAAMFIm0wPA7iZsMxzQnjI4CXMkIcc3s5sP/7cMQNA1L0jPxPeylKLhGfRe7lKDdTH5GhojDABOMIkYUwNAuTGYGZMKEnMw5RgzDsMvEZsZsuJMGB0IUYbAIphfgdGA+DCYBQfxg1gImBWBMEAOBYBwwDQDk+ESQCASVEjLWMJA2YUAyFiirR2rNnEhGJxRfAMVSYa/K2uxFLZyY9ALryyBa31mHYXsse6+il0QwGAzDEVK6Mc4xQ1IgzDF9B6Npko4yElYDF9IGMnoGwzaSlzxAXzJ51TMYUjdJ8DBIajEz7j4TjDtTFTBaNDKoJjJgVzEJnjFgLzHoWzDQMkaw4TjCgBWmR1ahgHmUObQZ8uBw7/U0NqvX+pi6cMMwCwctZS8lLVXbAUvfaFYaw18B8s95/3a1C+7SqDQADDyGiMrE1QybhITRuVZMKYroyWRTTQ3b/+3LEDQNTCH74T3tJQjOQHwXu5Si1MVYJYyuCnTBmGJMjAKYxKBBjIpHGMVQW4wSBIzHZFRMfdJYzSWXjBrIzMVMOowVQNDBMBfMGAIgGgSmB+AQYB4BKSpgOgCl60STAJAMSVLUGTUnWAwajZPLzVYFySQT3UkGQ6NCofaHDjAkvl+bVW7N37Eb21jAJBdgiffpIYRJMhhFhymNmUUYqY/ZjKjymScW8Y71jZoaoamSqPyY/g7ZnyZZqs8ZmwAx0bSJoXG5vMPJqs3p0j/Jw9JBnWLZq8XZiURphEEQADswVAYwFAQOBwFCwVgaYCAmFADBzYWVPRM3HVLKFzKN0gqUzemZ08y1KNesWma1u3LoakFNh3fx+zpihGmJDu/TVMLUYcyLB+zDTE/M1MgwxgQCTATHNNNW0U//7cMQMg9AYfPgPdylB/o+fQe7hKIkx/DKxKGMy0GoxzTkzcQUzPL00cgQxnZE2mVszgdQzBtM+2AUoKExLAIw9BowtB4w1AQwBBdwQCAxgcCaM4YBCYYkcYQhmxEb0NsmWO6CQ7cnlzmGVwfbmMrP37m5XO///yImYwX+swEB1zFWAWMc8awx9hSzC7C6MewRQ0GiZTadBbMQIRAwOwDTKlXTF1CTLoWjNlbjABMDFJpTCYtT8PIjhwBjDoOAcWhhEEBiCHBhKAwCBAKgqYCgQEAE10MAWSgU5QMG7DnqBsEbG9bNYam3/ksqrXI7d3nQ473nqxvWM8fyYgQolAAMEiHMj0fMTBTM7hoMvhYM9yoMQfQONUNMoiqMESlMJ8AIwfgbzBJBwMMUUUwjAUysDkwNhdDQWDAP/+3LEHgNPbHz+TvsJQeIP30nu4SgDEBEgBhMCgFkwEwEgMBaYAwBCsZWAQzoeAFh9oDBosWZZ0LTk0NOtK5evtb8vns4frSrDV6rhn3mX/zKODLkHIYMQCZgYhqmFwEcYzALBhAg4mG8CAYlrfxg7BhGKuICYF4LBiUM5g8BQMJEzID40bL0xKLYwMmw4t98yiHgzdD8CDkYIBekWYFgqVQAAoAMrCArac7zC5UWADFYMl8ifyiVpZWwyXwywCVyOzey1PX9V/z//1H/TAAAI4AAETSCErTTotzbsTzLs7TNkMzIS0D/pmDHkmTGkczAbByMI0DcwRwAjCZGUMH4AYwoAJjAVFvNh8TgwgASQIAgYHQMpgFgSIIjAXACFgCYeVgMAQBqILBBYAFpTPXTJwz0sdqHWvJOiSP/7cMQ2g0+4fPsu+wlB2Y+eye7hKIdobk7bu6z+13Udv///8x+mpDCjDRMUgCYwUwpDANDLMGcOowyg2jOzJmN+IQoxdAhzDyCdMICkARmmCgImaagmVALmeBoGE+hn+zWGW4/GFgpGG4qFA7jIXiwhLbXYyUKAfF0BSwCg46JXxma6jiKft27aeM5Fnpj1q9Pd/LDOknsP/907tSpADB2CLMPQNoxExQTBCD0MLUPlQwxUOHTr4OtMWsSQwjwjzEJI+AgbpgECSmL0IiYPIIphSAIjxVJu+FmmIeDMYRYOJhPgJGCMBmYB4EpgSAIgoBNEhpw4Ak7jJYAjTP0bAkOG4Dzjj+kISMEUfaki+/1hnhVxgrX//fsv+iBgajjmG8RwZrYgRjCClGBKOgYxwnZii/hmhECgY3z/+3LETgNPqHzuL3spQe2PnYXvYSgNZheg4GK8BOYSgNJhJCIGCQUAYCYMpgyBvmFccYamYOZgDBbhA8RMD4YKYFxgfgWkQDqJCMsFmAUAWrC2VlqYMsCswKppandmgl6WiSMtrfH8prP+5f2anP5//TUwVAaDD0CMMJweQwjQ9jAPBtMvkZk1ysPTdxSzMVkN4xXBYjFLFDHhJTC/BeMYkdUweAJTDKDOMWMc020wDDGGBYMJ8NgweQSUEBgTAamA6AqWRDACBYC0OAebm7ZaFbzgraK/MkcnCWwIl8pvUlUkoMovLcua7lE6L9/rGzQgwLhcTGACZMPoSwEAXmNoDKY/QtJpKfGH4mMuYdw4piNgkGMMBmsa8mOQmmd0OmT6tmD7PASyzt60jOIOzEgHjGAnzKYTTBEOwP/7cMRkA0/EfOgPewlJ4Y4che7hKaAxg2AZECwqApaCgaQLAE8CM5bM3BjTW4arsXJTj45+WRmmvYyigzx3qryX6TVVMAZAtjBIATMwaQB5MB7CmzBlwMgwVcG0MIsQsjIeQ9QwpA7zFxFcMJcBgw8QODBTBGMGoi4w5wlzDcDdMNgHQ06iITGJC2MCcAowBgYDBBAkMe3O4bQOeswgMSROo+8Rd52mMDQuRvhHbcWbq+dqhxm+WrEsAq7n7PIBgBhcmCsB8YaRRphEgWGMiEuYCojRn886GkoJEZ8l4ZoCQa8EmZokiYXg4ZrmwFx5MBQpMvnYP9XXMFCJMVQjMDCRDhKB4o/AEVAwQEGjoC+0AJZ9Whn4OGBTTfNq/EYmmFvf8vuV+3QKIrtLdaoABVmL0GMYzAsRkaD/+3LEeoJPGGLmD/tHCb2MHNnu5ODaGIuDSY9As5uSpwH1AV+BmHjCfE2M2ZQgyTyBgADSYxJWJiCCQmNgEEYgY6hjqo8GEoD2YAYNRg4BtGA4BKdKeCuwsPZ8ieX/WBLiIPqfGQCyVPWoTCI7C4S92FBjSfjcv48++FWulxdwaYAgAdGBYA0Bg+QY+YPOEsGBOAxpggAd6YPSpJmSmAyRgUoBYYH6ATmIKAeYeQmBhABYmVMFaYfQDJiiAxmLsPIZoiwZj+hhiEAwwIASxgA9WQwHgGFBEbEQCsAxhiKy5VXNhEKUAbzyCVU0AxqeszFypzeV+1lUxp/t1eoAQGKQAAwLgljEMBsMhsagwog9DDKAXBAThoRXkmn2R+YLwbhiKDKGPmKUYbAsZgeBOGLuPAYH4JZgdClGJv/7cMSYg87UbNwPe0cJ7o4bAf9hKeN4bVoJ5gtARGA+BwYAYGRg2gYGA2B4VAGwMA4UAByVWFyXtL+xAOqqsAlPplTVneeFaleIT1bDDLDWe/ufoMFUFgwDwxTAlClMAcW8xICNzCmCZM3pz86SyWjJYgzJQNjRiDTAoADJ0kzRIwTIIsTSAdzETNTQ7cjJADDNwLzDUJjAcIFTgLraA5zbN+2zTmVJjNTVmguE/uNS6XNBnPx3YuXbOG96rEXWOs//1f3p///7v0P6qgC4AFgSzBcDvMO8TIeJiBwPBgXhhGCO5QbAYRxi0J5ngVxhyaJkMDhh2HBieeIWGQzlCgwaOM/SmMz1A8xgDMAhMYWBSNZLRLxsK9a64KlrDKr0srbaUz+FmWtJbXH9739l1bm1ffH7f3JV3fv/+3LEsQBPmHDbL3sJQd4N2oHu4OD///X///fpIBBgLAWGCIHaYZgK5g5ATmCSC0YeIZBjkq5GU6LUZykMTGUYWjMYijEYIhcYFhIYNgSZDhKZBPMcfjuNBEUEEAhFUZJwSdMl9JaOKz5DjqhvcvHsVxjMbjCAqV6+9lyLbLv3a0X6ESHnjmkrTgX6ewW628bWpy6aAAAEIBKAAYVGgQJzEA7MHBAeERhQBG6YsEF4lDMeEoCAUYKgI6ZVAYEguZjC2ZGtMcWpghOAQLKNr1LwVPu2Wuurc61Zm1tOXWe/o1tDZJ5cXoLq47k/vbkMSqQ57UHqbUISVThclJqqsAa1V3dqUsXjENcTVSBUCQHmLDZKQCFtO+lwC+DVGKFZhA8Ck5ACX2THBAR54Dl4c+jQuNtZdZ7rPuOGX//7cMTJAk6AYtSvdwcB3graIe684Jd3Kc5TLcMqa1j+V2z++ZfljKYdvVqa/VlNNTWpkJR7VjzOVVd5NBQlGc8z5NIkUcNIozLbzkcqq84/8kUcf1PnK74dLEkq30DAFGtNIonJMclvNIy5wMFJGkUZk4lppFE4ldVr+qreaiclZEjO/scSJEtxTEFNRTMuOTguM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqCQACQKKEgQswmgpKTiyiyizTjSizDzDy2eLzc/ypo0osoCEihIoDEA5BDcqWco0FBgUUBgQsQLAzjSizDzDy2drzcqpo0ov/+3LE5QJOoF7PjnWHApQz1oW8mbkoso404so8w+GdnZ4tv//+7VNSUWUWUKEihIELECxAoSBFmHxcNebNGlFmnCRQkCFiBYkUJFAYgWIFgZRZRZh5h9VVVUUJppI1VUxBTUUzLjk4LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7cMS2A9IFejpDGM3IAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",C7=bs(gt,gL),D7=_n.createLock(gL),kp=new _s;let OE=!1;const cv=()=>{OE||(D7(),OE=!0)},I7=i=>{kp.audioBufferProperty.value===null&&(kp.audioBufferProperty.set(i),cv())},L7=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),kp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),cv()},NE=gt.decodeAudioData(C7.buffer,I7,L7);NE&&NE.then(i=>{kp.audioBufferProperty.value===null&&(kp.audioBufferProperty.set(i),cv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),cv()});const yL="data:audio/mpeg;base64,//swxAAAB3BPLHWkgAEQCy03MPADAYAEAMYCIAZnV5vYJv2ZoxqgRhBhkBBkRJhwZa9g7/tbYe1+jC4beogQMZ4Z5zn7mgQQdxOH//////6SQAIzbNJJdtgAAAAAAHjcV2B1EBJLBB4wV9rCWp5eq0EHE43FpgLhkjdNEqGhFqhSQlQ4TwqZdZ7fN/Hm6YKiu/33NoUAACApAAAI//syxAOCSGxzQ123gDkDjCZJvLDmDQ0HhMRgBVEjBws2OIM9Cky1VU0REAhgK47nqWwHAkIYcB7ePHvXeo2cV1nG4uL6rjXjzXt951bbjQs/hQuyxEeFQaEGUgRohuYvQkhIfrBnlFyQoUla/qMye4qGxUqjhxTJIFPCOfamTewcOH2SkYCFVa21OLZrySygx+bV4B1xgBhA1DB0Bf/7MsQFAAfISyw1x4AxL4ssNzGAAigYRigH0YoI18mGQKOgZ+FY0UWnyRsLJgZYCShStOpdQYKdeV5/q9jbIDYPkLAYtiTETvrZLIYEb2u2uogAAAAAAhkChusjjbfkXleOGpiySKjhjUIlMla3JEsHQqgBs2ns50DIPtDIgjJE46JnUPRPPPOG5G8/yKxQADAZFTP1KgAAIX0AGkv/+zLEA4IIRJ9DPaUAMQuN5o2tmYqinck4ucZbhxEBHFls3WFfhr6dyvz3zgxEmEABChAREwQIwJRfc1jx6QHFWNNqQkrG5wvNNbdf1b//kxUACACHIGAlgmUgpccbebl+BkKCZXQyCAwpKkwRUzEk7AIAwgTBahUNNHisAuFoYmM12rXbbUJ2v5Cwa++fDf///+mgDERUoJgUemjg//swxAUDSExLJi3phxEQCmQBrbx0BkCOdSyG/xxiJyFwYUOAZiABRh0Zh64k8Pj7NAJTjWFStFgyvxBK5IhTLDstCt9Y/SAqpLqiYU1gRqYoIfCMbtwYtoG77YMaQdBGoPhoQOPIxjIsCrswBnOHTzqNAI9TIQEiAQc0oSX9JssKWBt5O9HJA8fEWBHxeXEQzXUAKsQAXwMjEM3O//syxAUCSDxVLM1lJzEbCWPFrmxBNqHM4RC+k5ZUzwUcEaSmKZZCdwJRBNZkJiwDdFN36YdSqdqUT6pYDZ5ScxSDVfZPSpL8M//b6NxDNtjDhTpxDmMDKQMMw1k08tNDTxrGMKLQxRDCMevDKlACBZi1WYsoiEOBwEwdI9e0vdBptNKZfgzJsVH29qtOpUET8k9v4mAAAExTEHgUKP/7MsQEggfQUyJNc0QA2AklmY2YpukjMG6N4KPFG4xmOjdBnIQqBgcbgGQGmcNGdaHtBQplqcsNdnbkroa0zXiUXxyr9wz/WF9usagQAkSHDHulGU3DjA44xIgQwADplHVAGUl7G/MbPAcXSMAgRGUSoN9OUp+zGuLf///V3//+ugKcCSTofFaj5oNcoyUgyJfAIDMwsQBGeEBQiGf/+zLEDgJHUD8UDOksQN6F39wxsAA60sBDGHr5bR5oZBEMkscKhnEIJPCh6j//////+n6AmBgKjhFZNEIgmCyGD2UQjAVEweC2peqxVyOIpL/WDXZ7cNcFTtQdJCEFQVGLPFgaUHJ6dhojDlVttOCJU4BB0qsXplV/tncqptv/p//+n//6abf////9QTTTTRVV9UEJK0kIixWmqoc///swxBiDxvgCi4CEYAgAADSAAAAE/1TTVEWK6UxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",M7=bs(gt,yL),O7=_n.createLock(yL),Cp=new _s;let RE=!1;const dv=()=>{RE||(O7(),RE=!0)},N7=i=>{Cp.audioBufferProperty.value===null&&(Cp.audioBufferProperty.set(i),dv())},R7=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Cp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),dv()},BE=gt.decodeAudioData(M7.buffer,N7,R7);BE&&BE.then(i=>{Cp.audioBufferProperty.value===null&&(Cp.audioBufferProperty.set(i),dv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),dv()});const vL="data:audio/mpeg;base64,//swxAAABriDQRQRgAEmkW2XHpAAAJQAAHgAAGAAAABIDu4cDd3/r/1wAAAAAARC/9EREd3d3PQDFg/D/lAfflAx/BMH9QP/ghBDaMSKQDL9Jl8zrxkLJ1driXbAMCtXKORoVLbBiwvIKx8m21HBZEfMq/0x/+KVG0Sv/////Uc0dO+i8Kkj3feKlhICwuZ+X8KkA4p+8BQpQAET//syxAOAB+BfSzzDADDmiiFBjAzgIQWVhDQDISg5HQzTHx2LQbHxpFGUeaRR9PJpFGqnPX9VQTICeoDA0eWdqBpYb9GV2lga/wVf/Boz4EawwCWbQYHfhmyxUqUCkE48QHSMRwuglOIhIgJrr1hocKgoLSa/2MFBBwSJBQkaQDIkNVC6Xfi9TEFNRTMuOTkuM1VVVVVVVVVVVVVVVQ==",B7=bs(gt,vL),q7=_n.createLock(vL),Dp=new _s;let qE=!1;const pv=()=>{qE||(q7(),qE=!0)},z7=i=>{Dp.audioBufferProperty.value===null&&(Dp.audioBufferProperty.set(i),pv())},F7=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Dp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),pv()},zE=gt.decodeAudioData(B7.buffer,z7,F7);zE&&zE.then(i=>{Dp.audioBufferProperty.value===null&&(Dp.audioBufferProperty.set(i),pv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),pv()});const bL="data:audio/mpeg;base64,//swxAAABbQXJue9InEGkeow9gy2AWSSSTAYoasSAbQuZ2IxjE6OhsMSZyx0576hvOP937/yhc4f0+H8LGFLHEz/XACUm0rv4BAiekAH6Jm5k8ECY8EgUIZ/AWGETh20scbX3gG7mZV3GgAhQncv3c4W4c9K5vl8EbDh9vE4Pl0bhBdl1QI5EgYIAkvMcggdSAIDGiYaCi1TJEP3//syxAuDiiyfQi2kcoEWjupFl5kgnLqM4ZI3NY8CQdRuXdoWvuuoGEFJjQ7a8upTGkSD3r2gYuE8ECDCcjuVOucc7PFj4P9PekLOItFR8vjb6SV/gLubu4jCdBDBUZqEFTw/hQO0ybCPVq3CQyd5UHRCwsCEH0Q2jEIIZNfXX87QzJsM1BcYADgQAD46ZctK/iAM1+rAAABG7CPrHv/7MsQEAAhUV2EspMpBDpFtsPMN3ulsDrrB7ZQEtNXcZW2+eAIHA1iQRS9ljECBZvLtnu+S6a0YJB+JgA6CDaxPlVGWHQ8HCBR6DCHeop9TISRiRalWFgH80HmEgJsLEZSTTztIStqpXKlQ8kZdEvWy8/YHdL2UHbB5ExRrSNWBrmZcZcEPZJL6UvqfSVDXar//BZXAxySNtyOOAMj/+zLEBIAItGtxp6SqsRAR7HT0jS4d8QmJJZG00FqAYyyFThGaVJDhkyhEHLIVsIpRT5Ssl3QDJM4wO6FDnlUhth1ElXKmXHvDqFQ0q1d5VN1FDjbkjTkcbALCLomUkUyMYChZlETMFQ9IXGnxGCb5rKyyHa0yhr8jfhbAY0MMamoklKVfb/Chu1FTLVMmzBJmtJ63PVoASmWaSySw//swxAOACFCLR6wwY6EPjiUFjRgoASFZYJYluFJiTQJCKPxyWSbCVDbjImuKZcwigTEdWzMMCOq6gJHJt0opTbvnSzCnRRM4GisU2ZL21TSX8JwGyJ1hZsTyoi3rd1yuVAdq07U9pFBBxQEHNQFHBVEi558+dTrbqXNvkmfcf9RQCtDgmnC0PPQXGaQzhe3o3evtdZUlttySX9Dh//syxAOAB/CXQ4ekZbDzkKc08wy0Wm4WA3SxrggemjmvrLhYPMwbgiQojkTMANwObSCpMBsRVwWZ03B7lJnulzuVMH3jG94r//vrv9DwI1K5XLM2UAR0cp3AuyNw3weQIg517NTTJHBXYkqjgo8ISOcjM523jJ9g1NmhoJtiVyLJKhB5Wi//Tdr9qgE0i2422iBAFsxlsAgejsEw6//7MsQJAAdMYTOnsGGg5opk3YMM2AMNO5+lxBo0cc4gsbfEqUFiQY53+2jBwHIGwgfJbxsYm3Z2UK7P//0gBBSJAoKalowNRlKnpTAkNJysTRiR23F8rIPdNBNHvoJIJDyIPAuCbzAXFUx7FEd0cWU1ZTd//+/qCLRKSikaIMATpvhKx1LK+hL2NEuYzCasqVFKkCuijuwbJkO+FGr/+zLEEwAG5Gczp4RpIM2RZzTAjAQICZLT4rfEYug+7Vq//0f6tYJTcdlt2gaAD05A3UhQo0dZrmawLqX/IKoI1DC8rt4NGcleF1HLcuOR0TbQd/98bsfo/uoAgIJKVAFYD8GhU5BgKLBU6eDdbu/RJej3f6k9RX7NSP++3qpMQU1FMy45OS41qqqqqqqqqqqqqqqqqqqqqqqqqqqq//swxCGDxHAPGOekYBAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",H7=bs(gt,bL),U7=_n.createLock(bL),Ip=new _s;let FE=!1;const fv=()=>{FE||(U7(),FE=!0)},G7=i=>{Ip.audioBufferProperty.value===null&&(Ip.audioBufferProperty.set(i),fv())},W7=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Ip.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),fv()},HE=gt.decodeAudioData(H7.buffer,G7,W7);HE&&HE.then(i=>{Ip.audioBufferProperty.value===null&&(Ip.audioBufferProperty.set(i),fv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),fv()});const _L="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAJAAAIpwB1dXV1dXV1dXV1dZmZmZmZmZmZmZmZt7e3t7e3t7e3t7fDw8PDw8PDw8PDw8/Pz8/Pz8/Pz8/P29vb29vb29vb29vn5+fn5+fn5+fn5/Pz8/Pz8/Pz8/Pz//////////////8AAAAATGF2YzU4LjU0AAAAAAAAAAAAAAAAJAaRAAAAAAAACKfAKvQnAAAAAAD/+9DEAAAOsE9AdZGAK8QbJPc/sEAAG+3c2nDeiOKI2kELTFZOe88bTlVNYoyijKIMQAuIoIxCHLCJXfiAAGBu7u7iwAAQAAAAPH/+hH//+Hh63//h///9Dw//wAHfmHh/+AAH/HDw//AAB2YeHh48AAAAARh4eHjwAAAABGHh4ePAAAAAEYeHh72AAAAAAgIGjKTaAgAAADF5zj41poBnMb3YuDrZ4lswWUT3NCZKkDBJA0IwPgKfMOfCCjBCwXEwfcFTMAZAMjBZAUkwToD3MJ5BHTAtQIwwN8BSIAB8wl6OBagd3mygBhQ4n2aSoGCCpjg+gjBRXLFBUc1FzFBNYIwECT6EgFQMwcYTWZjN8zetdqYr7OMFgASAmvSFbsCMnsyt5YaiLuxmtTc/Ln/zm//y5y5WusNhprzDsst/vn/////VpZTWppVVpaVWt/g0FQVEQVDSu75URBUFREDIKiK5SrP+FQVFAqCpYKgqIgqCoiCoBn+ANTNR9Qnf9QDAyCTMLwPkxiiMzLantMFUFgwBQFzBSBZMAwB1N9D5KowGweiYA8hABLigQAMtuqACgChABghQCoWEwjHHYoeynK7nyOIUWogYdzEPeXRdf/93EzSTPHHzdMvNVURcJrMu1Qn/yNHvOCiTPVcKZ4Jd9aABgZgAGFwCOYpoYBuSTunDGJWAjEDwXoedDHUcykRMOEDRvUyRGWss9DxDsKiq+hoGL/NJcyHaV/WqS10Lj8m4fUgtKwEoz9xzkxTEUiPXSxWZg8dR1MVNFsKnGcb1jVESp/JeehYdKA2B2gsgofDp8OxYwIUg8P0rqp1pfay9SxSMKU/20LvtQgAGPd/rRAMCcC4wNgWTA1E4MctvY19w9jCOB7NS+MOCMKOeAEiDu1gUDLJKSXk1ouM2Jk0RipZHIGzYkvmJZaBsU3Gzw4XvWPBcfkXD2A4lzobX9zU1HmDpxrnji+QYywuly9fWuBN5BIJLLDAbYIBQ4kHywjcRUZY8cHiRAigzC9VahyUolPqupX0+gABK//76tAAEIMMQgEzERTRNAOyvIyKAxHYtOHQKqAwZoGNMV2jipUhKanaYEuqXNAKDJEiQwRbUxSgD//twxOOCDkjjLH3kACIxlCNd7bC8SRNKXVYFRdFKV+4NWSKnVBQOlXSQdGLOhMNRFv8e7///9CeGqkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqv/7YMT2ABGQoRtPaYVhfw2i9cwkrKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqTEFNRTMuMTAwqqqqqv/7EMTWA8AAAf4AAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//sQxNYDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7EMTWA8AAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//sQxNYDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",K7=bs(gt,_L),Y7=_n.createLock(_L),Kc=new _s;let UE=!1;const mv=()=>{UE||(Y7(),UE=!0)},j7=i=>{Kc.audioBufferProperty.value===null&&(Kc.audioBufferProperty.set(i),mv())},X7=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Kc.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),mv()},GE=gt.decodeAudioData(K7.buffer,j7,X7);GE&&GE.then(i=>{Kc.audioBufferProperty.value===null&&(Kc.audioBufferProperty.set(i),mv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),mv()});const AL="data:audio/mpeg;base64,//swxAAABlAhPLTAgDE1De+/HoACAH4CwkCAJDo5gDgPRksn2WLHOB8EHShd5cHwfBBwgBBOJw/UCAY/lAxWD/4DB9+CH/6XQjMTIIcYUIQPQIRAIBAACUIawkYq7IQ/BawVqEc7mTjD+OFygBAnHbHq7UkLJ8aCnnrZlPpg3IkRJBgPH/MCQCI985/yAnHAAhmv3lHuAgAgAxJF//syxAOACHQpa7zBAAD8EunxpI3HUCEZHQlA2EYuDsSjE5EkSQGhUDYDxOARLoiBmIgalVgq4qWeWBqsNYKywNO+p/sxFyKwVOlXRFDtZ0S86oQ0C2W+wBOmlaWuS6+BIqZMz+AYy3FuwBkKXM2idVoKlYwUd/oIGgsbLpEbaCsmIyZRtbw6TPwj+mYmGr8QqnGHBLo3LKAAxKabZ//7MsQGAAhsl1OsPMcxAo3mpbCaAvIuuQRmW4WNHhDBJnoBORIlh+I9dvGCTCKP0kzo7rHHTi87diQ2XqnRN77y8lnKUl8zf+X0Fu0iCDV/9AP7el8Cw8raZKqiYShe+6bzYk0zXmEuGnBDcQhyRzPeI4Jbsmj5OxzZVhSX9adVU4Kk9r9esE3etv+/6wUIg3Wm62nA3Ab0EIcLUQ7/+zLECABGICs9oemDMLwEZrQcvFYyDBCUCgUAwQCUSvgROof5poGn9O7o70P/X9P/T+360+lAhIJVtyuNDljXzM7Ek0fGUB/ltZQF8iD7dBcVTs00f31POqR0/V/q/pjEe1z3jyAAQRBHGmSBEEVK6QIYH2miQZKNfgCVtiH9vVLp+w7an/d0jdUx9VnqZIJSvFtsaUFKKFBVCzoe//swxBwABSAhLaDl4nCsA+a0fDyG3vbgKx5OhNXyuPYt7kJJSg9B6heqxP93q/9P6IwSQ8LbYIFBVUF85RwseJPX6+Q7qIq7f/8ayokh7P//V8oyAABbhbGEIBBhOJgEGTBx6KjUiosS54l6y0i3jOz/6f///RVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDWABEQTMaCF4HCNAmL0EJgGVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",Q7=bs(gt,AL),J7=_n.createLock(AL),Lp=new _s;let WE=!1;const gv=()=>{WE||(J7(),WE=!0)},Z7=i=>{Lp.audioBufferProperty.value===null&&(Lp.audioBufferProperty.set(i),gv())},$7=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Lp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),gv()},KE=gt.decodeAudioData(Q7.buffer,Z7,$7);KE&&KE.then(i=>{Lp.audioBufferProperty.value===null&&(Lp.audioBufferProperty.set(i),gv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),gv()});const wL="data:audio/mpeg;base64,//swxAAAB5gnMzRhAAEHDWyDNLAAAAAaAQAu7tjAQAAABgMBgNNiBBAWD7ykMQf1g+D5/qBMHwfB/iAEPWCDv+o5wfPg+8EAQBMHz6gQB8Hwfsu2uWDrkw/a9xgUaMwFxxwCLsWS7MHN7VJki8fVT75eTqpn7/Xt1QxW//lJVbnfNuFRTzwrLn/5GVBnKMy/FVs5dTYABARKCMRm//syxAQACHBHWZ2kAAEJi+jxpg1Qlry2AYclVGyMwNoFJ29hqHqa1TRqRMCoetKstcqUzHBxQdCJmVcSJ/EQdEo0FXSoNLGkav/ljqPtEvjAoAE0zuEoM3lMJlLY3Uj65AMeMzQN6QWeLFdCcxLNFy4dBVXVfZ1L+gIki4KPQVBb4dERU6CrsFSoaLVHv/Ev9Hw4ANdAAG7VBBhVdP/7MsQFAAh8YybVowABG49vdx6AAm8ODBg8FDy9pmwIBsHPVGiPMueyERxZdIFnSpkzI8fezb+0z6OJVv7HHw7XBWdXwa6/y34l6sq7uitTjFTEgsFYrFQqFQDAGrQXMbpbb3ZGQWPWvTnyyeKKHgQ/nvlUf/u74oOHp/8v3R/dl/UcSXDz+kMBEHI0p5efiDJqb/64foFiBSWqB2r/+zLEA4AIVDlivZGAAQePKiWmDNhtwTYmBYyxnJdmZwmMtZ8ZjInEMMpo+VFWESqmhsWBoClhKKEhCW5UNPCsFVgqImyWS6KTAhEUrYoO7kaAWIJCwQzbgl5XrFBB27xoQwfnY6kozJtFz0SgICsWM3VIKWs6qr0tgI15/pQomHhblqjycRUCWe1dUOpxFOiJ/ooQC+IEEBlVdh0r//swxAUACGCjMy0kSsDoiCAA95gpQaBI041ceup5PSlsv5QNXMyixFLVkTXWpYUBYy/lEl4YCdWlLoZ//zGlKUBEhV0SiFT+us7WdBXqAbQ2hdxgDfH4RQsI+kgo2RnWVECiCa0TrUSNjalrUVVKyg0yapYqqVlRTNVLFf/2P/1qVadsTFKlitVMQU1FMy45OS4zVVVVVVVVVVVV",eH=bs(gt,wL),tH=_n.createLock(wL),Mp=new _s;let YE=!1;const yv=()=>{YE||(tH(),YE=!0)},iH=i=>{Mp.audioBufferProperty.value===null&&(Mp.audioBufferProperty.set(i),yv())},nH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Mp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),yv()},jE=gt.decodeAudioData(eH.buffer,iH,nH);jE&&jE.then(i=>{Mp.audioBufferProperty.value===null&&(Mp.audioBufferProperty.set(i),yv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),yv()});const SL="data:audio/mpeg;base64,//swxAAABswbPzQxABEQFyzDMlAAAAGoGRIdz0AAARQAAAAAMCd5QEAxBA4sPlz/BAMfw+ooc8EA/EAYKAh/qBBYfwfD4jB/4nD98ZXetEKIxIqnuursF7pTGkY4dNYcaZhOjzgxDNndb75ggdCsIvV3qoeM9HIX215a6Hftuc5FhwFRhvuJuhxbMPp+ir0KlAaCTHVtZuCsLISS//syxAYACGhJXR2jABEVIGmw8YpieZwGg6y5/p6bf69uls4kMS9HVvrXl8hI5WPBY8FawqGh3PYlLA0HQm6ZHvUe/4UB4ChNzls1AZIAAxJNQMBOy4KAeSsL0QgRcxFInzpyhsQ6tvdvaM160ZnbY/2bY19dTlJVJmhrQpT/Vf0eVjfzG////6PMYzmtqJdg0WqADvRwaGDBgBO5T//7MsQFgAkEZSA1swABDRYvdx5QAhmAEZHdFc2HHLBy/LcmfqWvq1yftVsQSJAxzSi25i5w6qqvMy/cjgNSoKu2Q1LHp1S4NCJQsHfLUSINPxK6oxocyIhmMRkMhQAQBuyhLerW2u5zoV4af2nULcHzwOiPxQjFU/nvIyflMKARabfnQqGI/v/FAIV6UJnPAgAca//9NZUgFEnVWuP/+zLEA4AIVL1vnYQAEQkIajDMpMja7T9a7DL+uzSEg2RRajlNmUzFPCBtL7Uyoa/iVlabnj1+Pi9f61X5WuJ9V1XhkOmtYltLGPI1//8s/0PMAKmLuWQPy0Hrh0Uy4C5MCaWoC5bwOjrQpVOQIn9JNDksr2zEBLvAp3LCI8Is9BX1FTsS50j5Us8OCIqEg73ZZ9QByyIAiddlUPU0//swxAUCSEyXLMywatDDBOHA8zBIRfBtlFDU3P7EItHsWE51WgaTVpJLPMzOMYE1qUSth4pRSd1WkZLqqrnGPUobBm4oDUDHol//+rJBUlwL0rYuAoOSuFITEsfTp5a46IhKRBQ6FQkBQCWJESR0KhIeNASKGnsJgJCf///1VUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVV",sH=bs(gt,SL),rH=_n.createLock(SL),Op=new _s;let XE=!1;const vv=()=>{XE||(rH(),XE=!0)},aH=i=>{Op.audioBufferProperty.value===null&&(Op.audioBufferProperty.set(i),vv())},oH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Op.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),vv()},QE=gt.decodeAudioData(sH.buffer,aH,oH);QE&&QE.then(i=>{Op.audioBufferProperty.value===null&&(Op.audioBufferProperty.set(i),vv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),vv()});const PL="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAEAAAE/QCbm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5vBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4P////////////////////////////////8AAAAUTEFNRTMuMTAwBJgAAAAAAAAAABUgJAXmQQABpAAABP2CPnqIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//ugxAAAAZABXJQAACjSBy/7MvJBlbA24AeHxx+Z+DJ48Acl/O7e/c+wAAAAAAAEggodS1KhDIMHY9Flj8OAaLhIDnqje9htgSxoj0q3Fksjnr007hUgBFiJkAAAAJRul9HpGarkErUNUSqvEO5RRnr0CYblhVBIAACITTDJN3xrY6pMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpcJoKAAAAAArSgBAzM3OFUFV0GH4AAagOAQ5P8ZoVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sgxNoAw8QpV9zxgCg6A+w4kAkEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMTlgMI4H1/EgQggMYHqUBQYBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQxNYDwAAB/gAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",lH=bs(gt,PL),hH=_n.createLock(PL),Yc=new _s;let JE=!1;const bv=()=>{JE||(hH(),JE=!0)},uH=i=>{Yc.audioBufferProperty.value===null&&(Yc.audioBufferProperty.set(i),bv())},cH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Yc.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),bv()},ZE=gt.decodeAudioData(lH.buffer,uH,cH);ZE&&ZE.then(i=>{Yc.audioBufferProperty.value===null&&(Yc.audioBufferProperty.set(i),bv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),bv()});const TL="data:audio/mpeg;base64,//swxAAABognHnWRADEriei3OrACCEgYAPOkFXghY6uD++Piw3kA4B4y7hchMBxIxLKSksCwfB8Hw+7wfB8H3/E4P+GP/++D58AABoNsRiAAegAAAcAAwfGEzHKEwATU0FYIw6Dg+OLEOCqwYUAazcxYAwgAWZl5g4CTyjQM3o0EQLO/PjeedH/0g7/quk7v////9CoAAgKS3agA//syxAOACFhpYb2WADkFBWUpz2ROAUr4AUY00DNWPwkiueFpjWamdXncJm4WSUvPYHtdLyIybUkqNbEdOAeIJqJS89odMGRdRGULsKEKKu9sAAFgQA2oDCIoIgGYfBxqSpmFgSkaq7FxnJizGCsESGsoBS/52SlqFCkhXIYlBMPwLKiSRYVd1f///7f/lUfvy2gAAL45ZHAEVS5wEP/7MsQFgkd0HRVM9wJwooOhqMw8TrAOxggWZrdB4KswIKoWwjoMDKpkDpawRH8EDMvQbb5c2fQ5IXBwEGakBD9/3/5ub1lQm4/cLYHDTARtPRS+xTotNKqDqFAVBUFeVBUFU4lBYO8sDQNB3iIGqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+zLEFwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//swxFsDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//syxJ6DwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",dH=bs(gt,TL),pH=_n.createLock(TL),Np=new _s;let $E=!1;const _v=()=>{$E||(pH(),$E=!0)},fH=i=>{Np.audioBufferProperty.value===null&&(Np.audioBufferProperty.set(i),_v())},mH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Np.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),_v()},eV=gt.decodeAudioData(dH.buffer,fH,mH);eV&&eV.then(i=>{Np.audioBufferProperty.value===null&&(Np.audioBufferProperty.set(i),_v())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),_v()});const xL="data:audio/mpeg;base64,//swxAAAB2hBNHWcgAERC69/MPJDBoAAAtMAQkIoPyFQTJPM0NVYzRy8xtWHpkcxxIacuJ3vlqjpzPGMBRuMl4kQ0yrG38dh/IxSHA+Ud4fETABABElVYiJ4AAAAAAAAeAdHFiQc0wxqaGxfhl+WkXVkI2k9KiBoVzKRtDAElVmeqzlTNtkS+ZRMG1PvI/W94/8ELbWAAAKoJCoT//syxAOCCCw5LF3NACkKh2SdrfVGCg3Cg4Dj8ZLARh41mQxkBgoIjEZTBJjYImACgZ3Whtm3GSfKawL4ECw4WNm+OWqNGSDA0WpZbZ9C6EEKACABE0OQGPHNUOioNqeFiRxh4iSHaHIzHSEHQ1Jm18aQhHVbAGKIIGHgDI2DoEkwGpiSm7L+3Ke0FOb7v////5YAAD0BgIAI2mkGDP/7MsQFgghcPzNM64Zw/QYk3a9tRtoYE52cH2GYQxknpylpgYwBvmhj+eXdR8AmmfACBiUXVYPBUD8AQFVjXou6mqSrKnaY//2////YEwSUMBfK8BUeuUwFk1FU36M5CIHFkGAKBBjYwHg1zDUTtMZwHcHz4KD0zG7NbljlV7oLAI3vKqf/u6v/7v/1qk9RWgGiAmk5gVFlBg4jA27/+zLECAJIVDscbXdqMQsJZSGu6Q607qEyoUsyYQsa4WZFjwf3IccSied99GKhYQEJ6KBkQAznesavLnbVe91/L//2dH+W/0ATBpCfQQLC4JXplcp6bpg3hwlhuwpQBZisgxuJFRnRzxkUDJp/Jomgksp3QjjMwUjuK3tvK4pDdHhuu7cXpLf///01AGVcIIA3ZWFKNMYKFJnomaOT//swxAkCCOhJKu3x6nEFBqSNnfSKl1zS5A1JNNIaTwh0x3ZD6GnMOEYFNMxcI0YBipZGp4/XR/P2V9fOftSo1lR0fuPf/b////tAww/AQ8JYiLcdCEPI14ZQpG8t5tb0fSmmbyXGaQmmV7xn4SVmaodgJIGwu6ipEYy7dHR265Vu39kn/9H//3/5ntUAQkoogD/JlCQFClFzbo0y//syxAgCCRQ1JuxvpDD+BWSNv3UGLMfgTI9WjWCuD73STVYpTDeUzYRmDF8ZjCsJ3cUEaatVwX4a0+u40bVvSOI8VcLRFb/7E9v//9N6slrYEpSIZw1MumYaVGgnoOWRkMOrmDY/HmMJ0BUxOqMwNNMWOwwXAhLFzoLhqNWHLXInTFnd7f9u/7P9qP7UqixpXAIsVcDWHcMrUTGig//7MsQHg0dkLSBsdyTw+AXkDa9wzo6TJIjTHyFT/61jGwcwpXZk+s4kO57Hxh74lUtT8m6jv/6Cq3fq2f/67/1XOWV8SUUEGBkOZAsYVKYIYfNSGA3GDAM4abxLpgtAgGbsKfLnRikHBhPf6lyvU1v5LebiHp/s/V1ft/2J/sRVFoFYAWynOROSA3HhI8RImXoY0h4ZEr4f2pGZNgz/+zLEDoOG7CsibPcGsOWF402ddIYZHE4cDhoDitCwk4YHuzUpDk79+zu//6v//RRAIqOMo1gKQ2ZgaIbdqU7DH4JzCt3z4vIDDEEzDqkDetPRAEJKBb10kM2rVu085V////3e5n//zqkAAUMCGyVkEmrwcItiYjRicmahmZ2oZqFAbg4TEwXylDCHDQDgqyEAhWNjr6U9K57Kf/////swxBoDhxwrGmzzxjDkCCGJv1DW+7///9BAbMGDQKRltkpEKguGnGnBhwg+DJkhj/JImAcF4YeKERhXjWGBQAIBug46RqDymTJ3253//////9QAAAgLrZAIACpTYHJQLGSB085gjDsBjGE8D7VPjHMCTPeo+TNASqLBV3LH6z5L/o/tT/bX//6P7UgSNtX+nGmxYvehgEMjUQzL//syxCSCRxQrE0z3ZnDVhaEprmDWgZMFVM3NDjHRJMXkk6wLyZHFDW+g7VLV49ezholVp8r/Qr//6wAAABbcAAAA6LXY4+6lq+QsIEjGLAqZgi52qDiyVMnI0y0FDIIQQCvFXsMFOQWxJKvzkvJIpCAASxGAAIKpjJFvUBNi4iFEpDNEgF+JiuDqFNJIhYC+F4Xt0jupWUFPRFS1TP/7MsQxgEaMQP+s8MbwtAdd/PeYf0FNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",gH=bs(gt,xL),yH=_n.createLock(xL),Rp=new _s;let tV=!1;const Av=()=>{tV||(yH(),tV=!0)},vH=i=>{Rp.audioBufferProperty.value===null&&(Rp.audioBufferProperty.set(i),Av())},bH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Rp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Av()},iV=gt.decodeAudioData(gH.buffer,vH,bH);iV&&iV.then(i=>{Rp.audioBufferProperty.value===null&&(Rp.audioBufferProperty.set(i),Av())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Av()});const EL="data:audio/mpeg;base64,//swxAAAB1BHOnWmABEWjO23MPACAM4AAka0C2CViDZjzZoUIKXmGQHLmnHZgZuIghjiBjgxeiMuWAQDhMhMyefxsGZPP38oscKBjgh7vuRIAKJJltl/4AAAAAAAeIQEujEqiqRmMJCES5WG2gJpbTG4Ow/M4mn/Qr2Js5qIuqgsklNZOqlEOMfLXi1GSdQzuEW0dE8qAAAwLYAA//syxAMCCDhjP123gAEEiuWNvCUaBpRaYSCm0Kg6aZJnFNZzqgY+cBgqYYFmJBqWAkHQEu2XFwmiO5lSznWcKmje3hW8HX3bwt0/3XUHQ/5sFAYACqnqDC8MFAAYjK0cc9HHDBpgmZQQhSpXRTUQnFAiSUey+KNyollAoIHkq4CYarC6S3YyUWYjae5ECrd//DlNiAACxKE0C6BbAf/7MsQFgwhgbzhtsFDxHA3mTb6ZItBjJRcHVJgRkcS2mcgBlQ4kyhGWnb+PtLXw1x9GdIJksprlMmS4Cg6y44yjbH5yKe05wYGI/v2JDYn4Auuq25bxHxJsxhAOAFTHWY1ZXPRRiMTRQRuKAOQJOsy1I6WV2TO0w6Sw7LS7gfm9kt6zyIwPOZ+BkYQHFqf/C3p//+hgG5wCQFYWCTD/+zLEBIMIdGkkLfUHWQONZU2+tSrxQUTDm+024/MxgnMkFRN85yMUCVEQLGBASqdpAKDFymGvanI7suWZGZeSHQoo10ND7uHsPDn/79gtWEzPwBSpvpilULMOAU5TLsYQJ4ZCgQ9OwiJIhwZaiyx9mjv225SaC56XS3HG/Z1fwfNN60notpag8MGez2/u//6VAGEm4IBuHC+wVGDp//swxAYCSDRpLu1xKLEYjeYNzRlZUhKGOGCWs0pA08Q6K8x4tJypSP7GoqwEicWBqgRes01nKVlIf053z99P+/0iOm5f3fR///9Yeo0+yXyIBggABwAMUlMw6A1DDFqjO9soQjM898y6I4jYzAJOUFB4ETkVwvSE4xN36KAAwrAce3hDuTP35zIZyYUyDMn+ISyAC3LdqAAB+ahk//syxAWASOxvWaw8zzD+imZNnjEV3JHJkEvdhpKPigJmMTjXO9IRmHkCqmDRKV0S1IC1jOP85Y5MSCkCH+gU0ozUUqNPx272KtThMKOJhxfE5TgmVUjBYXxXAW5sXB65hsAyY00YTHRJGOIapLBEXyyrAEARSqei0NSmHSQ/MpWStQ6L6Im3GvCmsSb/VQ/9phwACuMnDtxuEFAJjv/7MsQGAwhMYyxM9ScZHQskja6ZIlHP4HxIAwAPxmmJhhEGJh/EgkZBgEDYAANr7gthXLGdmFBIAYAqpKM51ULEenPZ/PqtNKhQTIERxwAhyCooMRAK0AYgsiRNABMGlBB+MSidMKAAMja+NcgkUmPB4DgRW4pi/z0r7lTL3mtAoCoCJSTl5o8wz6QWiqx3/t//ag4AAAHJdov6Bwb/+zLEBQBIGE8qbXGIwR8NaSmnshcFWggYaHqGTQEOEZ41iIjI4SMAxo8wMgSAh4CI5iQEBwYQPZZDoLFNxeOBwy8x25B1GfiR6RaiAQapdQ1tmbRXvfpSCabcGCo4qoNLVEaIiIUxwGpGODgKkYyxOJI96yKt45ruMnyxlWKW2neqTQDgdhIIn0oSL0P0PnmwJ9O6SgAAAimCDqAR//swxASAR2xhPG1xLHkNjihdvTFPEpiKw4gABcIXQCEimJjZJrgZaA4iNiY7pINEZ7B2yElTIU2qu13xUoQq4yhd5VFpCRiwDLsEWaepoozJUXWnIcTERUZVTpYMxkOCj0FNBgieh9D7wlVcTR0Cc7LaU/cmuQwN5fCnK9Y+smsQkY/6QmSHAyiWWkAAKUgAAAsuCvppLKVG2IlA//syxAiCR4RvRUztKLDhDWfpvJlXJkEg3k+NKBQuFAEtagUYOQvtmVDLVmD5053TkiO+N9YuviT/LfTXQp2mxoFqSCPM4X1E0nVwR0FAIsOghXOsahIZRDbGwM43kS6lJK4rwAxwCGDcpCWXtpEQ53S1v35WuSjUtQAy0AAARJmTVA8AQOqVoNF3zdAMLw71BQgkAgMjwTQkGxgCVv/7MsQSAkdMaTLs8Qjg2w0m5c0lTgCVz8xnJhCG2pRs414U2SyOm+uNZ8NANeEExBpChMMiwDXAgQQiBQiPKksIEwUGFC4Lkj7r2VWUR4NIzyJ6UGkkqnW2vrW7c/H+of4OqgAzcAGTpJfEADXaDgsX7Dh6DjKYFhZpmAAoDgEYF+gKFTEhuV2/NZ/21pKIRZ9bUlgxBiLU//Ce/V7/+zLEHQNHUGkwzhjwsOWNJM2elOSgTRFJwgCZsX4M8Ey4BGGYWAqYuJyfIDeDjBMHwQMDgAS9MnhnJgUlrzvaptVGAQec6lMQ/3f/6jPXTHReMiqMGMWUxc1k858QWJowORAyihcwxFJBEEAcYEiIZKisXjRJa1CZRJpRjQWbPNYwE6FUu//4kDgOawFnzmmWBnQC1CtjH4cMxyw6//swxCcDhzBpGA10R4DYByKNjmTKvZANJytIEhBhR0LrVuwNjTP9fxs5asiIqWf/Lf/////+tQnIJAGuAaNRprSJykgqQzgLjF/HCsDeTcUqKus9P66P1f/4oZYBGjiY1AXQLGWOYOSMStAB/8FTIsVCgeAoqKt7ajS0MdUhaVJ/rUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVV//syxDKCRnwlDGNh4vBbgB4kMIwOVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",_H=bs(gt,EL),AH=_n.createLock(EL),Bp=new _s;let nV=!1;const wv=()=>{nV||(AH(),nV=!0)},wH=i=>{Bp.audioBufferProperty.value===null&&(Bp.audioBufferProperty.set(i),wv())},SH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Bp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),wv()},sV=gt.decodeAudioData(_H.buffer,wH,SH);sV&&sV.then(i=>{Bp.audioBufferProperty.value===null&&(Bp.audioBufferProperty.set(i),wv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),wv()});const VL="data:audio/mpeg;base64,//swxAAABpAhE1WQgDEChGf3OiJCAAAJRgWMA3lCIUyXzv3PfM52Qw9nimjE2HsTh+X09sHwQBB10u/y4e//+gEAQ5cP/u//4nAABASEQsFsvw9GFpIAMRiGNLEgMlRmNb+1MIjHNu4KFilyMxQYzAAc3e/P+566F6J7olttvvTZ9lv1/6++U+z1qgAJHLdLYAABaRtXAaLgn8Bq//syxAiAiaBvUb22ADjOA6MNz+wKcSQr2BxEgs/qJ0XkEPODBEPhEBEOh7HwdhJLwTjcKQmIaxUepm3yySi6sRnp0hr1J8lYfUroW0RJYrMlFAAMN5mqFGCchxplBCFCZuwLfmAFg8RsPKaZAGhqJlpCZMCBA+iTjFW///////Xb//1B2gACzEgggAM2IOQFMKEH4x1EgzS0KJMJgP/7MsQMAkZUGwtNe0BwqQNgNawkjoI6rU0xQyo8AgUADX4Q45so+ubX4c/Qr//w0AVA5axJGw1awwFk8Bk0bAWushk77jjeDg6Vcjgr38sDQNfUJZ3KgqCoK0xBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEIYPAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxGWDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxKkDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsS7g8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEu4PAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxLwDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",PH=bs(gt,VL),TH=_n.createLock(VL),qp=new _s;let rV=!1;const Sv=()=>{rV||(TH(),rV=!0)},xH=i=>{qp.audioBufferProperty.value===null&&(qp.audioBufferProperty.set(i),Sv())},EH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),qp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Sv()},aV=gt.decodeAudioData(PH.buffer,xH,EH);aV&&aV.then(i=>{qp.audioBufferProperty.value===null&&(qp.audioBufferProperty.set(i),Sv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Sv()});const kL="data:audio/mpeg;base64,//swxAADBmUg7gCM3gjdH+EKkCADXz1BJf+Sv+D////B/+wLRCz8Ob7nQMDFvER3BwvY1oeojPpiEQYQL0nv/PTaE9Mj+CGSDyAlZCn+8ALh+7wp/1AwM6X1dlkJsf90b/9q79N/rXbyJO1mvPWrJd51MyMpH2ewI2SON/D/ewqahUQACtOQSosYwemRvEQowgEMcAgGEnpMUTvv//syxA4ACWhZFlm3gBFDi2o3N4ACrPHCPBpQhfbtmAGADTeZ8V0FwZZz7p/u/7+JQnto6loivZdV4Z1XlUuVdY1Lv+XQAAaMTt1uEgAAAAAAAQ8AArHCEEcJahjISY0EG2FI4VnM4hqpkY8GtFIRBaKjcwWceAuhbBTW6J8QDSFrH/mEBxb5d8U53t7PlPAT2yll2jZVACnAARxCcv/7MsQDgkgkcTrd5IA5BAvmCd0NJwsw0uCYBQDJggBQmDskmY6QmZhRg+GCmBMoavWoyp1qZ9gRJUQaaFMf69Sa+yTfVe4x/3OVdnVKMdKDDvJ8gUKw4NzA4GAUJBhODx2QtRhi5B4/L5/Up6DBhyokLWexBtC7iXyfKsZbB1IHwsB9K4vS+CEluYQqOR1866oAMyABVggADJrmg5n/+zLEBgJIfGE2zHjFsQIJ5MmvbIl6YGQHxijkGGCiVoaIA7gQAgYCIETlr1EgBV3RdMlXzWbjsuq6UvqokR/EJJkyOmHTj41omg1p0jAzELohQsQEB1CaikKiLmCCpiHEnncwfadxBGfHpoo+CBIBDCLIqAshdpPKZeluUP5zbxQ5Fvu3t44/T/SvuKjVZsAAAibS0LyzYwBg4UmQ//swxAeCSRxvOG5oy2kGiScdjuSUyKaeHhoOrm7C+YolB04mHJEmPFg4ujKsBTWWAOCpfJlb1d2tzlTmTiLTV3bp7za0Z/919hjJC4APjwAlCbqVZYa9YIgfTGCoeGQZ8GAyeg5QzFUojk+KBe8LhA45CbHJ6Wx5yp6IS93Z2hpf1lDT/OnWyBVfjBwNDw7BVQA2AAC20yWHGcEh//syxAWCSLRTNsz3ZLkJC2fZnrDmJOtswTCEwVN8w4N80jCgRg+bgQ2ZlAGvCpvr+ZeNGYDibCEiEtbiF7+U8GyfPP4FqrmjcgsZvxZu2TncBoq1zVeNoY3tzesBa4DAHRBDkHKgFGZqaGFJMGK8lmeI9GGYaDIEgYMS87YKktC0Pz1IYF1ycmq1d0oztLpbo5gygAAB90/gLdWCH//7MsQFgkeAWThscMVhCQzoqY2xHxCNEsAkwwkGjTICZWaqqJgEyHApoFgGLG1qpMAIEeuJRoLRRABh1Kd0TrzK2zTrRhwIQoA4D5tDKCOUoYhib/itAWJjBk7QIQA3VAMuAxkaMcQTn4E7xdMJHCYATHJ8d7xtudt5pTp/HOv92wABEZXvyYJqAACc4AAh5LJFIWLDCEUAnCYgIj7/+zLECgJHZGNFLG0I8N6L51mNmK4yEwQ9TLMqnwSCuIOiZh5cUHAqAFrkflFRxoKSzB1zNV+bVtzTFHMF8HTNtWTD7ASgQgc8wMwEIoVoSwAJZC4xnnwayFLcWOArlnjWXqlphKpea1oUJjGplVrUSVbIaiwACIKXqAIbCkJolC4htvvMPaJlGBGYs2GDTZ7rCAg0SGnnVO/c3LyA//swxBSARyBfQkzsyrjmjOoo/bCnJEpkPd0gZ9iC7vtGGGKl2kAAGUwCYNUOItz9IT7nuDEarEhGGGU6xn4Q6OKkFzuWPvOXdUnrrRKeZPeqVXa/AuutA8vEkmy0FMVcAAVUU0IjaWiOiMxgzCUhZ452o+UIOYiwkOM20SlAsByQFGEgK1KgqRcBUIw4K60iIsW3kfsKtgyMuAJc//syxB6CRyRfPE1warjhDShc/aSnMUBRTh/IBPpIoaDjIcYxIsSxGgc6qlMXBVILmTyCxPmJV0cW5rMG2YbGyBvyyM8l55zY60oAAIU4AAAIaSrYqIQEfElFgTjnMJHw2qQzO5RX6DQMYziCHJljXIGj1Lg/uRPwjmJqURp8anVTfz/nwJWgAAylAgV/25sFV0/TWgoQTu6sMMgQ5f/7MsQpgEeEa0NM8Mcw4ozpacyZHxExUrTH9IkGJYwZHotnZK1ACitNzotE/KtCjBtkWyT9CpJAAE04AAAIGSFa0o8/kXFQCJSNOjlJMXBfPZVljvn0SHByx0nZmaLtLZhUWI5MxZ8Vqyq/kRNb2FhWAQhF4JzlAWIwJGUCBBgo+ZpSGWanAYmIEgCUkgQuDGq0yGTougTEXYxG8sf/+zLEMwBHPFtBTuUouOEI5pm/bMZ7l8v/mPO/hZqS//RVAAAOQAAABeSt7bAgBtszxhYB4GhfmCazGYHQSxoQqCi4uCYPNhyKv5nqAI+IEn81YVP23nVTg1UKuJgFBcym6jqc1tgSKh7+GcQgsYlghYvyKyCSZhDpfp7VtsLhMhne1ss5ulprWdgGhF1////+lQAAmgBXCzVTjx0u//swxD2CR1RJMU9tKKDTh+Xhn2jGmIARjRpwsB9K/Rp2OQcULFsrMTgiJbVVFARDTgVIrO2LM68uO+Xe6zoLygqYDAHXZYv9C93GliIAACIpsJhZlACo2KnowEyySIHOkHgQ+aPVbNfq0Idrtr///3feAEAAQNgC8i/YOQQHX0FADwKHQYrzKQgCvBcYRHzAgjoF1LnpKoJPe2+e//syxEkCBsBJLw13JjDHhual3LEWrn0OVaiFf///////+sxI8BpgATI1M9DEswQBM5HQWsHIy9CZMJBRtJKIlYABR29sLIgCFgqVFEs/rzNwr16lxYzk0Z+XTSEQCCAaYLrFgYBAgVEmUMG/hn5EUmnhYmUaAkKOhzS6R4YwrNB5+N09H+Wozq88qPEZf/7//+x3rXWiaAA8DIxYRv/7MsRZAsboNyjMe0Rg4YcjQb9swKRhyQCk0QC4oGAk5NY/jOVggMbME4ayRZYUkctGgKLVUbKAgFH2NxZ/52lux9zP73//c1l0f////9m/zSoAYUYAACIg6AStCbiiMpEADA0QTO3szEocjNHR5sswK0CJHEaIaHHaDxon+uQx2/vt1HT+z////6cb9qVYwBnDKpuBeYELM+DoUNT/+zLEZQMHeDkmTXdGMQmJI8m/bMDzfQbiMjoeMxKQWjBMAHMKIOwUOcyQHoIyJdArUH6cSRQxIZHHqep/7/dm+gAPGACIGIX5smYGDLCmKBGdTnm6GiiZYY1YTx1RIeKgO2Q9j4eT/DoIYkNeluT+WUtBez//+mz+pX7jFgKFVaY0D5jYKGAAYYPFpiQqGY9KaK18Zj8BnHvCuFxe//swxGmCR2RHKu7pKLDtiOMBv2jIIxmZF8Y0QmBDgMMlANpjL4zGpXS16K1hPX0GxomhBGQuZhxKHHQwKmNkAiHzBdYytG2gIEWD2sLFBWQnbWwKXmHg0MBwWp554rO1RUAB2G/VFKedTFtPHfo/+z/r8+Y+NgyRCPYKpxnY+AAYEmJoRObfqEZknjeGtw6MiMOSJyXKGrAElmIA//syxHGDx1A3IG17JgDsh2LBz3DAAULJfLtM4iEspM564AP//////R7/SgAKAADCBEEJICixwVRlMVATFDgzGtNGA7sxnAzxgeBgbKonCvXFQykQQgswmAL+UWfmxSfdMGV////UJHIBCjtSJHYxkuBwSIAc0iWMzl+4w9wNwj+AZkmFQsde7wdWgcASELlYukkOySVRrlq3XDW6Nv/7MsR6g4iMLxxt+2YQ+Qbiwb9wwKKMJiAaczkM0yBfYsOOo5MLlbkwJQtDGxZDD8EBg6GmDOQUHgGpAeFEvrRuMVKX9ascvQ1Y0DQDhBYpAJUAiQIIqHhhQzaw9Z2DOxjMuhBipf8yY7ywAX0T2XLRxQNY4Ifo06c5/f93T0//o/+6T1MOpjIiBEQCxg0RQxrE7RA+1oQ1BEwwgA7/+zDEfQPHXDUabfuGANeG4oG/cMBIYwLBQxCV4HGcjSiEJBO0KRUtDKrdm4ef//////1P0SAWJAAUgK8B7ha0wDSy5dQ2dzYbwzNQEw1aX4VYcWMDpDQ1tjRerYl7y6marf//orbXQzEH0HP0U0AISQC0hKmN0MDByAK8YAOOZjDCSAMDgE0adk+VJhTBMEBZgZAS8FWW39NCYrv/+zLEiAMGjDsWDXuGAOmGo82uDNqf///p/6v9uvpCgCIxk4AHdsBA5CBAYnMSCT5mqzTUsDgjzYoE5TwUAV2ZRKRI7GobqUUvzvVwO7/////9vxXVYK9yiYaJgUkDVQUggWtZJMswWJzvUFMzDEcES1TkN+hVkFtgYfVyshBp9CVHASd9/+lfVoffs/aT/+3oSkBBgT5AlYk6rQms//syxJSDBzw1FA3roIDkBWNNnujApKRAhozVgIwtAQowEhGngjd6dRpDYQBq26snZ3+jl3//5H/9LPxm6ggbKSQTGkBwJDr9AEAZRWZh0SYgjAAdh4nEPHBJ1I+L20Vnud4NBUNXf//9lH9PR6myyEnLxTHIxkgIFsgoOhuNFBgNIiwaOJzpdEzxASS7XUMuZitqGWgTH0gqoIlpBP/7MsSfA4boLRZte2YA5YaiAb7owLmO6v9fR6/KM+v+tPb6ahpQsqVkpWKwJLBg4DAOB0YyeFg4COajuYRQYQP8HpT1wceQNLJHn2f///47Y9VxKxrhCkWPuCFhWo81A1FdTJHImAMYU1ZBCzE1tMDAQ7B43PHRwJxW4JQqQFtJU2s7///1dLdz7TLkFTS2Co0qLGjYngEk7e9diUP/+zDEqoMHICsabPMmEM4Eow2e5MIIZrVcxtoYKA8xbIDmUnGddoh0rLaVhaELboGA3I///+32tj0qUhAXA4lABA0VFRzYs5Bxwo8cRAZqIgBjC0wyrCVrVBy0Sl3U0lLcrNkmJX3vXQ9xHrF1kft9KnLd0/5XIPY0tSK0DTykPgmqBACpusgAjZhT0YwByozh1IJWKp2KmeLt9Ov/+zLEt4MG7C8QLXcGENuFYg2eZMLR2pQ6RirmqAoCYKg0PHnDwUA5I6x8afWSCCjoaGWkABNLoLs3MMFnGvzaGfMY2VvKaYxjfVvVP6f/9DGVtSlb//VsrzTGDCnJFXIg08GgaduIVUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxMQDx4gzCgzwxsDphiFBzJkQVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsTMggc4KQgN5YhA0YShqJwkmlVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zDE2QBG9BsHQYXiANIdX3A0iMBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",VH=bs(gt,kL),kH=_n.createLock(kL),jc=new _s;let oV=!1;const Pv=()=>{oV||(kH(),oV=!0)},CH=i=>{jc.audioBufferProperty.value===null&&(jc.audioBufferProperty.set(i),Pv())},DH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),jc.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Pv()},lV=gt.decodeAudioData(VH.buffer,CH,DH);lV&&lV.then(i=>{jc.audioBufferProperty.value===null&&(jc.audioBufferProperty.set(i),Pv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Pv()});const CL="data:audio/mpeg;base64,//swxAAABdzxBVQRADFFHaWrNxAA6lqlJJEQAExvBGPAACkboRpPkaQjfnfz5z/zvk6HfzvO//6nzn/8n8Wo50RIcE5h04AwQBAIwAHAAGGKl44UnQFxrI7b6JARZgWfzRC7X2cjUCZG/TgeAfXziIB7AOgm3/Dlw5chhj/4aoJEnxOhr/+bkURTNP+37dN///zd5/WqMcFKOhHs//syxAMACFBlQBnXgAEQCuRbvLAAMh2cNcpzMDxDOxVSMlAjYsYOAlbMUQJ8hAkSABkLAPbGhQfrk7xotjWuYO3uc9FKLMWDXX39eK91WL8a4ARAYAYFAQZg2BpmMcTuZ9zx5rwEJFAZZgjA1mC8BuLASofGAOAMhs/U/GV40k0Dkso2K6Npbban/lI2Pnd6J3///t66ABTcYocjaf/7MsQDgAX8JTutseaw6RRnNZCJDkFdpsKMGTznDUOCFN3UBmSx0M4MasPlPO6Ar07embS//T/2f27SK//YUG03dpZI2oMaBN8MJA5tI6MkldtNZgLZ+dUe9LvQy6Odv9a9cr9VPRUaBtgq9EWmz6Xj3KZTzOv1ylUAC+0kk0oAEUn+I0HZ6jICCWahweFTlrz07qq2Ls9T3N/Xljr/+zLEEgAFSBMjQWBgUI8CIvA3vAbc1Vf//uoAABTglUoQoEElDJAFw2zpqMe6sqMzu59/9uvz32/t/onv/5FMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxC8DwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",IH=bs(gt,CL),LH=_n.createLock(CL),Xc=new _s;let hV=!1;const Tv=()=>{hV||(LH(),hV=!0)},MH=i=>{Xc.audioBufferProperty.value===null&&(Xc.audioBufferProperty.set(i),Tv())},OH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Xc.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Tv()},uV=gt.decodeAudioData(IH.buffer,MH,OH);uV&&uV.then(i=>{Xc.audioBufferProperty.value===null&&(Xc.audioBufferProperty.set(i),Tv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Tv()});const DL="data:audio/mpeg;base64,//swxAAAByAnDnWRADEZkyy3M0ALJQcEAMk013znpOVkWGNCg9vD4oJlTQcNxQBIJ0PxSUlJSCwfB8Hz+CAIAN/DH/gg78EHS7//9QIJSLq/wFHg+AwFAAAAAAfFvo6+SmoCLgXFVlJaBRlrks8EfgdfwNGNDIX1icAtgSPunkTDV42yCf+OWMmXBP4hJ/+RAZg8nmowgLA3CbIw//syxAOACDxjRhnXgAEOCqVnuqAERLIypm8wTCMyMagDMoYEAyRAAgCAQ9za/ELra7bNcNI9BMVmPx3pF7P7a/wstMTOL6//gwrwjSeVKioAAkqgEBggJpjMDZgiPBm+0xy7jJ482ppET4kOhhSHhg8CKMhgGASP09uliMpAaC+Gyqiiyjd9/QiJjzxL//////p9lUBqv86UKJp6wP/7MsQEgAWgKTMsbMLwvwUmdaCI3g146KXMwJVAHDYhAjvxQKf+SIBJPJWbIrZ/1aVs/k7Lf2//7QQilFbJGkVBjWeEsADYyEamuw0dNdmGxS1qmJCrAKrGJZ+TX/V+1zX0fitWyROXKQQiijI22kTAod9keTOhUgChZfu1VSXOv2ubHdG+h4jXu2fLMV00rQvomqNH8kAAAARGFj3/+zLEGgDFrBkvoeWAcKKCYxBngBYhtAWgNUjlVDuFH+de4qlT5ENEZ7/8t7K3cKjB1Q/kmOcRTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxDMDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",NH=bs(gt,DL),RH=_n.createLock(DL),Qc=new _s;let cV=!1;const xv=()=>{cV||(RH(),cV=!0)},BH=i=>{Qc.audioBufferProperty.value===null&&(Qc.audioBufferProperty.set(i),xv())},qH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Qc.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),xv()},dV=gt.decodeAudioData(NH.buffer,BH,qH);dV&&dV.then(i=>{Qc.audioBufferProperty.value===null&&(Qc.audioBufferProperty.set(i),xv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),xv()});const IL="data:audio/mpeg;base64,//swxAAAA8ADNZQRgDGHni23MIAC1bbaiNgdgM+wEHBiogUAbxA4MT+////gh//8Mf4YzNI0kYiNYjDZaLJCYAZZgbhKQTNx5Vp34WpSu/bhLvzLYwWSHokUhx0EBR4FA/Mp8sOz3gcWfL9YqH7kKIkzd9fLvSkB201St7337UyHKf7X9Pf//Ue9/6irjy/l3s5gqCo1lPVlVSBj//syxAOACFB7hZyUgDEUCu008ZpKfZq0pMq3UhCDwXYfD+n5X+IUp5YiEYMB0CgRCwfQF0AmAUjAlZVJuE4ZaTbKK0AIJCxUAwrWLf////l1oFP9Yo2m1QI89G8bsISUXc8TjPs5pDlVUzUq1VJLFYcIlvdQS0P1lohZFx5hFpVDCPaSKlRsdgIslDzfeqxt8iVd+v6aClA3ydRso//7MsQDgAhYV13sGEqhEJFpcZMJqE0gGS8ZU3ekWmMRbO4kqZnMgAHAFiPmBRdQFgRZHZrTNwZcRTYLKU4qxy3ieKohBwSNif5UwYc4W/ywiEYAtIWoggTByJ+YPcFxgdYE5MVlD41ZJSYBdPF8gQIZtZPy/cZWxBR5Bm7WwZdGkolTRTQXLpSOcoUvf3in/dyBZwzRXAF3ieJEAxD/+zLEBAAIkJlXlYaAARIWb3MegACpLHqwdgk0mfJ913UT0LiL5W+nIh+DsKATQJ4F0E4PF8c7FxaaaCZ80SpqZbfX7J/99fN0p/Onf+zSaVmKSAKAgKAgMAAAAAEBCVMt4sfsyRdHO3PTH0SBFi4jhEgNBinEXeeDSKeby9zBMKun3/pKZ6L//H/6T/p/82bkkAyj/5m7WOWuRFpI//swxAOACDgvi7zDADEQkW289AoWMABHxkZCUEwfjodDiYmpiWw9NWjIAhJEFkFSo4GnxwiDsrBoGn/g0DT64Kgq9BUFQWBo3WFDf4B//ljZRUwaFSyREkApYqDmkM8qYgtylZx9ZL7knEF4rFKLgqfa4GHahJbD5q+ZdeybNpd1LOzqJVWdmJgs9uNUoK61I9Pf1runDP5da2kA//syxAQACHita6eYTzEMFSdkzAigHGL2uEMDLL6xtFmUuujunUP9ODzjFKbt2J5yt77uOmiJWXQ6GAbIjvu17WVn/dDEccwhLJLW6dXU/dcsEAvP8BAST22Qg8WJEX2Cxxs84/BnOt15rGZwVs2FEtKWVPRHZitdbuySkumtHlb0M/U5QwcQRYSLI91T/epbUqPPogEGy4Ldq0ABj//7MsQEgAfcrTesFG1owIRiqMyYmD9U8MBcisSsURTFgBykNZkSUjL+oDB8VGCT310AYfb2ZlVRgEvbASNp8ptD8y7lYYlvxtFsCgAAYAQABAzjzrwIrmT2cuLIZOOOhHHQELC2rOtlix709VXnYiej4dx2rz2Vd/xL6QQAAHCikADAVHicCJrfesiRcXCNaoKuuneW+r1dXxFDvZf/+zLEEQBFcCEJoLHi8JuFVvDMGGz/vqeWI50KHuGnJHLWAAQIl4qgkpSn8oGq1rUCoSk3UAhEYtCgKWWwwIDo////4sLVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",zH=bs(gt,IL),FH=_n.createLock(IL),zp=new _s;let pV=!1;const Ev=()=>{pV||(FH(),pV=!0)},HH=i=>{zp.audioBufferProperty.value===null&&(zp.audioBufferProperty.set(i),Ev())},UH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),zp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Ev()},fV=gt.decodeAudioData(zH.buffer,HH,UH);fV&&fV.then(i=>{zp.audioBufferProperty.value===null&&(zp.audioBufferProperty.set(i),Ev())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Ev()});const LL="data:audio/mpeg;base64,//swxAAABQQDHVQRABFbki33MLACAFiANEhrgagQWfE6eUcJxwPv5wuD/ynh/aXfLvD/9HlwfD//EEEPD7ZhOAkFSjlaqEIiQQAEs4eiJWJc1P1YWHlShsUzcufWA094Hx1uq0G20l0OwMrP+XF59gcKx8JP77pO3m998s/Yw/nLVXnrrpQBsXJUFMLEnmlFmN/yDRSkA2wbEgAA//syxAQACKRzd7zHgAkGB+81hgxyg9V/KSvjePEM6MTwDABAfIScR33O56q5d4xqkH7v3jiaZMD6kY9sjxrY2dnb1HHfvNR/kWIABj/dYQ11+H0jIKJAJJKoO2kaXeWiJIkiSIKkCp6SSSRawEonOLl37VSoUBXLB1R4RArEQNHoKne/wVBU9wWDv4KhL8s9QNP/QiqohANaOyIgAP/7MsQEgAhwYVvmPMihFovqvMwtRAH6Ae14cRCJA0gkI0l3oAaVhTxL2UFGwRUl00mkOm7spnrNztCVjBca9pe1ZAAImV6HsdkkYbqCJBixaWQQZZKZsggAaovjuRz0ay4sAStsBa8qCRLYzJqRvdo6N8kxL5ulvc1t68seeejKSpp09k0Niw9j0xU7cwYDINIb9ZH0VZtohLZJIkj/+zLEA4AIWItlrCBPcRURrbawIAYAJxeV16k/ZdmXyuGXKtUDPLTyWvc8HhHuEmbDWxZs3a26Jzoe0n+dLpP9moqDULbjgomp6BR7tp47Kkb/Yy7HHGiQALQa4vBYdia742/8Tg6Ha/Yveot5iAggAUDAwPPgRG2IQAAAAjEAwP1yvoQIToEAAAQ5YPg+BwcOf+D4PhgAJtta7sOB//swxAOACHRxgbj0gAENjex3sIAAQAgIBAQABwvF95I9BqsaLjRfG8H8voXioPoFOTnP5fr6BAbTCiaJqU//xNPUyOwkrvuV+H0skfwwkh/8uGgaN7U4ykgBI0Wl0NRp9iTTuOtTP3h74fLq2RJI5YD4IhSIZoj1X1UVJEZr6+eMZdiQADi2WsYqaj6u1HKNo9Ta1BZ2GWfu2RpE//syxAOAyERfc6ekbHEFiy24x5gugCwNDM0QkIOIpArkSBqEiqI+lT4jPXA6p0BJyc7A/ueQIEDN8GVxZ0NRU6hwZWZ+u0vmJAcZH1s/fvWToCKjwqgrRCT5TA2SpWReMQaRbtiwvwoHGQwVTzCMlEnyNn9u7MLAVgshUNiq2C20CCygTEZw56WOpYszR3GtXoW6ht/2WRFEABIUbP/7MsQFgAjAk2OsvQGxFRLo9YYU3I5XmAGmX2GjdKVSyEyfEei2W4xByQeX12Jv+JSUCUNe3dQcxD//+rd/xZysTZIrIiZR7qJWtsem773JLgTX0uaaZAEhq87YWCLAk2QPRDsijCdQMyTfTUASGYWdhh0rvEmDrF/obq13lSbEnO6iu0XtJAY0AlnTooDLWLYz1nXalTIJHLdbYmT/+zLEA4AHVLVPoTyjMJ8D5egwvAIAa4iOYBvORuqckKIjmT0f3wGoJDpymlsoq0IgUcZlalKJoqD63behXSb3dH1aMG7tj51oii6lBlJ0AStbgiTFQn40KM3C3KpNO+tnib+WCg+IpL/ez9P/2v9tCgACxBbaTwBY2euQgIjICwBbIKp9DCz6zvsneDLl1hU6BTvZ5Wj+z/wVV9QI//swxBYABVwfGUM8wlB8giG0EIgOCIelakAcALdhRIwrRYRkcReWf6vb///KypL96vYV11222AVLFlA4Q0hOHgNAKIBOJRUqoJdlVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDSDwxQk0ISZIHgAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",GH=bs(gt,LL),WH=_n.createLock(LL),Fp=new _s;let mV=!1;const Vv=()=>{mV||(WH(),mV=!0)},KH=i=>{Fp.audioBufferProperty.value===null&&(Fp.audioBufferProperty.set(i),Vv())},YH=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Fp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Vv()},gV=gt.decodeAudioData(GH.buffer,KH,YH);gV&&gV.then(i=>{Fp.audioBufferProperty.value===null&&(Fp.audioBufferProperty.set(i),Vv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Vv()});const jH=.05,XH=[1,Math.pow(To.TWELFTH_ROOT_OF_TWO,2),Math.pow(To.TWELFTH_ROOT_OF_TWO,4),Math.pow(To.TWELFTH_ROOT_OF_TWO,5),Math.pow(To.TWELFTH_ROOT_OF_TWO,7),Math.pow(To.TWELFTH_ROOT_OF_TWO,9),Math.pow(To.TWELFTH_ROOT_OF_TWO,11)],QH={detectSoundBounds:i=>{const e=i.length,t=[],n=[];for(let r=0;r<i.numberOfChannels;r++){const a=i.getChannelData(r);t[r]=JH(a,e,jH),n[r]=ZH(a,e)}const s=i.sampleRate;return{soundStart:ie.min(t)/s,soundEnd:ie.max(n)/s}},getMajorScalePlaybackRate:i=>{const e=i%7,t=Math.floor(i/7);return Math.pow(2,t)*XH[e]}},JH=(i,e,t)=>{let n=0,s,r=!1;for(s=0;s<e-1&&!r;s++)i[s]>t&&i[s+1]>i[s]&&(n=s,r=!0);let a=0;for(r=!1,s=n;s>0&&!r;s--){const h=i[s];h<=0&&(a=h===0?s:s+1,r=!0)}let o=0,l=0;for(s=0;s<a;s++)o=Math.max(o,i[s]),l=Math.min(l,i[s]);return a},ZH=(i,e,t)=>{let n=e-1,s=!1,r;for(r=e-1;r>0&&!s;r--)i[r]<=-.05&&i[r-1]<i[r]&&(n=r,s=!0);let a=n;for(s=!1,r=n;r<e-1&&!s;r++)i[r+1]>=0&&(a=r,s=!0);let o=0,l=0;for(r=a;r<e;r++)o=Math.max(o,i[r]),l=Math.min(l,i[r]);return a},ML=new oi(!1);class OL extends oi{constructor(e,t){const n=Ne()({display:null,followPDOMOrder:!1,requireVisible:!0,requirePDOMVisible:!1,requireEnabled:!1,requireInputEnabled:!1},t);super([]),this.listenedNodeSet=new Set,this.node=e,this.display=n.display,this.followPDOMOrder=n.followPDOMOrder,this.requireVisible=n.requireVisible,this.requirePDOMVisible=n.requirePDOMVisible,this.requireEnabled=n.requireEnabled,this.requireInputEnabled=n.requireInputEnabled,this._trailUpdateListener=this.update.bind(this),this.update()}update(){const e=this.display,t=this.followPDOMOrder,n=this.requireVisible,s=this.requirePDOMVisible,r=this.requireEnabled,a=this.requireInputEnabled,o=[],l=new Set,h=new Yi(this.node);(function g(){const v=h.rootNode();if(v.isDisposed||(l.add(v),n&&!v.visible||s&&!v.pdomVisible||r&&!v.enabled||a&&!v.inputEnabled))return;const A=v.getRootedDisplays();let P;e===null?P=A.length>0:typeof e!="function"?P=A.includes(e):P=A.some(e),P&&o.push(h.copy()),(t&&v.pdomParent?[v.pdomParent]:v.parents).forEach(T=>{h.addAncestor(T),g(),h.removeAncestor()})})(),l.forEach(g=>{this.listenedNodeSet.has(g)||this.addNodeListener(g)}),this.listenedNodeSet.forEach(g=>{l.has(g)||this.removeNodeListener(g)});const c=this.value;let f=c.length===o.length;if(f){for(let g=0;g<o.length;g++)if(!c[g].equals(o[g])){f=!1;break}}f||(this.value=o)}addNodeListener(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._trailUpdateListener),e.parentRemovedEmitter.addListener(this._trailUpdateListener),e.rootedDisplayChangedEmitter.addListener(this._trailUpdateListener),e.disposeEmitter.addListener(this._trailUpdateListener),this.followPDOMOrder&&e.pdomParentChangedEmitter.addListener(this._trailUpdateListener),this.requireVisible&&e.visibleProperty.lazyLink(this._trailUpdateListener),this.requirePDOMVisible&&e.pdomVisibleProperty.lazyLink(this._trailUpdateListener),this.requireEnabled&&e.enabledProperty.lazyLink(this._trailUpdateListener),this.requireInputEnabled&&e.inputEnabledProperty.lazyLink(this._trailUpdateListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._trailUpdateListener),e.parentRemovedEmitter.removeListener(this._trailUpdateListener),e.rootedDisplayChangedEmitter.removeListener(this._trailUpdateListener),e.disposeEmitter.removeListener(this._trailUpdateListener),this.followPDOMOrder&&e.pdomParentChangedEmitter.removeListener(this._trailUpdateListener),this.requireVisible&&e.visibleProperty.unlink(this._trailUpdateListener),this.requirePDOMVisible&&e.pdomVisibleProperty.unlink(this._trailUpdateListener),this.requireEnabled&&e.enabledProperty.unlink(this._trailUpdateListener),this.requireInputEnabled&&e.inputEnabledProperty.unlink(this._trailUpdateListener)}dispose(){this.listenedNodeSet.forEach(e=>this.removeNodeListener(e)),super.dispose()}}class $H extends AI{constructor(e,t){const n=new OL(e,t);super([n],s=>s.length>0,t),this.displayedTrailsProperty=n}dispose(){this.displayedTrailsProperty.dispose(),super.dispose()}}const eU=To.DEFAULT_PARAM_CHANGE_TIME_CONSTANT;class NL extends Ef{constructor(e){const t=Ne()({initialOutputLevel:1,audioContext:gt,connectImmediately:!1,sonificationLevel:hl.BASIC,additionalAudioNodes:[],associatedViewNode:null,enabledDuringReset:!1,enabledDuringPhetioStateSetting:!1},e);super(t),this.audioContext=t.audioContext,this._outputLevel=t.initialOutputLevel,this.connectionList=[],this.mainGainNode=this.audioContext.createGain(),this.mainGainNode.gain.setValueAtTime(this._outputLevel,this.audioContext.currentTime);const n=t.associatedViewNode?new $H(t.associatedViewNode):new Qt(!0);this.fullyEnabledProperty=new Dt([io.enabledProperty,this.enabledProperty,ML,n,io.extraSoundEnabledProperty,Yl],(s,r,a,o,l,h)=>s&&r&&o&&(t.sonificationLevel===hl.BASIC||l)&&(!a||t.enabledDuringReset)&&(!h||t.enabledDuringPhetioStateSetting)),t.connectImmediately&&this.mainGainNode.connect(this.audioContext.destination),this.fullyEnabledProperty.link(s=>{const r=s?0:this._outputLevel,a=s?this._outputLevel:0,o=this.audioContext.currentTime;this.mainGainNode.gain.setValueAtTime(r,o),this.mainGainNode.gain.linearRampToValueAtTime(a,this.audioContext.currentTime+To.DEFAULT_LINEAR_GAIN_CHANGE_TIME)}),this.soundSourceDestination=this.mainGainNode;for(let s=t.additionalAudioNodes.length-1;s>=0;s--){const r=t.additionalAudioNodes[s];r.connect(this.soundSourceDestination),this.soundSourceDestination=r}this.disposeEmitter.addListener(()=>{this.fullyEnabledProperty.dispose()})}connect(e){this.mainGainNode.connect(e),this.connectionList.push(e)}disconnect(e){this.mainGainNode.disconnect(e),this.connectionList=ie.without(this.connectionList,e)}isConnectedTo(e){return this.connectionList.includes(e)}setOutputLevel(e,t=eU){if(e!==this._outputLevel){const n=this.audioContext.currentTime;this.fullyEnabledProperty.value&&(this.mainGainNode.gain.cancelScheduledValues(n),t===0?this.mainGainNode.gain.setValueAtTime(e,n):this.audioContext.state==="running"?this.mainGainNode.gain.setTargetAtTime(e,n,t):this.mainGainNode.gain.linearRampToValueAtTime(e,n+To.DEFAULT_LINEAR_GAIN_CHANGE_TIME)),this._outputLevel=e}}set outputLevel(e){this.setOutputLevel(e)}get outputLevel(){return this.getOutputLevel()}getOutputLevel(){return this._outputLevel}get fullyEnabled(){return this.fullyEnabledProperty.value}}const tU=.2,iU=To.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,nU=.1;class Jb extends NL{constructor(e,t){const n=Ne()({loop:!1,trimSilence:!0,initialPlaybackRate:1,initiateWhenDisabled:!1,rateChangesAffectPlayingSounds:!0},t);if(super(n),this.wrappedAudioBuffer=e,this.loop=n.loop,this.rateChangesAffectPlayingSounds=n.rateChangesAffectPlayingSounds,this.initiateWhenDisabled=n.initiateWhenDisabled,this.soundStart=0,this.soundEnd=null,n.trimSilence){const s=r=>{if(r){const a=QH.detectSoundBounds(r);this.soundStart=a.soundStart,this.soundEnd=a.soundEnd,this.wrappedAudioBuffer.audioBufferProperty.unlink(s)}};this.wrappedAudioBuffer.audioBufferProperty.link(s)}this.activeBufferSources=[],this.localGainNode=this.audioContext.createGain(),this.localGainNode.connect(this.soundSourceDestination),this._playbackRate=n.initialPlaybackRate,this.isPlayingProperty=new Qt(!1),this.timeOfDeferredPlayRequest=Number.NEGATIVE_INFINITY,this.audioContextStateChangeListener=s=>{s==="running"&&((this.loop||(Date.now()-this.timeOfDeferredPlayRequest)/1e3<tU)&&this.play(.1),Zo.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener))},this.fullyEnabledProperty.lazyLink(s=>{!this.loop&&!s&&this.stop()}),this.disposeEmitter.addListener(()=>{Zo.hasListener(this.audioContext,this.audioContextStateChangeListener)&&Zo.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener)})}play(e=0){if(this.audioContext.state==="running"&&this.wrappedAudioBuffer.audioBufferProperty.value){const t=this.audioContext.currentTime;if(this.loop&&!this.isPlayingProperty.get()||!this.loop&&(this.fullyEnabled||this.initiateWhenDisabled)){const n=this.audioContext.createBufferSource();n.buffer=this.wrappedAudioBuffer.audioBufferProperty.value,n.loop=this.loop,n.loopStart=this.soundStart,this.soundEnd&&(n.loopEnd=this.soundEnd),this.localGainNode.gain.cancelScheduledValues(t),this.localGainNode.gain.setValueAtTime(1,t),n.connect(this.soundSourceDestination),this.activeBufferSources.push(n),this.loop||(n.onended=()=>{const s=this.activeBufferSources.indexOf(n);s>-1&&this.activeBufferSources.splice(s,1),this.isPlayingProperty.value=this.activeBufferSources.length>0}),n.playbackRate.setValueAtTime(this._playbackRate,t),n.start(t+e,this.soundStart),this.isPlayingProperty.value=!0}}else this.audioContext.state==="suspended"&&(this.timeOfDeferredPlayRequest=Date.now(),Zo.hasListener(this.audioContext,this.audioContextStateChangeListener)||Zo.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener))}stop(e=nU){const t=e>0?e/4.61:To.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,n=this.audioContext.currentTime,s=n+e;this.localGainNode.gain.cancelScheduledValues(n),this.localGainNode.gain.setTargetAtTime(0,n,t),this.activeBufferSources.forEach(r=>{r.stop(s)}),this.activeBufferSources.length=0,this.isPlayingProperty.value=!1,Zo.hasListener(this.audioContext,this.audioContextStateChangeListener)&&Zo.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener)}setPlaybackRate(e,t=iU){if(this.rateChangesAffectPlayingSounds){const n=this.audioContext.currentTime;this.activeBufferSources.forEach(s=>{s.playbackRate.cancelScheduledValues(n),s.playbackRate.setTargetAtTime(e,n,t)})}this._playbackRate=e}getPlaybackRate(){return this._playbackRate}get playbackRate(){return this.getPlaybackRate()}get isPlaying(){return this.isPlayingProperty.value}getNumberOfPlayingInstances(){return this.activeBufferSources.length}}class OS{constructor(e,t){const n=Ne()({soundClipOptions:{},soundManagerOptions:{}},t);this._soundClip=new Jb(e,n.soundClipOptions),io.addSoundGenerator(this._soundClip,n.soundManagerOptions)}play(){this._soundClip.play()}stop(){this._soundClip.stop()}}const Ja={soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}},sU={wrappedAudioBuffer:jc,soundClipPlayerOptions:Ja},Yo=i=>Ut({},Ja,{soundClipOptions:{initialOutputLevel:i}}),gA=new Map,$n={get(i){if(!gA.has(i)){const e=rU.get(i)||sU;gA.set(i,new OS(e.wrappedAudioBuffer,e.soundClipPlayerOptions))}return gA.get(i)}},rU=new Map([["accordionBoxClosed",{wrappedAudioBuffer:xp,soundClipPlayerOptions:Yo(.5)}],["accordionBoxOpened",{wrappedAudioBuffer:Ep,soundClipPlayerOptions:Yo(.5)}],["boundaryReached",{wrappedAudioBuffer:Vp,soundClipPlayerOptions:Yo(.8)}],["checkboxChecked",{wrappedAudioBuffer:kp,soundClipPlayerOptions:Ja}],["checkboxUnchecked",{wrappedAudioBuffer:Cp,soundClipPlayerOptions:Ja}],["erase",{wrappedAudioBuffer:Ip,soundClipPlayerOptions:Yo(.22)}],["generalBoundaryBoop",{wrappedAudioBuffer:Kc,soundClipPlayerOptions:Yo(.2)}],["generalClose",{wrappedAudioBuffer:Mp,soundClipPlayerOptions:Yo(.4)}],["generalOpen",{wrappedAudioBuffer:Op,soundClipPlayerOptions:Yo(.4)}],["generalSoftClick",{wrappedAudioBuffer:Yc,soundClipPlayerOptions:Yo(.2)}],["grab",{wrappedAudioBuffer:Np,soundClipPlayerOptions:Ja}],["pause",{wrappedAudioBuffer:Rp,soundClipPlayerOptions:Ja}],["play",{wrappedAudioBuffer:Bp,soundClipPlayerOptions:Ja}],["pushButton",{wrappedAudioBuffer:Lp,soundClipPlayerOptions:Yo(.5)}],["release",{wrappedAudioBuffer:qp,soundClipPlayerOptions:Ja}],["resetAll",{wrappedAudioBuffer:jc,soundClipPlayerOptions:{soundClipOptions:{initialOutputLevel:.39,enabledDuringReset:!0,enabledDuringPhetioStateSetting:!0},soundManagerOptions:{categoryName:"user-interface"}}}],["softClick",{wrappedAudioBuffer:Dp,soundClipPlayerOptions:Ja}],["stepBackward",{wrappedAudioBuffer:Xc,soundClipPlayerOptions:Ja}],["stepForward",{wrappedAudioBuffer:Qc,soundClipPlayerOptions:Ja}],["switchToLeft",{wrappedAudioBuffer:zp,soundClipPlayerOptions:Yo(.2)}],["switchToRight",{wrappedAudioBuffer:Fp,soundClipPlayerOptions:Yo(.2)}],["toggleOff",{wrappedAudioBuffer:Xc,soundClipPlayerOptions:Ja}],["toggleOn",{wrappedAudioBuffer:Qc,soundClipPlayerOptions:Ja}]]);class Jn extends js{}Jn.IDLE=new Jn;Jn.OVER=new Jn;Jn.PRESSED=new Jn;Jn.enumeration=new Sr(Jn);class NS extends V6{constructor(e){super([e.focusedProperty,e.overProperty,e.isOverOrFocusedProperty,e.looksPressedProperty],(t,n,s,r)=>s&&!r?Jn.OVER:(n||t)&&r?Jn.PRESSED:Jn.IDLE,{valueType:Jn})}}class RL extends Ef{constructor(e){const t=Ne()({startCallback:ie.noop,endCallback:ie.noop,tandem:R.REQUIRED,phetioState:rn.DEFAULT_OPTIONS.phetioState,phetioReadOnly:rn.DEFAULT_OPTIONS.phetioReadOnly,phetioFeatured:rn.DEFAULT_OPTIONS.phetioFeatured},e);t.enabledPropertyOptions=Ut({phetioState:t.phetioState,phetioReadOnly:t.phetioReadOnly,phetioDocumentation:"When disabled, the button is grayed out and cannot be pressed",phetioFeatured:!0},t.enabledPropertyOptions),super(t),this.overProperty=new Qt(!1),this.downProperty=new Qt(!1,{reentrant:!0}),this.pdomClickingProperty=new Qt(!1),this.focusedProperty=new Qt(!1),this.looksPressedProperty=new Qt(!1),this.isOverOrFocusedProperty=new Qt(!1),this.produceSoundEmitter=new kn,this.interrupted=!1,this.listeners=[],this.looksPressedMultilink=null,this.overOrFocusedMultilink=null,this.downProperty.lazyLink(n=>{n?t.startCallback():t.endCallback(this.isOverOrFocusedProperty.get())}),this.enabledProperty.link(n=>{if(!n)for(let s=0;s<this.listeners.length;s++){const r=this.listeners[s];r.interrupt&&r.interrupt()}}),this.disposeButtonModel=()=>{this.overProperty.dispose(),this.downProperty.dispose(),this.pdomClickingProperty.dispose(),this.produceSoundEmitter.dispose(),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.overOrFocusedMultilink&&this.overOrFocusedMultilink.dispose(),this.listeners=[]}}dispose(){this.disposeButtonModel(),super.dispose()}createPressListener(e){e=Ut({canStartPress:()=>this.enabledProperty.value},e);const t=new Fa(e);this.listeners.push(t),t.isPressedProperty.lazyLink(r=>{this.interrupted=t.interrupted,this.downProperty.set(r)}),t.isOverProperty.lazyLink(this.overProperty.set.bind(this.overProperty)),t.isFocusedProperty.lazyLink(this.focusedProperty.set.bind(this.focusedProperty)),t.pdomClickingProperty.lazyLink(this.pdomClickingProperty.set.bind(this.pdomClickingProperty)),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.overOrFocusedMultilink&&this.overOrFocusedMultilink.dispose();const n=this.listeners.map(r=>r.looksPressedProperty);n.push(this.downProperty),this.looksPressedMultilink=Cn.multilinkAny(n,(...r)=>{this.looksPressedProperty.value=ie.reduce(r,(a,o)=>a||o,!1)});const s=this.listeners.map(r=>r.isOverOrFocusedProperty);return this.overOrFocusedMultilink=Cn.multilinkAny(s,(...r)=>{this.isOverOrFocusedProperty.value=ie.reduce(r,(a,o)=>a||o,!1)}),t}}class Zb extends RL{constructor(e){const t=Ne()({fireOnDown:!1,listener:null,interruptListener:null,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:R.REQUIRED,phetioReadOnly:rn.DEFAULT_OPTIONS.phetioReadOnly},e);super(t),this.startEvent=null,this.isFiringProperty=new Qt(!1),this.firedEmitter=new kn({tandem:t.tandem.createTandem("firedEmitter"),phetioDocumentation:"Emits when the button is fired",phetioReadOnly:t.phetioReadOnly,phetioEventType:vi.USER,hasListenerOrderDependencies:!0}),t.interruptListener&&this.firedEmitter.addListener(()=>{t.interruptListener(this.startEvent)}),t.listener!==null&&this.firedEmitter.addListener(t.listener),t.fireOnHold&&(this.timer=new jb({callback:this.fire.bind(this),delay:t.fireOnHoldDelay,interval:t.fireOnHoldInterval}));const n=r=>{if(r)this.enabledProperty.get()&&(this.startEvent=self.phet?.joist?.display?._input?.currentSceneryEvent||null,t.fireOnDown&&this.fire(),this.timer&&this.timer.start(),(t.fireOnDown||this.timer)&&this.produceSoundEmitter.emit());else{const a=!t.fireOnDown&&(this.overProperty.get()||this.focusedProperty.get())&&this.enabledProperty.get()&&!this.interrupted;this.timer?this.timer.stop(a):a&&(this.produceSoundEmitter.emit(),this.fire())}};this.downProperty.link(n);const s=r=>{!r&&this.timer&&this.timer.stop(!1)};this.enabledProperty.link(s),this.disposePushButtonModel=()=>{this.isFiringProperty.value=!1,this.isFiringProperty.dispose(),this.firedEmitter.dispose(),this.downProperty.unlink(n),this.enabledProperty.unlink(s),this.timer&&(this.timer.dispose(),this.timer=null)}}dispose(){this.disposePushButtonModel(),super.dispose()}addListener(e){this.firedEmitter.addListener(e)}removeListener(e){this.firedEmitter.removeListener(e)}fire(){this.isFiringProperty.value=!0,this.firedEmitter.emit(),this.isFiringProperty.value=!1}}class aU extends Error{constructor(){super("CouldNotYetDeserializeError")}}const yA=new ea,BL=i=>{const e=i;return yA.has(e)||yA.set(e,new ui(`ReferenceIO<${i.typeName}>`,{isValidValue:t=>qn.isValueValid(t,i.validator),documentation:"Uses reference identity for serializing and deserializing, and validates based on its parameter PhET-iO Type.",parameterTypes:[i],toStateObject(t){return{phetioID:t.tandem.phetioID}},stateSchema:{phetioID:xi},fromStateObject(t){if(phet.phetio.phetioEngine.hasPhetioObject(t.phetioID))return phet.phetio.phetioEngine.getPhetioElement(t.phetioID);throw new aU},applyState(t){}})),yA.get(e)},rg={isColorDef(i){return i===null||typeof i=="string"||i instanceof ct||ai(i)&&(i.value===null||typeof i.value=="string"||i.value instanceof ct)},scenerySerialize(i){return i===null?"null":i instanceof ct?`'${i.toCSS()}'`:typeof i=="string"?`'${i}'`:rg.scenerySerialize(i.value)},ColorDefIO:null};rg.ColorDefIO=new ui("ColorDefIO",{isValidValue:rg.isColorDef,supertype:fi(Jm([xi,ct.ColorIO,BL(Mt.PropertyIO(fi(Jm([xi,ct.ColorIO]))))]))});const xm=new ct("transparent");class ag{constructor(e,t,n){this.lastColor=null,this.initialize(e,t,n)}isActiveSVGGradientStop(){return!!this.svgGradient}initialize(e,t,n){return this.svgGradient=e,this.color=n,this.ratio=t,this.svgElement=this.svgElement||document.createElementNS(Kn,"stop"),this.svgElement.setAttribute("offset",""+t),this.dirty=!0,this.update(),this.propertyListener=this.propertyListener||this.onPropertyChange.bind(this),this.colorListener=this.colorListener||this.markDirty.bind(this),ai(n)?(n.lazyLink(this.propertyListener),n.value instanceof ct&&(n.value.changeEmitter.addListener(this.colorListener),this.lastColor=n.value)):n instanceof ct&&n.changeEmitter.addListener(this.colorListener),this}onPropertyChange(e,t){this.lastColor!==null&&(this.lastColor.changeEmitter.removeListener(this.colorListener),this.lastColor=null),e instanceof ct&&(e.changeEmitter.addListener(this.colorListener),this.lastColor=e),this.markDirty()}markDirty(){this.dirty=!0,this.svgGradient.markDirty()}update(){if(!this.dirty)return;this.dirty=!1;let e=this.color;ai(e)&&(e=e.value),e===null&&(e="transparent"),typeof e=="string"?xm.setCSS(e):xm.set(e);const t=`stop-opacity: ${xm.a.toFixed(20)};`;xm.alpha=1;const n=`stop-color: ${xm.toCSS()};`;this.svgElement.setAttribute("style",`${n} ${t}`)}dispose(){const e=this.color;this.lastColor&&(this.lastColor.changeEmitter.removeListener(this.colorListener),this.lastColor=null),ai(e)?e.hasListener(this.propertyListener)&&e.unlink(this.propertyListener):e instanceof ct&&e.changeEmitter.removeListener(this.colorListener),this.color=null,this.svgGradient=null,this.freeToPool()}freeToPool(){ag.pool.freeToPool(this)}}ag.pool=new us(ag);class qL{constructor(e,t){this.initialize(e,t)}isActiveSVGGradient(){return!!this.svgBlock}initialize(e,t){this.svgBlock=e,this.gradient=t;const n=this.definition!==void 0;this.definition=this.definition||this.createDefinition(),n||this.definition.setAttribute("gradientUnits","userSpaceOnUse"),t.transformMatrix?this.definition.setAttribute("gradientTransform",t.transformMatrix.getSVGTransform()):this.definition.removeAttribute("gradientTransform");const s=t.getSVGStops();this.stops=zi(this.stops);for(let r=0;r<s.length;r++){const a=new ag(this,s[r].ratio,s[r].color);this.stops.push(a),this.definition.appendChild(a.svgElement)}this.dirty=!1}markDirty(){if(!this.dirty){const e=this;this.dirty=!0,e.svgBlock.markDirtyGradient(this)}}update(){if(this.dirty){this.dirty=!1;for(let e=0;e<this.stops.length;e++)this.stops[e].update()}}dispose(){for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this.definition.removeChild(t.svgElement),t.dispose()}zi(this.stops),this.svgBlock=null,this.gradient=null,this.freeToPool()}}class og extends qL{constructor(e,t){super(e,t)}initialize(e,t){super.initialize(e,t);const n=t;return this.definition.setAttribute("x1",""+n.start.x),this.definition.setAttribute("y1",""+n.start.y),this.definition.setAttribute("x2",""+n.end.x),this.definition.setAttribute("y2",""+n.end.y),this}createDefinition(){return document.createElementNS(Kn,"linearGradient")}freeToPool(){og.pool.freeToPool(this)}}og.pool=new us(og);class il extends ll{constructor(e,t,n,s){super(),this.start=new Oe(e,t),this.end=new Oe(n,s)}createCanvasGradient(){return Pp.createLinearGradient(this.start.x,this.start.y,this.end.x,this.end.y)}createSVGPaint(e){return og.pool.create(e,this)}toString(){let e=`LinearGradient( ${this.start.x}, ${this.start.y}, ${this.end.x}, ${this.end.y} )`;return ie.each(this.stops,t=>{e+=`.addColorStop( ${t.ratio}, ${rg.scenerySerialize(t.color)} )`}),e}}il.prototype.isLinearGradient=!0;const kv={isPaintDef(i){return i===null||typeof i=="string"||i instanceof ct||i instanceof Ul||ai(i)&&(i.value===null||typeof i.value=="string"||i.value instanceof ct)},toColor(i){if(typeof i=="string")return new ct(i);if(i instanceof ct)return i.copy();if(ai(i))return kv.toColor(i.value);if(i instanceof ll){let e=ct.TRANSPARENT;const t=0;return i.stops.forEach(n=>{e=e.blend(kv.toColor(n.color),1/(t+1))}),e}return ct.TRANSPARENT}};class Rs extends Mt{constructor(e,t){const n=kv.toColor(e),s=Ne()({luminanceFactor:0,valueComparisonStrategy:"equalsFunction"},t);super(n,s),this._paint=null,this._luminanceFactor=s.luminanceFactor,this._changeListener=this.invalidatePaint.bind(this),this._paintObserver=new eg(this._changeListener),this.setPaint(e)}setPaint(e){this._paint=e,this._paintObserver.setPrimary(e)}set paint(e){this.setPaint(e)}get paint(){return this.getPaint()}getPaint(){return this._paint}setLuminanceFactor(e){this.luminanceFactor!==e&&(this._luminanceFactor=e,this.invalidatePaint())}set luminanceFactor(e){this.setLuminanceFactor(e)}get luminanceFactor(){return this.getLuminanceFactor()}getLuminanceFactor(){return this._luminanceFactor}invalidatePaint(){this.value=kv.toColor(this._paint).colorUtilsBrightness(this._luminanceFactor)}dispose(){this.paint=null,super.dispose()}}let oU=1;class yV{constructor(){this.id=`filter${oU++}`,this.filterRegionPercentageIncrease=0}isDOMCompatible(){return!1}isSVGCompatible(){return!1}isCanvasCompatible(){return mi.canvasFilter?this.isDOMCompatible():!1}isWebGLCompatible(){return!1}toString(){return this.id}static applyColorMatrix(e,t,n,s){const r=document.createElementNS(Kn,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values",e),r.setAttribute("in",n),r.setAttribute("color-interpolation-filters","sRGB"),s&&r.setAttribute("result",s),t.appendChild(r)}}const lU=Qi.supportsImageDataCanvasFilter();class RS extends yV{constructor(e,t,n,s,r,a,o,l,h,c,f,g,v,A,P,w,T,D,M,B){super(),this.m00=e,this.m01=t,this.m02=n,this.m03=s,this.m04=r,this.m10=a,this.m11=o,this.m12=l,this.m13=h,this.m14=c,this.m20=f,this.m21=g,this.m22=v,this.m23=A,this.m24=P,this.m30=w,this.m31=T,this.m32=D,this.m33=M,this.m34=B}applySVGFilter(e,t,n){yV.applyColorMatrix(`${En(this.m00)} ${En(this.m01)} ${En(this.m02)} ${En(this.m03)} ${En(this.m04)} ${En(this.m10)} ${En(this.m11)} ${En(this.m12)} ${En(this.m13)} ${En(this.m14)} ${En(this.m20)} ${En(this.m21)} ${En(this.m22)} ${En(this.m23)} ${En(this.m24)} ${En(this.m30)} ${En(this.m31)} ${En(this.m32)} ${En(this.m33)} ${En(this.m34)}`,e,t,n)}applyCanvasFilter(e){const t=e.canvas.width,n=e.canvas.height,s=e.context.getImageData(0,0,t,n),r=t*n;for(let a=0;a<r;a++){const o=a*4;{const h=Math.pow(s.data[o+0]/255,1.45),c=Math.pow(s.data[o+1]/255,1.45),f=Math.pow(s.data[o+2]/255,1.45),g=Math.pow(s.data[o+3]/255,1.45);s.data[o+0]=255*Math.pow(h*this.m00+c*this.m01+f*this.m02+g*this.m03+this.m04,1/1.45),s.data[o+1]=255*Math.pow(h*this.m10+c*this.m11+f*this.m12+g*this.m13+this.m14,1/1.45),s.data[o+2]=255*Math.pow(h*this.m20+c*this.m21+f*this.m22+g*this.m23+this.m24,1/1.45),s.data[o+3]=255*Math.pow(h*this.m30+c*this.m31+f*this.m32+g*this.m33+this.m34,1/1.45)}}e.context.putImageData(s,0,0)}isSVGCompatible(){return!0}isCanvasCompatible(){return super.isCanvasCompatible()||lU}getCSSFilterString(){throw new Error("unimplemented")}}class U2 extends RS{constructor(e){super(e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`brightness(${En(this.amount)})`}isDOMCompatible(){return!0}}U2.BLACKEN=new U2(0);class G2 extends RS{constructor(e){super(e,0,0,0,-(.5*e)+.5,0,e,0,0,-(.5*e)+.5,0,0,e,0,-(.5*e)+.5,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`contrast(${En(this.amount)})`}isDOMCompatible(){return!0}}G2.GRAY=new G2(0);class W2 extends RS{constructor(e=1){const t=1-e;super(.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`grayscale(${En(this.amount)})`}isDOMCompatible(){return!0}}W2.FULL=new W2(1);const hU=["alignBounds","align","xAlign","yAlign","margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","group"],zL=md(Ge);class jl extends zL{constructor(e,t){const n=Ne()({children:[e]},t),s={sizable:!1};super(s),this._xSet=!1,this._ySet=!1,this._contentBoundsListener=ie.noop,this._content=e,this._alignBounds=null,this._xAlign="center",this._yAlign="center",this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._group=null,this._contentBoundsListener=this.invalidateAlignment.bind(this),this._alignBoundsProperty=null,this._alignBoundsPropertyListener=ie.noop,Na(n,["alignBounds"],["alignBoundsProperty"]),t?.alignBoundsProperty&&(this._alignBoundsProperty=t.alignBoundsProperty,n.alignBounds=this._alignBoundsProperty.value,this._alignBoundsPropertyListener=r=>{this.alignBounds=r},this._alignBoundsProperty.lazyLink(this._alignBoundsPropertyListener)),this.localBounds=new pt(0,0,0,0),this.constraint=new uU(this,e),this._content.boundsProperty.link(this._contentBoundsListener),Fc(this._content)&&this._content.minimumWidthProperty.link(this._contentBoundsListener),jm(this._content)&&this._content.minimumHeightProperty.link(this._contentBoundsListener),this.mutate(n),Cn.multilink([this.localPreferredWidthProperty,this.localPreferredHeightProperty],(r,a)=>{if(r!==null||a!==null){const o=this._alignBounds||new pt(0,0,0,0);r&&(o.minX=0,o.maxX=r,this._xSet=!0),a&&(o.minY=0,o.maxY=a,this._ySet=!0),this._alignBounds=o,this.constraint.updateLayout()}})}invalidateAlignment(){this._group&&this._group.onAlignBoxResized(this),this.constraint.updateLayout()}setAlignBounds(e){return this._xSet=!0,this._ySet=!0,this._alignBounds!==e&&(!e||!this._alignBounds||!e.equals(this._alignBounds))&&(this._alignBounds=e,this.constraint.updateLayout()),this}set alignBounds(e){this.setAlignBounds(e)}get alignBounds(){return this.getAlignBounds()}getAlignBounds(){return this._alignBounds}setGroup(e){return this._group!==e&&(this._group&&this._group.removeAlignBox(this),this._group=e,this._group&&this._group.addAlignBox(this)),this}set group(e){this.setGroup(e)}get group(){return this.getGroup()}getGroup(){return this._group}setXAlign(e){return this._xAlign!==e&&(this._xAlign=e,this.invalidateAlignment()),this}set xAlign(e){this.setXAlign(e)}get xAlign(){return this.getXAlign()}getXAlign(){return this._xAlign}setYAlign(e){return this._yAlign!==e&&(this._yAlign=e,this.invalidateAlignment()),this}set yAlign(e){this.setYAlign(e)}get yAlign(){return this.getYAlign()}getYAlign(){return this._yAlign}getAlign(){return this._xAlign}setAlign(e){return this.setXAlign(e),this.setYAlign(e),this}get align(){return this.getAlign()}set align(e){this.setAlign(e)}setMargin(e){return(this._leftMargin!==e||this._rightMargin!==e||this._topMargin!==e||this._bottomMargin!==e)&&(this._leftMargin=this._rightMargin=this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}set margin(e){this.setMargin(e)}get margin(){return this.getMargin()}getMargin(){return this._leftMargin}setXMargin(e){return(this._leftMargin!==e||this._rightMargin!==e)&&(this._leftMargin=this._rightMargin=e,this.invalidateAlignment()),this}set xMargin(e){this.setXMargin(e)}get xMargin(){return this.getXMargin()}getXMargin(){return this._leftMargin}setYMargin(e){return(this._topMargin!==e||this._bottomMargin!==e)&&(this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}set yMargin(e){this.setYMargin(e)}get yMargin(){return this.getYMargin()}getYMargin(){return this._topMargin}setLeftMargin(e){return this._leftMargin!==e&&(this._leftMargin=e,this.invalidateAlignment()),this}set leftMargin(e){this.setLeftMargin(e)}get leftMargin(){return this.getLeftMargin()}getLeftMargin(){return this._leftMargin}setRightMargin(e){return this._rightMargin!==e&&(this._rightMargin=e,this.invalidateAlignment()),this}set rightMargin(e){this.setRightMargin(e)}get rightMargin(){return this.getRightMargin()}getRightMargin(){return this._rightMargin}setTopMargin(e){return this._topMargin!==e&&(this._topMargin=e,this.invalidateAlignment()),this}set topMargin(e){this.setTopMargin(e)}get topMargin(){return this.getTopMargin()}getTopMargin(){return this._topMargin}setBottomMargin(e){return this._bottomMargin!==e&&(this._bottomMargin=e,this.invalidateAlignment()),this}set bottomMargin(e){this.setBottomMargin(e)}get bottomMargin(){return this.getBottomMargin()}getBottomMargin(){return this._bottomMargin}getContent(){return this._content}get content(){return this.getContent()}getContentBounds(){const e=this._content.bounds;return new pt(e.left-this._leftMargin,e.top-this._topMargin,e.right+this._rightMargin,e.bottom+this._bottomMargin)}getMinimumWidth(){return(this._xAlign==="stretch"&&qh(this._content)?this._content.minimumWidth??0:this._content.width)+this._leftMargin+this._rightMargin}getMinimumHeight(){return(this._yAlign==="stretch"&&Ym(this._content)?this._content.minimumHeight??0:this._content.height)+this._topMargin+this._bottomMargin}setAdjustedLocalBounds(e){if(this._xSet&&this._ySet)this.localBounds=e;else if(this._xSet){const t=this.getContentBounds();this.localBounds=new pt(e.minX,t.minY,e.maxX,t.maxY)}else if(this._ySet){const t=this.getContentBounds();this.localBounds=new pt(t.minX,e.minY,t.maxX,e.maxY)}else this.localBounds=this.getContentBounds()}dispose(){this._alignBoundsProperty&&this._alignBoundsProperty.unlink(this._alignBoundsPropertyListener),this._content.boundsProperty.unlink(this._contentBoundsListener),Fc(this._content)&&this._content.minimumWidthProperty.unlink(this._contentBoundsListener),jm(this._content)&&this._content.minimumHeightProperty.unlink(this._contentBoundsListener),this._content=new Ge,this.group=null,this.constraint.dispose(),super.dispose()}mutate(e){return super.mutate(e)}}class uU extends Oo{constructor(e,t){super(e),this.alignBox=e,this.content=t,this.addNode(t),e.isWidthResizableProperty.lazyLink(this._updateLayoutListener),e.isHeightResizableProperty.lazyLink(this._updateLayoutListener)}updateProperty(e,t){const n=this.content[e],s=this.alignBox.localBounds[e]+t;Math.abs(n-s)>1e-5&&(this.content[e]=s)}layout(){super.layout();const e=this.alignBox,t=this.content;if(!t.bounds.isValid())return;const n=e.leftMargin+e.rightMargin,s=e.topMargin+e.bottomMargin;if(e.alignBounds!==null)e.setAdjustedLocalBounds(e.alignBounds);else{const o=t.width+n,l=t.height+s;e.setAdjustedLocalBounds(new pt(0,0,o,l))}const r=isFinite(t.width)?(qh(t)?t.minimumWidth||0:t.width)+n:null,a=isFinite(t.height)?(Ym(t)?t.minimumHeight||0:t.height)+s:null;t.localBounds.isEmpty()||(e.xAlign==="center"?this.updateProperty("centerX",(e.leftMargin-e.rightMargin)/2):e.xAlign==="left"?this.updateProperty("left",e.leftMargin):e.xAlign==="right"?this.updateProperty("right",-e.rightMargin):e.xAlign==="stretch"&&(t.preferredWidth=e.localWidth-e.leftMargin-e.rightMargin,this.updateProperty("left",e.leftMargin)),e.yAlign==="center"?this.updateProperty("centerY",(e.topMargin-e.bottomMargin)/2):e.yAlign==="top"?this.updateProperty("top",e.topMargin):e.yAlign==="bottom"?this.updateProperty("bottom",-e.bottomMargin):e.yAlign==="stretch"&&(t.preferredHeight=e.localHeight-e.topMargin-e.bottomMargin,this.updateProperty("top",e.topMargin))),e.localMinimumWidth=e.widthSizable?r:e.localWidth,e.localMinimumHeight=e.heightSizable?a:e.localHeight}}jl.prototype._mutatorKeys=hU.concat(zL.prototype._mutatorKeys);const K2={LIGHT_BLUE:new ct(153,206,255),LIGHT_GRAY:new ct(220,220,220)},cU=new G2(.7),dU=new U2(1.2);class rh extends md(ys(Ge)){constructor(e,t,n,s){const r=Ne()({content:null,xMargin:10,yMargin:5,xAlign:"center",yAlign:"center",xContentOffset:0,yContentOffset:0,baseColor:K2.LIGHT_BLUE,cursor:"pointer",buttonAppearanceStrategy:rh.FlatAppearanceStrategy,buttonAppearanceStrategyOptions:{},contentAppearanceStrategy:null,contentAppearanceStrategyOptions:{},enabledAppearanceStrategy:(c,f,g,v)=>{g.filters=c?[]:[cU,dU],v&&(v.filters=c?[]:[W2.FULL],v.opacity=c?1:Ha.DISABLED_OPACITY)},disabledColor:K2.LIGHT_GRAY,tagName:"button",tandemNameSuffix:"Button",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},s);r.listenerOptions=Ut({tandem:r.tandem?.createTandem("pressListener")},r.listenerOptions),r.enabledProperty=e.enabledProperty,super(),this.contentContainer=null,this.layoutSizeProperty=new oi(new ji(0,0)),this.content=r.content,this.buttonModel=e,this._settableBaseColorProperty=new Rs(r.baseColor),this._disabledColorProperty=new Rs(r.disabledColor),this.baseColorProperty=new Dt([this._settableBaseColorProperty,this.enabledProperty,this._disabledColorProperty],(c,f,g)=>f?c:g),this._pressListener=e.createPressListener(r.listenerOptions),this.addInputListener(this._pressListener),t.fill=this.baseColorProperty,this.addChild(t);const a=new r.buttonAppearanceStrategy(t,n,this.baseColorProperty,r.buttonAppearanceStrategyOptions);let o;r.contentAppearanceStrategy&&r.content&&(o=new r.contentAppearanceStrategy(r.content,n,r.contentAppearanceStrategyOptions)),this.maxLineWidth=a.maxLineWidth;let l=null,h=null;r.content&&(this.contentContainer=new Ge({children:[r.content],pickable:!1}),l=new jl(this.contentContainer,{xAlign:r.xAlign,yAlign:r.yAlign,leftMargin:r.xMargin+r.xContentOffset,rightMargin:r.xMargin-r.xContentOffset,topMargin:r.yMargin+r.yContentOffset,bottomMargin:r.yMargin-r.yContentOffset}),h=Cn.multilink([t.boundsProperty,this.layoutSizeProperty],(c,f)=>{f.width>0&&f.height>0&&(l.alignBounds=pt.point(c.center).dilatedXY(f.width/2,f.height/2))}),this.addChild(l)),this.mutate(r),this.enabledProperty.link(c=>r.enabledAppearanceStrategy(c,this,t,l)),this.disposeButtonNode=()=>{l&&l.dispose(),h&&h.dispose(),a.dispose&&a.dispose(),o&&o.dispose&&o.dispose(),this._pressListener.dispose(),this.baseColorProperty.dispose(),this._settableBaseColorProperty.dispose(),this._disabledColorProperty.dispose()}}dispose(){this.disposeButtonNode(),super.dispose()}setBaseColor(e){this._settableBaseColorProperty.paint=e}set baseColor(e){this.setBaseColor(e)}get baseColor(){return this.getBaseColor()}getBaseColor(){return this._settableBaseColorProperty.paint}pdomClick(){this._pressListener.click(null)}}class pU{constructor(e,t,n,s){const r=new Rs(n,{luminanceFactor:.4}),a=new Rs(n,{luminanceFactor:-.4}),o=n,l=r,h=a,c=Ut({stroke:a},s),f=typeof c.lineWidth=="number"?c.lineWidth:1;e.stroke=c.stroke||a,e.lineWidth=f,this.maxLineWidth=e.hasStroke()?f:0,e.cachedPaints=[o,l,h];function g(v){switch(v){case Jn.IDLE:e.fill=o;break;case Jn.OVER:e.fill=l;break;case Jn.PRESSED:e.fill=h;break;default:throw new Error(`unsupported interactionState: ${v}`)}}t.link(g),this.disposeFlatAppearanceStrategy=()=>{t.hasListener(g)&&t.unlink(g),r.dispose(),a.dispose()}}dispose(){this.disposeFlatAppearanceStrategy()}}rh.FlatAppearanceStrategy=pU;const FL=7,HL=7,Cv=3;class c0 extends rh{constructor(e,t,n){let s=Ne()({size:null,minWidth:HL+Cv,minHeight:FL+Cv,xMargin:8,yMargin:5,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,touchAreaXShift:0,touchAreaYShift:0,mouseAreaXShift:0,mouseAreaYShift:0,stroke:null,lineWidth:.5,cornerRadius:4,leftTopCornerRadius:null,rightTopCornerRadius:null,leftBottomCornerRadius:null,rightBottomCornerRadius:null,buttonAppearanceStrategy:c0.ThreeDAppearanceStrategy},n);s.content,s.size,s.buttonAppearanceStrategyOptions||(s.buttonAppearanceStrategyOptions={stroke:s.stroke,lineWidth:s.lineWidth});const r=new bi(null),a=ie.pick(s,Ge.REQUIRES_BOUNDS_OPTION_KEYS);s=ie.omit(s,Ge.REQUIRES_BOUNDS_OPTION_KEYS),super(e,r,t,s),this.buttonNodeConstraint=new gU(this,this.layoutSizeProperty,{content:s.content??null,size:s.size,buttonBackground:r,buttonBackgroundOptions:s,minWidth:s.minWidth,minHeight:s.minHeight,xMargin:s.xMargin,yMargin:s.yMargin,maxLineWidth:this.maxLineWidth,touchAreaXDilation:s.touchAreaXDilation,touchAreaYDilation:s.touchAreaYDilation,touchAreaXShift:s.touchAreaXShift,touchAreaYShift:s.touchAreaYShift,mouseAreaXDilation:s.mouseAreaXDilation,mouseAreaYDilation:s.mouseAreaYDilation,mouseAreaXShift:s.mouseAreaXShift,mouseAreaYShift:s.mouseAreaYShift}),this.addDisposable(this.buttonNodeConstraint),this.mutate(a)}}function fU(i,e,t){const n=Math.min(i/2,e/2);return zt.roundedRectangleWithRadii(0,0,i,e,{topLeft:Math.min(n,t.leftTopCornerRadius!==null?t.leftTopCornerRadius:t.cornerRadius),topRight:Math.min(n,t.rightTopCornerRadius!==null?t.rightTopCornerRadius:t.cornerRadius),bottomLeft:Math.min(n,t.leftBottomCornerRadius!==null?t.leftBottomCornerRadius:t.cornerRadius),bottomRight:Math.min(n,t.rightBottomCornerRadius!==null?t.rightBottomCornerRadius:t.cornerRadius)})}let mU=class{constructor(e,t,n,s){const r=s&&s.stroke?s.stroke:new Rs(n,{luminanceFactor:-.4}),a=s&&s.lineWidth!==void 0?s.lineWidth:.5,o=Ne()({stroke:r,lineWidth:a,overStroke:r,overLineWidth:a,overFill:n,overButtonOpacity:1,selectedStroke:r,selectedLineWidth:a,selectedButtonOpacity:1,deselectedStroke:r,deselectedFill:null,deselectedLineWidth:a,deselectedButtonOpacity:1},s),l=new Rs(n,{luminanceFactor:.7}),h=new Rs(n,{luminanceFactor:.5}),c=new Rs(n,{luminanceFactor:.2}),f=new Rs(n,{luminanceFactor:-.3}),g=new Rs(n,{luminanceFactor:-.4}),v=new Rs(n,{luminanceFactor:-.5}),A=new Dt([n],M=>M.withAlpha(0)),P=new ct(255,255,255,.7),w=new bi(null,{stroke:o.stroke,lineWidth:o.lineWidth,pickable:!1});e.addChild(w),this.maxLineWidth=typeof o.lineWidth=="number"?o.lineWidth:0;let T;const D=()=>{if(!e.shape)return;const M=e.shape.bounds.width,B=e.shape.bounds.height;w.shape=e.shape;const O=Math.min(FL/B,1),x=Math.max(1-Cv/B,0),Z=Math.min(HL/M,1),de=Math.max(1-Cv/M,0),$=new il(0,0,0,B).addColorStop(0,l).addColorStop(O,n).addColorStop(x,n).addColorStop(1,v),me=new il(0,0,M,0).addColorStop(0,P).addColorStop(Z,A).addColorStop(de,A).addColorStop(1,v),ue=new il(0,0,0,B).addColorStop(0,l).addColorStop(O,h).addColorStop(x,h).addColorStop(1,v),Se=new il(0,0,M,0).addColorStop(0,P).addColorStop(Z/2,new ct(255,255,255,0)).addColorStop(de,A).addColorStop(1,f),Te=new il(0,0,0,B).addColorStop(0,l).addColorStop(O*.67,f).addColorStop(x,c).addColorStop(1,v);e.cachedPaints=[$,ue,Te],w.cachedPaints=[me,Se],T&&t.unlink(T),T=Re=>{switch(Re){case Jn.IDLE:e.fill=o.deselectedFill||$,e.stroke=o.deselectedStroke,e.lineWidth=o.deselectedLineWidth,e.opacity=o.deselectedButtonOpacity,w.fill=me,w.opacity=o.deselectedButtonOpacity;break;case Jn.OVER:e.fill=ue,e.stroke=o.overStroke,e.lineWidth=o.overLineWidth,e.opacity=o.overButtonOpacity,w.fill=Se,w.opacity=o.overButtonOpacity;break;case Jn.PRESSED:e.fill=Te,e.stroke=o.selectedStroke,e.lineWidth=o.selectedLineWidth,e.opacity=o.selectedButtonOpacity,w.fill=Se,w.opacity=o.selectedButtonOpacity;break;default:throw new Error(`unsupported interactionState: ${Re}`)}},t.link(T)};e.selfBoundsProperty.link(D),this.disposeThreeDAppearanceStrategy=()=>{e.selfBoundsProperty.unlink(D),t.hasListener(T)&&t.unlink(T),l.dispose(),h.dispose(),c.dispose(),f.dispose(),g.dispose(),v.dispose(),A.dispose()}}dispose(){this.disposeThreeDAppearanceStrategy()}};c0.ThreeDAppearanceStrategy=mU;class gU extends Oo{constructor(e,t,n){super(e),this.buttonNode=e,this.layoutSizeProperty=t,this.isFirstLayout=!0,this.lastLocalWidth=0,this.lastLocalHeight=0,this.options=n,this.buttonNode.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.options.content&&this.addNode(this.options.content),this.layout()}layout(){super.layout();const e=this.buttonNode,t=this.options.content,n=t?this.createLayoutProxy(t):null;if(!!t!=!!n)return;const s=e.widthSizable,r=e.heightSizable;let a=n?n.minimumWidth+this.options.xMargin*2:0,o=n?n.minimumHeight+this.options.yMargin*2:0;this.options.size&&(a=this.options.size.width,o=this.options.size.height),this.options.minWidth&&(a=Math.max(this.options.minWidth+this.options.maxLineWidth,a)),this.options.minHeight&&(o=Math.max(this.options.minHeight+this.options.maxLineWidth,o));const l=this.isFirstLayout||s?a:e.localMinimumWidth,h=this.isFirstLayout||r?o:e.localMinimumHeight;if(this.lastLocalWidth=this.isFirstLayout||s?Math.max(l,s?e.localPreferredWidth??0:0):this.lastLocalWidth,this.lastLocalHeight=this.isFirstLayout||r?Math.max(h,r?e.localPreferredHeight??0:0):this.lastLocalHeight,(this.isFirstLayout||s||r)&&(this.options.buttonBackground.shape=fU((s?this.lastLocalWidth:l)-this.options.maxLineWidth,(r?this.lastLocalHeight:h)-this.options.maxLineWidth,this.options.buttonBackgroundOptions),this.buttonNode.touchArea=this.options.buttonBackground.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation).shiftedXY(this.options.touchAreaXShift,this.options.touchAreaYShift),this.buttonNode.mouseArea=this.options.buttonBackground.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation).shiftedXY(this.options.mouseAreaXShift,this.options.mouseAreaYShift)),n){const c=this.lastLocalWidth-this.options.xMargin*2,f=this.lastLocalHeight-this.options.yMargin*2;if(n.preferredWidth=c,n.preferredHeight=f,this.options.size){const g=this.buttonNode.contentContainer;g.maxWidth=c,g.maxHeight=f}}this.isFirstLayout=!1,this.layoutSizeProperty.value=new ji(this.lastLocalWidth,this.lastLocalHeight),e.localMinimumWidth=l,e.localMinimumHeight=h,n&&n.dispose()}dispose(){this.buttonNode.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.unlink(this._updateLayoutListener),super.dispose()}}class Lf extends c0{constructor(e){const t=Ne()({soundPlayer:$n.get("pushButton"),tandem:R.REQUIRED,listenerOptions:{tandem:R.OPT_OUT}},e),n=t.listener,s=ie.omit(t,["listener"]),r=new Zb(s);super(r,new NS(r),s),this.pushButtonModel=r,n&&this.addListener(n);const a=()=>{t.soundPlayer.play()};r.produceSoundEmitter.addListener(a),this.disposeRectangularPushButton=function(){r.produceSoundEmitter.removeListener(a),r.dispose()}}dispose(){super.dispose(),this.disposeRectangularPushButton()}addListener(e){this.pushButtonModel.addListener(e)}removeListener(e){this.pushButtonModel.removeListener(e)}}new ct(0,200,0);const yU=new ct(255,85,0);new ct(0,135,0);const vU=new ct(106,206,245),bU=new ct(254,225,5),Hp={ACCELERATION:new ct(255,255,50),APPLIED_FORCE:new ct(236,153,55),BUTTON_YELLOW:bU,ELASTIC_POTENTIAL_ENERGY:new ct(0,204,255),GRAVITATIONAL_FORCE:new ct(50,130,215),GRAVITATIONAL_POTENTIAL_ENERGY:new ct(55,130,215),IMAGINARY_PART:new ct(153,51,102),KINETIC_ENERGY:new ct(30,200,45),MOMENTUM:new ct(50,50,255),NORMAL_FORCE:new ct(255,235,0),PHET_LOGO_BLUE:vU,POSITION:ct.BLUE,REAL_PART:new ct(255,153,0),RED_COLORBLIND:yU,RESET_ALL_BUTTON_BASE_COLOR:new ct(247,151,34),TOTAL_ENERGY:new ct(180,180,0),VELOCITY:new ct(50,255,50),WALL_FORCE:new ct(153,51,0),SCREEN_ICON_FRAME:"#dddddd"};class _U extends Lf{constructor(e){const t=Ne()({iconLength:16,pathOptions:{stroke:"white",lineWidth:2.5,lineCap:"round"},baseColor:Hp.RED_COLORBLIND,xMargin:4,yMargin:4,soundPlayer:$n.get("generalClose"),accessibleName:VE,voicingNameResponse:VE},e),n=new zt().moveTo(-t.iconLength/2,-t.iconLength/2).lineTo(t.iconLength/2,t.iconLength/2).moveTo(t.iconLength/2,-t.iconLength/2).lineTo(-t.iconLength/2,t.iconLength/2);t.content=new bi(n,t.pathOptions),super(t)}}const Du=i=>{if(i instanceof kt||i instanceof pi)return i.stringProperty;if(i.children)for(const e of i.children){const t=Du(e);if(t)return t}return null};class Ai extends sh{constructor(e){super(Ne()({orientation:"vertical"},e))}onFlowBoxChildInserted(e,t){super.onFlowBoxChildInserted(e,t)}mutate(e){return super.mutate(e)}}const _y="?";class $b{constructor(e){const t=Ne()({modifierKeys:[],ignoredModifierKeys:[]},e);this.key=t.key,this.modifierKeys=t.modifierKeys,this.ignoredModifierKeys=t.ignoredModifierKeys}getHotkeyString(){return[...this.modifierKeys,this.key].join("+")}static keyStrokeToKeyDescriptor(e){const t=e.split("+");t.forEach(o=>{o.length>1&&o.includes(_y)});const n=[],s=[];t.forEach(o=>{if(o.includes(_y)){const l=o.replace(_y,"");if(o.startsWith(_y)){const h=WD.filter(c=>c!==l);s.push(...h),n.push(l)}else s.push(l)}else n.push(o)});const r=n.pop(),a=n.filter(o=>!s.includes(o));return new $b({key:r,modifierKeys:a,ignoredModifierKeys:s})}}class AU extends Ef{constructor(e){const t=Ne()({fire:ie.noop,press:ie.noop,release:ie.noop,fireOnDown:!0,fireOnHold:!1,fireOnHoldTiming:"browser",fireOnHoldCustomDelay:400,fireOnHoldCustomInterval:100,overlapBehavior:"handle"},e);super(t),this.isPressedProperty=new Qt(!1),this.interrupted=!1,this.keyStringProperty=t.keyStringProperty,this.fire=t.fire,this.press=t.press,this.release=t.release,this.fireOnDown=t.fireOnDown,this.fireOnHold=t.fireOnHold,this.fireOnHoldTiming=t.fireOnHoldTiming,this.overlapBehavior=t.overlapBehavior,this.keyDescriptorProperty=new Dt([this.keyStringProperty],n=>$b.keyStrokeToKeyDescriptor(n)),this.keysProperty=new Dt([this.keyDescriptorProperty],n=>{const s=ie.uniq([n.key,...n.modifierKeys]);for(const r of s);return s}),this.fireOnHold&&this.fireOnHoldTiming==="custom"&&(this.fireOnHoldTimer=new jb({callback:this.fire.bind(this,null),delay:t.fireOnHoldCustomDelay,interval:t.fireOnHoldCustomInterval}),this.disposeEmitter.addListener(()=>this.fireOnHoldTimer.dispose()),this.isPressedProperty.link(n=>{this.fireOnHoldTimer.stop(!1),n&&this.fireOnHoldTimer.start()}))}onPress(e,t){this.interrupted=!1,this.isPressedProperty.value=!0,this.press(e),t&&this.fire(e)}onRelease(e,t,n){this.interrupted=t,this.isPressedProperty.value=!1,this.release(e),n&&this.fire(e)}interrupt(){this.isPressedProperty.value&&k2.interruptHotkey(this)}dispose(){this.isPressedProperty.dispose(),this.keysProperty.dispose(),this.keyDescriptorProperty.dispose(),super.dispose()}}class Xl extends Ef{constructor(e){Na(e,["keys"],["keyStringProperties"]);const t=Ne()({keys:null,keyStringProperties:null,fire:ie.noop,press:ie.noop,release:ie.noop,focus:ie.noop,blur:ie.noop,fireOnDown:!0,fireOnHold:!1,fireOnHoldTiming:"browser",fireOnHoldCustomDelay:400,fireOnHoldCustomInterval:100,overlapBehavior:"handle",phetioEnabledPropertyInstrumented:!1},e);super(t),this._fire=t.fire,this._press=t.press,this._release=t.release,this._focus=t.focus,this._blur=t.blur,this.fireOnDown=t.fireOnDown,this.fireOnHold=t.fireOnHold,this.fireOnHoldTiming=t.fireOnHoldTiming,this.fireOnHoldCustomDelay=t.fireOnHoldCustomDelay,this.fireOnHoldCustomInterval=t.fireOnHoldCustomInterval,this.overlapBehavior=t.overlapBehavior,this.hotkeys=this.createHotkeys(t.keys,t.keyStringProperties),this.isPressedProperty=Dt.or(this.hotkeys.map(n=>n.isPressedProperty)),this.pressedKeyStringPropertiesProperty=new Mt([]),this.interrupted=!1,this.enabledPropertyListener=this.onEnabledPropertyChange.bind(this),this.enabledProperty.lazyLink(this.enabledPropertyListener)}get isPressed(){return this.isPressedProperty.value}onEnabledPropertyChange(e){!e&&this.interrupt()}dispose(){this.hotkeys.forEach(e=>e.dispose()),this.isPressedProperty.dispose(),this.pressedKeyStringPropertiesProperty.dispose(),this.enabledProperty.unlink(this.enabledPropertyListener),super.dispose()}keydown(e){e.pointer.reserveForKeyboardDrag()}focusout(e){this.interrupt(),this._blur(this)}focusin(e){this._focus(this)}cancel(){this.handleInterrupt()}interrupt(){this.handleInterrupt()}handleInterrupt(){this.hotkeys.forEach(e=>e.interrupt())}createSyntheticEvent(e){const t=Xi.createSynthetic();return new Lo(new Yi,"synthetic",e,t)}createHotkeys(e,t){let n;return t?n=t:n=e.map(s=>new Mt(s)),n.map(s=>{const r=new AU({keyStringProperty:s,fire:a=>{this._fire(a,s.value,this)},press:a=>{this.interrupted=!1;const o=s.value;this._press(a,o,this),this.pressedKeyStringPropertiesProperty.value=[...this.pressedKeyStringPropertiesProperty.value,s]},release:a=>{this.interrupted=r.interrupted;const o=s.value;this._release(a,o,this),this.pressedKeyStringPropertiesProperty.value=this.pressedKeyStringPropertiesProperty.value.filter(l=>l!==s)},fireOnDown:this.fireOnDown,fireOnHold:this.fireOnHold,fireOnHoldTiming:this.fireOnHoldTiming,fireOnHoldCustomDelay:this.fireOnHoldTiming==="custom"?this.fireOnHoldCustomDelay:void 0,fireOnHoldCustomInterval:this.fireOnHoldTiming==="custom"?this.fireOnHoldCustomInterval:void 0,enabledProperty:this.enabledProperty,overlapBehavior:this.overlapBehavior});return r})}static createGlobal(e,t){return new wU(e,t)}}class wU extends Xl{constructor(e,t){const n=new OL(e,{followPDOMOrder:!0,requirePDOMVisible:!0,requireEnabled:!0,requireInputEnabled:!0}),s=new Dt([n],a=>a.length>0),r=Ne()({enabledProperty:s,overlapBehavior:"prevent"},t);super(r),this.displayedTrailsProperty=n,this.globallyEnabledProperty=s,this.hotkeys.forEach(a=>{V2.add(a)})}dispose(){this.hotkeys.forEach(e=>{V2.remove(e)}),this.globallyEnabledProperty.dispose(),this.displayedTrailsProperty.dispose(),super.dispose()}}function SU(i,e){if(i[`on${e}`]!==void 0)return e;if(i[`onmoz${e}`]!==void 0)return`moz${e}`;if(i[`onMoz${e}`]!==void 0)return`Moz${e}`;if(i[`onwebkit${e}`]!==void 0)return`webkit${e}`;if(i[`onms${e}`]!==void 0)return`ms${e}`;if(i[`ono${e}`]!==void 0)return`o${e}`}const vV=os(document,"exitFullscreen")||os(document,"cancelFullScreen"),PU=os(document,"fullscreenElement")||os(document,"fullScreenElement"),TU=os(document,"fullscreenEnabled")||os(document,"fullScreenEnabled");let Y2=SU(document,"fullscreenchange");Y2==="msfullscreenchange"&&(Y2="MSFullscreenChange");const Gl={isFullScreen(){return!!document[PU]},isFullScreenEnabled(){return document[TU]&&!Zn.safari7},enterFullScreen(i){const e=os(document.body,"requestFullscreen")||os(document.body,"requestFullScreen");i.domElement[e]&&i.domElement[e]()},exitFullScreen(){document[vV]&&document[vV]()},toggleFullScreen(i){Gl.isFullScreen()?Gl.exitFullScreen():Gl.enterFullScreen(i)},isFullScreenProperty:new Mt(!1)};document.addEventListener(Y2,i=>{Gl.isFullScreenProperty.set(Gl.isFullScreen())});class xU{play(){}stop(){}}const Mc=new xU,EU=new ui("DynamicMarkerIO",{supertype:ui.ObjectIO,applyState:ie.noop,toStateObject:()=>({}),isValidValue:ie.stubTrue,documentation:"PhET-iO Type used as a place holder for dynamic elements to be created when set for state."}),UL={fill:"white",stroke:"black",lineWidth:1,lineDash:[],xMargin:5,yMargin:5,cornerRadius:10,resize:!0,backgroundPickable:!0,excludeInvisibleChildrenFromBounds:!0,align:"left",minWidth:0,minHeight:0,labelTagName:"span",accessibleHelpTextBehavior:Dr.HELP_TEXT_BEFORE_CONTENT};class nl extends md(Ge){constructor(e,t){const n=so()({},UL,t);super(),this._content=e,this._backgroundContainer=new Ge,this._background=new xt(0,0,1,1,{lineWidth:n.lineWidth,pickable:n.backgroundPickable,lineDash:n.lineDash,cornerRadius:n.cornerRadius}),this.setStroke(n.stroke),this.setFill(n.fill),this.addChild(this._backgroundContainer),this.addChild(e),this.constraint=new VU(this,n),this.constraint.updateLayout(),this.constraint.enabled=n.resize,this.mutate(n)}getStroke(){return this._background.stroke}get stroke(){return this.getStroke()}set stroke(e){this.setStroke(e)}setStroke(e){this._background.stroke=e,this.constraint&&this.constraint.updateLayoutAutomatically()}getFill(){return this._background.fill}get fill(){return this.getFill()}set fill(e){this.setFill(e)}setFill(e){this._background.fill=e}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this.constraint.updateLayoutAutomatically()}}nl.DEFAULT_PANEL_OPTIONS=UL;class VU extends Oo{constructor(e,t){super(e),this.panel=e,this.minWidth=t.minWidth,this.minHeight=t.minHeight,this.xMargin=t.xMargin,this.yMargin=t.yMargin,this.lineWidth=t.lineWidth,this.align=t.align,this.panel.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.panel.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.addNode(e._content)}layout(){super.layout();const e=this.panel,t=e._content,n=e._background,s=e.isChildIncludedInLayout(t);if(e._backgroundContainer.children=s?[n]:[],!s){e.localMinimumWidth=null,e.localMinimumHeight=null;return}const r=this.createLayoutProxy(t);if(!r)return;const a=e.stroke===null?0:this.lineWidth,o=r.minimumWidth,l=r.minimumHeight,h=Math.max(this.minWidth,o+2*this.xMargin)+a,c=Math.max(this.minHeight,l+2*this.yMargin)+a,f=Math.max(h,e.localPreferredWidth||0),g=Math.max(c,e.localPreferredHeight||0);r.preferredWidth=f-a-2*this.xMargin,r.preferredHeight=g-a-2*this.yMargin,n.setRect(0,0,f-a,g-a),this.align==="center"?r.center=n.center:this.align==="left"?(r.left=n.centerX-n.rectWidth/2+this.xMargin,r.centerY=n.centerY):(r.right=n.centerX+n.rectWidth/2-this.xMargin,r.centerY=n.centerY),e.localMinimumWidth=h,e.localMinimumHeight=c,r.dispose()}dispose(){this.panel.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.panel.localPreferredHeightProperty.unlink(this._updateLayoutListener),super.dispose()}}const bV=i=>{jt(i.split(".").length>1,"path must have multiple parts"),jt(i.trim()===i,"path must be trimmed");const e=i.split("."),t=e.pop(),n=ie.get(self,e);return n?n[t].bind(n):null},GL=(i,e)=>class extends i{constructor(...t){super(...t);const n=t[e]||{};t[t.length-1];const s=bV("phet.joist.sim.showPopup"),r=bV("phet.joist.sim.hidePopup"),a=Ne()({showPopup:s,hidePopup:r,isModal:!0,layoutBounds:null,focusOnShowNode:null,focusOnHideNode:null,disableModals:ie.get(self,"phet.chipper.queryParameters.disableModals")||!1},n);this.layoutBounds=a.layoutBounds,this._focusOnShowNode=a.focusOnShowNode,this.disableModals=a.disableModals,this.isModal=a.isModal,this._focusOnHideNode=a.focusOnHideNode,this._nodeToFocusOnHide=null,this.popupParent=new kU(this,{show:this.show.bind(this),hide:this.hide.bind(this),layout:this.layout.bind(this)}),this.isShowingProperty=new Qt(!1,{tandem:a.tandem?.createTandem("isShowingProperty"),phetioReadOnly:!0,phetioFeatured:!0}),this.isShowingProperty.lazyLink(o=>{o?a.showPopup(this.popupParent,a.isModal):a.hidePopup(this.popupParent,a.isModal)})}layout(t){this.layoutBounds&&(this.popupParent.matrix=Rh.getLayoutMatrix(this.layoutBounds,t))}shouldShowPopup(){return!(this.isModal&&this.disableModals)}show(){this.shouldShowPopup()&&(this._nodeToFocusOnHide=this._focusOnHideNode||Gc(),this.isShowingProperty.value=!0,this._focusOnShowNode&&this._focusOnShowNode.focusable&&this._focusOnShowNode.focus())}hide(){this.interruptSubtreeInput(),this.isShowingProperty.value=!1,this._nodeToFocusOnHide&&this._nodeToFocusOnHide.focusable&&this._nodeToFocusOnHide.focus()}get focusOnHideNode(){return this._focusOnHideNode}dispose(){this.hide(),this.isShowingProperty.dispose(),super.dispose()}};class kU extends Ge{constructor(e,t){const n=Ne()({children:[e]},t);super(n),this.show=n.show,this.hide=n.hide,this.layout=n.layout}}class Ua extends GL(nl,1){constructor(e,t){const n=Ne()({xSpacing:10,ySpacing:10,topMargin:15,bottomMargin:15,leftMargin:null,maxWidthMargin:12,maxHeightMargin:12,closeButtonLength:18.2,closeButtonTopMargin:10,closeButtonRightMargin:10,title:null,titleAlign:"center",layoutStrategy:CU,closeButtonListener:()=>this.hide(),closeButtonColor:"black",closeButtonTouchAreaXDilation:0,closeButtonTouchAreaYDilation:0,closeButtonMouseAreaXDilation:0,closeButtonMouseAreaYDilation:0,closeButtonVoicingDialogTitle:null,closeButtonLastInPDOM:!1,openedSoundPlayer:$n.get("generalOpen"),closedSoundPlayer:$n.get("generalClose"),sim:y7("phet.joist.sim"),showCallback:null,hideCallback:null,layoutBounds:Rh.DEFAULT_LAYOUT_BOUNDS,focusOnShowNode:null,cornerRadius:10,resize:!0,fill:"white",stroke:"black",backgroundPickable:!0,maxHeight:null,maxWidth:null,tandemNameSuffix:["Dialog",sS],phetioType:Ua.DialogIO,phetioState:!0,phetioVisiblePropertyInstrumented:!1,tagName:"div",ariaRole:"dialog",positionInPDOM:!0},t);n.xMargin=0,n.yMargin=0,n.leftMargin===null&&(n.leftMargin=n.xSpacing+n.closeButtonLength+n.closeButtonRightMargin),!n.maxWidth&&n.layoutBounds&&(n.maxWidth=_V(n.layoutBounds.width,n.maxWidthMargin)),!n.maxHeight&&n.layoutBounds&&(n.maxHeight=_V(n.layoutBounds.height,n.maxHeightMargin));const s=new Sn({priority:Sn.MEDIUM_PRIORITY,voicingCanAnnounceProperties:[$i.voicingFullyEnabledProperty]}),r=new _U({iconLength:n.closeButtonLength,baseColor:"transparent",buttonAppearanceStrategy:rh.FlatAppearanceStrategy,xMargin:0,yMargin:0,listener:()=>{r.voicingSpeakContextResponse({utterance:s}),n.closeButtonListener()},pathOptions:{stroke:n.closeButtonColor},tandem:n.tandem?.createTandem("closeButton"),phetioState:!1,phetioVisiblePropertyInstrumented:!1,phetioEnabledPropertyInstrumented:!1,soundPlayer:Mc,voicingContextResponse:o7});let a;if(n.closeButtonVoicingDialogTitle){const w=typeof n.closeButtonVoicingDialogTitle=="string"?new oi(n.closeButtonVoicingDialogTitle):n.closeButtonVoicingDialogTitle;a=r.voicingNameResponse=new _a(l7,{title:w},{tandem:R.OPT_OUT})}r.touchArea=r.bounds.dilatedXY(n.closeButtonTouchAreaXDilation,n.closeButtonTouchAreaYDilation),r.mouseArea=r.bounds.dilatedXY(n.closeButtonMouseAreaXDilation,n.closeButtonMouseAreaYDilation);const o=new Ge({tagName:"h1"}),l=new Ge({tagName:"p"});let h=[o,l,n.title,e];n.closeButtonLastInPDOM?h.push(r):h.unshift(r),h=h.filter(w=>w!=null),n.focusOnShowNode=n.focusOnShowNode?n.focusOnShowNode:h[0].focusable?h[0]:r;const c=new Ai({children:n.title?[n.title,e]:[e],spacing:n.ySpacing,align:n.titleAlign}),f=new jl(c,{topMargin:n.topMargin,bottomMargin:n.bottomMargin,leftMargin:n.leftMargin}),g=new jl(r,{topMargin:n.closeButtonTopMargin,rightMargin:n.closeButtonRightMargin}),v=new _i({children:[o,l,f,g],spacing:n.xSpacing,align:"top"});super(v,n),this.isShowingProperty.lazyLink(w=>{w?(n.openedSoundPlayer.play(),n.showCallback&&n.showCallback()):(n.closedSoundPlayer.play(),n.hideCallback&&n.hideCallback())}),this.sim=n.sim,this.closeButton=r;const A=Cn.multilink([this.sim.boundsProperty,this.sim.screenBoundsProperty,this.sim.scaleProperty,this.sim.selectedScreenProperty,this.isShowingProperty,this.localBoundsProperty],(w,T,D)=>{w&&T&&D&&n.layoutStrategy(this,w,T,D)});this.pdomOrder=h,Dr.forwardAccessibleName(this,o),this.accessibleHelpTextBehavior=(w,T,D,M)=>(M.push(()=>{l.innerContent=D}),T),!n.accessibleName&&n.title&&(this.accessibleName=Du(n.title)),this.addAriaLabelledbyAssociation({thisElementName:vn.PRIMARY_SIBLING,otherNode:o,otherElementName:vn.LABEL_SIBLING});const P=new Xl({keys:["escape","tab","shift+tab"],fire:(w,T)=>{const D=w;if(T==="escape")D.preventDefault(),this.hide();else if((T==="tab"||T==="shift+tab")&&Gl.isFullScreen()){const M=Bn.pdomFocus.trail.getUniqueId(),B=Ti.getNextFocusable().id===M,O=Ti.getPreviousFocusable().id===M;B&&O&&D.preventDefault()}}});this.addInputListener(P),this.disposeDialog=()=>{A.dispose(),g.dispose(),this.removeInputListener(P),P.dispose(),a&&a.dispose(),r.dispose(),s.dispose(),c.dispose(),v.removeAllChildren(),v.detach()}}dispose(){this.disposeDialog(),super.dispose()}}Ua.DialogIO=new ui("DialogIO",{valueType:Ua,supertype:EU});function CU(i,e,t,n){i.layoutBounds&&(i.center=i.layoutBounds.center)}function _V(i,e){return i>e*2?i-e*2:i}class DU extends R{constructor(e,t,n){const s=Ne()({isValidTandemName:r=>R.getRegexFromCharacterClass(jr.BASE_DYNAMIC_TANDEM_CHARACTER_CLASS).test(r)},n);super(e,t,s)}}const IU="Container";function LU(i){if(i===null)throw new Error("archetype should exist");return i}class MU extends rn{constructor(e,t,n){const s=Ne()({phetioState:!1,supportsDynamicState:!0,containerSuffix:IU,phetioDynamicElementName:void 0},n);if(s.tandem&&!s.phetioDynamicElementName&&(s.phetioDynamicElementName=s.tandem.name.slice(0,s.tandem.name.length-s.containerSuffix.length)),super(s),this.supportsDynamicState=s.supportsDynamicState,this.phetioDynamicElementName=s.phetioDynamicElementName,this.createElement=e,this.defaultArguments=t,this._archetype=this.createArchetype(),this.elementCreatedEmitter=new kn({parameters:[{valueType:rn,phetioType:s.phetioType.parameterTypes[0],name:"element"},{name:"phetioID",phetioType:xi}],tandem:s.tandem.createTandem("elementCreatedEmitter"),phetioDocumentation:"Emitter that fires whenever a new dynamic element is added to the container."}),this.elementDisposedEmitter=new kn({parameters:[{valueType:rn,phetioType:s.phetioType.parameterTypes[0],name:"element"},{name:"phetioID",phetioType:xi}],tandem:s.tandem.createTandem("elementDisposedEmitter"),phetioDocumentation:"Emitter that fires whenever a dynamic element is removed from the container."}),R.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&(this.elementCreatedEmitter.addListener(r=>this.createdEventListener(r)),this.elementDisposedEmitter.addListener(r=>this.disposedEventListener(r))),this.notificationsDeferred=!1,this.deferredCreations=[],this.deferredDisposals=[],R.PHET_IO_ENABLED&&this.supportsDynamicState&&!this.phetioIsArchetype&&this.isPhetioInstrumented()){const r=phet.phetio.phetioEngine.phetioStateEngine;r.clearDynamicElementsEmitter.addListener((a,o)=>{this.tandem.hasAncestor(o)&&(this.clear({phetioState:a}),this.setNotificationsDeferred(!0))}),r.undeferEmitter.addListener(()=>{this.notificationsDeferred&&this.setNotificationsDeferred(!1)}),r.addSetStateHelper((a,o)=>{let l=!1,h=0;for(;this.deferredCreations.length>0;){if(h>200)throw new Error("Too many iterations in deferred creations, stillToSetIDs = "+o.join(", "));const c=this.deferredCreations[0];this.stateSetOnAllChildrenOfDynamicElement(c.tandem.phetioID,o)&&(this.notifyElementCreatedWhileDeferred(c),l=!0),h++}return l})}}stateSetOnAllChildrenOfDynamicElement(e,t){for(let n=0;n<t.length;n++)if(Fn.isAncestor(e,t[n]))return!1;return!0}createArchetype(e=this.tandem.createTandem(sS),t=this.defaultArguments){if(ie.hasIn(self,"phet.joist.sim")&&phet.joist.sim.isConstructionCompleteProperty.value)return null;if(R.PHET_IO_ENABLED&&phet.preloads.phetio.createArchetypes){const n=Array.isArray(t)?t:t(),s=this.createElement(e,...n);return this.isPhetioInstrumented()&&s.markDynamicElementArchetype(),s}else return null}createDynamicElement(e,t,n){let s;this.tandem.hasChild(e)?s=this.tandem.createTandem(e,this.tandem.getExtendedOptions()):s=new DU(this.tandem,e,this.tandem.getExtendedOptions());const r=this.createElement(s,...t);return R.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&i0(r,n.validator),r}assertDynamicPhetioObject(e){}emitDataStreamEvent(e,t,n){this.phetioStartEvent(t,{data:an({phetioID:e.tandem.phetioID},n)}),this.phetioEndEvent()}createdEventListener(e){const t=e.phetioState?{state:this.phetioType.parameterTypes[0].toStateObject(e)}:null;this.emitDataStreamEvent(e,"created",t)}disposedEventListener(e){this.emitDataStreamEvent(e,"disposed")}dispose(){}disposeElement(e){e.dispose(),this.notificationsDeferred?this.deferredDisposals.push(e):this.elementDisposedEmitter.emit(e,e.tandem.phetioID)}notifyElementDisposedWhileDeferred(e){this.elementDisposedEmitter.emit(e,e.tandem.phetioID),gs(this.deferredDisposals,e)}notifyElementCreated(e){this.notificationsDeferred?this.deferredCreations.push(e):this.elementCreatedEmitter.emit(e,e.tandem.phetioID)}notifyElementCreatedWhileDeferred(e){this.elementCreatedEmitter.emit(e,e.tandem.phetioID),gs(this.deferredCreations,e)}setNotificationsDeferred(e){if(!e){for(;this.deferredCreations.length>0;)this.notifyElementCreatedWhileDeferred(this.deferredCreations[0]);for(;this.deferredDisposals.length>0;)this.notifyElementDisposedWhileDeferred(this.deferredDisposals[0])}this.notificationsDeferred=e}get archetype(){return LU(this._archetype)}getMetadata(e){const t=super.getMetadata(e);return an({phetioDynamicElementName:this.phetioDynamicElementName},t)}}const OU=Fn.CAPSULE_SUFFIX,vA=new ea;class Iu extends MU{constructor(e,t,n){const s=Ne()({containerSuffix:OU,disposeOnClear:!0,disposeCreatedOnStateSet:!1},n);super(e,t,s),this.element=null,this.disposeOnClear=s.disposeOnClear,this.disposeCreatedOnStateSet=s.disposeCreatedOnStateSet}disposeElement(){super.disposeElement(this.element),this.element=null}hasElement(){return this.element!==null}getElement(...e){return this.element||this.create(e),this.element}clear(e){const t=Ne()({phetioState:null},e);if(this.element&&this.disposeOnClear){const n=t.phetioState&&(t.phetioState.hasOwnProperty(this.element.phetioID)??!1);(this.disposeCreatedOnStateSet||!n)&&this.disposeElement()}}create(e,t=!1){return this.element=this.createDynamicElement(this.phetioDynamicElementName,e,R.PHET_IO_ENABLED?this.phetioType.parameterTypes[0]:null),this.notifyElementCreated(this.element),this.element}}Iu.PhetioCapsuleIO=i=>(vA.has(i)||vA.set(i,new ui(`PhetioCapsuleIO<${i.typeName}>`,{valueType:Iu,documentation:"An array that sends notifications when its values have changed.",parameterTypes:[i],metadataDefaults:{phetioDynamicElementName:null},addChildElement(e,t,n){const s=i.stateObjectToCreateElementArguments(n);return e.create(s,!0)}})),vA.get(i));const gp=new Image,NU=_n.createLock(gp);gp.onload=NU;gp.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAAA+CAYAAABuv5bfAAAACXBIWXMAABhMAAAYTAGIN/zbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAttJREFUeNrsW91RwzAMdnu8txsQJqiZoGECyhtvlAmaDSgbZIRuQEYIG4QJCBukb7yFiHPvgisV+fJTJ5XudL24MpI/9Ge7mZRlqUZG24pfas93FadtKpiq8dG8awVjBE0LaM09LW9bwWRkOS2o+NNeo3jaaQ9LrLGPLhRdjSB/hYbvke/TLpQOKTyDGkjwuWTMuekip/nuaQDQ2nxeO8zbVxx1AZjvoMUVbxznQA7bGS66MszX8MSqIOVRqeGkK88aiqdtT3z3bgACoLJzGOerp0Fozayw2yItxVnIR09bWYAdxnJfDPSxuQ2t5y+fAMM8LUSM7pserefvf3JcH5TU8+chp2lTphdK6FQBgjRRAGiBQXEmuLD6wHBqXF8A4xFEYgSeVgoWbt4moLXYcsBlxERYvQ6lTxuspwkJaOfbe87V8fVYytwKZQo/37LlcmLLpNXfW6aCOOEIDP9nI7YWysZjKnEKoahanCFyESIXI3IJIhchcgUipwkbNSJbMG1MmDZuMcUu4bkg/mOYV3DksLEZU67p/LmDHslpUggGABp28Zq1PIbpgMKwt8b2RMHg2thb9QytfEVVsEgdH0unxBnVrZVLMgI0bVVFqspybewNtELxb6y5ctwFUSA1sVFymhQCAe2yQdvBBoLBK2TuCpGLiW1QYcllJ/JhXa5AtlDK6LF1L/sC7YkppxuMBUhXv2DuUGYEaFrCU3La+EHbjxwL9k+zXJpbTeQMTsMaI01nTjTFd8zF3CInE1hju25gd2PQuF35UHcTktOkEAhowyeXnBYjjWKE5Ja1YV+Ia+POcKugbYjtEWbQ0iPQXGzcSXhKThPQLqYQPCCFICYS78qjNXJtTLoALWH+4Uyd6aUIB2pko4SngCagDa4QQPMXCjw4BvJDZXf6gvD8EBycKAVPg37lTbBgERz566npvZ4FDxZgv+/F11+SDRX/PP3SKDM7ixwefgQYAIqW2LtFfuBbAAAAAElFTkSuQmCC";const e_=new Image,RU=_n.createLock(e_);e_.onload=RU;e_.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAAA+CAYAAABuv5bfAAAACXBIWXMAABhMAAAYTAGIN/zbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxlJREFUeNrsW8tx2zAQBWPfpWNupiswc8oxcgVhbr6ZJbADswSWoBJQAtwBVUHoDqhbcmIWnuVEhpfSYkhKILU7s8MR/CgsnoH9AFDUtq1akkRRVMDj5aDpEcZoxuzji1qerKfuYImkJULa8JlWj+4CluTTwJ/F8Ph92Abji2Sm9RNmZ5h2mndT9HU7c6Ks/9qg/iQgZpJ+57I8cel1JNnnD8Zr9zC++qpmGhBlCcqQqDuPV/eg+RSEdY4ySAUprXmeWlmybASd0rYglycVBY/MKIOqJ5tZM1mexZG/vWKUNEBSdZF/aqAzrYHHykkdCrBVh2DfbYCEpQ5hVtJzLb25Jrcb5/NbSIR9mmkY4jcXtunJ+fwHt3suKfqD/0SflmC4bkV71XSpjBUb3hshhZ0Hrm8wifyuRDjyFfRvhAyK8GUnpI2Yp41+GDHTrScbtV/mkKcFL0KakBZY7Yl78ImzF2d6sG5VUQG2YeBqqmTCbe3DU6aG2uHALaX4lI3UWPps7BMqidsQm4JUxZAzNw81gcsJXEPgkh4bEwLbMG3UTBsLqm+f5flAtFGn2QkTR7WtmLih7689+hGfJoFgBqRRB6/VyG1UHzYw7J22vaKvG3BtPE/0VP/PG49GMGjLITrpUxHMbl0D7pvjS6jvqzF6xqeiLNfGs5GG4dgwsVxcxcTVinGRxcdG8WkSCIS06yYNnPEWtGVoSrybEriSKoPsmaeDq3rsqRxcg2WUiyvdvhXv8swoM+2ZiUsGtMVEVv/ArFBWbt15pB9ZnuLTFkbafuFcsLeFfCqCpMdncMqWkkg6ayopBkf9yByMW030JdXZALsHVwSsrHyu1YT4NAkEQtoixOdgpSQSxdz1LYDL0PmGIlwbt4Dbsv204h2sULiCwBkV1k0fro1mioMVEfFpQlqYgQDkFxEISsrxgqYBjZFrox6dNLzDrxm4Sk1wAjSmDLVRlqeQJqTNLhBkxDWoaxSSA7mo7C9vdnnuhAcvsSXYe74iv0bhqd1MjbvCNBNCWIRlH36OffAj+1hW4CexiXDZ3VT6J8AAo7gFqk0pOnsAAAAASUVORK5CYII=";class j2 extends _i{constructor(e,t,n){const s=Ne()({fill:"white",highlightWidth:1,pickable:!1},n);s.spacing=e;const r=s.fill,a=ct.toColor(r).withAlpha(0),o={fill:new il(0,0,0,t).addColorStop(0,a).addColorStop(.5,r).addColorStop(1,a)},l=new xt(0,0,s.highlightWidth,t,o),h=new xt(0,0,s.highlightWidth,t,o);s.children=[l,h],super(s)}}class d0 extends ys(Ge){constructor(e,t,n){const s=Ne()({cursor:"pointer",listener:null,highlightExtensionWidth:0,highlightExtensionHeight:0,highlightCenterOffsetX:0,highlightCenterOffsetY:0,pointerAreaDilationX:0,pointerAreaDilationY:0,enabledPropertyOptions:{phetioFeatured:!1},disabledOpacity:Ha.DISABLED_OPACITY,tagName:"button"},n),r=function(h){return new j2(e.width+s.highlightExtensionWidth,e.height+s.highlightExtensionHeight,{centerX:e.centerX+s.highlightCenterOffsetX,centerY:e.centerY+s.highlightCenterOffsetY,fill:h,pickable:!1})},a=r("white"),o=r("black");s.children=[e,a,o],super(s),this.buttonModel=new Zb(s);const l=new NS(this.buttonModel);this.interactionStateProperty=l,Cn.multilink([l,t,this.buttonModel.enabledProperty],(h,c,f)=>{const g=!c.equals(ct.BLACK);a.visible=!g&&f&&(h===Jn.OVER||h===Jn.PRESSED),o.visible=g&&f&&(h===Jn.OVER||h===Jn.PRESSED)}),this.buttonModel.enabledProperty.link(h=>{this.cursor=h?s.cursor:null}),this._pressListener=this.buttonModel.createPressListener({tandem:R.OPT_OUT}),this.addInputListener(this._pressListener),this.mouseArea=this.touchArea=zt.bounds(this.bounds.dilatedXY(s.pointerAreaDilationX,s.pointerAreaDilationY)),this.focusHighlight=zt.bounds(this.bounds.shiftedY(-3))}isPDOMClicking(){return this._pressListener.pdomClickingProperty.get()}}const BU=new Fe(new He("JOIST/a11y.keyboardHelp.tabToGetStarted",{en:"Tab to get started."},R.OPT_OUT),R.OPT_OUT),AV=new Fe(new He("JOIST/keyboardShortcuts.title",{en:"Keyboard Shortcuts",af:"Sleutelbordkortpaaie",am:"የቁልፍ ሰሌዳ አቋራጮች",ar:"اختصارات لوحة المفاتيح",ar_KW:"اختصارات لوحة المفاتيح",ar_LY:"اختصارات لوحة المفاتيح",ar_MA:"أزرار مختصرة",ar_SA:"اختصارات لوحة المفاتيح",ar_SY:"اختصارات لوحة المفاتيح",ay:"Klaviatura qısa yolları",az:"Klaviatura qısa yolları",be:"Гарачыя клавішы",bg:"Клавишни комбинации",bn:"Keyboard Shortcuts",bs:"Prečice sa tastature",ca:"Dreceres de teclat",cs:"Klávesové zkratky",cy:"Llwybrau Byr Allweddfwrdd",da:"Genvejstaster",de:"Tastaturkürzel",ee:"Keyboard ƒe mɔ kpuiwo",el:"Συντομεύσεις πληκτρολογίου",es:"Atajos del teclado",es_ES:"Atajos de teclado",es_MX:"Uso del Teclado",es_PE:"Atajos del Teclado",et:"Klaviatuuri otseteed",eu:"Teklatu-lasterbideak",fa:"میانبرهای صفحه کلید",fa_DA:"Keyboard Shortcuts",fi:"Pikanäppäimet",fr:"Raccourcis clavier",ga:"Aicearraí Méarchláir",gl:"Atallos de teclado",gu:"કીબોર્ડનાં શોર્ટકટ",ha:"Ƴar kusar kibod",hi:"कीबोर्ड शॉर्टकट",hr:"Tipkovnički prečaci",ht:"Rakousi klavye",hu:"Billentyűparancsok",hy:"Ստեղնաշարային կոմբինացիա",ig:"Azịza Ahụigodo",in:"Tombol Pintas",is:"Flýtivísar",it:"Scorciatoie da tastiera",iw:"קיצורי מקשים",ja:"キーボード操作方法",ka:"კლავიატურის მოკლე ბრძანებები",ki:"Njìra ngùhì ya keyboard",kk:"Жедел батырмалар",kn:"ಕೀಲಿಮಣೆ ಕಿರುಹಾದಿಗಳು",ko:"단축키",ku:"قەدبڕی تەختە کلیل",ku_TR:"kurteriyên klaryeyê",lg:"Awokuyitira awangu ngokozesa amapeesa ga kompyuta",lo:"ທາງລັດແປ້ນພີມ",lt:"Klaviatūros trumpiniai",lv:"Tastatūras īsinājumtaustiņi",mg:"Kitendry hitsin-dàlana",mi:"Pātuhi Pokatata",mk:"Кратенки на тастатура",mn:"Гарын товчилбор",mr:"किबोर्ड शॉर्टकटस",ms:"Pintasan Papan Kekunci",mt:"Shortcuts għat-Tastiera",nb:"Tastatursnarveier",ne:"किबोर्ड सर्टकटहरू",nl:"Sneltoetsen",nn:"Snarvegar",ny:"Njira zazifupi za Kiyibodi",om:"Qaxxamuraalee Gabatee Cuqoo",pl:"Skróty klawiaturowe",ps:"د کیبورډ لنډیزونه",pt:"Atalhos do teclado",pt_BR:"Teclas de Atalho",qu:"Keyboard Shortcuts",ro:"Scurtături tastatură",ru:"Горячие клавиши",rw:"Inzira ya bugufi kuri karaviye",se:"Boallobeavdejođanisgeaidnu",si:"යතුරුපුවරු කෙටිමං",sk:"Klávesové skratky",sl:"Bližnjice na tipkovnici",sn:"Kiyibhodhi shotikatsi",sp:"Dikgaoletšo tša Keyboard",sq:"Shkurtesat e Tastierës",sr:"Пречице са тастатуре",st:"Likhaoletso tsa Keyboard",sv:"Kortkommandon för tangentbordet",sw:"Njiamkato za Kiibodi",ta:"விசைப்பலகைக் குறுக்கு வழி",te:"కీబోర్డ్ చిట్కాలు",tg:"Ёри ширкатҳои клавиатура",th:"ทางลัด",ti:"ሓፂር ሜላ ኣጠቓቕማ ኪቦርድ",tk:"Düwme gysga ýollary",tl:"Keyboard Shortcuts",tn:"Go tlhabanyetsa ka ditlhaka",tr:"Klavye Kısayolları",tw:"Kwan tiawa a yɛfa so Timtim",uk:"Гарячі клавіші",ur:"کی بورڈ شارٹ کٹ",uz:"Tezkor tugmalar",vi:"Phím tắt",wo:"Gattal Yon",yo:"Awọn ọna abuja Keyboard",zh_CN:"快捷键",zh_HK:"鍵盤快捷鍵",zh_TW:"快捷鍵",zu:"izinqamuleli sekhibhodi"},R.OPT_OUT),R.OPT_OUT),qU=new Fe(new He("JOIST/keyboardShortcuts.toGetStarted",{en:"to get started",af:"om te begin",am:"ለመጀመር",ar:"للبدء",ar_KW:"ابدأ",ar_LY:"للبدء",ar_MA:"اضغط للبدء",ar_SA:"للبدء",ar_SY:"للبدء",ay:"başlamaq üçün",az:"başlamaq üçün",be:"каб пачаць",bg:"начало",bn:"to get started",bo:"གོ་བཙུགས་པར།",bs:"započni",ca:"per començar",cs:"pro spuštění",cy:"i ddechrau",da:"for at komme igang",de:"um Auswahl zu starten",ee:"Be nàdze egɔme",el:"για να ξεκινήσετε",es:"Para iniciar",es_ES:"Para comenzar",es_MX:"Para iniciar",es_PE:"para iniciar",eu:"Hasteko",fa:"برای شروع",fa_DA:"برای شروع",fi:"Näin pääset alkuun",fr:"Pour commencer",ga:"Chun tosú",gl:"para comezar",gu:"પ્રારંભ કરવા માટે",ha:"Domin asamu a fara",hi:"आरंभ करना",hr:"za početak",ht:"pou kòmanse",hu:"Indítás",hy:"սկզբի համար",ig:"ọhụrụ",in:"Untuk memulai",is:"til að byrja",it:"per iniziare",iw:"להתחלה",ja:"で始める",ka:"დასაწყებად",ki:"Kwĩrira kũhenda",kk:"бастау үшін\uFEFF",kn:"ಪ್ರಾರಂಭಿಸಲು",ko:"시작하기",ku:"بۆ ئەوەی دەست پێ بکەیت",ku_TR:"dest pê kirin",lg:"Okutandika",lo:"ເລີ້ມ",lt:"Pradžiai",lv:"lai sāktu",mg:"hanombohana",mi:"hei tīmatanga",mn:"Эхэлсэн",mr:"सुरू करण्यासाठी",ms:"untuk mula",mt:"biex tibda",my:"စတင်ရန်",nb:"for å starte",ne:"सुरुआत गर्न",nl:"om te starten",nn:"for å starta",ny:"Kuti muyambe",om:"jalqabuuf",pl:"aby rozpocząć",ps:"د پیل کېدو په حال کې",pt:"para começar",pt_BR:"para iniciar",qu:"Qallarinapaq",ro:"pentru a începe",ru:"чтобы начать",rw:"gutangira",se:"álgit",si:"ආරම්භ කිරීමට",sk:"začať",sl:"za začetek",sn:"kuti zvitange",sp:"go thoma",sq:"për të filluar",sr:"започни",st:"ho qala",sv:"för att komma igång",sw:"Kuanza",ta:"தொடங்க",te:"మొదలుపెట్టండి",tg:"барои оғоз кардан",th:"เพื่อเริ่มต้นใช้งาน",ti:"ንምጅማር",tk:"başlamak üçin",tl:"Upang magsimula",tn:"Go simolola",tr:"başlamak için",tw:"ansa na wo b3 hyease no",uk:"розпочати",ur:"شروع کرنے لے لئے",uz:"boshlash",vi:"để bắt đầu",wo:"Dor",yo:"lati bẹrẹ",zh_CN:"开始",zh_HK:"開始",zh_TW:"開始",zu:"ukuze uqalise"},R.OPT_OUT),R.OPT_OUT),WL=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.or",{en:"or",af:"of",ak:"or",am:"ወይም",ar:"أو",ar_KW:"or",ar_LY:"أو",ar_MA:"أو",ar_SA:"أو",ay:"ya",az:"ya",be:"або",bg:"или",bn:"অথবা",bo:"ཡང་ན།",bs:"ili",ca:"o",cs:"nebo",cy:"neu",da:"eller",de:"oder",ee:"alo",el:"ή",es:"o",es_ES:"o",es_MX:"o",es_PE:"o",eu:"edo",fa:"یا",fa_DA:"یا",fi:"tai",fr:"ou",ga:"nó",gl:"ou",gu:"અથવા",ha:"ko kuma",hi:"या",hr:"ili",ht:"oswa",hu:"vagy",hy:"կամ",ig:"ma ọ bụ",in:"atau",is:"eða",it:"o",iw:"או",ja:"か",ka:"ან",ki:"kana",kk:"немесе",kn:"ಅಥವಾ",ko:"또는",ku:"یان",ku_TR:"an",lg:"Oba",lo:"ຫຼື",lt:"arba",lv:"vai",mg:"na",mi:"rānei",mk:"или",mn:"эсвэл",mr:"किंवा",ms:"atau",mt:"jew",my:"သို့မဟုတ်",nb:"eller",ne:"वा",nl:"of",nn:"eller",ny:"kapena",om:"ykn",pl:"lub",ps:"یا",pt:"ou",pt_BR:"ou",qu:"or",ro:"sau",ru:"или",rw:"cyangwa",se:"dahje",si:"හෝ",sk:"alebo",sl:"ali",sn:"kana",sp:"goba",sq:"ose",sr:"или",st:"kapa",sv:"eller",sw:"Au",ta:"or",te:"లేదా",tg:"ё",th:"หรือ",tk:"ýa-da",tl:"o",tn:"kgotsa",tr:"veya",tw:"anaa",uk:"або",ur:"یا",uz:"yoki",vi:"hay",wo:"Wala",yo:"tabi",zh_CN:"或者",zh_HK:"或",zh_TW:"或",zu:"noma"},R.OPT_OUT),R.OPT_OUT);let zU=1;const FU={matchHorizontal:!0,matchVertical:!0};class Bh extends th{constructor(e){const t=so()({},FU,e);super(t),this._alignBoxes=[],this._matchHorizontal=t.matchHorizontal,this._matchVertical=t.matchVertical,this._resizeLock=!1,this._maxWidthProperty=new Ba(0),this._maxHeightProperty=new Ba(0),this.id=zU++}getMaxWidth(){return this._maxWidthProperty.value}get maxWidth(){return this.getMaxWidth()}getMaxWidthProperty(){return this._maxWidthProperty}get maxWidthProperty(){return this.getMaxWidthProperty()}getMaxHeight(){return this._maxHeightProperty.value}get maxHeight(){return this.getMaxHeight()}getMaxHeightProperty(){return this._maxHeightProperty}get maxHeightProperty(){return this.getMaxHeightProperty()}getMaxSizeProperty(e){return e===Ot.HORIZONTAL?this._maxWidthProperty:this._maxHeightProperty}createBox(e,t){return new jl(e,Ut({group:this},t))}setMatchHorizontal(e){return this._matchHorizontal!==e&&(this._matchHorizontal=e,this.updateLayout()),this}set matchHorizontal(e){this.setMatchHorizontal(e)}get matchHorizontal(){return this.getMatchHorizontal()}getMatchHorizontal(){return this._matchHorizontal}setMatchVertical(e){return this._matchVertical!==e&&(this._matchVertical=e,this.updateLayout()),this}set matchVertical(e){this.setMatchVertical(e)}get matchVertical(){return this.getMatchVertical()}getMatchVertical(){return this._matchVertical}updateLayout(){if(this._resizeLock)return;this._resizeLock=!0;let e=0,t=0;for(let n=0;n<this._alignBoxes.length;n++){const s=this._alignBoxes[n],r=s.getMinimumWidth(),a=s.getMinimumHeight();isFinite(r)&&r>0&&(e=Math.max(e,r)),isFinite(a)&&a>0&&(t=Math.max(t,a))}if(this._maxWidthProperty.value=e,this._maxHeightProperty.value=t,e>0&&t>0)for(let n=0;n<this._alignBoxes.length;n++)this.setBoxBounds(this._alignBoxes[n],e,t);this._resizeLock=!1}setBoxBounds(e,t,n){let s;if(this._matchVertical&&this._matchHorizontal)s=new pt(0,0,t,n);else{const r=e.getContentBounds();this._matchVertical?s=new pt(0,0,isFinite(r.width)?r.width:t,n):this._matchHorizontal?s=new pt(0,0,t,isFinite(r.height)?r.height:n):s=r}e.alignBounds=s}onAlignBoxResized(e){this.updateLayout()}addAlignBox(e){this._alignBoxes.push(e),this.updateLayout()}removeAlignBox(e){gs(this._alignBoxes,e),this.updateLayout()}dispose(){for(let e=this._alignBoxes.length-1;e>=0;e--)this._alignBoxes[e].dispose();super.dispose()}}const HU=ua.getAll({backgroundColor:{type:"string",defaultValue:"white"},fontFamily:{type:"string",defaultValue:"Arial"}});class ki extends hr{constructor(e){let t;typeof e=="number"||typeof e=="string"?t={size:e}:t=e||{},t=Ut({family:HU.fontFamily},t),t.family=[t.family,"sans-serif"].join(", "),super(t)}}const UU=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.hyphen",{en:"-",af:"-",am:"-",ar:"-",ar_KW:"-",ar_LY:"-",ar_MA:"-",ar_SA:"-",az:"-",be:"-",bg:"-",bn:"-",bo:"-",bs:"-",ca:"-",da:"-",de:"-",el:"-",es:"-",es_ES:"_",es_MX:"-",es_PE:"-",eu:"-",fa:"-",fa_DA:"-",fi:"-",fr:"-",ga:"-",gl:"-",gu:"-",ha:"-",hi:"-",hr:"-",ht:"-",hu:"-",hy:"-",ig:"-",is:"-",it:"-",iw:"-",ka:"-",ki:"-",kn:"-",ko:"-",ku:"-",ku_TR:"-",lg:"-",lo:"-",lt:"-",lv:"-",mg:"-",mi:"-",mn:"-",mr:"-",ms:"-",mt:"-",nb:"-",ne:"-",ny:"-",om:"-",pl:"-",pt:"-",pt_BR:"-",qu:"-",ro:"-",ru:"-",rw:"-",sd:"-",se:"-",sk:"-",sl:"-",sn:"-",sp:"-",sq:"-",sr:"-",st:"-",sv:"-",sw:"-",te:"-",tg:"-",th:"-",tk:"-",tn:"-",tr:"-",tw:"-",uk:"-",ur:"-",uz:"-",vi:"-",wo:"-",yo:"-",zh_CN:"-",zh_HK:"-",zh_TW:"-",zu:"-"},R.OPT_OUT),R.OPT_OUT);class GU extends zt{constructor(e){super();const t=e.width/2-e.height/2,n=e.width/2+e.height/2;this.moveTo(t,0).lineTo(n,0).lineTo(n,t).lineTo(e.width,t).lineTo(e.width,n).lineTo(n,n).lineTo(n,e.width).lineTo(t,e.width).lineTo(t,n).lineTo(0,n).lineTo(0,t).lineTo(t,t).close()}}const WU=new ji(20,5);class KU extends bi{constructor(e){const t=Ne()({size:WU,fill:"black"},e);super(new GU(t.size),t)}}class KL extends Ge{constructor(e,t){const n=Ne()({keyFill:"white",keyShadowFill:"black",lineWidth:1.3,cornerRadius:2,xShadowOffset:1.7,yShadowOffset:1.7,xMargin:0,yMargin:0,xAlign:"center",yAlign:"center",xPadding:4,yPadding:4,keyHeight:23,minKeyWidth:23,forceSquareKey:!1},t),s=new Ge({children:[e]}),r=new Ge({children:[s]}),a=new jl(r,{xAlign:n.xAlign,yAlign:n.yAlign,xMargin:n.xMargin,yMargin:n.yMargin}),o=new xt(0,0,1,1,n.cornerRadius,n.cornerRadius,{fill:n.keyShadowFill}),l=new xt(0,0,1,1,n.cornerRadius,n.cornerRadius,{fill:n.keyFill,stroke:"black",lineWidth:n.lineWidth}),h=()=>{let c=1;const f=n.keyHeight-n.yPadding;e.height>f&&(c=f/e.height),s.setScaleMagnitude(c);let g=Math.max(n.minKeyWidth,s.width+n.xPadding);if(n.forceSquareKey){const v=n.minKeyWidth-n.xPadding;let A=1;e.width>v&&(A=v/e.width),g=n.keyHeight,r.setScaleMagnitude(A)}a.setAlignBounds(new pt(0,0,g,n.keyHeight)),o.setRectBounds(a.bounds.shiftedXY(n.xShadowOffset,n.yShadowOffset)),l.setRectBounds(a.bounds)};e.boundsProperty.link(h),n.children=[o,l,a],super(n),this.disposeEmitter.addListener(()=>e.boundsProperty.unlink(h))}}const YL=10,YU=.6*Math.sqrt(3)*YL,jU={up:0,down:Math.PI,left:-Math.PI/2,right:Math.PI/2};class Da extends KL{constructor(e,t){const n=Ne()({arrowFill:"black",arrowStroke:"black",arrowLineJoin:"round",arrowLineWidth:3,arrowHeight:YL,arrowWidth:YU,yPadding:13,forceSquareKey:!0},t),s=n.arrowHeight,r=n.arrowWidth,a=n.arrowLineJoin,o=n.arrowLineWidth,l=n.arrowFill,h=n.arrowStroke,c=new zt;c.moveTo(s/2,0).lineTo(s,r+0).lineTo(0,r+0).close();const f=new bi(c,{fill:l,stroke:h,lineJoin:a,lineWidth:o,rotation:jU[e]});super(f,n)}}const XU=new Fe(new He("SCENERY_PHET/key.a",{en:"A",af:"A",am:"አ",ar:"أ",ar_KW:"A",ar_LY:"أ",ar_MA:"A",az:"A",be:"A",bg:"A",bn:"A",bs:"A",ca:"A",da:"A",de:"A",el:"Α",es:"A",es_PE:"A",eu:"A",fa:"A",fa_DA:"",fi:"A",fr:"A",gu:"A",ha:"A",hi:"A",hr:"A",ht:"A",hu:"A",hy:"A",ig:"A",is:"A",it:"A",iw:"A",ki:"A",kn:"A",ko:"A",ku:"A",lv:"A",mn:"A",mr:"A",ms:"A",mt:"A",nb:"A",ny:"A",om:"A",pl:"A",ps:"A",pt:"A",pt_BR:"A",ro:"A",sk:"A",sl:"A",sn:"A",sp:"A",sr:"A",sv:"A",sw:"A",te:"A",tg:"A",th:"กดแป้น A",tr:"A",ur:"A",uz:"A",vi:"A",yo:"A",zh_TW:"A",zu:"A"},R.OPT_OUT),R.OPT_OUT),QU=new Fe(new He("SCENERY_PHET/key.c",{en:"C",af:"C",am:"ቸ",ar:"ج",ar_KW:"C",ar_LY:"ج",ar_MA:"C",az:"C",be:"C",bg:"C",bn:"C",bs:"C",ca:"C",da:"C",de:"C",el:"C",es:"C",es_PE:"C",eu:"C",fa:"C",fa_DA:"C",fi:"C",fr:"C",gu:"C",ha:"C",hi:"C",hr:"C",ht:"C",hu:"C",hy:"C",ig:"C",is:"C",it:"C",iw:"C",ki:"C",kn:"C",ko:"C",ku:"C",lv:"C",mn:"C",mr:"C",ms:"C",mt:"C",nb:"C",ny:"C",om:"C",pl:"C",ps:"C",pt:"C",pt_BR:"C",ro:"C",sk:"C",sl:"C",sn:"C",sp:"C",sr:"C",sv:"C",sw:"C",te:"C",tg:"C",th:"กดแป้น C",tr:"C",ur:"C",uz:"C",vi:"C",yo:"C",zh_TW:"C",zu:"C"},R.OPT_OUT),R.OPT_OUT),JU=new Fe(new He("SCENERY_PHET/key.d",{en:"D",af:"D",am:"ደ",ar:"د",ar_KW:"D",ar_LY:"د",ar_MA:"D",az:"D",be:"D",bg:"D",bn:"D",bs:"D",ca:"D",da:"D",de:"D",el:"D",es:"D",es_PE:"D",eu:"D",fa:"D",fa_DA:"D",fi:"D",fr:"D",gu:"D",ha:"D",hi:"D",hr:"D",ht:"D",hu:"D",hy:"D",ig:"D",is:"D",it:"D",iw:"D",ki:"D",kn:"D",ko:"D",ku:"D",lv:"D",mn:"D",mr:"D",ms:"D",mt:"D",nb:"D",ny:"D",om:"D",pl:"D",ps:"D",pt:"D",pt_BR:"D",ro:"D",sk:"D",sl:"D",sn:"D",sp:"D",sr:"D",sv:"D",sw:"D",te:"D",tg:"D",th:"กดแป้น D",tr:"D",ur:"D",uz:"D",vi:"D",yo:"D",zh_TW:"D",zu:"D"},R.OPT_OUT),R.OPT_OUT),ZU=new Fe(new He("SCENERY_PHET/key.l",{en:"L",af:"L",am:"ለ",ar:"إل",ar_KW:"L",ar_LY:"ل",ar_MA:"L",az:"L",be:"L",bg:"L",bn:"L",bs:"L",ca:"L",da:"L",de:"L",el:"L",es:"L",es_PE:"L",eu:"L",fa:"L",fa_DA:"L",fi:"L",fr:"L",gu:"L",ha:"L",hi:"L",hr:"L",ht:"L",hu:"L",hy:"L",ig:"L",is:"L takki",it:"L",iw:"L",ki:"L",kn:"L",ko:"L",ku:"L",lg:"L",lo:"ກົດປຸ່ມ L",lt:"L",lv:"L",mi:"L",mk:"L",mn:"L",mr:"L",ms:"L",mt:"L",nb:"L",nn:"L",ny:"L",om:"L",pl:"L",ps:"L",pt:"L",pt_BR:"L",ro:"L",rw:"L",se:"L",sk:"L",sl:"L",sn:"L",sp:"L",sr:"L",st:"L",sv:"L",sw:"L",te:"L",tg:"L",th:"กดแป้น L",tk:"L",tn:"L",tr:"L",tw:"L",uk:"L",ur:"L",uz:"l",vi:"L",yo:"L",zh_CN:"L",zh_TW:"L",zu:"L"},R.OPT_OUT),R.OPT_OUT),$U=new Fe(new He("SCENERY_PHET/key.r",{en:"R",af:"R",am:"ረ",ar:"ص",ar_KW:"R",ar_LY:"ر",ar_MA:"R",az:"R",be:"R",bg:"R",bn:"R",bs:"R",ca:"R",da:"R",de:"R",el:"R",es:"R",es_PE:"R",eu:"R",fa:"R",fa_DA:"R",fi:"R",fr:"R",gu:"R",ha:"R",hi:"R",hr:"R",ht:"R",hu:"R",hy:"R",ig:"R",is:"R",it:"R",iw:"R",ki:"R",kn:"R",ko:"R",ku:"R",lv:"R",mn:"R",mr:"R",ms:"R",mt:"R",nb:"R",ny:"R",om:"R",pl:"R",ps:"R",pt:"R",pt_BR:"R",ro:"R",sk:"R",sl:"R",sn:"R",sp:"R",sr:"R",sv:"R",sw:"R",te:"R",tg:"R",th:"กดแป้น R",tr:"R",ur:"R",uz:"R",vi:"R",yo:"R",zh_TW:"R",zu:"R"},R.OPT_OUT),R.OPT_OUT),eG=new Fe(new He("SCENERY_PHET/key.s",{en:"S",af:"S",am:"ሰ",ar:"س",ar_KW:"S",ar_LY:"س",ar_MA:"S",az:"S",be:"S",bg:"S",bn:"S",bs:"S",ca:"S",da:"S",de:"S",el:"S",es:"S",es_PE:"S",eu:"S",fa:"S",fa_DA:"S",fi:"S",fr:"S",gu:"S",ha:"S",hi:"S",hr:"S",ht:"S",hu:"S",hy:"S",ig:"S",is:"S",it:"S",iw:"S",ki:"S",kn:"S",ko:"S",ku:"S",lv:"S",mn:"S",mr:"S",ms:"S",mt:"S",nb:"S",ny:"S",om:"S",pl:"S",ps:"S",pt:"S",pt_BR:"S",ro:"S",sk:"S",sl:"S",sn:"S",sp:"S",sr:"S",sv:"S",sw:"S",te:"S",tg:"S",th:"กดแป้น S",tr:"S",ur:"S",uz:"S",vi:"S",yo:"S",zh_TW:"S",zu:"S"},R.OPT_OUT),R.OPT_OUT),tG=new Fe(new He("SCENERY_PHET/key.w",{en:"W",af:"W",am:"ወ",ar:"W",ar_KW:"W",ar_LY:"و",ar_MA:"W",az:"W",be:"W",bg:"W",bn:"W",bs:"W",ca:"W",da:"W",de:"W",el:"W",es:"W",es_PE:"W",eu:"W",fa:"W",fa_DA:"W",fi:"W",fr:"W",gu:"W",ha:"W",hi:"W",hr:"W",ht:"W",hu:"W",hy:"W",ig:"W",is:"W",it:"W",iw:"W",ki:"W",kn:"W",ko:"W",ku:"W",lv:"W",mn:"W",mr:"W",ms:"W",mt:"W",nb:"W",ny:"W",om:"W",pl:"W",ps:"W",pt:"W",pt_BR:"W",ro:"W",sk:"W",sl:"W",sn:"W",sp:"W",sr:"W",sv:"W",sw:"W",te:"W",tg:"W",th:"กดแป้น W",tr:"W",ur:"W",uz:"W",vi:"W",yo:"W",zh_TW:"W",zu:"W"},R.OPT_OUT),R.OPT_OUT),iG=new Fe(new He("SCENERY_PHET/key.one",{en:"1",af:"1",am:"1",ar:"1",ar_KW:"1",ar_LY:"1",ar_MA:"1",az:"1",be:"1",bg:"1",bn:"1",bs:"1",ca:"1",da:"1",de:"1",el:"1",es:"1",es_PE:"1",eu:"1",fa:"۱",fa_DA:"1",fi:"1",fr:"1",gu:"1",ha:"1",hi:"1",hr:"1",ht:"1",hu:"1",hy:"1",ig:"1",is:"1",it:"1",iw:"1",ki:"Imwe",kn:"1",ko:"1",ku:"1",lv:"1",mn:"1",mr:"1",ms:"1",mt:"1",nb:"1",ny:"1",om:"1",pl:"1",ps:"1",pt:"1",pt_BR:"1",ro:"1",sk:"1",sl:"1",sn:"1",sp:"1",sr:"1",sv:"1",sw:"1",te:"1",tg:"1",th:"กดแป้น 1",tr:"1",ur:"1",uz:"1",vi:"1",yo:"1",zh_TW:"1",zu:"1"},R.OPT_OUT),R.OPT_OUT),nG=new Fe(new He("SCENERY_PHET/key.two",{en:"2",af:"2",am:"2",ar:"2",ar_KW:"2",ar_LY:"2",ar_MA:"2",az:"2",be:"2",bg:"2",bn:"2",bs:"2",ca:"2",da:"2",de:"2",el:"2",es:"2",es_PE:"2",eu:"2",fa:"۲",fa_DA:"2",fi:"2",fr:"2",gu:"2",ha:"2",hi:"2",hr:"2",ht:"2",hu:"2",hy:"2",ig:"2",is:"2",it:"2",iw:"2",ki:"Irĩ",kn:"2",ko:"2",ku:"2",lv:"2",mn:"2",mr:"2",ms:"2",mt:"2",nb:"2",ny:"2",om:"2",pl:"2",ps:"2",pt:"2",pt_BR:"2",ro:"2",sk:"2",sl:"2",sn:"2",sp:"2",sr:"2",sv:"2",sw:"2",te:"2",tg:"2",th:"กดแป้น 2",tr:"2",ur:"2",uz:"2",vi:"2",yo:"2",zh_TW:"2",zu:"2"},R.OPT_OUT),R.OPT_OUT),sG=new Fe(new He("SCENERY_PHET/key.three",{en:"3",af:"3",am:"3",ar:"3",ar_KW:"3",ar_LY:"3",ar_MA:"3",az:"3",be:"3",bg:"3",bn:"3",bs:"3",ca:"3",da:"3",de:"3",el:"3",es:"3",es_PE:"3",eu:"3",fa:"۳",fa_DA:"3",fi:"3",fr:"3",gu:"3",ha:"3",hi:"3",hr:"3",ht:"3",hu:"3",hy:"3",ig:"3",is:"3",it:"3",iw:"3",ki:"ithato",kn:"3",ko:"3",ku:"3",lv:"3",mn:"3",mr:"3",ms:"3",mt:"3",nb:"3",ny:"3",om:"3",pl:"3",ps:"3",pt:"3",pt_BR:"3",ro:"3",sk:"3",sl:"3",sn:"3",sp:"3",sr:"3",sv:"3",sw:"3",te:"3",tg:"3",th:"กดแป้น 3",tr:"3",ur:"3",uz:"3",vi:"3",yo:"3",zh_TW:"3",zu:"3"},R.OPT_OUT),R.OPT_OUT),rG=new Fe(new He("SCENERY_PHET/key.option",{en:"Option",af:"Opsie",am:"ምርጫ",ar:"خيار",ar_KW:"خيار",ar_LY:"الخيارات",ar_MA:"اختيارات",ar_SY:"خيار",az:"Seçim",be:"Варыянт",bg:"Option",bn:"Option",bs:"Opcija",ca:"Opcions",cs:"Možnosti",da:"Mulighed",de:"Option",el:"Επιλογή",es:"Opción",es_PE:"Opción",eu:"Aukera",fa:"گزینه",fa_DA:"گزینه",fi:"Valinta",fr:"Option",gu:"ઓપ્શન",ha:"zabi",hi:"विकल्प",hr:"Opcije",ht:"Opsyon",hu:"Option",hy:"Տարբերակ",ig:"Nhọrọ",is:"Valkostur",it:"Opzione",iw:"אפשרויות",ki:"Kũhagiria",kn:"Option",ko:"선택적",ku:"بژاردەکان",lt:"Option",mi:"Kōwhiringa",mn:"Сонголт",mr:"पर्याय",ms:"Option",mt:"Għażla",nb:"Alternativ",om:"Filannoo",pl:"Opcja",ps:"ټاکنه",pt:"Opção",pt_BR:"Opção",ro:"Opțiuni",rw:"Amahitamo",se:"Molssaeaktu",sk:"Možnosť",sl:"Možnost",sn:"Sarudzo",sp:"Kgetho",sr:"Опција",st:"Likhetho",sv:"Alternativ",sw:"Chaguo",te:"Option",tg:"Вариантҳо",th:"กดแป้น Option",ti:"Option",tr:"Seçenek",uk:"Option",ur:"اختیار",uz:"Variant",vi:"Tuỳ chọn",yo:"Aṣayan",zh_TW:"選項",zu:"inketho"},R.OPT_OUT),R.OPT_OUT),aG=new Fe(new He("SCENERY_PHET/key.alt",{en:"Alt",af:"Alt",ak:"Alt",am:"የቁልፍ ሰሌዳ.Alt",ar:"زر Alt فى لوحة المفاتيح",ar_KW:"Alt",ar_LY:"مفتاح 	Alt",ar_MA:"Alt",ar_SY:"زر Alt فى لوحة المفاتيح",az:"Alt",be:"Усё",bg:"Alt",bn:"Alt",bs:"Alt",ca:"Alt",da:"Alt",de:"Alt",el:"Alt",es:"Alt",es_ES:"Alt",es_MX:"Alt",es_PE:"Alt",eu:"Alt",fa:"Alt",fa_DA:"Alt",fi:"Alt",fr:"Alt",gl:"Alt",gu:"Alt",ha:"Alt",hi:"Alt",hr:"Alt",ht:"Alt",hu:"Alt",hy:"Alt",ig:"Alt",is:"Alt lykill",it:"Alt",iw:"Alt",ki:"Alt",kn:"Alt",ko:"Alt 키",ku:"کلیلی ئاڵت",ku_TR:"Alt ",lg:"Epeesa lya Alt ",lo:"ກົດປຸ່ມ Alt",lt:"Alt",lv:"Alt",mg:"Alt",mi:"Pākē",mk:"Alt",mn:"Alt",mr:"Alt की",ms:"Alt",mt:"Alt",my:"Alt",nb:"Alle",ne:"Alt ",nn:"Alt",ny:"Alt",om:"Jijjiirtuu (Alt)",pl:"Alt",ps:"Alt",pt:"Alt",pt_BR:"Alt",qu:"Alt",ro:"Alt",ru:"Alt",rw:"Alt",se:"Alt",sk:"Alt",sl:"Alt",sn:"Alt",sp:"Alt",sq:"Alt",sr:"Alt",st:"Alt",sv:"alt",sw:"Alt",te:"Alt",tg:"Alt",th:"กดแป้น Alt",tk:"Alt",tl:"Alt",tn:"Alt",tr:"Alt",tw:"Alt",uk:"Alt",ur:"Alt",uz:"Alt",vi:"Alt",wo:"Alt",yo:"yiyan",zh_CN:"Alt",zh_HK:"Alt",zh_TW:"Alt",zu:"okunye"},R.OPT_OUT),R.OPT_OUT),oG=new Fe(new He("SCENERY_PHET/key.capsLock",{en:"Caps Lock",af:"Caps Lock",ak:"Caps Lock",am:"የቁልፍ ሰሌዳ.Caps Lock (ካፕስ ሎክ ፊደልን ወደ ትልቆቹ ወይም ወደ ትንሾቹ መቀያየሪያ)",ar:"زر Caps Lock فى لوحة المفاتيح",ar_KW:"Caps Lock",ar_LY:"مفتاح 	Caps Lock",ar_MA:"Caps Lock",az:"Caps Lock",be:"Верхні рэгістр",bg:"Caps Lock",bn:"Caps Lock",bs:"Caps Lock",ca:"Majúscules activades",da:"Caps lock",de:"Sperre",el:"Κεφαλαία",es:"Bloquear Mayúsculas",es_ES:"Bloqueo de mayúsculas",es_MX:"Bloquear Mayús",es_PE:"Bloq Mayús",eu:"Maiuskulen blokeoa",fa:"Caps Lock",fa_DA:"Caps Lock",fi:"Aakkoslukko",fr:"Verrouillage des majuscules",gl:"Bloq Mayús",gu:"કેપ્સ લોક",ha:"Makullin alƙalumma",hi:"कैप्स लॉक",hr:"Caps Lock",ht:"Caps Lock",hu:"Caps Lock",hy:"Caps Lock",ig:"Nnukwu Mkpụrụedemede",in:"Caps Lock",is:"Caps Lock lykill",it:"Blocco maiuscole",iw:"Caps Lock",ki:"Caps Lock",kn:"Caps Lock",ko:"캡 잠그기",ku:"کلیلی کاپیتەڵ",ku_TR:"qefilandin/ girtîgeha kûm",lg:"Epeesa lya Caps Lock ",lo:"ປຸ່ມ Caps Lock",lt:"Caps Lock",lv:"Caps Lock",mg:"Caps Lock",mi:"Pāpūmatua",mn:"Caps Lock",mr:"कॅप्स लॉक",ms:"Caps Lock",mt:"Ittri Kapitali",my:"Caps Lock",nb:"Caps Lock",ne:"कैप्स लॉक",ny:"Caps Lock",om:"Furtuu Qubguddaa",pl:"Caps Lock",ps:"Caps Lock",pt:"Caps Lock",pt_BR:"Caps Lock",qu:"Caps Lock",ro:"Caps Lock",ru:"Caps Lock",rw:"Caps Lock",se:"Caps Lock",sk:"Caps Lock",sl:"Velike črke",sn:"Caps Lock",sp:"Caps Lock",sq:"Caps Lock",sr:"Caps Lock",st:"Senotlolo sa litlhaku tse kholo",sv:"Caps lock",sw:"Kitufe cha herufi kubwa",te:"Caps Lock",tg:"Ҳарфҳои калон даргирон",th:"กดแป้น Caps Lock",tk:"Caps Lock",tl:"Caps Lock",tn:"Ditlhaka tse di tona",tr:"Büyük Harf Tuşu",tw:"Deɛ ɛbɔ Ntwerɛdeɛ Akɛseɛ",uk:"Caps Lock",ur:"کیاپس لوک",uz:"Caps Lock",vi:"Caps Lock",wo:"Caps Lock",yo:"Botini ise leta nla",zh_CN:"大写锁定",zh_HK:"大寫鎖定",zh_TW:"大寫鎖定",zu:"Caps Lock"},R.OPT_OUT),R.OPT_OUT),lG=new Fe(new He("SCENERY_PHET/key.esc",{en:"Esc",af:"Esc",ak:"Esc",am:"እየተካሄድ ካለዉ ሁነት የሚያስወጣ የቁልፍ ሰሌዳ(ዝለል)",ar:"زر Esc فى لوحة المفاتيح",ar_KW:"Esc",ar_LY:"مفتاح 	Esc",ar_MA:"الزر Esc",ar_SY:"زر Caps Lock فى لوحة المفاتيح",az:"Esc",be:"Esc",bg:"Esc",bn:"Esc",bs:"Izađi",ca:"Esc.",da:"Esc",de:"Esc",el:"Esc",es:"Esc",es_ES:"Esc",es_MX:"Esc",es_PE:"Esc",eu:"Esc",fa:"Esc",fa_DA:"Esc",fi:"Esc",fr:"Echap",gl:"Esc",gu:"Esc",ha:"Fita",hi:"Esc",hr:"Tipka Esc",ht:"Esc",hu:"Esc",hy:"Esc",ig:"Mgbapụ",in:"Esc",is:"Esc lykill",it:"Esc",iw:"Esc",ka:"გამოსვლა",ki:"Honoka",kk:"Esc",kn:"Esc",ko:"Esc 키",ku:"کلیلی ئیسکەیپ",ku_TR:"Esc Kilît",lg:"Epeesa lya Esc",lo:"ກົດປຸ່ມ Esc",lt:"Esc",lv:"Esc",mg:"Mivoaka",mi:"Pāputa",mk:"Esc",mn:"Esc",mr:"बाहेर पडा",ms:"Esc",mt:"Oħroġ",my:"Esc",nb:"Esc",ne:"पलायन कुञ्जी (Esc Key)",nn:"Esc",ny:"Esc",om:"Darbi",pl:"Esc",ps:"Esc",pt:"Esc",pt_BR:"Esc",qu:"Esc",ro:"Esc",ru:"Esc",rw:"Esc",se:"Esc",si:"Esc",sk:"Esc",sl:"Esc",sn:"Esc",sp:"Esc",sq:"Esc",sr:"Изађи",st:"Esc",sv:"Esc",sw:"Ondoka",te:"Esc",tg:"Esc",th:"กดแป้น Esc",tk:"Esc",tl:"Esc",tn:"Tswaa",tr:"Çıkış",tw:"Firi mu",uk:"Esc",ur:"باہر",uz:"Esc",vi:"Esc",wo:"Esc",yo:"ona abayo",zh_CN:"Esc",zh_HK:"Esc",zh_TW:"ESC 鍵",zu:"Esc"},R.OPT_OUT),R.OPT_OUT),hG=new Fe(new He("SCENERY_PHET/key.end",{en:"End",af:"Einde",ak:"End",am:"መጨረሻ",ar:"النهاية",ar_KW:"End",ar_LY:"مفتاح النهاية",ar_MA:"نهاية",ar_SA:"النهاية",az:"Son",be:"End",bg:"End",bn:"শেষ",bo:"མཇུག",bs:"Kraj",ca:"Fi",da:"Slut",de:"Ende",el:"Τέλος",es:"Fin",es_ES:"Fin",es_MX:"Fin",es_PE:"Fin",eu:"Amaiera",fa:"End",fa_DA:"End",fi:"Loppu",fr:"Fin",gl:"Fin",gu:"અંત",ha:"Ƙarshe",hi:"End",hr:"Tipka End",ht:"End",hu:"End",hy:"End",ig:"Ngwucha",in:"End",is:"End lykill",it:"Fine",iw:"End",ja:"",ka:"დასრულება",ki:"Mùico",kk:"End",kn:"End",ko:"끝",ku:"کۆتایی",ku_TR:"Dawîn/ Kilît dawîn",lg:"Epeesa lya End",lo:"End",lt:"End",lv:"End",mg:"Farany",mi:"Pāmutu",mn:"End",mr:"समाप्त",ms:"End",mt:"Tmiem",my:"End ",nb:"Slutt",ne:"अन्त्य कुञ्जी ( End key)",ny:"End",om:"Xummura",pl:"End",ps:"End",pt:"End",pt_BR:"End",qu:"Tukuy",ro:"End",ru:"End",rw:"Iherezo",se:"End",sk:"End",sl:"Konec",sn:"End",sp:"Mafelelo",sq:"End",sr:"Крај",st:"Qetello",sv:"End",sw:"Mwisho",te:"End",tg:"Охир",th:"สิ้นสุด",tk:"End",tl:"Wakas",tn:"Fetsa",tr:"Son",tw:"Awiei",uk:"End",ur:"ختم شد",uz:"End",vi:"End",wo:"End",yo:"Ipari",zh_CN:"End",zh_HK:"End",zh_TW:"End 鍵",zu:"qeda"},R.OPT_OUT),R.OPT_OUT),uG=new Fe(new He("SCENERY_PHET/key.enter",{en:"Enter",af:"ingaan",ak:"Enter",am:"ግባ/ቢ",ar:"ادخال",ar_KW:"Enter",ar_LY:"مفتاح 	Enter",ar_MA:"تأكيد",ar_SA:"ادخل",ay:"Enter",az:"Enter",be:"Enter",bg:"Enter",bn:"প্রবেশ",bs:"Unos",ca:"Accepta",da:"Enter",de:"Eingabe",ee:"Zi dzi",el:"Καταχώριση",es:"Enter",es_ES:"Intro",es_MX:"Enter",es_PE:"Entrar",eu:"Enter",fa:"Enter",fa_DA:"Enter",fi:"Enter",fr:"Entrer",ga:"Iontráil",gl:"Enter",gu:"Enter",ha:"Shiga",hi:"Enter",hr:"Tipka Enter",ht:"Enter",hu:"Enter",hy:"Enter",ig:"Imetụ Aka",in:"Enter",is:"Vendihnappur",it:"Invio",iw:"Enter",ka:"შეყვანა",ki:"Gutonyia",kk:"Enter",kn:"Enter",ko:"입력",ku:"کلیلی ئێنتەر",ku_TR:"derbasbûn/ Kilît derbasbûn",lg:"Epeesa lya Enter",lo:"ກົດປຸ່ມ Enter",lt:"Enter",lv:"Enter",mg:"Ampidiro",mi:"Pāuru",mk:"Enter",mn:"Enter",mr:"एन्टर",ms:"Enter",mt:"Daħħal",my:"Enter",nb:"Kjør",ne:"प्रविष्ट कुञ्जी (Enter Key)",nn:"Enter",ny:"Enter",om:"Seeni",pl:"Enter",ps:"Enter",pt:"Enter",pt_BR:"Enter",qu:"Yaykuy",ro:"Enter",ru:"Enter",rw:"Injira",se:"Enter",si:"ඇතුලත් කරන්න",sk:"Enter",sl:"Enter",sn:"Pinda",sp:"Tsena",sq:"Enter",sr:"Унос",st:"Kenya",sv:"Enter",sw:"Ingiza",te:"Enter",tg:"Enter",th:"เข้าใช้งาน",tk:"Enter",tl:"Pumasok",tn:"Tsenya",tr:"Giriş",tw:"Wuramu",uk:"Ввести",ur:"داخل ہوں",uz:"Enter",vi:"Enter",wo:"Enter",yo:"Sàtẹ̀wọlé",zh_CN:"输入",zh_HK:"Enter",zh_TW:"Enter 鍵",zu:"ngena"},R.OPT_OUT),R.OPT_OUT),cG=new Fe(new He("SCENERY_PHET/key.fn",{en:"Fn",af:"Fn",am:"አገልግሎት ሰጭ የቁልፍ ሰሌዳ",ar:"زر Fn فى لوحة المفاتيح",ar_KW:"Fn",ar_LY:"مفتاح 	Fn",ar_MA:"الزر Fn",az:"Fn",be:"Fn",bg:"Fn",bn:"Fn",bs:"Fn",ca:"Funció multimèdia",da:"fn",de:"Fn",el:"Fn",es:"Fn",es_ES:"fn",es_MX:"Fn",es_PE:"Fn",eu:"Fn",fa:"Fn",fa_DA:"Fn",fi:"Fn",fr:"Fn",ga:"Fn",gl:"Fn",gu:"Fn",ha:"Fn",hi:"फंक्शन",hr:"Fn",ht:"Fn",hu:"Fn",hy:"Fn",ig:"Fn",in:"Fn",is:"Fn lykill",it:"Fn",iw:"Fn",ki:"Fn",kn:"Fn",ko:"Fn",ku:"کلیلی دووەم فەنکشن - واتا ئێف ئێن",ku_TR:"Fn Kilît",lg:"Epeesa lya Fn",lo:"Fn",lt:"Fn",lv:"Fn",mg:"Fn",mi:"Fn",mn:"Fn",mr:"Fn",ms:"Fn",mt:"Funzjoni",my:"Fn",nb:"fn",ne:"फंक्शन Fn",ny:"Fn",om:"Fn",pl:"Fn",ps:"Fn",pt:"Fn",pt_BR:"Fn",qu:"Fn",ro:"Fn",ru:"Fn",rw:"Fn",se:"Fn",sk:"Fn",sl:"Fn (funkcijska tipka)",sn:"Fn",sp:"Fn",sq:"Fn",sr:"Fn",st:"Fn",sv:"fn",sw:"Fn",te:"Fn",tg:"Fn",th:"กดแป้น Fn",tk:"Fn",tl:"Fn",tn:"Fn",tr:"Fn",tw:"Fn",uk:"Fn",ur:"Fn",uz:"Fn",vi:"Fn",wo:"Fn",yo:"bọtini iṣẹ",zh_CN:"Fn",zh_HK:"Fn",zh_TW:"Fn 鍵",zu:"Fn"},R.OPT_OUT),R.OPT_OUT),dG=new Fe(new He("SCENERY_PHET/key.home",{en:"Home",af:"Tuis",ak:"Home",am:"ቤት",ar:"الشاشة الرئيسية",ar_KW:"Home",ar_LY:"الصفحة الرئيسية",ar_MA:"الصفحة الرئيسية",az:"Home",be:"Дадому",bg:"Home",bn:"হোম",bo:"གཙོ་ལྡེབ།",bs:"Početak",ca:"Inici",cs:"Domů",da:"Tilbage",de:"Zurück",el:"Αρχική",es:"Inicio",es_ES:"Home",es_MX:"Inicio",es_PE:"Inicio",eu:"Hasiera",fa:"Home",fa_DA:"Home",fi:"Koti",fr:"Accueil",ga:"Abhaile",gl:"Inicio",gu:"શરૂઆત",ha:"Gida",hi:"गृह",hr:"Tipka Home",ht:"Paj Akèy",hu:"Home",hy:"Home",ig:"Ebe Obibi",in:"Home",is:"Heim",it:"Home",iw:"Home",ki:"kwambĩrĩria",kk:"Home",kn:"Home",ko:"홈",ku:"سەرەتا",ku_TR:"Xane/malê klit",lg:"Epeesa lya Home ",lo:"ປຸ່ມ Home",lt:"Home",lv:"Home",mg:"Trano",mi:"Kāinga",mn:"Home",mr:"मूळ स्थिती",ms:"Home",mt:"Bidu",my:"မူလစာမျက်နှာ",nb:"Hjem",ne:"गृह (Home Key)",nn:"Heim",ny:"Nyumba",om:"Ka'umsa",pl:"Home",ps:"Home",pt:"Iniciar",pt_BR:"Home",qu:"Wasi",ro:"Acasă",ru:"Home",rw:"Ahabanza",sd:"مکيہ صفحو",se:"Home",sk:"Home",sl:"Domov",sn:"Home",sp:"Gae",sq:"Home",sr:"Почетак",st:"Hae",sv:"Hem",sw:"Mwanzo",te:"Home",tg:"Асосӣ",th:"กดแป้น Home",tk:"Home",tl:"Home",tn:"Ko Gae",tr:"Anasayfa",tw:"Efie",uk:"Home",ur:"ہوم",uz:"Home",vi:"Home",wo:"Keur",yo:"Ile",zh_CN:"Home",zh_HK:"Home",zh_TW:"Home 鍵",zu:"ekhaya"},R.OPT_OUT),R.OPT_OUT),pG=new Fe(new He("SCENERY_PHET/key.pageDown",{en:"Pg Dn",af:"Pg Dn",ak:"Pg Dn",am:"የቁልፍ ሰሌዳን በመጠቀም አንድ ገፅ ወደ ታች ማንሸራተትበመጠቀም አንድ ገፅ ወደላይ ማንሸራተት)",ar:"أسفل الصفحة",ar_KW:"Pg Dn",ar_LY:"صفحة لأسفل",ar_MA:"اضغط هنا للنزول لأسفل الصفحة",ar_SA:"للأعلى",ay:"Pg Dn",az:"Pg Dn",be:"Pg Dn",bg:"Pg Dn",bn:"নিচের  পৃষ্ঠা",bs:"Pg Dn",ca:"Pàgina enrere",da:"Side ned",de:"Pg Down",ee:"Yi anyime",el:"Pg Down",es:"Pg abajo",es_ES:"página adelante",es_MX:"Av Pág",es_PE:"Página abajo",eu:"Pg Down",fa:"Pg Dn",fa_DA:"Pg Dn",fi:"Sivu alaspäin",fr:"Pg Bas",ga:"Lth anuas",gl:"Re Pág",gu:"Pg Dn",ha:"Zuwa Ƙasan shafi",hi:"पेज  नीचे",hr:"Tipka Page Down",ht:"Pj Anba",hu:"Pg Dn",hy:"Pg Dn",ig:"Gaa N'okpuru",in:"Pg Dn",is:"Síða niður",it:"Pag giù",iw:"Pg Dn",ki:"Ikurukia thi",kk:"Pg Dn",kn:"ಪುಟವನ್ನು ಕೆಳಗೆ ಮಾಡಿ",ko:"다음 페이지로",ku:"کلیلی لاپەڕەی خوارەوە",ku_TR:"rûpel berjêr",lg:"PG Dn",lo:"ກົດປຸ່ມ Pg Dn",lt:"Pg Dn",lv:"Pg Dn",mg:"Pejy Ambany",mi:"Pāheke",mk:"Pg Dn",mn:"Дэлгэц доош",mr:"खालचे पान",ms:"Pg Dn",mt:"Paġna Isfel",nb:"Ned en side",ne:"Pg Dn",nn:"Page Down",ny:"Pg Dn",om:"Fuulgadee",pl:"Pg Dn",ps:"Pg Dn",pt:"Pg Down",pt_BR:"Pg Dn/Descer página",qu:"Pg Dn",ro:"Pg Dn",ru:"Pg Dn",rw:"Paji yo hasi",se:"Pg Dn",si:"පිටුව පහළට",sk:"Pg Dn",sl:"Pg Dn",sn:"Pg Dn",sp:"Pg Dn",sq:"Pg Dn",sr:"Pg Dn",st:"Leqephe Tlase",sv:"Pg Dn",sw:"shusha kurasa",ta:"விசைப்பலகையின் PageDown",te:"Pg Dn",tg:"Ба поён",th:"เลื่อนหน้าลง",tk:"Sahypa aşak",tl:"Pg Dn",tn:"Tsebe ko tlase",tr:"Aşağı",tw:"Pia ko fom koraa",uk:"Pg Down",ur:"نچلا پیج",uz:"Pg Dn",vi:"Pg Down",wo:"Wathi Xët ",yo:"oju-iwe si isalẹ",zh_CN:"Pg Dn",zh_HK:"Pg Dn",zh_TW:"Page Down 鍵",zu:"ehla ngekhasi"},R.OPT_OUT),R.OPT_OUT),fG=new Fe(new He("SCENERY_PHET/key.pageUp",{en:"Pg Up",af:"Pg Up",ak:"Pg Up",am:"የቁልፍ ሰሌዳን በመጠቀም አንድ ገፅ ወደላይ ማንሸራተት",ar:"اعلى الصفحة",ar_KW:"Pg Up",ar_LY:"صفحة لأعلى",ar_MA:"اضغط هنا للصعود لأعلى الصفحة",ar_SA:"للأسفل",ay:"Pg Up",az:"Pg Up",be:"Pg Up",bg:"Pg Up",bn:"উপরের পৃষ্ঠা",bs:"Pg Up",ca:"Pàgina endavant",da:"Side op",de:"Pg Up",ee:"ge ɖe eme yi dzi",el:"Pg Up",es:"Pg arriba",es_ES:"página atrás",es_MX:"Re Pág",es_PE:"Página arriba",eu:"Pg Up",fa:"Pg Up",fa_DA:"Pg Up",fi:"Sivu ylöspäin",fr:"Pg Haut",ga:"Lth aníos",gl:"Av Pág",gu:"Pg Up",ha:"Zuwa saman shafi",hi:"पेज  ऊपर",hr:"Tipka Page Up",ht:"Pj Anwo",hu:"Pg Up",hy:"Pg Up",ig:"Gaa N'elu",in:"Pg Up",is:"Síða upp",it:"Pag su",iw:"Pg Up",ki:"Ikurukia iguru",kk:"Pg Up",kn:"ಪುಟವನ್ನು ಮೇಲೆ ಮಾಡಿ",ko:"앞 페이지로",ku:"کلیلی لاپاڕەی سەرەوە",ku_TR:"rûpel jorve",lg:"PG Up",lo:"ກົດປຸ່ມ Pg Up",lt:"Pg Up",lv:"Pg Up",mg:"Pejy Ambony",mi:"Pāhiki",mk:"Pg Up",mn:"Дэлгэц дээш",mr:"वरचे पान",ms:"Pg Up",mt:"Paġna Fuq",nb:"Opp en side",ne:"Pg Up",nn:"Page Up",ny:"Pg Up",om:"Fuulolee",pl:"Pg Up",ps:"Pg Up",pt:"Pg Up",pt_BR:"Pg Up/Subir página",qu:"Pg Up",ro:"Pg Up",ru:"Pg Up",rw:"Paji yo hejuru",se:"Pg Up",si:"පිටුව ඉහළට",sk:"Pg Up",sl:"Pg Up",sn:"Pg Up",sp:"Pg Up",sq:"Pg Up",sr:"Pg Up",st:"Leqephe Holimo",sv:"Pg Up",sw:"pandisha kurasa",ta:"விசைப்பலகையின் PageUp",te:"Pg Up",tg:"Ба боло",th:"เลื่อนหน้าขึ้น",tk:"Sahypa ýokaryk",tl:"Pg Up",tn:"Tsebe ko godimo",tr:"Yukarı",tw:"Pia ko soro koraa",uk:"Pg Up",ur:"اوپری پیج",uz:"Pg Up",vi:"Pg Up",wo:"Yeek Xët ",yo:"oju-iwe soke",zh_CN:"Pg Up",zh_HK:"Pg Up",zh_TW:"Page Up 鍵",zu:"ikhasi phezulu"},R.OPT_OUT),R.OPT_OUT),mG=new Fe(new He("SCENERY_PHET/key.space",{en:"Space",af:"spasie",ak:"Space",am:"የቁልፍ ሰሌዳ በመጠቀም ቦታ መስጠት",ar:"فضاء",ar_KW:"Space",ar_LY:"مفتاح Space",ar_MA:"Space",ar_SA:"فراغ",ay:"Space",az:"Boşluq (Space)",be:"Прастора",bg:"Space",bn:"Space",bo:"སྟོང་ཆ།",bs:"Razmak",ca:"Espai",cs:"Mezerník",da:"Mellemrum",de:"Leertaste",ee:"Memama",el:"Διάστημα",es:"Espacio",es_ES:"Barra espaciadora",es_MX:"Espacio",es_PE:"Espacio",eu:"Space",fa:"Space",fa_DA:"Space",fi:"Välilyönti",fr:"Espace",ga:"Spás",gl:"Espazo",gu:"Space",ha:"Sarari",hi:"अंतराल",hr:"Razmaknica",ht:"Espas",hu:"Szóköz",hy:"Space",ig:"Oghere",in:"Spasi",is:"Bilslá",it:"Spazio",iw:"רווח",ki:"Mwanya/Kiharo",kk:"Space",kn:"ಸ್ಪೇಸ್ Space",ko:"스페이스 키",ku:"بۆشایی",ku_TR:"Çih",lg:"Epeesa lya space ",lo:"ກົດປຸ່ມ Space",lt:"Tarpas",lv:"Space",mg:"Elanelana",mi:"Āputa",mk:"Space",mn:"Space",mr:"स्पेस बार",ms:"Space",mt:"Spazju",my:"Space",nb:"Mellomrom",ne:"स्पेस",nl:"Spatie",nn:"Mellomrom",ny:"Mpata",om:"Iddoo",pl:"Spacja",ps:"Space",pt:"Espaço",pt_BR:"Espaço",qu:"Yanqay",ro:"Space",ru:"Пробел",rw:"Umwanya",se:"Space",si:"අවකාශය",sk:"Medzera",sl:"Preslednica",sn:"Sipesi",sp:"Sekgoba",sq:"Space",sr:"Размак",st:"Sebaka",sv:"Mellanslag",sw:"Nafasi",te:"Space",tg:"Пробел",th:"กดแป้น Space",tk:"Boşluk",tl:"Spce",tn:"Phatlha",tr:"Boşluk",tw:"Gya kwan tum",uk:"Space",ur:"جگہ (اسپیس)",uz:"Space",vi:"Space",wo:"Digënte",yo:"Alàfo",zh_CN:"空格",zh_HK:"空白鍵",zh_TW:"空白鍵",zu:"isikhala"},R.OPT_OUT),R.OPT_OUT),gG=new Fe(new He("SCENERY_PHET/key.shift",{en:"Shift",af:"skuif",ak:"Shift",am:"ቀይር",ar:"زرShift في لوحة المفاتيح",ar_KW:"Shift",ar_LY:"مفتاح Shift",ar_MA:"Shift",ar_SA:"shift",ay:"Shift",az:"Yerdəyişmə",be:"Shift",bg:"Shift",bn:"শিফট",bs:"Shift",ca:"Majúscules",da:"Skift",de:"Shift",ee:"Trɔtrɔ",el:"Shift",es:"Shift",es_ES:"Shift",es_MX:"Shift",es_PE:"Cambiar",eu:"Shift",fa:"Shift",fa_DA:"Shift",fi:"Vaihto",fr:"Maj",ga:"Imlaoid",gl:"Shift",gu:"Shift",ha:"Madannin shift",hi:"शिफ्ट",hr:"Tipka Shift",ht:"Deplase",hu:"Shift",hy:"Shift",ig:"Segharia",in:"Shift",is:"Skiptihnappur",it:"Maiuscolo",iw:"Shift",ki:"Kũrĩkĩrĩ-inĩ",kk:"Shift",kn:"ಶಿಫ್ಟ್  Shift",ko:"시프트 키",ku:"کلیی شیفت",ku_TR:"tarloqî",lg:"Epeesa lya Shift",lo:"ກົດປຸ່ມ Shift",lt:"Shift",lv:"Shift",mg:"fiovàna",mi:"Pāhiki",mk:"Shift",mn:"Shift",mr:"बदला",ms:"Shift",mt:"Xift",my:"Shift",nb:"Skift",ne:"सिफ्ट",nn:"Shift",ny:"Shift",om:"Jijjiirraa",pl:"Shift",ps:"Shift",pt:"Shift",pt_BR:"Shift",qu:"Tikray",ro:"Shift",ru:"Shift",rw:"Shift",se:"Shift",si:"මාරුවීමේ යතුර",sk:"Shift",sl:"Dvigalka",sn:"Shifiti",sp:"Šuthiša",sq:"Shift",sr:"Shift",st:"Chechisa",sv:"Shift",sw:"hamisha",ta:"Shift",te:"Shift",tg:"Shift",th:"กดแป้น Shift",tk:"Shift",tl:"Shift",tn:"Tshutiso",tr:"Değiştir",tw:"Twe kɔ",uk:"Shift",ur:"شِفٹ بٹن",uz:"Shift",vi:"Shift",wo:"Shift",yo:"Yi lọ yi bọ",zh_CN:"Shift",zh_HK:"Shift",zh_TW:"Shift 鍵",zu:"shift"},R.OPT_OUT),R.OPT_OUT),yG=new Fe(new He("SCENERY_PHET/key.tab",{en:"Tab",af:"Tab",ak:"Tab",am:"የቁልፍ ሰሌዳ በመጠቀም ወደ ጎን በተወሰነ ልዩነት መሄድ",ar:"زرTab في لوحة المفاتيح",ar_KW:"Tab",ar_LY:"مفتاح Tab",ar_MA:"Tab",ar_SA:"انقر",ay:"Tab",az:"Tab",be:"Tab",bg:"Tab",bn:"ট্যাব",bs:"Tab",ca:"Tab.",cs:"Tabulátor",da:"Tab",de:"Tabulator",ee:"Kpɔɖeŋudzesi",el:"Tab",es:"Tab",es_ES:"Tabulador",es_MX:"Tab",es_PE:"Tab",eu:"Tab",fa:"دکمۀ Tab کیبورد",fa_DA:"دکمۀ Tab کیبورد",fi:"Sarkain",fr:"Tab",ga:"Táb",gl:"Tab",gu:"Tab",ha:"Tab",hi:"टैब",hr:"Pošaljite zapisnik unosa",ht:"Onglè",hu:"Tabulátor",hy:"Tab",ig:"Imetụ Aka",in:"Tab",is:"Dálklykill",it:"Tabulazione",iw:"Tab",ki:"Tabu",kk:"Tab",kn:"ಟ್ಯಾಬ್ Tab",ko:"탭 키",ku:"کلیلی تاب",ku_TR:"tab",lg:"Epeesa lya tab",lo:"ກົດປຸ່ມ Tab",lt:"Tab",lv:"Tab",mg:"Tab",mi:"Ripa",mk:"Таб",mn:"Tab",mr:"टॅब",ms:"Tab",mt:"Tab",my:"Tab",nb:"Tab",ne:"ट्याब",nn:"Tabulator",ny:"Tab",om:"Caancala",pl:"Tab",ps:"Tab",pt:"Tab",pt_BR:"Tab",qu:"Tab",ro:"Tab",ru:"Tab",rw:"Tab",se:"Tab",si:"ටැබ් යතුර",sk:"Tab",sl:"Tab (tabulatorska tipka)",sn:"Tebhu",sp:"Tab",sq:"Tab",sr:"Tab",st:"Tlanya",sv:"Tab",sw:"kichupo",ta:"Tab",te:"Tab",tg:"Tab",th:"กดแป้น Tab",tk:"Tab",tl:"Tab",tn:"Tab",tr:"Sekme",tw:"Kɔ foforɔ so ",uk:"Tab",ur:"ٹیاب",uz:"Tab",vi:"Tab",wo:"Tab",yo:"táàbù",zh_CN:"Tab",zh_HK:"Tab",zh_TW:"Tab 鍵",zu:"Tab"},R.OPT_OUT),R.OPT_OUT);class On extends KL{constructor(e,t){const n=Ne()({font:new ki({size:16}),fill:"black",textMaxWidth:55,xPadding:11},t),s=new pi(e,{font:n.font,fill:n.fill,maxWidth:n.textMaxWidth});super(s,n),this.addDisposable(s)}static getAltKeyString(){return Zn.mac?rG:aG}static altOrOption(e){return new On(On.getAltKeyString(),e)}static capsLock(e){return new On(oG,e)}static esc(e){return new On(lG,e)}static end(e){return new On(hG,e)}static enter(e){return new On(uG,e)}static fn(e){return new On(cG,e)}static home(e){return new On(dG,e)}static pageDown(e){return new On(pG,e)}static pageUp(e){return new On(fG,e)}static space(e){return new On(mG,e)}static shift(e){return new On(gG,e)}static tab(e){return new On(yG,e)}}class jn extends On{constructor(e,t){const n=Ne()({xPadding:5,forceSquareKey:!0},t);super(e,n)}static a(e){return new jn(XU,e)}static c(e){return new jn(QU,e)}static d(e){return new jn(JU,e)}static l(e){return new jn(ZU,e)}static r(e){return new jn($U,e)}static s(e){return new jn(eG,e)}static w(e){return new jn(tG,e)}static one(e){return new jn(iG,e)}static two(e){return new jn(nG,e)}static three(e){return new jn(sG,e)}}const bA=1.3,wV=16,SV=new ki(16);class Mn{constructor(){}static iconRow(e,t){const n=Ne()({spacing:bA,children:e},t);return new _i(n)}static iconOrIcon(e,t,n){const s=Ut({spacing:Mn.DEFAULT_ICON_SPACING},n),r=new kt(WL,{font:SV,maxWidth:wV});return Mn.iconRow([new Ge({children:[e]}),r,new Ge({children:[t]})],s)}static iconToIcon(e,t,n){const s=Ut({spacing:Mn.DEFAULT_ICON_SPACING/2},n),r=new kt(UU,{font:SV,maxWidth:wV});return Mn.iconRow([new Ge({children:[e]}),r,new Ge({children:[t]})],s)}static iconPlusIcon(e,t,n){return Mn.iconPlusIconRow([e,t],n)}static iconPlusIconRow(e,t){const n=Ut({plusIconSize:new ji(8,1.2),spacing:Mn.DEFAULT_ICON_SPACING},t),s=[];for(let r=0;r<e.length;r++)s.push(new Ge({children:[e[r]]})),r<e.length-1&&s.push(new KU({size:n.plusIconSize}));return Mn.iconRow(s,{spacing:n.spacing})}static shiftPlusIcon(e,t){const n=On.shift();return Mn.iconPlusIcon(n,e,t)}static altPlusIcon(e,t){const n=On.altOrOption();return Mn.iconPlusIcon(n,e,t)}static spaceOrEnter(){const e=On.space(),t=On.enter();return Mn.iconOrIcon(e,t)}static upOrDown(){const e=new Da("up"),t=new Da("down");return Mn.iconOrIcon(e,t)}static wasdRowIcon(e){const t=Ne()({spacing:bA},e),n=jn.w(),s=jn.a(),r=jn.s(),a=jn.d(),o=[n,s,r,a];return Mn.iconRow(o,t)}static arrowKeysRowIcon(e){const t=Ne()({spacing:bA},e),n=new Da("up"),s=new Da("left"),r=new Da("down"),a=new Da("right");return Mn.iconRow([n,s,r,a],t)}static arrowOrWasdKeysRowIcon(e){const t=Ne()({spacing:Mn.DEFAULT_ICON_SPACING},e),n=Mn.arrowKeysRowIcon(),s=Mn.wasdRowIcon();return Mn.iconOrIcon(n,s,t)}static pageUpPageDownRowIcon(e){const t=Ne()({spacing:Mn.DEFAULT_ICON_SPACING},e),n=On.pageUp(),s=On.pageDown(),r=[n,s];return Mn.iconRow(r,t)}static upDownArrowKeysRowIcon(e){const t=new Da("up"),n=new Da("down");return Mn.iconRow([t,n],e)}static leftRightArrowKeysRowIcon(e){const t=new Da("left"),n=new Da("right");return Mn.iconRow([t,n],e)}static fromHotkeyData(e){const t=e.keyDescriptorsProperty.value[0].modifierKeys.map(s=>Mn.ENGLISH_KEY_TO_KEY_NODE.get(s)),n=Mn.ENGLISH_KEY_TO_KEY_NODE.get(e.keyDescriptorsProperty.value[0].key);return Mn.iconPlusIconRow([...t,n])}}Mn.DEFAULT_ICON_SPACING=6.5;Mn.ENGLISH_KEY_TO_KEY_NODE=new Map([["a",new jn("A")],["j",new jn("J")],["shift",On.shift()],["alt",On.altOrOption()],["escape",On.esc()],["arrowLeft",new Da("left")],["arrowRight",new Da("right")],["arrowUp",new Da("up")],["arrowDown",new Da("down")],["pageUp",On.pageUp()],["pageDown",On.pageDown()],["home",On.home()],["end",On.end()],["r",new jn("R")],["s",new jn("S")],["l",new jn("L")],["c",new jn("C")],["h",new jn("H")],["w",new jn("W")],["j",new jn("J")],["k",new jn("K")],["n",new jn("N")],["0",new jn("0")],["1",new jn("1")],["2",new jn("2")],["3",new jn("3")]]);class ir{constructor(e){const t=Ne()({keyboardHelpDialogPDOMLabelStringProperty:null,keyboardHelpDialogLabelStringProperty:null,global:!1,binderName:""},e);this.keyStringProperties=t.keyStringProperties,this.keyboardHelpDialogLabelStringProperty=t.keyboardHelpDialogLabelStringProperty,this.keyboardHelpDialogPDOMLabelStringProperty=t.keyboardHelpDialogPDOMLabelStringProperty,this.repoName=t.repoName,this.global=t.global,this.binderName=t.binderName,this.keyDescriptorsProperty=Dt.deriveAny(this.keyStringProperties,()=>this.keyStringProperties.map(n=>$b.keyStrokeToKeyDescriptor(n.value)))}hasKeyStroke(e){return this.keyStringProperties.some(t=>t.value===e)}serialize(){return{keyStrings:this.keyStringProperties.map(e=>e.value),binderName:this.binderName||this.keyboardHelpDialogLabelStringProperty?.value,repoName:this.repoName,global:this.global}}dispose(){this.keyDescriptorsProperty.dispose()}static combineKeyStringProperties(e){return e.reduce((t,n)=>t.concat(n.keyStringProperties),[])}static anyHaveKeyStroke(e,t){return e.some(n=>n.hasKeyStroke(t))}}const yp={isPlatformMac:()=>ie.includes(self.navigator.platform,"Mac"),getPlatformZoomMetaKey:()=>yp.isPlatformMac()?"metaKey":"ctrlKey",isZoomCommand:(i,e)=>{const t=e?Qe.KEY_EQUALS:Qe.KEY_MINUS,n=yp.getPlatformZoomMetaKey();return i[n]&&Qe.isKeyEvent(i,t)},isZoomResetCommand:i=>{const e=yp.getPlatformZoomMetaKey();return i[e]&&Qe.isKeyEvent(i,Qe.KEY_0)},ZOOM_IN_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("ctrl+equals"),new Mt("meta+equals")],binderName:"Zoom in",repoName:"scenery",global:!0}),ZOOM_OUT_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("ctrl+minus"),new Mt("meta+minus")],binderName:"Zoom in",repoName:"scenery",global:!0}),RESET_ZOOM_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("ctrl+0"),new Mt("meta+0")],binderName:"Reset zoom",repoName:"scenery",global:!0})};class Qo extends $r{modelToViewPosition(e){return this.transformPosition2(e)}modelToViewXY(e,t){return new Oe(this.modelToViewX(e),this.modelToViewY(t))}modelToViewX(e){return this.matrix.m00()*e+this.matrix.m02()}modelToViewY(e){return this.matrix.m11()*e+this.matrix.m12()}modelToViewDelta(e){return this.transformDelta2(e)}modelToViewNormal(e){return this.transformNormal2(e)}modelToViewDeltaX(e){return this.transformDeltaX(e)}modelToViewDeltaY(e){return this.transformDeltaY(e)}modelToViewBounds(e){return this.transformBounds2(e)}modelToViewShape(e){return this.transformShape(e)}modelToViewRay(e){return this.transformRay2(e)}viewToModelPosition(e){return this.inversePosition2(e)}viewToModelXY(e,t){return new Oe(this.viewToModelX(e),this.viewToModelY(t))}viewToModelX(e){const t=this.getInverse();return t.m00()*e+t.m02()}viewToModelY(e){const t=this.getInverse();return t.m11()*e+t.m12()}viewToModelDelta(e){return this.inverseDelta2(e)}viewToModelDeltaXY(e,t){return new Oe(this.viewToModelDeltaX(e),this.viewToModelDeltaY(t))}viewToModelNormal(e){return this.inverseNormal2(e)}viewToModelDeltaX(e){return this.inverseDeltaX(e)}viewToModelDeltaY(e){return this.inverseDeltaY(e)}viewToModelBounds(e){return this.inverseBounds2(e)}viewToModelShape(e){return this.inverseShape(e)}viewToModelRay(e){return this.inverseRay2(e)}validateMatrix(e){super.validateMatrix(e)}setToRectangleMapping(e,t){const n=t.width/e.width,s=t.x-n*e.x,r=t.height/e.height,a=t.y-r*e.y;return this.setMatrix(It.affine(n,0,s,0,r,a)),this}setToRectangleInvertedYMapping(e,t){const n=t.width/e.width,s=t.x-n*e.x,r=-t.height/e.height,a=t.y-r*e.getMaxY();return this.setMatrix(It.affine(n,0,s,0,r,a)),this}static createIdentity(){return new Qo(It.IDENTITY)}static createOffsetScaleMapping(e,t){return new Qo(It.affine(t,0,e.x,0,t,e.y))}static createOffsetXYScaleMapping(e,t,n){return new Qo(It.affine(t,0,e.x,0,n,e.y))}static createSinglePointXYScaleMapping(e,t,n,s){const r=t.x-e.x*n,a=t.y-e.y*s;return Qo.createOffsetXYScaleMapping(new Oe(r,a),n,s)}static createSinglePointScaleMapping(e,t,n){return Qo.createSinglePointXYScaleMapping(e,t,n,n)}static createSinglePointScaleInvertedYMapping(e,t,n){return Qo.createSinglePointXYScaleMapping(e,t,n,-n)}static createRectangleMapping(e,t){return new Qo().setToRectangleMapping(e,t)}static createRectangleInvertedYMapping(e,t){return new Qo().setToRectangleInvertedYMapping(e,t)}}function vG(i){return Object.prototype.toString.call(i)==="[object Array]"}const Oa=self.Float64Array||Array;class Bi{constructor(e,t,n,s){this.m=e,this.n=t;const r=e*t;this.size=r;let a;if(s)this.entries=n;else if(n||(n=0),this.entries=new Oa(r),vG(n))for(a=0;a<r;a++)this.entries[a]=n[a];else for(a=0;a<r;a++)this.entries[a]=n}copy(){const e=new Bi(this.m,this.n);for(let t=0;t<this.size;t++)e.entries[t]=this.entries[t];return e}getArray(){return this.entries}getArrayCopy(){return new Oa(this.entries)}getRowDimension(){return this.m}getColumnDimension(){return this.n}index(e,t){return e*this.n+t}get(e,t){return this.entries[this.index(e,t)]}set(e,t,n){this.entries[this.index(e,t)]=n}getMatrix(e,t,n,s){const r=new Bi(t-e+1,s-n+1);for(let a=e;a<=t;a++)for(let o=n;o<=s;o++)r.entries[r.index(a-e,o-n)]=this.entries[this.index(a,o)];return r}getArrayRowMatrix(e,t,n){const s=new Bi(e.length,n-t+1);for(let r=0;r<e.length;r++)for(let a=t;a<=n;a++)s.entries[s.index(r,a-t)]=this.entries[this.index(e[r],a)];return s}transpose(e){e=e||new Bi(this.n,this.m);for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++)e.entries[e.index(n,t)]=this.entries[this.index(t,n)];return e}norm1(){let e=0;for(let t=0;t<this.n;t++){let n=0;for(let s=0;s<this.m;s++)n+=Math.abs(this.entries[this.index(s,t)]);e=Math.max(e,n)}return e}norm2(){return new Oc(this).norm2()}normInf(){let e=0;for(let t=0;t<this.m;t++){let n=0;for(let s=0;s<this.n;s++)n+=Math.abs(this.entries[this.index(t,s)]);e=Math.max(e,n)}return e}normF(){let e=0;for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++)e=Bi.hypot(e,this.entries[this.index(t,n)]);return e}uminus(){const e=new Bi(this.m,this.n);for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++)e.entries[e.index(t,n)]=-this.entries[this.index(t,n)];return e}plus(e){this.checkMatrixDimensions(e);const t=new Bi(this.m,this.n);for(let n=0;n<this.m;n++)for(let s=0;s<this.n;s++){const r=t.index(n,s);t.entries[r]=this.entries[r]+e.entries[r]}return t}plusEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++){const s=this.index(t,n);this.entries[s]=this.entries[s]+e.entries[s]}return this}blendEquals(e,t){this.checkMatrixDimensions(e);for(let n=0;n<this.m;n++)for(let s=0;s<this.n;s++){const r=this.index(n,s),a=this.entries[r],o=e.entries[r];this.entries[r]=a+(o-a)*t}return this}minus(e){this.checkMatrixDimensions(e);const t=new Bi(this.m,this.n);for(let n=0;n<this.m;n++)for(let s=0;s<this.n;s++){const r=this.index(n,s);t.entries[r]=this.entries[r]-e.entries[r]}return t}minusEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++){const s=this.index(t,n);this.entries[s]=this.entries[s]-e.entries[s]}return this}arrayTimes(e){this.checkMatrixDimensions(e);const t=new Bi(this.m,this.n);for(let n=0;n<this.m;n++)for(let s=0;s<this.n;s++){const r=t.index(n,s);t.entries[r]=this.entries[r]*e.entries[r]}return t}arrayTimesEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++){const s=this.index(t,n);this.entries[s]=this.entries[s]*e.entries[s]}return this}arrayRightDivide(e){this.checkMatrixDimensions(e);const t=new Bi(this.m,this.n);for(let n=0;n<this.m;n++)for(let s=0;s<this.n;s++){const r=this.index(n,s);t.entries[r]=this.entries[r]/e.entries[r]}return t}arrayRightDivideEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++){const s=this.index(t,n);this.entries[s]=this.entries[s]/e.entries[s]}return this}arrayLeftDivide(e){this.checkMatrixDimensions(e);const t=new Bi(this.m,this.n);for(let n=0;n<this.m;n++)for(let s=0;s<this.n;s++){const r=this.index(n,s);t.entries[r]=e.entries[r]/this.entries[r]}return t}arrayLeftDivideEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++){const s=this.index(t,n);this.entries[s]=e.entries[s]/this.entries[s]}return this}times(e){let t,n,s,r,a,o;if(e.isMatrix){if(o=e,o.m!==this.n)throw new Error("Matrix inner dimensions must agree.");t=new Bi(this.m,o.n);const l=new Oa(this.n);for(s=0;s<o.n;s++){for(r=0;r<this.n;r++)l[r]=o.entries[o.index(r,s)];for(n=0;n<this.m;n++){for(a=0,r=0;r<this.n;r++)a+=this.entries[this.index(n,r)]*l[r];t.entries[t.index(n,s)]=a}}return t}else{for(a=e,t=new Bi(this.m,this.n),n=0;n<this.m;n++)for(s=0;s<this.n;s++)t.entries[t.index(n,s)]=a*this.entries[this.index(n,s)];return t}}timesEquals(e){for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++){const s=this.index(t,n);this.entries[s]=e*this.entries[s]}return this}solve(e){return this.m===this.n?new PV(this).solve(e):new bG(this).solve(e)}solveTranspose(e){return this.transpose().solve(e.transpose())}inverse(){return this.solve(Bi.identity(this.m,this.m))}det(){return new PV(this).det()}rank(){return new Oc(this).rank()}cond(){return new Oc(this).cond()}trace(){let e=0;for(let t=0;t<Math.min(this.m,this.n);t++)e+=this.entries[this.index(t,t)];return e}checkMatrixDimensions(e){if(e.m!==this.m||e.n!==this.n)throw new Error("Matrix dimensions must agree.")}toString(){let e="";e+=`dim: ${this.getRowDimension()}x${this.getColumnDimension()}
`;for(let t=0;t<this.getRowDimension();t++){for(let n=0;n<this.getColumnDimension();n++)e+=`${this.get(t,n)} `;e+=`
`}return e}extractVector2(e){return new Oe(this.get(0,e),this.get(1,e))}extractVector3(e){return new Wn(this.get(0,e),this.get(1,e),this.get(2,e))}extractVector4(e){return new Bs(this.get(0,e),this.get(1,e),this.get(2,e),this.get(3,e))}setVectors3(e){const t=e.length;for(let n=0;n<t;n++){const s=e[n];this.entries[n]=s.x,this.entries[n+t]=s.y,this.entries[n+2*t]=s.z}return this}static hypot(e,t){let n;return Math.abs(e)>Math.abs(t)?(n=t/e,n=Math.abs(e)*Math.sqrt(1+n*n)):t!==0?(n=e/t,n=Math.abs(t)*Math.sqrt(1+n*n)):n=0,n}static identity(e,t){const n=new Bi(e,t);for(let s=0;s<e;s++)for(let r=0;r<t;r++)n.entries[n.index(s,r)]=s===r?1:0;return n}static diagonalMatrix(e){const t=e.length,n=new Bi(t,t);for(let s=0;s<t;s++)n.entries[n.index(s,s)]=e[s];return n}static rowVector2(e){return new Bi(1,2,[e.x,e.y])}static rowVector3(e){return new Bi(1,3,[e.x,e.y,e.z])}static rowVector4(e){return new Bi(1,4,[e.x,e.y,e.z,e.w])}static rowVector(e){if(e.isVector2)return Bi.rowVector2(e);if(e.isVector3)return Bi.rowVector3(e);if(e.isVector4)return Bi.rowVector4(e);throw new Error(`undetected type of vector: ${e.toString()}`)}static columnVector2(e){return new Bi(2,1,[e.x,e.y])}static columnVector3(e){return new Bi(3,1,[e.x,e.y,e.z])}static columnVector4(e){return new Bi(4,1,[e.x,e.y,e.z,e.w])}static columnVector(e){if(e.isVector2)return Bi.columnVector2(e);if(e.isVector3)return Bi.columnVector3(e);if(e.isVector4)return Bi.columnVector4(e);throw new Error(`undetected type of vector: ${e.toString()}`)}static fromVectors2(e){const n=e.length,s=new Oa(2*n);for(let r=0;r<n;r++){const a=e[r];s[r]=a.x,s[r+n]=a.y}return new Bi(2,n,s,!0)}static fromVectors3(e){const n=e.length,s=new Oa(3*n);for(let r=0;r<n;r++){const a=e[r];s[r]=a.x,s[r+n]=a.y,s[r+2*n]=a.z}return new Bi(3,n,s,!0)}static fromVectors4(e){const n=e.length,s=new Oa(4*n);for(let r=0;r<n;r++){const a=e[r];s[r]=a.x,s[r+n]=a.y,s[r+2*n]=a.z,s[r+3*n]=a.w}return new Bi(4,n,s,!0)}}Bi.prototype.isMatrix=!0;class PV{constructor(e){let t,n,s;this.matrix=e,this.LU=e.getArrayCopy();const r=this.LU;this.m=e.getRowDimension();const a=this.m;this.n=e.getColumnDimension();const o=this.n;for(this.piv=new Uint32Array(a),t=0;t<a;t++)this.piv[t]=t;this.pivsign=1;const l=new Oa(a);for(n=0;n<o;n++){for(t=0;t<a;t++)l[t]=r[e.index(t,n)];for(t=0;t<a;t++){const c=Math.min(t,n);let f=0;for(s=0;s<c;s++){const g=e.index(t,s);f+=r[g]*l[s]}l[t]-=f,r[e.index(t,n)]=l[t]}let h=n;for(t=n+1;t<a;t++)Math.abs(l[t])>Math.abs(l[h])&&(h=t);if(h!==n){for(s=0;s<o;s++){const c=e.index(h,s),f=e.index(n,s),g=r[c];r[c]=r[f],r[f]=g}s=this.piv[h],this.piv[h]=this.piv[n],this.piv[n]=s,this.pivsign=-this.pivsign}if(n<a&&r[this.matrix.index(n,n)]!==0)for(t=n+1;t<a;t++)r[e.index(t,n)]/=r[e.index(n,n)]}}isNonsingular(){for(let e=0;e<this.n;e++){const t=this.matrix.index(e,e);if(this.LU[t]===0)return!1}return!0}getL(){const e=new Bi(this.m,this.n);for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++)t>n?e.entries[e.index(t,n)]=this.LU[this.matrix.index(t,n)]:t===n?e.entries[e.index(t,n)]=1:e.entries[e.index(t,n)]=0;return e}getU(){const e=new Bi(this.n,this.n);for(let t=0;t<this.n;t++)for(let n=0;n<this.n;n++)t<=n?e.entries[e.index(t,n)]=this.LU[this.matrix.index(t,n)]:e.entries[e.index(t,n)]=0;return e}getPivot(){const e=new Uint32Array(this.m);for(let t=0;t<this.m;t++)e[t]=this.piv[t];return e}getDoublePivot(){const e=new Oa(this.m);for(let t=0;t<this.m;t++)e[t]=this.piv[t];return e}det(){if(this.m!==this.n)throw new Error("Matrix must be square.");let e=this.pivsign;for(let t=0;t<this.n;t++)e*=this.LU[this.matrix.index(t,t)];return e}solve(e){let t,n,s;if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isNonsingular())throw new Error("Matrix is singular.");const r=e.getColumnDimension(),a=e.getArrayRowMatrix(this.piv,0,r-1);for(s=0;s<this.n;s++)for(t=s+1;t<this.n;t++)for(n=0;n<r;n++)a.entries[a.index(t,n)]-=a.entries[a.index(s,n)]*this.LU[this.matrix.index(t,s)];for(s=this.n-1;s>=0;s--){for(n=0;n<r;n++)a.entries[a.index(s,n)]/=this.LU[this.matrix.index(s,s)];for(t=0;t<s;t++)for(n=0;n<r;n++)a.entries[a.index(t,n)]-=a.entries[a.index(s,n)]*this.LU[this.matrix.index(t,s)]}return a}}class bG{constructor(e){this.matrix=e,this.QR=e.getArrayCopy();const t=this.QR;this.m=e.getRowDimension();const n=this.m;this.n=e.getColumnDimension();const s=this.n;this.Rdiag=new Oa(s);let r,a,o;for(o=0;o<s;o++){let l=0;for(r=o;r<n;r++)l=Bi.hypot(l,t[this.matrix.index(r,o)]);if(l!==0){for(t[this.matrix.index(o,o)]<0&&(l=-l),r=o;r<n;r++)t[this.matrix.index(r,o)]/=l;for(t[this.matrix.index(o,o)]+=1,a=o+1;a<s;a++){let h=0;for(r=o;r<n;r++)h+=t[this.matrix.index(r,o)]*t[this.matrix.index(r,a)];for(h=-h/t[this.matrix.index(o,o)],r=o;r<n;r++)t[this.matrix.index(r,a)]+=h*t[this.matrix.index(r,o)]}}this.Rdiag[o]=-l}}isFullRank(){for(let e=0;e<this.n;e++)if(this.Rdiag[e]===0)return!1;return!0}getH(){const e=new Bi(this.m,this.n);for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++)t>=n?e.entries[e.index(t,n)]=this.QR[this.matrix.index(t,n)]:e.entries[e.index(t,n)]=0;return e}getR(){const e=new Bi(this.n,this.n);for(let t=0;t<this.n;t++)for(let n=0;n<this.n;n++)t<n?e.entries[e.index(t,n)]=this.QR[this.matrix.index(t,n)]:t===n?e.entries[e.index(t,n)]=this.Rdiag[t]:e.entries[e.index(t,n)]=0;return e}getQ(){let e,t,n;const s=new Bi(this.m,this.n);for(n=this.n-1;n>=0;n--){for(e=0;e<this.m;e++)s.entries[s.index(e,n)]=0;for(s.entries[s.index(n,n)]=1,t=n;t<this.n;t++)if(this.QR[this.matrix.index(n,n)]!==0){let r=0;for(e=n;e<this.m;e++)r+=this.QR[this.matrix.index(e,n)]*s.entries[s.index(e,t)];for(r=-r/this.QR[this.matrix.index(n,n)],e=n;e<this.m;e++)s.entries[s.index(e,t)]+=r*this.QR[this.matrix.index(e,n)]}}return s}solve(e){if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isFullRank())throw new Error("Matrix is rank deficient.");let t,n,s;const r=e.getColumnDimension(),a=e.getArrayCopy();for(s=0;s<this.n;s++)for(n=0;n<r;n++){let o=0;for(t=s;t<this.m;t++)o+=this.QR[this.matrix.index(t,s)]*a[e.index(t,n)];for(o=-o/this.QR[this.matrix.index(s,s)],t=s;t<this.m;t++)a[e.index(t,n)]+=o*this.QR[this.matrix.index(t,s)]}for(s=this.n-1;s>=0;s--){for(n=0;n<r;n++)a[e.index(s,n)]/=this.Rdiag[s];for(t=0;t<s;t++)for(n=0;n<r;n++)a[e.index(t,n)]-=a[e.index(s,n)]*this.QR[this.matrix.index(t,s)]}return new Bi(this.n,r,a,!0).getMatrix(0,this.n-1,0,r-1)}}class Oc{constructor(e){this.matrix=e;const t=e,n=t.getArrayCopy();this.m=t.getRowDimension(),this.n=t.getColumnDimension();const s=this.m,r=this.n,a=Math.min,o=Math.max,l=Math.pow,h=Math.abs,c=a(s,r);this.s=new Oa(a(s+1,r));const f=this.s;this.U=new Oa(s*c);const g=this.U;this.V=new Oa(r*r);const v=this.V,A=new Oa(r),P=new Oa(s);let w,T,D,M,B,O,x;const Z=Bi.hypot,de=a(s-1,r),$=o(0,a(r-2,s));for(D=0;D<o(de,$);D++){if(D<de){for(f[D]=0,w=D;w<s;w++)f[D]=Z(f[D],n[w*r+D]);if(f[D]!==0){for(n[D*r+D]<0&&(f[D]=-f[D]),w=D;w<s;w++)n[w*r+D]/=f[D];n[D*r+D]+=1}f[D]=-f[D]}for(T=D+1;T<r;T++){if(D<de&&f[D]!==0){for(M=0,w=D;w<s;w++)M+=n[w*r+D]*n[w*r+T];for(M=-M/n[D*r+D],w=D;w<s;w++)n[w*r+T]+=M*n[w*r+D]}A[T]=n[D*r+T]}if(D<de)for(w=D;w<s;w++)g[w*c+D]=n[w*r+D];if(D<$){for(A[D]=0,w=D+1;w<r;w++)A[D]=Z(A[D],A[w]);if(A[D]!==0){for(A[D+1]<0&&(A[D]=-A[D]),w=D+1;w<r;w++)A[w]/=A[D];A[D+1]+=1}if(A[D]=-A[D],D+1<s&&A[D]!==0){for(w=D+1;w<s;w++)P[w]=0;for(T=D+1;T<r;T++)for(w=D+1;w<s;w++)P[w]+=A[T]*n[w*r+T];for(T=D+1;T<r;T++)for(M=-A[T]/A[D+1],w=D+1;w<s;w++)n[w*r+T]+=M*P[w]}for(w=D+1;w<r;w++)v[w*r+D]=A[w]}}let me=a(r,s+1);de<r&&(f[de]=n[de*r+de]),s<me&&(f[me-1]=0),$+1<me&&(A[$]=n[$*r+me-1]),A[me-1]=0;{for(T=de;T<c;T++){for(w=0;w<s;w++)g[w*c+T]=0;g[T*c+T]=1}for(D=de-1;D>=0;D--)if(f[D]!==0){for(T=D+1;T<c;T++){for(M=0,w=D;w<s;w++)M+=g[w*c+D]*g[w*c+T];for(M=-M/g[D*c+D],w=D;w<s;w++)g[w*c+T]+=M*g[w*c+D]}for(w=D;w<s;w++)g[w*c+D]=-g[w*c+D];for(g[D*c+D]=1+g[D*c+D],w=0;w<D-1;w++)g[w*c+D]=0}else{for(w=0;w<s;w++)g[w*c+D]=0;g[D*c+D]=1}}for(D=r-1;D>=0;D--){if(D<$&&A[D]!==0)for(T=D+1;T<c;T++){for(M=0,w=D+1;w<r;w++)M+=v[w*r+D]*v[w*r+T];for(M=-M/v[(D+1)*r+D],w=D+1;w<r;w++)v[w*r+T]+=M*v[w*r+D]}for(w=0;w<r;w++)v[w*r+D]=0;v[D*r+D]=1}const ue=me-1;let Se=0;const Te=l(2,-52),Re=l(2,-966);for(;me>0;){let We;if(Se>500)break;for(D=me-2;D>=-1&&D!==-1;D--)if(h(A[D])<=Re+Te*(h(f[D])+h(f[D+1]))){A[D]=0;break}if(D===me-2)We=4;else{let Le;for(Le=me-1;Le>=D&&Le!==D;Le--)if(M=(Le!==me?h(A[Le]):0)+(Le!==D+1?h(A[Le-1]):0),h(f[Le])<=Re+Te*M){f[Le]=0;break}Le===D?We=3:Le===me-1?We=1:(We=2,D=Le)}switch(D++,We){case 1:for(B=A[me-2],A[me-2]=0,T=me-2;T>=D;T--)for(M=Z(f[T],B),O=f[T]/M,x=B/M,f[T]=M,T!==D&&(B=-x*A[T-1],A[T-1]=O*A[T-1]),w=0;w<r;w++)M=O*v[w*r+T]+x*v[w*r+me-1],v[w*r+me-1]=-x*v[w*r+T]+O*v[w*r+me-1],v[w*r+T]=M;break;case 2:for(B=A[D-1],A[D-1]=0,T=D;T<me;T++)for(M=Z(f[T],B),O=f[T]/M,x=B/M,f[T]=M,B=-x*A[T],A[T]=O*A[T],w=0;w<s;w++)M=O*g[w*c+T]+x*g[w*c+D-1],g[w*c+D-1]=-x*g[w*c+T]+O*g[w*c+D-1],g[w*c+T]=M;break;case 3:{const Le=o(o(o(o(h(f[me-1]),h(f[me-2])),h(A[me-2])),h(f[D])),h(A[D])),lt=f[me-1]/Le,st=f[me-2]/Le,De=A[me-2]/Le,et=f[D]/Le,Ke=A[D]/Le,Ct=((st+lt)*(st-lt)+De*De)/2,dt=lt*De*(lt*De);let Et=0;(Ct!==0||dt!==0)&&(Et=Math.sqrt(Ct*Ct+dt),Ct<0&&(Et=-Et),Et=dt/(Ct+Et)),B=(et+lt)*(et-lt)+Et;let ut=et*Ke;for(T=D;T<me-1;T++){for(M=Z(B,ut),O=B/M,x=ut/M,T!==D&&(A[T-1]=M),B=O*f[T]+x*A[T],A[T]=O*A[T]-x*f[T],ut=x*f[T+1],f[T+1]=O*f[T+1],w=0;w<r;w++)M=O*v[w*r+T]+x*v[w*r+T+1],v[w*r+T+1]=-x*v[w*r+T]+O*v[w*r+T+1],v[w*r+T]=M;if(M=Z(B,ut),O=B/M,x=ut/M,f[T]=M,B=O*A[T]+x*f[T+1],f[T+1]=-x*A[T]+O*f[T+1],ut=x*A[T+1],A[T+1]=O*A[T+1],T<s-1)for(w=0;w<s;w++)M=O*g[w*c+T]+x*g[w*c+T+1],g[w*c+T+1]=-x*g[w*c+T]+O*g[w*c+T+1],g[w*c+T]=M}A[me-2]=B,Se=Se+1}break;case 4:{if(f[D]<=0)for(f[D]=f[D]<0?-f[D]:0,w=0;w<=ue;w++)v[w*r+D]=-v[w*r+D];for(;D<ue&&!(f[D]>=f[D+1]);){if(M=f[D],f[D]=f[D+1],f[D+1]=M,D<r-1)for(w=0;w<r;w++)M=v[w*r+D+1],v[w*r+D+1]=v[w*r+D],v[w*r+D]=M;if(D<s-1)for(w=0;w<s;w++)M=g[w*c+D+1],g[w*c+D+1]=g[w*c+D],g[w*c+D]=M;D++}Se=0,me--}break;default:throw new Error(`invalid kase: ${We}`)}}}getU(){return new Bi(this.m,Math.min(this.m+1,this.n),this.U,!0)}getV(){return new Bi(this.n,this.n,this.V,!0)}getSingularValues(){return this.s}getS(){const e=new Bi(this.n,this.n);for(let t=0;t<this.n;t++){for(let n=0;n<this.n;n++)e.entries[e.index(t,n)]=0;e.entries[e.index(t,t)]=this.s[t]}return e}norm2(){return this.s[0]}cond(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}rank(){const e=Math.pow(2,-23),t=Math.max(this.m,this.n)*this.s[0]*e;let n=0;for(let s=0;s<this.s.length;s++)this.s[s]>t&&n++;return n}static pseudoinverse(e){const t=new Oc(e),n=Bi.diagonalMatrix(t.getSingularValues().map(s=>Math.abs(s)<1e-300?0:1/s));return t.getV().times(n).times(t.getU().transpose())}}class _G{constructor(e,t){this.pointer=e,this.trail=t,this.interrupted=!1,this.initialPoint=e.point,this.localPoint=null,this.recomputeLocalPoint()}recomputeLocalPoint(){this.localPoint=this.trail.globalToLocalPoint(this.pointer.point)}get targetPoint(){return this.trail.globalToParentPoint(this.pointer.point)}}const AG=25;class wG{constructor(e,t){const n=Ne()({mouseButton:0,pressCursor:"pointer",allowScale:!0,allowRotation:!0,allowMultitouchInterruption:!1,allowMoveInterruption:!0,minScale:1,maxScale:4,tandem:R.REQUIRED},t);this._targetNode=e,this._minScale=n.minScale,this._maxScale=n.maxScale,this._mouseButton=n.mouseButton,this._pressCursor=n.pressCursor,this._allowScale=n.allowScale,this._allowRotation=n.allowRotation,this._allowMultitouchInterruption=n.allowMultitouchInterruption,this._allowMoveInterruption=n.allowMoveInterruption,this._presses=[],this._backgroundPresses=[],this.matrixProperty=new Mt(e.matrix.copy(),{phetioValueType:It.Matrix3IO,tandem:n.tandem.createTandem("matrixProperty"),phetioReadOnly:!0}),this.matrixProperty.link(s=>{this._targetNode.matrix=s}),this._interrupted=!1,this._pressListener={move:s=>{const r=this.findPress(s.pointer);this.movePress(r)},up:s=>{const r=this.findPress(s.pointer);this.removePress(r)},cancel:s=>{const r=this.findPress(s.pointer);r.interrupted=!0,this.removePress(r)},interrupt:()=>{this.interrupt()}},this._backgroundListener={up:s=>{if(!this._interrupted){const r=this.findBackgroundPress(s.pointer);this.removeBackgroundPress(r)}},move:s=>{const r=this._backgroundPresses.filter(a=>!a.pointer.hasIntent(Lr.DRAG)&&a.initialPoint.distance(a.pointer.point)>AG);(this.getCurrentScale()!==1||r.length>=2)&&r.forEach(a=>{this.removeBackgroundPress(a),this.interruptOtherListeners(a.pointer),this.addPress(a)})},cancel:s=>{if(!this._interrupted){const r=this.findBackgroundPress(s.pointer);this.removeBackgroundPress(r)}},interrupt:()=>{this.interrupt()}}}findPress(e){for(let t=0;t<this._presses.length;t++)if(this._presses[t].pointer===e)return this._presses[t];return null}findBackgroundPress(e){for(let t=0;t<this._backgroundPresses.length;t++)if(this._backgroundPresses[t].pointer===e)return this._backgroundPresses[t];return null}hasPress(e){return ie.some(this._presses.concat(this._backgroundPresses),t=>t.pointer===e.pointer)}interruptOtherListeners(e){const t=e.getListeners();for(let n=0;n<t.length;n++){const s=t[n];s!==this._backgroundListener&&s.interrupt&&s.interrupt()}}down(e){if(e.pointer instanceof Qm&&e.domEvent instanceof MouseEvent&&e.domEvent.button!==this._mouseButton)return;this._interrupted=!1;let t;ie.includes(e.trail.nodes,this._targetNode)?t=e.trail.subtrailTo(this._targetNode,!1):t=this._targetNode.getUniqueTrailTo(e.target);const n=new _G(e.pointer,t);!this._allowMoveInterruption&&!this._allowMultitouchInterruption?e.pointer.isAttached()||this.addPress(n):this.addBackgroundPress(n)}addPress(e){this.hasPress(e)||(this._presses.push(e),e.pointer.cursor=this._pressCursor,e.pointer.addInputListener(this._pressListener,!0),this.recomputeLocals(),this.reposition())}movePress(e){this.reposition()}removePress(e){e.pointer.removeInputListener(this._pressListener),e.pointer.cursor=null,gs(this._presses,e),this.recomputeLocals(),this.reposition()}addBackgroundPress(e){this.hasPress(e)||(this._backgroundPresses.push(e),e.pointer.addInputListener(this._backgroundListener,!1))}removeBackgroundPress(e){e.pointer.removeInputListener(this._backgroundListener),gs(this._backgroundPresses,e)}reposition(){this.matrixProperty.set(this.computeMatrix())}recomputeLocals(){for(let e=0;e<this._presses.length;e++)this._presses[e].recomputeLocalPoint()}interrupt(){for(;this._presses.length;)this.removePress(this._presses[this._presses.length-1]);for(;this._backgroundPresses.length;)this.removeBackgroundPress(this._backgroundPresses[this._backgroundPresses.length-1]);this._interrupted=!0}computeMatrix(){return this._presses.length===0?this._targetNode.getMatrix():this._presses.length===1?this.computeSinglePressMatrix():this._allowScale&&this._allowRotation?this.computeTranslationRotationScaleMatrix():this._allowScale?this.computeTranslationScaleMatrix():this._allowRotation?this.computeTranslationRotationMatrix():this.computeTranslationMatrix()}computeSinglePressMatrix(){const e=this._presses[0].targetPoint,t=this._presses[0].localPoint,n=this._targetNode.localToParentPoint(t),s=e.minus(n);return It.translationFromVector(s).timesMatrix(this._targetNode.getMatrix())}computeTranslationMatrix(){const e=new Oe(0,0);for(let t=0;t<this._presses.length;t++){e.add(this._presses[t].targetPoint);const n=this._presses[t].localPoint;e.subtract(n)}return It.translationFromVector(e.dividedScalar(this._presses.length))}computeTranslationScaleMatrix(){const e=this._presses.map(c=>c.localPoint),t=this._presses.map(c=>c.targetPoint),n=new Oe(0,0),s=new Oe(0,0);e.forEach(c=>{n.add(c)}),t.forEach(c=>{s.add(c)}),n.divideScalar(this._presses.length),s.divideScalar(this._presses.length);let r=0,a=0;e.forEach(c=>{r+=c.distanceSquared(n)}),t.forEach(c=>{a+=c.distanceSquared(s)});let o=this.getCurrentScale();a!==0&&(o=this.limitScale(Math.sqrt(a/r)));const l=It.translation(s.x,s.y),h=It.translation(-n.x,-n.y);return l.timesMatrix(It.scaling(o)).timesMatrix(h)}limitScale(e){let t=Math.max(e,this._minScale);return t=Math.min(t,this._maxScale),t}computeTranslationRotationMatrix(){let e;const t=new Bi(2,this._presses.length),n=new Bi(2,this._presses.length),s=new Oe(0,0),r=new Oe(0,0);for(e=0;e<this._presses.length;e++){const f=this._presses[e].localPoint,g=this._presses[e].targetPoint;s.add(f),r.add(g),t.set(0,e,f.x),t.set(1,e,f.y),n.set(0,e,g.x),n.set(1,e,g.y)}for(s.divideScalar(this._presses.length),r.divideScalar(this._presses.length),e=0;e<this._presses.length;e++)t.set(0,e,t.get(0,e)-s.x),t.set(1,e,t.get(1,e)-s.y),n.set(0,e,n.get(0,e)-r.x),n.set(1,e,n.get(1,e)-r.y);const a=t.times(n.transpose()),o=new Oc(a);let l=o.getV().times(o.getU().transpose());l.det()<0&&(l=o.getV().times(Bi.diagonalMatrix([1,-1])).times(o.getU().transpose()));const h=new It().rowMajor(l.get(0,0),l.get(0,1),0,l.get(1,0),l.get(1,1),0,0,0,1),c=r.minus(h.timesVector2(s));return h.set02(c.x),h.set12(c.y),h}computeTranslationRotationScaleMatrix(){let e;const t=new Bi(this._presses.length*2,4);for(e=0;e<this._presses.length;e++){const h=this._presses[e].localPoint;t.set(2*e+0,0,h.x),t.set(2*e+0,1,h.y),t.set(2*e+0,2,1),t.set(2*e+1,0,h.y),t.set(2*e+1,1,-h.x),t.set(2*e+1,3,1)}const n=new Bi(this._presses.length*2,1);for(e=0;e<this._presses.length;e++){const h=this._presses[e].targetPoint;n.set(2*e+0,0,h.x),n.set(2*e+1,0,h.y)}const s=Oc.pseudoinverse(t).times(n),r=s.get(0,0),a=s.get(1,0),o=s.get(2,0),l=s.get(3,0);return new It().rowMajor(r,a,o,-a,r,l,0,0,1)}getCurrentScale(){return this._targetNode.getScaleVector().x}resetTransform(){this._targetNode.resetTransform(),this.matrixProperty.set(this._targetNode.matrix.copy())}}const TV=new It;class SG extends wG{constructor(e,t){const n=Ne()({panBounds:pt.NOTHING,targetBounds:null,targetScale:1,allowRotation:!1},t);super(e,n),this._panBounds=n.panBounds,this._targetBounds=n.targetBounds||e.globalBounds.copy(),this._targetScale=n.targetScale,this.sourceFramePanBoundsProperty=new Mt(this._panBounds,{tandem:n.tandem?.createTandem("sourceFramePanBoundsProperty"),phetioReadOnly:!0,phetioValueType:pt.Bounds2IO}),this.sourceFramePanBoundsProperty.lazyLink(()=>{if(Yl.value){const s=Qo.createRectangleMapping(this.sourceFramePanBoundsProperty.get(),this._panBounds),r=this._targetNode.matrix.translation.componentMultiply(s.matrix.getScaleVector()),a=this.matrixProperty.get().getScaleVector();this.matrixProperty.set(It.translationFromVector(r).timesMatrix(It.scaling(a.x,a.y)))}},{phetioDependencies:[this.matrixProperty]})}correctReposition(){TV.set(this._targetNode.matrix);const e=this._targetBounds.transformed(this._targetNode.getMatrix());e.left>this._panBounds.left&&(this._targetNode.left=this._panBounds.left-(e.left-this._targetNode.left)),e.top>this._panBounds.top&&(this._targetNode.top=this._panBounds.top-(e.top-this._targetNode.top)),e.right<this._panBounds.right&&(this._targetNode.right=this._panBounds.right+(this._targetNode.right-e.right)),e.bottom<this._panBounds.bottom&&(this._targetNode.bottom=this._panBounds.bottom+(this._targetNode.bottom-e.bottom)),TV.equals(this._targetNode.matrix)||this.matrixProperty.set(this._targetNode.matrix.copy())}addPress(e){super.addPress(e);const n=this._targetBounds.transformed(this._targetNode.getMatrix()).equalsEpsilon(this._panBounds,1e-8);e.pointer.cursor=n?null:this._pressCursor}reposition(){super.reposition(),this.correctReposition()}resetTransform(){super.resetTransform(),this.correctReposition()}setPanBounds(e){this._panBounds=e,this.sourceFramePanBoundsProperty.set(this._panBounds),this.correctReposition()}setTargetBounds(e){this._targetBounds=e,this.correctReposition()}setTargetScale(e){this._targetScale=e}getTargetBounds(){return this._targetBounds}}class Dv extends Uc{constructor(e){super(Oe.ZERO,"pdom"),this.display=e,this.initializeListeners(),this.blockTrustedEvents=!1,this.keydownTargetNode=null}initializeListeners(){this.addInputListener({focus:e=>{const t=this.trail.lastNode();if(t.focusable){const n=Sp(this.trail,this.display.rootNode);this.point=n.parentToGlobalPoint(t.center),isNaN(this.point.x)&&this.point.setXY(0,0)}},blur:e=>{this.trail=null,this.keydownTargetNode=null},keydown:e=>{this.blockTrustedEvents&&e.domEvent.isTrusted||(this.keydownTargetNode=e.target)},keyup:e=>{this.blockTrustedEvents&&e.domEvent.isTrusted||this.keydownTargetNode!==e.target&&e.abort()}})}updateTrail(e){return this.trail&&this.trail.equals(e)||(this.trail=e),this.trail}}function jL(i,e,t){return Math.abs(i-e)<=t}const xV="all-scroll",PG=150,TG=1e3,Om=new Oe(0,0),Ay=new Oe(0,0),EV=new Oe(0,0),VV=new pt(0,0,0,0);class xG extends SG{constructor(e,t){const n=Ne()({tandem:R.REQUIRED,stepEmitter:zn},t);super(e,n),this.trackpadGestureStartScale=1,this.animatingProperty=new Qt(!1),this._transformTracker=null,this._focusBoundsListener=null,this.sourcePosition=null,this.destinationPosition=null,this.sourceScale=this.getCurrentScale(),this.destinationScale=this.getCurrentScale(),this.scaleGestureTargetPosition=null,this.discreteScales=kG(this._minScale,this._maxScale),this.middlePress=null,this._dragBounds=null,this._transformedPanBounds=this._panBounds.transformed(this._targetNode.matrix.inverted()),this._draggingInDragBounds=!1,this._attachedPointers=[],this.boundsFinite=!1;let s=null,r=null;this.gestureStartAction=new Zi(l=>{l.preventDefault(),this.trackpadGestureStartScale=l.scale,this.scaleGestureTargetPosition=new Oe(l.pageX,l.pageY)},{phetioPlayback:!0,tandem:n.tandem.createTandem("gestureStartAction"),parameters:[{name:"event",phetioType:zc}],phetioEventType:vi.USER,phetioDocumentation:"Action that executes whenever a gesture starts on a trackpad in macOS Safari."}),this.gestureChangeAction=new Zi(l=>{l.preventDefault();const h=this.sourceScale+l.scale-this.trackpadGestureStartScale;this.setDestinationScale(h)},{phetioPlayback:!0,tandem:n.tandem.createTandem("gestureChangeAction"),parameters:[{name:"event",phetioType:zc}],phetioEventType:vi.USER,phetioDocumentation:"Action that executes whenever a gesture changes on a trackpad in macOS Safari."}),Zn.safari&&!Zn.mobileSafari&&(s=this.handleGestureStartEvent.bind(this),r=this.handleGestureChangeEvent.bind(this),this.trackpadGestureStartScale=this.getCurrentScale(),self.addEventListener("gesturestart",s),self.addEventListener("gesturechange",r)),or.keydownEmitter.addListener(this.windowKeydown.bind(this));const a=this.handleFocusChange.bind(this);lr.link(a),this.sourceFramePanBoundsProperty.lazyLink(()=>{Yl.value&&(this.initializePositions(),this.sourceScale=this.getCurrentScale(),this.setDestinationScale(this.sourceScale))},{phetioDependencies:[this.matrixProperty]});const o=this.step.bind(this);n.stepEmitter&&n.stepEmitter.addListener(o),this.disposeAnimatedPanZoomListener=()=>{s&&self.removeEventListener("gesturestart",s),r&&self.removeEventListener("gestureChange",r),n.stepEmitter&&n.stepEmitter.removeListener(o),this.animatingProperty.dispose(),this._transformTracker&&this._transformTracker.dispose(),lr.unlink(a)}}step(e){this.middlePress&&this.handleMiddlePress(e),this._attachedPointers.length>0&&this.getCurrentScale()>1&&(this._attachedPointers.length>0&&(this._attachedPointers=this._attachedPointers.filter(t=>t.attachedListener)),(this._draggingInDragBounds||this._attachedPointers.some(t=>t instanceof Dv))&&this.repositionDuringDrag()),this.animateToTargets(e)}down(e){super.down(e),this._dragBounds!==null&&e.pointer.hasIntent(Lr.DRAG)&&(this._attachedPointers.length===0&&(this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point)),e.pointer.attachedListener&&(this._attachedPointers.includes(e.pointer)||this._attachedPointers.push(e.pointer))),e.pointer.type==="mouse"&&e.pointer instanceof Qm&&e.pointer.middleDown&&!this.middlePress?(this.middlePress=new VG(e.pointer,e.trail),e.pointer.cursor=xV):this.cancelMiddlePress()}cancelMiddlePress(){this.middlePress&&(this.middlePress.pointer.cursor=null,this.middlePress=null,this.stopInProgressAnimation())}movePress(e){this.middlePress||super.movePress(e)}move(e){if(this._attachedPointers.length>0&&this.getCurrentScale()>1)if(this._draggingInDragBounds){if(!this._attachedPointers.includes(e.pointer)){const t=this.hasDragIntent(e.pointer);e.currentTarget!==null&&t&&e.pointer.attachedListener&&this._attachedPointers.push(e.pointer)}}else this._dragBounds&&(this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point))}getTargetNodeDuringDrag(){if(this._attachedPointers.length>0){const e=this._attachedPointers[0].attachedListener;if(kV(e.listener)){const t=e.listener;if(t.isPressed)return t.getCurrentTarget()}}return null}getGlobalBoundsToViewDuringDrag(){let e=null;if(this._attachedPointers.length>0){const t=this._attachedPointers[0].attachedListener;if(t.createPanTargetBounds)e=t.createPanTargetBounds();else if(kV(t.listener)){const n=t.listener;if(n.isPressed){const s=n.getCurrentTarget();s.instances.length===1&&(e=s.instances[0].trail.parentToGlobalBounds(s.visibleBounds))}}}return e}repositionDuringDrag(){const e=this.getGlobalBoundsToViewDuringDrag(),t=this.getTargetNodeDuringDrag();e&&this.keepBoundsInView(e,this._attachedPointers.some(n=>n instanceof Dv),t?.limitPanDirection)}cancelPanningDuringDrag(e){if(e){const t=this._attachedPointers.indexOf(e.pointer);t>-1&&this._attachedPointers.splice(t,1)}else this._attachedPointers=[];this._draggingInDragBounds=!1}up(e){this.cancelPanningDuringDrag(e)}wheel(e){if(!this.middlePress){const t=new EG(e,this._targetScale);this.repositionFromWheel(t,e)}}windowKeydown(e){this.cancelMiddlePress();const t=ie.get(self,"phet.joist.sim",null);if((!t||!t.display._accessible||!t.display.pdomRootElement.contains(e.target))&&(this.handleZoomCommands(e),Qe.isArrowKey(e))){const n=new _A(or,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(n)}}keydown(e){const t=e.domEvent;this.cancelMiddlePress(),this.handleZoomCommands(t);const n=e.pointer.hasIntent(Lr.KEYBOARD_DRAG);if(Qe.isArrowKey(t)&&!n){const s=new _A(or,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(s)}}handleFocusChange(e,t){if(this._transformTracker&&(this._transformTracker.dispose(),this._transformTracker=null),t&&t.trail.lastNode()&&t.trail.lastNode().focusPanTargetBoundsProperty&&(t.trail.lastNode().focusPanTargetBoundsProperty.unlink(this._focusBoundsListener),this._focusBoundsListener=null),e){const n=e.trail.lastNode();let s=e.trail;if(e.trail.containsNode(this._targetNode)){const a=e.trail.nodes.indexOf(this._targetNode),o=e.trail.nodes.length;s=e.trail.slice(a,o)}this._transformTracker=new kc(s);const r=()=>{if(this.getCurrentScale()>1){let a;if(n.focusPanTargetBoundsProperty){const o=n.focusPanTargetBoundsProperty.value;a=e.trail.localToGlobalBounds(o)}else a=e.trail.localToGlobalBounds(e.trail.lastNode().localBounds);this.keepBoundsInView(a,!0,n.limitPanDirection)}};this._transformTracker.addListener(r),n.focusPanTargetBoundsProperty&&(this._focusBoundsListener=r,n.focusPanTargetBoundsProperty.link(this._focusBoundsListener)),this.keepTrailInView(e.trail,n.limitPanDirection)}}handleZoomCommands(e){const t=yp.isZoomCommand(e,!0),n=yp.isZoomCommand(e,!1);if(t||n){e.preventDefault();const s=this.getNextDiscreteScale(t),r=new _A(or,s,this._targetScale);this.repositionFromKeys(r)}else yp.isZoomResetCommand(e)&&(e.preventDefault(),this.resetTransform())}handleGestureStartEvent(e){this.gestureStartAction.execute(e)}handleGestureChangeEvent(e){this.gestureChangeAction.execute(e)}handleMiddlePress(e){const t=this.middlePress,n=this.sourcePosition;if(e>0){const r=t.pointer.point.minus(t.initialPoint),a=r.magnitude/100;a>0&&(r.setMagnitude(Math.min(a/e,PG*this._targetScale)),this.setDestinationPosition(n.plus(r)))}}translateScaleToTarget(e,t){const n=this._targetNode.globalToLocalPoint(e),s=this._targetNode.globalToParentPoint(e),r=It.translation(-n.x,-n.y),a=It.translation(s.x,s.y),o=this.limitScale(this.getCurrentScale()+t),l=a.timesMatrix(It.scaling(o)).timesMatrix(r);this.matrixProperty.set(l),this.correctReposition()}setTranslationScaleToTarget(e,t){const n=this._targetNode.globalToLocalPoint(e),s=this._targetNode.globalToParentPoint(e),r=It.translation(-n.x,-n.y),a=It.translation(s.x,s.y),o=this.limitScale(t),l=a.timesMatrix(It.scaling(o)).timesMatrix(r);this.matrixProperty.set(l),this.correctReposition()}translateDelta(e){const t=this._targetNode.globalToParentPoint(this._panBounds.center),n=t.plus(e);this.translateToTarget(n,t)}translateToTarget(e,t){const n=this._targetNode.globalToParentPoint(e),r=this._targetNode.globalToParentPoint(t).minus(n);this.matrixProperty.set(It.translationFromVector(r).timesMatrix(this._targetNode.getMatrix())),this.correctReposition()}repositionFromKeys(e){const t=this.sourcePosition,n=e.scale,s=this.getCurrentScale();n!==s?(this.setDestinationScale(n),this.scaleGestureTargetPosition=e.computeScaleTargetFromKeyPress()):e.translationVector.equals(Oe.ZERO)||this.setDestinationPosition(t.plus(e.translationVector)),this.correctReposition()}repositionFromWheel(e,t){const n=t.domEvent,s=this.sourcePosition;if(n.preventDefault(),e.isCtrlKeyDown){const r=this.limitScale(this.getCurrentScale()+e.scaleDelta);this.scaleGestureTargetPosition=e.targetPoint,this.setDestinationScale(r)}else this.setDestinationPosition(s.plus(e.translationVector));this.correctReposition()}correctReposition(){super.correctReposition(),this._panBounds.isFinite()&&(this._transformedPanBounds=this._panBounds.transformed(this._targetNode.matrix.inverted()),this.sourcePosition=this._transformedPanBounds.center,this.sourceScale=this.getCurrentScale())}addPress(e){super.addPress(e),this.stopInProgressAnimation()}removePress(e){super.removePress(e),this.middlePress&&(e.pointer.cursor=xV),this._presses.length===0&&this.stopInProgressAnimation()}interrupt(){this.cancelPanningDuringDrag(),this.cancelMiddlePress(),super.interrupt()}cancel(){this.interrupt()}hasDragIntent(e){return e.hasIntent(Lr.KEYBOARD_DRAG)||e.hasIntent(Lr.DRAG)}panToNode(e,t,n){this.keepBoundsInView(e.globalBounds,t,n)}keepBoundsInView(e,t,n){const s=this.sourcePosition,r=this._targetNode.globalToLocalBounds(e),a=new Oe(0,0);let o=0,l=0,h=0,c=0;if(t)o=this._transformedPanBounds.centerX-r.centerX,l=this._transformedPanBounds.centerX-r.centerX,h=this._transformedPanBounds.centerY-r.centerY,c=this._transformedPanBounds.centerY-r.centerY;else if((n==="vertical"||r.width<this._transformedPanBounds.width)&&(n==="horizontal"||r.height<this._transformedPanBounds.height)){const v=150/this.getCurrentScale();o=this._transformedPanBounds.left-r.left+v,l=this._transformedPanBounds.right-r.right-v,h=this._transformedPanBounds.top-r.top+v,c=this._transformedPanBounds.bottom-r.bottom-v}n!=="vertical"&&(l<0&&(a.x=-l),o>0&&(a.x=-o)),n!=="horizontal"&&(c<0&&(a.y=-c),h>0&&(a.y=-h)),this.setDestinationPosition(s.plus(a))}keepTrailInView(e,t){if(this._panBounds.isFinite()&&e.lastNode().bounds.isFinite()){const n=e.localToGlobalBounds(e.lastNode().localBounds);this._panBounds.containsBounds(n)||this.keepBoundsInView(n,!0,t)}}animateToTargets(e){const t=this.sourcePosition,n=this.destinationPosition,s=!n.equalsEpsilon(t,.1),r=!jL(this.sourceScale,this.destinationScale,.001);if(this.animatingProperty.value=s||r,this._presses.length===0||this.middlePress!==null){if(s){const a=n.minus(t);let o=a;a.magnitude!==0&&(o=a.normalized());const l=this.getTranslationSpeed(a.magnitude);EV.setXY(l,l);const h=EV.multiplyScalar(e),c=o.componentTimes(h);c.magnitude>a.magnitude&&c.set(a),this.translateDelta(c)}if(r){const a=this.destinationScale-this.sourceScale;let o=a*e*6;Math.abs(o)>Math.abs(a)&&(o=a),this.translateScaleToTarget(this.scaleGestureTargetPosition,o),this.setDestinationPosition(t)}else this.destinationScale!==this.sourceScale&&(this.setTranslationScaleToTarget(this.scaleGestureTargetPosition,this.destinationScale),this.setDestinationPosition(t))}}stopInProgressAnimation(){this.boundsFinite&&this.sourcePosition&&(this.setDestinationScale(this.sourceScale),this.setDestinationPosition(this.sourcePosition))}initializePositions(){this.boundsFinite=this._transformedPanBounds.isFinite(),this.boundsFinite?(this.sourcePosition=this._transformedPanBounds.center,this.setDestinationPosition(this.sourcePosition)):(this.sourcePosition=null,this.destinationPosition=null)}setPanBounds(e){super.setPanBounds(e),this.initializePositions(),this._dragBounds=e.erodedXY(e.width*.1,e.height*.1)}setTargetBounds(e){super.setTargetBounds(e),this.initializePositions()}setDestinationPosition(e){const t=this.sourcePosition;VV.setMinMax(t.x-this._transformedPanBounds.left-this._panBounds.left,t.y-this._transformedPanBounds.top-this._panBounds.top,t.x+this._panBounds.right-this._transformedPanBounds.right,t.y+this._panBounds.bottom-this._transformedPanBounds.bottom),this.destinationPosition=VV.closestPointTo(e)}setDestinationScale(e){this.destinationScale=this.limitScale(e)}getTranslationSpeed(e){const t=e*this.getCurrentScale(),n=5,s=t*(1/(Math.pow(t,2)-Math.pow(n,2))+n);return Math.min(Math.abs(s),TG*this.getCurrentScale())}resetTransform(){super.resetTransform(),this.stopInProgressAnimation()}getNextDiscreteScale(e){const t=this.getCurrentScale();let n=null,s=Number.POSITIVE_INFINITY;for(let a=0;a<this.discreteScales.length;a++){const o=Math.abs(this.discreteScales[a]-t);o<s&&(s=o,n=a)}n=n;let r=e?n+1:n-1;return r=Xn(r,0,this.discreteScales.length-1),this.discreteScales[r]}dispose(){this.disposeAnimatedPanZoomListener()}}class _A{constructor(e,t,n,s){const r=Ne()({translationMagnitude:80},s);let a=0;a+=e.isKeyDown(Qe.KEY_RIGHT_ARROW)?1:0,a-=e.isKeyDown(Qe.KEY_LEFT_ARROW)?1:0;let o=0;if(o+=e.isKeyDown(Qe.KEY_DOWN_ARROW)?1:0,o-=e.isKeyDown(Qe.KEY_UP_ARROW)?1:0,Om.setXY(a,o),!Om.equals(Oe.ZERO)){const l=r.translationMagnitude*n;Om.setMagnitude(l)}this.translationVector=Om,this.scale=t}computeScaleTargetFromKeyPress(){Ay.setXY(0,0);const e=lr.value;if(e){const t=e.trail,n=t.lastNode();n.bounds.isFinite()&&Ay.set(t.parentToGlobalPoint(n.center))}else{const t=Ti.getNextFocusable();if(t!==document.body){const n=t.offsetLeft+t.offsetWidth/2,s=t.offsetTop+t.offsetHeight/2;Ay.setXY(n,s)}}return Ay}}class EG{constructor(e,t){const n=e.domEvent;this.isCtrlKeyDown=n.ctrlKey,this.scaleDelta=n.deltaY>0?-.5:.5,this.targetPoint=e.pointer.point;let s=n.deltaX*.5,r=n.deltaY*.5;n.deltaMode===self.WheelEvent.DOM_DELTA_LINE&&(s=s*25,r=r*25),n.shiftKey&&([s,r]=[r,-s]),this.translationVector=Om.setXY(s*t,r*t)}}class VG{constructor(e,t){this.pointer=e,this.trail=t,this.initialPoint=e.point.copy()}}const kG=(i,e)=>{const n=[];for(let r=0;r<8;r++)n[r]=(e-i)/8*(r*r);const s=n[7];for(let r=0;r<n.length;r++)n[r]=i+n[r]*(e-i)/s;return n},kV=i=>typeof i=="object"&&(i._isPressListener||i._isKeyboardDragListener);class CG{constructor(){this._listener=null}initialize(e,t){this._listener=new xG(e,t)}dispose(){this._listener.dispose(),this._listener=null}get listener(){return this._listener}get initialized(){return!!this._listener}}const al=new CG,XL=new ct("rgba(212,19,106,0.5)"),QL=new ct("rgba(250,40,135,0.9)"),DG=new ct("rgba(233,113,166,1.0)"),IG=new ct("rgba(233,113,166,1.0)"),LG=new ct("rgba(159,15,80,1.0)"),MG=new ct("rgba(159,15,80,1.0)"),OG=2.5,CV=4,NG=2,RG=2;class pn extends bi{constructor(e,t){const n=Ne()({outerStroke:XL,innerStroke:QL,outerLineWidth:null,innerLineWidth:null,dashed:!1,transformSourceNode:null},t);super(e),this.highlightChangedEmitter=new kn,this._innerHighlightColor=n.innerStroke,this._outerHighlightColor=n.outerStroke;const s=ie.pick(n,Object.keys(bi.DEFAULT_PATH_OPTIONS));this.innerLineWidth=n.innerLineWidth,this.outerLineWidth=n.outerLineWidth,this.transformSourceNode=n.transformSourceNode,n.stroke=n.outerStroke,this.mutate(n);const r=Ut({},s,{stroke:n.innerStroke});this.innerHighlightPath=new bi(e,r),this.addChild(this.innerHighlightPath),n.dashed&&this.setDashed(!0)}mutateWithInnerHighlight(e){super.mutate(e),this.innerHighlightPath&&this.innerHighlightPath.mutate(e),this.highlightChangedEmitter.emit()}setDashed(e){const t=e?[7,7]:[];this.mutateWithInnerHighlight({lineDash:t})}setShape(e){return super.setShape(e),this.innerHighlightPath&&this.innerHighlightPath.setShape(e),this.highlightChangedEmitter&&this.highlightChangedEmitter.emit(),this}updateLineWidth(e){this.lineWidth=this.getOuterLineWidth(e),this.innerHighlightPath.lineWidth=this.getInnerLineWidth(e),this.highlightChangedEmitter.emit()}getOuterLineWidth(e){return this.outerLineWidth?this.outerLineWidth:pn.getOuterLineWidthFromMatrix(e)}getInnerLineWidth(e){return this.innerLineWidth?this.innerLineWidth:pn.getInnerLineWidthFromMatrix(e)}setInnerHighlightColor(e){this._innerHighlightColor=e,this.innerHighlightPath.setStroke(e),this.highlightChangedEmitter.emit()}set innerHighlightColor(e){this.setInnerHighlightColor(e)}get innerHighlightColor(){return this.getInnerHighlightColor()}getInnerHighlightColor(){return this._innerHighlightColor}setOuterHighlightColor(e){this._outerHighlightColor=e,this.setStroke(e),this.highlightChangedEmitter.emit()}set outerHighlightColor(e){this.setOuterHighlightColor(e)}get outerHighlightColor(){return this.getOuterHighlightColor()}getOuterHighlightColor(){return this._outerHighlightColor}getUniqueHighlightTrail(e){const t=this.transformSourceNode;let n=null;return t.instances.length<=1?n=t.getUniqueTrail():n=t.getTrails().filter(r=>r.isExtensionOf(e,!0))[0],n}static getInnerLineWidthFromMatrix(e){return OG/pn.localToGlobalScaleFromMatrix(e)}static getOuterLineWidthFromMatrix(e){return CV/pn.localToGlobalScaleFromMatrix(e)}static localToGlobalScaleFromMatrix(e){return Math.sqrt(e.m00()*e.m00()+e.m10()*e.m10())}static getDilationCoefficient(e){return pn.getOuterLineWidthFromMatrix(e)*(.5+.25)}static getDefaultDilationCoefficient(){return pn.getDilationCoefficient(It.IDENTITY)}static getDefaultGroupDilationCoefficient(){return pn.getGroupDilationCoefficient(It.IDENTITY)}static getDefaultHighlightLineWidth(){return CV}static getGroupDilationCoefficient(e){return pn.getOuterLineWidthFromMatrix(e)*(.5+1.4)}static getPanZoomCorrectingMatrix(){return al.initialized?al.listener.matrixProperty.value.inverted():It.IDENTITY}static getLayoutCorrectingMatrix(){return It.scaling(1/pn.layoutScale,1/pn.layoutScale)}static getCorrectiveScalingMatrix(){return pn.getPanZoomCorrectingMatrix().timesMatrix(pn.getLayoutCorrectingMatrix())}}pn.OUTER_FOCUS_COLOR=XL;pn.INNER_FOCUS_COLOR=QL;pn.INNER_LIGHT_GROUP_FOCUS_COLOR=DG;pn.OUTER_LIGHT_GROUP_FOCUS_COLOR=IG;pn.INNER_DARK_GROUP_FOCUS_COLOR=LG;pn.OUTER_DARK_GROUP_FOCUS_COLOR=MG;pn.GROUP_OUTER_LINE_WIDTH=NG;pn.GROUP_INNER_LINE_WIDTH=RG;pn.layoutScale=1;class Jc extends pn{constructor(e,t){const n=Ne()({useLocalBounds:!0,dilationCoefficient:null,useGroupDilation:!1},t);n.transformSourceNode=e,super(null,n),this.observedBoundsProperty=null,this.boundsListener=null,this.useLocalBounds=n.useLocalBounds,this.useGroupDilation=n.useGroupDilation,this.dilationCoefficient=n.dilationCoefficient,e&&this.setShapeFromNode(e)}setShapeFromNode(e,t){this.observedBoundsProperty&&this.observedBoundsProperty.unlink(this.boundsListener),this.observedBoundsProperty=e.localBoundsProperty,this.boundsListener=n=>{if(!n.isFinite())return;let s=this.dilationCoefficient;const a=(t||e.getUniqueTrail()).getMatrix().timesMatrix(pn.getCorrectiveScalingMatrix());this.dilationCoefficient===null&&(s=this.useGroupDilation?pn.getGroupDilationCoefficient(a):pn.getDilationCoefficient(a));const l=(this.useLocalBounds?e.getVisibleLocalBounds():e.getVisibleBounds()).dilated(s);this.setShape(zt.bounds(l))},this.observedBoundsProperty.link(this.boundsListener)}dispose(){this.observedBoundsProperty&&this.observedBoundsProperty.unlink(this.boundsListener),super.dispose()}}class t_ extends Jc{constructor(e,t){const n=Ne()({outerStroke:"grey",innerStroke:"black"},t);super(e,n)}}const DV=["readingBlockTagName","readingBlockDisabledTagName","readingBlockNameResponse","readingBlockHintResponse","readingBlockResponsePatternCollection","readingBlockActiveHighlight"];class IV extends T2{constructor(e,t){super(e,t)}}const BG=new Zm({nameHint:"{{NAME}}. {{HINT}}"}),i_=gr(i=>{const e=zu("ReadingBlock",DV,class extends ys(i){constructor(...n){super(...n),this._readingBlockTagName="button",this._readingBlockDisabledTagName=null,this._readingBlockActiveHighlight=null,this.readingBlockActiveHighlightChangedEmitter=new un,this.readingBlockResponsePatternCollection=BG,this._localBoundsChangedListener=this._onLocalBoundsChanged.bind(this),this.localBoundsProperty.link(this._localBoundsChangedListener),this._readingBlockInputListener={focus:s=>this._speakReadingBlockContentListener(s),up:s=>this._speakReadingBlockContentListener(s),click:s=>this._speakReadingBlockContentListener(s)},this._readingBlockFocusableChangeListener=this._onReadingBlockFocusableChanged.bind(this),$i.speechAllowedAndFullyEnabledProperty.link(this._readingBlockFocusableChangeListener),this.focusHighlight=new t_(this),this.voicingUtterance=new IV(null)}get _isReadingBlock(){return!0}setReadingBlockTagName(n){this._readingBlockTagName=n,this._onReadingBlockFocusableChanged($i.speechAllowedAndFullyEnabledProperty.value)}set readingBlockTagName(n){this.setReadingBlockTagName(n)}get readingBlockTagName(){return this.getReadingBlockTagName()}getReadingBlockTagName(){return this._readingBlockTagName}setReadingBlockDisabledTagName(n){this._readingBlockDisabledTagName=n,this._onReadingBlockFocusableChanged($i.speechAllowedAndFullyEnabledProperty.value)}set readingBlockDisabledTagName(n){this.setReadingBlockDisabledTagName(n)}get readingBlockDisabledTagName(){return this.getReadingBlockDisabledTagName()}getReadingBlockDisabledTagName(){return this._readingBlockDisabledTagName}setReadingBlockNameResponse(n){this._voicingResponsePacket.nameResponse=n}set readingBlockNameResponse(n){this.setReadingBlockNameResponse(n)}get readingBlockNameResponse(){return this.getReadingBlockNameResponse()}getReadingBlockNameResponse(){return this._voicingResponsePacket.nameResponse}setReadingBlockHintResponse(n){this._voicingResponsePacket.hintResponse=n}set readingBlockHintResponse(n){this.setReadingBlockHintResponse(n)}get readingBlockHintResponse(){return this.getReadingBlockHintResponse()}getReadingBlockHintResponse(){return this._voicingResponsePacket.hintResponse}setReadingBlockResponsePatternCollection(n){this._voicingResponsePacket.responsePatternCollection=n}set readingBlockResponsePatternCollection(n){this.setReadingBlockResponsePatternCollection(n)}get readingBlockResponsePatternCollection(){return this.getReadingBlockResponsePatternCollection()}getReadingBlockResponsePatternCollection(){return this._voicingResponsePacket.responsePatternCollection}setVoicingUtterance(n){super.setVoicingUtterance(n)}set voicingUtterance(n){super.voicingUtterance=n}get voicingUtterance(){return this.getVoicingUtterance()}getVoicingUtterance(){return super.getVoicingUtterance()}setVoicingNameResponse(){}getVoicingNameResponse(){}setVoicingObjectResponse(){}getVoicingObjectResponse(){}setVoicingContextResponse(){}getVoicingContextResponse(){}setVoicingHintResponse(){}getVoicingHintResponse(){}setVoicingResponsePatternCollection(){}getVoicingResponsePatternCollection(){}setReadingBlockActiveHighlight(n){this._readingBlockActiveHighlight!==n&&(this._readingBlockActiveHighlight=n,this.readingBlockActiveHighlightChangedEmitter.emit())}set readingBlockActiveHighlight(n){this.setReadingBlockActiveHighlight(n)}get readingBlockActiveHighlight(){return this._readingBlockActiveHighlight}getReadingBlockActiveHighlight(){return this._readingBlockActiveHighlight}isReadingBlockActivated(){let n=!1;const s=Object.keys(this.displays);for(let r=0;r<s.length;r++){const a=this.displays[s[r]].focusManager.readingBlockFocusProperty.value;if(a&&a.trail.lastNode()===this){n=!0;break}}return n}get readingBlockActivated(){return this.isReadingBlockActivated()}_onReadingBlockFocusableChanged(n){this.focusable=n,n?(this.tagName=this._readingBlockTagName,this.hasInputListener(this._readingBlockInputListener)||this.addInputListener(this._readingBlockInputListener)):(this.tagName=this._readingBlockDisabledTagName,this.hasInputListener(this._readingBlockInputListener)&&this.removeInputListener(this._readingBlockInputListener))}_onLocalBoundsChanged(n){this.mouseArea=n,this.touchArea=n}_speakReadingBlockContentListener(n){const s=this.getConnectedDisplays(),r=this.voicingUtterance,a=this.collectResponse({nameResponse:this.getReadingBlockNameResponse(),hintResponse:this.getReadingBlockHintResponse(),ignoreProperties:this.voicingIgnoreVoicingManagerProperties,responsePatternCollection:this._voicingResponsePacket.responsePatternCollection,utterance:r});if(a){for(let o=0;o<s.length;o++)if(!this.getDescendantsUseHighlighting(n.trail)){const l=n.trail.subtrailTo(this),h=Sp(l,s[o].rootNode),c=new el(s[o],h);r.readingBlockFocus=c,this.speakContent(a)}}}cleanVoicingUtterance(){this._voicingUtterance instanceof IV&&this._voicingUtterance.dispose(),super.cleanVoicingUtterance()}dispose(){$i.speechAllowedAndFullyEnabledProperty.unlink(this._readingBlockFocusableChangeListener),this.localBoundsProperty.unlink(this._localBoundsChangedListener),this.hasInputListener(this._readingBlockInputListener)&&this.removeInputListener(this._readingBlockInputListener),super.dispose()}mutate(n){return super.mutate(n)}});return e.prototype._mutatorKeys=DV.concat(e.prototype._mutatorKeys),e}),qG=13,zG=new ki({size:19,weight:"bold"}),FG=28,JL=13,HG=235,UG=335;class BS extends i_(Ai){constructor(e,t,n){const s=Ne()({headingOptions:{font:zG,maxWidth:UG,tagName:"h2",innerContent:e},textMaxWidth:HG,vBoxOptions:{align:"left",spacing:JL},a11yContentTagName:"ul",spacing:qG,align:"left"},n),r=new pi(e,s.headingOptions),a=[],o=[];for(let g=0;g<t.length;g++){const v=t[g];v.text.maxWidth=s.textMaxWidth,a.push(v.icon),o.push(v.label)}const l=new Ai(Ut({children:o},s.vBoxOptions)),h=new Ai(Ut({children:a,tagName:s.a11yContentTagName},s.vBoxOptions)),c=new _i({children:[l,h],spacing:FG});s.children=[r,c],super(s),this.headingStringProperty=typeof e=="string"?new Cf(e):e,this.icons=a,this.iconVBox=h,this.contentHBox=c,this.keyboardHelpSectionRows=t;const f=this.createReadingBlockResponseProperty();this.setReadingBlockNameResponse(f)}createReadingBlockResponseProperty(){const e=[this.headingStringProperty];for(let t=0;t<this.keyboardHelpSectionRows.length;t++){const n=this.keyboardHelpSectionRows[t];ai(n.readingBlockContent)&&e.push(n.readingBlockContent)}return Dt.deriveAny(e,()=>{let t="";return t+=`${this.headingStringProperty.value}, `,this.keyboardHelpSectionRows.forEach(n=>{n.readingBlockContent&&(t+=`${tl.getResponseText(n.readingBlockContent)} `)}),t})}static alignHelpSectionIcons(e){const n=ie.maxBy(e,s=>s.iconVBox.left).iconVBox.left;e.forEach(s=>{s.contentHBox.spacing=s.contentHBox.spacing+n-s.iconVBox.left})}}BS.DEFAULT_VERTICAL_ICON_SPACING=JL;const Ky=new ki(16),GG=16;class La{constructor(e,t,n,s){const r=Ne()({readingBlockContent:null},s);this.text=e,this.label=t,this.icon=n,this.readingBlockContent=r.readingBlockContent}setContentsVisible(e){this.text.visible=e,this.label.visible=e,this.icon.visible=e}static labelWithIcon(e,t,n){const s=Ne()({labelInnerContent:null,readingBlockContent:null,labelOptions:{font:Ky},iconOptions:{tagName:"li"}},n),r=new pi(e,s.labelOptions),a=new Bh({matchHorizontal:!1}),o=a.createBox(r),l=a.createBox(new Ge({children:[t]}),s.iconOptions);return l.innerContent=s.labelInnerContent,new La(r,o,l,{readingBlockContent:s.readingBlockContent||s.labelInnerContent})}static labelWithIconList(e,t,n){const s=Ne()({labelInnerContent:null,readingBlockContent:null,iconsVBoxOptions:{},labelOptions:{font:Ky}},n);s.iconsVBoxOptions=Ut({spacing:BS.DEFAULT_VERTICAL_ICON_SPACING*.75,align:"left",tagName:"li",innerContent:s.labelInnerContent},s.iconsVBoxOptions);const r=new pi(e,s.labelOptions),a=new Bh({matchHorizontal:!1});a.createBox(new Ge({children:[t[0]]}));const o=a.createBox(r),l=[];for(let A=0;A<t.length-1;A++){const P=new kt(WL,{font:Ky,maxWidth:GG}),w=new _i({children:[new Ge({children:[t[A]]}),P],spacing:Mn.DEFAULT_ICON_SPACING});l.push(w)}l.push(t[t.length-1]);const h=new Ai(Ut({children:l},s.iconsVBoxOptions)),c={yAlign:"top"},f=new Bh({matchHorizontal:!1}),g=f.createBox(h,c),v=f.createBox(o,c);return new La(r,v,g,{readingBlockContent:s.readingBlockContent||s.labelInnerContent})}static fromHotkeyData(e,t){const n=Ne()({icon:null,labelStringProperty:e.keyboardHelpDialogLabelStringProperty,pdomLabelStringProperty:e.keyboardHelpDialogPDOMLabelStringProperty,labelWithIconOptions:{}},t),s=n.icon||Mn.fromHotkeyData(e);return La.labelWithIcon(n.labelStringProperty,s,Ut({labelInnerContent:n.pdomLabelStringProperty},n.labelWithIconOptions))}}La.LABEL_FONT=Ky;class mr extends i_(kt){constructor(e,t){const n=Ne()({readingBlockNameResponse:e},t);n.readingBlockDisabledTagName?n.accessibleName=n.accessibleName===void 0?e:n.accessibleName:n.accessibleParagraph=n.accessibleParagraph===void 0?e:n.accessibleParagraph,super(e),this.focusHighlight=new t_(this),this.mutate(n)}}const WG=670,LV=BU;class KG extends Ua{constructor(e,t,n){const s=Ne()({titleAlign:"center",fill:"rgb( 214, 237, 249 )",ySpacing:15,phetioReadOnly:!0,phetioDynamicElement:!0,closeButtonVoicingDialogTitle:AV,isDisposable:!1},n),r=new Ge({tagName:"div"}),a=s.tandem.createTandem("content"),o=[];e.forEach(f=>{const g=f.tandem.supplied?a.createTandem(f.tandem.name):R.REQUIRED,v=f.createKeyboardHelpNode(g);o.push(v)});const l=new mr(AV,{font:new ki({weight:"bold",size:24}),maxWidth:WG,accessibleParagraph:null}),h=new YG,c=new Ai({children:[l,h],spacing:5});s.title=c,super(r,s),Cn.multilink([t,this.isShowingProperty],(f,g)=>{const v=o[e.indexOf(f)];g&&(r.children=[v])})}}class YG extends i_(Ge){constructor(e){const t=Ne()({readingBlockNameResponse:LV},e);super();const n=On.tab(),s=La.labelWithIcon(qU,n,{labelInnerContent:LV,iconOptions:{tagName:"p"}}),r=new _i({children:[s.icon,s.label],spacing:4});this.addChild(r),this.mutate(t)}}const MV=i7,jG=17.085;class XG extends d0{constructor(e,t,n,s){const r=Ne()({highlightExtensionWidth:8.6,highlightExtensionHeight:10,highlightCenterOffsetY:2,visiblePropertyOptions:{phetioFeatured:!0},accessibleName:MV,voicingNameResponse:MV},s);let a=null;r.listener=()=>{a.getElement().show()};const o=new ba(gp,{scale:jG/gp.height,pickable:!1});super(o,n,r),a=new Iu(l=>new KG(e,t,{tandem:l,focusOnHideNode:this}),[],{tandem:r.tandem.createTandem("keyboardHelpDialogCapsule"),phetioType:Iu.PhetioCapsuleIO(Ua.DialogIO),disposeOnClear:!1}),n.link(l=>{o.image=l.equals(ct.BLACK)?gp:e_})}}const OV=new Fe(new He("JOIST/a11y.soundToggle.label",{en:"All Audio"},R.OPT_OUT),R.OPT_OUT),QG=new Fe(new He("JOIST/a11y.soundToggle.alert.simSoundOn",{en:"Audio Features on."},R.OPT_OUT),R.OPT_OUT),JG=new Fe(new He("JOIST/a11y.soundToggle.alert.simSoundOff",{en:"Audio Features off."},R.OPT_OUT),R.OPT_OUT);class Vo extends Oo{constructor(e,t,n){super(e),this.lock(),this.nodes=t,this.cells=t.map(s=>new wS(this,s,null)),this.layoutCallback=n,this.nodes.forEach(s=>this.addNode(s,!1)),this.unlock(),this.updateLayout()}layout(){if(super.layout(),!ie.some(this.cells,t=>!t.isConnected())){const t=this.cells.map(n=>n.proxy);this.layoutCallback.apply(null,t),this.finishedLayoutEmitter.emit()}}dispose(){this.cells.forEach(e=>e.dispose()),super.dispose()}static create(e,t,n){return new Vo(e,t,n)}}function p0(i,e){return i.map(t=>t.createNode(e&&t.tandemName?e.createTandem(t.tandemName):R.OPTIONAL))}class n_ extends Ge{constructor(e,t,n){const s=Ne()({alignChildren:n_.CENTER,unselectedChildrenSceneGraphStrategy:"included"},n),r=p0(t,s.tandem);s.children=r,s.alignChildren(s.children),super(s);const a=new Vo(this,s.children,(...l)=>{s.alignChildren(l)}),o=l=>{const h=[];for(let c=0;c<t.length;c++){const g=t[c].value===l;r[c].visible=g,g&&h.push(r[c])}s.unselectedChildrenSceneGraphStrategy==="excluded"&&(this.children=h)};e.link(o),this.nodes=r,this.disposeToggleNode=function(){e.unlink(o),a.dispose(),r.forEach(l=>l.dispose())}}dispose(){this.disposeToggleNode(),super.dispose()}static CENTER(e){for(let t=1;t<e.length;t++)e[t].center=e[0].center}static CENTER_X(e){for(let t=1;t<e.length;t++)e[t].centerX=e[0].centerX}static CENTER_Y(e){for(let t=1;t<e.length;t++)e[t].centerY=e[0].centerY}static LEFT(e){for(let t=1;t<e.length;t++)e[t].left=e[0].left}static BOTTOM(e){for(let t=1;t<e.length;t++)e[t].bottom=e[0].bottom}static CENTER_BOTTOM(e){for(let t=1;t<e.length;t++)e[t].centerBottom=e[0].centerBottom}static RIGHT(e){for(let t=1;t<e.length;t++)e[t].right=e[0].right}static NONE(e){}}class ZL extends Sn{constructor(e){const t=Ne()({alertStableDelay:500},e);super(t)}}const Iv=22,ZG=Iv*1.13,yd=Iv*.77,Yy=yd*.58,NV=Yy*.46,X2=yd*.35,wy=(yd-X2)/2,xh=1,Sy=yd*.52,$L=yd*.63,eM=yd*.23,Q2=$L-eM,RV=Q2-eM,op=Math.PI/2.7,AA=op*-1;class $G extends d0{constructor(e,t,n){const s=Ne()({highlightExtensionWidth:8.6,highlightExtensionHeight:10,highlightCenterOffsetY:0,enabled:!(phet.chipper.isFuzzEnabled()&&phet.chipper.supportsAnyVoicing()),visiblePropertyOptions:{phetioFeatured:!0},phetioFeatured:!0,accessibleName:OV,voicingNameResponse:OV},n);s.listener=()=>e.set(!e.get());const r=new Ge,a=new Ge,o=new xt(0,0,ZG,Iv,{fill:"transparent"});r.addChild(o),a.addChild(o);const l=new bi(new zt().moveTo(Yy,0).lineTo(NV,wy).lineTo(xh,wy).arc(xh,wy+xh,xh,Math.PI*1.5,Math.PI,!0).lineToRelative(0,X2-2*xh).arc(xh,wy+X2-xh,xh,Math.PI,Math.PI*.5,!0).lineToRelative(NV-xh,0).lineTo(Yy,yd).lineTo(Yy,0).close(),{stroke:"black",lineWidth:1.5,lineJoin:"round",centerY:a.centerY,left:0});r.addChild(l),a.addChild(l);const h=new bi(new zt().moveTo(0,0).lineTo(Sy,Sy).moveTo(0,Sy).lineTo(Sy,0),{stroke:"black",lineWidth:1.7,lineCap:"round",right:a.width,centerY:a.centerY});a.addChild(h);const c=new bi(new zt().arc(0,0,$L,op,AA,!0).moveToPoint(new Oe(Q2,0).rotated(op)).arc(0,0,Q2,op,AA,!0).moveToPoint(new Oe(RV,0).rotated(op)).arc(0,0,RV,op,AA,!0),{stroke:"black",lineWidth:1.7,lineCap:"round",right:r.width,centerY:r.centerY});r.addChild(c);const f=new n_(wu.anyOutputEnabledProperty,[{value:!0,createNode:()=>r},{value:!1,createNode:()=>a}],{maxHeight:Iv*.85});super(f,t,s),this.addLinkedElement(e,{tandemName:"property"});const g=new ZL,v=A=>{s.supportsAudioPreferences&&(this.setPDOMAttribute("aria-pressed",A),g.alert=A?QG:JG,this.addAccessibleResponse(g),$i.voicingFullyEnabledProperty.value&&$i.speakIgnoringEnabled(g))};e.lazyLink(v),this.setPDOMAttribute("aria-pressed",e.get()),wu.anySubcomponentEnabledProperty.link(A=>{this.enabled=A}),t.link(A=>{const P=A.equals(ct.BLACK)?"white":"black";l.stroke=P,h.stroke=P,c.stroke=P})}}const Lv=new Fe(new He("JOIST/preferences.title",{en:"Preferences",af:"Voorkeure",ak:"Nea ɛhohia kann",am:"ምርጫዎች",ar:"التفضيلات",ar_KW:"تفضيلات",ar_LY:"التفضيلات",ar_MA:"تفضيلات",ar_SA:"التفضيلات",ar_SY:"التفضيلات",az:"Üstünlüklər",be:"Лайкі",bg:"Настройки",bn:"Preferences",bo:"སྔོན་འདེམས།",bs:"Podešavanja",ca:"Preferències",cs:"Předvolby",cy:"Gosodiadau",da:"Præferencer",de:"Einstellungen",el:"Προτιμήσεις",es:"Preferencias",es_ES:"Preferencias",es_MX:"Preferencias",es_PE:"Preferencias",eu:"Lehentasunak",fa:"ترجیحات",fa_DA:"ترجیحات",fi:"Valinnat",fr:"Préférences",ga:"Sainroghanna",gl:"Preferencias",gu:"પ્રાથમિકતા",ha:"Abin zaɓe",hi:"पसंद",hr:"Postavke",ht:"Preferans",hu:"Preferenciák",hy:"Նախապատվություններ",ig:"Mmasị",in:"Preferensi",is:"Valkostir",it:"Preferenze",iw:"העדפות",ka:"არჩევა",ki:"maũndũ ma bata",kn:"ಆದ್ಯತೆಗಳು",ko:"선호도",ku:"هەڵبژاردەکان",lg:"Byosimye",lt:"Nustatymai",lv:"Iestatījumi",mi:"Kōwhiringa",mn:"Сонголтууд",mr:"प्राधान्यक्रम",ms:"Keutamaan",mt:"Preferenzi",nb:"Preferanser",nl:"Voorkeuren",nn:"Preferanser",ny:"Zokonda",om:"Filannoowwan",pl:"Preferencje",ps:"لومړیتوبونه",pt:"Preferências",pt_BR:"Preferências",qu:"Munasqa",ro:"Preferințe",ru:"Предпочтения",rw:"Amahitamo",se:"Preferánssat",sk:"Predvoľby",sl:"Nastavitve",sn:"Zvaunoda",sp:"Dikgetho",sq:"Preferencat",sr:"Подешавања",st:"likhetho",sv:"Inställningar",sw:"Mapendeleo",ta:"விருப்பத்தெரிவுகள்",te:"ప్రాధాన్యతలు",tg:"Афзалиятҳо",th:"ปรับแต่งค่าการเล่น",ti:"ኣማራፅታት",tk:"Saýlamalar",tl:"Mga Kagustuhan",tn:"Tse o di ikgethetseng",tr:"Seçenekler",tw:"Nkyɛnsodeɛ ",uk:"Вподобання",ur:"ترجیہات",uz:"Afzalliklar",vi:"Điều chỉnh",wo:"Yu La gënal",yo:"Awọn ayanfẹ",zh_CN:"参数设定",zh_HK:"喜好",zh_TW:"喜好設定",zu:"izintandokazi"},R.OPT_OUT),R.OPT_OUT),vp=new Image,eW=_n.createLock(vp);vp.onload=eW;vp.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHsAAACCCAYAAABmWreuAAAACXBIWXMAAC4jAAAuIwF4pT92AAAK3ElEQVR4nO1d63EbNxAGMv5vdmCqAlMVWKogdAWWK4hVQZQKGFdApwLJFVCqgHQFJ1dApgJkLt6zoNM99gXcguY3o/FDJA7YvQWwux8W3h0RQggz59zCOTeHn9fw7xjN72rsnHOH6Jf137/Fv/Pe3x+TjIpGCOEihLAOIVQhHbYhhFUIYX7EorSL2opDCLcJFdyHm19d9lkRQliEEPYTKLrBFpaMolDcml0r2jm3cc5NLeyd9/584j6Q8FtBfW2wNqDoGvXssjLQDzSKsuwQwhUo2xLOvPePxvrUidIs+08DfWjjD1vd6Ucxyoa12qLrszTQBxRKsuwLA33owrwU//uVgT5g8Y75vQNEwxrU6+t3+PvbaLM364i2YVG/iF9SDFoTJSmboohLCHXuEJ99BrDS+ueDc+4K+bW31Oec0K+AGSHgsdGSIyXIUoLuSlmzKes12ZoV2uJO/1lRirIpwnxQfC4641UnZBSfmwSlKJuyOdO07G+IzzQwb93HNo0/KkezKC8O11vIBvPKhmAKFppW7WA3f0B81J0sWweUtVBzvW6AfYHMB1fU/OyIEuSUp9Op1usGD4QXbgFBGzFaG746nYqdYdIASATrHiLBHpgkV5xEP9CNSFSjFIOEflBwy7FwkOUNECO6UMHv86Z3IcixZgjh05ggYNAbYttBM5jSMVYO1mOKgbGuiC91bUSfUoy1r4N9bx8W27biQagrQZvJiASC8b5QTAhhqUSQTJvXB4VIFd1GxXi7u5As1ciYxdrYDCx3EqRTOHN6zYVkO2GYhawCPaWjXS+g0FoNCWoHU9qwfFBghQ3Vojho0FiSDZAS7rz371M+ICTa7SvhAFy4Qfds1LJhR3lrbHAxat/6c4bnXGv50AkwUyFiTnTqAoM1MZSqAthNW9278F0yGJgl7CGwMHlYMgooWZMPXTbgZnFchVUC9yyAYM3FniHCpm3pexgvJ+5AX3KZD7qKvj8Hl0W6DGxLIAZAWFjiRzcKXrba5egBLy+YoqjojWDBLHHFUHxRJyYZJ0ubgNKgchgzZUXpNHVaQhPuQCDLkYjSvgRr7sNIEKZRMHpzCbMkddYYNxRGloe3KXh6XjtWvCnxOGwbMDs2Y3qRC2C0R43i7UflyLBqtQzMFK5USsAsprapZOim37oZVl0EX/pYwJzOu182xptT7LpaKiDOQMHLyBrDqq2dk/4lAEsDNR38fO1mRINOlYMmArixFDyt3QzqTbFWDWO9KH0JIlp3FX+Ruq03b9WRP79C7EUq+MxNKR4BQ2eL5ouUCI1pqwarlYZo99aL3DFyFzecKdykAMCKU1Q5NJmAcfR91pq6CzfHVgHfM0d+eWUtskfMYWyoys7DV0ZCIdNExdbamk6ZzajKNpOgmJA4sI9TuVOCKgNuOnPSwRphiJQmg23zRc5UOMlgjVGBsstAUI15LRVg1tqdwuNBqZBtWROeyFk2jcwFgsjidxskPzYYzxvrjF+i6P8jaD5qrLZS7m67Lvh2neoMMQizElYj3sHP99b/v4WTLpK27733l4LvD0Kh7Pbls+svFA7tJSu4Llhm0JEwBZZokoOFCoX0uwkMFhXOSL02uBUUAeDIAE/yw/dlKVT08BILCpe84ZVm4IHZF9EumVlsQPzcVh+oaUx+X4Quzl5D4cyNo6bAqTJQse6sihYMNoaIdep4rpZ6OJcxs4hecqF7uRftHYQH0UU+KDGLlaqmCpXkJ4o9CDej8uVTMK2wH84I46asvEAh+YmmcgahMKgpOuoEWeHC51FmlKSBHQZRgO2RMIJHaA8IXWbDe18HTs4J5R2lAZY3hM9+FT5rEBAsuiN8RWJlFLntIGCC+g6pnCXU8sRWEZRWG0QLzHtPUQQXlBdKslehVHf4SolaWq5dip0KcxW3yfKclIWALCsba9lZanpOXjtUASVez9gGpQB8LpisPX4MyqZs5HIhRXVkMSwrG7t2WaT5/mugDy9wDMrOwvbMxUhJSYQgKRs6grUkqcVhlT3LRO/9nfBZyTROGQvp8jhK7dI5sCVyKbvNKBnCB+GzMKAkGHJVQlyqRw8FbAlJDREqnz3Z9EcMFe+Fz+LExlFEDUztUgn/ia1s4ExhfdtZ4ru1KW1Lo3mvGd+pZ53RwkODyoYkuIToJg1EUAT3KcUmClKWlJdWGqfnGsgCo/BOTMKWaIFZpkuTEkWVgWgKd7JDADwZWFB01BfqMVwtShRHBmoVGbPQwhQeokqpZQqdfUOOgGyovklMqgsLJMOefnHpzRvsOh7VV+VSd5PUWVWYZV8qXNhoMkU7GXe8QVMvdAltzcCdvIBxS2/mqQy5fm08J34KaouHlCdBWgPm+J+5kDyUKjwwsIkb4goyi6Kjflq8riFbNQrhUaCf1ZI4hWdYx2uEg01xiZwE2StHCRS+4p66mKw8liGFlyYDcgGdSQcpHKwmipQBVdlZKy0MQeAPS2GieI5jFK2lkhfMsEJqAqD3/qNz7n0m0mGdoz4H/rwl4PdNjDXb4nVLKa3cTCmsNoj+9w/3i7gbN3sjD7y4K6VCeBX3Vv9cIK7Zq0ZIlGOi4sxODkQViSkCKaYyMWNjvfDuiaBAue/jo8G1axBRlGsRrXOP8HOAo03FAKZlbOSuvnL67Oe/iNGppLHgE4bBsOrnUT7RVQQnZAVxaepOvRI3almKvZ3wQkdUo+yOjTBKapxuAMoIZnay914vTmOnu70ygVFcZ7QOGtW6RZu1jotYTRWw5yKqJ0e+aLULTALHeACMkfIkxcwRVyxnT59qonXpatswVlSeHvPiNpxOmBWABwcA0S3KHdpViUsEgQjSeTl6T5tUajFt88xghbwochfdji9JR5q7iKULChfT3HaFZ5ksItpSyLxOYgtri1TBbVSpqv5KAVOsNj+uUTyn4CDv5mODJD80NTijknPePoQBbyNokPPVYDPhHSVWlRzGopp+6JeOlyTJiZq08Lm+ySBlSSn3lEipz4GbzG3X5Arv/bm4FeOc7ZCDLmXUkhugDmmgaEne+5uMxeU4SLqOgyAtewTXmBQthYOWi+vFQWqygWUywxcst4BSqLZW9GUihYuJA4l36aRCNR04JKqzUsvtGvthTqFadOMjuIe2zmBjcSkUSEplS9q+gzGeQVXnv5UUT6pIzMZA7HcMnVGiGAK35jbheDkYDPeCDLnBp7y5g8jfHFL6HqPgnrYnuYyloy/UbFNFjQFEYeWxcKsoqDTqZyM7u4BNTBMbP4DfJ9rBM2qvnWn72xCowFZL+gs8F8nzZiDLWKk7kGeu+mrTgOjjq8fPiRkni3VUf6KEqsSU2SFF6WfstHmwbnklKJvilqn6w2Cp1m40YMO8ssG1wCpc2/2itGexyP0zlFJcHm3dysEVSjDlZNlKeCA0ozmVU9oyf3zo6CxbIbQZAztL7Eq4MKYIZRMP3V0olbOkLAdFHAp8ZaAPWNwjLa3eQW/hdshmHY2XgccoNt1u713P/4+BssxMhpKU/cBQwkXrz1QowrJLuurJqkCLOdtdjLLhvk2Lm6Ac94CqoLRL3CwK9h8DfUBBJeuVC5ARqgzxwe689+8N9AOFoiwbfNmPBrriYEmx0hcUiruLE9buqYV8yEIJOuEHhPW3JdhYz1sfJZDUKE0lWz0NgkJRG7QhQIh0DsmLN/D3GTGZEadTd3Bb7n0pse8xHI2ysWid7jgKJaLgnPsPitJymDsEllkAAAAASUVORK5CYII=";const s_=new Image,tW=_n.createLock(s_);s_.onload=tW;s_.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHsAAACCCAYAAABmWreuAAAACXBIWXMAAC4jAAAuIwF4pT92AAAJlklEQVR4nO1dO3IbRxAd2gqUeUNnXmXOjNCZcAT4BjwCj0CfAOUTsHQCWJky2CcAdQLQJwCdOaNrWTOowXIXO68/Mz2rfVVdlixyP9Pb83n9u3HzQuOcWznnWi8/+L/HCP/W4dE59xz9Y/fnr71/+2tmY1Q1OmU+OOeOzrkXJTk457bRR7IgMzor3ikqeEy2i6LzorPmUwFFBzn4j22BMkorOlb4AmUcDCg6yDKlK+LWkKKDLJs2JWjuuKnyMMuRLoyVQUW/+P1DFfiuImWvDTzDEJoB4sYk3tXwkB6/EH/v2bNhAU/OuX+ia4YjFEdpq949FjCBrNcbhuJaP4s8LLvyMmiAgd8LPmHqPas4c9eyZiPrteR0mnqtKtbsWpSNDObfgvdFPF5WN5Bn1KLsj8DPSlr214SfCTCv7FqQyoUfhd+nBdbt3XyHPx8QMkVjwFM/NPPkSg3TOLJeI9NuKlLX7cY6Ty6p7MavW2vhl0bWa40QolLr9joSE77zqZCgnfdUUR527c/MCE+tgTX4DHvix96N5d0VF243xvclZo8GZJjCINwlPOyKoGRNYgMhdGJ5SPjIV559Q9jBk1d6FjQCAQSHAcU3/sWp19SkLKnve/LvGWMjFCCp7lqVUPTQ9IR+3UNyq/je6CzWl72/hnQ4larCKdNrLtFcyyxGyATpzxwiuDf8wtpnXKuBE0FE2Tt0R5pbcrBXFiJar33sIsezxviLHjLx0ndGY+CCiLh2S2RdpMhDIdfixvDehbV+b4y9zKkUsTCAVmCXrjE+pLGhTt9bpUD+B6PcM4XpS1Hajsg7kPYvlBvFZ93W/527DORak7m4Ze5tTv6D3gjooX+Nq0D8uLHljaEhKj4bLSgENLM0EEpTykFnSsivj05LKC+9mWCUTpVHftwlKBjZXLaEWSPJUNAz9Ym5K+5zxfuZpMOuonca8gWgQDfLSWdv1Kol6boqojQBSAc0oMvgVecQatVLjnJeUKbz0Y8NteolojI/UB/F4MYZJfuXVNVyQGnbN9aNskFLEno5oC7Xi505GnpTs1XHgZE1A7Hui3P3tXNhrVbd+OPK1u9Frm1sjv5n7iv6CFDrPp90EIbGulWj6bZDcqqgyB3qu7h3hCnc6ll4reRvtuqAcSBv/uogQc7WkrnPUmgz+Ze3Bpk95AT1yokgylYJbmOA62lC5WhwZkNmM0jZJ9R9pohSgQMn5bBlBKj7k+TOLP2yFiJEahuDM7VNmQpLvaylUKASY0BJvXqJT1HUAcxdJYiTHqQlOc/lnIyc8/JLmcrffDHKsBb8GIQc5JdR0a8M2vf+Qs/+Yr8SHiK0aegK1/wn+35nNP549Z5xja7Wyhfn3Gf/rEG6d/+Rce33fgw+MZ5tCiGz9Wfi7//mi/2dwU3a0yy4Tl1mECZszQyO1Fq/ufXVR5daiwqnph7tiNPrmjgG0sV7wrNwFD25xDZMRkqaeKBYG5f8oe54Ja2bmzkKjQHniMMNQgwozQGgYyBl3VxFk8agtMLRo5YGnZs7VIuTGs1m91Bft+SLI7yvlpMGdSVyj6JULkFqNiVPK5ybo1O45lkX+eC5UznFssUUHUDxMHHvl3of7WR81LpzJgMctD509MzHATKd5fDEIc/DWb6QoyZ01EUrHD4CVX+51QaRaelP5r1SgJS25ij7KeFnAj73GsdeRU0NYcaQqwturvsgyoZgWdnWojyTLcg595Pic5AxB8uW7BwgBZMBinNQNrUFlCaQWSAbLCs7dSNoMZdbo+45G5aVnWoduaI9q89YRZWNJJdz163UXWmu9oi52k0h91Fbwii+bg4QijJHLBzC03M+PtR/Lx4WRo2W4Fg3ku0gVrtzBGhsPQcUblysDg0nLIa7ziH31bRuxKq5PD3VxcmOEtoww2K4nDXqT9fYRKEuR27wBCcOjuwUKRIt0UPuMl3cMZCoe04NiSKPgQVFB6BpuFIKp4yB5FKSReHcm0i7GymDPtSIJRXUxjQayQKcDJjJECULQYZDoEa77oGPL9RXpSb0a9VZ5c6yg+/PSa/RVLQT6NERF4RdR+TQ2g8mtzPPUfnox1H4mxmH0xpCMxMkhuWGNDmoVE7CwEUwJjWCNJeiAyy2a8hZJpvDeZCqJQXZFfA4aTSR40iJylEr4r5iGwYQ/cWS5bGsKLy2MXidyosT7wSUVnitYwAp21LBOy7TRBVLFaPQJMzq66Bx+ftUORgt+AfF8VtKs6GC2475mnDYOG0g5+9ztSRkd2e5I0/rlS5h6UdGV/9cQNbsM2+PWIV2oIAUNoSGcqEycQ29StCN9frG/2ILZh/+XmHPrcByraKP9cnLMzNurAT2AHPXveOH+H8gu7parHuuQK36zZ6D1YpgQVaIGCayUctV7G3BJVCjHOVGxC60QAUU7+RVg0RJ9qW3Vz6gXMKkMaLWzXXcN71GrHPZCwQqk9JodQiU4n9Jyyxq3Wig3VSL5RLuU0mMuSGPIz2yp9Bo6oQSojT1AmgP7WOlS0RqIMhYc/QhoLHk8NEYjQoZ2p23/uU57kiLjViGwG1MsxuhZylRRDCXTyklGTxDXAUPWbmVvhx9NArxcUHxFEWTOx9bC/JDKMIcyN19KEVYG0FLMV+x0ktZerBka0p+kchI4cZsa0o4quVg8iTaPmqKWON6yzHbL5mYPIuWHIuoW9ZizHYQsa96BJyGOTlEPJKGcrDPKZrg5ltpitqsxm1Ocs0yudfQ3KVz49tOSoainpEj9ZUf/PQTNlfURixBNDl1znPF1O/KfzgSis+WekVNQRljiWJQjzWaNccpypiieznsoljBnFSE8+aU0lMU3AclAUCixMUQUG8The0Lip/aBCP55m9wA/78GFZR5z4XBfBxyza3/mNJPVZ8UCjhfAeQFRKBmKGIXzwrhDrvauWprQA542uwaojHyXQIcg1ViZHZQaO8Y6oCawxHNglk4yIJhEyxmAd3gVrqjadajPRZG5mWLRa5v0AtykamckmFfwR+NlcPETJqUTZSrF1yk4Rca1mvhYC4WSXJldR7ajtiRFDTmo10FpCw7lzF5LPhXQ0P6fGYqIA2srSwjsabp6eInFj1mL2wRqPrvsmeIDXDcgBFDfncVYGSEZFDtDj5bx4WQ4OqSW6srYnbHwaeoY9Pth5nPuAU1NUQ7b7d3zw4pbIlZSk1kgmlAwC166sv6CFXZcO+7JfyImWQGholIQfDyYVJkApLsoAQFrXyzcpbQp/OOACh+++/noVD6FqzmJOyUzFU9G7+cM79D3N6gKw3vmD0AAAAAElFTkSuQmCC";class qS extends Mt{constructor(e,t){const n=Ne()({enumeration:e.enumeration},t),s=Ne()({validValues:n.enumeration.values,phetioValueType:tS({enumeration:n.enumeration})},n);super(e,s)}}const iW={stretch:!0,isSeparator:!0};class tM extends Fh{constructor(e){super(so()({},{layoutOptions:iW,stroke:"rgb(100,100,100)"},e))}}class zS extends nh(tM){constructor(e){super(),this.localPreferredWidthProperty.link(t=>{t!==null&&(this.x2=t)}),this.mutate(e)}}const nW=new ki({weight:"bold",size:16}),sW=new ki(16),rW=new ki({size:24,weight:"bold"}),aW=new ki(20),oW=120,lW={font:aW,maxWidth:oW},iM=new ki(16),nM=500,hW={font:iM,maxWidth:nM},uW=new ki({weight:"bold",size:16}),cW=360,dW={font:uW,maxWidth:cW},Vi={TOGGLE_SWITCH_OPTIONS:{size:new ji(36,18),trackFillRight:"#64bd5a",enabled:!(phet.chipper.isFuzzEnabled()&&phet.chipper.supportsAnyVoicing()),voicingIgnoreVoicingManagerProperties:!0,tandem:R.OPT_OUT},CONTROL_LABEL_OPTIONS:{font:nW,maxWidth:360},CONTROL_DESCRIPTION_OPTIONS:{font:sW,lineWrap:"stretch"},TAB_OPTIONS:lW,TITLE_FONT:rW,CONTENT_FONT:iM,CONTENT_MAX_WIDTH:nM,PANEL_SECTION_CONTENT_OPTIONS:hW,PANEL_SECTION_LABEL_OPTIONS:dW,CONTENT_SPACING:20,VERTICAL_CONTENT_SPACING:5,CONTENT_INDENTATION_SPACING:15},pW=new Fe(new He("JOIST/preferences.tabs.audio.audioFeatures.title",{en:"Audio Features",af:"Oudio-kenmerke",am:"የድምጽ ባህሪያት",ar:"ميزات الصوت",ar_KW:"مميزات الصوت",ar_LY:"ميزات الصوت",ar_MA:"ضبط الصوت",ar_SA:"خصائص الصوت",ar_SY:"ميزات الصوت",az:"Audio xüsusiyyətlər",be:"Функцыі аўдыё",bg:"Звукови ефекти",bn:"Audio Features",bo:"སྒྲའི་ཁྱད་ཆཽས།",bs:"Postavke zvuka",ca:"Opcions de so",cs:"Zvukové funkce",cy:"Nodweddion Sain",da:"Lyd muligheder",de:"Audio Eigenschaften",el:"Χαρακτηριστικά ήχου",es:"Funciones de Audio",es_ES:"Características de audio",es_MX:"Funciones de Audio",es_PE:"Características del audio",eu:"Audio ezaugarriak",fa:"جلوه های صوتی",fa_DA:"ویژگی‌های صوتی",fi:"Ääniominaisuudet",fr:"Caractéristiques audio",ga:"Gnéithe Fuaime",gl:"Características de audio",gu:"ધ્વની ફીચર્સ",ha:"Siffar abin saurare",hi:"ध्वनी विशेषताएँ",hr:"Zvučne značajke",ht:"Fonksyonalite Odyo",hu:"Audio jellemzők",hy:"Ձայնի առանձնահատկություններ",ig:"Njirimara Ọdịyo",in:"Fitur Audio",is:"Eiginleikar hljóðs",it:"Caratteristiche audio",iw:"מאפייני שמע",ka:"ხმის პარამეტრები",ki:"Miikarire ya Mũtarĩri",kn:"ಧ್ವನಿ ಲಕ್ಷಣಗಳು",ko:"오디오 특성",ku:"سیفەتەکانی دەنگ",lg:"Amaloboozi nebyago",lt:"Garso nustatymai",mi:"Āhuatanga Oro",mn:"Дууны тохиргоо",mr:"आवाज वैशिष्ट्ये",ms:"Ciri-ciri Audio",mt:"Karatteristici tal-awdjo",nb:"Lydinstillinger",nl:"Audio mogelijkheden",ny:"Zinthu Zomvera",om:"Amaloota Sagalee",pl:"Funkcje audio",ps:"غږیزې ځانګړتیاوې",pt:"Recursos de áudio",pt_BR:"Recursos de Áudio",qu:"Imayna kasqan uyarinapa",ro:"Opțiuni audio",ru:"Аудио функции",rw:"Ibiranga amajwi",se:"Jietna válljejumit",sk:"Funkcie zvuku",sl:"Avdio nastavitve",sn:"Maficha eOdhiyo",sp:"Dikarolo tša Mamelwang",sq:"Veçoritë e Audios",sr:"Поставке звука",st:"Likarolo tsa melumo",sv:"Ljudfunktioner",sw:"Vipengele vya Sauti",ta:"ஒலி அமைப்புக்கள்",te:"శ్రవణ విశిష్టతలు",tg:"Хусусиятҳои садо",th:"ปรับการแสดงเสียง",ti:"መዳያት ድምፂ",tk:"Ses aýratynlyklary",tl:"Mga katangian ng Audio",tn:"Dikarolo tsa Kutlo",tr:"Ses Özellikleri",tw:"Otie ahyɛnsode",uk:"Функції аудіо",ur:"صوتی خصوصیات",uz:"Audio xususiyatlari",vi:"Audio Features",wo:"Coow",yo:"Audio Awọn ẹya ara ẹrọ",zh_CN:"声音特性",zh_HK:"音效功能",zh_TW:"音效功能",zu:"izici zomsindo"},R.OPT_OUT),R.OPT_OUT),wA=new Oe(0,0);class vd extends Fa{constructor(e){const t=Ne()({positionProperty:null,start:null,end:null,drag:ie.noop,transform:null,dragBoundsProperty:null,allowTouchSnag:!0,applyOffset:!0,useParentOffset:!1,trackAncestors:!1,translateNode:!1,mapPosition:null,offsetPosition:null,canClick:!1,tandem:R.REQUIRED,phetioReadOnly:!0,phetioFeatured:rn.DEFAULT_OPTIONS.phetioFeatured},e);super(t),this._allowTouchSnag=t.allowTouchSnag,this._applyOffset=t.applyOffset,this._useParentOffset=t.useParentOffset,this._trackAncestors=t.trackAncestors,this._translateNode=t.translateNode,this._transform=t.transform,this._positionProperty=t.positionProperty,this._mapPosition=t.mapPosition,this._offsetPosition=t.offsetPosition,this._dragBoundsProperty=t.dragBoundsProperty||new Mt(null),this._start=t.start,this._end=t.end,this._canClick=t.canClick,this.isUserControlledProperty=this.isPressedProperty,this._globalPoint=new Oe(0,0),this._localPoint=new Oe(0,0),this._parentPoint=new Oe(0,0),this._modelPoint=new Oe(0,0),this._modelDelta=new Oe(0,0),this._parentOffset=new Oe(0,0),this._transformTracker=null,this._transformTrackerListener=this.ancestorTransformed.bind(this),this._lastInterruptedTouchLikePointer=null,this._dragAction=new Zi(n=>{const r=this.pointer.point;r&&(this._globalPoint.equals(r)||this.reposition(r)),Fa.prototype.drag.call(this,n)},{parameters:[{name:"event",phetioType:Lo.SceneryEventIO}],phetioFeatured:t.phetioFeatured,tandem:t.tandem.createTandem("dragAction"),phetioHighFrequency:!0,phetioDocumentation:"Emits whenever a drag occurs with an SceneryEventIO argument.",phetioReadOnly:t.phetioReadOnly,phetioEventType:vi.USER})}press(e,t,n){return super.press(e,t,()=>{const r=this;r.pointer.reserveForDrag(),t&&Df.forwardInteractiveHighlightFromPress(t,e),this.attachTransformTracker();const a=r.pointer.point,o=this.globalToParentPoint(this._localPoint.set(a));this._useParentOffset&&this.modelToParentPoint(this._parentOffset.set(this._positionProperty.value)).subtract(o),this.parentToLocalPoint(o),this.reposition(a),this._start&&this._start(e,r),n&&n()})}release(e,t){super.release(e,()=>{this.detachTransformTracker(),this._end&&this._end(e||null,this),t&&t()})}canClick(){return super.canClick()&&this._canClick}click(e,t){return super.click(e,()=>{this._start&&this._start(e,this),t&&t(),this._end&&this._end(e,this)})}drag(e){const n=this.pointer.point;!n||this._globalPoint.equals(n)||this.isPressed&&this._dragAction.execute(e)}tryTouchSnag(e){this._allowTouchSnag&&(!this.attach||!e.pointer.isAttached())&&this.press(e)}getGlobalPoint(){return this._globalPoint.copy()}get globalPoint(){return this.getGlobalPoint()}getLocalPoint(){return this._localPoint.copy()}get localPoint(){return this.getLocalPoint()}getParentPoint(){return this._parentPoint.copy()}get parentPoint(){return this.getParentPoint()}getModelPoint(){return this._modelPoint.copy()}get modelPoint(){return this.getModelPoint()}getModelDelta(){return this._modelDelta.copy()}get modelDelta(){return this.getModelDelta()}globalToParentPoint(e){return this.pressedTrail.getParentTransform().getInverse().multiplyVector2(e),e}parentToLocalPoint(e){return this.pressedTrail.lastNode().getTransform().getInverse().multiplyVector2(e),e}localToParentPoint(e){return this.pressedTrail.lastNode().getMatrix().multiplyVector2(e),e}parentToModelPoint(e){return this._transform&&(this._transform instanceof $r?this._transform:this._transform.value).getInverse().multiplyVector2(e),e}modelToParentPoint(e){return this._transform&&(this._transform instanceof $r?this._transform:this._transform.value).getMatrix().multiplyVector2(e),e}mapModelPoint(e){return this._mapPosition&&(e=this._mapPosition(e)),this._dragBoundsProperty.value?this._dragBoundsProperty.value.closestPointTo(e):e}applyParentOffset(e){this._offsetPosition&&e.add(this._offsetPosition(e,this)),this._applyOffset&&(this._useParentOffset?e.add(this._parentOffset):(e.subtract(this.localToParentPoint(wA.set(this._localPoint))),e.add(this.localToParentPoint(wA.setXY(0,0)))))}reposition(e){const t=this;this._globalPoint.set(e),this.applyParentOffset(this.globalToParentPoint(this._parentPoint.set(e))),this._modelDelta.set(this._modelPoint).negate(),this._modelPoint.set(this.mapModelPoint(this.parentToModelPoint(wA.set(this._parentPoint)))),this._modelDelta.add(this._modelPoint),this.modelToParentPoint(this._parentPoint.set(this._modelPoint)),this._translateNode&&(t.pressedTrail.lastNode().translation=this._parentPoint),this._positionProperty&&(this._positionProperty.value=this._modelPoint.copy())}touchenter(e){e.pointer.isDownProperty.value&&this.tryTouchSnag(e)}touchmove(e){this.tryTouchSnag(e)}ancestorTransformed(){const t=this.pointer.point;t&&this.reposition(t)}attachTransformTracker(){const e=this;this._trackAncestors&&(this._transformTracker=new kc(e.pressedTrail.copy().removeDescendant()),this._transformTracker.addListener(this._transformTrackerListener))}detachTransformTracker(){this._transformTracker&&(this._transformTracker.removeListener(this._transformTrackerListener),this._transformTracker.dispose(),this._transformTracker=null)}getDragBounds(){return this._dragBoundsProperty.value}get dragBounds(){return this.getDragBounds()}setTransform(e){this._transform=e}set transform(e){this.setTransform(e)}get transform(){return this.getTransform()}getTransform(){return this._transform}interrupt(){this.pointer&&this.pointer.isTouchLike()&&(this._lastInterruptedTouchLikePointer=this.pointer),super.interrupt()}canPress(e){return e.pointer===this._lastInterruptedTouchLikePointer?!1:super.canPress(e)}dispose(){this._dragAction.dispose(),this.detachTransformTracker(),super.dispose()}static createForwardingListener(e,t){const n=Ne()({allowTouchSnag:!0},t);return{down(s){s.canStartPress()&&(s.trail.nodes.forEach(r=>{ku(r)&&r.unlockHighlight()}),e(s))},touchenter(s){n.allowTouchSnag&&this.down(s)},touchmove(s){n.allowTouchSnag&&this.down(s)}}}}const fW=new ji(60,30);class Co extends ys(Ge){constructor(e,t,n,s){const r=Ne()({size:fW,toggleWhileDragging:null,dragThreshold:3,toggleThreshold:1,thumbFill:null,thumbStroke:"black",thumbTouchAreaXDilation:8,thumbTouchAreaYDilation:8,thumbMouseAreaXDilation:0,thumbMouseAreaYDilation:0,trackFillLeft:null,trackFillRight:null,trackStroke:"black",cursor:"pointer",disabledOpacity:Ha.DISABLED_OPACITY,switchToLeftSoundPlayer:$n.get("switchToLeft"),switchToRightSoundPlayer:$n.get("switchToRight"),tandem:R.REQUIRED,tandemNameSuffix:"Switch",phetioEventType:vi.USER,phetioReadOnly:rn.DEFAULT_OPTIONS.phetioReadOnly,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioFeatured:!0,tagName:"button",accessibleSwitch:!0,leftValueContextResponse:null,rightValueContextResponse:null},s);let a=null;(!r.trackFillLeft||!r.trackFillRight)&&(a=new il(0,0,0,r.size.height).addColorStop(0,"rgb( 40, 40, 40 )").addColorStop(1,"rgb( 200, 200, 200 )")),r.trackFillLeft=r.trackFillLeft||a,r.trackFillRight=r.trackFillRight||a,r.thumbFill=r.thumbFill||new il(0,0,0,r.size.height).addColorStop(0,"white").addColorStop(1,"rgb( 200, 200, 200 )"),r.accessibleName&&(r.voicingNameResponse=r.accessibleName),super(),this.onInputEmitter=new kn;const o=r.size.height/2,l=new xt(0,0,r.size.width,r.size.height,o,o,{stroke:r.trackStroke,fill:r.trackFillLeft});this.addChild(l);const h=new xt(0,0,r.size.width,r.size.height,o,o,{stroke:r.trackStroke,fill:r.trackFillRight});this.addChild(h);const c=new xt(0,0,.5*r.size.width,r.size.height,o,o,{fill:r.thumbFill,stroke:r.thumbStroke});this.addChild(c),(r.thumbTouchAreaXDilation||r.thumbTouchAreaYDilation)&&(c.touchArea=zt.roundRect(-r.thumbTouchAreaXDilation,-r.thumbTouchAreaYDilation,.5*r.size.width+2*r.thumbTouchAreaXDilation,r.size.height+2*r.thumbTouchAreaYDilation,o,o)),(r.thumbMouseAreaXDilation||r.thumbMouseAreaYDilation)&&(c.mouseArea=zt.roundRect(-r.thumbMouseAreaXDilation,-r.thumbMouseAreaYDilation,.5*r.size.width+2*r.thumbMouseAreaXDilation,r.size.height+2*r.thumbMouseAreaYDilation,o,o));const f=D=>{const M=l.lineWidth/2;D===t?c.left=-M:c.right=r.size.width+M,h.rectWidth=c.right-M,r.accessibleSwitch&&(this.setPDOMAttribute("aria-pressed",D!==t),this.setPDOMAttribute("aria-checked",D!==t))};r.accessibleSwitch&&(this.ariaRole="switch"),e.link(f);const g=r.dragThreshold*r.dragThreshold,v=new Oe(0,0);let A=!1;const P=new Zi(D=>{e.value=D,this.onInputEmitter.emit()},{parameters:[{validValues:[t,n],phetioPrivate:!0}],tandem:r.tandem.createTandem("toggleAction"),phetioDocumentation:"Occurs when the switch is toggled via user interaction",phetioReadOnly:r.phetioReadOnly,phetioEventType:vi.USER});this.onInputEmitter.addListener(()=>{e.value===t?r.switchToLeftSoundPlayer.play():r.switchToRightSoundPlayer.play();const D=e.value===n?r.rightValueContextResponse:r.leftValueContextResponse;D&&(this.addAccessibleResponse(D),this.voicingSpeakResponse({contextResponse:Sn.alertableToText(D)}))});const w=()=>c.centerX<l.centerX?t:n,T=new vd({tandem:r.tandem.createTandem("dragListener"),canStartPress:D=>D&&(D.type==="move"||D.type==="enter")?ie.includes(D.trail.nodes,c):!0,start:()=>{v.setXY(0,0),A=!1},drag:(D,M)=>{v.add(M.modelDelta),A=A||v.magnitudeSquared>g;const B=M.getCurrentTarget().globalToLocalPoint(D.pointer.point),O=c.width/2,x=l.lineWidth/2;c.centerX=Xn(B.x,O-x,r.size.width-O+x),h.rectWidth=c.right-x;const Z=B.x<(1-2*r.toggleThreshold)*O||B.x>(-1+2*r.toggleThreshold)*O+r.size.width,de=w();(r.toggleWhileDragging===!0||Z&&r.toggleWhileDragging===null)&&e.value!==de&&P.execute(de)},end:()=>{const D=e.value===t?n:t,M=A?w():D;e.value!==M&&P.execute(M),f(M)},canClick:!0});this.addInputListener(T),this.mutate(r),this.addLinkedElement(e,{tandemName:"property"}),this.switchToLeftSoundPlayer=r.switchToLeftSoundPlayer,this.switchToRightSoundPlayer=r.switchToRightSoundPlayer,this.disposeToggleSwitch=()=>{l.dispose(),h.dispose(),e.unlink(f),P.dispose(),T.dispose(),this.onInputEmitter.dispose()}}dispose(){this.disposeToggleSwitch(),super.dispose()}}const FS=["xAlign","yAlign","stretch","xStretch","yStretch","grow","xGrow","yGrow"].concat(hI),sM=gr(i=>class extends uI(i){constructor(...t){super(...t),this._xAlign=null,this._yAlign=null,this._xStretch=null,this._yStretch=null,this._xGrow=null,this._yGrow=null}mutateConfigurable(t){super.mutateConfigurable(t),Na(t,["stretch"],["xStretch","yStretch"]),Na(t,["grow"],["xGrow","yGrow"]),Bb(this,FS,t)}setConfigToBaseDefault(){this._xAlign=wn.CENTER,this._yAlign=wn.CENTER,this._xStretch=!1,this._yStretch=!1,this._xGrow=0,this._yGrow=0,super.setConfigToBaseDefault()}setConfigToInherit(t){(!t||t.xAlign===void 0)&&(this._xAlign=null),(!t||t.yAlign===void 0)&&(this._yAlign=null),(!t||t.stretch===void 0&&t.xStretch===void 0)&&(this._xStretch=null),(!t||t.stretch===void 0&&t.yStretch===void 0)&&(this._yStretch=null),(!t||t.grow===void 0&&t.xGrow===void 0)&&(this._xGrow=null),(!t||t.grow===void 0&&t.yGrow===void 0)&&(this._yGrow=null),super.setConfigToInherit(t)}get xAlign(){return this._xAlign===null?null:this._xAlign.horizontal}set xAlign(t){const n=wn.horizontalAlignToInternal(t);this._xAlign!==n&&(this._xAlign=n,this.changedEmitter.emit())}get yAlign(){return this._yAlign===null?null:this._yAlign.vertical}set yAlign(t){const n=wn.verticalAlignToInternal(t);this._yAlign!==n&&(this._yAlign=n,this.changedEmitter.emit())}get grow(){return this._xGrow}set grow(t){(this._xGrow!==t||this._yGrow!==t)&&(this._xGrow=t,this._yGrow=t,this.changedEmitter.emit())}get xGrow(){return this._xGrow}set xGrow(t){this._xGrow!==t&&(this._xGrow=t,this.changedEmitter.emit())}get yGrow(){return this._yGrow}set yGrow(t){this._yGrow!==t&&(this._yGrow=t,this.changedEmitter.emit())}get stretch(){return this._xStretch}set stretch(t){(this._xStretch!==t||this._yStretch!==t)&&(this._xStretch=t,this._yStretch=t,this.changedEmitter.emit())}get xStretch(){return this._xStretch}set xStretch(t){this._xStretch!==t&&(this._xStretch=t,this.changedEmitter.emit())}get yStretch(){return this._yStretch}set yStretch(t){this._yStretch!==t&&(this._yStretch=t,this.changedEmitter.emit())}});class lg extends dI{constructor(e,t,n){super(),this.initialize(e,t,n)}initialize(e,t,n){return this.index=e,this.cells=t,this.grow=n,this.initializeLayoutLine(),this}freeToPool(){lg.pool.freeToPool(this)}clean(){this.cells.length=0,this.freeToPool()}}lg.pool=new us(lg,{defaultArguments:[0,[],0]});const rM=[...FS,"excludeInvisible","spacing","xSpacing","ySpacing"];class HS extends sM(pI){constructor(e,t){super(e,t),this.cells=new Set,this.displayedCells=[],this.displayedLines=new rl(new Map,new Map),this._spacing=new rl(0,0),this.setConfigToBaseDefault(),this.mutateConfigurable(t),Bb(this,rM,t),this.changedEmitter.addListener(this._updateLayoutListener)}layout(){super.layout();const e=this.filterLayoutCells([...this.cells]);if(this.displayedCells=e,!e.length){this.layoutBoundsProperty.value=pt.NOTHING,this.minimumWidthProperty.value=null,this.minimumHeightProperty.value=null,this.displayedLines.forEach(r=>r.clear());return}const t=new rl(0,0),n=new rl(this.preferredWidthProperty.value,this.preferredHeightProperty.value),s=new pt(0,0,0,0);[Ot.HORIZONTAL,Ot.VERTICAL].forEach(r=>{const a=this._spacing.get(r),o=this.displayedLines.get(r);o.forEach(D=>D.clean()),o.clear();const h=ie.sortedUniq(ie.sortBy(ie.flatten(e.map(D=>D.getIndices(r))))).map(D=>{const M=ie.filter(e,x=>x.containsIndex(r,D)),B=Math.max(...M.map(x=>x.getEffectiveGrow(r))),O=lg.pool.create(D,M,B);return o.set(D,O),O}),c=new Map(e.map(D=>[D,D.getIndices(r).map(M=>o.get(M))])),f=D=>c.get(D),g=h.slice(0,-1).map(D=>typeof a=="number"?a:a[D.index]);e.forEach(D=>{if(D.size.get(r)===1){const M=o.get(D.position.get(r));if(M.min=Math.max(M.min,D.getMinimumSize(r)),M.max=Math.min(M.max,D.getMaximumSize(r)),D.getEffectiveAlign(r)===wn.ORIGIN){const B=D.getOriginBounds();M.minOrigin=Math.min(B[r.minCoordinate],M.minOrigin),M.maxOrigin=Math.max(B[r.maxCoordinate],M.maxOrigin)}}});{const M=de=>ie.sum(f(de).map($=>$.min)),B=de=>M(de)<de.getMinimumSize(r)-1e-9,O=new Set,x=de=>(!isFinite(de.max)||de.min<de.max-1e-9)&&!O.has(de);let Z=e.filter(de=>de.size.get(r)>1).filter(B);for(;Z.length;){const de=Te=>{const Re=f(Te).filter(x);if(!Re.length)return null;const We=M(Te),lt=Te.getMinimumSize(r)-We;if(lt<1e-9)return null;const st=ie.sum(Re.map(De=>De.grow));return{cell:Te,growingLines:Re.slice(),space:lt,weights:new Map(Re.map(De=>{let et;return st>0?et=lt*(De.grow/st):et=lt/Re.length,[De,et]}))}};let $=[];for(const Te of Z){const Re=de(Te);Re&&$.push(Re)}const me=()=>{$=$.map(Te=>Te.growingLines.some(Re=>O.has(Re))?de(Te.cell):Te).filter(Te=>Te!==null)};let ue=[],Se=!0;for(;Se&&$.length;){Se=!1,ue=[];for(const Te of e){const Re=Te.getMaximumSize(r);if(isFinite(Re)){const We=f(Te).filter(Le=>$.some(lt=>lt.growingLines.includes(Le)));if(We.length){const Le=M(Te),lt=Re-Le;if(lt<1e-9){for(const st of We)O.add(st);Se=!0}else ue.push({cell:Te,growingLines:We.slice(),space:lt})}}}Se&&me()}if($.length){const Te=ie.uniq($.flatMap(Le=>Le.growingLines)),Re=new Map(Te.map(Le=>{let lt=0;for(const st of $)st.growingLines.includes(Le)&&(lt+=st.weights.get(Le));return[Le,lt]}));let We=Number.POSITIVE_INFINITY;for(const Le of[...$,...ue]){const lt=ie.sum(Le.growingLines.map(st=>Re.get(st)));We=Math.min(We,Le.space/lt)}for(const Le of Te){const lt=Re.get(Le);Le.min+=lt*We}Z=Z.filter(B)}else break}}h.forEach(D=>{D.hasOrigin()?D.size=Math.max(D.min,D.maxOrigin-D.minOrigin):D.size=D.min});const v=ie.sum(h.map(D=>D.size))+ie.sum(g);t.set(r,v);const A=Math.max(v,n.get(r)||0);let P=A-v,w;for(;P>1e-7&&(w=h.filter(D=>D.grow>0&&D.size<D.max-1e-7)).length;){const D=ie.sum(w.map(B=>B.grow)),M=Math.min(Math.min(...w.map(B=>(B.max-B.size)/B.grow)),P/D);w.forEach(B=>{B.size+=M*B.grow}),P-=M*D}const T=(h[0].hasOrigin()?h[0].minOrigin:0)+this.layoutOriginProperty.value[r.coordinate];s[r.minCoordinate]=T,s[r.maxCoordinate]=T+A,h.forEach((D,M)=>{const B=ie.sum(h.slice(0,M).map(x=>x.size)),O=ie.sum(g.slice(0,M));D.position=T+B+O}),e.forEach(D=>{const M=D.position.get(r),B=D.size.get(r),O=M+B-1,x=f(D),Z=o.get(M);let de=0;M!==O&&h.slice(0,-1).forEach((Se,Te)=>{Se.index>=M&&Se.index<O&&(de+=g[Te])});const $=ie.sum(x.map(Se=>Se.size))+de,me=Z.position,ue=D.reposition(r,$,me,D.getEffectiveStretch(r),-Z.minOrigin,D.getEffectiveAlign(r));s[r.minCoordinate]=Math.min(s[r.minCoordinate],ue[r.minCoordinate]),s[r.maxCoordinate]=Math.max(s[r.maxCoordinate],ue[r.maxCoordinate])})}),this.layoutBoundsProperty.value=s,this.minimumWidthProperty.value=t.horizontal,this.minimumHeightProperty.value=t.vertical,this.finishedLayoutEmitter.emit()}get spacing(){return this.xSpacing}set spacing(e){(this._spacing.get(Ot.HORIZONTAL)!==e||this._spacing.get(Ot.VERTICAL)!==e)&&(this._spacing.set(Ot.HORIZONTAL,e),this._spacing.set(Ot.VERTICAL,e),this.updateLayoutAutomatically())}get xSpacing(){return this._spacing.get(Ot.HORIZONTAL)}set xSpacing(e){this._spacing.get(Ot.HORIZONTAL)!==e&&(this._spacing.set(Ot.HORIZONTAL,e),this.updateLayoutAutomatically())}get ySpacing(){return this._spacing.get(Ot.VERTICAL)}set ySpacing(e){this._spacing.get(Ot.VERTICAL)!==e&&(this._spacing.set(Ot.VERTICAL,e),this.updateLayoutAutomatically())}addCell(e){this.cells.add(e),this.addNode(e.node),e.changedEmitter.addListener(this._updateLayoutListener),this.updateLayoutAutomatically()}removeCell(e){this.cells.delete(e),this.removeNode(e.node),e.changedEmitter.removeListener(this._updateLayoutListener),this.updateLayoutAutomatically()}dispose(){this.lock(),[...this.cells].forEach(e=>this.removeCell(e)),this.displayedLines.forEach(e=>e.clear()),this.displayedCells=[],super.dispose(),this.unlock()}getIndices(e){const t=[];return this.cells.forEach(n=>{t.push(...n.getIndices(e))}),ie.sortedUniq(ie.sortBy(t))}getCell(e,t){return ie.find([...this.cells],n=>n.containsRow(e)&&n.containsColumn(t))||null}getCellFromNode(e){return ie.find([...this.cells],t=>t.node===e)||null}getCells(e,t){return ie.filter([...this.cells],n=>n.containsIndex(e,t))}static create(e,t){return new HS(e,t)}}[...FS];class mW extends sM(Qb){constructor(e,t,n){super(e,t,n),this.gridConstraint=e,this.setOptions(t.layoutOptions),this.onLayoutOptionsChange(!0)}get effectiveXAlign(){return this._xAlign!==null?this._xAlign:this.gridConstraint._xAlign}get effectiveYAlign(){return this._yAlign!==null?this._yAlign:this.gridConstraint._yAlign}getEffectiveAlign(e){return e===Ot.HORIZONTAL?this.effectiveXAlign:this.effectiveYAlign}get effectiveXGrow(){return this._xGrow!==null?this._xGrow:this.gridConstraint._xGrow}get effectiveYGrow(){return this._yGrow!==null?this._yGrow:this.gridConstraint._yGrow}getEffectiveGrow(e){return e===Ot.HORIZONTAL?this.effectiveXGrow:this.effectiveYGrow}get effectiveXStretch(){return this._xStretch!==null?this._xStretch:this.gridConstraint._xStretch}get effectiveYStretch(){return this._yStretch!==null?this._yStretch:this.gridConstraint._yStretch}getEffectiveStretch(e){return e===Ot.HORIZONTAL?this.effectiveXStretch:this.effectiveYStretch}onLayoutOptionsChange(e=!1){this.setOptions(this.node.layoutOptions),super.onLayoutOptionsChange(),e||this.gridConstraint.updateLayoutAutomatically()}setOptions(e){const t=Ne()({column:0,row:0,horizontalSpan:1,verticalSpan:1},e);this.setConfigToInherit(t),this.position=new rl(t.column,t.row),this.size=new rl(t.horizontalSpan,t.verticalSpan),this.mutateConfigurable(t)}containsIndex(e,t){const n=this.position.get(e),s=this.size.get(e);return t>=n&&t<n+s}containsRow(e){return this.containsIndex(Ot.VERTICAL,e)}containsColumn(e){return this.containsIndex(Ot.HORIZONTAL,e)}getIndices(e){const t=this.position.get(e),n=this.size.get(e);return ie.range(t,t+n)}}const gW=[...sL,...rM.filter(i=>i!=="excludeInvisible"),"rows","columns","autoRows","autoColumns"];class Mf extends IS{constructor(e){const t=Ne()({excludeInvisibleChildrenFromBounds:!0,resize:!0},e);super(),this._cellMap=new Map,this._autoRows=null,this._autoColumns=null,this._autoLockCount=0,this._constraint=new HS(this,{preferredWidthProperty:this.localPreferredWidthProperty,preferredHeightProperty:this.localPreferredHeightProperty,minimumWidthProperty:this.localMinimumWidthProperty,minimumHeightProperty:this.localMinimumHeightProperty,layoutOriginProperty:this.layoutOriginProperty,excludeInvisible:!1}),this.onChildInserted=this.onGridBoxChildInserted.bind(this),this.onChildRemoved=this.onGridBoxChildRemoved.bind(this),this.onChildVisibilityToggled=this.updateAllAutoLines.bind(this),this.childInsertedEmitter.addListener(this.onChildInserted),this.childRemovedEmitter.addListener(this.onChildRemoved);const n=ie.omit(t,zh),s=ie.pick(t,zh);this._constraint.lock(),this.mutate(n),this._constraint.unlock(),this._constraint.updateLayout(),this.mutate(s),this.linkLayoutBounds()}setLines(e,t){const n=[];for(let s=0;s<t.length;s++){const r=t[s];for(let a=0;a<r.length;a++){const o=r[a];o!==null&&(n.push(o),o.mutateLayoutOptions({[e.line]:s,[e.opposite.line]:a}))}}this.children=n}getLines(e){const t=[];for(const n of this._cellMap.values()){const s=n.position.get(e),r=n.position.get(e.opposite);for(;t.length<s+1;)t.push([]);for(;t[s].length<r+1;)t[s].push(null);t[s][r]=n.node}return t}set rows(e){this.setLines(Ot.VERTICAL,e)}get rows(){return this.getLines(Ot.VERTICAL)}set columns(e){this.setLines(Ot.HORIZONTAL,e)}get columns(){return this.getLines(Ot.HORIZONTAL)}getNodeAt(e,t){const n=this.constraint.getCell(e,t);return n?n.node:null}getRowOfNode(e){return this.constraint.getCellFromNode(e).position.vertical}getColumnOfNode(e){return this.constraint.getCellFromNode(e).position.horizontal}getNodesInRow(e){return this.constraint.getCells(Ot.VERTICAL,e).map(t=>t.node)}getNodesInColumn(e){return this.constraint.getCells(Ot.HORIZONTAL,e).map(t=>t.node)}addRow(e){return this.rows=[...this.rows,e],this}addColumn(e){return this.columns=[...this.columns,e],this}insertRow(e,t){return this.rows=[...this.rows.slice(0,e),t,...this.rows.slice(e)],this}insertColumn(e,t){return this.columns=[...this.columns.slice(0,e),t,...this.columns.slice(e)],this}removeRow(e){return this.rows=[...this.rows.slice(0,e),...this.rows.slice(e+1)],this}removeColumn(e){return this.columns=[...this.columns.slice(0,e),...this.columns.slice(e+1)],this}set autoRows(e){this._autoRows!==e&&(this._autoRows=e,this.updateAutoRows())}get autoRows(){return this._autoRows}set autoColumns(e){this._autoColumns!==e&&(this._autoColumns=e,this.updateAutoColumns())}get autoColumns(){return this._autoColumns}updateAutoLines(e,t){if(t!==null&&this._autoLockCount===0){let n=0;this.constraint.lock(),this.children.filter(s=>s.bounds.isValid()&&(!this._constraint.excludeInvisible||s.visible)).forEach((s,r)=>{const a=r%t,o=Math.floor(r/t);(!s.layoutOptions||s.layoutOptions[e.line]!==a||s.layoutOptions[e.opposite.line]!==o||s.layoutOptions.horizontalSpan!==1||s.layoutOptions.verticalSpan!==1)&&(n++,s.mutateLayoutOptions({[e.line]:r%t,[e.opposite.line]:Math.floor(r/t),horizontalSpan:1,verticalSpan:1}))}),this.constraint.unlock(),n>0&&this.constraint.updateLayoutAutomatically()}}updateAutoRows(){this.updateAutoLines(Ot.VERTICAL,this.autoRows)}updateAutoColumns(){this.updateAutoLines(Ot.HORIZONTAL,this.autoColumns)}updateAllAutoLines(){this.updateAutoRows(),this.updateAutoColumns()}setChildren(e){const t=this.getChildren();return this._autoLockCount++,super.setChildren(e),this._autoLockCount--,ie.isEqual(t,e)||this.updateAllAutoLines(),this}onGridBoxChildInserted(e,t){e.visibleProperty.lazyLink(this.onChildVisibilityToggled);const n=new mW(this._constraint,e,this._constraint.createLayoutProxy(e));this._cellMap.set(e,n),this._constraint.addCell(n),this.updateAllAutoLines()}onGridBoxChildRemoved(e){const t=this._cellMap.get(e);this._cellMap.delete(e),this._constraint.removeCell(t),t.dispose(),this.updateAllAutoLines(),e.visibleProperty.unlink(this.onChildVisibilityToggled)}mutate(e){return Na(e,["rows"],["columns"],["children","autoRows","autoColumns"]),super.mutate(e)}get spacing(){return this._constraint.spacing}set spacing(e){this._constraint.spacing=e}get xSpacing(){return this._constraint.xSpacing}set xSpacing(e){this._constraint.xSpacing=e}get ySpacing(){return this._constraint.ySpacing}set ySpacing(e){this._constraint.ySpacing=e}get xAlign(){return this._constraint.xAlign}set xAlign(e){this._constraint.xAlign=e}get yAlign(){return this._constraint.yAlign}set yAlign(e){this._constraint.yAlign=e}get grow(){return this._constraint.grow}set grow(e){this._constraint.grow=e}get xGrow(){return this._constraint.xGrow}set xGrow(e){this._constraint.xGrow=e}get yGrow(){return this._constraint.yGrow}set yGrow(e){this._constraint.yGrow=e}get stretch(){return this._constraint.stretch}set stretch(e){this._constraint.stretch=e}get xStretch(){return this._constraint.xStretch}set xStretch(e){this._constraint.xStretch=e}get yStretch(){return this._constraint.yStretch}set yStretch(e){this._constraint.yStretch=e}get margin(){return this._constraint.margin}set margin(e){this._constraint.margin=e}get xMargin(){return this._constraint.xMargin}set xMargin(e){this._constraint.xMargin=e}get yMargin(){return this._constraint.yMargin}set yMargin(e){this._constraint.yMargin=e}get leftMargin(){return this._constraint.leftMargin}set leftMargin(e){this._constraint.leftMargin=e}get rightMargin(){return this._constraint.rightMargin}set rightMargin(e){this._constraint.rightMargin=e}get topMargin(){return this._constraint.topMargin}set topMargin(e){this._constraint.topMargin=e}get bottomMargin(){return this._constraint.bottomMargin}set bottomMargin(e){this._constraint.bottomMargin=e}get minContentWidth(){return this._constraint.minContentWidth}set minContentWidth(e){this._constraint.minContentWidth=e}get minContentHeight(){return this._constraint.minContentHeight}set minContentHeight(e){this._constraint.minContentHeight=e}get maxContentWidth(){return this._constraint.maxContentWidth}set maxContentWidth(e){this._constraint.maxContentWidth=e}get maxContentHeight(){return this._constraint.maxContentHeight}set maxContentHeight(e){this._constraint.maxContentHeight=e}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this.updateAllAutoLines()}dispose(){this._constraint.lock(),this.childInsertedEmitter.removeListener(this.onChildInserted),this.childRemovedEmitter.removeListener(this.onChildRemoved);for(const e of this._cellMap.values())e.dispose(),e.node.visibleProperty.unlink(this.onChildVisibilityToggled);super.dispose()}getHelperNode(){return Qb.createHelperNode(this.constraint.displayedCells,this.constraint.layoutBoundsProperty.value,t=>{let n="";return n+=`row: ${t.position.vertical}
`,n+=`column: ${t.position.horizontal}
`,t.size.horizontal>1&&(n+=`horizontalSpan: ${t.size.horizontal}
`),t.size.vertical>1&&(n+=`verticalSpan: ${t.size.vertical}
`),n+=`xAlign: ${wn.internalToAlign(Ot.HORIZONTAL,t.effectiveXAlign)}
`,n+=`yAlign: ${wn.internalToAlign(Ot.VERTICAL,t.effectiveYAlign)}
`,n+=`xStretch: ${t.effectiveXStretch}
`,n+=`yStretch: ${t.effectiveYStretch}
`,n+=`xGrow: ${t.effectiveXGrow}
`,n+=`yGrow: ${t.effectiveYGrow}
`,n})}}Mf.prototype._mutatorKeys=[...NI,...gW,...Ge.prototype._mutatorKeys];class Hh extends Mf{constructor(e){const t=Ne()({headingControl:!1,labelSpacing:10,allowDescriptionStretch:!0,valueLabelXSpacing:8,ySpacing:5,nestedContent:[],grow:1,layoutOptions:{stretch:!e?.headingControl}},e);if(super(t),t.controlNode&&(this.enabledProperty.link(n=>{t.controlNode.enabled=n}),t.controlNode.layoutOptions={row:0,column:1,xAlign:"right"},this.addChild(t.controlNode)),t.labelNode&&(t.labelNode.layoutOptions={row:0,column:0,xAlign:"left",rightMargin:t.labelSpacing},this.addChild(t.labelNode)),t.descriptionNode&&t.labelNode){const n={row:1,column:0,horizontalSpan:2,xAlign:"left"};t.allowDescriptionStretch&&(n.minContentWidth=480,n.stretch=!0),t.descriptionNode.layoutOptions=n,this.addChild(t.descriptionNode)}else t.descriptionNode&&(t.descriptionNode.layoutOptions={row:0,column:0,xAlign:"left"},this.addChild(t.descriptionNode));this.disabledOpacity=Ha.DISABLED_OPACITY}}class Of extends Ge{constructor(e,t,n,s){const r=Ne()({tagName:"div",labelTagName:"h2"},s);r.tandem=R.OPT_OUT,super(r),Cn.multilink([t,n],(a,o)=>{this.visible=a===e&&o})}}class Lu extends Ai{constructor(e){const t=Ne()({spacing:Vi.CONTENT_SPACING,titleNode:null,contentNode:null,contentNodeOptions:{},contentLeftMargin:30},e),n=new Bh({matchVertical:!1}),s=[];if(t.titleNode&&s.push(n.createBox(t.titleNode,{xAlign:"left"})),t.contentNode){const r=Ut({children:[t.contentNode]},t.contentNodeOptions);s.push(n.createBox(new Ge(r),{leftMargin:t.contentLeftMargin,xAlign:"left"}))}t.children=s,super(t)}}class Si extends js{}Si.OVERVIEW=new Si;Si.SIMULATION=new Si;Si.VISUAL=new Si;Si.AUDIO=new Si;Si.INPUT=new Si;Si.LOCALIZATION=new Si;Si.enumeration=new Sr(Si);const yW=new Fe(new He("JOIST/preferences.tabs.audio.sounds.title",{en:"Sounds",af:"Klanke",am:"ድምጾች",ar:"أصوات",ar_KW:"أصوات",ar_LY:"الأصوات",ar_MA:"أصوات",ar_SA:"أصوات",ar_SY:"أصوات",az:"Səslər",be:"Гукі",bg:"Звуци",bn:"শব্দ [Sounds]",bo:"སྒྲ།",bs:"Zvukovi",ca:"Sons",cs:"Zvuky",da:"Lyde",de:"Geräusche",el:"Ήχοι",es:"Sonidos",es_ES:"Sonidos",es_MX:"Sonidos",es_PE:"Sonidos",eu:"Soinuak",fa:"صداها",fa_DA:"صداها",fi:"Äänet",fr:"Sons",ga:"Fuaimeanna",gl:"Sons",gu:"ધ્વની",ha:"Sautuka",hi:"ध्वनियाँ",hr:"Zvukovi",ht:"Son",hu:"Hangok",hy:"Հնչյուններ",ig:"Na-Ada Ụda",in:"Suara",is:"Hljóð",it:"Suoni",iw:"צלילים",ka:"ხმები",ki:"Mĩtarĩri",kn:"ಶಬ್ದಗಳು",ko:"소리",ku:"دەنگ",lg:"Amaloboozi",lt:"Garsai",lv:"Skaņas",mi:"Ngā Oro",mn:"Дуу",mr:"आवाज",ms:"Bunyi",mt:"Ħsejjes",nb:"Lyder",nl:"Geluiden",nn:"Lyder",ny:"Liwu",om:"Sagaleewwan",pl:"Dźwięki",ps:"غږونه",pt:"Sons",pt_BR:"Sons",qu:"Uyarikuykuna",ro:"Sunete",ru:"Звук",rw:"Amajwi",se:"Jienat",sk:"Zvuky",sl:"Zvoki",sn:"Kurira",sp:"Medumo",sq:"Tingujt",sr:"Звукови",st:"melumo",sv:"Ljud",sw:"Sauti",ta:"ஒலிகள்",te:"ధ్వనులు",tg:"Садохо",th:"เสียง",ti:"ድምፅታት",tk:"Sesler",tl:"Mga Tunog",tn:"Medumo",tr:"Sesler",tw:"Ngygee dodoɔ",uk:"Звуки",ur:"آواز",uz:"Tovushlar",vi:"Âm thanh",wo:"Coow",yo:"Ohun",zh_CN:"声音",zh_HK:"聲音",zh_TW:"音效",zu:"umsindo"},R.OPT_OUT),R.OPT_OUT),vW=new Fe(new He("JOIST/preferences.tabs.audio.sounds.extraSounds.title",{en:"Extra Sounds",af:"Ekstra klanke",am:"ተጨማሪ ድምጾች",ar:"أصوات إضافية",ar_KW:"أصوات إضافية",ar_LY:"أصوات إضافية",ar_MA:"صوت مرتفع",ar_SA:"أصوات اضافية ",ar_SY:"أصوات إضافية",az:"Əlavə səslər",be:"Дадатковыя гукі",bg:"Допълнителни звуци",bn:"অতিরিক্ত শব্দাবলী",bo:"སྒྲ་ཁ་སྣོན།",bs:"Dodatni zvuk",ca:"Sons extra",cs:"Další zvuky",cy:"Sain Ychwanegol",da:"Ekstra lyde",de:"Zusätzlicher Ton",el:"Περισσότεροι ήχοι",es:"Sonidos Extras",es_ES:"Sonidos adicionales",es_MX:"Sonidos Extras",es_PE:"Sonidos extra",eu:"Soinu gehigarriak",fa:"صداهای ویژه",fa_DA:"صداهای اضافی",fi:"Lisää ääniä",fr:"Sons additionnels",gl:"Sons extra",gu:"વધારાનો અવાજ",ha:"Karin saututuka",hi:"अतिरिक्त ध्वनियाँ",hr:"Dodatni zvuci",ht:"Lòt Son",hu:"Extra hangok",hy:"Լրացուցիչ հնչյուններ",ig:"Nnukwu Ụda",in:"Suara Tambahan",is:"Aukahljóð",it:"Suoni extra",iw:"הגברת קול",ka:"დამატებითი ხმა",ki:"Maingĩ mĩtarĩri",kn:"ಹೆಚ್ಚಿನ ಧ್ವನಿಗಳು",ko:"추가 소리",ku:"دەنگی زیاتر",lg:"Amaloboozi agasingawo",lt:"Papildomi garsai",lv:"Papildu skaņas",mi:"He Oro Anō",mn:"Нэмэлт дуу",mr:"अधिक आवाज",ms:"Bunyi Dipertingkat",mt:"Żid dak li tisma'",nb:"EKstralyder",nl:"Verbeterde geluiden",ny:"Maliwu wowonjezera",om:"Sagaleewwan Dabalataa",pl:"Dodatkowe dźwięki",ps:"اضافي غږونه",pt:"Sons Extra",pt_BR:"Sons Extras",qu:"Uyarikuykuna yapasqa",ro:"Sunete suplimentare",ru:"Дополнительные звуки",rw:"Amajwi y'inyongera",se:"Liige jienat",sk:"Extra zvuky",sl:"Dodatni zvoki",sn:"Extra kurira",sp:"Medumo e Eketsegilego",sq:"Tinguj Shtesë",sr:"Додатни звук",st:"moimo o ekelitsoeng",sv:"Extra ljud",sw:"Sauti za ziada",ta:"மேலதிக ஒலி",te:"అదనపు ధ్వనులు",tg:"Овозҳои иловагӣ",th:"เสียงพิเศษ",ti:"ተወሰክቲ ድምፅታት",tk:"Baýlaşdyrylan sesler",tl:"Dagdag na mga tunog",tn:"Medumo ya tlalaletso",tr:"Ek Sesler",tw:"Ngyegye3 nkeka ho",uk:"Додаткові звуки",ur:"مزید آوازیں",uz:"Qo‘shimcha tovushlar",vi:"Extra Sounds",wo:"Coow",yo:"Awọn ohun afikun",zh_CN:"额外声音",zh_HK:"額外聲音",zh_TW:"額外音效",zu:"umsindo owengeziwe"},R.OPT_OUT),R.OPT_OUT),bW=new Fe(new He("JOIST/preferences.tabs.audio.sounds.description",{en:"Play sonifications and sound effects as you interact.",af:"Speel sonifikasies en klankeffekte terwyl jy interaksie het.",am:"መስተጋብር በሚፈጥሩበት ጊዜ ሶኒፊኬሽን እና የድምጽ ተፅእኖዎችን ያጫውቱ።",ar:"تشغيل الصوتنة والمؤثرات الصوتية أثناء التفاعل.والمؤثرات الصوتية أثناء تفاعلك",ar_KW:"تشغيل الأصوات التفاعلية",ar_LY:"قم بتشغيل التنبيهات الصوتية والمؤثرات الصوتية أثناء تفاعلك.",ar_MA:"تشغيل الصوت والمؤثرات الصوتية أثناء تفاعلك.",ar_SA:"الرجاء استخدام متصفح مختلف لتشغيل هذه المحاكاة.",ar_SY:"تشغيل الصوتنة والمؤثرات الصوتية أثناء التفاعل.والمؤثرات الصوتية أثناء تفاعلك",az:"Qarşılıqlı əlaqə zamanı sonifikasiyaları və səs effektlərini səsləndirin.",be:"Гуляйце агучванне і гукавыя эфекты падчас узаемадзеяння.",bg:"Възпроизвеждай звукови ефекти при взаимодействие.",bn:"Play sonifications and sound effects as you interact.",bs:"Reprodukujte zvučne efekte i zvučne efekte dok ste u interakciji.",ca:"Reprodueix sons i efectes sonors mentre interactueu.",cs:"Při interakci přehrávejte zvuky a zvukové efekty.",da:"Afspil baggrundslyde og lydeffekter når du benytter.",de:"Verwende Soundeffekte, wenn du interagierst.",el:"Αναπαραγωγή υπέρηχων και εφέ ήχου κατά την αλληλεπίδραση",es:"Reproduce sonificaciones y efectos de sonido mientras interactúas.",es_ES:"Reproduce sonificaciones y efectos de sonido mientras interactúas.",es_MX:"Reproduce sonificaciones y efectos de sonido mientras interactúas.",es_PE:"Reproduce sonificaciones y efectos de sonido mientras interactúas.",eu:"Erreproduzitu sonifikazioak eta soinu efektuak elkarreragiten duzun bitartean.",fa:"پخش اصوات غیرگفتاری و جلوه های صوتی در حین کار.",fa_DA:"پخش صداهای غیرگفتاری و ویژگی‌های صوتی در حین کار.",fi:"Soita äänet valintojen aikana.",fr:"Produisez des sonorités et des effets sonores pendant que vous interagissez.",gl:"Reproducir efectos de son cando interactúas.",gu:"જ્યારે તમે ક્રિયાપ્રતિક્રિયા કરો છો ત્યારે સોનિફિકેશન અને સાઉન્ડ ઇફેક્ટ્સ વગાડો.",ha:"Kunna sonifications da sauti na asali yayin da kuke yin hulɗa.",hi:"पारस्परिक क्रिया या बातचीत के समय ध्वनि और ध्वनि प्रभाव चलाएं।",hr:"Reproducirajte sonifikacije i zvučne efekte dok ste u interakciji.",ht:"Jwe sonifikasyon ak efè sonò pandan w ap entèraji.",hu:"Hangeffektusok lejátszása interakció közben",hy:"Նվագարկեք հնչյունները և ձայնային էֆեկտները:",ig:"Kpọọ na-ada ụda na mmetụta ụda ka ị na-emekọrịta ihe.",in:"Mainkan sonifikasi dan efek suara ketika menggunakan",is:"Spila hljóð og hljóðbrellur",it:"Riproduci sonificazioni ed effetti sonori mentre interagisci.",iw:"השמע התראות קוליות ואפקטים קוליים בעת אינטראקציה.",ki:"Rĩrũ ũcikũĩru na nyũmbu-inĩ ĩrĩ kũnene wakũĩri ũngerĩreria na kuonera.",kn:"ನೀನು ಅಂತರ್ವರ್ತಿಸುವಾಗ ಶಬ್ಧ ಮತ್ತು ಧ್ವನಿಗಳನ್ನು ನುಡಿಸು.",ko:"상호작용할 때 음향화와 음향 효과를 사용",ku:"دەنگ لێبدە کاتێک کارێک ئەنجام دەدەیت",lg:"Kuba amaloboozi nebivugga nga",lt:"Groti garso efektus, kai sąveikaujate",mi:"Whakatangihia he oro i a koe e pāhekoheko.",mn:"Харьцаж байхдаа sonifications болон дууны эффектүүдийг тоглуулаарай.",mr:"तुम्ही संवाद साधता तेव्हा सोनिफिकेशन आणि ध्वनी प्रभाव प्ले करा.",ms:"Mainkan sonifikasi dan kesan bunyi semasa anda berinteraksi.",mt:"Żid l-effetti bil-ħoss u sonifikazzjonijiet int u tinteraġixxi.",nb:"Spill lyder og lydeffekter mens du samhandler.",nl:"Speel geluidseffecten af als je bezig bent",nn:"Spill lyder og lydeffekter mens du samhandler.",ny:"Sewerani ma sonification ndi zomveka mukamalumikizana.",om:"Yeroo wal qunamtu sagalee uumtuu fi galtee sagalee waliin taphachiisi.",pl:"Odtwarzaj sonifikacje i efekty dźwiękowe podczas interakcji.",ps:"کله چې تاسو متقابل عمل وکړئ سونیفیکیشن او غږیز اثر چالان کړئ.",pt:"Reproduzir sonorizações e efeitos de som de acordo com a interação.",pt_BR:"Habilitar efeitos sonoros enquanto você interage.",qu:"Play sonifications and sound effects as you interact.",ro:"Redă reprezentări și efecte sonore în timpul interacțiunii.",ru:"Озвучивание и воспроизведение звуковых эффектов во время работы.",rw:"Curanga za nyiramubande nk'uko musabana.",se:"Čuojat jienaid go barggat.",sk:"Pri interakcii prehrávať zvuky  a zvukové efekty.",sl:"Predvajaj zvoke in zvočne učinke ob interakciji.",sn:"Tamba masonification uye mamiriro ekurira paunenge uchitamba.",sp:"Bapala di-sonification le ditlamorago tša modumo ge o dutše o dirišana.",sq:"Luani njoftime tingujsh dhe efekte zanore ndërsa ndërveproni.",sr:"Репродукујте звучне ефекте и звучне ефекте док сте у интеракцији.",st:"bapala sonification le molumo ha u sebetsa.",sv:"Spela upp ljud och ljudeffekter",sw:"Cheza uimbaji na athari za sauti unapowasiliana.",te:"Play sonifications and sound effects as you interact.",tg:"Ҳангоми муошират садоҳо ва эффектҳои садоиро васл кунед.",th:"เล่นเสียงเตือนและเสียงเอฟเฟกต์เมื่อมีการลงมือทำ",tk:"Täsirleşeniňizde sonifikaiýalary we ses effektlerini aýtdyr.",tl:"Magpatugtog ng mga kanta at sound effect habang nakikipag-ugnayan ka.",tn:"Tshameka medumo e e natetshang fa o ntse o tsweletse.",tr:"Etkileşim kurarken sonifikasyonları ve ses efektlerini çalın.",tw:"Bɔ ngyegyeɛ no nsunsoansoɔ abre a wo redi nkitahodie.",uk:"Використовуйте озвучування та звукові ефекти під час взаємодії.",ur:"دوران اکتساب سونیفیکیشن اور اصوات کا استعمال کریں",uz:"O‘zaro aloqada bo'lganingizda sonifikatsiyalar va ovoz effektlarini chaling.",vi:"Play sonifications and sound effects as you interact.",wo:"Tëgël ay Coow Ci Bingay Jokolante",yo:"Mu sonifications ati awọn ipa didun ohun bi o ṣe nlo",zh_HK:"在互動時播放聲音和音效。",zh_TW:"在您玩模擬教材時播放聲音與音效。",zu:"Dlala i-sonification nemisindo njengoba uhlanganyela."},R.OPT_OUT),R.OPT_OUT),_W=new Fe(new He("JOIST/preferences.tabs.audio.sounds.extraSounds.description",{en:"Play additional sound that may be helpful for some learners.",af:"Speel bykomende klank wat vir sommige leerders nuttig kan wees.",am:"ለአንዳንድ ተማሪዎች ጠቃሚ ሊሆን የሚችል ተጨማሪ ድምጽ ያጫውቱ።",ar:"قم بتشغيل صوت إضافي قد يكون مفيدًا لبعض المتعلمين.",ar_KW:"تشغيل الأصوات التفاعلية المساعدة",ar_LY:"قم بتشغيل صوت إضافي قد يكون مفيدًا لبعض المتعلمين.",ar_MA:"تشغيل صوت إضافي قد يكون مفيدًا لبعض المتعلمين.",ar_SA:"قم بتشغيل صوت إضافي هذا قد يكون مفيدًا لبعض المتعلمين.",ar_SY:"قم بتشغيل صوت إضافي قد يكون مفيدًا لبعض المتعلمين.",az:"Bəzi öyrənənlər üçün faydalı ola biləcək əlavə səs səsləndirin.",be:"Прайграйце дадатковы гук, які можа быць карысны некаторым навучэнцам.",bg:"Възпроизвеждай допълнителни звуци, които могат да бъдат полезни на някои ученици.",bn:"Play additional sound that may be helpful for some learners.",bs:"Pustite dodatni zvuk koji bi mogao biti od pomoći nekim učenicima",ca:"Reproduir un so addicional pot ser útil per alguns estudiants.",cs:"Přehrajte další zvuk, který může být pro některé studenty užitečný.",da:"Afspil yderligere lyd, der kan være nyttig for nogle elever.",de:"Verwende zusätzliche Töne, die für einige Lerner hilfreich sein könnte.",el:"Αναπαραγωγή επιπρόσθετων ήχων που ενδέχεται να είναι χρήσιμοι για κάποιους μαθητευόμενους.",es:"Reproducir sonido adicional que pueda ser útil para algunos alumnos.",es_ES:"Poner un sonido adicional puede ser de ayuda para los estudiantes",es_MX:"Reproducir sonido adicional que pueda ser útil para algunos alumnos.",es_PE:"Reproduzca un sonido adicional que pueda ser útil para algunos alumnos.",eu:"Jolastu ikasle batzuentzat lagungarria izan daitekeen soinu gehigarriarekin.",fa:"صوت های بیشتری که ممکن است برای فراگیران مفید باشد را پخش کنید.",fa_DA:"صوت های بیشتری که ممکن است برای یادگیرندگان مفید باشد را پخش کنید.",fi:"Soita lisä-ääni kuulemisen helpottamiseksi.",fr:"Produisez des sons supplémentaires qui peuvent être utiles à certains apprenants.",gl:"Reproducir sons adicionais que poden ser útiles para algunhas persoas.",gu:"વધારાના અવાજ ચાલુ કરો  જે કેટલાક શીખનારાઓ માટે મદદરૂપ થઈ શકે.",ha:"Kara wasu sautuka zai iya taimakawa wasu masu koyo",hi:"अतिरिक्त ध्वनि बजाएं जो कुछ शिक्षार्थियों के लिए सहायक हो सकती है।",hr:"Pustite dodatni zvuk koji bi nekim učenicima mogao biti od pomoći.",ht:"Jwe yon son anplis ki ka itil kèk aprenan.",hu:"Még egy hang lejátszása, hátha segít valakinek",hy:"Նվագարկեք լրացուցիչ ձայնը, որը կարող է օգտակար լինել որոշ սովորողների համար:",ig:"Kpọọ ụda agbakwunyere nke nwere ike ịbara ụfọdụ ndị mmụta aka.",is:"Spila auka hljóð sem gætu verið sumum nemendum hjálpleg.",it:"Riproduci suoni aggiuntivi che potrebbero essere utili per alcuni studenti.",iw:"נגן צלילים נוספים על-מנת לסייעו לחלק מהלומדים.",ki:"Rũme rwa mũnyene ya ũtarĩrĩ wa mũtũ wakuongerera gutũmaga",kn:"ಹೆಚ್ಚುವರಿ ಧ್ವನಿಗಳನ್ನು ನುಡಿಸು <br> ಇದು ಕೆಲವು ಕಲಿಕಾರ್ಥಿಗಳಿಗೆ ಸಹಾಯಕವಾಗಬಹುದು.",ko:"일부 사용자를 위해 추가 음향을 사용",ku:"دەنگی زیادە لێبدە کە ڕەنگە سود بە هەندێگ فێرخواز بگەیەنێت",lg:"Kuba eddoboozi eddala bweliba liyamba abayizi abamu",lt:"Groti papildomą garsą, galintį padėti kai kuriems besimokantiesiems.",mi:"Tāpirihia he oro anō tērā pea ka āwhina i ētahi o ngā ākonga.",mn:"Зарим суралцагчдад туслахын тулд нэмэлт дууг тоглуулаарай.",mr:"शिकणाऱ्यांसाठी उपयुक्त ठरू शकेल असा अतिरिक्त आवाज वाजवा.",ms:"Mainkan bunyi tambahan yang mungkin berguna untuk sesetengah pelajar.",mt:"Żid iktar il-ħoss biex ighin lil xi studenti.",nb:"Spill av ekstra lyd som kan være nyttig.",nl:"Speel een additioneel geluid af dat sommige leerlingen kan helpen.",nn:"Spill av ekstra lyd som kan være nyttig.",ny:"Sewerani mawu owonjezera omwe angakhale othandiza kwa ophunzira ena.",om:"Sagalee dabalataa barattoota tokko tokkoof gargaaruu danda’u taphachiisi.",pl:"Odtwórz dodatkowy dźwięk, który może być pomocny dla niektórych uczniów.",ps:"نور غږونه چې شاید د ځینو زده کوونکو لپاره ګټور وي چالان کړئ.",pt:"Reproduzir sons adicionais que podem ser úteis para alguns alunos.",pt_BR:"Tocar sons adicionais que podem ser úteis para alguns alunos.",qu:"Play additional sound that may be helpful for some learners.",ro:"Redă sunet suplimentar care poate fi de ajutor unora.",ru:"Воспроизведите больше звуков, которые может быть полезны для некоторых обучающихся",rw:"Gucuranga amajwi y'inyongera ashobora gufasha bamwe mu biga.",se:"Čuojat ligge jienaid mat soitet ávkin muhtin ohppide.",sk:"Prehrať dodatočný zvuk, ktorý môže byť pre niektorých študentov užitočný.",sl:"Predvajaj dodatni zvok, ki bi lahko bil v pomoč nekaterim učečim.",sn:"Ridza kumwe kurira kunogona kubatsira kune vamwe vadzidzi.",sp:"Bapala modumo wa tlaleletšo wo o ka thušago go barutwana ba bangwe.",sq:"Luani një tingull shtesë që mund të jetë i dobishëm për disa nxënës.",sr:"Пустите додатни звук који би могао бити од помоћи неким ученицима",st:"bapala molumo o ka thusang moithuti haholo",sv:"Spela upp ytterligare ljud som kan vara till hjälp för vissa elever.",sw:"Cheza sauti ya ziada inayoweza kuwasaidia baadhi ya wanafunzi",te:"Play additional sound that may be helpful for some learners",tg:"Овози иловагиеро пахш кунед, ки барои баъзе донишҷўён муфид хоҳад буд",th:"เล่นเสียงเพิ่มเติมเพื่อช่วยเหลือผู้เรียนบางกลุ่ม",tk:"Käbir öwrenijiler üçin peýdaly bolup biljek goşmaça sesi aýtdyr.",tl:"Magpatugtog ng karagdagang tunog na maaaring makatulong sa ilang mag-aaral.",tn:"Tshameka medumo ya tlalaletso go thusa baithuti bangwe",tr:"Bazı öğrenciler için yararlı olabilecek ek sesi çalın.",tw:"Bɔ ngygeɛ a ɛbɛ ba mfasoɔ ama adesuafoɔ.",uk:"Відтворюйте додатковий звук, який може бути корисним для деяких учнів.",ur:"چند اضافی ساوّنڈ پلے کریں تاکہ دیگر طلبا کو سہولت ہو",uz:"Ba'zi o‘quvchilar uchun foydali bo'lishi mumkin bo'lgan qo'shimcha tovushni ijro eting.",vi:"Play additional sound that may be helpful for some learners.",wo:"Tëgël benen Coow Buy Jëriñ ñiy Nafar",yo:"Mu ohun afikun ṣiṣẹ ti o le ṣe iranlọwọ fun diẹ ninu awọn akẹẹkọ",zh_HK:"如有需要,播放附加聲音。",zh_TW:"播放額外的音效可能對一些學習者有幫助。",zu:"dlala umsindo owengeziwe ongaba usizo kwabanye abafundi."},R.OPT_OUT),R.OPT_OUT),AW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.sounds.soundsOn",{en:"Sounds on."},R.OPT_OUT),R.OPT_OUT),wW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.sounds.soundsOff",{en:"Sounds off."},R.OPT_OUT),R.OPT_OUT),SW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.sounds.extraSounds.extraSoundsOn",{en:"Extra Sounds on."},R.OPT_OUT),R.OPT_OUT),PW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.sounds.extraSounds.extraSoundsOff",{en:"Extra Sounds off."},R.OPT_OUT),R.OPT_OUT),f0=new Fe(new He("JOIST/a11y.preferences.tabs.labelledDescriptionPattern",{en:"{{label}}, {{description}}"},R.OPT_OUT),R.OPT_OUT);class ha extends i_(pi){constructor(e,t){const n=Ne()({readingBlockNameResponse:e,readingBlockTagName:"button"},t);n.readingBlockDisabledTagName?n.accessibleName=n.accessibleName===void 0?e:n.accessibleName:n.accessibleParagraph=n.accessibleParagraph===void 0?e:n.accessibleParagraph,super(e,n),this.focusHighlight=new t_(this)}}const TW=zt.roundRectangle(1,1,25,25,4.99,4.99).getStrokedShape(new Hc({lineWidth:2})),xW="M26,14.68v6.33c0,2.76-2.23,4.99-4.99,4.99H5.99c-2.76,0-4.99-2.23-4.99-4.99V5.99C1,3.23,3.23,1,5.99,1h15.02",EW="M13.42,21.27l-7.42-7.42c-.68-.68-.68-1.78,0-2.46l1.71-1.71c.68-.68,1.78-.68,2.46,0l4.48,4.48L28.29.51c.68-.68,1.78-.68,2.46,0l1.71,1.71c.68.68.68,1.78,0,2.46L15.88,21.27c-.68.68-1.78.68-2.46,0Z",VW=new zt(xW).getStrokedShape(new Hc({lineWidth:2,lineCap:"round"})),kW=new zt(EW),CW=new zt([...VW.subpaths,...kW.subpaths]),aM=_r(1.3,0,0,0,1.3,0,0,0,1),DW=TW.transformed(aM),IW=CW.transformed(aM);class US extends nh(ys(Ge)){constructor(e,t,n){const s=Ne()({spacing:5,boxWidth:21,checkboxColor:"black",checkboxColorBackground:"white",touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,checkedSoundPlayer:$n.get("checkboxChecked"),uncheckedSoundPlayer:$n.get("checkboxUnchecked"),phetioDisplayOnlyPropertyInstrumented:!1,cursor:"pointer",disabledOpacity:Ha.DISABLED_OPACITY,tandem:R.REQUIRED,tandemNameSuffix:"Checkbox",phetioEventType:vi.USER,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioReadOnly:rn.DEFAULT_OPTIONS.phetioReadOnly,phetioFeatured:!0,tagName:"input",inputType:"checkbox",appendDescription:!0,voicingCheckedObjectResponse:null,voicingUncheckedObjectResponse:null,accessibleNameBehavior:ys.BASIC_ACCESSIBLE_NAME_BEHAVIOR,accessibleHelpTextBehavior:ys.BASIC_HELP_TEXT_BEHAVIOR,checkedContextResponse:null,uncheckedContextResponse:null,voiceNameResponseOnSelection:!0},n);super(),this._isMouseAreaCustomized=!1,this._isTouchAreaCustomized=!1,this._isSettingAreas=!1,this.backgroundNode=new xt(0,-s.boxWidth,s.boxWidth*.95,s.boxWidth*.95,s.boxWidth*.2,s.boxWidth*.2,{fill:s.checkboxColorBackground}),this.uncheckedNode=new bi(DW,{fill:s.checkboxColor});const r=s.boxWidth/this.uncheckedNode.width;this.uncheckedNode.scale(r),this.uncheckedNode.center=this.backgroundNode.center,this.checkedNode=new bi(IW,{scale:r,fill:s.checkboxColor}),this.checkedNode.translation=this.uncheckedNode.translation;const a=new Ge({children:[this.backgroundNode,this.checkedNode,this.uncheckedNode]}),o=new xt({});this.children=[a,t,o],this.constraint=new LW(this,a,this.checkedNode,t,o,s),this.constraint.updateLayout(),t.pickable=!1,t.pdomVisible=!1;const l=new Rr({fire:()=>{e.value=!e.value,i0(e.value),e.value?(s.checkedSoundPlayer.play(),s.checkedContextResponse&&this.addAccessibleResponse(s.checkedContextResponse),this.voicingSpeakResponse({nameResponse:s.voiceNameResponseOnSelection?this.voicingNameResponse:null,objectResponse:Sn.alertableToText(s.voicingCheckedObjectResponse),contextResponse:Sn.alertableToText(s.checkedContextResponse)})):(s.uncheckedSoundPlayer.play(),s.uncheckedContextResponse&&this.addAccessibleResponse(s.uncheckedContextResponse),this.voicingSpeakResponse({nameResponse:s.voiceNameResponseOnSelection?this.voicingNameResponse:null,objectResponse:Sn.alertableToText(s.voicingUncheckedObjectResponse),contextResponse:Sn.alertableToText(s.uncheckedContextResponse)}))},tandem:s.tandem});this.addInputListener(l);const h=new Qt(!1,{tandem:s.phetioDisplayOnlyPropertyInstrumented?s.tandem.createTandem("displayOnlyProperty"):R.OPT_OUT,phetioFeatured:!0,phetioDocumentation:"disables interaction for use as a legend"}),c=new Dt([this.enabledProperty,h],(g,v)=>g&&!v);super.setInputEnabledProperty(c);const f=new Cn([e,h],(g,v)=>{this.checkedNode.visible=g,this.uncheckedNode.visible=!g,a.visible=!v,this.tagName=v?"p":"input",v||(this.pdomChecked=g)});this.mutate(s),this.setExcludeLabelSiblingFromInput(),s.accessibleName||(this.accessibleName=Du(t)),this.addLinkedElement(e,{tandemName:"property"}),this.disposeCheckbox=()=>{o.dispose(),this.backgroundNode.dispose(),this.uncheckedNode.dispose(),this.checkedNode.dispose(),a.dispose(),l.dispose(),f.dispose(),c.dispose(),h.dispose()}}setInputEnabledProperty(e){return this}dispose(){this.constraint.dispose(),this.disposeCheckbox(),super.dispose()}setCheckboxColorBackground(e){this.backgroundNode.fill=e}set checkboxColorBackground(e){this.setCheckboxColorBackground(e)}get checkboxColorBackground(){return this.getCheckboxColorBackground()}getCheckboxColorBackground(){return this.backgroundNode.fill}setCheckboxColor(e){this.checkedNode.fill=this.uncheckedNode.fill=e}set checkboxColor(e){this.setCheckboxColor(e)}get checkboxColor(){return this.getCheckboxColor()}getCheckboxColor(){return this.checkedNode.fill}setMouseArea(e){return this._isSettingAreas||(this._isMouseAreaCustomized=!0),super.setMouseArea(e)}setTouchArea(e){return this._isSettingAreas||(this._isTouchAreaCustomized=!0),super.setTouchArea(e)}}class LW extends Oo{constructor(e,t,n,s,r,a){super(e),this.checkbox=e,this.checkboxNode=t,this.checkedNode=n,this.content=s,this.rectangle=r,this.options=a,this.checkbox.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.addNode(s)}layout(){super.layout();const e=this.createLayoutProxy(this.content);if(!e)return;const t=e.minimumWidth,n=this.checkedNode.right-this.checkboxNode.left,s=n+this.options.spacing+t,r=Math.max(s,this.checkbox.localPreferredWidth||0);e.preferredWidth=r-n-this.options.spacing,e.left=this.checkedNode.right+this.options.spacing,e.centerY=this.checkedNode.centerY,this.rectangle.rectBounds=this.checkboxNode.bounds.union(e.bounds).withMaxX(Math.max(this.checkboxNode.left+r,e.right)),this.checkbox._isSettingAreas=!0,this.checkbox._isTouchAreaCustomized||(this.checkbox.touchArea=this.checkbox.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation)),this.checkbox._isMouseAreaCustomized||(this.checkbox.mouseArea=this.checkbox.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation)),this.checkbox._isSettingAreas=!1,e.dispose(),this.checkbox.localMinimumWidth=s}dispose(){this.checkbox.localPreferredWidthProperty.unlink(this._updateLayoutListener),super.dispose()}}const SA=yW,Py=vW,BV=bW,qV=_W,MW=AW,OW=wW,NW=SW,RW=PW,zV=f0;class BW extends Lu{constructor(e,t){const n=Ne()({includeTitleToggleSwitch:!0},t),s=new kt(SA,Vi.PANEL_SECTION_LABEL_OPTIONS),r=new _a(zV,{label:SA,description:BV},{tandem:R.OPT_OUT}),a=new mr(BV,an({},Vi.PANEL_SECTION_CONTENT_OPTIONS,{readingBlockNameResponse:r})),o=new Co(e.soundEnabledProperty,!1,!0,Ut({visible:n.includeTitleToggleSwitch,accessibleName:SA,leftValueContextResponse:OW,rightValueContextResponse:MW},Vi.TOGGLE_SWITCH_OPTIONS)),l=new Hh({labelNode:s,descriptionNode:a,allowDescriptionStretch:!1,controlNode:o});let h=null;if(e.supportsExtraSound){const c=new kt(Py,Vi.PANEL_SECTION_CONTENT_OPTIONS),f=new US(e.extraSoundEnabledProperty,c,{labelTagName:"label",labelContent:Py,voicingNameResponse:Py,voicingIgnoreVoicingManagerProperties:!0,voiceNameResponseOnSelection:!1,checkedContextResponse:NW,uncheckedContextResponse:RW,tandem:R.OPT_OUT}),g=new _a(zV,{label:Py,description:qV},{tandem:R.OPT_OUT}),v=new ha(qV,an({},Vi.PANEL_SECTION_CONTENT_OPTIONS,{lineWrap:300,maxHeight:100,readingBlockNameResponse:g,disabledOpacity:Ha.DISABLED_OPACITY}));h=new Ai({children:[f,v],align:"left",spacing:5,tagName:"div"});const A=P=>{h.children.forEach(w=>w.setEnabled(P))};e.soundEnabledProperty.link(A)}super({titleNode:l,contentNode:h})}}const qW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.title",{en:"Voicing"},R.OPT_OUT),R.OPT_OUT),zW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.toolbar.title",{en:"Toolbar"},R.OPT_OUT),R.OPT_OUT),FW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.rate.title",{en:"Rate"},R.OPT_OUT),R.OPT_OUT),HW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.rate.labelString",{en:"Voice Rate"},R.OPT_OUT),R.OPT_OUT),UW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.pitch.title",{en:"Pitch"},R.OPT_OUT),R.OPT_OUT),GW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.voicingOn",{en:"Voicing on."},R.OPT_OUT),R.OPT_OUT),WW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.voicingOff",{en:"Voicing off."},R.OPT_OUT),R.OPT_OUT),KW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.voicingOffOnlyAvailableInEnglish",{en:"Voicing off. Only available in English."},R.OPT_OUT),R.OPT_OUT),YW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.variablesPattern",{en:"{{value}}x"},R.OPT_OUT),R.OPT_OUT),jW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.title",{en:"Customize Voice"},R.OPT_OUT),R.OPT_OUT),XW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.toolbar.toolbarRemoved",{en:"Toolbar removed."},R.OPT_OUT),R.OPT_OUT),QW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.toolbar.toolbarAdded",{en:"Toolbar added to sim."},R.OPT_OUT),R.OPT_OUT),JW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.title",{en:"Sim Voicing Options"},R.OPT_OUT),R.OPT_OUT),ZW=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.description",{en:"Choose details you want voiced as you interact."},R.OPT_OUT),R.OPT_OUT),$W=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.objectDetails.label",{en:"Voice object details and changes"},R.OPT_OUT),R.OPT_OUT),eK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.contextChanges.label",{en:"Voice surrounding context changes"},R.OPT_OUT),R.OPT_OUT),tK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.helpfulHints.label",{en:"Voice helpful hints"},R.OPT_OUT),R.OPT_OUT),iK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.objectDetails.enabledAlert",{en:"Voicing object details and changes."},R.OPT_OUT),R.OPT_OUT),nK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.objectDetails.disabledAlert",{en:"Object details and changes muted."},R.OPT_OUT),R.OPT_OUT),sK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.contextChanges.enabledAlert",{en:"Voicing surrounding context changes."},R.OPT_OUT),R.OPT_OUT),rK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.contextChanges.disabledAlert",{en:"Surrounding context changes muted."},R.OPT_OUT),R.OPT_OUT),aK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.helpfulHints.enabledAlert",{en:"Voicing extra help."},R.OPT_OUT),R.OPT_OUT),oK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.simVoicingOptions.helpfulHints.disabledAlert",{en:"Extra help muted."},R.OPT_OUT),R.OPT_OUT),lK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.voice.title",{en:"Voice"},R.OPT_OUT),R.OPT_OUT),hK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.voice.titlePattern",{en:"Voice: {{value}}"},R.OPT_OUT),R.OPT_OUT),uK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.voice.noVoicesAvailable",{en:"No voices available"},R.OPT_OUT),R.OPT_OUT),cK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.expandedAlert",{en:"expanded"},R.OPT_OUT),R.OPT_OUT),dK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.collapsedAlert",{en:"collapsed"},R.OPT_OUT),R.OPT_OUT),pK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.writtenVariablesPattern",{en:"{{value}} times"},R.OPT_OUT),R.OPT_OUT),fK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.voiceRateNormal",{en:"normal"},R.OPT_OUT),R.OPT_OUT),mK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.low",{en:"in low range"},R.OPT_OUT),R.OPT_OUT),gK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.normal",{en:"in normal range"},R.OPT_OUT),R.OPT_OUT),yK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.aboveNormal",{en:"above normal range"},R.OPT_OUT),R.OPT_OUT),vK=new Fe(new He("JOIST/a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.high",{en:"in high range"},R.OPT_OUT),R.OPT_OUT),bK=new Fe(new He("JOIST/preferences.tabs.audio.voicing.titleEnglishOnly",{en:"Voicing (English Only)",af:"Stem (slegs Engels)",ak:"Kasa (Brɔfo Pɛ)",am:"ድምጽ መስጠት (እንግሊዝኛ ብቻ)",ar:"الأصوات (الإنجليزية فقط)",ar_KW:"التعبير الصوتي (للغة الانجليزية فقط)",ar_LY:"الأداء الصوتي (باللغة الإنجليزية فقط)",ar_MA:"تشغيل الصوت (خاص باللغة الانجليزية)",ar_SY:"الأصوات (الإنجليزية فقط)",az:"Səsləndirmə (Yalnız İngilis dili)",be:"Агучванне (толькі на англійскай мове)",bg:"Озвучение (само на аглийски)",bn:"Voicing (English Only)",bs:"Voicing (English Only)",ca:"Veu (només en anglès)",cs:"Převyprávění (pouze anglicky)",da:"Stemmestyring (kun engelsk)",de:"Voicing (English Only)",el:"Φωνή (μόνο στα αγγλικά)",es:"Voz (solo en inglés)",es_PE:"Voz (solo en inglés)",eu:"Ahotsa (ingelesez soilik)",fa:"صداگذاری",fa_DA:"صداگذاری",fi:"Kuuntelu (vain englanniksi)",fr:"Sonorisation (Anglais)",gu:"વોઈસિંગ (માત્ર અંગ્રેજીમાં)",ha:"Saka murya ( a ingilishi kawai)",hi:"आवाज (केवल अंग्रेजी)",hr:"Glas(samo engleski)",ht:"Vokal (angle sèlman)",hu:"Beszéd (csak angol)",hy:"Ձայնավորում (միայն անգլերեն)",ig:"Ịkpọ ụda (Bekee naanị)",is:"Hljóð (aðeins enska)",it:"Voicing (solo in inglese)",iw:"הקראה (אנגלית בלבד)",ki:"Kũtũka (English Kagati)",kn:"Voicing (English Only)",ko:"음성화(영어만 가능)",ku:"دەنگ (تەنها ئینگلیزی)",lg:"Okukuba amaloboozi (Luzungu Yokka)",mn:"Яриа нь зөвхөн Англи",mr:"Voicing (English Only)",ms:"Suara (Bahasa Inggeris Sahaja)",mt:"Voicing (bl-Ingliz biss)",nb:"Lyd (Kun engelsk)",nl:"Uitspreken (alleen in het Engels)",ny:"Kulankhula (Chingerezi Chokha)",om:"Sagaleessa (Afaan Ingiliffaa Qofa) .",pl:"Udźwiękowienie (tylko w angielskim)",ps:"غږیز (یواځې په انګلیسي)",pt:"Voz (somente em inglês)",pt_BR:"Voz (somente em inglês)",ro:"Voce (doar în engleză)",rw:"Amajwi(Icyongereza gusa)",se:"Jietnadeapmi (dušše eaŋgalasgillii)",sk:"Komentovanie (len anglicky)",sl:"Izgovarjanje (le v angleščini)",sn:"Kutaurira (English Chete)",sp:"Voicing (Sepedi Feela) .",sr:"Voicing (English Only)",st:"lentsoe(senyesemane feela)",sv:"Röststöd(Endast engelska)",sw:"Kutoa sauti (Kiingereza Pekee)",te:"Voicing (English Only)",tg:"Овоздор кардан (танҳо бо забони англисӣ)",th:"เล่นเสียง (ภาษาอังกฤษเท่านั้น)",tr:"Seslendirme (Yalnızca İngilizce)",ur:"آواز (صرف انگریزی)",uz:"Ovoz berish (Faqat Ingliz tilida)",vi:"Tiếng (tiếng Anh)",yo:"Ngbohun (Gẹẹsi nikan)",zh_TW:"語音（只有英文）",zu:"ukuphimisa(isiNgisi kuphela)"},R.OPT_OUT),R.OPT_OUT),_K=new Fe(new He("JOIST/preferences.tabs.audio.voicing.description",{en:"Voice and highlight content as you interact.",af:"Stem en beklemtoon inhoud terwyl jy interaksie het.",am:"በሚገናኙበት ጊዜ ድምጽ እና ይዘትን አድምቅ/ቂ",ar:"قم بالصوت وإبراز المحتوى أثناء تفاعلك.",ar_KW:"الأصوات التفاعلية أثناء التشغيل",ar_LY:"قم بالتعبير عن المحتوى وإبرازه أثناء تفاعلك معه.",ar_MA:"قم بتشغيل الصوت وإبراز المحتوى أثناء تفاعلك",ar_SY:"قم بالصوت وإبراز المحتوى أثناء تفاعلك.",az:"Qarşılıqlı əlaqə qurarkən səs verin və məzmunu vurğulayın.",be:"Агучвайце і вылучайце змесціва падчас узаемадзеяння.",bg:"Озвучение и акценти докато взаимодействате.",bn:"Voice and highlight content as you interact.",bs:"Glasajte i istaknite sadržaj dok ste u interakciji.",ca:"Veu i ressalteu el contingut mentre interactueu.",cs:"Převyprávění a zvýraznění obsahu při interakci.",da:"Indtal og fremhæv indhold, mens du benytter.",de:"Sprechen und hervorheben während des Benutzens",el:"Φωνή και επισήμανση περιεχομένου καθώς αλληλεπιδράτε.",es:"Usa la activación de voz y resalta el contenido mientras interactúas.",es_PE:"Voz y resalta el contenido mientras interactúas.",eu:"Ahotsa eta edukia nabarmenduak eragiten ari zaren bitartean.",fa:"محتوای صوتی و هایلات هنگام تعامل.",fa_DA:"محتوای صوتی و هایلات در حین کار.",fi:"Kuuntele ja korosta sisältöä vuorovaikutuksen aikana.",fr:"Vocalise et surligne le contenu pendant que tu interagis.",gu:"તમે ઇન્ટરેક્ટ કરો તે મુજબ અવાજ અને કન્ટેન્ટનું હાઈલાઇટ",ha:"Voice and highlight content as you interact.",hi:"जब आप परस्परिक क्रिया करते हैं तो आवाज और सामग्री को हाइलाइट करें।",hr:"Zvučno ističite sadržaj tijekom interakcije.",ht:"Vwa ak mete aksan sou kontni pandan w ap entèraji.",hu:"Tartalmak  kiemelése interakciónál beszéddel és vizuálisan",ig:"Olu ma gosi ọdịnaya ka ị na-emekọrịta ihe",is:"Hljóð og lýsingar þegar þú velur",it:"Dai voce ed evidenzia i contenuti mentre interagisci.",iw:"קול והדגשת תוכן בעת אינטראקציה",ki:"Kũrĩa mĩciĩra na kũhĩrĩra kĩarĩrĩ na ũtũkũ wa ndungatacokio",kn:"ನೀನು ಅಂತರ್ವರ್ತಿಸುವಾಗ ಧ್ವನಿಗಳನ್ನು ನುಡಿಸು ಮತ್ತು ಹೈಲೈಟ್ ಮಾಡು.",ko:"상호작용시 음성과 하이라이트 내용",ku:"دەنگ و هایلایت",lg:"Eddoboozi era olage ebirimu nga bw’okolagana.",mn:"Яриагаар тодруулах боломжтой",mr:"Voice and highlight content as you interact.",ms:"Suarakan dan serlahkan kandungan semasa anda berinteraksi.",mt:"Vuċi u highlight tal-kontenut inti u taġixxi",nb:"Lyd og marker innhold ved aktivitet.",nl:"Spreek en highlight de inhoud terwijl je bezig bent.",ny:"Mawu ndi kuwunikira zomwe zili mukamalumikizana.",om:"Yeroo walqunnamtan qabiyyee sagalee dhageessisaa fi calaqqisiisi.",pl:"Dźwięki i wyróżnienie treści podczas interakcji.",ps:"کله چې تاسې کار کوئ، غږ وکړئ او په نښه یی کړئ",pt:"Dê voz e destaque o conteúdo enquanto interage.",pt_BR:"Dê voz e destaque o conteúdo enquanto você interage.",ro:"Voce și conținut evidențiat la interacțiune",rw:"Ijwi kandi ugaragaze ibirimo nkuko musabana.",se:"Jietna ja merke sisdoalu barggadettiin.",sk:"Komentuje a vysvetľuje obsah počas interakcie",sl:"Glas in označevanje vsebine ob interakciji.",sn:"Taura ne nongedza zvidzidzo paurikurura",sp:"Lentšu le go hlagiša diteng ge o dutše o dirišana.",sr:"Гласајте и истакните садржај док сте у интеракцији.",st:"lentsoe le totobatsa litaba ha u ntse u sebetsa",sv:"Röststöd och markera innehåll medan du använder simuleringen.",sw:"Sauti na onyesha yaliyomo unapoingiliana.",te:"Voice and highlight content as you interact.",tg:"Ҳангоми муошират мазмуни онро таъкид намоед",th:"เสียงและเนื้อหาสำคัญที่ถูกใช้งาน",tr:"Etkileşim kurarken içeriği seslendirin ve vurgulayın.",ur:"آواز اور تعامل کے دوران مواد کو نمایاں کرنے کے لئے",uz:"Aloqada bo‘lganingizda ovoz chiqaring va kontentni ta'kidlang.",vi:"Voice and highlight content as you interact.",yo:"Ohùn ati ṣe afihan akoonu bi o ṣe n ṣe ajọṣepọ",zh_TW:"互動時發出語音與突顯內容。",zu:"izwi futhi ugqamise okuqukethwe njengoba uhlanganyela."},R.OPT_OUT),R.OPT_OUT);function oM(i,e){return parseFloat(pd(i,e))}function lM(i){if(Math.floor(i)===i)return 0;{const e=i.toString();if(e.includes("e")){const t=e.split("e"),n=t[0],s=Number(t[1]),r=n.includes(".")?n.split(".")[1].length:0;return Math.max(r-s,0)}else return e.split(".")[1].length}}function Su(i,e){return oM(ws(i/e)*e,lM(e))}const FV=20;class HV extends Lf{constructor(e,t,n){const s=Ne()({cursor:"pointer",baseColor:"white",stroke:"black",lineWidth:1,cornerRadius:4,xMargin:7,yMargin:5,touchAreaXDilation:7,touchAreaYDilation:7,arrowHeight:FV,arrowWidth:FV*Math.sqrt(3)/2,arrowFill:"black",arrowStroke:null,arrowLineWidth:1,numberOfArrows:1,arrowSpacing:-10,fireOnHold:!0,fireOnHoldDelay:400,fireOnHoldInterval:100,startCallback:ie.noop,endCallback:ie.noop},n);s.listener=t;const r=new zt;for(let a=0;a<s.numberOfArrows;a++){const o=a*(s.arrowHeight+s.arrowSpacing);if(e==="up")r.moveTo(s.arrowHeight/2,o).lineTo(s.arrowHeight,s.arrowWidth+o).lineTo(0,s.arrowWidth+o).close();else if(e==="down")r.moveTo(0,o).lineTo(s.arrowHeight,o).lineTo(s.arrowHeight/2,s.arrowWidth+o).close();else if(e==="left")r.moveTo(o,s.arrowHeight/2).lineTo(s.arrowWidth+o,0).lineTo(s.arrowWidth+o,s.arrowHeight).close();else if(e==="right")r.moveTo(o,0).lineTo(s.arrowWidth+o,s.arrowHeight/2).lineTo(o,s.arrowHeight).close();else throw new Error(`unsupported direction: ${e}`)}s.content=new bi(r,{fill:s.arrowFill,stroke:s.arrowStroke,lineWidth:s.arrowLineWidth,pickable:!1}),super(s)}}class Ma{constructor(e){this.points=e.slice();for(let t=0;t<this.points.length-2;t++){const n=this.points[t],s=this.points[t+1],r=this.points[t+2];nv(n,s,r)&&(this.points.splice(t+1,1),t--)}}findMatchingPair(e){let t=0;for(;t<this.points.length-2&&this.points[t+1].x<e;)t++;return[this.points[t],this.points[t+1]]}evaluate(e){if(this.points.length===1)return this.points[0].y;{const[t,n]=this.findMatchingPair(e);return t.x===e?t.y:n.x===e?n.y:Or(t.x,n.x,t.y,n.y,e)}}getCombinedXValues(e){return Ma.sortedUniqueEpsilon(this.points.map(t=>t.x).concat(e.points.map(t=>t.x)))}getIntersectedXValues(e){const t=this.getCombinedXValues(e),n=[];for(let r=0;r<t.length-1;r++){const a=t[r],o=t[r+1],l=bS(new Oe(a,this.evaluate(a)),new Oe(o,this.evaluate(o)),new Oe(a,e.evaluate(a)),new Oe(o,e.evaluate(o)));l&&(r===0||l.x>a)&&(r===t.length-2||l.x<o)&&n.push(l.x)}const s=Ma.sortedUniqueEpsilon([...t,...n]);return[s[0]-1,...s,s[s.length-1]+1]}binaryXOperation(e,t,n){return new Ma(n.map(s=>new Oe(s,t(this.evaluate(s),e.evaluate(s)))))}binaryPointwiseOperation(e,t){return this.binaryXOperation(e,t,this.getCombinedXValues(e))}binaryIntersectingOperation(e,t){return this.binaryXOperation(e,t,this.getIntersectedXValues(e))}plus(e){return this.binaryPointwiseOperation(e,(t,n)=>t+n)}minus(e){return this.binaryPointwiseOperation(e,(t,n)=>t-n)}min(e){return this.binaryIntersectingOperation(e,Math.min)}max(e){return this.binaryIntersectingOperation(e,Math.max)}withXValues(e){return new Ma(e.map(t=>new Oe(t,this.evaluate(t))))}inverted(){const e=this.points.map(t=>new Oe(t.y,t.x));return e.length>1&&e[0].x>e[1].x&&e.reverse(),new Ma(e)}static sum(...e){return e.reduce((t,n)=>t.plus(n))}static min(...e){return e.reduce((t,n)=>t.min(n))}static max(...e){return e.reduce((t,n)=>t.max(n))}static constant(e){return new Ma([new Oe(0,e)])}static linear(e,t){return new Ma([new Oe(0,t),new Oe(1,e+t)])}static sortedUniqueEpsilon(e,t=1e-10){e=ie.sortBy(e);for(let n=0;n<e.length-1;n++)Math.abs(e[n]-e[n+1])<t&&(e.splice(n,1),n--);return e}}const PA={};function UV(i,e,t){const n=PA;let s=n,r=n;return i.hasOwnProperty(e)&&(s=i[e]),i.hasOwnProperty(t)&&(r=i[t]),s!==PA?i[t]=s:delete i[t],r!==PA?i[e]=r:delete i[e],i}const GV=5,AK=new OS(Kc,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),wK=new OS(Yc,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),SK=i=>Su(i,1e-9),TA=()=>1,WV=()=>{};class fa extends th{constructor(e,t){const n=Ne()({middleMovingUpSoundPlayer:$n.get("generalSoftClick"),middleMovingDownSoundPlayer:wK,middleMovingUpPlaybackRateMapper:TA,middleMovingDownPlaybackRateMapper:TA,numberOfMiddleThresholds:null,interThresholdDelta:null,constrainValue:SK,minSoundPlayer:AK,maxSoundPlayer:$n.get("generalBoundaryBoop"),minimumInterMiddleSoundTime:.035},t);n.numberOfMiddleThresholds===null&&n.interThresholdDelta===null&&(n.numberOfMiddleThresholds=GV),super(n),this.interThresholdDistance=GV,this.valueRangeProperty=e instanceof qi?new oi(e):e,this.middleMovingUpSoundPlayer=n.middleMovingUpSoundPlayer,this.middleMovingDownSoundPlayer=n.middleMovingDownSoundPlayer,this.middleMovingUpPlaybackRateMapper=n.middleMovingUpPlaybackRateMapper,this.middleMovingDownPlaybackRateMapper=n.middleMovingDownPlaybackRateMapper,this.minSoundPlayer=n.minSoundPlayer,this.maxSoundPlayer=n.maxSoundPlayer,this.minimumInterMiddleSoundTime=n.minimumInterMiddleSoundTime,this.timeOfMostRecentMiddleSound=0,this.constrainValue=n.constrainValue;const s=r=>{n.numberOfMiddleThresholds!==null?this.interThresholdDistance=r.getLength()/(n.numberOfMiddleThresholds+1):n.interThresholdDelta!==null?this.interThresholdDistance=n.interThresholdDelta:this.interThresholdDistance=r.getLength()/2};this.valueRangeProperty.link(s),this.disposeEmitter.addListener(()=>{this.valueRangeProperty.unlink(s)})}playSoundIfThresholdReached(e,t){if(e!==t){const n=this.constrainValue(e),s=this.constrainValue(t),r=this.getSurroundingThresholds(s),a=this.getSurroundingThresholds(n),o=r.length===1&&a.length===1&&Math.abs(r[0]-a[0])>this.interThresholdDistance||r.length===1&&a.length===2&&r[0]!==a[0]&&r[0]!==a[1]||r.length===2&&a.length===1&&a[0]!==r[0]&&a[0]!==r[1]||r.length===2&&a.length===2&&a[0]!==r[0],l=a.length===1&&(r.length===2||r[0]!==a[0]);(o||l||n===this.valueRangeProperty.value.min||n===this.valueRangeProperty.value.max)&&this.playSoundForValueChange(e,t)}}playSoundForValueChange(e,t){const n=this.constrainValue(e),s=this.constrainValue(t);if(n!==s||t!==e&&(e===this.valueRangeProperty.value.min||e===this.valueRangeProperty.value.max))if(e===this.valueRangeProperty.value.min&&this.minSoundPlayer!==fa.USE_MIDDLE_SOUND)this.minSoundPlayer.play();else if(e===this.valueRangeProperty.value.max&&this.maxSoundPlayer!==fa.USE_MIDDLE_SOUND)this.maxSoundPlayer.play();else{const r=gt.currentTime;if(r-this.timeOfMostRecentMiddleSound>this.minimumInterMiddleSoundTime){let a,o;n>s?(a=this.middleMovingUpPlaybackRateMapper,o=this.middleMovingUpSoundPlayer):(a=this.middleMovingDownPlaybackRateMapper,o=this.middleMovingDownSoundPlayer),a!==TA&&o.setPlaybackRate(a(e)),o.play(),this.timeOfMostRecentMiddleSound=r}}}getSurroundingThresholds(e){const n=Math.floor(Su((e-this.valueRangeProperty.value.min)/this.interThresholdDistance,1e-7)),s=Su(n*this.interThresholdDistance+this.valueRangeProperty.value.min,1e-7),r=[s];if(s!==e){const a=Math.min(Su(s+this.interThresholdDistance,1e-7),this.valueRangeProperty.value.max);a>s&&r.push(a)}return r}}fa.NO_SOUND=new fa(new qi(0,1),{middleMovingUpSoundPlayer:Mc,minSoundPlayer:Mc,maxSoundPlayer:Mc});fa.USE_MIDDLE_SOUND={play:WV,stop:WV};const Eh=new ld("sun"),ps={HOME_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("home")],binderName:"Set value to minimum",repoName:Eh.name}),END_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("end")],binderName:"Set value to maximum",repoName:Eh.name}),PAGE_UP_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("pageUp")],binderName:"Increment value by page",repoName:Eh.name}),PAGE_DOWN_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("pageDown")],binderName:"Decrement value by page",repoName:Eh.name}),UP_ARROW_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("arrowUp")],binderName:"Increment value by up arrow",repoName:Eh.name}),DOWN_ARROW_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("arrowDown")],binderName:"Decrement value by down arrow",repoName:Eh.name}),RIGHT_ARROW_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("arrowRight")],binderName:"Increment value by right arrow",repoName:Eh.name}),LEFT_ARROW_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("arrowLeft")],binderName:"Decrement value by left arrow",repoName:Eh.name}),SHIFT_HOTKEY_DATA:new ir({keyStringProperties:[new Mt("shift")],binderName:"Increment/decrement in smaller steps",repoName:Eh.name}),isRangeKey(i){return ir.anyHaveKeyStroke([ps.HOME_HOTKEY_DATA,ps.END_HOTKEY_DATA,ps.PAGE_UP_HOTKEY_DATA,ps.PAGE_DOWN_HOTKEY_DATA,ps.UP_ARROW_HOTKEY_DATA,ps.DOWN_ARROW_HOTKEY_DATA,ps.RIGHT_ARROW_HOTKEY_DATA,ps.LEFT_ARROW_HOTKEY_DATA],i)}},hM="input",PK=i=>`${i}`,TK={withNameResponse:!1,withObjectResponse:!0,onlyOnValueChange:!0},KV=["startInput","endInput","onInput","constrainValue","keyboardStep","shiftKeyboardStep","pageKeyboardStep","ariaOrientation","panTargetNode","roundToStepSize","pdomMapPDOMValue","pdomMapValue","pdomRepeatEqualValueText","pdomCreateAriaValueText","pdomCreateContextResponseAlert","contextResponsePerValueChangeDelay","contextResponseMaxDelay","pdomDependencies","voicingOnEndResponseOptions"],uM=(i,e)=>{const t=zu("AccessibleValueHandler",KV,class extends ys(i){constructor(...s){const r=s[e];s[e]=Ne()({tagName:hM,inputType:"range"},r),super(...s),this._startInput=ie.noop,this._onInput=ie.noop,this._endInput=ie.noop,this._constrainValue=ie.identity,this._pdomMapValue=ie.identity,this._panTargetNode=null,this._ariaOrientation=Ot.HORIZONTAL,this._shiftKey=!1,this._pdomDependencies=[],this._oldValue=null,this._pdomCreateContextResponseAlert=null,this._contextResponseUtterance=new Sn,this._timesValueTextChangedBeforeAlerting=0,this._contextResponsePerValueChangeDelay=700,this._contextResponseMaxDelay=1500,this._pdomInputHandled=!1,this._blockInput=!1,this._roundToStepSize=!1,this._rangeKeysDown={},this._pdomMapPDOMValue=ie.identity,this._pdomCreateAriaValueText=PK,this._dependenciesMultilink=null,this._pdomRepeatEqualValueText=!0,this._timesChangedBeforeAlerting=0,this._voicingOnEndResponseOptions=TK,this._pdomPointer=null,TS(this,["inputValue","setPDOMAttribute"]);const a=r.valueProperty,o=r.enabledRangeProperty;r.reverseAlternativeInput?this._valueProperty=new Ob(new Mt(a),{bidirectional:!0,map:c=>o.value.max-c,inverseMap:c=>o.value.max-c}):this._valueProperty=a,this._enabledRangeProperty=o,this._pdomValueTextUpdateListener=this.invalidateAriaValueText.bind(this),this.keyboardStep=(o.get().max-o.get().min)/20,this.shiftKeyboardStep=(o.get().max-o.get().min)/100,this.pageKeyboardStep=(o.get().max-o.get().min)/10,this._valueOnStart=a.value,this.invalidatePDOMDependencies();const l=this.invalidateEnabledRange.bind(this);this._enabledRangeProperty.link(l);const h=this.invalidateValueProperty.bind(this);this._valueProperty.link(h),this._pdomPointerListener={interrupt:()=>{this._interruptAccessibleValueHandler(null)},cancel:()=>{this._interruptAccessibleValueHandler(null)}},this._disposeAccessibleValueHandler=()=>{this._enabledRangeProperty.unlink(l),this._valueProperty.unlink(h),r.reverseAlternativeInput&&this._valueProperty.dispose(),this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._panTargetNode=null,this._pdomDependencies=[]}}set startInput(s){this._startInput=s}get startInput(){return this._startInput}set onInput(s){this._onInput=s}get onInput(){return this._onInput}set endInput(s){this._endInput=s}get endInput(){return this._endInput}set constrainValue(s){this._constrainValue=s}get constrainValue(){return this._constrainValue}set panTargetNode(s){this._panTargetNode=s}get panTargetNode(){return this._panTargetNode}set roundToStepSize(s){this._roundToStepSize=s}get roundToStepSize(){return this._roundToStepSize}set pdomMapPDOMValue(s){this._pdomMapPDOMValue=s,this.invalidateEnabledRange(this._enabledRangeProperty.value),this.invalidateValueProperty(),this.invalidateAriaValueText()}get pdomMapPDOMValue(){return this._pdomMapPDOMValue}set pdomMapValue(s){this._pdomMapValue=s}get pdomMapValue(){return this._pdomMapValue}set pdomRepeatEqualValueText(s){this._pdomRepeatEqualValueText=s,this.invalidateAriaValueText()}get pdomRepeatEqualValueText(){return this._pdomRepeatEqualValueText}set pdomCreateAriaValueText(s){this._pdomCreateAriaValueText=s,this.invalidateAriaValueText()}get pdomCreateAriaValueText(){return this._pdomCreateAriaValueText}set pdomCreateContextResponseAlert(s){this._pdomCreateContextResponseAlert=s}get pdomCreateContextResponseAlert(){return this._pdomCreateContextResponseAlert}set contextResponsePerValueChangeDelay(s){this._contextResponsePerValueChangeDelay=s}get contextResponsePerValueChangeDelay(){return this._contextResponsePerValueChangeDelay}set contextResponseMaxDelay(s){this._contextResponseMaxDelay=s}get contextResponseMaxDelay(){return this._contextResponseMaxDelay}set voicingOnEndResponseOptions(s){this._voicingOnEndResponseOptions=s}get voicingOnEndResponseOptions(){return this._voicingOnEndResponseOptions}invalidateAriaValueText(){this._updateAriaValueText(this._oldValue),this._oldValue=this._valueProperty.value}invalidateEnabledRange(s){const r=this._getMappedValue(s.min),a=this._getMappedValue(s.max);this.setPDOMAttribute("min",r),this.setPDOMAttribute("max",a),this._updateSiblingStepAttribute()}invalidateValueProperty(){const s=this._getMappedValue();this.setPDOMAttribute("aria-valuenow",s),this.inputValue=s}invalidatePDOMDependencies(){this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._dependenciesMultilink=Cn.multilinkAny(this._pdomDependencies.concat([this._valueProperty]),this._pdomValueTextUpdateListener)}setPDOMDependencies(s){this._pdomDependencies=s,this.invalidatePDOMDependencies()}getPDOMDependencies(){return this._pdomDependencies}set pdomDependencies(s){this.setPDOMDependencies(s)}get pdomDependencies(){return this.getPDOMDependencies()}_updateAriaValueText(s){const r=this._getMappedValue(),a=this._pdomCreateAriaValueText(r,this._valueProperty.value,s);let o=Ti.unwrapStringProperty(a);const l=" ";this._pdomRepeatEqualValueText&&this.ariaValueText&&o===this.ariaValueText.replace(new RegExp(l,"g"),"")&&(o=this.ariaValueText+l),this.ariaValueText=o}alertContextResponse(){let s=!1;if(this._pdomCreateContextResponseAlert){const r=this._getMappedValue(),a=this._pdomCreateContextResponseAlert(r,this._valueProperty.value,this._valueOnStart);a&&(this._contextResponseUtterance.alert=a,this.forEachUtteranceQueue(o=>{s||(o.hasUtterance(this._contextResponseUtterance)?(s=!0,this._timesChangedBeforeAlerting++):this._timesChangedBeforeAlerting=1),this._contextResponseUtterance.alertStableDelay=Math.min(this._contextResponseMaxDelay,this._timesChangedBeforeAlerting*this._contextResponsePerValueChangeDelay),o.addToBack(this._contextResponseUtterance)}))}}reset(){this._pdomCreateAriaValueText.reset&&this._pdomCreateAriaValueText.reset(),this._pdomCreateContextResponseAlert&&this._pdomCreateContextResponseAlert.reset&&this._pdomCreateContextResponseAlert.reset(),this._timesChangedBeforeAlerting=0,this._updateAriaValueText(null)}_getMappedValue(s=this._valueProperty.value){return this._pdomMapPDOMValue(s)}getAccessibleValueHandlerInputListener(){return{keydown:this.handleKeyDown.bind(this),keyup:this.handleKeyUp.bind(this),input:this.handleInput.bind(this),change:this.handleChange.bind(this),blur:this.handleBlur.bind(this),interrupt:this.handleInterrupt.bind(this)}}handleKeyDown(s){const r=s.domEvent,a=Qe.getEventCode(r);if(a&&(this._shiftKey=r.shiftKey,Qe.isKeyEvent(r,Qe.KEY_TAB)&&(this._blockInput=!0),this.enabledProperty.get())){const o=Zy(a);if(ps.isRangeKey(o)&&(r.preventDefault(),!r.metaKey)){s.pointer.reserveForKeyboardDrag();let l=!0;this._anyKeysDown()||this._onInteractionStart(s),this._rangeKeysDown[a]=!0;let h=this._valueProperty.get();if(ir.anyHaveKeyStroke([ps.HOME_HOTKEY_DATA,ps.END_HOTKEY_DATA],o))ps.END_HOTKEY_DATA.hasKeyStroke(o)?h=this._enabledRangeProperty.get().max:ps.HOME_HOTKEY_DATA.hasKeyStroke(o)&&(h=this._enabledRangeProperty.get().min);else{let v;ir.anyHaveKeyStroke([ps.PAGE_DOWN_HOTKEY_DATA,ps.PAGE_UP_HOTKEY_DATA],o)?(v=this.pageKeyboardStep,ps.PAGE_UP_HOTKEY_DATA.hasKeyStroke(o)?h=this._valueProperty.get()+v:ps.PAGE_DOWN_HOTKEY_DATA.hasKeyStroke(o)&&(h=this._valueProperty.get()-v)):ir.anyHaveKeyStroke([ps.LEFT_ARROW_HOTKEY_DATA,ps.RIGHT_ARROW_HOTKEY_DATA,ps.UP_ARROW_HOTKEY_DATA,ps.DOWN_ARROW_HOTKEY_DATA],o)&&(v=r.shiftKey?this.shiftKeyboardStep:this.keyboardStep,l=!r.shiftKey,ir.anyHaveKeyStroke([ps.UP_ARROW_HOTKEY_DATA,ps.RIGHT_ARROW_HOTKEY_DATA],o)?h=this._valueProperty.get()+v:ir.anyHaveKeyStroke([ps.DOWN_ARROW_HOTKEY_DATA,ps.LEFT_ARROW_HOTKEY_DATA],o)&&(h=this._valueProperty.get()-v),this._roundToStepSize&&(h=YV(h,this._valueProperty.get(),v)))}const c=this._pdomMapValue(h,this._valueProperty.get());let f=c;l&&(f=this._constrainValue(c)),this._valueProperty.set(Xn(f,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max)),this._onInput(s,this._valueOnStart);const g=this._panTargetNode||this;al.initialized&&al.listener.panToNode(g,!0,g.limitPanDirection)}}}handleKeyUp(s){const r=Qe.getEventCode(s.domEvent),a=Zy(r);this._allKeysUp()||(ps.SHIFT_HOTKEY_DATA.hasKeyStroke(a)&&(this._shiftKey=!1),this.enabledProperty.get()&&ps.isRangeKey(a)&&(this._rangeKeysDown[r]=!1,this._allKeysUp()&&this._onInteractionEnd(s)))}handleChange(s){this._pdomInputHandled||this.handleInput(s),this._pdomInputHandled=!1}handleInput(s){if(this.enabledProperty.get()&&!this._blockInput){this._pdomInputHandled=!0;let r=this._valueProperty.get();const a=parseFloat(s.domEvent.target.value),o=this._shiftKey?this.shiftKeyboardStep:this.keyboardStep,l=this._getMappedValue();this._onInteractionStart(s),a>l?r=this._valueProperty.get()+o:a<l&&(r=this._valueProperty.get()-o),this._roundToStepSize&&(r=YV(r,this._valueProperty.get(),o)),r=Xn(r,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max),this._valueProperty.set(this._constrainValue(this._pdomMapValue(r,this._valueProperty.get()))),this._onInput(s,this._valueOnStart),this._onInteractionEnd(s)}this._blockInput=!1}_interruptAccessibleValueHandler(s){this._anyKeysDown()&&this._onInteractionEnd(s),this._shiftKey=!1,this._blockInput=!1,this._rangeKeysDown={}}handleInterrupt(){this._interruptAccessibleValueHandler(null)}handleBlur(s){this._interruptAccessibleValueHandler(s)}_onInteractionStart(s){this._pdomPointer=s.pointer,this._pdomPointer.addInputListener(this._pdomPointerListener,!0),this._valueOnStart=this._valueProperty.value,this._startInput(s)}_onInteractionEnd(s){this._pdomPointer&&(this.alertContextResponse(),this.voicingOnEndResponse(this._valueOnStart),this._endInput(s),this._pdomPointer.removeInputListener(this._pdomPointerListener),this._pdomPointer=null)}setKeyboardStep(s){this._keyboardStep=s}set keyboardStep(s){this.setKeyboardStep(s)}get keyboardStep(){return this.getKeyboardStep()}getKeyboardStep(){return this._keyboardStep}setShiftKeyboardStep(s){this._shiftKeyboardStep=s}set shiftKeyboardStep(s){this.setShiftKeyboardStep(s)}get shiftKeyboardStep(){return this.getShiftKeyboardStep()}getShiftKeyboardStep(){return this._shiftKeyboardStep}getShiftKeyDown(){return this._shiftKey}get shiftKeyDown(){return this.getShiftKeyDown()}setPageKeyboardStep(s){this._pageKeyboardStep=s}set pageKeyboardStep(s){this.setPageKeyboardStep(s)}get pageKeyboardStep(){return this.getPageKeyboardStep()}getPageKeyboardStep(){return this._pageKeyboardStep}setAriaOrientation(s){this._ariaOrientation=s,this.setPDOMAttribute("aria-orientation",s.ariaOrientation)}set ariaOrientation(s){this.setAriaOrientation(s)}get ariaOrientation(){return this._ariaOrientation}getAriaOrientation(){return this._ariaOrientation}_allKeysUp(){return ie.every(this._rangeKeysDown,s=>!s)}_anyKeysDown(){return!!ie.find(this._rangeKeysDown,s=>s)}_updateSiblingStepAttribute(){let s="any";if(Zn.mobileSafari){const r=Math.min(this.keyboardStep,this.shiftKeyboardStep,this.pageKeyboardStep);s=Math.pow(10,-lM(r));const a=this._getMappedValue(this._enabledRangeProperty.get().min),o=this._getMappedValue(this._enabledRangeProperty.get().max),l=o-a;s/l<1e-5&&(s=o/100,s=Number(s.toPrecision(8)))}this.setPDOMAttribute("step",s)}voicingOnEndResponse(s,r){const a=Ut({},this._voicingOnEndResponseOptions,r),o=s!==this._valueProperty.value,l=this._valueProperty.value===this._enabledRangeProperty.value.min||this._valueProperty.value===this._enabledRangeProperty.value.max,h=!!(a.withNameResponse&&this.voicingNameResponse)||!!(a.withObjectResponse&&this.voicingObjectResponse);(!a.onlyOnValueChange||l||o)&&h&&this.voicingSpeakFullResponse({nameResponse:a.withNameResponse?this.voicingNameResponse:null,objectResponse:a.withObjectResponse?this.voicingObjectResponse:null,hintResponse:null})}dispose(){this._disposeAccessibleValueHandler(),super.dispose()}});return t.prototype._mutatorKeys=KV.concat(t.prototype._mutatorKeys),t},YV=function(i,e,t){let n=i;return t!==0&&(n=ws(n/t)*t,n=xK(n,e,t)),n},xK=function(i,e,t){let n=i;const s=Math.abs(i-e),r=s>t,a=jL(s,t,1e-14);return r&&!a&&(n+=i>e?-t:t),n};uM.DEFAULT_TAG_NAME=hM;const jV=["startDrag","drag","endDrag"],EK=(i,e)=>{const t=zu("AccessibleSlider",jV,class extends uM(i,e){constructor(...s){s[e],super(...s),this._startDrag=ie.noop,this._drag=ie.noop,this._endDrag=ie.noop,TS(this,["addInputListener","removeInputListener"]);const r=this.getAccessibleValueHandlerInputListener();this.addInputListener(r),this._disposeAccessibleSlider=()=>{this.removeInputListener(r)}}set startDrag(s){this._startDrag=s,this.startInput=s}get startDrag(){return this._startDrag}set drag(s){this._drag=s,this.onInput=s}get drag(){return this._drag}set endDrag(s){this._endDrag=s,this.endInput=s}get endDrag(){return this._endDrag}dispose(){this._disposeAccessibleSlider(),super.dispose()}});return t.prototype._mutatorKeys=jV.concat(t.prototype._mutatorKeys),t};class VK{constructor(e,t,n,s,r=!1){this.a1=e,this.a2=t,this.b1=n,this.b2=s,this.clamp=r}evaluate(e){return XV(this.a1,this.a2,this.b1,this.b2,e,this.clamp)}inverse(e){return XV(this.b1,this.b2,this.a1,this.a2,e,this.clamp)}}const XV=(i,e,t,n,s,r)=>{let a=Or(i,e,t,n,s);if(r){const o=Math.max(t,n),l=Math.min(t,n);a=Xn(a,l,o)}return a},Mv=new fa(new qi(0,1));class kK extends nh(Ge){constructor(e,t,n,s){super(),this.rangeProperty=n instanceof qi?new oi(n):n;const r=Ne()({size:new ji(100,5),startDrag:ie.noop,drag:ie.noop,endDrag:ie.noop,constrainValue:ie.identity,enabledRangeProperty:this.rangeProperty,soundGenerator:Mv,valueChangeSoundGeneratorOptions:{},voicingOnEndResponse:ie.noop,leftVisualOverflow:0,rightVisualOverflow:0,tandem:R.REQUIRED,tandemNameSuffix:"TrackNode"},s);r.soundGenerator===Mv?r.soundGenerator=new fa(this.rangeProperty.value,r.valueChangeSoundGeneratorOptions||{}):r.soundGenerator===null&&(r.soundGenerator=fa.NO_SOUND),this.leftVisualOverflow=r.leftVisualOverflow,this.rightVisualOverflow=r.rightVisualOverflow,this.minimumSize=r.size,this.minimumWidth=this.minimumSize.width,this.internalWidthProperty=new Dt([this.localPreferredWidthProperty],l=>(l===null?this.minimumSize.width:Math.max(this.minimumSize.width,l))-r.leftVisualOverflow-r.rightVisualOverflow),this.sizeProperty=new Dt([this.internalWidthProperty],l=>new ji(l,this.minimumSize.height)),this.valueToPositionProperty=new Dt([this.rangeProperty,this.internalWidthProperty],(l,h)=>new VK(l.min,l.max,0,h,!0));const a=(l,h)=>{const c=e.value,g=h.subtrailTo(this).getTransform().inversePosition2(l.pointer.point).x,v=this.valueToPositionProperty.value.inverse(g),A=r.enabledRangeProperty.value.constrainValue(v),P=r.constrainValue(A);e.set(P),l.type==="down"&&r.soundGenerator.playSoundIfThresholdReached(P,c)};this.addChild(t);let o=e.value;this.dragListener=new vd({tandem:r.tandem.createTandem("dragListener"),start:(l,h)=>{r.startDrag(l),o=e.value,a(l,h.pressedTrail)},drag:(l,h)=>{r.drag(l),a(l,h.pressedTrail)},end:l=>{r.endDrag(l),r.voicingOnEndResponse(o)}}),t.addInputListener(this.dragListener),this.mutate(r),this.disposeSliderTrack=()=>{t.removeInputListener(this.dragListener),this.dragListener.dispose()}}dispose(){this.disposeSliderTrack(),super.dispose()}}class CK extends kK{constructor(e,t,n){const s=Ne()({fillEnabled:"white",fillDisabled:"gray",stroke:"black",lineWidth:1,cornerRadius:0},n),r=new xt({fill:s.fillDisabled,stroke:s.stroke,lineWidth:s.lineWidth,cornerRadius:s.cornerRadius,cursor:"default",pickable:!1}),a=new xt({fill:s.fillEnabled,stroke:s.stroke,lineWidth:s.lineWidth,cornerRadius:s.cornerRadius}),o=new Ge({children:[r,a]});super(e,o,t,Ut({leftVisualOverflow:s.stroke!==null?s.lineWidth/2:0,rightVisualOverflow:s.stroke!==null?s.lineWidth/2:0},s));const l=Cn.multilink([s.enabledRangeProperty,this.valueToPositionProperty,this.sizeProperty],(h,c,f)=>{const g=c.evaluate(h.min),v=c.evaluate(h.max);r.setRect(0,0,f.width,f.height),a.setRect(g,0,v-g,f.height)});this.disposeDefaultSliderTrack=()=>{l.dispose()}}dispose(){this.disposeDefaultSliderTrack(),super.dispose()}}const DK="rgb( 50, 145, 184 )",IK="rgb( 71, 207, 255 )";class LK extends xt{constructor(e){const t=Ne()({size:new ji(22,45),fillHighlighted:IK,centerLineStroke:"white",fill:DK,stroke:"black",lineWidth:1,tandem:R.REQUIRED,tandemNameSuffix:"ThumbNode"},e);t.cornerRadius===void 0&&(t.cornerRadius=.25*t.size.width),t.cachedPaints=[t.fill,t.fillHighlighted],super(0,0,t.size.width,t.size.height,t);const n=xt.bounds(this.bounds.dilated(5),{fill:"transparent",localBounds:this.bounds,pickable:!1});this.addChild(n);const s=3;this.addChild(new bi(zt.lineSegment(t.size.width/2,s,t.size.width/2,t.size.height-s),{stroke:t.centerLineStroke}));const r=new Fa({attach:!1,tandem:R.OPT_OUT});r.isHighlightedProperty.link(a=>{this.fill=a?t.fillHighlighted:t.fill}),this.addInputListener(r)}}const Pu={VALUE_NAMED_PLACEHOLDER:"{{value}}",VALUE_NUMBERED_PLACEHOLDER:"{0}",SLIDER_VERTICAL_ROTATION:-Math.PI/2};class MK{constructor(e,t,n,s,r,a,o,l,h){this.parent=e,this.value=t,this.label=n,this.labelXProperty=new Dt([h.valueToPositionProperty],g=>g.evaluate(t)),this.tickNode=new Ge,e.addChild(this.tickNode);const c=o.setTickInitialPoint(h.bounds,s),f=new bi(new zt().moveTo(c.x,c.y).lineTo(0,c.y-s),{stroke:r,lineWidth:a});this.labelXProperty.link(g=>{f.x=g}),this.tickNode.addChild(f),n&&(this.labelContainer=new Ge({pickable:!1}),this.tickNode.addChild(this.labelContainer),this.labelContainer.addChild(n),l===Ot.VERTICAL&&(this.labelContainer.rotation=-Pu.SLIDER_VERTICAL_ROTATION),this.labelManualConstraint=Vo.create(this.tickNode,[f,this.labelContainer],(g,v)=>{o.positionLabel(v,g.bounds)}))}dispose(){this.parent.removeChild(this.tickNode),this.labelContainer&&this.labelContainer.dispose(),this.labelXProperty.dispose(),this.labelManualConstraint&&this.labelManualConstraint.dispose()}}const OK=new ji(100,5),NK=new ji(17,34);class ul extends md(EK(Ge,0)){constructor(e,t,n){const s=Ne()({orientation:Ot.HORIZONTAL,trackNode:null,trackSize:null,trackFillEnabled:"white",trackFillDisabled:"gray",trackStroke:"black",trackLineWidth:1,trackCornerRadius:0,trackPickable:!0,thumbNode:null,thumbSize:null,thumbFill:"rgb(50,145,184)",thumbFillHighlighted:"rgb(71,207,255)",thumbStroke:"black",thumbLineWidth:1,thumbCenterLineStroke:"white",thumbTouchAreaXDilation:11,thumbTouchAreaYDilation:11,thumbMouseAreaXDilation:0,thumbMouseAreaYDilation:0,thumbYOffset:0,tickLabelSpacing:6,positionLabel:(x,Z)=>{x.centerX=Z.centerX,x.bottom=Z.top-s.tickLabelSpacing},majorTickLength:25,majorTickStroke:"black",majorTickLineWidth:1,minorTickLength:10,minorTickStroke:"black",minorTickLineWidth:1,setTickInitialPoint:(x,Z)=>new Oe(0,x.top),cursor:"pointer",startDrag:ie.noop,drag:ie.noop,endDrag:ie.noop,constrainValue:ie.identity,disabledOpacity:Ha.DISABLED_OPACITY,soundGenerator:Mv,valueChangeSoundGeneratorOptions:{},phetioLinkedProperty:null,tandem:R.REQUIRED,tandemNameSuffix:"Slider",phetioType:ul.SliderIO,phetioFeatured:!0,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},n),r=t instanceof qi?new oi(t):t;if(s.soundGenerator===Mv?s.soundGenerator=new fa(r.value,s.valueChangeSoundGeneratorOptions||{}):s.soundGenerator===null&&(s.soundGenerator=fa.NO_SOUND),s.soundGenerator!==fa.NO_SOUND){let x=e.value;const Z=s.drag;s.drag=de=>{de.isFromPDOM()?s.soundGenerator.playSoundForValueChange(e.value,x):s.soundGenerator.playSoundIfThresholdReached(e.value,x),Z(de),x=e.value}}s.orientation===Ot.VERTICAL&&(s.trackSize&&(s.trackSize=s.trackSize.swapped()),s.thumbSize&&(s.thumbSize=s.thumbSize.swapped()),UV(s,"thumbTouchAreaXDilation","thumbTouchAreaYDilation"),UV(s,"thumbMouseAreaXDilation","thumbMouseAreaYDilation")),s.trackSize=s.trackSize||OK,s.thumbSize=s.thumbSize||NK;const a=s.tandem.createTandem(ul.THUMB_NODE_TANDEM_NAME);R.VALIDATION&&s.thumbNode;const o=s.thumbNode||new LK({size:s.thumbSize,fill:s.thumbFill,fillHighlighted:s.thumbFillHighlighted,stroke:s.thumbStroke,lineWidth:s.thumbLineWidth,centerLineStroke:s.thumbCenterLineStroke,tandem:a}),l=!s.enabledRangeProperty,h=ie.pick(s,Ge.REQUIRES_BOUNDS_OPTION_KEYS),c=Ut({ariaOrientation:s.orientation,valueProperty:e,panTargetNode:o,enabledRangeProperty:s.enabledRangeProperty||(t instanceof qi?new Mt(t,{valueType:qi,isValidValue:x=>x.min>=t.min&&x.max<=t.max,tandem:s.tandem.createTandem("enabledRangeProperty"),valueComparisonStrategy:"equalsFunction",phetioValueType:qi.RangeIO,phetioDocumentation:"Sliders support two ranges: the outer range which specifies the min and max of the track and the enabledRangeProperty, which determines how low and high the thumb can be dragged within the track."}):t)},s);super(c),this.ticks=xf(),this.proposedValue=null,this.orientation=c.orientation,this.enabledRangeProperty=c.enabledRangeProperty,this.tickOptions=ie.pick(s,"tickLabelSpacing","majorTickLength","majorTickStroke","majorTickLineWidth","minorTickLength","minorTickStroke","minorTickLineWidth","setTickInitialPoint","positionLabel");const f=[];this.majorTicksParent=new Ge,this.minorTicksParent=new Ge,f.push(this.majorTicksParent),f.push(this.minorTicksParent);const g=s.tandem.createTandem(ul.TRACK_NODE_TANDEM_NAME);R.VALIDATION&&s.trackNode;const v=new Ge;f.push(v),this.track=s.trackNode||new CK(e,t,{size:c.trackSize,fillEnabled:c.trackFillEnabled,fillDisabled:c.trackFillDisabled,stroke:c.trackStroke,lineWidth:c.trackLineWidth,cornerRadius:c.trackCornerRadius,startDrag:c.startDrag,drag:c.drag,endDrag:c.endDrag,constrainValue:c.constrainValue,enabledRangeProperty:this.enabledRangeProperty,soundGenerator:s.soundGenerator,pickable:c.trackPickable,voicingOnEndResponse:this.voicingOnEndResponse.bind(this),tandem:g}),f.push(this.track),o.setCenterY(this.track.centerY+s.thumbYOffset),f.push(o);const A=new Ge({children:f});s.orientation===Ot.VERTICAL&&(A.rotation=Pu.SLIDER_VERTICAL_ROTATION),this.addChild(A),!s.thumbNode&&(s.thumbTouchAreaXDilation||s.thumbTouchAreaYDilation)&&(o.touchArea=o.localBounds.dilatedXY(s.thumbTouchAreaXDilation,s.thumbTouchAreaYDilation)),!s.thumbNode&&(s.thumbMouseAreaXDilation||s.thumbMouseAreaYDilation)&&(o.mouseArea=o.localBounds.dilatedXY(s.thumbMouseAreaXDilation,s.thumbMouseAreaYDilation));let P=0,w=e.value;const T=new vd({tandem:o.tandem.createTandem("dragListener"),start:(x,Z)=>{this.enabledProperty.get()&&(w=e.value,s.startDrag(x),P=Z.pressedTrail.subtrailTo(A).getTransform().inversePosition2(x.pointer.point).x-o.centerX)},drag:(x,Z)=>{if(this.enabledProperty.get()){const $=Z.pressedTrail.subtrailTo(A).getTransform().inversePosition2(x.pointer.point).x-P;this.proposedValue=this.track.valueToPositionProperty.value.inverse($);const me=this.enabledRangeProperty.get().constrainValue(this.proposedValue);e.set(s.constrainValue(me)),s.drag(x)}},end:x=>{this.enabledProperty.get()&&(s.endDrag(x),this.voicingOnEndResponse(w)),this.proposedValue=null}});o.addInputListener(T),this.thumbDragListener=T,this.trackDragListener=this.track.dragListener;const D=Cn.multilink([e,this.track.valueToPositionProperty],(x,Z)=>{o.centerX=Z.evaluate(x)}),M=x=>{if(!e.isPhetioInstrumented()||!Yl.value)if(this.proposedValue===null)e.set(Xn(e.value,x.min,x.max));else{const Z=Xn(this.proposedValue,x.min,x.max),de=s.constrainValue(Z);e.set(de)}};this.enabledRangeProperty.link(M);const B=new RK(this,this.track,o,A,s.orientation,v,this.ticks);this.disposeSlider=()=>{B.dispose(),o.dispose&&o.dispose(),this.track.dispose&&this.track.dispose(),l?this.enabledRangeProperty.dispose():this.enabledRangeProperty.unlink(M),D.dispose(),T.dispose()},this.focusHighlight=new Jc(o);const O=s.phetioLinkedProperty||(e instanceof ks?e:null);O&&this.addLinkedElement(O,{tandemName:"valueProperty"}),!l&&this.enabledRangeProperty instanceof ks&&this.addLinkedElement(this.enabledRangeProperty,{tandemName:"enabledRangeProperty"}),this.mutate(h)}get majorTicksVisible(){return this.getMajorTicksVisible()}set majorTicksVisible(e){this.setMajorTicksVisible(e)}get minorTicksVisible(){return this.getMinorTicksVisible()}set minorTicksVisible(e){this.setMinorTicksVisible(e)}dispose(){this.disposeSlider(),this.ticks.forEach(e=>{e.dispose()}),super.dispose()}addMajorTick(e,t){this.addTick(this.majorTicksParent,e,t,this.tickOptions.majorTickLength,this.tickOptions.majorTickStroke,this.tickOptions.majorTickLineWidth)}addMinorTick(e,t){this.addTick(this.minorTicksParent,e,t,this.tickOptions.minorTickLength,this.tickOptions.minorTickStroke,this.tickOptions.minorTickLineWidth)}addTick(e,t,n,s,r,a){this.ticks.push(new MK(e,t,n,s,r,a,this.tickOptions,this.orientation,this.track))}setMajorTicksVisible(e){this.majorTicksParent.visible=e}getMajorTicksVisible(){return this.majorTicksParent.visible}setMinorTicksVisible(e){this.minorTicksParent.visible=e}getMinorTicksVisible(){return this.minorTicksParent.visible}}ul.THUMB_NODE_TANDEM_NAME="thumbNode";ul.TRACK_NODE_TANDEM_NAME="trackNode";ul.SliderIO=new ui("SliderIO",{valueType:ul,documentation:"A traditional slider component, with a knob and possibly tick marks",supertype:Ge.NodeIO});class RK extends Oo{constructor(e,t,n,s,r,a,o){super(e),this.slider=e,this.track=t,this.thumb=n,this.sliderPartsNode=s,this.orientation=r,this.trackSpacer=a,this.ticks=o,r===Ot.HORIZONTAL?(e.heightSizable=!1,this.preferredProperty=this.slider.localPreferredWidthProperty):(e.widthSizable=!1,this.preferredProperty=this.slider.localPreferredHeightProperty),this.preferredProperty.lazyLink(this._updateLayoutListener),this.track.rangeProperty.lazyLink(this._updateLayoutListener),this.thumb.localBoundsProperty.lazyLink(this._updateLayoutListener);const l=h=>{h.tickNode.localBoundsProperty.lazyLink(this._updateLayoutListener),o.addItemRemovedListener(c=>{c===h&&c.tickNode.localBoundsProperty.hasListener(this._updateLayoutListener)&&h.tickNode.localBoundsProperty.unlink(this._updateLayoutListener)})};o.addItemAddedListener(l),this.addNode(t),this.layout(),this.disposeSliderConstraint=()=>{o.removeItemAddedListener(l),this.preferredProperty.unlink(this._updateLayoutListener),this.track.rangeProperty.unlink(this._updateLayoutListener),this.thumb.localBoundsProperty.unlink(this._updateLayoutListener)}}layout(){super.layout();const e=this.slider,t=this.track,n=this.thumb;this.trackSpacer.localBounds=t.localBounds.dilatedX(n.width/2);const s=t.leftVisualOverflow+t.rightVisualOverflow,r=t.minimumWidth,a=r-s,o=g=>Or(t.rangeProperty.value.min,t.rangeProperty.value.max,0,1,g),l=-n.width/2-t.leftVisualOverflow,h=n.width/2-t.leftVisualOverflow,c=new qi(l,r+h);if(this.ticks.forEach(g=>{const v=a*o(g.value),A=g.tickNode.width/2;c.includeRange(new qi(-A,A).shifted(v))}),e.widthSizable&&this.preferredProperty.value!==null){const g=Ma.max(Ma.linear(1,h),...this.ticks.map(A=>{const P=o(A.value);return Ma.linear(P,A.tickNode.width/2-s*P)})).minus(Ma.min(Ma.constant(l),...this.ticks.map(A=>{const P=o(A.value);return Ma.linear(P,-A.tickNode.width/2-s*P)}))),v=g.withXValues([r-1,r,...g.points.map(A=>A.x).filter(A=>A>r+1e-10)]).inverted();t.preferredWidth=Math.max(r,v.evaluate(this.preferredProperty.value))}else t.preferredWidth=t.minimumWidth;const f=c.getLength();this.orientation===Ot.HORIZONTAL?e.localMinimumWidth=f:e.localMinimumHeight=f}dispose(){this.disposeSliderConstraint(),super.dispose()}}const BK={NO_VALUE:"—"},qK=new ki(20),zK=0;class hg extends Ge{constructor(e,t,n){const s=Ne()({align:"right",valuePattern:Pu.VALUE_NAMED_PLACEHOLDER,decimalPlaces:zK,numberFormatter:null,numberFormatterDependencies:[],useRichText:!1,useFullHeight:!1,textOptions:{font:qK,fill:"black",maxWidth:null,phetioReadOnly:!0},xMargin:8,yMargin:2,cornerRadius:0,backgroundFill:"white",backgroundStroke:"lightGray",backgroundLineWidth:1,backgroundLineDash:[],minBackgroundWidth:0,noValueString:BK.NO_VALUE,noValueAlign:null,noValuePattern:null,tandem:R.OPT_OUT,phetioType:hg.NumberDisplayIO},n),r=new oi(s.numberFormatter?s.numberFormatter:B=>s.decimalPlaces===null?`${B}`:pd(B,s.decimalPlaces));s.noValueAlign||(s.noValueAlign=s.align);const a=B=>B.includes(Pu.VALUE_NUMBERED_PLACEHOLDER)?Gn.format(B,Pu.VALUE_NAMED_PLACEHOLDER):B,o=typeof s.valuePattern=="string"?new oi(a(s.valuePattern)):new Dt([s.valuePattern],a);s.noValuePattern||(s.noValuePattern=new Dt([o],B=>B));const l=typeof s.noValuePattern=="string"?new oi(s.noValuePattern):s.noValuePattern,h=Dt.deriveAny([r,...s.numberFormatterDependencies],()=>xA(t.min,s.noValueString,r.value)),c=Dt.deriveAny([r,...s.numberFormatterDependencies],()=>xA(t.max,s.noValueString,r.value)),f=new Dt([o,h,c],(B,O,x)=>Gn.fillIn(B,{value:O.length>x.length?O:x})),g=s.useRichText?pi:kt,v=s.textOptions.tandem||s.tandem.createTandem("valueText"),A=Dt.deriveAny([e,l,o,r,...s.numberFormatterDependencies],()=>{const B=e.value,O=l.value,x=o.value,Z=r.value,de=B===null&&O?O:x,$=xA(B,s.noValueString,Z);return Gn.fillIn(de,{value:$})},{phetioFeatured:!0,phetioValueType:xi,tandemNameSuffix:"StringProperty",tandem:v.createTandem(kt.STRING_PROPERTY_TANDEM_NAME)}),P=Ut({tandem:v},s.textOptions,{maxWidth:null}),w=new g(A,P),T=w.height,D=new xt({cornerRadius:s.cornerRadius,fill:s.backgroundFill,stroke:s.backgroundStroke,lineWidth:s.backgroundLineWidth,lineDash:s.backgroundLineDash});f.link(B=>{const O=new g(B,ie.omit(P,"tandem"));w.maxWidth=s.textOptions.maxWidth!==null?s.textOptions.maxWidth:O.width!==0?O.width:null,O.maxWidth=w.maxWidth,D.rectWidth=Math.max(s.minBackgroundWidth,O.width+2*s.xMargin),D.rectHeight=(s.useFullHeight?T:O.height)+2*s.yMargin});const M=new Ge({children:[w]});s.children=[D,M],super(),this.numberFormatterProperty=r,this.valueText=w,this.backgroundNode=D,this.valueStringProperty=A,Vo.create(this,[M,D],(B,O)=>{const x=e.value===null?s.noValueAlign:s.align,Z=O.centerY;x==="center"?B.center=new Oe(O.centerX,Z):x==="left"?B.leftCenter=new Oe(O.left+s.xMargin,Z):B.rightCenter=new Oe(O.right-s.xMargin,Z)}),this.mutate(s),this.disposeNumberDisplay=()=>{A.dispose(),o.dispose()}}dispose(){this.disposeNumberDisplay(),super.dispose()}setNumberFont(e){this.valueText.font=e}set numberFont(e){this.setNumberFont(e)}setNumberFill(e){this.valueText.fill=e}set numberFill(e){this.setNumberFill(e)}setBackgroundFill(e){this.backgroundNode.fill=e}set backgroundFill(e){this.setBackgroundFill(e)}get backgroundFill(){return this.getBackgroundFill()}getBackgroundFill(){return this.backgroundNode.fill}setBackgroundStroke(e){this.backgroundNode.stroke=e}set backgroundStroke(e){this.setBackgroundStroke(e)}getBackgroundWidth(){return this.backgroundNode.getRectWidth()}setBackgroundWidth(e){this.backgroundNode.setRectWidth(e)}get backgroundWidth(){return this.getBackgroundWidth()}set backgroundWidth(e){this.setBackgroundWidth(e)}}hg.NumberDisplayIO=new ui("NumberDisplayIO",{valueType:hg,supertype:Ge.NodeIO,documentation:"A numeric readout with a background"});const xA=(i,e,t)=>{let n=e;return i!==null&&(n=t(i)),n},FK=["startDrag","endDrag","leftStart","leftEnd","rightStart","rightEnd"],QV=new fa(new qi(0,1)),JV=new ji(180,3),ZV=new ji(17,34);class Bl extends nh(Ge){constructor(e,t,n,s){HK(s||{});const r=Ne()({numberDisplayOptions:{},sliderOptions:{},arrowButtonOptions:{},titleNodeOptions:{},useRichText:!1,startCallback:ie.noop,endCallback:ie.noop,delta:1,disabledOpacity:.5,layoutFunction:Bl.createLayoutFunction1(),includeArrowButtons:!0,soundGenerator:QV,valueChangeSoundGeneratorOptions:{},tandem:R.REQUIRED,tandemNameSuffix:"Control",phetioType:Bl.NumberControlIO,phetioEnabledPropertyInstrumented:!0,visiblePropertyOptions:{phetioFeatured:!0}},s);super();const a=r.arrowButtonOptions&&r.arrowButtonOptions.hasOwnProperty("scale"),o=()=>h.enabledRangeProperty?h.enabledRangeProperty.value:n,l=T=>{const D=Su(T,h.delta);return o().constrainValue(D)};if(r.soundGenerator===QV){let T=r.valueChangeSoundGeneratorOptions;ie.isEmpty(r.valueChangeSoundGeneratorOptions)&&(T={interThresholdDelta:r.delta,constrainValue:l}),r.soundGenerator=new fa(n,T)}else r.soundGenerator===null&&(r.soundGenerator=fa.NO_SOUND);const h=Ut({arrowButtonOptions:{touchAreaXDilation:3.5,touchAreaYDilation:7,mouseAreaXDilation:0,mouseAreaYDilation:0,enabledEpsilon:0,leftStart:r.startCallback,leftEnd:r.endCallback,rightStart:r.startCallback,rightEnd:r.endCallback,enabledPropertyOptions:{phetioReadOnly:!0,phetioFeatured:!1}},sliderOptions:{orientation:Ot.HORIZONTAL,startDrag:r.startCallback,endDrag:r.endCallback,majorTickLength:20,minorTickStroke:"rgba( 0, 0, 0, 0.3 )",majorTicks:[],minorTickSpacing:0,constrainValue:l,soundGenerator:r.soundGenerator,tandem:r.tandem.createTandem(Bl.SLIDER_TANDEM_NAME)},numberDisplayOptions:{textOptions:{font:new ki(12),stringPropertyOptions:{phetioFeatured:!0}},tandem:r.tandem.createTandem("numberDisplay"),visiblePropertyOptions:{phetioFeatured:!0}},titleNodeOptions:{font:new ki(12),maxWidth:null,fill:"black",tandem:r.tandem.createTandem("titleText")}},r);h.enabledRangeProperty&&(h.sliderOptions.enabledRangeProperty=h.enabledRangeProperty),h.arrowButtonOptions.tagName=null,this.groupFocusHighlight=h.includeArrowButtons;const c=e instanceof Ge?e:h.useRichText?new pi(e,h.titleNodeOptions):new kt(e,h.titleNodeOptions),f=new hg(t,n,h.numberDisplayOptions);h.sliderOptions.trackNode||(h.sliderOptions=Ut({trackSize:h.sliderOptions.orientation===Ot.HORIZONTAL?JV:JV.swapped()},h.sliderOptions)),h.sliderOptions.thumbNode||(h.sliderOptions=Ut({thumbSize:h.sliderOptions.orientation===Ot.HORIZONTAL?ZV:ZV.swapped(),thumbTouchAreaXDilation:6},h.sliderOptions)),h.sliderOptions=Ut({shiftKeyboardStep:h.delta,pdomCreateAriaValueText:()=>f.valueStringProperty.value,phetioType:ul.SliderIO},h.sliderOptions),h.sliderOptions.thumbFill&&!h.sliderOptions.thumbFillHighlighted&&(this.thumbFillProperty=new Rs(h.sliderOptions.thumbFill),h.sliderOptions.thumbFillHighlighted=new Dt([this.thumbFillProperty],T=>T.brighterColor())),this.slider=new ul(t,n,h.sliderOptions),Dr.forwardAccessibleName(this,this.slider),Dr.forwardHelpText(this,this.slider);let g=null,v=null,A=null;if(h.includeArrowButtons){const T=h.arrowButtonOptions.touchAreaXDilation,D=h.arrowButtonOptions.mouseAreaXDilation;if(g=new HV("left",()=>{const M=t.get();let B=t.get()-h.delta;B=Su(B,h.delta),B=Math.max(B,o().min),t.set(B),h.soundGenerator.playSoundForValueChange(B,M),this.slider.voicingOnEndResponse(M)},Ut({soundPlayer:Mc,startCallback:h.arrowButtonOptions.leftStart,endCallback:h.arrowButtonOptions.leftEnd,tandem:h.tandem.createTandem("decrementButton"),touchAreaXShift:-T,mouseAreaXShift:-D},h.arrowButtonOptions)),v=new HV("right",()=>{const M=t.get();let B=t.get()+h.delta;B=Su(B,h.delta),B=Math.min(B,o().max),t.set(B),h.soundGenerator.playSoundForValueChange(B,M),this.slider.voicingOnEndResponse(M)},Ut({soundPlayer:Mc,startCallback:h.arrowButtonOptions.rightStart,endCallback:h.arrowButtonOptions.rightEnd,tandem:h.tandem.createTandem("incrementButton"),touchAreaXShift:T,mouseAreaXShift:D},h.arrowButtonOptions)),!a){g.setScaleMagnitude(1);const B=f.localBounds.height/g.height;g.setScaleMagnitude(B),v.setScaleMagnitude(B)}A=()=>{const M=t.value;g.enabled=M-h.arrowButtonOptions.enabledEpsilon>o().min&&!this.slider.isFocused(),v.enabled=M+h.arrowButtonOptions.enabledEpsilon<o().max&&!this.slider.isFocused()},t.lazyLink(A),h.enabledRangeProperty&&h.enabledRangeProperty.lazyLink(A),A(),this.slider.addInputListener({focus:()=>{g.enabled=!1,v.enabled=!1},blur:()=>A()})}const P=h.sliderOptions.majorTicks;for(let T=0;T<P.length;T++)this.slider.addMajorTick(P[T].value,P[T].label);if(h.sliderOptions.minorTickSpacing>0)for(let T=n.min;T<=n.max;)ie.find(P,D=>D.value===T)||this.slider.addMinorTick(T),T+=h.sliderOptions.minorTickSpacing;const w=h.layoutFunction(c,f,this.slider,g,v);if(this.widthSizable=qh(w),Fc(w)){const T=M=>{this.localMinimumWidth=M};w.minimumWidthProperty.link(T);const D=M=>{w.preferredWidth=M};this.localPreferredWidthProperty.link(D),this.disposeEmitter.addListener(()=>{w.minimumWidthProperty.unlink(T),this.localPreferredWidthProperty.unlink(D)})}h.children=[w],this.mutate(h),this.numberDisplay=f,this.disposeNumberControl=()=>{c.dispose(),f.dispose(),this.slider.dispose(),this.thumbFillProperty&&this.thumbFillProperty.dispose(),g&&g.dispose(),v&&v.dispose(),A&&t.unlink(A),A&&h.enabledRangeProperty&&h.enabledRangeProperty.unlink(A)}}dispose(){this.disposeNumberControl(),super.dispose()}static withMinMaxTicks(e,t,n,s){const r=Ne()({tickLabelFont:new ki(12)},s);return r.sliderOptions=Ut({majorTicks:[{value:n.min,label:new kt(n.min,{font:r.tickLabelFont})},{value:n.max,label:new kt(n.max,{font:r.tickLabelFont})}]},r.sliderOptions),new Bl(e,t,n,r)}static createLayoutFunction1(e){const t=Ne()({align:"center",titleXSpacing:5,arrowButtonsXSpacing:15,ySpacing:5},e);return(n,s,r,a,o)=>(r.mutateLayoutOptions({grow:1}),new Ai({align:t.align,spacing:t.ySpacing,children:[new _i({spacing:t.titleXSpacing,children:[n,s]}),new _i({layoutOptions:{stretch:!0},spacing:t.arrowButtonsXSpacing,children:[a,r,o]})]}))}static createLayoutFunction2(e){const t=Ne()({align:"center",xSpacing:5,ySpacing:5},e);return(n,s,r,a,o)=>(r.mutateLayoutOptions({stretch:!0}),new Ai({align:t.align,spacing:t.ySpacing,children:[new _i({spacing:t.xSpacing,children:[n,a,s,o]}),r]}))}static createLayoutFunction3(e){const t=Ne()({alignTitle:"center",alignNumber:"center",titleLeftIndent:0,xSpacing:5,ySpacing:5},e);return(n,s,r,a,o)=>{r.mutateLayoutOptions({stretch:!0});const l=new Ai({spacing:t.ySpacing,align:t.alignTitle,children:[new jl(n,{leftMargin:t.titleLeftIndent}),new Ai({layoutOptions:{stretch:!0},spacing:t.ySpacing,align:t.alignNumber,children:[new _i({spacing:t.xSpacing,children:[a,s,o]}),r]})]});return n.boundsProperty.lazyLink(()=>{l.updateLayout()}),l}}static createLayoutFunction4(e){const t=Ne()({sliderPadding:0,verticalSpacing:5,arrowButtonSpacing:5,numberDisplayParentNodeOptions:{excludeInvisibleChildrenFromBounds:!0},layoutInvisibleButtons:!1,createBottomContent:null},e);return(n,s,r,a,o)=>{r.mutateLayoutOptions({grow:1});const l=!!a,h=new _i({spacing:t.arrowButtonSpacing,children:l?[a,r,o]:[r],excludeInvisibleChildrenFromBounds:!t.layoutInvisibleButtons}),c=t.createBottomContent?t.createBottomContent(h):h;return c.mutateLayoutOptions({stretch:!0,xMargin:t.sliderPadding}),new Ai({spacing:t.verticalSpacing,children:[new _i({spacing:t.sliderPadding,children:[n,new Ge(Ut({children:[s]},t.numberDisplayParentNodeOptions))],layoutOptions:{stretch:!0}}),c]})}}}Bl.NumberControlIO=new ui("NumberControlIO",{valueType:Bl,documentation:"A number control with a title, slider and +/- buttons",supertype:Ge.NodeIO});Bl.SLIDER_TANDEM_NAME="slider";function HK(i){i.startCallback||i.endCallback,i.arrowButtonOptions&&$V(i.arrowButtonOptions),i.sliderOptions&&$V(i.sliderOptions)}function $V(i){const e=Object.keys(i);return FK.filter(n=>ie.includes(e,n)).length>0}class cM extends n_{constructor(e,t,n,s){super(e,[{value:!0,createNode:()=>t},{value:!1,createNode:()=>n}],s)}}class dM extends E6{constructor(e){super([e.isOverOrFocusedProperty,e.looksPressedProperty],(t,n)=>t&&!n?Jn.OVER:n?Jn.PRESSED:Jn.IDLE,{valueType:Jn})}}class pM extends RL{constructor(e,t,n,s){const r=Ne()({tandem:R.REQUIRED},s);super(r),this.valueOff=e,this.valueOn=t,this.valueProperty=n;const a=l=>{(this.overProperty.get()||this.focusedProperty.get())&&this.enabledProperty.get()&&!this.interrupted&&(l||this.toggle())};this.downProperty.link(a),this.toggledEmitter=new kn({tandem:r.tandem.createTandem("toggledEmitter"),phetioDocumentation:"Emits when the button is toggled",phetioEventType:vi.USER});const o=()=>{this.valueProperty.value=this.valueProperty.value===this.valueOff?this.valueOn:this.valueOff};this.toggledEmitter.addListener(o),this.disposeToggleButtonModel=()=>{this.downProperty.unlink(a),this.toggledEmitter.dispose()}}dispose(){this.disposeToggleButtonModel(),super.dispose()}toggle(){this.toggledEmitter.emit(),this.produceSoundEmitter.emit()}}class UK extends c0{constructor(e,t,n,s){const r=Ne()({valueOffSoundPlayer:$n.get("toggleOff"),valueOnSoundPlayer:$n.get("toggleOn"),tandem:R.REQUIRED,phetioFeatured:!0,listenerOptions:{tandem:R.OPT_OUT}},s),a=new pM(t,n,e,r),o=new dM(a);super(a,o,r),this.addLinkedElement(e,{tandemName:"property"});const l=()=>{e.value===t?r.valueOffSoundPlayer.play():e.value===n&&r.valueOnSoundPlayer.play()};this.buttonModel.produceSoundEmitter.addListener(l),this.disposeRectangularToggleButton=()=>{this.buttonModel.produceSoundEmitter.removeListener(l),a.dispose()}}dispose(){this.disposeRectangularToggleButton(),super.dispose()}}class GK extends UK{constructor(e,t,n,s){const r=new cM(e,t,n),a=Ne()({content:r,tandem:R.REQUIRED},s);let o=null;const l=Du(t),h=Du(n);!a.accessibleName&&l&&h&&(o=new Dt([e,l,h],(c,f,g)=>c?f:g),a.accessibleName=o),super(e,!1,!0,a),this.disposeBooleanRectangularToggleButton=()=>{o&&o.dispose(),r.dispose()}}dispose(){this.disposeBooleanRectangularToggleButton(),super.dispose()}}const fM=.6,WK=(1-fM)/2;class mM extends GK{constructor(e,t){const n=Ne()({sideLength:25,stroke:"black",touchAreaXDilation:5,touchAreaYDilation:5,tandem:R.REQUIRED,tandemNameSuffix:"Button"},t);n.cornerRadius=.1*n.sideLength,n.xMargin=WK*n.sideLength,n.yMargin=n.xMargin,n.buttonAppearanceStrategy=rh.FlatAppearanceStrategy;const s=fM*n.sideLength,a={lineWidth:.15*n.sideLength,stroke:"white",centerX:n.sideLength/2,centerY:n.sideLength/2,pickable:!1},o=new zt().moveTo(s/2,0).lineTo(s/2,s).moveTo(0,s/2).lineTo(s,s/2),l=new bi(o,a),h=new zt().moveTo(-s/2,0).lineTo(s/2,0),c=new bi(h,a);super(e,c,l,n);const f=g=>{this.baseColor=g?"rgb( 255, 85, 0 )":"rgb( 0, 179, 0 )",this.setPDOMAttribute("aria-expanded",g)};e.link(f),this.disposeExpandCollapseButton=()=>{e.unlink(f)}}dispose(){this.disposeExpandCollapseButton(),super.dispose()}}class ug extends md(Ge){constructor(e,t){const n=Ne()({titleNode:null,expandedProperty:null,expandedDefaultValue:!0,resize:!0,overrideTitleNodePickable:!0,allowContentToOverlapTitle:!1,cursor:"pointer",lineWidth:1,cornerRadius:10,stroke:"black",fill:"rgb( 238, 238, 238 )",minWidth:0,titleAlignX:"center",titleAlignY:"center",titleXMargin:10,titleYMargin:2,titleXSpacing:5,showTitleWhenExpanded:!0,useExpandedBoundsWhenCollapsed:!0,useContentWidthWhenCollapsed:!0,titleBarExpandCollapse:!0,buttonAlign:"left",buttonXMargin:4,buttonYMargin:2,contentAlign:"center",contentVerticalAlign:"center",contentXMargin:15,contentYMargin:8,contentXSpacing:5,contentYSpacing:8,expandedSoundPlayer:$n.get("accordionBoxOpened"),collapsedSoundPlayer:$n.get("accordionBoxClosed"),tagName:"div",headingTagName:"h3",helpTextExpanded:null,helpTextCollapsed:null,contextResponseExpanded:null,contextResponseCollapsed:null,voicingHintResponseExpanded:null,voicingHintResponseCollapsed:null,tandem:R.REQUIRED,tandemNameSuffix:"AccordionBox",phetioType:ug.AccordionBoxIO,phetioEventType:vi.USER,visiblePropertyOptions:{phetioFeatured:!0},titleBarOptions:{fill:null,stroke:null}},t);n.expandCollapseButtonOptions=Ut({sideLength:16,cursor:n.cursor,valueOnSoundPlayer:n.expandedSoundPlayer,valueOffSoundPlayer:n.collapsedSoundPlayer,accessibleNameBehavior:ys.BASIC_ACCESSIBLE_NAME_BEHAVIOR,tandem:n.tandem.createTandem("expandCollapseButton")},n.expandCollapseButtonOptions),super(),this.expandedBoxOutline=null,this.collapsedBoxOutline=null;let s=n.titleNode;s||(s=new kt("",{tandem:n.tandem.createTandem("titleText")}),this.addDisposable(s)),n.overrideTitleNodePickable&&(s.pickable=!1),this.expandedProperty=n.expandedProperty,this.expandedProperty||(this.expandedProperty=new Qt(n.expandedDefaultValue,{tandem:n.tandem.createTandem("expandedProperty"),phetioFeatured:!0}),this.addDisposable(this.expandedProperty)),this.expandCollapseButton=new mM(this.expandedProperty,n.expandCollapseButtonOptions),this.addDisposable(this.expandCollapseButton);const r={fill:n.fill,cornerRadius:n.cornerRadius};this.expandedBox=new xt(r),this.collapsedBox=new xt(r),this.expandedTitleBar=new KK(null,Ut({lineWidth:n.lineWidth,cursor:n.cursor},n.titleBarOptions)),this.expandedBox.addChild(this.expandedTitleBar),this.collapsedTitleBar=new YK(Ut({cornerRadius:n.cornerRadius,cursor:n.cursor},n.titleBarOptions)),this.collapsedBox.addChild(this.collapsedTitleBar);const a=new Jc(n.showTitleWhenExpanded?this.expandedTitleBar:this.expandCollapseButton),o=new Jc(this.collapsedTitleBar);this.addDisposable(this.collapsedTitleBar,this.expandedTitleBar),n.titleBarExpandCollapse?this.collapsedTitleBar.addInputListener({down:()=>{this.expandCollapseButton.isEnabled()&&(this.phetioStartEvent("expanded"),this.expandedProperty.value=!0,n.expandedSoundPlayer.play(),this.phetioEndEvent())}}):(this.expandedTitleBar.interactiveHighlight="invisible",this.collapsedTitleBar.interactiveHighlight="invisible"),n.titleBarExpandCollapse&&(n.showTitleWhenExpanded?this.expandedTitleBar.addInputListener({down:()=>{this.expandCollapseButton.isEnabled()&&(this.phetioStartEvent("collapsed"),n.collapsedSoundPlayer.play(),this.expandedProperty.value=!1,this.phetioEndEvent())}}):this.expandedTitleBar.pickable=!1);const l=()=>{const P=this.expandCollapseButton.visible&&this.expandCollapseButton.pickable;this.collapsedTitleBar.pickable=P,this.expandedTitleBar.pickable=P&&n.showTitleWhenExpanded};if(this.expandCollapseButton.visibleProperty.lazyLink(l),this.expandCollapseButton.pickableProperty.lazyLink(l),this.expandCollapseButton.enabledProperty.link(P=>{const w=n.titleBarExpandCollapse&&P;this.collapsedTitleBar.cursor=w&&n.cursor||null,this.expandedTitleBar.cursor=w&&n.cursor||null}),this.expandedBox.addChild(e),n.stroke){const P={stroke:n.stroke,lineWidth:n.lineWidth,cornerRadius:n.cornerRadius,pickable:!1};this.expandedBoxOutline=new xt(P),this.expandedBox.addChild(this.expandedBoxOutline),this.collapsedBoxOutline=new xt(P),this.collapsedBox.addChild(this.collapsedBoxOutline)}const h=new Ge({excludeInvisibleChildrenFromBounds:!n.useExpandedBoundsWhenCollapsed});this.addChild(h);const c=new Ge({tagName:"div",ariaRole:"region",pdomOrder:[e],ariaLabelledbyAssociations:[{otherNode:this.expandCollapseButton,otherElementName:vn.PRIMARY_SIBLING,thisElementName:vn.PRIMARY_SIBLING}]}),f=new Ge({tagName:n.headingTagName,pdomOrder:[this.expandCollapseButton]}),g=new Ge({tagName:"p"}),v=new Ge({children:[f,g,c],pdomOrder:[f,g,s,c]});this.addChild(v),Dr.forwardAccessibleName(this,this.expandCollapseButton),this.accessibleHelpTextBehavior=(P,w,T,D)=>(D.push(()=>{g.innerContent=T}),w),!n.accessibleName&&n.titleNode&&(this.accessibleName=Du(n.titleNode)),this.constraint=new jK(this,e,h,this.expandedBox,this.collapsedBox,this.expandedTitleBar,this.collapsedTitleBar,this.expandedBoxOutline,this.collapsedBoxOutline,s,this.expandCollapseButton,n),this.constraint.updateLayout(),this.constraint.enabled=n.resize;const A=()=>{const P=this.expandedProperty.value;this.expandedBox.visible=P,this.collapsedBox.visible=!P,c.visible=P,this.expandCollapseButton.setFocusHighlight(P?a:o),this.expandedTitleBar.interactiveHighlightEnabled=P&&n.showTitleWhenExpanded,s.visible=P&&n.showTitleWhenExpanded||!P,v.setPDOMAttribute("aria-hidden",!P),this.accessibleHelpText=P?n.helpTextExpanded:n.helpTextCollapsed,this.expandCollapseButton.voicingHintResponse=P?n.voicingHintResponseExpanded:n.voicingHintResponseCollapsed;const w=P?n.contextResponseExpanded:n.contextResponseCollapsed;this.expandCollapseButton.voicingSpeakFullResponse({contextResponse:Sn.alertableToText(w),hintResponse:null}),this.addAccessibleResponse(w)};this.expandedProperty.link(A,{disposer:this}),this.mutate(ie.omit(n,"cursor")),this.resetAccordionBox=()=>{n.expandedProperty||this.expandedProperty.reset()}}getCollapsedBoxHeight(){return this.constraint.lastCollapsedBoxHeight}getExpandedBoxHeight(){return this.constraint.lastExpandedBoxHeight}reset(){this.resetAccordionBox()}}ug.AccordionBoxIO=new ui("AccordionBoxIO",{valueType:ug,supertype:Ge.NodeIO,events:["expanded","collapsed"]});class KK extends Df(bi){}class YK extends Df(xt){}class jK extends Oo{constructor(e,t,n,s,r,a,o,l,h,c,f,g){super(e),this.accordionBox=e,this.contentNode=t,this.containerNode=n,this.expandedBox=s,this.collapsedBox=r,this.expandedTitleBar=a,this.collapsedTitleBar=o,this.expandedBoxOutline=l,this.collapsedBoxOutline=h,this.titleNode=c,this.expandCollapseButton=f,this.options=g,this.lastCollapsedBoxHeight=null,this.lastExpandedBoxHeight=null,this.accordionBox.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.accordionBox.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.accordionBox.expandedProperty.lazyLink(this._updateLayoutListener),this.addNode(t),this.addNode(c)}layout(){super.layout();const e=this.options;if(this.accordionBox.isChildIncludedInLayout(this.contentNode))this.containerNode.children=[this.expandedBox,this.collapsedBox,this.titleNode,this.expandCollapseButton];else{this.containerNode.children=[];return}const t=this.accordionBox.expandedProperty.value,n=t||e.useExpandedBoundsWhenCollapsed,s=e.stroke===null?0:e.lineWidth,r=this.createLayoutProxy(this.contentNode),a=this.createLayoutProxy(this.titleNode),o=r.minimumWidth,l=r.minimumHeight,h=a.minimumWidth,c=Math.max(this.expandCollapseButton.height+2*e.buttonYMargin,this.titleNode.height+2*e.titleYMargin),f=e.showTitleWhenExpanded?Math.max((e.allowContentToOverlapTitle?e.contentYMargin:c+e.contentYSpacing)+l+e.contentYMargin,c):Math.max(this.expandCollapseButton.height+2*e.buttonYMargin,l+2*e.contentYMargin);let g=Math.max(e.minWidth,e.buttonXMargin+this.expandCollapseButton.width+e.titleXSpacing+h+e.titleXMargin);e.titleAlignX==="center"&&(g=Math.max(g,(e.buttonXMargin+this.expandCollapseButton.width+e.titleXSpacing)*2+h),g=Math.max(g,e.titleXMargin*2+h));const v=!t&&!e.useContentWidthWhenCollapsed;v?g=Math.max(g,this.expandCollapseButton.width+e.titleXSpacing+h+e.titleXMargin):e.showTitleWhenExpanded?g=Math.max(g,o+2*e.contentXMargin):g=Math.max(g,this.expandCollapseButton.width+o+e.buttonXMargin+e.contentXMargin+e.contentXSpacing);const A=g+s,P=(n?f:c)+s,w=Math.max(A,this.accordionBox.localPreferredWidth||0),T=Math.max(P,this.accordionBox.localPreferredHeight||0),D=w-s,M=T-s;this.lastCollapsedBoxHeight=c,n&&(this.lastExpandedBoxHeight=M),this.collapsedBox.rectWidth=D,this.collapsedBox.rectHeight=c;const B=this.collapsedBox.selfBounds;if(this.collapsedTitleBar.rectWidth=D,this.collapsedTitleBar.rectHeight=c,this.collapsedBoxOutline&&(this.collapsedBoxOutline.rectWidth=D,this.collapsedBoxOutline.rectHeight=c),n){this.expandedBox.rectWidth=D,this.expandedBox.rectHeight=M;const Z=this.expandedBox.selfBounds;this.expandedBoxOutline&&(this.expandedBoxOutline.rectWidth=D,this.expandedBoxOutline.rectHeight=M),this.expandedTitleBar.shape=zt.roundedRectangleWithRadii(0,0,D,c,{topLeft:e.cornerRadius,topRight:e.cornerRadius});let de=Z.left+e.contentXMargin,$=Z.right-e.contentXMargin;e.showTitleWhenExpanded||(e.buttonAlign==="left"?de+=this.expandCollapseButton.width+e.contentXSpacing:$-=this.expandCollapseButton.width+e.contentXSpacing);const me=$-de,ue=M-(e.showTitleWhenExpanded&&!e.allowContentToOverlapTitle?c+e.contentYMargin+e.contentYSpacing:2*e.contentYMargin);qh(this.contentNode)&&this.accordionBox.localPreferredWidth!==null&&(this.contentNode.preferredWidth=me),Ym(this.contentNode)&&this.accordionBox.localPreferredHeight!==null&&(this.contentNode.preferredHeight=ue),e.contentVerticalAlign==="top"?this.contentNode.top=Z.bottom-e.contentYMargin-ue:e.contentVerticalAlign==="bottom"?this.contentNode.bottom=Z.bottom-e.contentYMargin:this.contentNode.centerY=Z.bottom-e.contentYMargin-ue/2,e.contentAlign==="left"?this.contentNode.left=de:e.contentAlign==="right"?this.contentNode.right=$:this.contentNode.centerX=(de+$)/2}let O=B.left+e.titleXMargin,x=B.right-e.titleXMargin;e.buttonAlign==="left"?(this.expandCollapseButton.left=B.left+e.buttonXMargin,O=this.expandCollapseButton.right+e.titleXSpacing):(this.expandCollapseButton.right=B.right-e.buttonXMargin,x=this.expandCollapseButton.left-e.titleXSpacing),qh(this.titleNode)&&(this.titleNode.preferredWidth=x-O),e.titleAlignX==="left"?this.titleNode.left=O:e.titleAlignX==="right"?this.titleNode.right=x:v?this.titleNode.left=O:this.titleNode.centerX=B.centerX,e.titleAlignY==="top"?(this.expandCollapseButton.top=this.collapsedBox.top+Math.max(e.buttonYMargin,e.titleYMargin),this.titleNode.top=this.expandCollapseButton.top):(this.expandCollapseButton.centerY=this.collapsedBox.centerY,this.titleNode.centerY=this.expandCollapseButton.centerY),r.dispose(),a.dispose(),this.accordionBox.localMinimumWidth=A,this.accordionBox.localMinimumHeight=P}dispose(){this.accordionBox.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.accordionBox.localPreferredHeightProperty.unlink(this._updateLayoutListener),this.accordionBox.expandedProperty.unlink(this._updateLayoutListener),super.dispose()}}const XK=(i,e)=>i.size===e.size&&ie.every([...i],t=>e.has(t));class ek extends oi{constructor(e){super(new Set),this.node=e,this.listenedNodeSet=new Set,this.updateEmitter=new un,this.valueComparisonStrategy=XK,this._nodeUpdateListener=this.update.bind(this),this.addNodeListener(e),this.update()}update(){const e=new Set;(function t(n){n.parents.forEach(r=>{e.add(r),t(r)})})(this.node),e.forEach(t=>{this.listenedNodeSet.has(t)||this.addNodeListener(t)}),this.listenedNodeSet.forEach(t=>{!e.has(t)&&t!==this.node&&this.removeNodeListener(t)}),this.value=e,this.updateEmitter.emit()}addNodeListener(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._nodeUpdateListener),e.parentRemovedEmitter.addListener(this._nodeUpdateListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._nodeUpdateListener),e.parentRemovedEmitter.removeListener(this._nodeUpdateListener)}dispose(){this.listenedNodeSet.forEach(e=>this.removeNodeListener(e)),this.updateEmitter.dispose(),super.dispose()}}class QK extends oi{constructor(e,t,n){const s=Ne()({fromCoordinateFrame:"local",toCoordinateFrame:"local"},n);super(It.IDENTITY),this.from=e,this.to=t,this.rootNode=null,this.fromTrail=null,this.toTrail=null,this.listenedNodeSet=new Set,this.fromCoordinateFrame=s.fromCoordinateFrame,this.toCoordinateFrame=s.toCoordinateFrame,this.valueComparisonStrategy="equalsFunction",this.fromAncestorsProperty=new ek(e),this.toAncestorsProperty=new ek(t);const r=this.update.bind(this);this._nodeTransformListener=this.updateMatrix.bind(this),this.fromAncestorsProperty.updateEmitter.addListener(r),this.toAncestorsProperty.updateEmitter.addListener(r),this.update()}update(){const e=[...this.fromAncestorsProperty.value,this.from],t=[...this.toAncestorsProperty.value,this.to],n=e.filter(o=>t.includes(o));let s=!1;const r=n.filter(o=>{const l=e.filter(T=>o.hasChild(T)),h=t.filter(T=>o.hasChild(T)),c=[],f=[];Cc(l,h,c,f,[]);const v=l.length>1||h.length>1,A=c.length||f.length;v&&A&&(s=!0);const P=c.length>0||this.from===o,w=f.length>0||this.to===o;return P&&w});!s&&r.length===1?(this.rootNode=r[0],this.fromTrail=this.from.getUniqueTrailTo(this.rootNode),this.toTrail=this.to.getUniqueTrailTo(this.rootNode)):(this.rootNode=null,this.fromTrail=null,this.toTrail=null);const a=new Set;this.fromTrail&&this.fromTrail.nodes.forEach(o=>a.add(o)),this.toTrail&&this.toTrail.nodes.forEach(o=>a.add(o)),a.forEach(o=>{this.listenedNodeSet.has(o)||this.addNodeListener(o)}),this.listenedNodeSet.forEach(o=>{!a.has(o)&&o!==this.from&&o!==this.to&&this.removeNodeListener(o)}),this.updateMatrix()}updateMatrix(){if(this.rootNode&&this.fromTrail&&this.toTrail){const e=this.fromTrail.nodes.length===1,t=this.toTrail.nodes.length===1,n=e&&this.fromCoordinateFrame==="parent"||t&&this.toCoordinateFrame==="parent",s=this.fromTrail.getMatrixConcatenation(n?0:1,this.fromTrail.nodes.length-(this.fromCoordinateFrame==="parent"?1:0)),r=this.toTrail.getMatrixConcatenation(n?0:1,this.toTrail.nodes.length-(this.toCoordinateFrame==="parent"?1:0));this.value=r.inverted().timesMatrix(s)}else this.value=null}addNodeListener(e){this.listenedNodeSet.add(e),e.transformEmitter.addListener(this._nodeTransformListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.transformEmitter.removeListener(this._nodeTransformListener)}dispose(){this.fromAncestorsProperty.dispose(),this.toAncestorsProperty.dispose(),this.listenedNodeSet.forEach(e=>{e.transformEmitter.hasListener(this._nodeTransformListener)&&e.transformEmitter.removeListener(this._nodeTransformListener)}),super.dispose()}}const gM={mutateNode(i,e){e?i.setPDOMAttribute("aria-haspopup",e):i.removePDOMAttribute("aria-haspopup"),i.positionInPDOM=!!e}},yM="data:audio/mpeg;base64,//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAFAAAE5AAzMzMzMzMzMzMzMzMzMzMzMzMzZmZmZmZmZmZmZmZmZmZmZmZmZmaZmZmZmZmZmZmZmZmZmZmZmZmZmczMzMzMzMzMzMzMzMzMzMzMzMzM//////////////////////////8AAAA5TEFNRTMuOTlyAaUAAAAAAAAAABRAJAZmQgAAQAAABOTGvClKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjxrv+ggLoZGTXh9oJQAa222FG3ASABBG51MY/j4AAB4AYI3/H3//Pqd/zv0Jp/8//zn3n6Mmf/J7f//8jf+fOeeggHA4RXkGh8XEwHAMHD4udyCYuhAALhgJqWJAEDGMYxvHlyAHxc9P76dP//T/Rm//p+v9tvb0Tzr1XyfnelP/3b0//5vo86Mlm0dHQrscccRQg5oSYpziaiB52oQCkxnR6LQisRCEMhluyeqEhIiWMiSvQjhwDTCtCPyDkNrP+UsBTNwVsJGSD/+1LEFoAQMWtluYaQEWGP7H+wYAR9IvpDLBawV8OWbG5oShmbiVnh8GAU6ZIjnetMKuOcpmaSndX80HuS7puaIKq/6lvM36lIJf8+Zm6CFA0t3fV/91IOhPJ1GCH13q//5o6DJl9/F3ErtwAGRlJ26tx4H5gV4lzzrIqy8jTNBZl1Hep3doI2/x6AMOljV5/M4clzeagOVs4SmnmZk2fTyahylhxZ1R7/1HlnhEe4KgF3SISoKnviYs9T8sp4Ku5ICsAAg3RwNdct5GVqea2W4P/7UsQHgAuZRzrtmE8JO4qkaa4M4MXAzUcoyYPSsZe/D4w5DUicEmE/ziQka1VaLTh0y8+qp/UtRMpQoli5jYCz6St//RjTOrPXlI/KJaZ2RHX6mMrJqxfqVjPM/K/thi6pyAAPlyOxkEr9tPgR2ldNwBRI0383ZJR5NmIAG2zBZOw1tKaJR6jzjIxgTlVLjBgJmawwRo8JXAUYCz1gr/q+aVWur8tO+j4iUe////6ii3UCwZHQhxd93nYdy9H1MjPwThY/VGgQQLo200aOkCDF//tSxA+CCwg1HK3lIQHXlCPo97AIw8D44EBOcB8oGBIND4gcCBc+IFHC7wwUOA+oMiAaH1PDCw+mxbydxPV3/zjbCnci8p/9nIJTQYSH5vktZIAEdHIA5HkiS4k11MYsCUFS8QSbEVhJUnQlFpKIJNQhJJrBKEZ8kiKoJIkqToSj5KJJ6hiCTXCUJUZJEl45Ek9TCUfQkkyuSSbzS72V1mVruLnhMeBUsHREPDQiPA0VOiJwdKuBlR5Fqtbk3f///t8FdSogAuxJp2uAWhIWFmv/+1LEBgPGHADHoIhgIAAANIAAAATcLVLFRWKCwsLCyxUVFVf6xVmLCws1YqKior////2RVn/+LCwtTEFNRTMuOTkuM1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",JK=bs(gt,yM),ZK=_n.createLock(yM),Up=new _s;let tk=!1;const Ov=()=>{tk||(ZK(),tk=!0)},$K=i=>{Up.audioBufferProperty.value===null&&(Up.audioBufferProperty.set(i),Ov())},eY=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Up.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Ov()},ik=gt.decodeAudioData(JK.buffer,$K,eY);ik&&ik.then(i=>{Up.audioBufferProperty.value===null&&(Up.audioBufferProperty.set(i),Ov())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Ov()});class tY{constructor(){this._basisSoundClip=null,this.soundPlayers=[]}getSoundClipInstance(){return this._basisSoundClip||(this._basisSoundClip=new Jb(Up,{initialOutputLevel:.7,rateChangesAffectPlayingSounds:!1}),io.addSoundGenerator(this._basisSoundClip,{categoryName:"user-interface"})),this._basisSoundClip}getSelectionSoundPlayer(e){if(!this.soundPlayers[e]){const t=Math.pow(2,-e/12);this.soundPlayers[e]=new iY(this.getSoundClipInstance(),t)}return this.soundPlayers[e]}}class iY{constructor(e,t){this.soundPlayer=e,this.playbackRate=t}play(){this.soundPlayer.setPlaybackRate(this.playbackRate),this.soundPlayer.play()}stop(){this.soundPlayer.stop()}}const GS=new tY,J2={};let nk=0;function nY(i){i._parents.forEach(e=>vM(e,i,1))}function sY(i){i._parents.forEach(e=>vM(e,i,-1))}function sk(i){const e=J2[i];this.parents[0].childrenChangedEmitter.removeListener(e),delete J2[i]}function vM(i,e,t){let s=i.indexOfChild(e)+t;for(;s>0&&s<i.children.length&&!i.children[s].visible;)s+=t;s>=0&&s<i.children.length&&i.moveChildToIndex(e,s),i.onIndexedNodeIOChildMoved&&i.onIndexedNodeIOChildMoved(e)}const bM=new ui("IndexedNodeIO",{valueType:Ge,documentation:"Node that can be moved forward/back by index, which specifies z-order and/or layout order",supertype:Ge.NodeIO,toStateObject:i=>{const e={index:null};return i.parents[0]&&(e.index=i.parents[0].indexOfChild(i)),e},applyState:(i,e)=>{const t=i.parents[0];if(t&&e.index){const n=t.children,s=t.indexOfChild(i);n[s]=n[e.index],n[e.index]=i,t.setChildren(n)}},stateSchema:{index:fi(Ii)},methods:{linkIndex:{returnType:Ii,parameterTypes:[pp(rr,[Ii])],documentation:"Following the PropertyIO.link pattern, subscribe for notifications when the index in the parent changes, and receive a callback with the current value.  The return value is a numeric ID for use with clearLinkIndex.",implementation:function(i){const e=()=>{const n=this.parents[0].indexOfChild(this);i(n)};this.parents[0].childrenChangedEmitter.addListener(e),e();const t=nk;return J2[t]=e,nk++,t}},unlinkIndex:{returnType:rr,parameterTypes:[Ii],documentation:"Unlink a listener that has been added using linkIndex, by its numerical ID (like setTimeout/clearTimeout)",implementation:sk},clearLinkIndex:{returnType:rr,parameterTypes:[Ii],documentation:'Deprecated, see "unlinkIndex".',implementation:function(i){sk.call(this,i)}},moveForward:{returnType:rr,parameterTypes:[],implementation:function(){return nY(this)},documentation:"Move this Node one index forward in each of its parents, skipping invisible Nodes. If the Node is already at the front, this is a no-op."},moveBackward:{returnType:rr,parameterTypes:[],implementation:function(){return sY(this)},documentation:"Move this Node one index backward in each of its parents, skipping invisible Nodes. If the Node is already at the back, this is a no-op."}}});class rY extends ys(Ge){constructor(e,t,n,s,r){const a=Ne()({cursor:"pointer",align:"left",xMargin:6,highlightFill:"rgb( 245, 245, 245 )",highlightCornerRadius:4,tagName:"li",focusable:!0,ariaRole:"option",positionInPDOM:!0,voicingFocusListener:()=>this.comboBoxListItemNodeVoicingFocusListener(),comboBoxVoicingNameResponsePattern:Pu.VALUE_NAMED_PLACEHOLDER,tandem:R.REQUIRED,tandemNameSuffix:"Item",phetioType:bM,phetioState:!0,visiblePropertyOptions:{phetioFeatured:!0}},r);a.comboBoxVoicingNameResponsePattern=a.comboBoxVoicingNameResponsePattern.get?a.comboBoxVoicingNameResponsePattern.get():a.comboBoxVoicingNameResponsePattern,a.innerContent=e.accessibleName||null,a.voicingObjectResponse=e.accessibleName||null;const o=typeof a.comboBoxVoicingNameResponsePattern=="string"?new Mt(a.comboBoxVoicingNameResponsePattern):a.comboBoxVoicingNameResponsePattern,l=new _a(o,{value:e.accessibleName},{tandem:R.OPT_OUT});a.voicingNameResponse=l;const h=new xt({cornerRadius:a.highlightCornerRadius}),c=new Ge({children:[t]}),f=A=>{h.rectWidth=A,c.maxWidth=A};n.link(f);const g=A=>{h.rectHeight=A,c.maxHeight=A};s.link(g),a.children=[h,c],super(a),this._supplyOpenResponseOnNextFocus=!1,Vo.create(this,[h,c],(A,P)=>{a.align==="left"?P.left=A.left+a.xMargin:a.align==="right"?P.right=A.right-a.xMargin:P.centerX=A.centerX,P.centerY=A.centerY}),this.item=e,this.localBoundsProperty.link(A=>{this.focusHighlight=zt.bounds(A)});const v=new Fa({attach:!1,tandem:R.OPT_OUT});this.addInputListener(v),v.isOverOrFocusedProperty.link(A=>{h.fill=A?a.highlightFill:null}),this.disposeComboBoxListItemNode=()=>{v.dispose(),l.dispose(),n.unlink(f),s.unlink(g)}}supplyOpenResponseOnNextFocus(){this._supplyOpenResponseOnNextFocus=!0}dispose(){this.disposeComboBoxListItemNode(),super.dispose()}comboBoxListItemNodeVoicingFocusListener(){this.voicingSpeakFullResponse({nameResponse:this._supplyOpenResponseOnNextFocus?this.voicingNameResponse:null,objectResponse:this._supplyOpenResponseOnNextFocus?null:this.voicingObjectResponse,contextResponse:null,hintResponse:this._supplyOpenResponseOnNextFocus?this.voicingHintResponse:null}),this._supplyOpenResponseOnNextFocus=!1}}class Gp extends nl{constructor(e,t,n,s,r,a,o,l){const h=Ne()({highlightFill:"rgb( 245, 245, 245 )",comboBoxListItemNodeOptions:{},xMargin:12,yMargin:8,backgroundPickable:!0,tagName:"ul",ariaRole:"listbox",groupFocusHighlight:!0,openedSoundPlayer:$n.get("generalOpen"),closedNoChangeSoundPlayer:$n.get("generalClose"),visiblePropertyOptions:{phetioReadOnly:!0}},l),c=new Zi(O=>{const x=O.currentTarget;this.selectionOnFireAction=x;const Z=e.value;r(),e.value=this.selectionOnFireAction.item.value,s(),this.voiceOnNewSelection(e.value,Z,x),O.abort()},{parameters:[{phetioPrivate:!0,valueType:Lo}],tandem:o.createTandem("fireAction"),phetioEventType:vi.USER}),f={up(O){c.execute(O)},keyup:O=>{O.domEvent&&Qe.isAnyKeyEvent(O.domEvent,[Qe.KEY_ENTER,Qe.KEY_SPACE])&&c.execute(O)},click:O=>{c.execute(O)}},g=Gp.getMaxItemWidthProperty(n),v=Gp.getMaxItemHeightProperty(n),A=new Dt([g],O=>O+h.xMargin),P=new Dt([v],O=>O+h.yMargin),w=[];t.forEach((O,x)=>{const Z=new rY(O,n[x],A,P,Ut({align:h.align,highlightFill:h.highlightFill,highlightCornerRadius:h.cornerRadius,xMargin:.5*h.xMargin,tandem:O.tandemName?o.createTandem(O.tandemName):R.OPTIONAL},h.comboBoxListItemNodeOptions,O.comboBoxListItemNodeOptions));w.push(Z),Z.addInputListener(f)});const T=new Ai({spacing:0,excludeInvisibleChildrenFromBounds:!0,children:w});super(T,Ut({},h,{xMargin:h.xMargin/2,yMargin:h.yMargin/2})),this.content=T,this.voiceOnSelectionNode=a,this.selectionOnFireAction=this.getListItemNode(e.value);const D=t.map(O=>GS.getSelectionSoundPlayer(t.indexOf(O)));let M;this.visibleProperty.lazyLink(O=>{if(O)h.openedSoundPlayer.play(),M=this.getListItemNode(e.value);else if(M===this.selectionOnFireAction)h.closedNoChangeSoundPlayer.play();else{const x=this.selectionOnFireAction.item;if(x.soundPlayer)x.soundPlayer.play();else{const Z=this.getVisibleListItemNodes().indexOf(this.selectionOnFireAction);Z!==-1&&D[Z].play()}}});const B=new Xl({keys:["escape","tab","shift+tab","arrowUp","arrowDown","home","end"],fire:(O,x)=>{const Z=this.getVisibleListItemNodes();if(x==="escape"||x==="tab"||x==="shift+tab")s(),r();else if(x==="arrowUp"||x==="arrowDown"){O.preventDefault();const $=x==="arrowDown"?1:-1,ue=Z.indexOf(this.getFocusedItemNode())+$;Z[ue]&&Z[ue].focus()}else x==="home"?Z[0].focus():x==="end"&&Z[Z.length-1].focus()}});this.addInputListener(B),this.disposeComboBoxListBox=()=>{for(let O=0;O<w.length;O++)w[O].dispose();this.removeInputListener(B),B.dispose(),c.dispose(),g.dispose(),v.dispose()}}dispose(){this.disposeComboBoxListBox(),super.dispose()}setItemVisible(e,t){this.getListItemNode(e).visible=t}isItemVisible(e){return this.getListItemNode(e).visible}getAllListItemNodes(){return this.content.children}getVisibleListItemNodes(){return this.getAllListItemNodes().filter(e=>e.visible)}getListItemNode(e){return ie.find(this.getAllListItemNodes(),n=>n.item.value===e)}getFocusedItemNode(){return ie.find(this.getAllListItemNodes(),t=>t.focused)}focusListItemNode(e){let t=this.getListItemNode(e);t.visible||(t=ie.find(this.getAllListItemNodes(),n=>n.visible)),t&&(t.supplyOpenResponseOnNextFocus(),t.focus())}voiceOnNewSelection(e,t,n){const s={nameResponse:n.voicingNameResponse,objectResponse:null,contextResponse:n.voicingContextResponse,hintResponse:null};t===e&&(s.contextResponse=null),this.voiceOnSelectionNode.voicingSpeakResponse(s)}static getMaxItemWidthProperty(e){const t=ie.flatten(e.map(n=>{const s=[n.boundsProperty];return Fc(n)&&(s.push(n.isWidthResizableProperty),s.push(n.minimumWidthProperty)),s}));return Dt.deriveAny(t,()=>Math.max(...e.map(n=>qh(n)?n.minimumWidth||0:n.width)))}static getMaxItemHeightProperty(e){const t=e.map(n=>n.boundsProperty);return Dt.deriveAny(t,()=>Math.max(...e.map(n=>n.height)))}}const aY=(i,e,t)=>(e.labelContent=t,e);class _M extends Lf{constructor(e,t,n,s){const r=Ne()({align:"left",arrowDirection:"down",arrowFill:"black",comboBoxVoicingNameResponsePattern:Pu.VALUE_NAMED_PLACEHOLDER,cursor:"pointer",baseColor:"white",buttonAppearanceStrategy:rh.FlatAppearanceStrategy,xMargin:12,yMargin:8,stroke:"black",lineWidth:1,soundPlayer:Mc,phetioEnabledPropertyInstrumented:!1,phetioVisiblePropertyInstrumented:!1,localPreferredWidthProperty:new oi(null),localMinimumWidthProperty:new oi(null),containerTagName:"div",labelTagName:"p",accessibleNameBehavior:aY},s),a=r.xMargin,o=r.yMargin,l=Gp.getMaxItemWidthProperty(n),h=Gp.getMaxItemHeightProperty(n),c=new bi(null,{fill:r.arrowFill}),f=ie.find(t,M=>M.value===e.value),g=t.indexOf(f),v=new Ge({layoutOptions:{yMargin:o,grow:1,xAlign:r.align},children:[n[g]]}),A=new Fh(0,0,0,0,{stroke:"black",lineWidth:r.lineWidth});r.content=new Mf({rows:[[v,A,c]]}),Cn.multilink([l,h],(M,B)=>{const O=B+2*o,x=O,Z=.35*x,de=2*Z*Math.sqrt(3)/3,$=a,me=a-r.lineWidth/2,ue=-r.lineWidth/2,Se=(Te,Re,We)=>Te==="up"?new zt().moveTo(0,We).lineTo(Re/2,0).lineTo(Re,We).close():new zt().moveTo(0,0).lineTo(Re,0).lineTo(Re/2,We).close();c.shape=Se(r.arrowDirection,de,Z),c.mutateLayoutOptions({minContentWidth:x,minContentHeight:x}),v.mutateLayoutOptions({minContentWidth:M,minContentHeight:B,leftMargin:$,rightMargin:me}),A.y2=O,A.mutateLayoutOptions({rightMargin:ue})}),r.xMargin=0,r.yMargin=0,super(r),this.minimumWidthProperty.link(M=>{r.localMinimumWidthProperty.value=M});const P=M=>{this.preferredWidth=M};r.localPreferredWidthProperty.link(P),this._blockNextVoicingFocusListener=!1,this.voicingFocusListener=()=>{!this._blockNextVoicingFocusListener&&this.defaultFocusListener(),this._blockNextVoicingFocusListener=!1};let w=null;const T=new Dt([e],M=>ie.find(t,O=>O.value===M));new Dt([T],M=>n[t.indexOf(M)]).link(M=>{v.removeAllChildren(),v.addChild(M)}),T.link(M=>{this.innerContent=M.accessibleName||null;const B=typeof r.comboBoxVoicingNameResponsePattern=="string"?new Mt(r.comboBoxVoicingNameResponsePattern):r.comboBoxVoicingNameResponsePattern;w&&w.dispose(),this.voicingNameResponse=w=new _a(B,{value:M.accessibleName||""},{tandem:R.OPT_OUT})}),this.ariaLabelledbyAssociations=[{otherNode:this,otherElementName:vn.LABEL_SIBLING,thisElementName:vn.PRIMARY_SIBLING},{otherNode:this,otherElementName:vn.PRIMARY_SIBLING,thisElementName:vn.PRIMARY_SIBLING}],this.setAriaHasPopUp(!0),this.disposeComboBoxButton=()=>{l.dispose(),h.dispose(),T.dispose(),r.localPreferredWidthProperty.unlink(P),w&&w.dispose()},this.arrow=c,this.separatorLine=A}setAriaHasPopUp(e){gM.mutateNode(this,e?"listbox":!1)}setDisplayOnly(e){this.arrow.visible=!e,this.separatorLine.visible=!e,this.tagName=e?"p":"button",this.setAriaHasPopUp(!e)}blockNextVoicingFocusListener(){this._blockNextVoicingFocusListener=!0}dispose(){this.disposeComboBoxButton(),super.dispose()}}const oY=(i,e,t,n)=>(n.push(()=>{i.button.accessibleName=t}),e),lY=(i,e,t,n)=>(n.push(()=>{i.button.accessibleHelpText=t}),e);class Wp extends nh(Ge){constructor(e,t,n,s){const r=Ne()({align:"left",listPosition:"below",disabledOpacity:.5,cornerRadius:4,highlightFill:"rgb( 245, 245, 245 )",xMargin:12,yMargin:8,buttonFill:"white",buttonStroke:"black",buttonLineWidth:1,buttonTouchAreaXDilation:0,buttonTouchAreaYDilation:0,buttonMouseAreaXDilation:0,buttonMouseAreaYDilation:0,listFill:"white",listStroke:"black",listLineWidth:1,openedSoundPlayer:$n.get("generalOpen"),closedNoChangeSoundPlayer:$n.get("generalClose"),tagName:"div",buttonLabelTagName:"p",accessibleNameBehavior:oY,accessibleHelpTextBehavior:lY,comboBoxVoicingNameResponsePattern:Pu.VALUE_NAMED_PLACEHOLDER,comboBoxVoicingContextResponse:null,comboBoxVoicingHintResponse:null,tandem:R.REQUIRED,tandemNameSuffix:"ComboBox",phetioType:Wp.ComboBoxIO,phetioFeatured:!0,phetioEventType:vi.USER,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},s),a=p0(t,r.tandem.createTandem("items"));t.forEach((h,c)=>{h.accessibleName||(h.accessibleName=Du(a[c]))}),super(),this.nodes=a,this.listPosition=r.listPosition,this.button=new _M(e,t,a,{align:r.align,arrowDirection:r.listPosition==="below"?"down":"up",cornerRadius:r.cornerRadius,xMargin:r.xMargin,yMargin:r.yMargin,baseColor:r.buttonFill,stroke:r.buttonStroke,lineWidth:r.buttonLineWidth,touchAreaXDilation:r.buttonTouchAreaXDilation,touchAreaYDilation:r.buttonTouchAreaYDilation,mouseAreaXDilation:r.buttonMouseAreaXDilation,mouseAreaYDilation:r.buttonMouseAreaYDilation,localPreferredWidthProperty:this.localPreferredWidthProperty,localMinimumWidthProperty:this.localMinimumWidthProperty,comboBoxVoicingNameResponsePattern:r.comboBoxVoicingNameResponsePattern,labelTagName:r.buttonLabelTagName,tandem:r.tandem.createTandem("button")}),this.addChild(this.button),this.listBox=new Gp(e,t,a,this.hideListBox.bind(this),()=>{this.button.isFocusable()&&(this.button.blockNextVoicingFocusListener(),this.button.focus())},this.button,r.tandem.createTandem("listBox"),{align:r.align,highlightFill:r.highlightFill,xMargin:r.xMargin,yMargin:r.yMargin,cornerRadius:r.cornerRadius,fill:r.listFill,stroke:r.listStroke,lineWidth:r.listLineWidth,visible:!1,comboBoxListItemNodeOptions:{comboBoxVoicingNameResponsePattern:r.comboBoxVoicingNameResponsePattern,voicingContextResponse:r.comboBoxVoicingContextResponse,voicingHintResponse:r.comboBoxVoicingHintResponse},openedSoundPlayer:r.openedSoundPlayer,closedNoChangeSoundPlayer:r.closedNoChangeSoundPlayer,ariaLabelledbyAssociations:[{otherNode:this.button,otherElementName:vn.LABEL_SIBLING,thisElementName:vn.PRIMARY_SIBLING}]}),n.addChild(this.listBox),this.listParent=n,this.pdomOrder=[null,this.listBox];const o=new QK(this.button,this.listParent,{fromCoordinateFrame:"parent",toCoordinateFrame:"local"});Cn.multilink([o,this.button.localBoundsProperty,this.listBox.localBoundsProperty],h=>{this.scaleAndPositionListBox(h)}),this.opacityProperty.link(h=>{this.listBox.opacityProperty.value=h}),this.mutate(r),this.button.addListener(()=>{this.listBox.visibleProperty.value=!this.listBox.visibleProperty.value,this.listBox.visibleProperty.value&&this.listBox.focusListItemNode(e.value)}),this.display=null,this.clickToDismissListener={down:h=>{(!phet.chipper.isFuzzEnabled()||ol.nextDouble()<.005)&&(h.trail.containsNode(this.button)||h.trail.containsNode(this.listBox)||this.hideListBox())}},this.dismissWithFocusListener=h=>{h&&!h.trail.containsNode(this.listBox)&&this.hideListBox()},lr.link(this.dismissWithFocusListener),this.listBox.visibleProperty.link(h=>{h?(this.scaleListBox(),this.listBox.moveToFront(),this.display=this.getUniqueTrail().rootNode().getRootedDisplays()[0],this.display.addInputListener(this.clickToDismissListener)):this.display&&this.display.hasInputListener(this.clickToDismissListener)&&(this.display.removeInputListener(this.clickToDismissListener),this.display=null)}),this.displayOnlyProperty=new Qt(!1,{tandem:r.tandem.createTandem("displayOnlyProperty"),phetioFeatured:!0,phetioDocumentation:"disables interaction with the ComboBox and makes it appear like a display that shows the current selection"}),this.displayOnlyProperty.link(h=>{this.hideListBox(),this.button.setDisplayOnly(h)});const l=new Dt([this.enabledProperty,this.displayOnlyProperty],(h,c)=>h&&!c);super.setInputEnabledProperty(l),this.addLinkedElement(e,{tandemName:"property"}),this.visibleProperty.link(h=>{h||this.hideListBox()}),this.disposeComboBox=()=>{o.dispose(),this.display&&this.display.hasInputListener(this.clickToDismissListener)&&this.display.removeInputListener(this.clickToDismissListener),lr.unlink(this.dismissWithFocusListener),this.displayOnlyProperty.dispose(),this.listBox.dispose(),this.button.dispose(),a.forEach(h=>h.dispose())}}dispose(){this.disposeComboBox(),super.dispose()}showListBox(){this.listBox.visibleProperty.value=!0}hideListBox(){this.listBox.visibleProperty.value=!1}scaleListBox(){if(!this.listBox.localBounds.isEmpty()){const e=this.button.localToGlobalBounds(this.button.localBounds).width/this.button.localBounds.width,t=this.listBox.localToGlobalBounds(this.listBox.localBounds).width/this.listBox.localBounds.width;this.listBox.scale(e/t)}}scaleAndPositionListBox(e){e&&(this.scaleListBox(),this.listPosition==="above"?this.listBox.leftBottom=e.timesVector2(this.button.leftTop):this.listBox.leftTop=e.timesVector2(this.button.leftBottom))}setItemVisible(e,t){this.listBox.setItemVisible(e,t)}isItemVisible(e){return this.listBox.isItemVisible(e)}setInputEnabledProperty(e){return this}}Wp.ComboBoxIO=new ui("ComboBoxIO",{valueType:Wp,documentation:"A combo box is composed of a push button and a listbox. The listbox contains items that represent choices. Pressing the button pops up the listbox. Selecting from an item in the listbox sets the value of an associated Property. The button shows the item that is currently selected.",supertype:Ge.NodeIO,events:["listBoxShown","listBoxHidden"]});class du extends ul{constructor(e,t,n){super(e,t,Ne()({orientation:Ot.HORIZONTAL},n))}}const hY=qW,rk=zW,uY=FW,cY=HW,dY=UW,pY=GW,fY=WW,mY=KW,gY=YW,yY=jW,vY=XW,bY=QW,EA=JW,ak=ZW,_Y=$W,AY=eK,wY=tK,SY=iK,PY=nK,TY=sK,xY=rK,EY=aK,VY=oK,kY=lK,CY=hK,ok=uK,DY=cK,IY=dK,LY=pK,lk=f0,MY=fK,OY=mK,NY=gK,RY=yK,BY=vK,qY=bK,hk=_K,m0=new Map;m0.set(new qi(.5,.75),OY);m0.set(new qi(.75,1.25),NY);m0.set(new qi(1.25,1.5),RY);m0.set(new qi(1.5,2),BY);const AM=new ji(13,26),wM=new ji(100,5);class zY extends Lu{constructor(e,t){const n=Mr.availableRuntimeLocales&&Mr.supportsDynamicLocale?qY:hY,s=new kt(n,Vi.PANEL_SECTION_LABEL_OPTIONS),r=new _a(lk,{label:n,description:hk},{tandem:R.OPT_OUT}),a=new mr(hk,an({},Vi.PANEL_SECTION_CONTENT_OPTIONS,{readingBlockNameResponse:r})),o=new Co(e.voicingEnabledProperty,!1,!0,Ut({accessibleName:n},Vi.TOGGLE_SWITCH_OPTIONS)),l=new Hh({labelNode:s,descriptionNode:a,allowDescriptionStretch:!1,controlNode:o}),h=new kt(rk,Vi.PANEL_SECTION_LABEL_OPTIONS),c=new Co(e.toolbarEnabledProperty,!1,!0,Ut({accessibleName:rk,leftValueContextResponse:vY,rightValueContextResponse:bY},Vi.TOGGLE_SWITCH_OPTIONS)),f=new Hh({labelNode:h,controlNode:c}),g=new kt(EA,an({},Vi.PANEL_SECTION_LABEL_OPTIONS,{tagName:"h3",accessibleName:EA})),v=new _a(lk,{label:EA,description:ak},{tandem:R.OPT_OUT}),A=new mr(ak,an({},Vi.PANEL_SECTION_CONTENT_OPTIONS,{readingBlockNameResponse:v})),P=(We,Le,lt,st,De)=>{const et=new kt(We,Vi.PANEL_SECTION_CONTENT_OPTIONS);return new US(Le,et,{labelTagName:"label",labelContent:We,voicingNameResponse:We,voicingIgnoreVoicingManagerProperties:!0,voiceNameResponseOnSelection:!1,checkedContextResponse:lt,uncheckedContextResponse:st,tandem:R.OPT_OUT})},w=new Ge,T=[];e.supportsVoicing&&T.push(P(_Y,e.voicingObjectResponsesEnabledProperty,SY,PY),P(AY,e.voicingContextResponsesEnabledProperty,TY,xY)),T.push(P(wY,e.voicingHintResponsesEnabledProperty,EY,VY));const D=new Ai({align:"left",spacing:Vi.VERTICAL_CONTENT_SPACING,children:T});w.children=[g,A,D],A.leftTop=g.leftBottom.plusXY(0,Vi.VERTICAL_CONTENT_SPACING),D.leftTop=A.leftBottom.plusXY(Vi.CONTENT_INDENTATION_SPACING,Vi.VERTICAL_CONTENT_SPACING);const M=new FY(uY,cY,e.voiceRateProperty),B=new UY(dY,e.voicePitchProperty),O=new Ai({spacing:Vi.VERTICAL_CONTENT_SPACING,align:"left",children:[M,B]}),x=new kt(yY,an({},Vi.PANEL_SECTION_LABEL_OPTIONS,{cursor:"pointer"})),Z=new ug(O,{titleNode:x,titleAlignX:"left",titleXSpacing:8,contentXMargin:0,expandedDefaultValue:!1,expandCollapseButtonOptions:{sideLength:20,voicingIgnoreVoicingManagerProperties:!0},fill:null,stroke:null,contextResponseExpanded:DY,contextResponseCollapsed:IY,tandem:R.OPT_OUT}),de=new Ge({children:[w,f,Z]});f.leftTop=w.leftBottom.plusXY(0,20),Z.leftTop=f.leftBottom.plusXY(0,20),super({titleNode:l,contentNode:de});const $=We=>{de.visible=We};e.voicingEnabledProperty.link($);const me=We=>{l.enabledProperty.value=We.startsWith("en")};Mr.link(me);const ue=new Sn,Se=We=>{e.voicingMainWindowVoicingEnabledProperty.value&&(ue.alert=We?pY:Mr.value.startsWith("en")?fY:mY,this.isInsidePhetioArchetype()||$i.speakIgnoringEnabled(ue),this.addAccessibleResponse(ue))};e.voicingEnabledProperty.lazyLink(Se);let Te=null;const Re=We=>{Te&&(O.removeChild(Te),Te.dispose());let Le=[];We.length>0&&(Le=$i.getEnglishPrioritizedVoices().slice(0,12));const lt=phet.joist.sim.topLayer||new Ge;Te=new HY(e.voiceProperty,Le,lt),O.addChild(Te)};$i.voicesProperty.link(Re)}}class FY extends Bl{constructor(e,t,n){super(e,n,n.range,{includeArrowButtons:!1,layoutFunction:Bl.createLayoutFunction4(),delta:.25,accessibleName:t,titleNodeOptions:an({},Vi.PANEL_SECTION_CONTENT_OPTIONS,{maxWidth:45}),numberDisplayOptions:{decimalPlaces:2,valuePattern:gY,textOptions:an({},Vi.PANEL_SECTION_CONTENT_OPTIONS,{maxWidth:45})},sliderOptions:{thumbSize:AM,trackSize:wM,keyboardStep:.25,minorTickSpacing:.25,voicingOnEndResponseOptions:{withNameResponse:!0}},tandem:R.OPT_OUT}),this.slider.voicingNameResponse=t,this.slider.voicingIgnoreVoicingManagerProperties=!0;const s=new _a(LY,{value:n},{tandem:R.OPT_OUT}),r=new Dt([n,MY,s],(a,o,l)=>a===1?o:l);this.slider.voicingObjectResponse=r}}class HY extends Wp{constructor(e,t,n,s){const r=Ne()({listPosition:"above",accessibleName:kY,comboBoxVoicingNameResponsePattern:CY.value,tandem:R.OPT_OUT},s),a=[];t.length===0&&a.push({value:null,createNode:o=>new kt(ok,Vi.PANEL_SECTION_CONTENT_OPTIONS),accessibleName:ok}),t.forEach(o=>{a.push({value:o,createNode:l=>new kt(o.name,Vi.PANEL_SECTION_CONTENT_OPTIONS),accessibleName:o.name})}),e.set(a[0].value),super(e,a,n,r),this.button.voicingIgnoreVoicingManagerProperties=!0,this.disposeVoiceComboBox=()=>{a.forEach(o=>{o.value=null})}}dispose(){this.disposeVoiceComboBox(),super.dispose()}}class UY extends Ai{constructor(e,t){const n=new kt(e,Vi.PANEL_SECTION_CONTENT_OPTIONS),s=t.range,r=new du(t,s,{majorTickLength:10,thumbSize:AM,trackSize:wM,keyboardStep:.25,shiftKeyboardStep:.1,constrainValue:h=>Su(h,.01),labelTagName:"label",labelContent:e,voicingNameResponse:e,voicingIgnoreVoicingManagerProperties:!0,tandem:R.OPT_OUT}),a=new kt("Low",{font:new ki(14)});r.addMajorTick(s.min,a);const o=new kt("High",{font:new ki(14)});r.addMajorTick(s.max,o),super();const l=(h,c)=>{r.voicingObjectResponse=this.getPitchDescriptionString(h)};t.link(l),this.mutate({children:[n,r],spacing:5})}getPitchDescriptionString(e){let t="";return m0.forEach((n,s)=>{s.contains(e)&&(t=n)}),t}}const VA=pW;class GY extends Of{constructor(e,t,n,s){super(Si.AUDIO,t,n,{labelContent:VA});const r={align:"left",spacing:Vi.CONTENT_SPACING,excludeInvisibleChildrenFromBounds:!1},a=new Ai(r),o=new Ai(r);if(e.supportsAnyVoicing){const A=new zY(e);a.addChild(A)}if(e.supportsSound){const A=e.supportsAnyVoicing!==e.supportsSound&&e.customPreferences.length===0,P=new BW(e,{includeTitleToggleSwitch:!A});o.addChild(P)}const l=new _i({align:"top",spacing:10,children:[a,o],tagName:"div"});e.customPreferences.forEach((A,P)=>{const w=P%2===0?a:o,T=A.createContent(s.tandem),D=new Lu({contentNode:T,contentNodeOptions:{excludeInvisibleChildrenFromBounds:!0},contentLeftMargin:0});w.addChild(D)});const h=new kt(VA,Vi.PANEL_SECTION_LABEL_OPTIONS),c=new Co(e.audioEnabledProperty,!1,!0,Ut({accessibleName:VA},Vi.TOGGLE_SWITCH_OPTIONS)),f=new Hh({labelNode:h,controlNode:c,headingControl:!0}),g=A=>{l.enabled=A};e.audioEnabledProperty.link(g);const v=new Ai({align:"center",spacing:25,children:[f,l]});this.addChild(v)}}const WY=new Fe(new He("JOIST/a11y.preferences.tabs.input.gestureControl.enabledAlert",{en:"Custom taps and swipes on."},R.OPT_OUT),R.OPT_OUT),KY=new Fe(new He("JOIST/a11y.preferences.tabs.input.gestureControl.disabledAlert",{en:"Custom taps and swipes off."},R.OPT_OUT),R.OPT_OUT),YY=WY,jY=KY,XY=f0,QY="Input",kA="Gesture Control",uk="Use touch with custom swipes and taps instead. No direct touch with gesture control enabled.";class JY extends Of{constructor(e,t,n,s){super(Si.INPUT,t,n,{labelContent:QY});const r=new Ai({spacing:Vi.CONTENT_SPACING,align:"left"});if(this.addChild(r),e.supportsGestureControl){const l=new kt(kA,Vi.PANEL_SECTION_LABEL_OPTIONS),h=new ha(uk,an({},Vi.PANEL_SECTION_CONTENT_OPTIONS,{lineWrap:350,maxHeight:100,readingBlockNameResponse:Gn.fillIn(XY,{label:kA,description:uk})})),c=new Co(e.gestureControlsEnabledProperty,!1,!0,Ut({accessibleName:kA,leftValueContextResponse:jY,rightValueContextResponse:YY},Vi.TOGGLE_SWITCH_OPTIONS)),f=new Hh({labelNode:l,descriptionNode:h,allowDescriptionStretch:!1,controlNode:c}),g=new Lu({titleNode:f,contentLeftMargin:0});r.addChild(g)}const a=new Ai({spacing:Vi.CONTENT_SPACING,align:"left"});e.customPreferences.forEach(l=>{const h=l.createContent(s.tandem);a.addChild(new Ge({children:[h]}))});const o=new Lu({contentNode:a,contentLeftMargin:0});r.addChild(o)}}const SM=new Fe(new He("JOIST/preferences.tabs.localization.title",{en:"Localization",af:"Lokalisering",ak:"Nfibea",am:"አካባቢያዊነት",ar:"الموقع",ar_KW:"تحديد اللغة",ar_LY:"التوطين",ar_MA:"الموقع الجغرافي",ar_SY:"الموقع",az:"Lokalizasiya",be:"Лакалізацыя",bg:"Локализиране",bn:"Localization",bs:"Lokalizacija",ca:"Localització",cs:"Lokalizace",da:"Område",de:"Lokalisierung",el:"Μετάφραση",es:"Localización",es_PE:"Localización",eu:"Lokalizazioa",fa:"زبان",fa_DA:"زبان",fi:"Kielivalinnat",fr:"Localisation",gu:"લોકલાઈઝેશન",ha:"Mayar da abu kan al’ada",hi:"स्थानीयकरण",hr:"Lokalizacija",ht:"Lokalizasyon",hu:"Nyelv",hy:"Տեղայնացում",ig:"edozi na ebe",in:"Penyesuaian Bahasa Lokal",is:"Staðsetning",it:"Localizzazione",iw:"התאמה מקומית",ki:"Kũgũrũ",kn:"ಭಾಷೆ",ko:"지역화",ku:"ناوچیەتی",lg:"Okuteekebwa mu kitundu",lt:"Regionas",mn:"Хэсэгчлэх",mr:"स्थानिकीकरण",ms:"Penyetempatan",mt:"Lokalizzar",nb:"Lokalisering",nl:"Vertaling",ny:"Localization",om:"naannootti jijjiiruu",pl:"Lokalizacja",ps:"محلي کول",pt:"Localização",pt_BR:"Localização",ro:"Localizare",rw:"Ahantu",se:"Localization",sk:"Lokalizácia",sl:"Lokalizacija",sn:"Localization",sp:"Go beakanya ga selegae",sr:"Локализација",st:"Localization",sv:"Lokalisering",sw:"Ujanibishaji",te:"స్థానికీకరణ",tg:"Локализатсия",th:"การรองรับหลายภาษา",ti:"ከባብያዊ ምግባር",tr:"Yerelleştirme",uk:"Переклад",ur:"مقامی ہم آہنگی",uz:"Tillar",vi:"Địa phương hoá",yo:"Isọdibilẹ",zh_TW:"在地化",zu:"ukwenziwa kwasendaweni"},R.OPT_OUT),R.OPT_OUT),ZY=new Fe(new He("JOIST/preferences.tabs.localization.regionAndCulture.title",{en:"Region and Culture",af:"Streek en Kultuur",ak:"Biai a wɔfri",am:"ክልልና ባህል",ar:"المنطقة والثقافة",ar_KW:"Region and Culture",ar_LY:"المنطقة والثقافة",ar_MA:"المنطقة و الثقافة",ar_SY:"المنطقة والثقافة",az:"Region və Mədəniyyət",be:"Рэгіён і культура",bg:"Регион и Култура",bn:"Region and Culture",bs:"Region and Culture",ca:"Regió i cultura",cs:"Region a kultura",da:"Region og kultur",de:"Region und Kultur",el:"Περιοχή και Κουλτούρα",es:"Región y Cultura",es_PE:"Región y Cultura",eu:"Eskualdea eta Kultura",fa:"منطقه و فرهنگ",fa_DA:"منطقه و فرهنگ",fi:"Alue ja kulttuuri",fr:"Région et culture",gu:"ક્ષેત્ર અને સંસ્કૃતિ",ha:"Yanki da al'ada",hi:"क्षेत्र व संस्कृति",hr:"Regija i kultura",ht:"Rejyon ak Kilti",hu:"Régió és kultúra",ig:"Mpaghara na Omenala",is:"Svæði og menning",it:"Regione e Cultura",iw:"אזור ותרבות",ki:"Enjimĩ na Mĩhĩrĩga",kn:"ಪ್ರದೇಶ ಮತ್ತು ಸಂಸ್ಕೃತಿ",ko:"지역과 문화",ku:"ناوچە و کەلتوور",mi:"Rohe, Ahurea hoki",mn:"Бүс ба Соёл",mr:"प्रांत आणि संस्कृती",ms:"Kawasan dan Budaya",mt:"Reġjun u Kultura",nb:"Region og Kultur",nl:"Regio en cultuur",om:"Naannoo fi Aadaa",pl:"Region i kultura",ps:"سیمه او کلتور",pt:"Região e Cultura",pt_BR:"Região e Cultura",ro:"Regiune și cultură",rw:"Idini n'umuco",se:"Guovlu ja kultuvra",sk:"Región a kultúra",sl:"Regija in kultura",sn:"Chitendero netsika",sp:"Selete le Setšo",sr:"Region and Culture",sv:"Region och kultur",sw:"Eneo na Utamaduni",te:"ప్రాంతమూ, సంస్కతి",tg:"Минтақа ё Фарҳанг",th:"ภูมิภาคและวัฒนธรรม",tr:"Bölge ve Kültür",ur:"علاقہ اور ثقافت",uz:"Mintaqa va madaniyat",vi:"Region and Culture",yo:"Ekun ati Asa",zh_TW:"區域與文化",zu:"Isifunda Namasiko"},R.OPT_OUT),R.OPT_OUT),$Y=new Fe(new He("JOIST/preferences.tabs.localization.regionAndCulture.description",{en:"Select the portrayal of people, places, or objects in the sim. Images are not intended to represent the entire diversity of a region or culture.",af:"Kies die uitbeelding van mense, plekke of voorwerpe in die sim. Beelde is nie bedoel om die hele diversiteit van 'n streek of kultuur voor te stel nie.",ar:"حدد تصوير الأشخاص أو الأماكن أو الأشياء في بطاقة sim. ليس المقصود من الصور أن تمثل التنوع الكامل لمنطقة أو ثقافة ما.",ar_KW:"Select the portrayal of people, places, or objects in the sim. Images are not intended to represent the entire diversity of a region or culture.",ar_LY:"اختر تصوير الأشخاص أو الأماكن أو الأشياء في المحاكاة. لا تهدف الصور إلى تمثيل التنوع الكامل لمنطقة أو ثقافة معينة.",ar_MA:"اختر تصوير الأشخاص أو الأماكن أو الأشياء في المحاكاة. الصور لا تهدف إلى تمثيل التنوع الكامل لمنطقة أو ثقافة معينة.",az:"SİM-də insanların, yerlərin və ya obyektlərin təsvirini seçin. Şəkillər regionun və ya mədəniyyətin bütün müxtəlifliyini təmsil etmək üçün nəzərdə tutulmayıb.",be:"Выберыце выяву людзей, месцаў або прадметаў у сімулятары. Выявы не прызначаны для адлюстравання ўсёй разнастайнасці рэгіёна або культуры.",bn:"মানুষ, স্থান বা বস্তুর চিত্রায়ন নির্বাচন করুন। চিত্রগুলি একটি অঞ্চল বা সংস্কৃতির সমগ্র বৈচিত্র্যের প্রতিনিধিত্ব করার উদ্দেশ্যে নয়।",bs:"Izaberite prikaz ljudi, mjesta ili objekata u simulaciji. Slike nisu namijenjene da predstavljaju cjelokupnu raznolikost regiona ili kulture.",ca:"Selecciona la representació de persones, llocs o objectes a la simulació. Les imatges no pretenen representar tota la diversitat d'una regió o cultura.",cs:"Vyberte zobrazení osob, míst nebo objektů v simulaci. Obrázky nemají představovat celou rozmanitost regionu nebo kultury.",da:"Vælg skildringen af ​​mennesker, steder eller genstande i simuleringen. Billeder er ikke beregnet til at repræsentere hele mangfoldigheden af ​​en region eller kultur.",de:"Wähle die Darstellung von Personen, Orten oder Objekten in der Simulation aus. Die Darstellungen erheben nicht den Anspruch, Bilder die gesamte Vielfalt einer Region oder Kultur darzustellen.",el:"Επιλέξτε την απεικόνιση ανθρώπων, τοποθεσιών ή αντικειμένων στην προσομοίωση. Οι απεικονίσεις δεν αντιπροσωπεύουν ολόκληρη την ποικιλομορφία μιας περιοχής ή ενός πολιτισμού.",es:"Selecciona la representación de personas, lugares u objetos en la simulación. Las imágenes no pretenden representar toda la diversidad de una región o cultura.",es_PE:"Selecciona la representación de personas, lugares u objetos en el simulador. Las imágenes no pretenden representar toda la diversidad de una región o cultura.",fa:"تصویر افراد، مکان ها یا اشیاء را در شبیه سازی انتخاب کنید. تصاویر برای نمایش تنوع یک منطقه جغرافیایی یا فرهنگ خاص انتخاب نشده اند.",fa_DA:"تصویر افراد، مکان ها یا اشیاء را در شبیه سازی انتخاب کنید. تصاویر برای نمایش تنوع یک منطقه جغرافیایی یا فرهنگ خاص انتخاب نشده اند.",fi:"Valitse simulaatiossa ihmisten, paikkojen tai esineiden esitystapa. Kuvien ei ole tarkoitus edustaa koko alueen tai kulttuurin monimuotoisuutta.",fr:"Sélectionnez la représentation des personnes, des lieux ou des objets dans la simulation. Les images ne sont pas destinées à représenter toute la diversité d'une région ou d'une culture.",gu:"સિમમાં લોકો, સ્થાનો અથવા ઑબ્જેક્ટનું ચિત્રણ પસંદ કરો. છબીઓનો હેતુ પ્રદેશ અથવા સંસ્કૃતિની સમગ્ર વિવિધતાને રજૂ કરવાનો નથી.",ha:"Zaɓi hoton mutane, wurare, ko abubuwa a cikin sim ɗin. Ba a yi nufin hotuna don wakiltar bambance-bambancen yanki ko al'ada ba.",hi:"Simulation में दिए गए विकल्पों में से व्यक्ति, स्थान और वस्तुएँ चुनें। इन चित्रों का उद्देश्य किसी क्षेत्र विशेष या संस्कृति की विविधताओं को चित्रित करना बिल्कुल भी नहीं है, यह केवल एक उदाहरण मात्र है।",hr:"Odaberite prikaz ljudi, mjesta ili predmeta na simulaciji. Slike nisu namijenjene predstavljanju cjelokupne raznolikosti regije ili kulture.",ht:"Chwazi deskripsyon moun, kote, oswa objè nan sim la. Imaj yo pa gen entansyon reprezante tout divèsite nan yon rejyon oswa yon kilti.",is:"Veldu framsetningu fólks, staða, eða hluta í sýndartilrauninni. Myndum er ekki ætlað að lýsa allri fjölbreytni svæðis eða menningar.",it:"Seleziona la rappresentazione di persone, luoghi o oggetti nella simulazione. Le immagini non intendono rappresentare l'intera diversità in una regione o di una cultura.",iw:"בחר את התיאור של אנשים, מקומות או חפצים בסים. תמונות אינן מיועדות לייצג את כל המגוון של אזור או תרבות.",kn:"Select the portrayal of people, places, or objects in the sim. Images are not intended to represent the entire diversity of a region or culture.",ko:"시뮬레이션에서 사람, 장소 또는 사물의 묘사를 선택하세요. 이미지는 지역이나 문화의 전체 다양성을 나타내기 위한 것이 아닙니다.",mn:"Загварт хүн, газар эсвэл объектын дүрслэлийг сонгоно уу. Зургууд нь нутгийн болон соёлын ялгаатай байдлыг бүхэлд нь төлөөлөх зорилготой биш юм.",mr:"सादृश्या मध्ये लोक, जागा आणि वस्तू निवडा. आकृत्या या त्या प्रांतातील सर्व संस्कृती दर्शवत नाहीत. त्या नमुन्यादाखल आहेत",ms:"Pilih gambaran orang, tempat atau objek dalam sim. Imej tidak bertujuan untuk mewakili keseluruhan kepelbagaian wilayah atau budaya.",nl:"Kies de weergave van mensen, plaatsen of voorwerpen in de sim. De beelden zijn niet bedoeld om de complete diversiteit van een regio of cultuur weer te geven.",pl:"Wybierz sposób przedstawiania ludzi, miejsc lub obiektów w symulacji. Obrazy nie mają na celu przedstawiania całej różnorodności regionu lub kultury.",ps:"په سېمولېشن کې د خلکو، ځای یا څیز انځور غوره کړئ. د انځورونو موخه دا نه ده چې د یوې سیمې یا کلتور ټول استازیتوب وکړي.",pt_BR:"Selecione a representação de pessoas, lugares ou objetos na Sim. As imagens não pretendem representar toda a diversidade de uma região ou cultura.",ro:"Selectați reprezentarea persoanelor, a locurilor sau a obiectelor din simulare. Imaginile nu sunt concepute pentru a reprezenta întreaga diversitate a unei regiuni sau culturi.",sk:"Vyberte zobrazenie ľudí, miest alebo predmetov v sim. Obrázky nie sú určené na zobrazenie celej rozmanitosti regiónu alebo kultúry.",sl:"Izberi sliko oseb, krajev in okolice v simulaciji. Slike niso namenjene predstavitvi celotne raznolikosti okolja ali kulture.",sp:"Kgetha tshwantšhišo ya batho, mafelo, goba dilo ka gare ga sim. Diswantšho ga se tša rerelwa go emela go fapafapana ka moka ga selete goba setšo.",sr:"Изаберите приказ људи, места или објеката у симулацији. Слике нису намењене да представљају целокупну разноликост региона или културе.",sv:"Välj skildring av människor, platser eller föremål i simuleringen. Bilder är inte avsedda att representera hela mångfalden av en region eller kultur.",sw:"Chagua picha ya watu, maeneo, au vitu kwenye sim. Picha hazikusudiwa kuwakilisha utofauti wote wa eneo au utamaduni.",te:"Select the portrayal of people, places, or objects in the sim. Images are not intended to represent the entire diversity of a region or culture.",tg:"Дар симулятор тасвири одамон, ҷойҳо ё ашёро интихоб кунед. Тасвирҳо барои муаррифии тамоми гуногунии минтақа ё фарҳанг пешбинӣ нашудаанд.",th:"เลือกการแสดงภาพบุคคล สถานที่ หรือวัตถุในแบบจำลอง ภาพต่าง ๆ ไม่ได้มีจุดประสงค์ในการนำเสนอถึงความหลากหลายทั้งหมดของภูมิภาคหรือวัฒนธรรม",tr:"Simülasyondaki insanların, yerlerin veya nesnelerin tasvirini seçin. Görseller bir bölgenin veya kültürün tüm çeşitliliğini temsil etmeyi amaçlamaz.",uz:"Simulyatsiyadagi odamlar, joylar yoki narsalarning ko'rinishini belgilang. Rasmlar biror bir hudud yoki madaniyatning to'liq xilma-xilligini ifodalash uchun mo'ljallanmagan.",vi:"Select the portrayal of people, places, or objects in the sim. Images are not intended to represent the entire diversity of a region or culture.",yo:"Yan aworan eniyan, awọn aaye, tabi awọn nkan ninu SIM yi. Awọn aworan ko ni ipinnu lati ṣe aṣoju gbogbo oniruuru agbegbe tabi aṣa.",zh_TW:"選擇模擬遊戲中人物、地點或物件的圖像。圖像並未意圖代表一個地區或文化的整體多樣性。"},R.OPT_OUT),R.OPT_OUT),ej=new Fe(new He("JOIST/preferences.tabs.localization.languageSelection.title",{en:"Languages",af:"Tale",am:"ቋንቋዎች",ar_KW:"اللغات",ar_LY:"اللغات",ar_MA:"اللغات",be:"Мовы",bn:"Languages",bs:"Jezici",ca:"Idiomes",cs:"Jazyky",da:"Sprog",de:"Sprachen",el:"Γλώσσες",es:"Idiomas",es_PE:"Idiomas",fa:"زبان ها",fa_DA:"زبان",fi:"Kielivalinta",fr:"Langues",ha:"Harsuna",hi:"भाषाएँ",hr:"Jezici",ht:"Lang",hu:"Nyelvek",is:"Tungumál",it:"Lingue",iw:"שפות",kn:"ಭಾಷೆಗಳು",ko:"언어",mn:"Хэл",mr:"भाषा",ms:"Bahasa",nl:"Talen",pl:"Języki",pt_BR:"Idiomas",ro:"Limbi",sk:"Jazyky",sl:"Jeziki",sp:"Maleme",sr:"Језици",sv:"Språk",sw:"Lugha",te:"భాషలు",tg:"Забонҳо",th:"ภาษา",tr:"Diller",vi:"Languages",yo:"Awon ede",zh_TW:"語言"},R.OPT_OUT),R.OPT_OUT),tj=new Fe(new He("JOIST/preferences.tabs.localization.languageSelection.description",{en:"Change language to translate on-screen text. Additional descriptions, when present, remain in English.",af:"Verander taal om teks op die skerm te vertaal. Bykomende beskrywings, indien teenwoordig, bly in Engels.",ar_KW:"قم بتغيير اللغة لترجمة النص المروض على الشاشة. ستبقى الصفات الاضافية، ان وجدت، بالفة الانجليزية.",ar_LY:"يمكنك تغيير اللغة لترجمة النص الموجود على الشاشة. تظل الأوصاف الإضافية، عند توفرها، باللغة الإنجليزية.",ar_MA:"قم بتغيير اللغة لترجمة النص المعروض على الشاشة. ستبقى الأوصاف الإضافية، إن وجدت، باللغة الإنجليزية.",be:"Змяніце мову для перакладу тэксту на экране. Дадатковыя апісанні, калі яны ёсць, застаюцца на англійскай мове.",bn:"Change language to translate on-screen text. Additional descriptions, when present, remain in English.",bs:"Promijenite jezik da biste preveli tekst na ekranu. Dodatni opisi, kada su prisutni, ostaju na engleskom.",ca:"Canvia l'idioma per a traduir el text en pantalla. En cas d'haver descripcions adicionals, seguiran estant en anglès.",cs:"Změna jazyka pro překlad textu na obrazovce. Další popisy, pokud jsou k dispozici, zůstávají v angličtině.",da:"Skift sprog for at oversætte tekst på skærmen. Yderligere beskrivelser, når de findes, forbliver på engelsk.",de:"Ändere die Sprache, um Text auf dem Bildschirm zu übersetzen. Zusätzliche Beschreibungen, wenn vorhanden, bleiben auf Englisch.",el:"Αλλάξτε τη γλώσσα για να μεταφράσετε κείμενο στην οθόνη. Οι πρόσθετες περιγραφές, όταν υπάρχουν, παραμένουν στα αγγλικά.",es:"Cambia el idioma para traducir el texto que aparece en pantalla. Las descripciones adicionales, cuando están disponibles, permanecen en inglés.",es_PE:"Cambia el idioma para traducir el texto que aparece en pantalla. Las descripciones adicionales, cuando están disponibles, permanecen en inglés.",fa:"Change language to translate on-screen text. Additional descriptions, when present, remain in English.",fi:"Vaihda kieltä näytöllä näkyvän tekstin kääntämiseen. Mahdolliset lisäkuvaukset säilyvät englanniksi.",fr:"Changer la langue pour traduire le texte à l'écran. Les descriptions supplémentaires, lorsqu'elles sont présentes, restent en anglais.",ha:"Canja harshe don fassara rubutu akan allo. idan akwai Ƙarin bayani, ya zauna cikin Turanci.",hi:"ऑन-स्क्रीन टेक्स्ट का अनुवाद करने के लिए भाषा बदलें। अतिरिक्त विवरण, जब मौजूद हों, अंग्रेजी में ही रहते हैं।",hr:"Promijenite jezik da bi ste preveli tekst prikazan na zaslonu. Dodatna objašnjenja, kada postoje, bit će na engleskom jeziku.",ht:"Chanje lang pou tradui tèks sou ekran an. Lòt deskripsyon yo, lè yo prezan, rete nan lang Anglè.",is:"Breyta tungumáli til að þýða texta á skjánum. Aukalegar lýsingar, þegar þær eru til staðar, verða áfram á ensku.",it:"Cambia lingua per tradurre il testo delle schermate. Descrizioni aggiuntive, quando presenti, rimangono in Inglese.",iw:"שנה שפה כדי לתרגם טקסט על המסך. תיאורים נוספים, כשיש, יישארו באנגלית.",kn:"Change language to translate on-screen text. Additional descriptions, when present, remain in English.",ko:"화면 텍스트를 번역하려면 언어를 변경하세요. 추가 설명이 있는 경우 영어로 유지됩니다.",mn:"Дэлгэц дахь бичвэрийг орчуулахын тулд хэлээ сонго. Нэмэлт тайлбар унших бол англи хэл дээр үзнэ үү.",mr:"Change language to translate on-screen text. Additional descriptions, when present, remain in English.",ms:"Tukar bahasa untuk menterjemah teks pada skrin. Penerangan tambahan, apabila ada, kekal dalam bahasa Inggeris.",nl:"Verander de taal om een op het scherm weergegeven tekst te vertalen. Additionele beschrijvingen, indien aanwezig, blijven in het Engels.",pl:"Zmień język, aby przetłumaczyć tekst na ekranie. Dodatkowe opisy, jeśli są obecne, pozostają w języku angielskim.",pt_BR:"Alterar idioma para traduzir o texto na tela. Descrições adicionais, quando presentes, permanecem em inglês.",ro:"Schimbați limba pentru a traduce textul de pe ecran. Descrierile suplimentare, atunci când sunt prezente, rămân în limba engleză",sk:"Zmeňte jazyk na preklad textu na obrazovke. Ďalšie popisy, ak sú k dispozícii, zostávajú v angličtine.",sl:"Izberi jezik za prevajanje besedila. Dodatni opisi, če obstajajo, bodo ostali v angleščini.",sp:"Fetoša polelo go fetolela sengwalwa sa skrineng. Ditlhalošo tša tlaleletšo, ge di le gona, di dula di le ka Seisemane.",sr:"Промените језик да бисте превели текст на екрану. Додатни описи, када су присутни, остају на енглеском.",sv:"Välj språk för att översätta skärmtext. Ytterligare text, när den finns, förblir på engelska.",sw:"Badili Lunga kutafsiri kwenyemaandishi ya  kiwambo. maelezo ya ziada ikiwa yanapatikana, yanabaki kwa Kiingereza",te:"Change language to translate on-screen text. Additional descriptions, when present, remain in English.",tg:"Забонро барои тарҷумаи матни экранӣ тағйир диҳед. Тавсифоти иловагӣ, агар вуҷуд дошта бошанд, бо забони англисӣ боқӣ мемонанд.",th:"เปลี่ยนภาษาเพื่อแสดงผลลัพธ์ของการแปลภาษา แต่หากมีคำอธิบายเพิ่มเติมในการนำเสนอนั้นจะยังคงเป็นภาษาอังกฤษเป็นหลัก",tr:"Ekrandaki metni çevirmek için dili değiştirin. Mevcut olduğunda ek açıklamalar İngilizce olarak kalır.",vi:"Đổi ngôn ngữ để dịch văn bản trên màn hình",yo:"Yi ede pada lati tumọ lori ọrọ aworan.",zh_TW:"改變螢幕上顯示的語言。若有額外的描述則會仍保持在英文。"},R.OPT_OUT),R.OPT_OUT),Zc=self.phet&&phet.chipper?phet.chipper.packageObject:{name:"placeholder"},PM="usa",Nf=ie.uniq([PM,...Zc?.phet?.simFeatures?.supportedRegionsAndCultures||[]]),TM=i=>!!(i&&Nf.includes(i)),ck=self.phet.chipper.queryParameters.regionAndCulture,ij=TM(ck)?ck:PM;class nj extends Mt{unguardedSet(e){TM(e)&&super.unguardedSet(e)}}const dk=Nf.length>1,sj=new nj(ij,{validValues:Nf.sort(),tandem:dk?R.GENERAL_MODEL.createTandem("regionAndCultureProperty"):R.OPT_OUT,phetioFeatured:dk,phetioValueType:xi,phetioDocumentation:"Describes how a region and culture will be portrayed in the sim."}),rj=new Fe(new He("JOIST/a11y.preferences.tabs.localization.languageSelection.languageChangeResponsePattern",{en:"On-screen text now in {{language}}."},R.OPT_OUT),R.OPT_OUT),xM="rgba(255,255,0,0.5)";class EM extends Jc{constructor(e,t){const n=Ne()({innerStroke:null,outerStroke:null,fill:xM},t);super(e,n)}}EM.ACTIVATED_HIGHLIGHT_COLOR=xM;function CA(i){return i instanceof Ge&&i._isReadingBlock}let pk=pn.OUTER_FOCUS_COLOR,fk=pn.INNER_FOCUS_COLOR,mk=pn.INNER_LIGHT_GROUP_FOCUS_COLOR,gk=pn.OUTER_LIGHT_GROUP_FOCUS_COLOR;class la{constructor(e,t,n,s){this.trail=null,this.node=null,this.activeHighlight=null,this.mode=null,this.groupMode=null,this.groupHighlightNode=null,this.transformTracker=null,this.groupTransformTracker=null,this.nodeModeHighlight=null,this.nodeModeHighlightLayered=!1,this.transformDirty=!0,this.highlightNode=new Ge,this.readingBlockHighlightNode=new Ge,this.addedReadingBlockHighlight=null,this.activeReadingBlockNode=null,this.readingBlockTrail=null,this.readingBlockTransformDirty=!0,this.readingBlockTransformTracker=null;const r=Ne()({pdomFocusHighlightsVisibleProperty:new Qt(!0),interactiveHighlightsVisibleProperty:new Qt(!1),readingBlockHighlightsVisibleProperty:new Qt(!1)},s);this.display=e,this.focusRootNode=t,this.focusRootNode.addChild(this.highlightNode),this.focusRootNode.addChild(this.readingBlockHighlightNode),this.pdomFocusHighlightsVisibleProperty=r.pdomFocusHighlightsVisibleProperty,this.interactiveHighlightsVisibleProperty=r.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty=r.readingBlockHighlightsVisibleProperty,this.focusDisplay=new n(this.focusRootNode,{allowWebGL:e.isWebGLAllowed(),allowCSSHacks:!1,accessibility:!1,interactive:!1,allowLayerFitting:!0}),this.domElement=this.focusDisplay.domElement,this.domElement.style.pointerEvents="none",this.shapeFocusHighlightPath=new pn(null),this.boundsFocusHighlightPath=new Jc(null,{useLocalBounds:!0}),this.highlightNode.addChild(this.shapeFocusHighlightPath),this.highlightNode.addChild(this.boundsFocusHighlightPath),this.groupFocusHighlightPath=new Jc(null,{useLocalBounds:!0,useGroupDilation:!0,outerLineWidth:pn.GROUP_OUTER_LINE_WIDTH,innerLineWidth:pn.GROUP_INNER_LINE_WIDTH,innerStroke:pn.OUTER_FOCUS_COLOR}),this.groupFocusHighlightParent=new Ge({children:[this.groupFocusHighlightPath]}),this.focusRootNode.addChild(this.groupFocusHighlightParent),this.readingBlockHighlightPath=new EM(null),this.readingBlockHighlightNode.addChild(this.readingBlockHighlightPath),this.boundsListener=this.onBoundsChange.bind(this),this.transformListener=this.onTransformChange.bind(this),this.domFocusListener=this.onFocusChange.bind(this),this.readingBlockTransformListener=this.onReadingBlockTransformChange.bind(this),this.focusHighlightListener=this.onFocusHighlightChange.bind(this),this.interactiveHighlightListener=this.onInteractiveHighlightChange.bind(this),this.focusHighlightsVisibleListener=this.onFocusHighlightsVisibleChange.bind(this),this.voicingHighlightsVisibleListener=this.onVoicingHighlightsVisibleChange.bind(this),this.pointerFocusListener=this.onPointerFocusChange.bind(this),this.lockedPointerFocusListener=this.onLockedPointerFocusChange.bind(this),this.readingBlockFocusListener=this.onReadingBlockFocusChange.bind(this),this.readingBlockHighlightChangeListener=this.onReadingBlockHighlightChange.bind(this),lr.link(this.domFocusListener),e.focusManager.pointerFocusProperty.link(this.pointerFocusListener),e.focusManager.readingBlockFocusProperty.link(this.readingBlockFocusListener),e.focusManager.lockedPointerFocusProperty.link(this.lockedPointerFocusListener),this.pdomFocusHighlightsVisibleProperty.link(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.link(this.voicingHighlightsVisibleListener)}dispose(){this.hasHighlight()&&this.deactivateHighlight(),lr.unlink(this.domFocusListener),this.pdomFocusHighlightsVisibleProperty.unlink(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.unlink(this.voicingHighlightsVisibleListener),this.display.focusManager.pointerFocusProperty.unlink(this.pointerFocusListener),this.display.focusManager.readingBlockFocusProperty.unlink(this.readingBlockFocusListener),this.focusDisplay.dispose()}hasHighlight(){return!!this.trail}hasReadingBlockHighlight(){return!!this.readingBlockTrail}activateHighlight(e,t,n,s,r){this.trail=e,this.node=t;const a=n;this.activeHighlight=a;let o=e;a==="invisible"?this.mode="invisible":a instanceof zt?(this.mode="shape",this.shapeFocusHighlightPath.visible=!0,this.shapeFocusHighlightPath.setShape(a)):a instanceof Ge?(this.mode="node",a instanceof pn&&a.transformSourceNode&&(o=a.getUniqueHighlightTrail(this.trail)),this.nodeModeHighlight=a,s?(this.nodeModeHighlightLayered=!0,this.nodeModeHighlight.visible=r.get()):(this.nodeModeHighlight.visible=!0,this.highlightNode.addChild(this.nodeModeHighlight))):(this.mode="bounds",this.boundsFocusHighlightPath.setShapeFromNode(this.node,this.trail),this.boundsFocusHighlightPath.visible=!0,this.node.localBoundsProperty.lazyLink(this.boundsListener),this.onBoundsChange()),this.transformTracker=new kc(o,{isStatic:!0}),this.transformTracker.addListener(this.transformListener),this.activateGroupHighlights(),this.updateHighlightColors(),this.transformDirty=!0}activateFocusHighlight(e,t){this.activateHighlight(e,t,t.focusHighlight,t.focusHighlightLayerable,this.pdomFocusHighlightsVisibleProperty),t.focusHighlightChangedEmitter.addListener(this.focusHighlightListener)}activateInteractiveHighlight(e,t){this.activateHighlight(e,t,t.interactiveHighlight||t.focusHighlight,t.interactiveHighlightLayerable,this.interactiveHighlightsVisibleProperty),t.interactiveHighlightChangedEmitter.addListener(this.interactiveHighlightListener),t.focusHighlightChangedEmitter.addListener(this.interactiveHighlightListener)}activateReadingBlockHighlight(e){this.readingBlockTrail=e;const t=e.lastNode();if(CA(t)){this.activeReadingBlockNode=t;const n=this.activeReadingBlockNode.readingBlockActiveHighlight;this.addedReadingBlockHighlight=n,n==="invisible"||(n instanceof zt?(this.readingBlockHighlightPath.setShape(n),this.readingBlockHighlightPath.visible=!0):n instanceof Ge?this.readingBlockHighlightNode.addChild(n):(this.readingBlockHighlightPath.setShapeFromNode(this.activeReadingBlockNode,this.readingBlockTrail),this.readingBlockHighlightPath.visible=!0)),this.readingBlockTransformTracker=new kc(this.readingBlockTrail,{isStatic:!0}),this.readingBlockTransformTracker.addListener(this.readingBlockTransformListener),this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.addListener(this.readingBlockHighlightChangeListener),this.readingBlockTransformDirty=!0}}deactivateReadingBlockHighlight(){this.readingBlockHighlightPath.visible=!1,this.addedReadingBlockHighlight instanceof Ge&&this.readingBlockHighlightNode.removeChild(this.addedReadingBlockHighlight);const e=this.readingBlockTransformTracker;e.removeListener(this.readingBlockTransformListener),e.dispose(),this.readingBlockTransformTracker=null,this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.removeListener(this.readingBlockHighlightChangeListener),this.activeReadingBlockNode=null,this.readingBlockTrail=null,this.addedReadingBlockHighlight=null}deactivateHighlight(){const e=this.node;if(this.mode==="shape")this.shapeFocusHighlightPath.visible=!1;else if(this.mode==="node"){const t=this.nodeModeHighlight;this.nodeModeHighlightLayered?this.nodeModeHighlightLayered=!1:!t.isDisposed&&this.highlightNode.removeChild(t),t.isDisposed||(t.visible=!1),this.nodeModeHighlight=null}else this.mode==="bounds"&&(this.boundsFocusHighlightPath.visible=!1,e.localBoundsProperty.unlink(this.boundsListener));e.focusHighlightChangedEmitter.hasListener(this.focusHighlightListener)&&e.focusHighlightChangedEmitter.removeListener(this.focusHighlightListener),ku(e)&&(e.interactiveHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&e.interactiveHighlightChangedEmitter.removeListener(this.interactiveHighlightListener),e.focusHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&e.focusHighlightChangedEmitter.removeListener(this.interactiveHighlightListener)),this.deactivateGroupHighlights(),this.trail=null,this.node=null,this.mode=null,this.activeHighlight=null,this.transformTracker.removeListener(this.transformListener),this.transformTracker.dispose(),this.transformTracker=null}activateGroupHighlights(){const e=this.trail;for(let t=0;t<e.length;t++){const n=e.nodes[t],s=n.groupFocusHighlight;if(s){const r=e.upToNode(n);this.groupTransformTracker=new kc(r),this.groupTransformTracker.addListener(this.transformListener),typeof s=="boolean"?(this.groupFocusHighlightPath.setShapeFromNode(n,r),this.groupFocusHighlightPath.visible=!0,this.groupHighlightNode=this.groupFocusHighlightPath,this.groupMode="bounds"):s instanceof Ge&&(this.groupHighlightNode=s,this.groupFocusHighlightParent.addChild(s),this.groupMode="node");break}}}updateHighlightColors(){this.mode==="shape"?(this.shapeFocusHighlightPath.innerHighlightColor!==la.getInnerHighlightColor()&&this.shapeFocusHighlightPath.setInnerHighlightColor(la.getInnerHighlightColor()),this.shapeFocusHighlightPath.outerHighlightColor!==la.getOuterHighlightColor()&&this.shapeFocusHighlightPath.setOuterHighlightColor(la.getOuterHighlightColor())):this.mode==="bounds"&&(this.boundsFocusHighlightPath.innerHighlightColor!==la.getInnerHighlightColor()&&this.boundsFocusHighlightPath.setInnerHighlightColor(la.getInnerHighlightColor()),this.boundsFocusHighlightPath.outerHighlightColor!==la.getOuterHighlightColor()&&this.boundsFocusHighlightPath.setOuterHighlightColor(la.getOuterHighlightColor())),this.groupMode&&(this.groupFocusHighlightPath.innerHighlightColor!==la.getInnerGroupHighlightColor()&&this.groupFocusHighlightPath.setInnerHighlightColor(la.getInnerGroupHighlightColor()),this.groupFocusHighlightPath.outerHighlightColor!==la.getOuterGroupHighlightColor()&&this.groupFocusHighlightPath.setOuterHighlightColor(la.getOuterGroupHighlightColor()))}deactivateGroupHighlights(){this.groupMode&&(this.groupMode==="bounds"?this.groupFocusHighlightPath.visible=!1:this.groupMode==="node"&&this.groupFocusHighlightParent.removeChild(this.groupHighlightNode),this.groupMode=null,this.groupHighlightNode=null,this.groupTransformTracker.removeListener(this.transformListener),this.groupTransformTracker.dispose(),this.groupTransformTracker=null)}afterTransform(){const e=this.transformTracker.getMatrix().timesMatrix(pn.getCorrectiveScalingMatrix());this.mode==="shape"?this.shapeFocusHighlightPath.updateLineWidth(e):this.mode==="bounds"?this.boundsFocusHighlightPath.updateLineWidth(e):this.mode==="node"&&this.activeHighlight instanceof pn&&this.activeHighlight.updateLineWidth&&this.activeHighlight.updateLineWidth(e),this.groupHighlightNode&&(this.groupMode==="bounds"?this.groupFocusHighlightPath.updateLineWidth(e):this.groupMode==="node"&&this.groupHighlightNode instanceof pn&&this.groupHighlightNode.updateLineWidth&&this.groupHighlightNode.updateLineWidth(e)),this.readingBlockTrail&&this.readingBlockHighlightPath.updateLineWidth(e)}onTransformChange(){this.transformDirty=!0}onReadingBlockTransformChange(){this.readingBlockTransformDirty=!0}onBoundsChange(){this.boundsFocusHighlightPath.setShapeFromNode(this.node,this.trail)}onFocusChange(e){const t=e&&e.display===this.display?e.trail:null;if(this.hasHighlight()&&this.deactivateHighlight(),t&&this.pdomFocusHighlightsVisibleProperty.value){const n=t.lastNode();this.activateFocusHighlight(t,n)}else this.display.focusManager.pointerFocusProperty.value&&this.interactiveHighlightsVisibleProperty.value&&this.updateInteractiveHighlight(this.display.focusManager.pointerFocusProperty.value)}onPointerFocusChange(e){!this.display.focusManager.lockedPointerFocusProperty.value&&!this.display.focusManager.pdomFocusHighlightsVisibleProperty.value&&this.updateInteractiveHighlight(e)}updateInteractiveHighlight(e){const t=e&&e.display===this.display?e.trail:null;this.hasHighlight()&&this.deactivateHighlight();let n=!1;if(t&&!this.display.focusManager.pdomFocusHighlightsVisibleProperty.value){const s=t.lastNode();(CA(s)&&this.readingBlockHighlightsVisibleProperty.value||!CA(s)&&ku(s)&&this.interactiveHighlightsVisibleProperty.value)&&(this.activateInteractiveHighlight(t,s),n=!0)}!n&&Bn.pdomFocus&&this.pdomFocusHighlightsVisibleProperty.value&&this.onFocusChange(Bn.pdomFocus)}onLockedPointerFocusChange(e){this.updateInteractiveHighlight(e||this.display.focusManager.pointerFocusProperty.value)}onReadingBlockFocusChange(e){this.hasReadingBlockHighlight()&&this.deactivateReadingBlockHighlight();const t=e&&e.display===this.display?e.trail:null;t&&this.activateReadingBlockHighlight(t)}onFocusHighlightChange(){this.onFocusChange(Bn.pdomFocus)}onInteractiveHighlightChange(){this.updateInteractiveHighlight(this.display.focusManager.lockedPointerFocusProperty.value||this.display.focusManager.pointerFocusProperty.value)}onReadingBlockHighlightChange(){this.onReadingBlockFocusChange(this.display.focusManager.readingBlockFocusProperty.value)}onFocusHighlightsVisibleChange(){this.onFocusChange(Bn.pdomFocus)}onVoicingHighlightsVisibleChange(){this.onPointerFocusChange(this.display.focusManager.pointerFocusProperty.value)}update(){this.hasHighlight()&&this.transformDirty&&(this.transformDirty=!1,this.highlightNode.setMatrix(this.transformTracker.matrix),this.groupHighlightNode&&this.groupHighlightNode.setMatrix(this.groupTransformTracker.matrix),this.afterTransform()),this.hasReadingBlockHighlight()&&this.readingBlockTransformDirty&&(this.readingBlockTransformDirty=!1,this.readingBlockHighlightNode.setMatrix(this.readingBlockTransformTracker.matrix)),this.display.size.equals(this.focusDisplay.size)||this.focusDisplay.setWidthHeight(this.display.width,this.display.height),this.focusDisplay.updateDisplay()}static setInnerHighlightColor(e){fk=e}static getInnerHighlightColor(){return fk}static setOuterHilightColor(e){pk=e}static getOuterHighlightColor(){return pk}static setInnerGroupHighlightColor(e){mk=e}static getInnerGroupHighlightColor(){return mk}static setOuterGroupHighlightColor(e){gk=e}static getOuterGroupHighlightColor(){return gk}}class aj extends xt{constructor(e,t){const n=Gn.localeToLocalizedName(t),s=phet.chipper.queryParameters.dev?Gn.wrapLTR(`${n} (${t})`):n,a=phet.chipper.localeData[t].englishName,o=new kt(s,{font:Vi.CONTENT_FONT});super(o.bounds.dilated(5),{cursor:"pointer",tagName:"button",accessibleName:a}),o.center=this.center,this.addChild(o),this.locale=t;const l=$n.get("pushButton"),h=new Rr({fire:()=>{e.value=t,l.play(),this.addAccessibleResponse(Gn.fillIn(rj,{language:a}))},tandem:R.OPT_OUT});this.addInputListener(h),h.isOverProperty.link(f=>{this.stroke=f?la.getInnerGroupHighlightColor():ct.TRANSPARENT});const c=f=>{this.fill=f===t?Hp.PHET_LOGO_BLUE:null};e.link(c)}}class oj extends nl{constructor(e){const t=new Mf({xMargin:5,xAlign:"left",autoRows:15,maxWidth:1e3,resize:!1,children:e.availableRuntimeLocales.map(n=>new aj(e,n))});super(t)}}const lj=new Fe(new He("JOIST/preferences.tabs.localization.regionAndCulture.africa",{en:"Africa",af:"Africa",am:"አፍሪካ",ar:"أفريقيا",ar_KW:"Africa",ar_LY:"أفريقيا",ar_MA:"افريقيا",az:"Afrika",be:"Афрыка",bn:"আফ্রিকা",bs:"Africa",ca:"Àfrica",cs:"Afrika",da:"Afrika",de:"Afrika",el:"Αφρική",es:"África",es_PE:"África",fa:"آفریقا",fa_DA:"افریقا",fi:"Afrikka",fr:"Afrique",gu:"આફ્રિકા",ha:"Afirka",hi:"अफ़्रीका",hr:"Afrika",ht:"Afrik",is:"Afríka",it:"Africa",iw:"אפריקה",kn:"Africa",ko:"아프리카",mn:"Африк",mr:"Africa",ms:"Afrika",nl:"Afrika",pl:"Afryka",pt_BR:"África",ro:"Africa",sk:"Afrika",sl:"Afrika",sp:"Africa",sr:"Africa",sv:"Afrika",sw:"Afrika",te:"ఆఫ్రికా",tg:"Африка",th:"แอฟริกา",tr:"Afrika",vi:"Africa",yo:"ile Afirika",zh_TW:"非洲"},R.OPT_OUT),R.OPT_OUT),hj=new Fe(new He("JOIST/preferences.tabs.localization.regionAndCulture.africaModest",{en:"Africa (Modest)",af:"Africa (Modest)",ar:"أفريقيا (متواضعة)",ar_KW:"Africa (Modest)",ar_LY:"أفريقيا (متواضعة)",ar_MA:"افريقيا (المتواضعة)",az:"Afrika (örtülü)",be:"Афрыка (сціплы)",bn:"আফ্রিকা (Modest)",bs:"Africa (Modest)",ca:"Àfrica (simple)",cs:"Afrika (skromnost)",da:"Afrika (Moderne)",de:"Afrika (bescheiden)",el:"Αφρική (απλή)",es:"África (modesta)",es_PE:"África (modesta)",fa:"آفریقا (پوشیده)",fa_DA:"افریقا (پوشیده)",fr:"Afrique (modeste)",gu:"આફ્રિકા (મોડેસ્ટ)",ha:"Afirka(modest)",hi:"अफ़्रीका (मामूली)",hr:"Afrika",ht:"Afrik (Modès)",is:"Afríka (hógvær)",it:"Africa (modesta per condizioni sociali)",iw:"אפריקה (מודסט)",kn:"Africa (Modest)",ko:"아프리카 (점잖은)",mn:"Африк (Жирийн)",mr:"Africa (Modest)",ms:"Afrika (Sederhana)",nl:"Afrika (bescheiden)",pl:"Afryka (Modest)",pt_BR:"África (modesta)",ro:"Africa (Modest)",sk:"Afrika (Modest)",sl:"Afrika (M)",sp:"Africa (Modest)",sr:"Africa (Modest)",sv:"Afrika(Modest)",sw:"Afrika",te:"ఆఫ్రికా(మోడెస్ట్)",tg:"Африка (муосир)",th:"แอฟริกา (สมัยใหม่)",tr:"Afrika",vi:"Africa (Modest)",yo:"ile Afirika (onírẹ̀lẹ̀)",zh_TW:"非洲（小型區域）"},R.OPT_OUT),R.OPT_OUT),uj=new Fe(new He("JOIST/preferences.tabs.localization.regionAndCulture.asia",{en:"Asia",af:"Asia",am:"እስያ",ar:"آسيا",ar_KW:"Asia",ar_LY:"آسيا",ar_MA:"آسيا",az:"Asiya",be:"Азія",bn:"এশিয়া",bs:"Asia",ca:"Àsia",cs:"Asie",da:"Asien",de:"Asien",el:"Ασία",es:"Asia",es_PE:"Asia",fa:"آسیا",fa_DA:"اسیا",fi:"Aasia",fr:"Asie",gu:"એશિયા",ha:"Asiya",hi:"एशिया",hr:"Azija",ht:"Azi",is:"Asía",it:"Asia",iw:"אסיה",kn:"Asia",ko:"아시아",mn:"Ази",mr:"Asia",ms:"Asia",nl:"Azië",pl:"Azja",pt_BR:"Ásia",ro:"Asia",sk:"Ázia",sl:"Azija",sp:"Asia",sr:"Asia",sv:"Asien",sw:"Asia",te:"ఆసియా",tg:"Осиё",th:"เอเชีย",tr:"Asya",vi:"Asia",yo:"ile Asia",zh_TW:"亞洲"},R.OPT_OUT),R.OPT_OUT),cj=new Fe(new He("JOIST/preferences.tabs.localization.regionAndCulture.latinAmerica",{en:"Latin America",af:"Latin America",am:"ላቲን አሜሪካ",ar:"أمريكا اللاتينية",ar_KW:"Latin America",ar_LY:"أمريكا اللاتينية",ar_MA:"أمريكا اللاتينية",az:"Latin Amerika",be:"Лацінская Амерыка",bn:"ল্যাটিন আমেরিকা",bs:"Latin America",ca:"Amèrica Llatina",cs:"Latinská Amerika",da:"Latinamerika",de:"Lateinamerika",el:"Λατινική Αμερική",es:"América Latina",es_PE:"América Latina",fa:"آمریکای لاتین",fa_DA:"امریکای لاتین",fi:"Latino Amerikka",fr:"Amérique Latine",gu:"લેટિન અમેરિકા",ha:"Amurka ta latin",hi:"लैटिन अमेरिका",hr:"Latinska Amerika",ht:"Amerik Latin",is:"Rómanska Ameríka",it:"America Latina",iw:"אמריקה לטינית",kn:"Latin America",ko:"라틴 아메리카",mn:"Латин Амерк",mr:"Latin America",ms:"Amerika Latin",nl:"Latijns Amerika",pl:"Ameryka Łacińska",pt_BR:"América Latina",ro:"America Latină",sk:"Latinská Amerika",sl:"Latinska Amerika",sp:"Latin America",sr:"Latin America",sv:"Latinamerika",sw:"Amerika ya latini",te:"లాటిన్ అమెరికా",tg:"Америкаи Лотинӣ",th:"ละตินอเมริกา",tr:"Latin Amerika",vi:"Latin America",yo:"ile Latin Amerika",zh_TW:"拉丁美洲"},R.OPT_OUT),R.OPT_OUT),dj=new Fe(new He("JOIST/preferences.tabs.localization.regionAndCulture.oceania",{en:"Oceania",af:"Oceania",ar:"أوقيانوسيا",ar_KW:"Oceania",ar_LY:"أوقيانوسيا",ar_MA:"اوقيانوسيا",az:"Okeaniya",be:"Акіянія",bn:"ওশেনিয়া",bs:"Oceania",ca:"Oceania",cs:"Oceánie",da:"Oceanien",de:"Ozeanien",el:"Ωκεανία",es:"Oceania",es_PE:"Oceanía",fa:"اقیانوسیه",fa_DA:"اقیانوس",fi:"Oseania",fr:"Océanie",gu:"ઓશેનિયા",ha:"Oceania",hi:"ओशिनिया",hr:"Oceanija",ht:"Oseyani",is:"Eyjaálfa",it:"Oceania",iw:"אוקיאניה",kn:"Oceania",ko:"오세아니아",mn:"Далайн",mr:"Oceania",ms:"Oceania",nl:"Oceanië",pl:"Oceania",pt_BR:"Oceania",ro:"Oceania",sk:"Oceánia",sl:"Oceanija",sp:"Oceania",sr:"Oceania",sv:"Oceanien",sw:"Ohenia",te:"ఓషేనియా",tg:"Океания",th:"โอเชียเนีย",tr:"Okyanusya",vi:"Oceania",yo:"ile Oceania",zh_TW:"大洋洲"},R.OPT_OUT),R.OPT_OUT),pj=new Fe(new He("JOIST/preferences.tabs.localization.regionAndCulture.random",{en:"Random",af:"lukraak",ar:"عشوائي",ar_KW:"Random",ar_LY:"عشوائي",ar_MA:"اعتباطي",az:"Təsadüfən",be:"Выпадковы",bn:"Random (এলোমেলো)",bs:"Random",ca:"Aleatori",cs:"Náhodné",da:"Tilfældig",de:"Zufällig",el:"Τυχαία",es:"Aleatorio",es_PE:"Aleatorio",fa:"تصادفی",fa_DA:"تصادفی",fi:"Satunnainen",fr:"Aléatoire",gu:"રેન્ડમ",ha:"Bazuwar",hi:"यादृच्छिक (Random)",hr:"nasumično",ht:"O aza",hu:"Véletlenszerű",is:"Slembið",it:"Casuale",iw:"אקראי",kn:"Random",ko:"무작위",mn:"Санамсаргүй",mr:"Random",ms:"Rawak",nl:"Willekeurig",pl:"Losowo",pt_BR:"Aleatória",ro:"Aleatoriu",sk:"Náhodný",sl:"Naključno",sp:"Random",sr:"Random",sv:"Slumpmässig",sw:"Bila kuzingatia",te:"యాదృచ్ఛిక",tg:"Random",th:"สุ่ม",tr:"Rastgele",vi:"Random",yo:"laileto",zh_TW:"隨機"},R.OPT_OUT),R.OPT_OUT),fj=new Fe(new He("JOIST/preferences.tabs.localization.regionAndCulture.unitedStatesOfAmerica",{en:"United States of America",af:"United States of America",ar:"الولايات المتحدة الأمريكية",ar_KW:"United States of America",ar_LY:"الولايات المتحدة الأمريكية",ar_MA:"الولايات المتحدة الأمريكية",az:"Amerika Birləşmiş Ştatları",be:"Злучаныя штаты Амерыкі",bn:"যুক্তরাষ্ট্র",bs:"United States of America",ca:"Estats Units d'Amèrica",cs:"Spojené státy americké",da:"USA",de:"Vereinigte Staaten von Amerika",el:"Η.Π.Α.",es:"Estados Unidos de América",es_PE:"Estados Unidos de América",fa:"ایالات متحده آمریکا",fa_DA:"ایالات متحده امریکا",fr:"Etats unis d'Amérique",gu:"યુનિટેડ સ્ટેટ્સ ઓફ અમેરિકા",ha:"Amurka ta Amurka",hi:"संयुक्त राज्य अमेरिका",hr:"SAD",ht:"Etazini",is:"Bandaríki Norður-Ameríku",it:"USA",iw:"ארצות הברית",kn:"United States of America",ko:"미국",mn:"Америкийн Нэгдсэн Улсас",mr:"United States of America",ms:"Amerika Syarikat",nl:"Verenigde staten van Amerika",pl:"Stany Zjednoczone Ameryki",pt_BR:"EUA",ro:"Statele Unite ale Americii",sk:"Spojené štáty americké",sl:"Združene države Amerike",sp:"United States of America",sr:"United States of America",sv:"USA",sw:"Umoja wa mataifa ya marekani",te:"అమెరికా సంయుక్త రాష్ట్రాలు",tg:"Иёлоти Муттаҳидаи Амрико",th:"สหรัฐอเทริกา",tr:"Amerika Birleşik Devletleri",vi:"United States of America",yo:"Ilu Amẹrika",zh_TW:"美國"},R.OPT_OUT),R.OPT_OUT),mj={africa:lj,africaModest:hj,asia:uj,latinAmerica:cj,oceania:dj,random:pj,usa:fj};class gj extends Wp{constructor(e){const t=Ne()({tandem:R.OPT_OUT},e),n=Nf.slice().sort().map(s=>({value:s,createNode:()=>new kt(mj[s],Vi.PANEL_SECTION_CONTENT_OPTIONS)}));super(sj,n,phet.joist.sim.topLayer,t)}}const yj=SM,vj=ZY,bj=$Y;class _j extends Of{constructor(e,t,n,s){const r=Ne()({labelContent:yj,phetioVisiblePropertyInstrumented:!1},s);super(Si.LOCALIZATION,t,n,r);const a=new Ai({spacing:Vi.CONTENT_SPACING});if(Nf.length>1){const l=new gj,h=new kt(vj,Vi.CONTROL_LABEL_OPTIONS),c=new pi(bj,Vi.CONTROL_DESCRIPTION_OPTIONS);a.addChild(new Hh({labelNode:h,controlNode:l,descriptionNode:c}))}if(e.supportsDynamicLocale&&e.includeLocalePanel){const l=new mr(ej,Ut({},Vi.CONTROL_LABEL_OPTIONS,{readingBlockDisabledTagName:"h3"})),h=new ha(tj,Vi.CONTROL_DESCRIPTION_OPTIONS),c=new oj(e.localeProperty),f=new Ai({children:[l,h,c],align:"left",spacing:5,stretch:!0,layoutOptions:{stretch:!0}});a.addChild(f)}e.customPreferences.forEach(l=>{const h=l.createContent(s.tandem);a.addChild(new Ge({children:[h]}))}),a.align=a.children.length>1?"left":"center";const o=new Lu({contentNode:a,contentLeftMargin:0});this.addChild(o)}}const Aj=new Fe(new He("JOIST/preferences.tabs.general.accessibilityIntro",{en:"We are adding features to our simulations to make them more inclusive. Some of these features support accessibility for learners with diverse needs and within diverse environments. Explore this menu to review or change the default presentation settings.",af:"Ons voeg kenmerke by ons simulasies om dit meer inklusief te maak. Sommige van hierdie kenmerke ondersteun toeganklikheid vir leerders met uiteenlopende behoeftes en binne uiteenlopende omgewings. Verken hierdie kieslys om die verstekaanbiedinginstellings te hersien of te verander.",am:"ሲሙሌሽኖቻችንን  የበለጠ አካታች ለማድረግ ባህሪያትን እየጨመርን እንገኛለን። ከእነዚህ ባህሪያት መካከል አንዳንዶቹ የተለያየ ፍላጎት ላላቸው እና በተለያዩ አካባቢዎች ውስጥ ላሉ ተማሪዎች ተደራሽነትን ይደግፋሉ። ነባሪውን የአቀራረብ ቅንጅቶችን ለመገምገም ወይም ለመቀየር በዚህ ምናሌ ውስጥ ያሉትን ትሮችን ያስሱ።",ar:"نحن نضيف ميزات إلى عمليات المحاكاة الخاصة بنا لجعلها أكثر شمولاً. تدعم بعض هذه الميزات إمكانية الوصول للمتعلمين ذوي الاحتياجات المتنوعة وفي بيئات متنوعة. استكشف هذه القائمة لمراجعة إعدادات العرض التقديمي الافتراضية أو تغييرها",ar_KW:"تم اضافة مميزات الاندماج للمحاكاة لجعلها اكثر تفاعلية وتحقيق امكانية الوصول للأشخاص ذوي الاحتياجات المتنوعة في البيئات المختلفة.",ar_LY:"نضيف ميزات إلى عمليات المحاكاة الخاصة بنا لجعلها أكثر شمولاً. تدعم بعض هذه الميزات إمكانية الوصول للمتعلمين ذوي الاحتياجات المتنوعة وفي بيئات متنوعة. استكشف هذه القائمة لمراجعة إعدادات العرض الافتراضية أو تغييرها.",ar_MA:"نحن نضيف ميزات إلى عمليات المحاكاة لجعلها أكثر شمولاً. تدعم بعض هذه الميزات إمكانية الوصول للتلاميذ ذوي الاحتياجات المتنوعة وفي بيئات متنوعة. استكشف علامات التبويب في هذه القائمة لمراجعة أو تغيير إعدادات العرض التقديمي الافتراضية.",ar_SA:"نحن نضيف ميزات إلى نماذج المحاكاة لجعلها أكثر شمولاً. تدعم بعض هذه الميزات إمكانية الوصول للمتعلمين ذوي الاحتياجات المتنوعة وفي بيئات متنوعة. استكشف هذه القائمة لمراجعة إعدادات العرض التقديمي الافتراضية أو تغييرها.",ar_SY:"حن نضيف ميزات إلى عمليات المحاكاة الخاصة بنا لجعلها أكثر شمولاً. تدعم بعض هذه الميزات إمكانية الوصول للمتعلمين ذوي الاحتياجات المتنوعة وفي بيئات متنوعة. استكشف هذه القائمة لمراجعة إعدادات العرض التقديمي الافتراضية أو تغييرها",az:"Simulyasiyalarımızı daha əhatəli etmək üçün onlara yeni funksiyalar əlavə edirik. Bu xüsusiyyətlərdən bəziləri xüsusi ehtiyacları olan və müxtəlif mühitlərdə olan öyrənənlər üçün əlçatanlığı dəstəkləməkdir. Ənənəvi təqdimat parametrlərini nəzərdən keçirmək və ya dəyişmək üçün bu menyunu araşdırın.",be:"Мы дадаем функцыі ў нашы сімуляцыі, каб зрабіць іх больш інклюзіўнымі. Некаторыя з гэтых функцый падтрымліваюць даступнасць для навучэнцаў з рознымі патрэбамі і ў розных умовах. Даследуйце ўкладкі ў гэтым меню, каб праглядзець або змяніць налады прэзентацыі па змаўчанні.",bg:"Добавяме функции към нашите симулации, за да ги направим по-приобщаващи. Някои от тези функции поддържат достъпност за учащи с различни нужди и в различни среди. Разгледайте това меню, за да прегледате или промените настройките за представяне по подразбиране.",bn:"আমরা আমাদের সিমুলেশনগুলিতে বৈশিষ্ট্যগুলি যুক্ত করছি যাতে সেগুলিকে আরও অন্তর্ভুক্ত করা যায়৷ এই বৈশিষ্ট্যগুলির মধ্যে কয়েকটি বৈচিত্র্যময় প্রয়োজন এবং বিভিন্ন পরিবেশের মধ্যে শিক্ষার্থীদের জন্য অ্যাক্সেসযোগ্যতা সমর্থন করে। ডিফল্ট উপস্থাপনা সেটিংস পর্যালোচনা বা পরিবর্তন করতে এই মেনুটি অন্বেষণ করুন৷ (We are adding features to our simulations to make them more inclusive. Some of these features support accessibility for learners with diverse needs and within diverse environments. Explore this menu to review or change the default presentation settings.)",bs:"Našim simulacijama dodajemo funkcije kako bismo ih učinili obuhvatnijim. Neke od ovih funkcija podržavaju pristupačnost za učenike sa različitim potrebama i u različitim okruženjima. Istražite kartice u ovom meniju da biste pregledali ili promijenili podrazumijevana podešavanja prezentacije.",ca:"Estem afegint funcions a les nostres simulacions per fer-les més inclusives. Algunes d'aquestes funcions són compatibles per a l'accessibilitat d'estudiants amb necessitats diverses i en entorns diversos. Exploreu les pestanyes d'aquest menú per revisar o canviar la configuració per defecte de la presentació.",cs:"Do našich simulací přidáváme funkce, aby byly inkluzivnější. Některé z těchto funkcí podporují dostupnost pro studenty s různými potřebami a v různých prostředích. Prozkoumejte karty v této nabídce a zkontrolujte nebo změňte výchozí nastavení prezentace.",da:"Vi tilføjer funktioner til vores simuleringer, for at gøre dem mere brugervenlige. Nogle af disse funktioner understøtter tilgængeligheden for elever med forskellige behov og inden for forskellige miljøer. Udforsk denne menu, for at se eller ændre default præsentations-indstillinger.",de:"Wir fügen unseren Simulationen Funktionen hinzu, um sie inklusiver zu machen. Einige dieser Funktionen unterstützen die Zugänglichkeit für Lernende mit unterschiedlichen Bedürfnissen und in unterschiedlichen Umgebungen. Erkunde das Menü um die Standard Präsentationseinstellung zu prüfen oder zu wechseln.",el:"Προσθέτουμε δυνατότητες στις προσομοιώσεις μας για να τις κάνουμε περισσότερο συμπεριληπτικές. Ορισμένες από αυτές τις δυνατότητες υποστηρίζουν την προσβασιμότητα για μαθητές με διαφορετικές ανάγκες και σε διαφορετικά περιβάλλοντα. Εξερευνήστε τις καρτέλες σε αυτό το  μενού για επισκόπηση ή αλλαγή των προκαθορισμένων ρυθμίσεων παρουσίασης.",es:"Estamos agregando funciones a nuestras simulaciones para hacerlas más inclusivas. Algunas de estas funciones son compatibles con la accesibilidad para estudiantes con necesidades diversas y en entornos diversos. Explora las pestañas de este menú para revisar o cambiar la configuración de presentación predeterminada.",es_ES:"Estamos agregando características a nuestras simulaciones para hacerlas más inclusivas. Algunas de estas características respaldan la accesibilidad para estudiantes con necesidades diversas y en entornos diversos. Explore este menú para revisar o cambiar la configuración de presentación predeterminada.",es_MX:`Estamos agregando funciones a nuestras simulaciones para hacerlas más \r

inclusivas. Algunas de estas funciones son compatibles con la \r

accesibilidad para estudiantes con necesidades diversas y en entornos \r

diversos. Explore las pestañas de este menú para revisar o cambiar los ajustes de presentación predeterminados.`,es_PE:"Estamos agregando funciones a nuestras simulaciones para hacerlas más inclusivas. Algunas de estas funciones son compatibles con la accesibilidad para estudiantes con diversas necesidades y en diversos entornos. Explore las pestañas de este menú para revi",eu:"Gure simulazioei funtzioak gehitzen ari gara inklusiboagoak izan daitezen. Ezaugarri hauetako batzuek askotariko beharrak dituzten eta ingurune desberdinetako ikasleentzako irisgarritasuna onartzen dute. Arakatu menu honetako fitxak aurkezpen ezarpen lehenetsiak berrikusteko edo aldatzeko.",fa:"برای جامع تر کردن شبیه سازی هایمان ویژگی های جدیدی به آنها اضافه میکنیم. برخی از این خصوصیت ها برای فراگیرانی با نیازهای متفاوت و در محیط های گوناگون دسترسپذیری بیشتری ارائه میدهد. برای ملاحظه یا تغییر تنظیمات پیشفرض گزینه های این منو را بررسی کنید.",fa_DA:"برای جامع تر کردن شبیه سازی‌های ما ویژگی‌های جدیدی به آن‌ها اضافه می‌کنیم. برخی از این خصوصیت‌ها برای یادگیرندگان با نیازهای متفاوت و در محیط‌های گوناگون دسترس‌پذیری بیشتری ارایه می‌دهد. برای ملاحظه یا تغییر تنظیمات پیش فرض گزینه‌های این منیو را بررسی کنید.",fi:"Lisäämme simulaatioihimme inkluusiivisia ominaisuuksia, jotka tukevat erilaisten oppijoiden tarpeita eri oppimisympäristöissä. Voit tarkastella ja muuttaa tämän simulaation ominaisuuksia tästä valikossa.",fr:"Nous ajoutons des fonctionnalités à nos simulations pour les rendre plus accessibles. Certaines de ces fonctionnalités favorisent l'accessibilité pour les apprenants ayant des besoins divers et dans des environnements variés. Explorez ce menu pour revoir",gl:"Estamos engadindo opcións ás nosas simulacións para facelas máis inclusivas. Algunhas destas opcións ofrecen accesibilidade para persoas con necesidades diversas e en contornas diversas. Explora este menú para revisar ou cambiar as opcións de presentación por defecto.",gu:"અમે અમારા સિમ્યુલેશનમાં વિશેષતાઓ ઉમેરી રહ્યા છીએ જેથી કરીને તેને વધુ સમાવિષ્ટ બનાવી શકાય. આમાંની કેટલીક વિશેષતાઓ વિવિધ જરૂરિયાતો ધરાવતા અને વિવિધ વાતાવરણમાં શીખનારાઓ માટે સુલભતાને સમર્થન આપે છે. ડિફૉલ્ટ પ્રસ્તુતિ સેટિંગ્સની સમીક્ષા કરવા અથવા બદલવા માટે આ",ha:"Muna kara shigar da fasali zuwa cikin simuwarmu don yin su mafi haɗari. Wasu daga cikin wadannan fasali sun taimaka wa samar da damar yin amfani da su ga masu koyon da ke bukatar taushi daban-daban da kuma a cikin yanayi daban-daban. Duba wannan menu don bincika ko canza saitunan shirin bayyana na default.",hi:"हम अपने सिमुलेशन को और अधिक समावेशी बनाने के लिए सुविधाओं को जोड़ रहे हैं। इनमें से कुछ विशेषताएं विविध आवश्यकताओं वाले और विविध वातावरण में शिक्षार्थियों के लिए पहुंच में सहयोग करती हैं। सामान्य प्रस्तुतिकरण सेटिंग की समीक्षा करने या बदलने के लिए मेनू देखें।",hr:"Svojim simulacijama dodajemo značajke kako bismo ih učinili uključivijima. Neke od ovih značajki podržavaju pristupačnost za učenike s različitim potrebama i u različitim okruženjima. Istražite kartice u ovom izborniku kako biste pregledali ili promijenil",ht:"Nou ap ajoute fonksyonalite nan similasyon nou yo pou fè yo plis enklizif. Kèk nan fonksyonalite sa yo sipòte aksè pou elèv k ap aprann ki gen divès bezwen ak nan divès anviwònman. Eksplore meni sa a pou revize oswa chanje paramèt prezantasyon pa defo yo.",hu:`Szimulációinkat\r

különböző befogadó funkciókkal egészítjük ki a jobb hozzáférhetőség végett. E funkciók a\r

speciális szükségletű tanulókat segítik különböző környezetekben. Ebben a\r

menüben áttekintheti és módosíthatja az alapértelmezett prezentációs\r

beállításokat.`,hy:"Մենք մեր նմանակումներին նոր հնարավորություններ ենք ավելացնում՝ դրանք ավելի ներառական դարձնելու համար: Այս հնարավորություններից մի քանիսն ապահովում են մատչելիությունը՝ տարբեր կարիքներ ունեցող սովորողների համար և տարբեր միջավայրերում: Ուսումնասիրեք այս ընտրացանկը՝ դիտելու կամ փոխելու կանխադրված կարգավորումները:",ig:"Anyị na-agbakwunye atụmatụ na ịme anwansị anyị iji mee ka ha na-esonye. Ụfọdụ n'ime atụmatụ ndị a na-akwado ohere maka ndị mmụta nwere mkpa dị iche iche na n'ime gburugburu ebe dị iche iche. Chọgharịa menu a ka ịlele ma ọ bụ gbanwee ntọala ngosi ndabara",in:"Kami sedang menambahkan fitur-fitur baru pada simulasi kami untuk membuatnya lebih lengkap. Beberapa fitur ini mendukung aksesibilitas bagi pelajar dengan berbagai kebutuhan dan di berbagai lingkungan. Jelajahi menu ini untuk melihat atau mengubah pengaturan tampilan default.",is:"Verið er að bæta við eiginleikum við frumgerðina. Sumir þessara eiginleika styðja aðgengi fyrir nemendur með fjölbreyttar þarfir og í fjölbreyttu umhverfi. Skoðaðu þessa valmynd til að skoða eða breyta sjálfgefnum stillingum.",it:"Stiamo aggiungendo funzionalità alle nostre simulazioni per renderle più inclusive. Alcune di queste funzionalità supportano l'accessibilità per gli studenti con esigenze diverse e all'interno di ambienti diversi. Esplora le schede in questo menu per rivedere o cambiare le impostazioni di presentazione prefigurate",iw:"אנו מוסיפים תכונות לסימולציות שלנו כדי להפוך אותן מותאמות יותר. חלק מהתכונות הללו תומכות בנגישות ללומדים עם צרכים מגוונים ובגוון סביבות. סקרו את התפריט כדי לבדוק או לשנות את הגדרות תצוגת ברירות המחדל.",ki:"Thirikari tĩrĩ mĩkarire-inĩ cia maturi gia kũhurĩria ũcio wa nene wa maturi-inĩ. Kĩundũ cia mĩkarire hĩrĩrĩria ũguo kũrĩrĩria-inĩ rĩa maturi-inĩ na matoro makuuru-inĩ aina mĩtego ya kũhurĩria wari ũndũ wa maturi na ũcio wa ng'etanĩ-inĩ. Tũrĩka menu ĩhĩrĩa kuona kũrĩrĩria aho ciothe kĩthĩĩrio-inĩ cia maturi-inĩ tĩragũo ciĩme-inĩ rĩa mbere",kn:"ನಮ್ಮ ಸಿಮ್ಯುಲೇಶನ್‌ಗಳನ್ನು ಇನ್ನಷ್ಟು ಒಳಗೊಳ್ಳುವಂತೆ ಮಾಡಲು ನಾವು ಗುಣವಿಶೇಷಗಳನ್ನು ಸೇರಿಸುತ್ತಿದ್ದೇವೆ. ಈ ಕೆಲವು ಗುಣವಿಶೇಷಗಳು ವೈವಿಧ್ಯಮಯ ಅಗತ್ಯಗಳನ್ನು ಹೊಂದಿರುವ ಮತ್ತು ವೈವಿಧ್ಯಮಯ ಪರಿಸರದಲ್ಲಿ ಕಲಿಯುವವರಿಗೆ ಅನುಕೂಲಾವಸ್ಥೆಯನ್ನು ಬೆಂಬಲಿಸುತ್ತವೆ. ಡೀಫಾಲ್ಟ್ ಪ್ರಸ್ತುತಿ ಸೆಟ್ಟಿಂಗ್‌ಗಳನ್ನು ಪರಿಶೀಲಿಸಲು ಅಥವಾ ಬದಲಾಯಿಸಲು ಈ ಮೆನುವನ್ನು ಎಕ್ಸ್‌ಪ್ಲೋರ್ ಮಾಡಿ.",ko:"우리는 시뮬레이션을 더욱 포괄적으로 만들기 위해 기능을 추가하고 있습니다. 이러한 기능 중 일부는 다양한 요구 사항과 다양한 환경 내에서 학습자의 접근성을 지원합니다. 기본 프리젠테이션 설정을 검토하거나 변경하려면 이 메뉴를 탐색하세요.",ku:`هەندێک بابەت زیاد دەکەین بۆ لێکچوونسازیەکانمان 
 بۆ تا زیاتر گشتگیر بێت.`,lg:"Tuleeta ebipya okusobozesa nabo abalina obulemu obwabuli ngeli. Kebera mu biliwo bwoba ayagala okukyuusa ekiliwo.",lt:"Mes papildome simuliacijas įtraukiosiomis funkcijomis. Kai kurios jų padeda pritaikyti turinį besimokantiesiems su specialiaisiais poreikiais ir įvairiose aplinkose. Naršykite šį meniu ir keiskite numatytuosius simuliacijos pateikimo nustatymus.",mi:"Kei te tāpiri tonu mātou i ngā āheinga ki ā mātou whaihanga, kia piki te kauawhi. Ka āwhina ētahi o ēnei āheinga mō ngā ākonga he kanorau ngā matea, ka noho ki ngā ao kanorau rānei. Tūhuratia ngā ripa o tēnei tahua, ki te pānui, panoni rānei i ngā ritenga",mn:"Бид загварчлалуудаа илүү ойлгомжтой болгохын тулд үйлдлүүдийг хөгжүүлж байна. Тэдгээр нь янз бүрийн хэрэгцээтэй, ялгаатай нөхцөлд суралцахад ойлгомжтой болгохыг хичээнэ. Үзүүлэнгийн өгөгдмөл тохиргоог харах эсвэл өөрчлөхийн тулд энэ цэсийн тайлбарыг уншаарай.",mr:"आम्ही आमच्या सिम्युलेशनमध्ये त्यांना अधिक समावेशक बनवण्यासाठी वैशिष्ट्ये जोडत आहोत. यातील काही वैशिष्‍ट्ये वैविध्यपूर्ण गरजा असलेल्या आणि वैविध्यपूर्ण वातावरणात शिकणाऱ्यांसाठी प्रवेशयोग्यतेचे समर्थन करतात. डीफॉल्ट सादरीकरण सेटिंग्जचे पुनरावलोकन करण्यासाठी किंवा बदलण्यासाठी हा मेनू वापरा.",ms:"Kami sedang menambah ciri-ciri pada simulasi kami untuk menjadikannya lebih inklusif. Beberapa ciri ini menyokong kebolehcapaian untuk pelajar dengan pelbagai keperluan dan dalam persekitaran yang pelbagai. Kaji menu ini untuk semak semula atau ubah tetapan.",mt:"Qed inżidu aktar fatturi fis-simulazzjonijiet biex isiru aktar inklusivi.  Uhud jissapportjaw aktar accessibbilita ghal studenti bi bzonnijiet varjati u ambjenti differenti. Esplora dan il-menu biex tirrevedi jew tbiddel is-settings lesti tal-prezentazzjoni.",nb:"Vi legger til funksjoner i simuleringene våre for å gjøre dem mer inkluderende. Noen av disse funksjonene støtter tilgjengelighet for elever med ulike behov og innenfor ulike miljøer. Utforsk denne menyen for å se eller endre standard presentasjonsinnstillinger.",nl:"We voegen mogelijkheden toe om ze inclusiever te maken. Sommige van deze mogelijkheden ondersteunen toegankelijkheid voor leerlingen met diverse behoeften en binnen diverse omgevingen. Onderzoek dit menu om de standaard weergave instellingen te bekijken of te wijzigen.",ny:"Tikuwonjezera zina paziyerekezo zathu kuti zikhale zophatikiza kwambiri. Zina mwazinthuzi zimathandizira kupezeka kwa ophunzira omwe ali ndi zosowa zosiyanasiyana komanso m'malo osiyanasiyana. Onani ma tab omwe ali patsambali kuti muwunikenso kapena kusintha zokonda zowonetsera.",om:"Simuleeshinoota  keenya irratti amaloota dabalaa jirra, akka isaan caalaatti hammataman taasisaa jirra. Amaloonni kun tokko tokko barattoota fedhii adda addaa qabaniifi naannoo adda addaa keessatti dhaqqabummaa ni deeggaru. Sajoo dhiheessi durtii ilaaluuf",pl:"Dodajemy funkcjonalności do naszych symulacji, aby uczynić je bardziej inkluzywnymi. Niektóre z tych funkcji wspierają dostępność dla uczniów o zróżnicowanych potrzebach i w różnych środowiskach. Skorzystaj z tego menu, aby przejrzeć lub zmienić domyślne ustawienia wyświetlania.",ps:"د سېمولېشن د جامع کولو لپاره مونږ ځینې ځاننګړتیاوې اضافه کوو، له دې اضافه کولو څخه یې ځینې يې په مختلفو محیطونو او شرایطو کې د زده کوونکو مختلفې اړتیاوې  په ښه ډول پوره کوي. دغه مینیو وپلتئ او یا هم تنظیمات اولني حالت ته راوړئ.",pt:"Estamos a adicionar recursos às nossas simulações para as tornar mais inclusivas. Alguns desses recursos são acessíveis a alunos com necessidades diversas e em ambientes diversos. Explore as guias neste menu para rever ou alterar as configurações de apres",pt_BR:"Estamos adicionando recursos às nossas simulações para torná-las mais inclusivas. Alguns deles oferecem acessibilidade para estudantes com diversas necessidades e em diversos ambientes. Explore as guias neste menu para revisar ou alterar as configurações.",qu:"We are adding features to our simulations to make them more inclusive. Some of these features support accessibility for learners with diverse needs and within diverse environments. Explore this menu to review or change the default presentation settings.",ro:"Adăugăm caracteristici simulărilor noastre pentru a le face mai incluzive. Unele dintre aceste caracteristici sprijină accesibilitatea pentru cursanții cu nevoi diverse și în medii diverse. Explorați acest meniu pentru a revizui sau schimba setările implicite ale prezentării.",ru:"Мы добавляем функции в наши интерактивные модели, чтобы сделать их более содержательными. Некоторые из этих функций поддерживают доступность для обучающихся с различными потребностями и в различных средах. Изучите вкладки в этом меню, чтобы просмотреть ил",rw:"Turimo kongeramo ibiranga mu mayigana byacu kugirango turusheho gufasha abantu bose. Bimwe muri ibi biranga gushyigikira abiga bafite ibyo bakeneye bitandukanye kandi mu buryo butandukanye. Shakisha ibisobanuro biri muri iyi menu kugirango usubiremo .",se:"Mii lasihit válljejumiid min simuleremiidda searvadahttit eambbosiid. Muhtin válljejumit veahkehit ohppiid geain leat erenoamáš dárbbut ja erenoamáš birrásat. Suokkar dán fálu geahččat dahje rievdadit vállejumiid mat leat ovdagihtii biddjon.",sk:"Do našich simulácií pridávame funkcie, aby boli široko využiteľné. Niektoré z týchto funkcií podporujú dostupnosť pre študentov s rôznymi potrebami a v rôznych prostrediach. Preskúmajte túto ponuku a skontrolujte alebo zmeň",sl:"Simulacijam dodajamo lastnosti, da postajajo bolj inkluzivne. Nekatere od lastnosti podpirajo dostop za osebe z različnimi potrebami znotraj različnih okolij. S pomočjo tega menuja preglejte ali spremenite privzete nastavitve za prikaz.",sn:"Isu tiri kuwedzera maficha kune yedu simulation kuti iwedzere kusanganisa. Zvimwe zvezvinhu izvi zvinotsigira kuwaniswa kwevadzidzi vane zvido zvakasiyana uye mukati menzvimbo dzakasiyana. Ongorora iyi menyu kuti uongorore kana kushandura marongero emharidzo.",sp:"Re oketša dikarolo go ditshepedišo tša rena tša go ekiša go di dira gore di akaretše bohle. Tše dingwe tša diponagalo tše di thekga phihlelelo go baithuti bao ba nago le dinyakwa tše di fapanego le ka gare ga ditikologo tše di fapanego. Hlahloba thepo ye go sekaseka goba go fetoa dipeakanyo ta tlhagiso ta maitirelo.",sq:"Ne po shtojmë veçori në simulimet tona për t'i bërë ato më gjithëpërfshirëse. Disa nga këto veçori mbështesin aksesin për nxënësit me nevoja të ndryshme dhe brenda mjediseve të ndryshme. Eksploroni këtë menu për të rishikuar ose ndryshuar cilësimet e para",sr:"Нашим симулацијама додајемо функције како бисмо их учинили обухватнијим. Неке од ових функција подржавају приступачност за ученике са различитим потребама и у различитим окружењима. Истражите картице у овом менију да бисте прегледали или променили подразумевана подешавања презентације.",st:"re eketsa likaroloana ho etsa liketsiso tsa rona li kenyeletse motho e mong le e mong, hore baithuti bohle ba ithute ka nako ea bona le ho latela litlhoko tsa bona.",sv:"Vi lägger till funktioner i våra simuleringar för att göra dem mer inkluderande. Vissa av dessa funktioner stödjer tillgänglighet för elever med olika behov och inom olika miljöer. Utforska flikarna i den här menyn för att granska eller ändra standardinstä",sw:"Tunaongeza vipengele kwenye simulesheni yetu ili kuzifanya ziwe jumuishi zaidi. Baadhi ya vipengele hivi vinawezesha wanafunzi wenye mahitaji tofauti na mazingira tofauti kuweza kuzitumia. Chunguza menyu hii ili uboreshe au ubadili mipangilio ya muonekano msingi.",te:"We are adding features to our simulations to make them more inclusive. Some of these features support accessibility for learners with diverse needs and within diverse environments. Explore the tabs in this menu to review or change the default presentation",tg:"Мо ба симулятсияҳои худ хусусиятҳои нав илова мекунем, то онҳо фарогиртар шаванд. Баъзе аз ин хусусиятҳо дастрасиро барои хонандагони дорои ниёзҳои гуногун ва дар муҳитҳои гуногун беҳтар мекунанд. Ин менюро омӯзед, то танзимоти пешфарзи намоишро баррасӣ ё тағйир диҳед.",th:"เราจะเพิ่มส่วนประกอบยังการจำลองแบบเพื่อให้สอดคล้องที่สุด โดยส่วนประกอบนี้จะช่วยตอบสนองความต้องการของผู้เรียนที่แตกต่างกันได้ โดยสามารถปรับแต่งจากค่าตั้งต้นได้",tk:"Simulýasiýalarymyzy inklýuziw etmek üçin olara aýratynlyklary goşýarys. Bu aýratynlyklaryň käbirleri dürli zerurlyklary bolan we dürli gurşawdaky öwrenijilere elýeterliligi goldaýar. Öňden bellenen görkeziş sazlamalaryny gözden geçirmek ýa-da üýtgetmek üçin bu menýuny görüň.",tl:"Nagdaragdag kami ng mga feature sa aming mga simulasyon para gawing mas inklusibo ang mga ito. Sinusuportahan ng ilan sa mga feature na ito ang accessibility para sa mga mag-aaral na may magkakaibang pangangailangan at sa loob ng magkakaibang kapaligiran. I-explore ang menu na ito para suriin o baguhin ang mga default na setting ng presentation.",tn:"Re tsenya dikarolo mo setshwantshong tse di dirang gore se akaretse mongwe le mongwe. Dingwe tsa dikarolo tse di dira gore baithuti ba ba nang le dikgwetlho tse di farologanyeng ba kgone go dirisa setshwantsho se. Lekeletsa ditab tsa thulaganyo go thusa go sekaseka kgotsa go fetole metheo ya tebego. ",tr:"Simülasyonlarımızı daha kapsayıcı hale getirmek için özellikler ekliyoruz. Bu özelliklerden bazıları, farklı ihtiyaçları olan ve farklı ortamlarda bulunan öğrenciler için erişilebilirliği destekler. Varsayılan sunum ayarlarını gözden geçirmek veya değiştirmek için bu menüyü inceleyin.",tw:"Yɛ de dwumadie yi su bi ɛɛka ho sɛ nia ɛbɛ yɛ a, ɛbɛ si pi. Saa ɛsu yi boa ma asuafoɔ a wowɔ miamia bebire bɛ di ho mfasoɔ. Hwiwhɛ ɛsu yi mu na sesa nhyɛasedie a wo de ayɛ ayɛ dwuma yi.",uk:"Ми додаємо функції до наших симуляцій, щоб зробити їх більш інклюзивними. Деякі з цих функцій підтримують доступність для учнів з різними потребами та в різних середовищах. Перегляньте вкладки в цьому меню, щоб переглянути або змінити налаштування предста",ur:"ہم اپنے سیمولیشنوں میں کئی نئی خصوصیات شامل کر رہے ہیں تاکہ انہیں مزید جامع بنایا جا سکے۔ ان میں سے کچھ خصوصیات متنوع ضروریات کے ساتھ اور متنوع ماحول میں سیکھنے والوں کے لیے رسائی کی سہولت فراہم کرتی ہیں۔ پہلے سے طے شدہ پیشکش کی ترتیبات کا جائزہ لینے یا تبدیل کرنے کے لیے اس مینو کو دیکھیں۔",uz:"Biz simulyatsiyalarimizni yanada qamrab olish uchun xususiyatlarni qo'shmoqdamiz. Ushbu xususiyatlardan ba'zilari turli xil ehtiyojlarga ega va turli muhitlarda o'quvchilar uchun foydalanish imkoniyatini qo'llab-quvvatlaydi. Standart taqdimot sozlamalarini ko‘rib chiqish yoki o‘zgartirish uchun ushbu menyuni o‘rganing.",vi:`We are adding features to our simulations to make them more inclusive. 

Some of these features support accessibility for learners with diverse 

needs and within diverse environments. Explore the tabs in this menu to 

review or change the default`,wo:"ńon Gi Yok Ay Jumtukay Ci Po Yi Ngir Mu Gëna ñiong. Yen Ci Jumtukay Yi  Dina Tax ñiy Nafar Gëna Yeg Ci Lunuy Soxla.",yo:"A n ṣafikun awọn ẹya si awọn iṣeṣiro wa lati jẹ ki wọn ni itọsi diẹ sii. Diẹ ninu awọn ẹya wọnyi ṣe atilẹyin iraye si fun awọn akẹẹkọ pẹlu awọn iwulo oniruuru ati laarin awọn agbegbe oniruuru. Ṣawari akojọ aṣayan yii lati ṣe atunyẹwo tabi yi awọn eto igbe",zh_HK:"我們正在為我們的模擬添加功能，以使其更具包容性。其中一些功能，令具有不同需求和在不同環境中的學習者更能理解或運用所提供的功能。瀏覽此菜單以查看或更改默認演示設置。",zh_TW:"我們正嘗試在模擬教材中加入更多功能。這些功能中有些是為了支援各種無障礙需求的學習者與環境。在此選單的分頁中查看與變更預設的設定。",zu:"Sengeza izici emifanekisweni yethu ukuze siyenze ibandakanye kakhudlwana. Ezinye zalezi zic zisekela ukufinyeleleka abafundi anezidingo ezihlukahlukene futhi ngaphakathi kwendawo ehlukahlukene,Hlola le menyu ukuze ubuyekeze noma uguqule izilungiselelo zephrezentheshini ezizenzakalelayo."},R.OPT_OUT),R.OPT_OUT),wj=new Fe(new He("JOIST/preferences.tabs.general.moreAccessibility",{en:"To find other simulations with inclusive features, look for Access and Inclusion on the simulation filter page and filter by inclusive feature.",af:"Om ander simulasies met inklusiewe kenmerke te vind, soek Toegang en Insluiting op die simulasiefilterbladsy en filter volgens inklusiewe kenmerk.",am:"ሌሎች አካታች ባህሪያትን ያካተቱ ሲሙሌሽኖችን ለማግኘት በሲሙሌሽን ማጣሪያ ገጽ ላይ መዳረሻ እና ማካተትን ይፈልጉ እና በአካታች ባህሪ ያጣሩ።",ar:"للعثور على عمليات محاكاة أخرى ذات ميزات شاملة ، ابحث عن Access and Inclusion في صفحة مرشح المحاكاة وقم بالتصفية حسب الميزة الشاملة",ar_KW:'اختر"مميزات الاندماج" في مرشح البحث للعثور على محاكاة أخرى تحتوي  هذه المميزات.',ar_LY:'للعثور على محاكاة أخرى ذات ميزات شاملة، ابحث عن "الوصول والشمول" في صفحة مرشح المحاكاة وقم بالتصفية حسب الميزة الشاملة.',ar_MA:"للعثور على عمليات محاكاة أخرى ذات ميزات شاملة ، ابحث في صفحة مرشح المحاكاة وقم بالضبط حسب الميزة الشاملة.",ar_SY:"للعثور على عمليات محاكاة أخرى ذات ميزات شاملة ، ابحث عن Access and Inclusion في صفحة مرشح المحاكاة وقم بالتصفية حسب الميزة الشاملة",az:'Əhatəli xüsusiyyətlərə malik digər simulyasiyaları tapmaq üçün simulyasiya filtri səhifəsində "Giriş və Daxiletmə"ni axtarın və əhatəli xüsusiyyətə görə filtrləyin.',be:"Каб знайсці іншыя сімуляцыі з інклюзіўнымі функцыямі, шукайце",bg:"За да намерите други симулации с включени функции, потърсете Достъп и включване на страницата с филтър за симулация и филтрирайте по включена функция.",bn:"অন্তর্ভুক্ত বৈশিষ্ট্য সহ অন্যান্য সিমুলেশনগুলি খুঁজে পেতে, সিমুলেশন ফিল্টার পৃষ্ঠায় অ্যাক্সেস এবং অন্তর্ভুক্তির সন্ধান করুন এবং অন্তর্ভুক্ত বৈশিষ্ট্য দ্বারা ফিল্টার করুন (To find other simulations with inclusive features, look for Access and Inclusion on the simulation filter page and filter by inclusive feature.)",bo:"ཊི་ཊེ་ནི་ཡམ།",bs:"Da biste pronašli druge simulacije sa inkluzivnim funkcijama, potražite Pristup (Access) i uključivanje na stranici filtera za simulaciju i filtrirajte po inkluzivnoj funkciji.",ca:"Per trobar altres simulacions amb funcions inclusives, cerqueu Accés i Inclusió a la pàgina del filtre de simulació i filtreu la funció inclusiva.",cs:"Chcete-li najít další simulace s inkluzivními prvky, použijte na stránce simulací filtování podle Přístupu a Použitelnosti.",da:"For at finde andre simuleringer med brugervenlige egenskaber, søg da efter Adgang og Inklusion på simulationsfilter-siden, og filtrer efter inkluderende egenskaber.",de:"Um andere Simulationen mit inklusiven Merkmalen zu finden, suchen Sie auf der Übersichtsseite der Simulationen nach Barrierefreiheit und filtern Sie nach inklusiven Merkmalen.",el:"Για να βρείτε άλλες προσομοιώσεις με λειτουργίες συμπερίληψης, κάντε αναζήτηση με τις λέξεις 'Πρόσβαση' και 'Συμπερίληψη' στη σελίδα των φίλτρων της προσομοίωσης.",es:"Para encontrar otras simulaciones con funciones de accesibilidad, dirígete a la página de filtro de simulación en el sitio web de PhET y filtra por función de accesibilidad.",es_ES:"Para encontrar otras simulaciones con funciones inclusivas, busque Acceso e inclusión en la página de filtros de simulación y filtre por función inclusiva.",es_MX:`Para encontrar otras simulaciones con funciones de accesibilidad, vaya a\r

 la página de filtro de simulación en el sitio web de PhET y filtre por \r

función de accesibilidad.`,es_PE:"Para encontrar otras simulaciones con funciones inclusivas, busque Acceso e inclusión en la página de filtro de simulación y filtre por función inclusiva.",eu:"Ezaugarri inklusiboak dituzten beste simulazio batzuk aurkitzeko, bilatu Sarbidea eta inklusioa simulazio iragazkiaren orrian eta iragazi funtzio inklusiboaren arabera.",fa:"برای یافتن سایر شبیه سازی ها با خصوصیت های جامع، در صفحه فیلتر شبیه سازی به دنبال  Access and Inclusion بگردید و نتایج را بر حسب ویژگی مد نظر فیلتر کنید.",fa_DA:"برای دریافت سایر شبیه سازی‌ها با خصوصیت‌های جامع، در صفحه فلتر شبیه سازی به دنبال  Access and Inclusion بگردید و نتایج را بر حسب ویژگی مد نظر فلتر کنید.",fi:"Voit etsiä lisää käyttöaputoimintoja sisältäviä simulaatioita Etsi-sivun suodattimilla.",fr:"Pour trouver d'autres simulations avec des caractéristiques intégrées, recherchez Accès et intégration sur la page de filtrage des simulations et filtrez par caractéristique intégrée.",gl:"Para atopar outras simulacións con opcións inclusivas, busca a sección Accesibilidade e Inclusión na páxina de filtrado de simulacións e filtra pola característica inclusiva que queiras.",gu:"સમાવિષ્ટ સુવિધાઓ સાથે અન્ય સિમ્યુલેશન શોધવા માટે, સિમ્યુલેશન ફિલ્ટર પૃષ્ઠ પર ઍક્સેસ અને સમાવેશ માટે જુઓ અને સમાવિષ્ટ સુવિધા દ્વારા ફિલ્ટર કરો.",ha:"domin samun sauran kwaikwayon da sauran fasalta, duba hanyar da ya hadu a kwaikwayon a shafin ku cire.",hi:"समावेशी सुविधाओं के साथ अन्य सिम्युलेशन खोजने के लिए,सिम्युलेशन फ़िल्टर पेज पर एक्सेस और समावेशन की तलाश करें और समावेशी सुविधा द्वारा फ़िल्टर करें।",hr:"Da biste pronašli druge simulacije s uključivim značajkama, potražite Pristup i uključivanje na stranici filtra simulacije i filtrirajte po značajki uključivanja.",ht:"Pou jwenn lòt similasyon ak fonksyonalite enklisif, chèche aksè ak enklizyon sou  paj filtè similasyon an epi filtre pa fonksyonalite enklisif.",hu:`További, befogadó funkciókkal rendelkező szimulációkért keresse meg a Hozzáférés & befogadás elemet a szimulációs szűrő oldalon, és\r

szűrjön befogadó funkció szerint.`,hy:"Ներառական գործառույթներով այլ նմանակուներ գտնելու համար նմանակուների զտման էջում փնտրեք Access and Inclusion և զտեք ըստ ներառական հատկանիշի",ig:"Ka ịchọta ịme anwansị ndị ọzọ nwere njirimara nsonye, chọọ Access na nsonye na ibe nzacha ịme anwansị wee nzacha site na njirimara nsonye.",in:"Untuk menemukan simulasi lain dengan fitur lebih lengkap, cari 'Akses dan 'Inclusive Features' di halaman filter simulasi dan filter berdasarkan fitur inklusif.",is:"Til að finna aðrar hermanir með  svipuðuðum eiginleikum skaltu leita að Aðgangur og innifalinn á hermunasíusíðunni og sía eftir eiginleikum innifalinn.",it:"Per trovare altre simulazioni con funzionalità inclusive, cerca Accesso e Inclusione nella pagina del filtro di simulazione e filtra per funzionalità inclusive.",iw:"למצוא הדמיות אחרות עם תכונות נגישות, יש להיכנס לעמוד המסננים של ההדמיות באתר PhET ולסנן באמצעות רכיבי נגישות.",ki:"Kwĩhona njira cia kũtũgũkũra mathũngũthi-inĩ macio akeno, ũgũka gũko cia 'Access na Inclusion' kuwarĩ wa kũgũkũra rũũrũ ciothe rũmwe na kũgũkũra nĩngĩria-inĩ ũkũo cia kũtũgũkũra.",kn:"ಅಂತರ್ಗತ ವೈಶಿಷ್ಟ್ಯಗಳೊಂದಿಗೆ ಬೇರೆ ಸಿಮ್ಯುಲೇಶನ್‌ಗಳನ್ನು ಹುಡುಕಲು, ಸಿಮ್ಯುಲೇಶನ್ ಫಿಲ್ಟರ್ ಪುಟದಲ್ಲಿ ಪ್ರವೇಶ ಮತ್ತು ಸೇರ್ಪಡೆಗಾಗಿ ನೋಡಿ ಮತ್ತು ಅಂತರ್ಗತ ವೈಶಿಷ್ಟ್ಯದ ಮೂಲಕ ಫಿಲ್ಟರ್ ಮಾಡಿ.",ko:"특성이 내포된 다른 시뮬레이션을 찾기 위해서 시뮬레이션 필터 페이지와 포함된 특성의 필터를 찾아볼 것",ku:"بۆئەوەی لێکچوانسازیە گشتگیرەکان بدۆزیتەوە، بە شوێن Access and Inclusion دا بگەڕێ",lg:"Bwoba onoonya simulation ekozesebwa abaliko obulemu genda awali ",lt:"Norėdami rasti kitas simuliacijas su įtraukiosiomis funkcijomis, ieškokite „Pritaikymas ir įtraukimas",mi:"Ki te kimi i ērā o ngā whaihanga kua urua he āhuatanga kauawhi, kimihia",mn:'Сонирхсон загварчлалаа олохын тулд "Загварчлалууд" цэснээс сонголт хийнэ үү.',mr:"सर्वसमावेशक वैशिष्ट्यांसह इतर सिम्युलेशन शोधण्यासाठी, सिम्युलेशन फिल्टर पृष्ठावर प्रवेश करा. समावेश शोधा आणि सर्वसमावेशक वैशिष्ट्याद्वारे गाळून घ्या.",ms:"Untuk mencari simulasi lain termasuk ciri - cirinya, cari Akses dan Kemasukan pada halaman penapis simulasi dan tapis mengikut ciri-cirinya.",mt:"Jekk trid simulazzjonijiet b'karatteristici inkussivi, fittex Access u Inkluzjoni fil-pagna filter tas-simulazzjoni u uzaha.",nb:"For å finne andre simuleringer med inkluderende funksjoner, se etter tilgang og inkludering på simuleringsfiltersiden og filtrer etter inkluderende funksjon.",nl:"Kijk in Toegang en inclusie op de simulatie filter pagina om andere simulaties te vinden die inclusieve mogelijkheden hebben en filter op de inclusieve mogelijkheid.",nn:"For å finne andre simuleringer med inkluderende funksjoner, se etter tilgang og inkludering på simuleringsfiltersiden og filtrer etter inkluderende funksjon.",ny:"Kuti mupeze ziyerekezo zina zokhala ndi zophatikizika, yang'anani Kufikira ndi Kuphatikizika pa tsamba lofananira la filter ndikusefera ndi mawonekedwe ophatikiza.",om:"Simuleeshinii biroo amaloota hammataa qaban argachuuf, fuula filataa simuleeshinii irratti argachuu fi hammatamuu barbaadi fi amala hammataatiin calaqqisi.",pl:"Aby znaleźć inne symulacje z funkcjami ułatwień dostępu, poszukaj opcji Dostęp i integracja na stronie filtrowania symulacji i filtruj według funkcji ułatwień dostępu.",ps:"د نورو سېمولېشنونو او د جامع ځانګړتیاوو ته د لاس رسې لپاره د سېمولېشن د فلټر په صفحه کې   Access and Inclusion وګورئ، او نتایج یې د جامعو ځانګړتیاوي په نظر کې نیولو سره  فلتر یا تصفیه کړئ.",pt:"Para encontrar outras simulações com recursos inclusivos, procure por Acessível e Inclusão na página de filtros de simulação e filtre por recurso inclusivo.",pt_BR:"Procure outras simulações com acessibilidade! Na página das simulações no Portal do PhET, olhe em Acessibilidade & Inclusão e filtre por Recursos Inclusivos.",qu:"To find other simulations with inclusive features, look for Access and Inclusion on the simulation filter page and filter by inclusive feature.",ro:"Pentru a găsi alte simulatoare cu caracteristici incluzive, caută Acces și Incluziune în pagina de filtrare a simulatoarelor și filtrează după caracteristicile incluzive.",ru:"Чтобы найти другие интерактивные модели с инклюзивными функциями, найдите «Доступ и включение» на странице фильтра симуляций и отфильтруйте по функции содержания.",rw:"Kugirango ubone andi mayigana hamwe n'ibintu birimo, reba uburyo bwo Kwinjira no Kwinjiza ku rupapuro rwigana rwa filteri na filteri ukoresheje ibintu byose.",se:"Vai gávnnat eará simuleremiid main leat searvadahtti válljejumit, oza Beassan ja Searvadahttin simulerema filttar siiddus ja filttaraste searvadahttin válljejumi bokte.",sk:"Ak chcete nájsť ďalšie simulácie s inkluzívnymi funkciami, tak na stránke vyberte položku „Prístupnosť“ a zadajte podmienky filtrovania podľa požadovaných funkcií.",sl:"Če želite poiskati druge simulacije z inkluzivnimi lastnostmi, poglejte pod Dostop in Inkluzija na strani s simulacijami in filtrirajte po parametru inkluzija.",sn:"Kuti uwane mamwe masimulations ane anosanganisirwa maficha, tsvaga Access neKusanganisirwa pane simulation firita peji wofirita neficha yekusanganisirwa.",sp:"Go hwetša ditshepedišo tše dingwe tša go ekiša tše di nago le dikarolo tše di akaretšago, lebelela Phihlelelo le Go akaretšwa letlakaleng la sefa ya go ekiša gomme o sefe ka tšobotsi ye e akaretšago.",sq:"Për të gjetur simulime të tjera me veçori gjithëpërfshirëse, kërkoni për Leje dhe Përfshirje (Access and Inclusion) në faqen e filtrit të simulimit dhe filtrojeni sipas veçorisë përfshirëse.",sr:"Да бисте пронашли друге симулације са инклузивним функцијама, потражите Приступ (Access) и укључивање на страници филтера за симулацију и филтрирајте по инклузивној функцији.",st:"Ho fumana mekhoa e meng e kenyelelitsoeng ka simulation, batlana le Tokollo le ho Kenyelletsa holuma leqephe le sefang la simulation ebe u sefa ka mokhoa o kenyeletsang.",sv:"För att hitta andra simuleringar med inkluderande funktioner, leta efter Access och Inclusion på simuleringsfiltersidan och filtrera efter inkluderande funktion.",sw:"Ili kupata  simulesheni nyingine zilizojitosheleza, tafuta ufikiaji na utoshelevu kwenye kichujio cha simulesheni na uchuje kwa kipengele cha utoshelevu.",te:"To find other simulations with inclusive features, look for Access and Inclusion on the simulation filter page and filter by inclusive feature.",tg:'Барои пайдо кардани дигар симулятсияҳо бо хусусиятҳои фарогир, ба саҳифаи филтри симулятсияҳо рафта, "Дастрасӣ ва фарогирӣ"-ро ҷустуҷӯ кунед ва онҳоро аз рӯйи хусусиятҳои фарогир филтр намоед.',th:"หาสถานการณ์จำลองอื่น ๆ ที่มีส่วนประกอบเพิ่มเติม กรุณาเลือกใช้ตัวกรองที่หน้าการจำลองแบบ",tk:"Inklýuziw aýratynlyklary bolan başga simulýasiýalary tapmak üçin, simulýasiýa süzgüji sahypasynda Elýeterlilik we Inklýuziýa gözläň we inklýuziýa aýratynlygy boýunça süzüň.",tl:"Upang makahanap ng iba pang mga simulasyon na may kasamang mga tampok, hanapin ang Access at Pagsasama sa pahina ng filter ng simulation at i-filter ayon sa tampok na kasama.",tr:"Kapsayıcı özelliklere sahip diğer simülasyonları bulmak için, simülasyon filtresi sayfasında Erişim ve Dahil Etme'yi arayın ve kapsayıcı özelliğe göre filtreleyin.",tw:"Sɛ wo rehwihwɛ dwumadie yi su a biribiara wom a, hwɛ dwumadie yi mu kratafa a wa hyɛ biribiara no.",uk:"Щоб знайти інші моделювання з інклюзивними функціями, знайдіть",ur:"شمولیاتی خصائص والے دیگر سیمولیشن کو ڈھونڈھنے کیلئے سیمولیشن فلٹر پیج پر ایکسس اور انکلوزن پر نگاہ ڈالیں اور شمولیاتی فیچر کے ساتھ فلٹر کریں",uz:"Inklyuziv xususiyatlarga ega boshqa simulyatsiyalarni topish uchun simulyatsiya filtri sahifasida Kirish va Inklyuzionni qidiring va inklyuziv xususiyat bo'yicha filtrlang.",vi:`To find other simulations with inclusive features, look for Access and 

Inclusion on the simulation filter page and filter by inclusive feature.`,wo:"Ngir  Gis Yenen Po, xolal Benen Yon",yo:"Lati wa awọn iṣeṣiro miiran pẹlu awọn ẹya ifisi, wa Wiwọle ati Ifisi lori oju-iwe àlẹmọ kikopa ati àlẹmọ nipasẹ ẹya ara ẹrọ.",zh_HK:"要查找具有包容性特徵的其他模擬，請在模擬過濾器頁面上查找訪問和包含並按包容性特徵進行過濾。",zh_TW:"要查詢其他有無障礙功能的模擬教材，請到教材清單的過濾器選擇。",zu:"Ukuze uthole okunye ukulingisa okunezici ezikhethekile, bheka okuthi Ukufinyelela nokufakwa ekhasini."},R.OPT_OUT),R.OPT_OUT),Sj=new Dt([Mr],i=>phet.chipper.localeData[i].direction==="ltr");class Pj extends Of{constructor(e,t){super(Si.OVERVIEW,e,t);const n=an({},Vi.PANEL_SECTION_CONTENT_OPTIONS,{maxWidth:null,lineWrap:600,maxHeight:600,tagName:"p"}),s=[new ha(Aj,n),new ha(wj,n)],r=new Ai({spacing:10,children:s});this.addChild(r);const a=o=>{s.forEach(l=>{const h=o?"left":"right";l.align=h,r.align=h})};Sj.link(a)}}class Tj extends Of{constructor(e,t,n,s){const r=Ne()({labelContent:"Simulation",phetioVisiblePropertyInstrumented:!1},s);super(Si.SIMULATION,t,n,r);const a=new Ai({align:"left",spacing:Vi.CONTENT_SPACING});this.addChild(a);const o=[];e.customPreferences.forEach(l=>{const h=l.createContent(r.tandem),c=new Lu({contentNode:h});o.push(c)}),a.children=o}}const xj=new Fe(new He("JOIST/preferences.tabs.visual.interactiveHighlights",{en:"Interactive Highlights",af:"Interaktiewe hoogtepunte",am:"መስተጋብራዊ ድምቀቶች",ar:"يسلط الضوء على التفاعلية",ar_KW:"المميزات التفاعلية",ar_LY:"أبرز الأحداث التفاعلية",ar_MA:"إضاءات تفاعلية",ar_SY:"يسلط الضوء على التفاعلية",az:"İnteraktiv vurğular",be:"Інтэрактыўныя асноўныя моманты",bg:"Интерактивни маркери",bn:"Interactive Highlights",bs:"Interaktivni detalji",ca:"Interactius destacats",cs:"Interaktivní zvýraznění",cy:"Uchelbwyntiau Rhyngweithiol",da:"Interaktive highlight",de:"Interaktive Highlights",el:"Διαδραστικές επισημάνσεις",es:"Destacar Interactivos",es_ES:"Aspectos destacados de la interacción",es_MX:"Destacar Interactivos",es_PE:"Luces interactivas",eu:"Keinu interaktiboak",fa:"نکات تعاملی",fa_DA:"نکات تعاملی",fi:"Vuorovaikutustehosteet",fr:"Exposition interactive",gl:"Destacar elementos interactivos",gu:"ઇન્ટરેક્ટીવ હાઈલાઈટ્સ",ha:"hulda mai mahimmanci",hi:"मुख्य आकर्षक पारस्परिक क्रियाएँ",hr:"Interaktivni naglasci",ht:"Pwen Esansyèl Entèraktif",hu:"Interaktív szövegkiemelések",hy:"Ինտերակտիվ իրադարձություններ",ig:"Isi Ihe Mmekọrịta",in:"Sorotan Interaksi",is:"Skerpa á gagnvirkni",it:"Effetti Visivi",iw:"דגשים אינטראקטיביים",ki:"Mĩitĩrwo Mũrũ-Inĩ-ini",kn:"ಅಂತರ್ವರ್ತನಾ ಪ್ರಮುಖಾಂಶಗಳು",ko:"상호작용 하이라이트",ku:"بەرچاوخستنی کارلێکەکان",lg:"Ebisukulumye",lt:"Sąveikos rodymas",mi:"He Tīpako Pāhekoheko",mn:"Интерактивийн онцлог",mr:"परस्परसंवादी हायलाइट्स",ms:"Sorotan Interaktif",mt:"Punti importanti interattivi",nb:"Interaktive høydepunkter",nl:"Interactieve highlights",nn:"Interaktive høgdepunkt",ny:"Zowonetsa Zokambirana",om:"Ijoo dubbii Wal-qunnamtii",pl:"Interaktywne wyróżnienia",ps:"په زړه پورې لنډيزونه",pt:"Destaques Interativos",pt_BR:"Destaques Interativos",qu:"Interactive Highlights",ro:"Evidențiatori interactivi",ru:"Интерактивные базовые моменты",rw:"Iby'ingenzi",se:"Interaktiiva čalmmustahttin",sk:"Interaktívne zvýraznenia",sl:"Interaktivni napisi",sn:"Interactive Highlights",sp:"Dintlhakgolo tša Tšhomišano",sq:"Pika kryesore Interaktive",sr:"Интерактивни детаљи",st:"lintlha-kholo tse rutang",sv:"Interaktiva höjdpunkter",sw:"Mambo Muhimu Yanayoingiliana",te:"ఇంటరాక్టివ్ హైలైట్స్",tg:"Нишонаҳои интерактивӣ",th:"ไฮไลท์การมีปฏิสัมพันธ์",ti:"ኣሳታፊ መርኣያታት",tk:"Interaktiw tapawutlanmalar",tl:"Mga Interactive na Highlight",tn:"Ditshedimoso tse di amegang",tr:"Simülasyonda Öne Çıkanlar",tw:"Nkomↄdie napↄso",uk:"Інтерактивні моменти",ur:"تعاملاتی نکات",uz:"Interaktiv diqqatga sazovor joylar",vi:"Interactive Highlights",wo:"Ay Japalante ",yo:"Banisọrọ Ifojusi",zh_CN:"互动",zh_HK:"互動重點",zh_TW:"互動突顯",zu:"amaphuzu avelele asebenzisanayo"},R.OPT_OUT),R.OPT_OUT),Ej=new Fe(new He("JOIST/preferences.tabs.visual.interactiveHighlightsDescription",{en:"Add visual highlights for mouse and touch as you interact.",af:"Voeg visuele hoogtepunte by vir muis en raak terwyl jy interaksie het.",am:"ማውዙን በመንካት መስተጋብር በሚፈጥሩበት ወቅት ምስላዊ ድምቀቶችን ያክሉ።",ar:"اضف تمييزات مرئية للماوس وألمس أثناء التفاعل",ar_KW:"أضف المييزات البصرية للفأرة واللمس أثناء التفاعل.",ar_LY:"أضف تمييزات بصرية للفأرة واللمس أثناء التفاعل.",ar_MA:"أضف تمييزات مرئية للماوس ولوحة المفاتيح أثناء التفاعل",ar_SA:"أضف تمييزات مرئية للماوس والمس أثناء التفاعل.",ar_SY:"اضف تمييزات مرئية للماوس وألمس أثناء التفاعل",az:"Siçan üçün vizual vurğu əlavə edin və əlaqə qurduqca toxunun.",be:"Дадавайце візуальныя моманты для мышы і дотыку падчас узаемадзеяння.",bg:"Добавете визуални очертания за мишката и обектите, с които взаимодействате.",bn:"Add visual highlights for mouse and touch as you interact.",bs:"Dodajte vizuelno isticanja za miša i dodir tokom interakcije.",ca:"Afegiu-hi elements visuals destacats a la simulació per al ratolí i el toc mentre interactueu.",cs:"Přidat vizuální zvýraznění myši a dotyku při interakci.",cy:"Ychwanegu uchelbwyntiau gweledol ar gyfer y llygoden a pwyso tra eich bod yn rhyngweithio.",da:"Tilføj synlige highlight ved mus og berøring, mens du benytter.",de:"Füge visuelle Highlights für Maus und Touch hinzu.",el:"Προσθήκη οπτικών επισημάνσεων κατά την αλληλεπίδραση με το ποντίκι ή την αφή.",es:"Agregar aspectos visuales destacados para el mouse y el tacto mientras interactúa.",es_ES:"Agregue puntos destacados visuales para el mouse y toque mientras interactúa.",es_MX:"Agregar aspectos visuales destacados para el mouse y el tacto mientras interactúa.",es_PE:"Agregue aspectos destacados visuales para el mouse y el toque mientras interactúa.",eu:"Gehitu saguaren eta ukituen markak elkarreragiten duzun bitartean.",fa:"اضافه کردن هایلایت برای نشانگر موس و لمس",fa_DA:"اضافه کردن هایلایت برای نشانگر موس و لمس",fi:"Lisää vuorovaikutuksellisia visuaalisia tehosteita",fr:"Ajoutez des reflets visuels pour la souris et le toucher lorsque vous interagissez.",gl:"Engadir resaltes visuais para o punteiro e os toques cando interactúas.",gu:"આપના માઉસ અને ટચની પ્રતિક્રિયા હાઈલાઈટ કરો",ha:"Ƙara haske mai haskewa ga maus ƙwai da kuma touch yayin da kuke yin hulɗa",hi:"पारस्परिक क्रिया (interaction) के लिए माउस और स्पर्श (touch) के स्थान विशेष पहचान के साथ जोड़ो",hr:"Dodajte vizualne naglaske za miša i za dodir tijekom interakcije.",ht:"Ajoute pwen fò visyèl pou souri a ak  touche a pandan w'ap entèraji.",hu:"Vizuális kiemelések rendelése az egérhez és az érintéshez interakció közben.",hy:"Ավելացրեք տեսողական ընդգծումները մկնիկի համար և հպեք:",ig:"Tinye ihe ngosi anya maka òké na aka ka ị na-emekọrịta ihe.",in:"Tambahkan tampilan visual untuk mouse dan sentuhan begitu diarahkan",is:"Bæta við sjónrænum merkjum fyrir mús og snertingu þegar unnið er með sýndartilraunina.",it:"Aggiungi effetti visivi per mouse e tocco mentre interagisci.",iw:"הוספת הדגשה חזותית עבור העכבר ומגע באינטראקציה.",ki:"Thumia kĩng'otho na ndiganĩ mũrũ-inĩ na mũthũku-inĩ ũngĩyĩreria.",kn:"ಮೌಸ್ ಗೆ ದೃಶ್ಯಾವಳಿಯನ್ನು ಹೈಲೈಟ್ ಮಾಡು ಮತ್ತು ನೀನು ಪ್ರತಿಸ್ಪಂದಿಸುತ್ತಿರುವಾಗ ಸ್ಪರ್ಷಿಸು.",ko:"마우스의 시각적 하이라이트를 추가하고 상호작용할 때 터치할 것",ku:"بینەیی زیاد بکە بۆ ماوسەکە",lg:"Okwongerako ebifaananyi ebikulu ebirabika ku mouse n’okukwata nga bw’okola.",lt:"Pridėti elemento, kurį spaudžiate ar liečiate, paryškinimą.",mi:"Tāpirihia he whakaaturanga tīpako, mō āu mahi kiore, pānga rānei.",mn:"Онцолсон хэсэгт хулганы заагчаар товшино уу.",mr:"माउससाठी व्हिज्युअल हायलाइट्स जोडा आणि तुम्ही संवाद साधता तेव्हा स्पर्श करा.",ms:"Tambah visual untuk tetikus dan sentuh semasa anda berinteraksi.",mt:"Uża l-mouse biex tinteragixxi",nb:"Legg til visuelle høydepunkter for mus og berøring mens du samhandler.",nl:"Voeg visuele highlights voor de muis toe en klik terwijl je bezig bent.",ny:"Onjezani fundo zazikulu zowoneka za mouse ndipo dinani pamene muchitira limodzi",om:"Hantuutee fi wantoota  ijoo mul’atan  dababalii yeroo walqunnamtu itti tuqqii.",pl:"Dodaj wizualne wyróżnienia dla myszy i dotyku podczas interakcji.",ps:"د موس لپاره د لیدنې وړ نښې اضافه کړئ او کار کولو په وخت کې یی استعمال کړئ",pt:"Adicionar destaques visuais para o rato e toque de acordo com a sua interação.",pt_BR:"Adicione destaques visuais para mouse e toque conforme você interage.",qu:"Yapay qawarinapaq ukuchapaq chaynataq puririnapaq",ro:"Evidențiază cursorul în timpul interacțiunii cu mouse sau ecran tactil.",ru:"Добавьте визуальную подсветку для мыши и сенсорного экрана во время работы.",rw:"Ongeraho ibintu byi'ngenzi byerekana suri no gukoraho igihe uri gukora .",se:"Lasit visuála čalmmustahttima mii oidno go geavahat sáhpána ja duohtadat.",sk:"Zvýrazniť oblasť reagujúcu na stlačenie tlačidla myši.",sl:"Dodaj napise za miško in dotik",sn:"Wedzera zvekuona nemeso zvemouse netouch paunenge uchitamba.",sp:"Oketša dintlhakgolo tša go bonwa tša toeba gomme o kgwathe ge o dirišana.",sq:"Shtoni pikat kryesore vizuale për miun (mouse) dhe prekjen ndërsa ndërveproni.",sr:"Додајте визуелно истицања за миша и додир током интеракције.",st:"Kenya khanya Tsa pono bakeng sa toeba ebe u t'soara u ntse u sebetsa",sv:"Visa markering när du använder mus eller pekfunktion.",sw:"Ruhusu mwanga kwa ajili ya kipanya na kigusio wakati unapovitumia",te:"Add visual highlights for mouse and touch as you interact.",tg:"Муошират барои мушак аломатҳои визуалиро илова кунед.",th:"แสดงตำแหน่งให้เห็นได้ของเมาส์และการทัชตามการใช้งาน",tk:"Täsirleşip syçanjyk we basmak üçin wizual effektleri goş",tl:"Magdagdag ng mga visual na highlight para sa mouse at pagpindot habang nakikipag-ugnayan ka.",tn:"Tsenya ditshedimoso tsa pono tsa mouse o ntse o tsweletse.",tr:"Etkileşim sırasında fare ve dokunma için görsel vurgular ekleyin.",tw:" Fa nhwɛe ngyinasoɔ no be ka ho, nɛ som abre a wo redi nkitahodie no.",uk:"Додайте візуальні виділення для миші та дотику під час взаємодії.",ur:"ماؤز اور ٹچ کو بصری چمکداریت عطا کیجئے",uz:"O'zaro aloqada sichqoncha va teginish uchun alohida vizual o‘rinlarni qo'shing.",vi:"Add visual highlights for mouse and touch as you interact.",wo:"Yok Ay  Mbir Yuy leeral Janax Bi",yo:"Ṣafikun awọn ifojusi wiwo fun Asin ati ifọwọkan bi o ṣe n ṣe ajọṣepọ",zh_HK:"為滑鼠及觸控加上視覺效果",zh_TW:"用滑鼠游標或觸控互動時加上視覺突顯。",zu:"engeza okuvelele okubukwayo kwegundane bese uthinta njengoba"},R.OPT_OUT),R.OPT_OUT),Vj=new Fe(new He("JOIST/a11y.preferences.tabs.visual.interactiveHighlights.enabledAlert",{en:"Highlights on for all input."},R.OPT_OUT),R.OPT_OUT),kj=new Fe(new He("JOIST/a11y.preferences.tabs.visual.interactiveHighlights.disabledAlert",{en:"Highlights off for mouse and touch."},R.OPT_OUT),R.OPT_OUT),DA=new Fe(new He("JOIST/projectorMode",{en:"Projector Mode",af:"Projektormodus",am:"የፕሮጀክተር ሁኔታ",ar:"وضع جهاز الاسقاط الضوئي",ar_KW:"وضع جهاز العرض",ar_LY:"وضع جهاز العرض",ar_MA:"وضعية المسلاط",ar_SY:"وضع جهاز الاسقاط الضوئي",az:"Proyektor rejimi",be:"Рэжым праектара",bg:"Проекторен режим",bn:"প্রজেক্টর মুড",bs:"Projektor mod",ca:"Mode de projector",cs:"Mód projektoru",da:"Projektorvisning",de:"Projektions-Modus",el:"Λειτουργία προβολής",es:"Modo de proyector",es_ES:"Modo proyector",es_MX:"Modo Proyector",es_PE:"Modo Proyector",et:"Projektori režiim",eu:"Proiektore-modua",fa:"حالت پروژکتور",fa_DA:"حالت پروجکتور",fi:"Projektoritila",fr:"Mode projecteur",ga:"Modh Teilgin",gu:"પ્રોજેક્ટર મોડ",ha:"Yanayin na'urar majigi",hi:"प्रोजेक्टर मोड",hr:"Prilagodi za projektor",ht:"Mod Pwojektè",hu:"Vetítő mód",hy:"Պրոյեկտորի ռեժիմ",ig:"lee ntụziaka",is:"Skjávarpahamur",it:"Modalità proiezione",iw:"מצב מקרן",ja:"プロジェクターモード",ka:"პროექტორის რეჟიმი",ki:"Thimu ya kũgũtha",kk:"Проектр режимі",kn:"ಚಿತ್ರಪ್ರದರ್ಶಕ ಪ್ರಕಾರ",ko:"프로젝터 모드",ku:"شێوازی وێنەنوێن",lg:"Enkola ya Pulojekita",lo:"ໂໝດໂປເຈັກເຕີ້",lt:"Projektoriaus režimas",lv:"Projektēšanas režīms",mg:"Fomba fandefasana",mi:"Pūrere Tukuata",mn:"Проекторын горим",mr:"प्रोजेक्टर मोड",ms:"Mod Projektor",mt:"Projector Mode",nb:"Prosjektormodus",nl:"Projectie mode",nn:"Prosjektormodus",ny:"Purojekitala Mode",om:"Haala Pirojektaraa",or:"ପ୍ରକ୍ଷେପକ ପ୍ରକାର",pl:"Tryb projektora",ps:"د پروجکټور موډ (حالت)",pt:"Modo de Projector",pt_BR:"Modo Projetor",ro:"Mod videoproiector",ru:"Режим проектора",rw:"Uburyo bwa porojegiteri",se:"Prošektorámodus",si:"ප්‍රක්ෂේපන ආකාරය",sk:"Režim projektora",sl:"Način projekcije",sn:"Purojekita Modhi",sp:"Mokgwa wa Porojeketara",sq:"Formati i projektorit",sr:"Пројектор мод",st:"khuliso ka porojektor",sv:"Projektorläge",sw:"Projekta hali-tumizi",ta:"ப்ரொஜெக்டர் வழி",te:"ప్రొజెక్టర్ వీక్షణం",tg:"Режими проектор",th:"โหมดฉายภาพ",tk:"Proýektor tertibi",tl:"Projector mode",tn:"Mokgwa wa go supa",tr:"Projektör Modu",tw:"Projekta Nsususo",uk:"Режим проектора",ur:"پروجیکٹر کے لئے",uz:"Proyektor rejimi",vi:"Chế độ đèn chiếu",yo:"Pirojekito Ipo",zh_CN:"投影模式",zh_TW:"投射模式",zu:"Imodi Yeprojektha"},R.OPT_OUT),R.OPT_OUT),yk=new Fe(new He("JOIST/preferences.tabs.visual.projectorModeDescription",{en:"Increase color contrast for better visibility in classrooms.",af:"Verhoog kleurkontras vir beter sigbaarheid in klaskamers.",am:"በክፍሎች ውስጥ ለተሻለ ታይነት የቀለም ንፅፅርን ይጨምሩ።",ar:"زيادة تباين الألوان لرؤية أفضل في الفصول الدراسية.",ar_KW:"زيادة تباين الألوان لتحسين الرؤية",ar_LY:"قم بزيادة تباين الألوان لتحسين الرؤية في الفصول الدراسية.",ar_MA:"زيادة تباين الألوان لتوضيح الرؤية أفضل داخل القسم",ar_SY:"زيادة تباين الألوان لرؤية أفضل في الفصول الدراسية.",az:"Sinif otaqlarında daha yaxşı görünmə üçün rəng kontrastını artırın.",be:"Павялічце каляровы кантраст для лепшай бачнасці ў класах.",bg:"Увеличете цветния контраст за по-добра видимост в класната стая.",bn:"শ্রেণীকক্ষে আরও ভালো দৃশ্যমানতার জন্য রং(color) এর  বৈসাদৃশ্য বাড়ান",bs:"Povećajte kontrast boja za bolju vidljivost u učionicama",ca:"Augmenteu el contrast de color per millorar la visibilitat a les aules.",cs:"Zvýšení barevného kontrastu pro lepší viditelnost v učebnách.",da:"Øg farvekontrast for bedre synlighed i  klasselokalet.",de:"Erhöhen sie den Farbkontrast für eine bessere Sichtbarkeit im Klassenzimmer.",el:"Ενίσχυση αντίθεσης φωτός για καλύτερη ορατότητα στην αίθουσα",es:"Aumenta el contraste de color para una mejor visibilidad en las aulas.",es_PE:"Aumente el contraste de color para una mejor visibilidad en las aulas.",eu:"Kolore-kontrastea handitu ikasgeletan ikusgarritasun hobea izateko.",fa:"افزایش تضاد رنگ برای نمایش بهتر در کلاس",fa_DA:"افزایش تضاد رنگ برای نمایش بهتر در صنف",fi:"Lisää värikontrastia paremman näkyvyyden saavuttamiseksi luokkahuoneissa.",fr:"Augmentez le contraste des couleurs pour une meilleure visibilité dans les salles de classe.",gu:"ક્લાસરૂમ માં વધુ સારી રીતે જોવા કલર કોન્ટ્રાસ્ટ વધારો",ha:"Ƙara hasken launi don inganta gani a cikin azuzuwa",hi:"कक्षाओं में स्पष्ट दृश्यता के लिए विपरीत रंग बढ़ाएं।",hr:"Povećajte kontrast boja za bolju vidljivost u učionicama.",ht:"Ogmante kontras koulè pou pi bon viziblite nan klas yo.",hu:"Tanteremben növelje a színkontrasztot a jobb láthatóság végett.",ig:"Mụbaa ọdịiche agba maka nhụsianya ka mma na klaasị",is:"Auka skerpu fyrir bætt útlit",it:"Incremento del contrasto cromatico per migliorare la visibilità in classe",iw:"הגדלת ניגודיות צבע לשיפור הנראות בכיתה",ki:"Kurutia kũrũra cia rangĩ ũgĩte ũrĩa wambere wĩciĩ wa mũbara-inĩ",kn:"ತರಗತಿಯಲ್ಲಿ ವೀಕ್ಷಿಸಲು ಅನುಕೂಲವಾಗುವಂತೆ ಕಲರ್ Contrastನ್ನು ಹೆಚ್ಚಿಸಿ.",ko:"학급에서 더 잘 보이도록 색 대비를 증가시킬 것",ku:"جیاوازی ڕەنگەکان زیاد بکە بۆ باشتر بینین لە پۆلدا",lg:"Okwongera ku njawulo ya langi okusobola okulabika obulungi mu bibiina",mn:"Танхимд тод харагдуулахын тулд өнгөний ялгааг нэмэгдүүлээрэй.",mr:"वर्गात सुस्पष्ट दिसण्यासाठी कलरचा कॉन्ट्रास वाढवा.",ms:"Tingkatkan kontras warna untuk kebolehlihatan yang lebih baik di dalam bilik darjah.",mt:"Żid il-kuntrast tal-kulur għall-viżibbilita aħjar fil-klassi.",nb:"Øk fargekontrasten for bedre synlighet i klasserom.",nl:"Verhoog het kleurencontrast voor betere zichtbaarheid in klaslokalen.",ny:"Onjezani kusiyanitsa kwamitundu kuti muwonekere bwino m'makalasi.",om:"Daree keessatti mul’achuu fooyya’aa ta’eef walfaallaa halluu guddisuu.",pl:"Zwiększ kontrast kolorów dla lepszej widoczności w salach lekcyjnych.",ps:"په ټولګیو کې د ښه لید لپاره د رنګ تفاوت زیات کړئ.",pt:"Aumente o contraste das cores para melhor visibilidade nas salas de aula.",pt_BR:"Aumente o contraste de cores para melhor visibilidade em sala de aula.",ro:"Creșteți contrastul culorilor pentru o mai bună vizibilitate în sala de clasă.",rw:"Kongera uburyo ishusho rigaragara",se:"Lasit ivdnevuostálasvuođa vai oidno buorebut luohkkálanjas.",sk:"Zvýšený farebný kontrast pre lepšiu viditeľnosť v triede.",sl:"Povečaj barvni kontrast za boljšo vidnost v učilnici.",sn:"Wedzera kusiyanisa kwemavara kuitira kuoneka zviri nani mumakirasi.",sp:"Oketša phapano ya mebala bakeng sa go bonagala gakaone ka diphapošing tša borutelo.",sq:"Rritni kontrastin e ngjyrave për shikueshmëri më të mirë në klasa.",sr:"Повећајте контраст боја за бољу видљивост у учионицама",st:"eketsa khanya ea 'mala ho bonahala hantle  ka lihlopheng",sv:"Öka färgkontrasten för bättre bild i klassrum.",sw:"Ongeza Utofauti wa rangi kwaajili ya kuonekana vizuri darasani",te:"తరగతి గదిలో మెరుగైన దృశ్య స్పష్టత కోసం రంగుల గాఢతను పెంచండి.",tg:"Контрасти рангҳоро барои беҳтар намоён шудан дар синфхонаҳо зиёд кунед.",th:"เพิ่มความแตกต่างสีเพื่อให้สังเกตง่ายขึ้นในชั้นเรียน",tk:"Synplarda gowy görünmegi üçin reňk kontrastyny ýokarlandyr.",tr:"Sınıflarda daha iyi görünüm için renk kontrastını arttır.",tw:"bue hann no yie sedeɛ yɛbɛhunu sukuu dan no mu yie",uk:"Підвищити контраст для того, щоб було краще видно в класі",ur:"رنگوں کی چمک کو بڑھائیں تاکہ کلاس روم میں اچھا نظر آئے",uz:"Sinflarda yaxshiroq ko'rinish uchun ranglar kontrastini oshiring.",vi:"Tăng độ tương phản",yo:"Mu iyatọ awọ pọ si fun hihan to dara julọ ni awọn yara ikawe",zh_TW:"增加色彩對比，以便在教室內能看得更清楚。",zu:"khulisa ukugqama kombala ukuze kubonakale kangcono emakilasini."},R.OPT_OUT),R.OPT_OUT);class Cj extends Hh{constructor(e,t){const n=new kt(DA,Vi.PANEL_SECTION_LABEL_OPTIONS),s=new mr(yk,Vi.PANEL_SECTION_CONTENT_OPTIONS),r=phet.chipper.colorProfiles.find(h=>h!==Ha.PROJECTOR_COLOR_PROFILE),a=new Co(e,r,Ha.PROJECTOR_COLOR_PROFILE,Ut({accessibleName:DA},Vi.TOGGLE_SWITCH_OPTIONS)),o=new _a(f0,{label:DA,description:yk},{tandem:R.OPT_OUT});s.readingBlockNameResponse=o;const l=Ne()({labelNode:n,descriptionNode:s,controlNode:a},t);super(l)}}const IA=xj,vk=Ej,Dj=Vj,Ij=kj,Lj=f0;class Mj extends Of{constructor(e,t,n,s){const r=Ne()({labelContent:"Visual"},s),a=r.tandem;r.tandem=R.OPT_OUT,super(Si.VISUAL,t,n,r);const o=new Ai({spacing:Vi.CONTENT_SPACING,align:"left"});if(e.supportsProjectorMode){const h=new Cj(e.colorProfileProperty);o.addChild(h)}if(e.supportsInteractiveHighlights){const h=new kt(IA,Vi.PANEL_SECTION_LABEL_OPTIONS),c=new _a(Lj,{label:IA,description:vk},{tandem:R.OPT_OUT}),f=new mr(vk,an({},Vi.PANEL_SECTION_CONTENT_OPTIONS,{readingBlockNameResponse:c})),g=new Co(e.interactiveHighlightsEnabledProperty,!1,!0,Ut({accessibleName:IA,leftValueContextResponse:Ij,rightValueContextResponse:Dj},Vi.TOGGLE_SWITCH_OPTIONS)),v=new Hh({labelNode:h,descriptionNode:f,allowDescriptionStretch:!1,controlNode:g});o.addChild(v)}e.customPreferences.forEach(h=>{const c=h.createContent(a),f=new Ge({children:[c]});o.addChild(f)});const l=new Lu({contentNode:o,contentLeftMargin:0});this.addChild(l)}}class Oj extends Ge{constructor(e,t,n,s,r){const a=Ne()({phetioVisiblePropertyInstrumented:!1,isDisposable:!1},r),o=a.tandem;a.tandem=R.OPT_OUT,super(a),this.content=[],this.selectedTabProperty=n;const l=new Bh({matchVertical:!1});let h=null;if(t.includes(Si.OVERVIEW)){h=new Pj(n,s.getTabVisibleProperty(Si.OVERVIEW));const P=l.createBox(h);this.addChild(P),this.content.push(new Jd(h,Si.OVERVIEW))}let c=null;if(t.includes(Si.SIMULATION)){c=new Tj(e.simulationModel,n,s.getTabVisibleProperty(Si.SIMULATION),{tandem:o.createTandem("simulationPreferencesPanel")});const P=l.createBox(c);this.addChild(P),this.content.push(new Jd(c,Si.SIMULATION))}let f=null;if(t.includes(Si.VISUAL)){f=new Mj(e.visualModel,n,s.getTabVisibleProperty(Si.VISUAL),{tandem:o.createTandem("visualPreferencesPanel")});const P=l.createBox(f);this.addChild(P),this.content.push(new Jd(f,Si.VISUAL))}let g=null;if(t.includes(Si.AUDIO)){g=new GY(e.audioModel,n,s.getTabVisibleProperty(Si.AUDIO),{tandem:o.createTandem("audioPreferencesPanel")});const P=l.createBox(g);this.addChild(P),this.content.push(new Jd(g,Si.AUDIO))}let v=null;if(t.includes(Si.INPUT)){v=new JY(e.inputModel,n,s.getTabVisibleProperty(Si.INPUT),{tandem:o.createTandem("inputPreferencesPanel")});const P=l.createBox(v);this.addChild(P),this.content.push(new Jd(v,Si.INPUT))}let A=null;if(t.includes(Si.LOCALIZATION)){A=new _j(e.localizationModel,n,s.getTabVisibleProperty(Si.LOCALIZATION),{tandem:o.createTandem("localizationPreferencesPanel")});const P=l.createBox(A);this.addChild(P),this.content.push(new Jd(A,Si.LOCALIZATION))}}getSelectedContent(){for(let e=0;e<this.content.length;e++){const t=this.content[e];if(t.selectedTabValue===this.selectedTabProperty.value)return t}return null}focusSelectedPanel(){const e=this.getSelectedContent();e.panelContent.focusable=!0,e.panelContent.focus()}isFocusableSelectedContent(e){const t=this.getSelectedContent();return e===t.panelContent}}class Jd extends Ge{constructor(e,t){super(),this.panelContent=e,this.selectedTabValue=t,e.addInputListener({focusout:n=>{e.focusable=!1}})}}const Nj=new Fe(new He("JOIST/preferences.tabs.overview.title",{en:"Overview",af:"Oorsig",ak:"Tofa",am:"እይታ",ar:"ملخص",ar_KW:"ملخص",ar_LY:"ملخص",ar_MA:"نظرة شاملة",ar_SY:"ملخص",az:"Ümumi baxış",be:"Агляд",bg:"Преглед",bn:"Overview",bs:"Pregled",ca:"Descripció general",cs:"Přehled",cy:"Trosolwg",da:"Oversigt",de:"Überblick",el:"Επισκόπηση",es:"Visión General",es_PE:"Resumen",eu:"ikuspegi orokorra",fa:"نمای کلی",fa_DA:"نگاه کلی",fi:"Yleiskatsaus",fr:"Aperçu",ga:"Forléargas",gu:"વિહંગાલોકન",ha:"Dubawa",hi:"विहंगावलोकन",hr:"Pregled",ht:"Apèsi",hu:"Áttekintés",hy:"Ակնարկ",ig:"Nchịkọta",in:"Gambaran singkat",is:"Yfirlit",it:"Panoramica",iw:"סקירה",ki:"Muonekano",kn:"ಮೇಲ್ನೋಟ",ko:"개요",ku:"پوختە",lg:"Okutwalira awamu",lt:"Apžvalga",mi:"Tirohanga Whānui",mn:"Давхар харах",mr:"आढावा",ms:"Tinjauan meluas",mt:"Daqqa t'għajn",nb:"Oversikt",nl:"Overzicht",ny:"Mwachidule",om:"Haala Waliigalaa",pl:"Przegląd",ps:"عمومي کتنه",pt:"Visão geral",pt_BR:"Visão Geral",ro:"Prezentare generală",rw:"Incamake",se:"Bajilgovva",sk:"Prehľad",sl:"Pregled",sn:"Muchidimbu",sp:"kakaretšo",sr:"Преглед",st:"kakaretso",sv:"Översikt",sw:"Maoni",te:"విహంగ వీక్షణం",tg:"Тафсири умумӣ",th:"ภาพรวม",ti:"ሓፈሻዊ ትሕዝቶ",tr:"Genel Bakış",uk:"Огляд",ur:"اجمالی نظر",uz:"Umumiy koʻrinish",vi:"Tổng quan",yo:"Akopọ",zh_TW:"概觀",zu:"ukubuka konke"},R.OPT_OUT),R.OPT_OUT),Rj=new Fe(new He("JOIST/preferences.tabs.simulation.title",{en:"Simulation",af:"Simulasie",ak:"Nfatohɔ nfonii",am:"ሲሙሌሽን(ምስያ)",ar:"محاكاة",ar_KW:"محاكاة",ar_LY:"محاكاة",ar_MA:"محاكاة",ar_SY:"محاكاة",az:"Simulyasiya",be:"Сімуляцыя",bg:"Симулация",bn:"সিমুলেশন",bs:"Simulacija",ca:"Simulació",cs:"Simulace",cy:"Efelychiad",da:"Simulering",de:"Simulation",el:"Προσομοίωση",es:"Simulación",es_PE:"Simulación",eu:"Simulazioa",fa:"شبیه سازی",fa_DA:"شبیه سازی",fi:"Simulaatio",fr:"Simulation",ga:"Ionsamhlú",gu:"સિમ્યુલેશન",ha:"Kama da wane",hi:"सिमुलेशन",hr:"Simulacija",ht:"Similasyon",hu:"Szimuláció",hy:"Մոդելավորում",ig:"ịme anwansị",in:"Simulasi",is:"Hermun",it:"Simulazione",iw:"הדמיה",ki:"kũgerekania",kn:"ಸಿಮ್ಯುಲೇಶನ್",ko:"시뮬레이션",ku:"لێکچوونسازی",lg:"Simulesoni",lt:"Simuliacija",mn:"Загварчлал",mr:"सादृश",ms:"Simulasi",mt:"Simulazzjoni",nb:"Simulasjon",nl:"Simulatie",ny:"Kuyerekezera",om:"Simuleeshinii",pl:"Symulacja",ps:"سېمولېشن",pt:"Simulação",pt_BR:"Simulação",ro:"Simulare",rw:"Iyigana",se:"Simuleren",sk:"Simulácia",sl:"Simulacija",sn:"Simulation",sp:"Go ekiša",sr:"Симулација",st:"seka-papali",sv:"Simulering",sw:"Mwigo",te:"సిమ్యులేషన్",tg:"Симулятсия",th:"สถานการณ์จำลอง",ti:"ተግባራዊ መርኣያ",tr:"Simülasyon",uk:"Симуляція",ur:"سیمولیشن",uz:"Simulyatsiya",vi:"Mô phỏng",yo:"Afọwọṣe",zh_TW:"模擬",zu:"ukulingiswa"},R.OPT_OUT),R.OPT_OUT),Bj=new Fe(new He("JOIST/preferences.tabs.visual.title",{en:"Visual",af:"Visueel",ak:"Nea wo b'ehu",am:"እይታ",ar:"مرئي",ar_KW:"مرئي",ar_LY:"مرئي",ar_MA:"مرئي",ar_SY:"مرئي",az:"Vizual",be:"Візуальны",bg:"Визуални",bn:"Visual",bo:"ཐད་མཐོང་།",bs:"Vizuelno",ca:"Visuals",cs:"Vizuál",cy:"Gweledol",da:"Synligt",de:"Visuell",el:"Οπτικό",es:"Visual",es_ES:"Visual",es_MX:"Visual",es_PE:"Visual",eu:"Ikusizkoa",fa:"تصویری",fa_DA:"تصویری",fi:"Visuaalinen",fr:"Visuel",gl:"Visual",gu:"દ્રશ્ય",ha:"Gani (da ido)",hi:"दृश्य",hr:"Vidni",ht:"Vizyèl",hu:"Vizuális",hy:"Տեսողական",ig:"Anya",in:"Tampilan",is:"Sýnilegt",it:"Visivo",iw:"נראות",ki:"Cioneki",kn:"ದೃಶ್ಯಾತ್ಮಕ",ko:"시각적",ku:"بینەیی",lg:"Ebilabwaa",lt:"Vaizdas",mi:"Ataata",mn:"Үзүүлэх",mr:"दृश्य",ms:"Visual",mt:"Viżwal",nb:"Synlig",nl:"Visueel",nn:"Synleg",ny:"Zowoneka",om:"Argaa",pl:"Wizualne",ps:"انځوریز",pt:"Visual",pt_BR:"Visual",qu:"Qawana",ro:"Vizual",ru:"Визуальный",rw:"Bigaragara",se:"Oinnolaš",sk:"Zobrazenie",sl:"Vizualno",sn:"Zvekuona nemeso",sp:"Bonegago",sq:"E dukshme",sr:"Визуелно",st:"pono",sv:"Synligt",sw:"Kuona",ta:"மின்னழுத்த",te:"దృశ్యం",tg:"Визуалӣ",th:"แสดงภาพ",ti:"ምስላዊ",tk:"Wizual",tl:"biswal",tn:"Tsa Pono",tr:"Görsel",tw:"Ahwihwɛdeɛ",uk:"Візуальн.",ur:"بصریات",uz:"Vizual",vi:"Hình ảnh",wo:"Nemmeku",yo:"Awoju",zh_CN:"视觉",zh_HK:"視覺",zh_TW:"視覺",zu:"ezibonakalayo"},R.OPT_OUT),R.OPT_OUT),qj=new Fe(new He("JOIST/preferences.tabs.audio.title",{en:"Audio",af:"Oudio",ak:"Nea w'beti",am:"ድምጽ",ar:"صوتي",ar_KW:"صوتي",ar_LY:"صوتي",ar_MA:"الصوت",ar_SA:"صوت",ar_SY:"صوتي",az:"Audio",be:"Аўдыё",bg:"Аудио",bn:"অডিও",bo:"སྒྲ།",bs:"Zvuk",ca:"So",cy:"Sain",da:"Lyd",de:"Audio",el:"Ήχος",es:"Audio",es_ES:"Audio",es_MX:"Audio",es_PE:"Audio",eu:"Audioa",fa:"صدا",fa_DA:"صدا",fi:"Ääni",fr:"Audio",ga:"Fuaim",gl:"Audio",gu:"ધ્વની",ha:"Na saurare",hi:"ध्वनी",hr:"Zvuk",ht:"Odyo",hu:"Audio",hy:"Ձայն",ig:"Ọdịyo",in:"Audio",is:"Hljóð",it:"Audio",iw:"שמע",ka:"ხმა",ki:"Mũgambo",kn:"ಧ್ವನಿ",ko:"오디오",ku:"دەنگ",lg:"Amaloboozi",lt:"Garsas",mi:"Oro",mn:"Дуу",mr:"आवाज",ms:"Audio",mt:"Awdjo",nb:"Lyd",nl:"Audio",ny:"Zomvera",om:"Sagalee",pl:"Audio",ps:"آواز",pt:"Áudio",pt_BR:"Áudio",qu:"Uyarina",ro:"Audio",ru:"Аудио",rw:"Amajwi",se:"Jietna",sk:"Zvuk",sl:"Avdio",sn:"Odhiyo",sp:"Mamelwang",sq:"Audio",sr:"Звук",st:"molumo",sv:"Ljud",sw:"Sauti",ta:"ஒலி",te:"శ్రవణం",tg:"Аудио",th:"เสียง",ti:"ድምፂ",tk:"Ses",tl:"Audio",tn:"Tsa Kutlo",tr:"Ses",tw:"Otie",uk:"Аудіо",ur:"آواز",uz:"Audio",vi:"Âm thanh",wo:"Coow",yo:"ohun",zh_CN:"声音",zh_HK:"音效",zh_TW:"音效",zu:"umsindo"},R.OPT_OUT),R.OPT_OUT),zj=new Fe(new He("JOIST/preferences.tabs.input.title",{en:"Input",af:"Invoer",ak:"Nhyɛmu",am:"ግብአት",ar:"مدخل",ar_KW:"Input",ar_LY:"مدخل",ar_MA:"مدخلات (معطيات)",ar_SA:"ادخال",ar_SY:"مدخل",az:"Daxil edilən",be:"Увод",bg:"Въвеждане",bn:"ইনপুট [Input]",bs:"Ulaz",ca:"Entrada",cs:"Vstup",cy:"Mewnbwn",da:"Input",de:"Eingabe",el:"Εισαγωγή",es:"Input",es_ES:"Input",es_PE:"Entrada",eu:"Sarrera",fa:"ورودی",fa_DA:"ورودی",fi:"Syöte",fr:"Entrée",ga:"Ionchur",gu:"દાખલ કરો",ha:"Abin saka baya I",hi:"निविष्ट",hr:"Ulazni",ht:"Antre",hu:"Input",hy:"Մուտքագրում",ig:"Ntinye",in:"Masukan",is:"Inntak",it:"Input",iw:"קלט",ka:"შეყვანა",ki:"Gũikira",kn:"Input ಇನ್ಪುಟ್",ko:"투입",ku:"داخڵکردن",lg:"Ebyokuyingiza",lt:"Įvestis",mi:"Tāuru",mn:"Оролт",mr:"पुरवलेली माहिती",ms:"Input",mt:"Imla",nb:"Inndata",nl:"Invoer",nn:"Inndata",ny:"Zolowa",om:"Galtee",pl:"Wejście",ps:"داخلیدل",pt:"Entrada",pt_BR:"Entrada",qu:"Yanapasqa",ro:"Intrare",rw:"Ibishyirwamo",se:"Input",sk:"Vstup",sl:"Vnos",sn:"Iniputi",sp:"Tsenyo ya go tsenya",sq:"Të dhëna hyrëse",sr:"Улаз",st:"kenya letsoho",sv:"Inmatning",sw:"Ingiza",ta:"உள்ளீடு",te:"Input",tg:"Вуруд",th:"ตัวรับเข้า",ti:"እታዎት",tk:"Giriz",tl:"Input",tr:"Girdi",tw:"Nea wo de ahyɛ mu (Input)",uk:"Введення даних",ur:"ان پٹ (اندراج)",uz:"Kiritish",vi:"Input",wo:"Luy Dug",yo:"Tewole",zh_CN:"输入",zh_HK:"輸入",zh_TW:"輸入",zu:"okokufaka"},R.OPT_OUT),R.OPT_OUT),Fj="M17.98,18.88c-.83,4.11-2.49,6.69-3.68,8.09-.26.02-.53.03-.8.03-.21,0-.42-.01-.63-.02-1.19-1.4-2.86-3.98-3.69-8.09h8.8ZM19.98,18.88c-.62,3.38-1.76,5.87-2.88,7.62,3.94-1.09,7.17-3.92,8.78-7.62h-5.89ZM7.18,18.88H1.12c1.64,3.76,4.94,6.62,8.97,7.67-1.13-1.75-2.29-4.26-2.92-7.67ZM8.67,13.5c0,1.23.08,2.36.21,3.41h9.41c.13-1.06.21-2.19.21-3.41s-.08-2.35-.2-3.4h-9.42c-.12,1.05-.2,2.18-.2,3.4ZM26.55,10.1h-6.28c.12,1.06.19,2.18.19,3.4s-.08,2.35-.2,3.41h6.28c.29-1.09.45-2.23.45-3.41s-.17-2.31-.45-3.4ZM6.7,13.5c0-1.22.08-2.34.19-3.4H.45c-.28,1.09-.45,2.22-.45,3.4s.17,2.32.45,3.41h6.44c-.12-1.07-.2-2.19-.2-3.41ZM19.99,8.13h5.9c-1.61-3.7-4.83-6.54-8.78-7.63,1.12,1.75,2.26,4.24,2.88,7.63ZM13.5,0c-.21,0-.42.01-.64.02-1.19,1.4-2.86,3.98-3.69,8.11h8.81C17.16,4.01,15.49,1.43,14.3.03c-.27-.02-.53-.03-.8-.03ZM10.09.44C6.05,1.5,2.75,4.36,1.12,8.13h6.06c.63-3.43,1.78-5.94,2.91-7.69Z",Hj=new zt(Fj),Uj=new Fe(new He("JOIST/a11y.preferences.tabs.tabResponsePattern",{en:"Preferences, {{title}} Tab"},R.OPT_OUT),R.OPT_OUT);class Zd extends ys(Ge){constructor(e,t,n,s){const r=Ne()({iconNode:null,pointerAreaXDilation:0,phetioFeatured:!0,visiblePropertyOptions:{phetioFeatured:!0},cursor:"pointer",tagName:"button",accessibleName:e,ariaRole:"tab",focusable:!0,containerTagName:"li",containerAriaRole:"presentation"},s),o=[new kt(e,Vi.TAB_OPTIONS)];r.iconNode&&o.push(r.iconNode);const l=new _i({children:o,spacing:8}),h=new xt({children:[l]}),c=new Fh(0,0,0,0,{stroke:pn.INNER_FOCUS_COLOR,lineWidth:5});super(r),this.children=[h,c],l.boundsProperty.link(v=>{h.rectBounds=v.dilatedXY(15,10),c.x2=v.width,c.centerTop=v.centerBottom.plusXY(0,5),this.mouseArea=this.localBounds.dilatedX(r.pointerAreaXDilation),this.touchArea=this.mouseArea}),this.value=n;const f=new _a(Uj,{title:e},{tandem:R.OPT_OUT});this.voicingNameResponse=f;const g=new Fa({press:()=>{t.set(n),this.focus(),this.voicingSpeakNameResponse()},tandem:R.OPT_OUT});this.addInputListener(g),Cn.multilink([t,g.isOverProperty],(v,A)=>{h.opacity=v===n?1:A?.8:.6,this.focusable=v===n,c.visible=v===n})}}const Gj=10;class Wj extends _i{constructor(e,t,n){const s=Ne()({isDisposable:!1,tagName:"ul",ariaRole:"tablist",groupFocusHighlight:!0,spacing:Gj,align:"bottom"},n);super(s),this.selectedButton=null,this.content=[],this.selectedPanelProperty=t;const r=h=>ie.includes(e,h),a=s.spacing/2;r(Si.OVERVIEW)&&this.content.push(new Zd(Nj,t,Si.OVERVIEW,{pointerAreaXDilation:a,tandem:s.tandem.createTandem("overviewTab")})),r(Si.SIMULATION)&&this.content.push(new Zd(Rj,t,Si.SIMULATION,{pointerAreaXDilation:a,tandem:s.tandem.createTandem("simulationTab")})),r(Si.VISUAL)&&this.content.push(new Zd(Bj,t,Si.VISUAL,{pointerAreaXDilation:a,tandem:s.tandem.createTandem("visualTab")})),r(Si.AUDIO)&&this.content.push(new Zd(qj,t,Si.AUDIO,{pointerAreaXDilation:a,tandem:s.tandem.createTandem("audioTab")})),r(Si.INPUT)&&this.content.push(new Zd(zj,t,Si.INPUT,{pointerAreaXDilation:a,tandem:s.tandem.createTandem("inputTab")})),r(Si.LOCALIZATION)&&this.content.push(new Zd(SM,t,Si.LOCALIZATION,{pointerAreaXDilation:a,iconNode:new bi(Hj,{scale:.734,fill:"black"}),tandem:s.tandem.createTandem("localizationTab")})),this.children=this.content,Cn.multilinkAny([t,...this.content.map(h=>h.visibleProperty)],()=>{if(!this.content.find(c=>c.value===t.value).visibleProperty.value){const c=this.content.find(f=>f.visibleProperty.value);c&&(t.value=c.value)}});const o=new Xl({keys:["arrowRight","arrowLeft"],fireOnDown:!1,fire:(h,c)=>{h&&h.preventDefault();const f=c==="arrowRight"?1:-1;for(let g=0;g<this.content.length;g++)if(this.selectedButton===this.content[g]){const v=this.content[g+f];if(v){t.value=v.value,this.selectedButton.focus();break}}}});this.addInputListener(o);const l=()=>{this.content.forEach(h=>{h.value===this.selectedPanelProperty.value&&(this.selectedButton=h)})};t.link(l),e.length===1&&(this.focusable=!1,this.inputEnabledProperty.value=!1)}getTabVisibleProperty(e){return ie.find(this.content,n=>n.value===e).visibleProperty}focusSelectedTab(){this.content.forEach(e=>{e.value===this.selectedPanelProperty.value&&e.focus()})}}const VM="data:audio/mpeg;base64,//u0xAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAJAAAWgAAcHBwcHBwcHBwcHDg4ODg4ODg4ODg4VVVVVVVVVVVVVVVxcXFxcXFxcXFxcY6Ojo6Ojo6Ojo6OqqqqqqqqqqqqqqrHx8fHx8fHx8fHx+Pj4+Pj4+Pj4+Pj//////////////8AAAA8TEFNRTMuOTlyAc0AAAAAAAAAADTAJAZWgQAAwAAAFoAfYOmJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//u0xAAAGVl/C7SWAAQ5waj/NTAAIMASBDAKik4AwBgmKw2TmwUFAAwTJ3kABAMHguIANBIJlSWDc/gJYlmY7vHAgExOeMksRz8qAgIhfAAAIWOvixxODQRDzpYWONiQIijb4s5sSBIMHNXg3J9iWJYlmZmfr7LBLM38WU6ZpSjCwwPIiWBAGh5Vu/62YGCzm169+W1699gkA0LCcCAHDyFev9hYvMzMzfgODyEkGDmnZLJ75wBMG5+jWOThIAmFatgwWUYMAbg3BuI5PfxYsXvnxOHxGH1HIY0c51BgoGERbZnQ1MHMXUMxqvH6a3ojLAnpD8qAQzRkIBkSZ01QEgUw4sxYxd7X5oeCAwkCjI+x7BuYGAAFzga1g3gEaCUwy2FlJJgMiBAgMsETEGiPwt/CyYAMBOB0gGEYfONgihNhicjxhjPh+ge8BKYGmIBYyaAOeS5mOA0TREExS4los40JwZ4igeuNo6ak2oWWbFxKT5cJc1J8ukiUhty4gZDGSYPEXIGXyfMy+SxgT5QN0yBEQGUGUI0ZAqOQSgbnDxTPoF8vufRNS2VETEvFAZQzZIghYNxlBjiWJ88mpRgTidAvm80KpmT5ugdWmjN3MxwGhOJMbpmBqfIgXP////+uz9+23//6RgykDRaXRwoqVCaJVoATAAAABRTcqKRblOBsEkIBvkmQwBsQlSAlkYSEgFCxi4UmeEIARsY3GQYIldpBiIKg5Bl7QMVRIpL0IkDLXNf4y43+h4ulFn0VaZAo//u0xCiAI+GbQfnMgAUExGr/N4AANJPRGu12AnjSgfdtqdBoEgoPS5+XUXLi5UPKdxuDmTNLdYLBqaNZmZbO0tqGoKlMthqI3nLFAFqs2cmSVaNrUWn4pJYu/74Xoi0+EO1Droo2loWUtqvlpVi5vLG7369PqxVxxpW6ssWjJoZjStqwsdZThf5Yr4d3Yt9mYtB7wybN05REF8wWumUQ44zdX+k68WtQM2N/XZhiW02qepLas3d62jLIFhhic5GqjWJDVjUG01XO/GaCzzf/ljzGsB/6y4oBsBkkt/go96iA5BuIJ4ZXOHNiNTC4dDUYiEZA24TLwHkkIJDgxqYWnUCiwdLzMgMwoQRtLWQIYgqpjiMYAw3AoMABWg1rQi0osF0EymbJFky3nDDI4JeOSluoybwoC0WzCpB9iaTEMdhYKUjSjXFkuFNAgKAJpMCWLjpQHFLb+Ow8RdxkjuM6bqnM7aerTuOO2kVvzdlPBH8uojyhW5L0F/W8mVSsISpYRLn7ft/IYvRh13UL1xZ+HXwnLbUnSZc2NczrddLD5ZUpLUYikXpGkNMp5I7jOJ2H1NLy6lgVpN+uWJpiuIyllsVkfeXJZ+Vm3dv5TS63HpE66OHE+00FYGcSC+8Dstyc5pSwzX0Mk+ktX6cljX//f//////////////////9/4f7nT5W9549wz1+esP/////////3JcKHojYl2WeEMzFHTd5qm3VZTp4q8mJd3Yz29/usgkFwOWLTCRUz8JMMD13//u0xA2AG6VhZ/m8AASbOGc7t4AFSc2cVEQ+YWQK7MWA6hi4SlaFQMFFIOFVYQWsIYslLR0GHIoqwFk0RmvLyprU0WnFSkU3riaYtrO0BAD3mCL/ZKX9vxmSOk/1+ki1MsemXXKn9ss7ZbB0tm7V/DK7vkTgeA5c1xukC1INppbBUcgbn//92191XHfxqbOLLqVq1uHX1lEupv////+Pv3E55+JVOw/MyetQ5xm5Wv3sdf/////+5EPRSNxWN7i8YpbNPaiMplEvl1LVypZJcp4z+XEH//aJrMxDwyTF15lE8YjEDkqZ8hm0C5kbAZ+6mdIZrkOa+LmRF5kAyKA5kAeYyYFgAMNACIOBJgSURsLphm2GhYkPIAlQE1VRPlFExUlEllGZEhspkwdYiA9sjWUEaRbLY8oilSmCgJXq+LTpJSS6KUclgZyHdbsypCNd0NF4l5KZPoiMtJiSPzj2ncZq8TmupQvM4kGslXFTOM7jjO611yorNvy/TJbECSpaT/qqsvZhLX7nasmjMadp+nGiUzFoah5sUMxOTwBF6e43F2sbLcpPC3efSGYJVtjr1SqQxWGdsGibxyp2ovQ4Pxk12lfakf6BpbFWdQ3Huaxa9DTusleV/Y3Kn5h6fnYZt1LP/z/vdu/j+OGu5dw3zmv/n75/41PjQeIteYaqB3Z9eGVUVFW2zWfTQBzYAjdFwdUKqcySEIYDRsO/kyM0xUvQZEkRKhGJQGNNLIg4CykAPG2GGDkAPgdSYMomh4oS//u0xCEAHhF7Oe09keQ7sGW9vD39cICyyryhWDKFeJka8RXGalyEryuN1jHaZJgFwTJc0fChlCcpAkuCgS4nIQU+VAuV9+cyyzMjcEONNSo1ToY4XYWbJbEWsmiexXH5FEFISQmBs4IOEQShBHk5Wh0T3yGtJJ+5GtuvJoijZaXHblMdV64e4xDEUw4ipjdKRj+FCI+RPMJ2V9V8RaUruQkj2CKiVOtnqoxWwcdLoE+laFmJbEEm1MHpvCSm23YVtQzgEGd2mbZWTjcbkNDgkoQOHmTC5kSWYgvnGJpnAGMGKK4iOwsHA42M7GRUoMgGTCgQDBRc9Xw4JfKuC5KsIdxl7htOWTBzzQ7ELaDTtLWa8nCpgW2b5oC6U7xKqcCnbDHle1HktyyNymvMzaDDb2P81xWFpQwEWzFn9HiwdFYs7rp3n0a24n+ix9CPKJlNQTUtpCSVWVZsP1RKpFXNtifIMG8lzyH45HUjTxO5dn8cUZicV55OpBbmxFKFlkZEdASUNqdKY6kPLDZNq5OO2xTnKjXTC6S2ClUcRSuLUu0+7Uxh2gpSI+fNzEpU9MnmRhiqlFH2eV1OdMmzRJntYySfpr2JefvUaKvEq4WCubndLNUFaIqXhWckTSSMdzMUMNTEMa1NMZNdFMpHZwZYmGaAAIMKrMAxdowIAGmgEKTVEYlG5xGiF8lvIBUtXVgZw2SJDL/jHs2S1cZMeCEdg4WrY9tlZy0YMTKRtbVLtyGbHUS8kSoMVRnM4K8sTKji//u0xDaAIAWPJ+09mqz2PCI5vD41gJ0PUli8KJTppmkTRzzGkZLghosKjZUAl3h+MaGF2SZiIeAlBPw+UBOUzosGRJWJC4WCy8Yoz8SnnTHzo5PxFPBKUoGmbFh5ccNjxBQTpk4NiKJIgPFMShJfOXEGSymPiK8RnTMqHNX0S5GDZl84bZWLcKdoLIRVPGyq0hKk1++f17f0SoeUg3TIWF6vFgs+PsDtgitDu8IyzKofrXGVE5vCude1HJJKAUxJeOQPwMamIvZEcmQMJoSea0wmiC6iBCImJBw8bA5YBwqme045HPGSZqBsrBPVHXaS6aYIRMIaU0wuupspuhaKiLTL0SrGBrCl3UQE4k+V2KZJyqTUBxTzistYU4zcKBACJQRKNiV9L+DjP68bIVipdN84ohInhvv1CfwnsiiPE0AbRPkWizeKYsQtotqbBhFzHQSUeon4txiAXg5WAgp1ukWENHyhr4sJbRen4ZCHHcKqxolAri/PC4IprOYgz94vGQqxhHEOUyBciQjpVxJCFqVDW4nxdxutB/rRYS+o8v8aiuWlMp4bgrVIxvGNZiHO4KKzMqGlFIfOhq5w5WfKdOv2XKhcLRYTxk8m4e48WRziwmF7MyuaepLB7aqVdG9I1nsZxJAyE323+1ktsZJ7KqvijGzkcCjqk2yEWKrJHQqlrnpnK2o4goFLmCpOt4kKusuiwdDdpCJundUtZzMtKTFdUus2RYpCFQVYqmK6LxAoNSr5h10X9dldLkjLMYnJ//u0xC0AHiGBF609OyyLvR+1zDH4PRJUJSay8J8Okwh3l1MsMEVJUmir1ybogLGYyGwJXFVltP0fpfRNT9H6T5XPlKbJ4Rx8ktEmXa4OJYyQlCW06m4nRbiHqqz9UQDdfxk6nydIcXLDGZz2JOimlwYlyupOIjb0kFuOwVncUT0Qil1EKNpXLqUYNxS2q2pH11qu0kSmrE0ssgmXlwZ3D/rjNuKSbqChpVX3kgEglG5JbWi0I4IaVCRgQDolgoWEQLT2CBMz2ohOMEgJM8SBLQTA4OMDgZS4QHYA7KhK4zZUIiK6FpF3o61OsFzo+wWIomYIFIZWJDrWO22GhxS4xtagOsMybkGeQfUFUfTBL6q4FhFrkUk6UERNtJJHRr4FUnW0pBlxE71tIBWYyCDG5qCDN0LRxCkqnI9FwElYLGgnjqWkFZd1cQR1qPJ79hKHtetHY6CZ0uNqWUE5OTJu4ioisVTVwSicZHS5IfMg4HZ4gnp0UVxXIoTEkQRJBiRaOl4nnS4lE8ngJYJqM51UEpOOj8RSoWisJS87KpeN3BJWFkVGLR+99LzZcvYmBpOVVCEuVpV1TFE+uq4dJrpUx+0+peSHROVWeYp5kqmzXQAAGjbTabPzOgYEKplpE8kTlDlnMyhaLzJ35lS+l3V2svYzFpsymKyRNdly8lquKxplxddIBUxhYEwpqKeqHJU8na0gBX+AqoxDgjRqCZkGbTfAlVpgLETUIeNwL4OocCZNFGnCcVkmcKsYG1JJU90K//u0xDiAIpHk7029Oct+MB41h7L0TpOi3I5kY0NIKQmZKuLBCRipkTBet5ubx3DqTxBixkIJGfpBjSLyxn0h57K1TLmA2IlOoFcqQtqGq1yT0BkgJBKsKdPqiRJqxuFhXW0TGIPpDlErpMmlETaw2tjUT1lXTcQZDmlwiHC3kioSpybyUl5lj3IKQm7cXJFIxCjmhNl+uUa6DTRFqTuTHzMZQIo9KuVISVdYRG7U1E8REKQLHyGpPnACitrTclrkpmaPBd7cRdl8s5a3WBX+baHYZc2Hn+eWGnSh6AmXS1wWu9lNh3q81PzrhISh0JFJNkdw4rcizkFePM/mZmTxbVaqZSCmS3MKsSr1mNJjiLsQlGmUhJ0vUSqX5CUNTKoZy2uKuVrpmmL8QpCoLi2vVC2vUNYXj9Qv1kgzk4FuRKtYVQnl8qk8jle9YVaX0kydeIlU97Q0sSF+PnmiCAVSDVhewqSFr4V10qweTxcZCUyAKDUdVmNAkAEXC+aGx48nEEBp9GSR1OhSsAUAZI+5HuqPGPLNs53sAIKhqSCaYLhwnDOcqSrIhS5MyRJpIiIw9WMUI0GrRSRJVUkQCkaiKARLSKNFgECHEWsUtKpCoVNikyRJAk9VmOWhIXESKVktJ2z4qoUibZXEhJVmo54y2pTCpKrkqInxtCMiURCZMUikUkts1JpZqUkLOLbHCI0RE1oSXNz+SbNkLMYykmzS0yFmTUlVCZ6udDBEKnkJlZCQhktiVP8kt2mGpHnoyCiA//u0xFQAFJGA2aSZNKMnNZKxzTAlCSoDGlYIaVGpygYYefKF0UpWkqkrtgp6HRRPZ5axHA+enRVOHHuXIak+k6KgHkM9YJwSlxO+7i7XWv7etVMjdXHJVJA/RPnrxiHQnFtT7Ubs7M81d1qM5hc9lw+EkhHZdLh2oMkqI6XmSVTa388cpVBk+crFS06YfpGtgvy6B6ubzT5iVVCpnL8ZJXz2BGeprtHKHFuQrC0SWDoeSoZnhGAiKi22w9p6SjtQfUMkPvmzPZvfXN6zV52lmQL/9EfSDeEzcSop1UxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//u0xAADwAAAAAAAACAAADSAAAAETEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",Kj=bs(gt,VM),Yj=_n.createLock(VM),Kp=new _s;let bk=!1;const Nv=()=>{bk||(Yj(),bk=!0)},jj=i=>{Kp.audioBufferProperty.value===null&&(Kp.audioBufferProperty.set(i),Nv())},Xj=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Kp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Nv()},_k=gt.decodeAudioData(Kj.buffer,jj,Xj);_k&&_k.then(i=>{Kp.audioBufferProperty.value===null&&(Kp.audioBufferProperty.set(i),Nv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Nv()});class Qj extends Jb{constructor(e,t){super(Kp,t);const n=()=>{this.play()};e.lazyLink(n)}dispose(){th.assertNotDisposable()}}class Jj extends Ua{constructor(e,t){const n=new kt(Lv,{font:Vi.TITLE_FONT,maxWidth:Vi.CONTENT_MAX_WIDTH}),s=Ne()({titleAlign:"center",title:n,isDisposable:!1,phetioDynamicElement:!0,closeButtonVoicingDialogTitle:Lv},t),r=[Si.OVERVIEW];e.supportsSimulationPreferences()&&r.push(Si.SIMULATION),e.supportsVisualPreferences()&&r.push(Si.VISUAL),e.supportsAudioPreferences()&&r.push(Si.AUDIO),e.supportsInputPreferences()&&r.push(Si.INPUT),e.supportsLocalizationPreferences()&&r.push(Si.LOCALIZATION);const a=new qS(Si.OVERVIEW,{validValues:r,tandem:s.tandem.createTandem("selectedTabProperty")}),o=new Wj(r,a,{tandem:s.tandem.createTandem("preferencesTabs")}),l=new Oj(e,r,a,o,{tandem:s.tandem.createTandem("preferencesPanels")}),h=new Ai({children:[o,new zS({layoutOptions:{bottomMargin:20,stretch:!0}}),l]}),c=new Qj(a,{initialOutputLevel:.2});io.addSoundGenerator(c,{categoryName:"user-interface"}),super(h,s),this.preferencesTabs=o,this.preferencesPanels=l,o.addInputListener(new Xl({keys:["arrowDown"],fire:()=>{this.focusSelectedPanel()}})),h.addInputListener(new Xl({keys:["arrowUp"],fire:f=>{this.focusSelectedTab()},enabledProperty:new Dt([lr],()=>{const f=Gc();return!!f&&this.preferencesPanels.isFocusableSelectedContent(f)})}))}focusSelectedTab(){this.preferencesTabs.focusSelectedTab()}focusSelectedPanel(){this.preferencesPanels.focusSelectedPanel()}}const Zj=18.85;class $j extends d0{constructor(e,t,n){const s=Ne()({listener:()=>{const o=a.getElement();o.show(),o.focusSelectedTab()},highlightExtensionWidth:8.6,highlightExtensionHeight:10,accessibleName:Lv,positionInPDOM:!0,voicingNameResponse:Lv,visiblePropertyOptions:{phetioFeatured:!0}},n),r=new ba(vp,{scale:Zj/vp.height,pickable:!1});super(r,t,s);const a=new Iu(o=>new Jj(e,{tandem:o,focusOnHideNode:this}),[],{tandem:s.tandem.createTandem("preferencesDialogCapsule"),phetioType:Iu.PhetioCapsuleIO(Ua.DialogIO),disposeOnClear:!1});t.link(o=>{r.image=o.equals(ct.BLACK)?vp:s_}),this.setPDOMAttribute("aria-haspopup",!0)}}class eX extends _i{constructor(e,t,n){const s=Ne()({align:"center",spacing:2,tandem:R.REQUIRED},n),r=[];if(e.preferencesModel.shouldShowDialog()){const o=new $j(e.preferencesModel,t,{tandem:s.tandem.createTandem("preferencesButton"),pointerAreaDilationX:1,pointerAreaDilationY:1});r.push(o)}const a=e.preferencesModel.supportsAudioPreferences();if(a&&r.push(new $G(wu.audioEnabledProperty,t,{tandem:s.tandem.createTandem("audioToggleButton"),pointerAreaDilationX:1,pointerAreaDilationY:.15,supportsAudioPreferences:a})),e.hasKeyboardHelpContent){const o=new XG(e.screens,e.selectedScreenProperty,t,{tandem:s.tandem.createTandem("keyboardHelpButton"),pointerAreaDilationX:1,pointerAreaDilationY:1});phet.chipper.queryParameters.supportsInteractiveDescription&&!Zn.mobileSafari&&r.push(o)}s.children=r,super(ie.omit(s,"tandem"))}}const tX=new Fe(new He("JOIST/versionPattern",{en:"version {0}",af:"version {0}",ak:"version {0}",am:"ቅጂ {0}",ar:"الإصدار {0}",ar_KW:"اصدار {0}",ar_LY:"النسخة {0}",ar_MA:"نسخة {0}",ar_SA:"version {0}",ar_SY:"الإصدار {0}",ay:"versiya {0}",az:"versiya {0}",be:"версія {0}",bg:"версия {0}",bi:"version {0}",bn:"ভার্সন {0}",bo:"ཐོན་ {0}",bs:"verzija {0}",ca:"versió {0}",cs:"verze {0}",cy:"fersiwn {0}",da:"version {0}",de:"Version {0}",ee:"mɔdaŋua ƒe trɔtrɔ {0}",ef:"version {0}",el:"έκδοση {0}",en_GB:"version {0}",es:"Versión {0}",es_ES:"versión {0}",es_MX:"versión {0}",es_PE:"versión {0}",es_UY:"version {0}",et:"versioon {0}",eu:"Bertsioa {0}",fa:"نسخۀ {0}",fa_DA:"نسخۀ {0}",fi:"versio {0}",fr:"version {0}",ga:"leagan {0}",gl:"versión {0}",gu:"સંસ્કરણ {0}",ha:"Siga {0}",hi:"संस्करण {0}",hr:"verzija {0}",ht:"vèsyon {0}",hu:"Verzió: {0}",hy:"տարբերակ {0}",ig:"ụdị {0}",in:"Versi {0}",is:"útgáfa {0}",it:"versione {0}",iw:"גרסה {0}",ja:"バージョン {0}",ka:"ვერსია {0}",ki:"Mùthemba {0}",kk:"{0}-нұсқа",kn:"ಆವೃತ್ತಿ {0}",ko:"버전 {0}",ku:"وەشان {0}",ku_TR:"Nesxa {0}",lg:"Ekika:{0}",lo:"ສະບັບ {0}",lt:"Versija {0}",lv:"versija {0}",mg:"dikana {0}",mi:"putanga {0}",mk:"верзија {0}",ml:"വേര്‍ഷന്‍ {0}",mn:"хувилбар {0}",mr:"आवृत्ती {0}",ms:"versi {0}",mt:"verżjoni {0}",nb:"versjon {0}.",ne:"संस्करण {0}",nl:"versie {0}",nn:"versjon {0}",ny:"version {0}",om:"version {0}",pl:"wersja {0}",ps:"بڼه {0}",pt:"versão {0}",pt_BR:"versão {0}",qu:"Ima niraq {0}",ro:"versiunea {0}",ru:"версия {0}",rw:"ingeri {0}",se:"veršuvdna{0}",sh:"верзија{0}",si:"අනුවාදය  {0} ",sk:"verzia {0}",sl:"verzija{0}",sn:"mhando {0}",sp:"version {0}",sq:"versioni {0}",sr:"Верзија {0}",st:"Phetolelo e nngoe: {0}",sv:"version {0}",sw:"Toleo {0}",ta:"பதிப்பு {0}",te:"వెర్షన్ {0}",tg:"версияи {0}",th:"เวอร์ชันที่ {0}",ti:"ቕዳሕ {0}",tk:"wersiýa {0}",tl:"bersyon {0}",tn:"Tebego {0}",tr:"Versiyon {0}",tw:"Ade pɔtee {0}",uk:"версія {0}",ur:"ورژن: {0}",uz:"{0} versiya",vi:"phiên bản {0}",wo:"Yeesal {0}",yo:"Eda{0}",zh_CN:"版本 {0}",zh_HK:"版本 {0}",zh_TW:"版本 {0}",zu:"version {0}"},R.OPT_OUT),R.OPT_OUT),iX=gr(i=>class extends i{constructor(...t){super(...t)}insertChild(t,n){throw new Error("Attempt to insert child into Leaf")}removeChildWithIndex(t,n){throw new Error("Attempt to remove child from Leaf")}});class kM extends iX(Ge){constructor(e,t,n){super(),this.localBounds=new pt(0,0,e,t),this.mutate(n)}}class Fm extends kM{constructor(e,t){super(0,e,t)}}const nX=new Fe(new He("JOIST/credits.title",{en:"Credits",af:"Erkenning",am:"ምስጋና",ar:"الاعتمادات",ar_KW:"فريق العمل",ar_LY:"الاعتمادات",ar_MA:"اعتمادات",ar_SA:"الاعتمادات",ar_SY:"الاعتمادات",ay:"Tanıtım - Yardımçılar",az:"Tanıtım - Yardımçılar",be:"Над праграмай працавалі",bg:"Автори",bi:"Credit i go lo",bn:"ক্রেডিট",bo:"ལེགས་གསོལ་ཐོ་གཞུང་།",bs:"Zasluge",ca:"Reconeixements",cs:"Zásluhy",cy:"Clodrestr",da:"Kreditering",de:"Credits",ee:"kafukafunyawo",ef:"Utip-mfọñ",el:"Εύσημα",en_GB:"Checking for updates…",es:"Créditos",es_ES:"Créditos",es_MX:"Créditos",es_PE:"Créditos",es_UY:"Créditos",et:"Autorid",eu:"Kreditoak",fa:"فهرست نام مشارکت کنندگان",fa_DA:"فهرست نام اشتراک کنندگان",fi:"Tunnustukset",fo:"Undantekstur",fr:"Licences",ga:"Creidiúintí",gl:"Créditos",gu:"શ્રેય",ha:"Lada",hi:"श्रेय",hr:"Zasluge",ht:"Kredi",hu:"Közreműködők",hy:"Հեղինակներ",ig:"Onyinye",in:"Hak Cipta",is:"Höfundar",it:"Riconoscimenti",iw:"קרדיטים",ja:"関係者",ka:"პროექტზე მუშაობდნენ",ki:"Ĩnĩkĩrĩrwo",kk:"Бағдарламаны жасағандар",kn:"ಕ್ರೆಡಿಟ್‌ಗಳು",ko:"크레디트",ku:"ئەماژەکردنەکان",ku_TR:"navnîşana krediyê",lg:"Okwebaza",lo:"ຄວາມເຊື່ອຖື",lt:"Kūrėjai",lv:"Autori",mg:"Nahazoan-dalana",mi:"Waetohu",mk:"Заслуги",mn:"Нэрс",mr:"ऋणनिर्देश",ms:"Penghargaan",mt:"Krediti",my:"အသိအမှတ်ပြုမှု",nb:"Krediteringer",ne:"श्रेय ",nl:"Credits",nn:"Krediteringar",ny:"Chilolezo",om:"Beekamtii",or:"ସ୍ୱୀକୃତି",pl:"Zespół autorski",ps:"امتیازونه",pt:"Créditos",pt_BR:"Créditos",qu:"Takyachisqa",ro:"Credite",ru:"Над программой работали",rw:"Gushimira",sd:"مڃتا",se:"Krediteremat",sh:"Заслуге",si:"ගෞරව කිරීම්",sk:"Zásluhy",sl:"Zahvala",sn:"Rumbidzo",sp:"Dikrediti",sq:"Kreditë:",sr:"Заслуге",st:"Litlotlo",sv:"Medverkande",sw:"Shukurani",ta:"நன்றிகள்",te:"క్రెడిట్స్",tg:"Муаллифон",th:"ผู้พัฒนา",ti:"ኣፍልጦ",tk:"Ýerine ýetirijiler barada maglumat",tl:"Pagkilala",tn:"Dintlha tsa tebogo",tr:"Tanıtım",tw:"Mfasoɔ",uk:"Кредити",ur:"بشکریہ (کریڈٹ)",uz:"Kreditlar",vi:"Công trạng",wo:"Lep",yo:"Awọn kirediti",zh_CN:"制作者",zh_HK:"人員名單",zh_TW:"謝誌",zu:"Amakhredithi"},R.OPT_OUT),R.OPT_OUT),sX=new Fe(new He("JOIST/credits.leadDesign",{en:"Lead Design: {0}",af:"Lead Design: {0}",am:"መሪ ቀራፂ፡{0}",ar:"تصميم العميل المحتمل: {0}",ar_KW:"التصميم الرئيسي: {0}",ar_LY:"تصميم الرصاص: {0}",ar_MA:"انجاز التصميم: {0}",ar_SA:"Lead Design: {0}",ay:"Baş Dizayner: {0}",az:"Baş Dizayner: {0}",be:"Дызайн: {0}",bg:"Водещи дизайнери: {0}",bi:"Lead Design: {0}",bn:"Lead Design: {0}",bo:"བཟོ་བཀོད་གཙོ་བོ། {0}",bs:"Glavni dizajn: {0}",ca:"Director de disseny: {0}",cs:"Design: {0}",cy:"Prif Dyluniad: {0}",da:"Hoveddesign: {0}",de:"Idee & Design: {0}",ee:"Aɖaŋu ŋgɔnɔla  : {0}",ef:"Lead Design: {0}",el:"Επικεφαλής σχεδιασμού: {0}",en_GB:"Lead Design: {0}",es:"Elaboración de diseño:  {0}",es_ES:"Diseño: {0}",es_MX:"Líder de Diseño: {0}",es_PE:"Diseño Principal: {0}",es_UY:"Lead Design: {0}",et:"Kujundaja:{0}",eu:"Diseinu nagusia: {0}",fa:"{0} :طراح ارشد",fa_DA:"{0} :طراح ارشد",fi:"Suunnittelu: {0}",fr:"Conception principale: {0}",ga:"Príomhdhearthóir: {0}",gl:"Responsables de deseño: {0}",gu:"મુખ્ય ડીઝાઈન: {0}",ha:"Zanen da ke jagoranci: {0}",hi:"डिजाईन नेतृत्व : {0}",hr:"Glavni dizajn: {0}",ht:"Konsepsyon pwensipal: {0}",hu:"Vezető tervező: {0}",hy:"Ոճավորումը՝ {0}",ig:"Ibu Uzo Imewe:{0}",in:"Perancang Desain: {0}",is:"Hönnunarstjórn: {0}",it:"Direttore del progetto: {0}",iw:"עיצוב ראשי: {0}",ja:"デザイン責任者: {0}",ka:"მთავარი დიზაინი: {0}",ki:"Design ndongoria: {0}",kk:"{0}-дизайн",kn:"ಲೀಡ್ ವಿನ್ಯಾಸ: {0}",ko:"선임 디자인: {0}",ku:"داڕشتنی سەرەکی {0}",ku_TR:"Sêwirana Gûlle: {0}",lg:"Entegeka enkulu: {0}",lo:"ການອອກແບບ{0}",lt:"Pagr. projektuotojai: {0}",lv:"Galvenā ideja/dizains: {0}",mg:"Famolavolana fitarihana: {0}",mi:"Kaiārahi Hoahoa: {0}",mk:"Водечки дизајн: {0}",mn:"Дизайны удирдагч: {0}",mr:"मुख्य रचना: {0}",ms:"Reka Bentuk Utama: {0}",mt:"Qofol:{0}",my:"ခဲ ဒီဇိုင်း {0}",nb:"Design: {0}",ne:"नेतृत्व डिजाइन: {0}",nl:"Hoofd ontwerp: {0}",nn:"Sjefsdesignar: {0}",ny:"Dizaini yotsogolera: {0}",om:"Bocca Dursaa: {0}",pl:"Główny projektant: {0}",ps:"مشر ډيزاینر : {0}",pt:"Direção de Design: {0}",pt_BR:"Líder do Design: {0}",qu:"Pallariy chaniyuq: {0}",ro:"Design principal: {0}",ru:"Дизайн: {0}",rw:"Uwabihimbye bwa mbere: {0}",se:"Design: {0}",sh:"Дизајн: {0}",si:"මග පෙන්වන නිර්මාණ: {0}",sk:"Vedúci dizajnu: {0}",sl:"Vodja oblikovanja: {0}",sn:"Lead Design: {0}",sp:"Lead Design: {0}",sq:"Dizajni udhëheqës: {0}",sr:"Дизајн: {0}",st:"Boqapi  ba pele: {0}",sv:"Lead Design: {0}",sw:"Muundo mama: {0}",ta:"தலைமை வடிவமைப்பு: {0}",te:"లీడ్ డిజైన్: {0}",tg:"Тарҳрезӣ пешбар: {0}",th:"ผู้ออกแบบหลัก: {0}",ti:"መሪሕ ሃንዳሲ: {0}",tk:"Baş dizaýner: {0}",tl:"Disenyo ng Lead: {0}",tn:"Moalo o o ko godimo: {0}",tr:"Ana dizayn: {0}",tw:"Adeyɛ Asehyɛ: {0}",uk:"Провідний дизайн: {0}",ur:"ناظمِ تزئین: {0}",uz:"Loyiha yetakchisi:{0}",vi:"Thiết kế chính: {0}",wo:"Ku Jite Natal Yi: {0}",yo:"Siwaju batani: {0}",zh_CN:"首席设计: {0}",zh_HK:"主要設計: {0}",zh_TW:"首席設計：{0}",zu:"Lead Design: {0}"},R.OPT_OUT),R.OPT_OUT),rX=new Fe(new He("JOIST/credits.softwareDevelopment",{en:"Software Development: {0}",af:"Software Development: {0}",am:"የሶፍትዌር ልማት፡{0}",ar:"تطوير البرمجيات: {0}",ar_KW:"تطوير البرمجيات : {0}",ar_LY:"تطوير البرمجيات: {0}",ar_MA:"مطور التطبيق: {0}",ar_SA:"Software Development: {0}",ay:"Proqram tərtibatçıları: {0}",az:"Proqram tərtibatçıları: {0}",be:"Распрацоўка ПЗ: {0}",bg:"Разработил софтуера: {0}",bi:"Software Development: {0}",bn:"Software Development: {0}",bo:"མཉེན་ཆས་བཟོ་བསྐྲུན། {0}",bs:"Razvoj softvera: {0}",ca:"Desenvolupament del programari: {0}",cs:"Vývoj software: {0}",cy:"Datblygiad Meddalwedd: {0}",da:"Software udvikling: {0}",de:"Software Entwicklung: {0}",ee:"Kɔmpiutadziɖoɖowo wɔwɔ: {0}",ef:"Software Development: {0}",el:"Ανάπτυξη λογισμικού: {0}",en_GB:"Software Development: {0}",es:"Desarrollo de software {0}",es_ES:"Desarrollo de software: {0}",es_MX:"Desarrollo de Software: {0}",es_PE:"Desarrollo del Software: {0}",es_UY:"Software Development: {0}",et:"Tarkvara arendus:{0}",eu:"Software-garapena: {0}",fa:"{0} :توسعه نرم افزار",fa_DA:"{0} :توسعه نرم افزار",fi:"Ohjelmistokehitys: {0}",fr:"Développement de logiciel: {0}",ga:"Forbairt Bogearraí: {0}",gl:"Desenvolvemento de software: {0}",gu:"સોફ્ટવેર ડેવલપમેન્ટ: {0}",ha:"Ci gaba da samarda manhaja: {0}",hi:"सॉफ्टवेयर विकास :{0}",hr:"Razvoj softvera: {0}",ht:"Devlopman Lojisyèl: {0}",hu:"Szoftverfejlesztés: {0}",hy:"Ծրագրաշարի մշակումը` {0}",ig:"Mmepe Ngwanrọ: {0}",in:"Pengembangan Software: {0}",is:"Hugbúnaðarþróun: {0}",it:"Sviluppo del software {0}",iw:"פיתוח תכנה: {0}",ja:"ソフトウェア開発: {0}",ka:"პროგრამული უზრუნველყოფა: {0}",ki:"Software Development: {0}",kk:"Бағдарламалық жасақтама әзірленуі: {0}",kn:"ತಂತ್ರಾಂಶ ಅಭಿವೃದ್ಧಿ: {0}",ko:"소프트웨어 개발: {0}",ku:"پەرەپێدانی نەرمەواڵە:{0}",ku_TR:"pêşveçûna nermalavê: {0}",lg:"Okuzimba sofutiweeya:{0}",lo:"ການພັດທະນາຊອບແວ: {0}",lt:"Programos kūrėjai: {0}",lv:"Programmatūras izstrāde: {0}",mg:"Famolavolana rindrambaiko: {0}",mi:"Hanga Pūmanawa: {0}",mk:"Развој на софтвер: {0}",mn:"Программ хангамж хөгжүүлэгчид: {0}",mr:"आज्ञावली विकसन : {0}",ms:"Pembangunan Aplikasi: {0}",mt:"Żvilupp ta' Softwer:{0}",nb:"Utvikler: {0}",ne:"सफ्टवेयर विकास (सम्पादन): {0}",nl:"Software ontwikkeling: {0}",nn:"Programvareutvikling: {0}",ny:"Kupanga Software: {0}",om:"Misooma Mosajjii: {0}",pl:"Rozwój oprogramowania: {0}",ps:"د سافټ ویرونو پراختیا: {0}",pt:"Desenvolvimento de Software: {0}",pt_BR:"Desenvolvimento de Software: {0}",qu:"Software nisqa ruwasqa: {0}",ro:"Dezvoltare software: {0}",ru:"Разработка ПО: {0}",rw:"Inonosora rya porogaramu:{0}",se:"Prográmmagálvoovdánahttin: {0}",sh:"Развој софтвера: {0}",si:"මෘදුකාංග සංවර්ධනය: {0}",sk:"Vývoj softvéru: {0}",sl:"Programiranje: {0}",sn:"Sofutiwe Dhivheropumendi: {0}",sp:"Software Development: {0}",sq:"Zhvillimi i Softuerit: {0}",sr:"Развој софтвера: {0}",st:"Khaho ea Software : {0}",sv:"Mjukvaruutveckling: {0}",sw:"Uundaji wa maunzilaini: {0}",ta:"மென்பொருள் விருத்தி: {0}",te:"సాఫ్ట్వేర్ డెవలప్మెంట్: {0}",tg:"Таҳиягарони барнома: {0}",th:"ผู้พัฒนาซอฟแวร์: {0}",ti:"ኣማዕባሊ ሶፍትዌር: {0}",tk:"Programma üpjünçiligini düzenler: {0}.",tl:"Software Development: {0}",tn:"Kago ya Software: {0}",tr:"Yazılım Geliştirme: {0}",tw:"Nniema foforɔ adeyɛ: {0}",uk:"Розробка програмного забезпечення: {0}",ur:"سافٹ ویر کی تخلیق: {0}",uz:"Dasturiy ta'minot ishlab chiqarish: {0}",vi:"Phát triển phần mềm: {0}",wo:"Xarala :{0}",yo:"Idagbasoke Software: {0}",zh_CN:"软件开发: {0}",zh_HK:"軟件開發：{0}",zh_TW:"軟體開發：{0}",zu:"Software Development: {0}"},R.OPT_OUT),R.OPT_OUT),aX=new Fe(new He("JOIST/credits.team",{en:"Team: {0}",af:"Team: {0}",am:"ቡድን፡{0}",ar:"الفريق: {0}",ar_KW:"الفريق: {0}",ar_LY:"الفريق: {0}",ar_MA:"فريق العمل: {0}",ar_SA:"الفريق: {0}",ay:"Komanda: {0}",az:"Komanda: {0}",be:"Каманда: {0}",bg:"Екип: {0}",bi:"Team: {0}",bn:"Team: {0}",bo:"ཚོགས་མི། {0}",bs:"Tim: {0}",ca:"Equip: {0}",cs:"Tým: {0}",cy:"Tîm: {0}",da:"Team: {0}",de:"Team: {0}",ee:"Dɔwɔha: {0}",ef:"Uwak Ammọh: {0}",el:"Ομάδα: {0}",en_GB:"Team: {0}",es:"Equipo: {0}",es_ES:"Equipo: {0}",es_MX:"Equipo: {0}",es_PE:"Equipo: {0}",es_UY:"Team: {0}",et:"Meeskond: {0}",eu:"Taldea: {0}",fa:"تیم: {0}",fa_DA:"تیم: {0}",fi:"Tiimi: {0}",fo:"Lið: {0}",fr:"Équipe: {0}",ga:"Foireann: {0}",gl:"Equipo: {0}",gu:"ટીમ: {0}",ha:"Tawaga: {0}",hi:"दल : {0}",hr:"Tim: {0}",ht:"Ekip: {0}",hu:"Munkatársak: {0}",hy:"Թիմը՝ {0}",ig:"Ụlọ Ọrụ:{0}",in:"Team: {0}",is:"Teymið: {0}",it:"Il Team: {0}",iw:"צוות: {0}",ja:"チーム: {0}",ka:"გუნდი: {0}",ki:"Gììkùndi: {0}",kk:"{0}-команда",kn:"ತಂಡ: {0}",ko:"팀: {0}",ku:"گروپ:{0}",ku_TR:"Kom: {0}",lg:"Tiimu{0}",lo:"ຊຸດ: {0}",lt:"Komanda: {0}",lv:"Komanda: {0}",mg:"Ekipa: {0}",mi:"Tīma: {0}",mk:"Тим: {0}",ml:"ടീം : {0}",mn:"Багийн гишүүд: {0}",mr:"संघ: {0}",ms:"Kumpulan: {0}",mt:"Tim:{0}",my:"အဖွဲ့ {0}",nb:"Gruppe: {0}.",ne:"टोली: {0}",nl:"Groep: {0}",nn:"Gruppe: {0}",ny:"Gulu: {0}",om:"Garee: {0}",pl:"Zespół: {0}",ps:"ټیم: {0}",pt:"Equipa: {0}",pt_BR:"Equipe: {0}",qu:"Huñu: {0}",ro:"Echipa: {0}",ru:"Команда: {0}",rw:"Itsinda:{0}",se:"Bargojoavku: {0}",sh:"Тим: {0}",si:"කණ්ඩායම: {0}",sk:"Tím: {0}",sl:"Skupina: {0}",sn:"Chikwata: {0}",sp:"Team: {0}",sq:"Ekipi: {0}",sr:"Тим: {0}",st:"Sehlopha: {0}",sv:"Team: {0}",sw:"Timu: {0}",ta:"குழு: {0}",te:"జట్టు: {0}",tg:"Команда: {0}",th:"ทีมผู้ร่วมพัฒนา: {0}",ti:"ጉጅለ: {0}",tk:"Topar: {0}",tl:"Pangkat: {0}",tn:"Setlhopha: {0}",tr:"Takım: {0}",tw:"ɛkou: {0}",uk:"Команда: {0}",ur:"ٹیم: {0}",uz:"Jamoa: {0}",vi:"Nhóm thiết kế: {0}",wo:"Farando {0}",yo:"Egbe: {0}",zh_CN:"团队: {0}",zh_HK:"團隊: {0}",zh_TW:"團隊：{0}",zu:"Team: {0}"},R.OPT_OUT),R.OPT_OUT),oX=new Fe(new He("JOIST/credits.contributors",{en:"Contributors: {0}",af:"Bydraers: {0}",am:"አስተዋጽዖ አበርካቾች: {0}",ar:"المساهمون: {0}",ar_KW:"المساهمون: {0}",ar_LY:"المساهمون: {0}",ar_MA:"المساهمون: {0}",ar_SA:"المشاركون: {0}",ay:"İştirak edənlər: {0}",az:"İştirak edənlər: {0}",be:"Аўтары: {0}",bg:"Сътрудници:  {0}",bn:"Contributors: {0}",bo:"མཐུན་འགྱུར་བྱེད་མེ། {0}",bs:"Saradnici: {0}",ca:"Hi han contribuït: {0}",cs:"Přispěvatelé: {0}",cy:"Cyfranwyr: {0}",da:"Bidragsydere: {0}",de:"Beiträge von: {0}",ee:"Nudzɔlawo: {0}",el:"Συνεισφέροντες: {0}",es:"Colaboradores: {0}",es_ES:"colaboradores {0}",es_MX:"Contribuciones: {0}",es_PE:"Colaboradores: {0}",et:"Kaasautorid: {0}",eu:"Laguntzaileak: {0}",fa:"{0} :مشارکت کنندگان",fa_DA:"{0} :اشتراک کنندگان",fi:"Tekijät: {0}",fr:"Contributeurs: {0}",ga:"Rannpháirtithe: {0}",gl:"Contribucións: {0}",gu:"સહયોગી :{0}",ha:"Waɗanda suka bada gudummuwa: {0}",hi:"योगदानकर्ता :{0}",hr:"Suradnici: {0}",ht:"Kontribitè: {0}",hu:"Munkatársak: {0}",hy:"Նախագծի մասնակիցներ {0}",ig:"Onye Ntinye Aka: {0}",in:"Kontributor: {0}",is:"Meðhöfundar: {0}",it:"Collaboratori: {0}",iw:"תורמים: {0}",ja:"貢献者: {0}",ka:"კონტრიბუტორები {0}",ki:"Nyongereri: {0}",kk:"Жобаға қатысқандар: {0}",kn:"ಕೊಡುಗೆದಾರರು: {0}",ko:"기여자: {0}",ku:"بەشداربووان: {0}",ku_TR:"hevsengiyên hîsedarên: {0}",lg:"Ebyetagisa:{0}",lo:"ຜູ້ຮ່ວມໃຫ້ຂໍ້ມູນ:{0}",lt:"Prisidėjo: {0}",lv:"Līdzautori: {0}",mg:"Mpandray anjara: {0}",mi:"Kaiāwhina: {0}",mk:"Допринесувачи: {0}",mn:"Дэмжиж ажилласан: {0}",mr:"सहभागी: {0}",ms:"Penyumbang: {0}",mt:"Kontributuri:{0}",my:"ပါဝင်သူများ {0}",nb:"Bidragsytere: {0}",ne:"योगदानकर्ता: {0}",nl:"Bijdrage van: {0}",nn:"Bidragsytarar: {0}",ny:"Wothandizira: {0}",om:"Gumaachitoota: {0}",pl:"Współtwórcy: {0}",ps:"مرسته کوونکي: {0}",pt:"Contribuidores: {0}",pt_BR:"Colaboradores: {0}",qu:"Yanapaqkuna: {0}",ro:"Colaboratori: {0}",ru:"В проекте участвовали: {0}",rw:"Abagize uruhare: {0}",se:"Buktoaddit: {0}",si:"දායකයින්: {0}",sk:"Prispievatelia: {0}",sl:"Sodelavci: {0}",sn:"Zvibatsiri : {0}",sp:"Contributors: {0}",sq:"Kontribues: {0}",sr:"Сарадници: {0}",st:"bat'sehetsi{0}",sv:"Bidragsgivare: {0}",sw:"Walio Changia: {0}",ta:"பங்களிப்பாளர்கள்: {0}",te:"Contributors: {0}",tg:"Саҳмгузорон: {0}",th:"ตัวช่วย: {0}",ti:"ኣስተዋፅኦ ዝገበሩ : {0}",tk:"Goşant goşanlar: {0}",tl:"Mga kontribyutor: {0}",tn:"Ditsaya karolo: {0}",tr:"Katkıda bulunanlar: {0}",tw:"Aboafoɔ: {0}",uk:"Автори: {0}",ur:"شراکت دار: {0}",uz:"Hissa qo‘shganlar: {0}",vi:"Những người đóng góp:{0}",wo:" ñusibok: {0}",yo:"Àwọn olùkópa: {0}",zh_CN:"投稿者:{0}",zh_HK:"撰稿人:  {0}",zh_TW:"貢獻者：{0}",zu:"Contributors: {0}"},R.OPT_OUT),R.OPT_OUT),lX=new Fe(new He("JOIST/credits.qualityAssurance",{en:"Quality Assurance: {0}",af:"Quality Assurance: {0}",am:"የጥራት ማረጋገጫ፡{0}",ar:"ضمان الجودة: {0}",ar_KW:"ضمان الجودة : {0}",ar_LY:"ضمان الجودة: {0}",ar_MA:"ضمان الجودة:{0}",ar_SA:"ضمان الجودة: {0}",ay:"Keyfiyyətin təminatı: {0}",az:"Keyfiyyətin təminatı: {0}",be:"Тэсціраванне: {0}",bg:"Качествен контрол: {0}",bi:"Quality Assurance: {0}",bn:"Quality Assurance: {0}",bo:"སྤུས་ཚད་དག་བཤེར། {0}",bs:"Osiguranje kvaliteta: {0}",ca:"Control de qualitat: {0}",cs:"Zajištění kvality: {0}",cy:"Sicrhau Ansawdd: {0}",da:"Kvalitetssikring: {0}",de:"Qualitätssicherung: {0}",ee:"Dɔ nyuie wɔwɔ ƒe kakaɖedzi : {0}",ef:"Quality Assurance: {0}",el:"Εγγύηση ποιότητας: {0}",en_GB:"Quality Assurance: {0}",es:"Seguro de calidad: {0}",es_ES:"Control de calidad: {0}",es_MX:"Seguro de calidad: {0}",es_PE:"Control de calidad: {0}",es_UY:"Quality Assurance: {0}",et:"Kvaliteedi tagamine: {0}",eu:"Kalitate aseguroa: {0}",fa:"تضمین کیفیت: {0}",fa_DA:"تضمین کیفیت: {0}",fi:"Laadunvarmistus: {0}",fr:"Assurance qualité: {0}",ga:"Dearbhú Cáilíochta: {0}",gl:"Control de calidade: {0}",gu:"ગુણવત્તાની ખાતરી: {0}",ha:"Tabbatarda inganci: {0}",hi:"गुणवत्ता आश्वासन : {0}",hr:"Garancija kvalitete: {0}",ht:"Asirans Kalite: {0}",hu:"Minőségbiztosítás: {0}",hy:"Թեստավորումը՝ {0}",ig:"Ntụkwasị Obi Ịdị Mma: {0}",in:"Jaminan Kualitas: {0}",is:"Gæðaeftirlit: {0}",it:"Garanzia di Qualità: {0}",iw:"אבטחת איכות: {0}",ja:"品質保証者 :{0}",ka:"ხარისხის უზრუნველყოფა:  {0}",ki:"Kũmenyeria Ngumo: {0}",kk:"Тестілеу: {0}",kn:"ಗುಣಮಟ್ಟದ ಭರವಸೆ: {0}",ko:"질 보장: {0}",ku:"دڵنیایی جۆری: {0}",ku_TR:"garantî kalîteyê: {0} ",lg:"Okukakasa omutindo: {0}",lo:"ປະກັນຄຸນນະພາບ: {0}",lt:"Kokybės užtikrinimas: {0}",lv:"Kvalitātes nodrošinājums: {0}",mg:"Fiantohana kalitao: {0}",mi:"Kaititiro i te painga: {0}",mk:"Квалитетно остварување: {0}",mn:"Чанарын баталгаа: {0}",mr:"गुणवत्ता अभिवचन: {0}",ms:"Jaminan Kualiti: {0}",mt:"Assikurazzjoni tal-Kwalita:{0}",my:"အရည်အသွေး အာမခံချက် {0}",nb:"Kvalitetssikret: {0}",ne:"गुणस्तर आश्वासन: {0}",nl:"Kwaliteitsborging: {0}",nn:"Kvalitetssikring: {0}",ny:"Chitsimikizo chadongosolo: {0}",om:"Wabii Qulqullinaa: {0}",pl:"Kontrola jakości: {0}",ps:"تضمین کیفیت: {0}",pt:"Controlo de Qualidade: {0}",pt_BR:"Garantia de Qualidade: {0}",qu:"Allin kasqa takyachisqa: {0}",ro:"Asigurarea calității: {0}",ru:"Тестирование: {0}",rw:"Ubwishingizi bufite ireme:{0}",se:"Kvalitehtasihkkarastin: {0}",sh:"Осигурање квалитета: {0}",si:"තත්ත්ව සහතිකය: {0}",sk:"Potvrdenie kvality: {0}",sl:"Kontrola kvalitete: {0}",sn:"Quality Assurance: {0}",sp:"Quality Assurance: {0}",sq:"Sigurimi i Cilësisë: {0}",sr:"Гаранција квалитета: {0}",st:"Netefatso ea boleng (quality): {0}",sv:"Kvalitetskontroll: {0}",sw:"Udhibiti Ubora: {0}",ta:"தர உறுதி: {0}",te:"క్వాలిటీ అస్యూరెన్స్ : {0}",tg:"Санҷиши сифатнокӣ: {0}",th:"ผู้ควบคุมคุณภาพการผลิต: {0}",ti:"ፅሬየት ተቖፃፃሪ: {0}",tk:"Hil barlagy: {0}",tl:"Tiyak na kalidad: {0}",tn:"Go rurifatsa boleng: {0}",tr:"Kalite Garantisi: {0}",tw:"Mfomsoɔ kwansie: {0}",uk:"Забезпечення якості: {0}",ur:"معیار کی ضمانت : {0}",uz:"Sifat nazoratchilari: {0}",vi:"Kiểm định chất lượng: {0}",wo:"Lu waur: {0}",yo:": {0}",zh_CN:"品质保证: {0}",zh_HK:"質素保証 : {0}",zh_TW:"品管：{0}",zu:"Quality Assurance: {0}"},R.OPT_OUT),R.OPT_OUT),hX=new Fe(new He("JOIST/credits.graphicArts",{en:"Graphic Arts: {0}",af:"Graphic Arts: {0}",am:"ግራፊክ ጥበባት፡{0}",ar:"فنون الجرافيك: {0}",ar_KW:"فن الرسم: {0}",ar_LY:"تصميم الصوت: {0}",ar_MA:"انجاز فنون الجرافيك: {0}",ar_SA:"Graphic Arts: {0}",ay:"Qrafik sənətlər tərtibatçısı: {0}",az:"Qrafik sənətlər tərtibatçısı: {0}",be:"Графіка: {0}",bg:"Графични дизайнери: {0}",bi:"Graphic Arts: {0}",bn:"Graphic Arts: {0}",bo:"བརྐོས་རིས། {0}",bs:"Grafika: {0}",ca:"Disseny gràfic: {0}",cs:"Grafika: {0}",cy:"Celfyddydau Graffeg:{0}",da:"Grafisk udformning: {0}",de:"Grafik: {0}",ee:"Nɔnɔmetatawo: {0}",el:"Γραφικά: {0}",en_GB:"Graphic Arts: {0}",es:"Artes gráficas:  {0}",es_ES:"Artes gráficas: {0}",es_MX:"Artes gráficas:{0}",es_PE:"Artes Gráficas: {0}",es_UY:"Graphic Arts: {0}",et:"Graafika:{0}",eu:"Arte grafikoak {0}",fa:"{0} :هنرهای گرافیکی",fa_DA:"{0} :هنرهای گرافیکی",fi:"Graafinen toteutus: {0}",fr:"Arts visuels: {0}",ga:"Ealaín Ghrafach: {0}",gl:"Gráficos e Arte: {0}",gu:"ચિત્રણ : {0}",ha:"Hoton da aka zana: {0}",hi:"ललित कलाएं {0}",hr:"Grafika: {0}",ht:"Grafik Atizay: {0}",hu:"Grafika: {0}",hy:"Գրաֆիկան՝ {0}",ig:"Eserese:{0}",in:"Tampilan Grafis: {0}",is:"Grafík: {0}",it:"Grafica: {0}",iw:"עיצוב אומנותי: {0}",ja:"グラフィックアーティスト: {0}",ka:"გრაფიკა: {0}",ki:"Graphic Arts: {0}",kk:"{0}-графика",kn:"ಗ್ರಾಫಿಕ್ ಕಲೆ: {0}",ko:"그래픽 아트: {0}",ku:"هونەری گرافیک {0}",ku_TR:"hunerên xêzkirinê: {0}",lg:"Ebifaananyi by’emikono:{0}",lo:"ຮູບພາບ: {0}",lt:"Grafika: {0}",lv:"Ilustrācijas: {0}",mg:"Zavakanto sary: ​​{0}",mi:"Toi whakanikoniko: {0}",mk:"Графички уметности: {0}",mn:"График дизайн: {0}",mr:"आरेखन कला: {0}",ms:"Seni Grafik: {0}",mt:"Arti Grafika:{0}",nb:"Grafikk: {0}",ne:"ग्राफिक कला: {0}",nl:"Grafisch werk: {0}",nn:"Grafikk: {0}",ny:"Zojambulajambula: {0}",om:"Aartii Giraafiksii: {0}",pl:"Grafika: {0}",ps:"ګرافیکي هنرونه: {0}",pt:"Grafismo: {0}",pt_BR:"Artes Gráficas: {0}",qu:"Artes gráficas nisqanmanta: {0}",ro:"Grafică: {0}",ru:"Графика: {0}",rw:"Ubugeni:{0}",se:"Gráfalaš design: {0}",sh:"Графика: {0}",si:"ප්‍රස්තාරික චිත්‍ර : {0}",sk:"Grafika: {0}",sl:"Grafika: {0}",sn:"Graphic Arts: {0}",sp:"Graphic Arts: {0}",sq:"Arte Grafike: {0}",sr:"Графика: {0}",st:"Lits'oants'o (Botaki): {0}",sv:"Grafik: {0}",sw:"Sanaa na Michoro: {0}",ta:"வரைபடக் கலைகள்: {0}",te:"గ్రాఫిక్ ఆర్ట్స్ : {0}",tg:"Санъати графикӣ: {0}",th:"ผู้ออกแบบกราฟิก: {0}",ti:"ግራፊክ ጥበብ: {0}",tk:"Grafika işleri: {0}",tl:"Grapik na Art:{0}",tn:"Ditshwantsho tsa maranyane {0}",tr:"Grafikler: {0}",tw:"Mfonini Adeyɛ: {0}",uk:"Графіка: {0}",ur:"گرافک آرٹس: {0}",uz:"Grafika muharrirlari: {0}",vi:"Đồ hoạ: {0}",wo:"Natal: {0}",yo:"Aworan: {0}",zh_CN:"美工设计: {0}",zh_HK:"美術: {0}",zh_TW:"美術設計：{0}",zu:"Graphic Arts: {0}"},R.OPT_OUT),R.OPT_OUT),uX=new Fe(new He("JOIST/credits.soundDesign",{en:"Sound Design: {0}",af:"Sound Design: {0}",am:"የድምፅ አቀናባሪ፡ {0}",ar:"تصميم الصوت: {0}",ar_KW:"تصميم الصوت: {0}",ar_LY:"تصميم الصوت: {0}",ar_MA:"تصميم الصوت: {0}",ar_SA:"Sound Design: {0}",ay:"Səs dizaynı: {0}",az:"Səs dizaynı: {0}",be:"Гукавы дызайн: {0}",bg:"Аудио режисьор: {0}",bn:"Sound Design: {0}",bo:"སྒྲ་སྒྲིགས་བཀོད {0}",bs:"Sound Design: {0}",ca:"Disseny de so: {0}",cs:"Návrh zvuku: {0}",cy:"Dyluniad Sain: {0}",da:"Lyddesign: {0}",de:"Ton Design: {0}",ee:"Gbeɖiɖi ƒe Nɔnɔme: {0}",el:"Σχεδιασμός ήχου: {0}",es:"Diseño de Sonido: {0}",es_ES:"Diseño de sonido {0}",es_MX:"Diseño de Sonido: {0}",es_PE:"Diseño de Sonido: {0}",eu:"Soinu diseinua: {0}",fa:"{0} :طراحی صوت",fa_DA:"{0} :طراحی صوت",fi:"Äänisuunnittelu: {0}",fr:"Conception sonore: {0}",ga:"Dearadh Fuaime: {0}",gl:"Deseño de son: {0}",gu:"ધ્વનિ ડિઝાઇન: {0}",ha:"Sound Design: {0}",hi:"ध्वनि रचना :{0}",hr:"Dizajn zvuka: {0}",ht:"Konsepsyon Sonò: {0}",hu:"Hangtervező: {0}",hy:"Ձայնի ձևավորում {0}",ig:"Ebe Olu: {0}",in:"Pengaturan Suara: {0}",is:"Hljóðgerð: {0}",it:"Progettazione sonora: {0}",iw:"עיצוב צליל: {0}",ja:"サウンドデザイン：{0}",ka:"ხმის დიზაინი: {0}",ki:"Design ya thaùti: {0}",kn:"ಶಬ್ದ ವಿನ್ಯಾಸ: {0}",ko:"소리 설계: {0}",ku:"دیزاینی دەنگ: {0}",ku_TR:"dengê sêwiran: {0}",lg:"Okukola eddobozi {0}",lo:"ອອກແບບສຽງ: {0}",lt:"Garso dizainas: {0}",lv:"Skaņa: {0}",mg:"Famoronana feo: {0}",mi:"Hoahoa pūoro: {0}",mn:"Ая эгшиг: {0}",mr:"आवाज रचना : {0}",ms:"Rekabentuk bunyi: {0}",mt:"Sound Design: {0}",nb:"Lyddesign: {0}",ne:"ध्वनि डिजाइन (सम्पादन): {0}",nl:"Ontwerp geluid: {0}",nn:"Lyddesign: {0}",ny:"Kupanga dizaini liwu: {0}",om:"Wixinee Sagalee: {0}",pl:"Projektowanie dźwięku: {0}",ps:"غږیزه طرحه : {0}",pt:"Design de som: {0}",pt_BR:"Design de Som: {0}",qu:"Pallariy ruqyay: {0}",ro:"Sunet: {0}",ru:"Звуковое оформление: {0}",rw:"Ijwi ryongerewe:{0}",se:"Jietna Design: {0}",si:"ශබ්ද නිර්මාණය: {0}",sk:"Dizajn zvuku: {0}",sl:"Zvok: {0}",sn:"Saundi Dhizaini: {0}",sp:"Sound Design: {0}",sq:"Rregullimi i Zërit: {0}",sr:"Sound Design: {0}",st:"molumo o iketselitsoeng {0}",sv:"Ljudskapare: {0}",sw:"Muundo wa sauti {0}",ta:"ஒலி வடிவமைப்பு: {0}",te:"సౌండ్ డిజైన్: {0}",tg:"Танзими овоз: {0}",th:"ออกแบบเสียง {0}",ti:"ድምፂ ሃንዳሲ: {0}",tk:"Ses bezegi: {0}",tl:"Disenyo ng Tunog: {0}",tn:"Moalo wa modumo: {0}",tr:"Ses Tasarımı: {0}",tw:"Ngyegee adeyɛ: {0}",uk:"Дизайн звуку: {0}",ur:"صوتی تزئین : {0}",uz:"Ovoz dizayni: {0}",vi:"Thiết kế âm thanh: {0}",wo:"Saytu Cow: {0}",yo:"Apẹrẹ ohun: {0}",zh_CN:"声音设计：{0}",zh_HK:"聲音設計：{0}",zh_TW:"音效設計：{0}",zu:"Sound Design: {0}"},R.OPT_OUT),R.OPT_OUT),cX=new Fe(new He("JOIST/credits.thanks",{en:"Thanks",af:"Dankie",ak:"Me daasi",am:"አመሰግናለሁ",ar:"شكرا",ar_KW:"شكر",ar_LY:"شكرًا",ar_MA:"شكرا",ar_SA:"شكرا",ay:"Təşəkkürlər",az:"Təşəkkürlər",be:"Падзякі",bg:"Благодарности",bi:"Tankyu tumas",bn:"ধন্যবাদ",bo:"ཐུགས་རྗེ་ཆེ།",bs:"Zahvalnost",ca:"Gràcies",cs:"Děkuji",cy:"Diolch",da:"Tak",de:"Dank",ee:"Akpedadawo",ef:"Sọsoñgọ",el:"Ευχαριστίες",en_GB:"Thanks",es:"Gracias",es_ES:"Gracias",es_MX:"Gracias",es_PE:"Agradecimientos:",es_UY:"Thanks",et:"Tänusõnad",eu:"Eskerrik asko",fa:"با تشکر از",fa_DA:"با تشکر از",fi:"Kiitokset",fo:"Takk",fr:"Merci",ga:"Go raibh maith agat",gl:"Agradecementos",gu:"આભાર",ha:"Godiya",hi:"धन्यवाद",hr:"Zahvale",ht:"Mési",hu:"Köszönetnyilvánítás",hy:"Շնորհակալություն",ig:"Daalụ",in:"Terimakasih",is:"Þakkir",it:"Ringraziamenti",iw:"תודות",ja:"謝辞",ka:"მადლობა",ki:"Thengiu",kk:"Алғыс айтамыз",kn:"ಧನ್ಯವಾದಗಳು",ko:"감사",ku:"سوپاس",ku_TR:"Spas",lg:"Webaale",lo:"ຂອບໃຈ",lt:"Ačiū",lv:"Paldies",mg:"Misaotra",mi:"Kei te mihi",mk:"Благодарам",ml:"നന്ദി",mn:"Баярлалаа",mr:"धन्यवाद",ms:"Terima Kasih",mt:"Grazzi",my:"ကျေးဇူးတင်ပါသည်",nb:"Takk",ne:"धन्यवाद ",nl:"Dank u",nn:"Takk til",ny:"Zikomo",om:"Galatoomi",or:" ଧନ୍ୟବାଦ୍‍",pl:"Podziękowania",ps:"مننه",pt:"Agradecimento",pt_BR:"Agradecimentos",qu:"Añay",ro:"Mulțumiri",ru:"Благодарности",rw:"Murakoze",se:"Giitu",sh:"Хвала",si:"ස්තූතියි",sk:"Vďaka",sl:"Zahvala",sn:"Rutendo",sp:"ke a leboga",sq:"Faleminderit",sr:"Хвала",st:"Kea leboha",sv:"Tack",sw:"Shukrani",ta:"நன்றிகள்",te:"ధన్యవాదాలు",tg:"Изҳори сипос",th:"ขอบคุณ",ti:"የቐንየልና",tk:"Minnetdarlyk",tl:"Salamat",tn:"Ke a leboga",tr:"Teşekkürler",tw:"Mada wo ase",uk:"Дякуємо",ur:"شکریہ",uz:"Minnatdorchilik bildiramiz",vi:"Tri ân",wo:"Jërëjëf",yo:"E se",zh_CN:"致谢",zh_HK:"鳴謝",zh_TW:"感謝",zu:"Ngiyabonga"},R.OPT_OUT),R.OPT_OUT);class dX extends Ai{constructor(e,t){t=Ne()({titleFont:new ki({size:18,weight:"bold"}),textFont:new ki(16),align:"left",spacing:1,maxWidth:550},t);const n={font:t.textFont,align:"left",lineWrap:t.maxWidth,tagName:"p"},s=[];s.push(new mr(nX,{font:t.titleFont,readingBlockDisabledTagName:"h2"}));const r=(a,o)=>new Dt([a],l=>Gn.format(l,`‪${o}‬`));if(e.leadDesign){const a=r(sX,e.leadDesign);s.push(new ha(a,n))}if(e.softwareDevelopment){const a=r(rX,e.softwareDevelopment);s.push(new ha(a,n))}if(e.team){const a=r(aX,e.team);s.push(new ha(a,n))}if(e.contributors){const a=r(oX,e.contributors);s.push(new ha(a,n))}if(e.qualityAssurance){const a=r(lX,e.qualityAssurance);s.push(new ha(a,n))}if(e.graphicArts){const a=r(hX,e.graphicArts);s.push(new ha(a,n))}if(e.soundDesign){const a=r(uX,e.soundDesign);s.push(new ha(a,n))}if(e.thanks){s.length>0&&s.push(new Fm(13)),s.push(new mr(cX,{font:t.titleFont,readingBlockDisabledTagName:"h2"}));const a=new ha(e.thanks,n);s.push(a)}t.children=s,super(t),this.disposeCreditsNode=()=>{s.forEach(a=>{a.dispose&&a.dispose()})}}dispose(){this.disposeCreditsNode(),super.dispose()}}class gu{constructor(e,t,n,s={}){typeof e=="string"&&(e=Number(e)),typeof t=="string"&&(t=Number(t)),typeof n=="string"&&(n=Number(n)),typeof s.testNumber=="string"&&(s.testNumber=Number(s.testNumber));const{buildTimestamp:r=null,testType:a=null,testNumber:o=null}=s;jt(typeof e=="number"&&e>=0&&e%1===0,`major version should be a non-negative integer: ${e}`),jt(typeof t=="number"&&t>=0&&t%1===0,`minor version should be a non-negative integer: ${t}`),jt(typeof n=="number"&&n>=0&&n%1===0,`maintenance version should be a non-negative integer: ${n}`),jt(typeof a!="string"||typeof o=="number","if testType is provided, testNumber should be a number"),this.major=e,this.minor=t,this.maintenance=n,this.testType=a,this.testNumber=o,this.buildTimestamp=r}serialize(){return{major:this.major,minor:this.minor,maintenance:this.maintenance,testType:this.testType,testNumber:this.testNumber,buildTimestamp:this.buildTimestamp}}get isSimNotPublished(){return!!(this.major<1||this.major===1&&this.minor===0&&this.maintenance===0&&this.testType)}get isSimPublished(){return!this.isSimNotPublished}get majorMinor(){return`${this.major}.${this.minor}`}static deserialize({major:e,minor:t,maintenance:n,testType:s,testNumber:r,buildTimestamp:a}){return new gu(e,t,n,{testType:s,testNumber:r,buildTimestamp:a})}compareNumber(e){return gu.comparator(this,e)}static comparator(e,t){return e.major<t.major?-1:e.major>t.major?1:e.minor<t.minor?-1:e.minor>t.minor?1:e.maintenance<t.maintenance?-1:e.maintenance>t.maintenance?1:0}isAfter(e){return this.compareNumber(e)===1}isBeforeOrEqualTo(e){return this.compareNumber(e)<=0}toString(){let e=`${this.major}.${this.minor}.${this.maintenance}`;return typeof this.testType=="string"&&(e+=`-${this.testType}.${this.testNumber}`),e}static parse(e,t){const n=e.match(/^(\d+)\.(\d+)\.(\d+)(-(([^.-]+)\.(\d+)))?(-([^.-]+))?$/);if(!n)throw new Error(`could not parse version: ${e}`);const s=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=n[6],l=n[7]===void 0?n[7]:Number(n[7]);return new gu(s,r,a,{testType:o,testNumber:l,buildTimestamp:t})}static fromBranch(e){const t=e.split(".");jt(t.length===2,`Bad branch, should be {{MAJOR}}.{{MINOR}}, had: ${e}`);const n=Number(e.split(".")[0]),s=Number(e.split(".")[1]);return new gu(n,s,0)}static ensureReleaseBranch(e){const t=gu.fromBranch(e.split("-")[0]);jt(t.major>0,"Major version for a branch should be greater than zero"),jt(t.minor>=0,"Minor version for a branch should be greater than (or equal) to zero")}}class cn extends js{}cn.UP_TO_DATE=new cn;cn.OUT_OF_DATE=new cn;cn.CHECKING=new cn;cn.OFFLINE=new cn;cn.UNCHECKED=new cn;cn.enumeration=new Sr(cn,{phetioDocumentation:"Describes the states that can occur during an Update check"});const Ak=Zc.name,wk=gu.parse(Zc.version,phet.chipper.buildTimestamp),pX=document.location.protocol==="https:"?"https:":"http:",fX=15e3;class mX{constructor(){this.stateProperty=new qS(cn.UNCHECKED),this.latestVersion=null,this.ourVersion=wk,this.timeoutCallback=this.timeout.bind(this),this.areUpdatesChecked=phet.chipper.brand==="phet"&&!phet.chipper.isApp&&phet.chipper.queryParameters.yotta,this.updateURL=`https://phet.colorado.edu/html-sim-update?simulation=${encodeURIComponent(Ak)}&version=${encodeURIComponent(wk.toString())}&buildTimestamp=${encodeURIComponent(`${phet.chipper.buildTimestamp}`)}`,this.timeoutId=-1}clearTimeout(){self.clearTimeout(this.timeoutId)}setTimeout(){this.timeoutId=self.setTimeout(this.timeoutCallback,fX)}resetTimeout(){this.stateProperty.value===cn.CHECKING&&(this.clearTimeout(),this.setTimeout())}timeout(){this.stateProperty.value=cn.OFFLINE}check(){if(!this.areUpdatesChecked||this.stateProperty.value!==cn.UNCHECKED&&this.stateProperty.value!==cn.OFFLINE)return;if(this.ourVersion.isSimNotPublished){this.stateProperty.value=cn.UP_TO_DATE;return}const e=new XMLHttpRequest;"withCredentials"in e&&(this.stateProperty.value=cn.CHECKING,this.setTimeout(),e.onload=()=>{this.clearTimeout();try{const t=JSON.parse(e.responseText);t.error?(console.log(`Update check failure: ${t.error}`),this.stateProperty.value=cn.OFFLINE):(this.updateURL&&(this.updateURL=t.updateURL),this.latestVersion=gu.parse(t.latestVersion,t.buildTimestamp),t.state==="out-of-date"?this.stateProperty.value=cn.OUT_OF_DATE:t.state==="up-to-date"?this.stateProperty.value=cn.UP_TO_DATE:(console.log(`Failed to get proper state: ${t.state}`),this.stateProperty.value=cn.OFFLINE))}catch{this.stateProperty.value=cn.OFFLINE}},e.onerror=()=>{this.clearTimeout(),this.stateProperty.value=cn.OFFLINE},e.open("post",`${pX}//phet.colorado.edu/services/check-html-updates`,!0),e.send(JSON.stringify({api:"1.0",simulation:Ak,locale:phet.joist.sim.locale,currentVersion:this.ourVersion.toString(),buildTimestamp:phet.chipper.buildTimestamp})))}}const ms=new mX,gX=new Fe(new He("JOIST/updates.checking",{en:"Checking for updates…",af:"Soek na opdaterings",am:"ማሻሻያ መኖሩን እያረጋገጥኩ ነው...",ar:"البحث عن تحديثات …",ar_KW:"التحقق من التحديثات",ar_LY:"التحقق من التحديثات…",ar_MA:"جاري التحقق من الحديثات ...",ar_SA:"يبحث عن تحديث",ar_SY:"البحث عن تحديثات …",ay:"Güncəlləmələr yoxlanılır...",az:"Yeniləmələr yoxlanılır...",be:"Праверка абнаўленняў ...",bg:"Проверява за обновления",bi:"Stap checkim lo updates",bn:"আপডেট চেক করা  হচ্ছে (Checking for updates…)",bo:"ཐོན་གསར་པ་བལྟ་བཞིན་པ།",bs:"Provjera ažuriranja ...",ca:"Comprovant les actualitzacions...",cs:"Kontroluji aktualizace…",cy:"Wrthi'n gwirio am ddiweddariadau...",da:"Søger efter opdateringer...",de:"Suche nach Updates...",ee:"Mele tɔtrɔ yeye wo dim",el:"Γίνεται έλεγχος για ενημερώσεις...",en_GB:"Checking for updates…",es:"Buscando actualizaciones...",es_ES:"Comprobando actualizaciones...",es_MX:"Revisando Actualizaciones",es_PE:"Buscando actualizaciones",es_UY:"Checking for updates…",et:"Uuenduste kontrollimine...",eu:"Eguneraketak bilatzen...",fa:"در حال بررسی به‌روزرسانی‌ها …",fa_DA:"در حال بررسی به‌ روزرسانی‌ها …",fi:"Tarkistetaan päivityksiä...",fo:"Kannar dagføringar...",fr:"Vérification des mises à jour...",ga:"Ag seiceáil le haghaidh nuashonrúchán…",gl:"Buscando actualizacións...",gu:"અપડેટ ચેક થઇ રહ્યુ છે...",ha:"Bincikar sababbabin bayanai...",hi:"अद्यतन के लिए जाँच हो रही है अद्यतन की खोज हो रही है ........",hr:"Provjeravam nadogradnju...",ht:"Tcheke mizajou...",hu:"Frissítés keresése...",hy:"Թարմացումների ստուգում…",ig:"Mmelite...",in:"Memeriksa Pembaharuan",is:"Kanna með uppfærslur…",it:"Controllo degli aggiornamenti...",iw:"מחפש עדכונים...",ja:"アップデートを確認しています",ka:"განახლება მოწმდება",ki:"Kũjũria mũrũhi...",kk:"Жаңаруды тексеру...",kn:"ನವೀಕರಣಗಳನ್ನು ಪರಿಶೀಲಿಸುತ್ತಿದೆ...",ko:"업데이트 확인 중",ku:"دەگەڕێت بۆ نوێ کردنەوە",ku_TR:"kontrolkirina Nûvekirinî",lg:"Tukebela epipya",lo:"ການກວດສອບການອັບເດດ",lt:"Tikrina naujinimus...",lv:"Meklē atjauninājumus...",mg:"Mijery fanavaozana…",mi:"Kei te kimi i ngā whakahoutanga",mk:"Проверка на ажурирања...",mn:"Шинэчлэлтийг шалгаж байна...",mr:"अपडेट आहे की नाही हे तपासले जात आहे . . .",ms:"Sedang menyemak kemas kini...",mt:"Qed niċċekkjaw ghall-ahhar aggornamenti...",my:"အဆင့်မြှင့်တင်ရန် စစ်ဆေးခြင်း",nb:"Ser etter oppdateringer",ne:"अद्यावधिकका ( अपडेटहरूका) लागि जाँच गर्दैछ",nl:"Aan het controleren of er updates zijn ...",nn:"Leiter etter oppdateringar…",ny:"Kuyang'ana zinthu zamakono...",om:"Fooyya’insa jiru argachuuf ilaalaa jira...",or:" ଅପଡେଟ୍‍ ଯାଞ୍ଚ କରୁଅଛି...",pl:"Sprawdzanie aktualizacji…",ps:"د نویو معلوماتو د لټون په حال کې...",pt:"A procurar atualizações",pt_BR:"Procurando atualizações...",qu:"Maskachakan kunanyachiyta",ro:"Se caută actualizări...",ru:"Проверка обновлений...",rw:"Kureba niba ibigezweho byakozwe...",se:"Oza ođastemiid",sh:"Провера ажурирања...",si:"යාවත්කාලීන කිරීම් සඳහා පරීක්ෂා කෙරේ....",sk:"Kontrolujú sa aktualizácie",sl:"Preverjanje za novimi posodobitvami...",sn:"Kutarisa ma updates",sp:"Go Lekola dimpshafatšo...",sq:"Duke kontrolluar për përditësime...",sr:"Провера ажурирања",st:"Hlahloba liphethoho",sv:"Kontrollerar uppdateringar...",sw:"Inaangalia uwepo wa toleo jipya...",ta:"இற்றைப்படுத்தல் சரிபார்க்கப் படுகிறது",te:"అప్డేట్ల కోసం తనిఖీ చేస్తోంది ...",tg:"Санҷиши навсозиҳо…",th:"กำลังตรวจสอบการพัฒนาล่าสุด",ti:"እዋናዊ ምዕባለታት ኣብ ምእላሽ ይርኸብ...",tk:"Täzelenmeleri barlaýar…",tl:"Suriin para sa mga update...",tn:"Go tlhola diphetogo tse di sha go a diragala",tr:"Güncellemeler kontrol ediliyor",tw:"Hwehwɛ deɛ Akɔsi...",uk:"Перевірка оновлення",ur:"تازہ اطلاعات کی جانچ کی جارہی  ہے ۔۔۔",uz:"Yangilanishlar tekshirilmoqda…",vi:"Kiểm tra phiên bản...",wo:"Xool Ngir Yeesal...",yo:"Ṣiṣayẹwo fun awọn imudojuiwọn…",zh_CN:"正在检查更新……",zh_HK:"檢查更新中",zh_TW:"正在檢查更新...",zu:"Ibheka izibuyekezo"},R.OPT_OUT),R.OPT_OUT),yX=new Fe(new He("JOIST/updates.upToDate",{en:"This simulation is up to date.",af:"Hierdie simulasie is opgedateer.",am:"ይህ ሲሙሌሽን የተዘመነ ነው።",ar:"هذه المحاكاة محدثة.",ar_KW:"هذه المحاكاة محدّثة",ar_LY:"هذه المحاكاة محدثة.",ar_MA:"تم تحديث هذه المحاكاة",ar_SA:"هذة المحاكاة محدثة",ar_SY:"هذه المحاكاة محدثة.",ay:"Bu simulyasiya güncəldır. Ən son versiya.",az:"Bu simulyasiya yenilənmişdir.",be:"Абнаўленне не патрабуецца",bg:"Симулацията е актуална",bi:"Simulation ia i up to date.",bn:"এই সিমুলেশন আপ-টু-ডেট",bo:"མཚུངས་བཅོས་དེ་གསར་ཤོས་རེད་འདུག",bs:"Ova simulacija je aktuelna.",ca:"La simulació està actualitzada.",cs:"Simulace je aktuální.",cy:"Mae'r efelychiad yma yn gyfoes.",da:`Denne simulering er nyeste 
version.`,de:"Diese Simulation ist aktuell.",ee:"Eya enye yeye tɔ la",ef:"Mkpọ Ami Ado Ufa",el:"Αυτή η προσομοίωση είναι ενημερωμένη",en_GB:"This simulation is up to date.",es:"La simulación está realizada al día ...",es_ES:"Esta simulación está actualizada",es_MX:"Simulación actualizada",es_PE:"Esta simulación está actualizada",es_UY:"This simulation is up to date.",et:"Uuendusi ei ole saadaval.",eu:"Simulazio hau eguneratuta dago.",fa:"این شبیه سازی بروز است.",fa_DA:"این شبیه سازی به روز است.",fi:"Tämä simulaatio on ajan tasalla.",fr:"Cette simulation est à jour.",ga:"Tá an t-ionsamhlú suas chun dáta.",gl:"Esta simulación está actualizada.",gu:"આ સિમ્યુલેશન અદ્યતન છે.",ha:"Wannan ƙwaiƙwayon na zamani ne.",hi:"यह सिमुलेशन अद्यतित है",hr:"Simulacija je nadograđena",ht:"Similasyon sa ajou.",hu:"Ez a szimuláció naprakész.",hy:"Թարմացում չի պահանջվում:",ig:"Ịme anwansị bụ ihe ọhụrụ.",in:"Simulasi ini yang Terbaru",is:"Nýjasta útgáfa sýndartilraunar.",it:"Questa simulazione è aggiornata.",iw:"ההדמיה מעודכנת.",ja:"このシミュレーションは最新版です",ka:"მოცემულია სიმულაციის ბოლო განახლება.",ki:"Ũgĩkũhi ũcio ũrĩ kwa nyakũrũ",kk:"Жаңару қажет емес",kn:"ಈ ಸಿಮ್ಯುಲೇಶನ್ ಅನ್ನು ನವೀಕರಿಸಿದೆ .",ko:"이 시물레이션은 최신판입니다.",ku:"وەشانی هاوتاسازەکە نوێیە",ku_TR:"Ev simulasyon temam e.",lg:"Simulesoni eno elikunkoola ebipya",lo:"ແບບຈຳລອງລ່າສຸດ",lt:"Ši simuliacija yra atnaujinta.",lv:"Tiek lietota simulācijas jaunākā versija.",mg:"Ity simulation ity dia misy amin'izao fotoana izao.",mi:"Kua whakahoua tēnei pūmanawa whakarite",mk:"Оваа симулација е најнова.",ml:"ഈ സിമുലേഷന്‍ ഏറ്റവും പുതിയ പതിപ്പാണ്.",mn:"Энэ симуляци шинэ хувилбар",mr:"हे सादृशीकरण  अद्ययावत आहे.",ms:"Simulasi ini sudah dikemas kini.",mt:"Is-simulazzjoni hi aġġornata.",my:"ဤ simulationသည် အဆင့်မြှင့်တင်ပြီးသားဖြစ်ပါသည်",nb:"Simuleringen er oppdatert",ne:"यो सिमुलेशन अद्यावधिक ( नवीनतम संस्करण ) छ ",nl:"Deze simulatie is bijgewerkt.",nn:"Simuleringa er oppdatert",ny:"Chifanifani ichi ndi chamakono.",om:"Simuleeshiniin kun harawaadha.",or:"ଏହି ସୀମୁଲେସନ୍‍ଟି  ଅପ୍‍ଟୁଡେଟ୍‍ ଅଛି।",pl:"Ta symulacja jest aktualna.",ps:"دغه سېمولېشن آپډیټ دی.",pt:"Esta simulação está atualizada.",pt_BR:"Esta simulação é a mais atual.",qu:"Kay simulación musuq ruwasqa",ro:"Această simulare este la zi.",ru:"Обновление не требуется",rw:"Uku kwigana gukoresheje ikoranabuhanga kujyanye n'igihe.",se:"Simuleren lea ođastuvvan.",sh:"Ова симулација је ажурирана",si:"මෙම අනුරූපනය යාවත්කාලීනය. ",sk:"Táto simulácia je aktuálna",sl:"Ta simulacija je posodobljena.",sn:"Simulation ndeya zvino zvino",sp:"Etsisa ye e nakong ya moragorago.",sq:"Ky simulim është i përditësuar.",sr:"Ова симулација је ажурирана.",st:"Simulation ena e ntse ele nakong",sv:"Denna simulering är uppdaterad",sw:"Mwigo huu ni toleo jipya",ta:"இந்த உருவகப்படுத்துதல் இற்றைப் படுத்தப்பட்டுள்ளது.",te:"ఈ సిమ్యులేషన్  తాజాగా ఉంది.",tg:"Симулятор версияи охирон мебошад",th:"สถานการณ์จำลองนี้เป็นเวอร์ชันล่าสุด",ti:"እዚ ተግባራዊ መርኣያ እዋናዊ እዩ ።",tk:"Bu simulýasiýa täzelenen.",tl:"Ang simulasyon ito ay up to date.",tn:"Setshwantsho se sa tshwantshiso se mo dinakong",tr:"Simülasyon güncel",tw:"Dwumadie yi yɛ foforɔ koraa.",uk:"Це моделювання оновлено.",ur:"یہ سیمولیشن نیا اور مکمل ہے",uz:"Ushbu simulyatsiya eng so`nggi talqingacha yangilangan",vi:"Phiên bản đã cập nhật",wo:"Tekibi Parena Si Bisëm.",yo:"Yi kikopa jẹ imudojuiwọn",zh_CN:"已经是最新版本",zh_HK:"這個模擬是最新版本。",zh_TW:"此模擬已是最新版本",zu:"Lokhu sekulingisa. kusesikhathini samanje"},R.OPT_OUT),R.OPT_OUT),vX=new Fe(new He("JOIST/updates.outOfDate",{en:"New version available",af:"Nuwer weergawe is beskikbaar",am:"አዲስ ቅጂ አለ",ar:"نسخة جديدة متاحة",ar_KW:"يوجد اصدار محدّث",ar_LY:"النسخة الجديدة متاحة",ar_MA:"اصدار جديد متوفر",ar_SA:"يتوفر اصدار جديد",ar_SY:"نسخة جديدة متاحة",ay:"Yeni versiya mövcuddur",az:"Yeni versiya mövcuddur",be:"Даступна новая версія",bg:"Има нова версия",bi:"Niufala version i stap",bn:"New version available",bo:"ཐོན་གསར་པ་འདུག",bs:"Dostupna je nova verzija",ca:"Hi ha una nova versió",cs:"Je dostupná nová verze",cy:"Fersiwn Newydd ar gael",da:"Ny version tilgængelig",de:"Neue Version verfügbar",ee:"Tɔtrɔ yeye aɖe va",ef:"Ufa Mmọdoba mi",el:"Νέα έκδοση διαθέσιμη",en_GB:"New version available",es:"Nueva versión disponible",es_ES:"Nueva versión disponible",es_MX:"Nueva versión disponible",es_PE:"Nueva versión disponible",es_UY:"New version available",et:"Uus versioon on saadaval",eu:"Bertsio berria eskuragarri",fa:"نسخه جدید موجود است",fa_DA:"نسخه جدید موجود است",fi:"Uusi versio saatavilla",fr:"Nouvelle version disponible",ga:"Leagan nua ar fáil",gl:"Hai unha versión nova dispoñible",gu:"નવું સંસ્કરણ ઉપલબ્ધ છે",ha:"Akwai sabuwar siga",hi:"नया संस्करण उपलब्ध है",hr:"Dostupna je nova verzija",ht:"Nouvo vèsyon disponib",hu:"Új változat érhető el",hy:"Նոր տարբերակը հասանելի է",ig:"Ụdị ọhụrụ dị",in:"Tersedia Versi Terbaru",is:"Ný útgáfa fáanleg",it:"Nuova versione disponibile",iw:"גרסה חדשה זמינה",ja:"新しいバージョンが利用できます",ka:"ხელმისაწვდომია ახალი ვერსია",ki:"Kũrĩ ũgĩkũhi ũrĩ mũcikũrũ",kk:"Жаңа нұсқасы бар",kn:"ಹೊಸ ಆವೃತ್ತಿ ಲಭ್ಯವಿದೆ",ko:"새 버전 사용 가능",ku:"وەشانی نوێ بەردەستە",ku_TR:"nesxa/kopî nû heye",lg:"Enkola empya eliwo",lo:"ເວີຊັ້ນໃຫມ່ແມ່ນເປີດໃຊ້ແລ້ວ",lt:"Yra nauja versija",lv:"Pieejama jauna versija",mg:"Misy dikan-teny vaovao",mi:"Kua Rite Te Putanga Hou",mk:"Достапна е нова верзија",mn:"Шинэ хувилбар ашиглах",mr:"नविन संस्करण उपलब्ध आहे",ms:"Versi baharu tersedia",mt:"Verżjoni ġdida disponibbli",my:"အသစ်အသစ်သော သတင်းအချက်အလက်များ ရယူနိုင်ပါပြီ",nb:"Ny versjon tilgjengelig",ne:"नयाँ संस्करण उपलब्ध छ",nl:"Nieuwe versie beschikbaar",nn:"Ny versjon tilgjengeleg",ny:"Version yatsopano ilipo",om:"Maxxansi haaraan ni argama",or:"ନୂତନ ସଂସ୍କରଣ ଉପଲବ୍ଧ",pl:"Nowa wersja dostępna",ps:"نوی بڼه شتون لري",pt:"Nova versão disponível",pt_BR:"Nova versão disponível",qu:"Musuq  ima niraq",ro:"Versiune nouă disponibilă",ru:"Доступна новая версия",rw:"Ingeri nshya ihari ubu",se:"Ođđa veršuvdna gávdno",sh:"Доступна нова верзија",si:"නව සංස්කරණය ලබා ගත හැකිය",sk:"Je dostupná nová verzia",sl:"Na voljo je nova verzija",sn:"Vhezheni itsva yavepo",sp:"Phetolelo e mpsha e hwetšagala",sq:"Version i ri në dispozicion",sr:"Доступна нова верзија",st:"Sehlahisoa sa morao sea fumaneha",sv:"Ny version tillgänglig",sw:"Toleo jipya linapatikana",ta:"புதிய பதிப்பு கிடைக்கும்",te:"అందుబాటులో న్యూ వెర్షన్",tg:"Версия нав дастрас мебошад",th:"เวอร์ชันใหม่พร้อมแล้ว",ti:"ሓድሽ ቅዳሕ ኣሎ",tk:"Täze wersiýa elýeterli",tl:"Available ang bagong bersyon",tn:"Tebego e ncha e teng",tr:"Yeni versiyonu mevcut",tw:"Ade foforɔ aba",uk:"Нова версія",ur:"نیا ورژن دستیاب ہے",uz:"Yangi versiyasi mavjud",vi:"Đã có phiên bản mới",wo:"Yeesal Bou Bees",yo:"Eda titun ti wa",zh_CN:"新版本可用",zh_HK:"新版本可供使用",zh_TW:"有新版本可使用",zu:"Inguqulo entsha etholakalayo"},R.OPT_OUT),R.OPT_OUT),bX=new Fe(new He("JOIST/updates.newVersionAvailable",{en:"There is a new version available: {0}.",af:"There is a new version available: {0}.",am:"አዲስ ቅጂ ይገኛል፡ {0}።",ar:"هناك إصدار جديد متاح: {0}",ar_KW:"يوجد اصدار محدّث: {0}",ar_LY:"هناك إصدار جديد متاح: {0}.",ar_MA:"النسخة الجديدة المتوفرة:{0}",ar_SA:"There is a new version available: {0}.",ar_SY:"هناك إصدار جديد متاح: {0}",ay:"Yeni versiya var: {0}.",az:"Yeni versiya mövcuddur: {0}.",be:"Даступна новая версія: {0}.",bg:"Има нова версия: {0}",bi:"Ol i gat wan niufala version: {0}",bn:"{0}",bo:"ཐོན་གསར་པ་སླེབས་འདུག {0}",bs:"Postoji nova verzija: {0}",ca:"Hi ha una versió nova disponible: {0}.",cs:"Je dostupná nová verze: {0}.",cy:"Mae fersiwn newydd ar gael: {0}",da:`Der er en ny version 
tilgængelig: {0}.`,de:"Es existiert eine neue Version: {0}.",ee:"Tɔtrɔ yeye aɖe li: {0}.",ef:"Ufa mmọdo aba: {0}.",el:"Υπάρχει μια νέα έκδοση διαθέσιμη: {0}",en_GB:"Team: {0}",es:"Hay una nueva versión disponible {0}",es_ES:"Hay una nueva versión disponible: {0}",es_MX:"Nueva versión disponible: {0}",es_PE:"Hay una nueva versión disponible: {0}",es_UY:"There is a new version available: {0}.",et:"Uus versioon on saadaval: {0}.",eu:`Bertsio berri bat 
eskuragarri: {0}.`,fa:"{0} :یک نسخۀ جدید وجود دارد.",fa_DA:"{0} :یک نسخۀ جدید موجود است.",fi:"Uusi versio on saatavilla: {0}.",fr:"Il y a une nouvelle version disponible: {0}.",ga:"Tá leagan nua ar fáil: {0}.",gl:"Hai unha nova versión dispoñible: {0}",gu:"નવું સંસ્કરણ ઉપલબ્ધ છે: {0}.",ha:"Ana samun sabuwar siga: {0}.",hi:"नया संस्करण उपलब्ध : {0}",hr:"Dostupna je nova verzija:{0}",ht:"Genyen yon nouvo vèsyon ki disponib: {0}",hu:"Új változat érhető el: {0}.",hy:"Հասանելի է նոր տարբերակը՝ {0}:",ig:"Enwere ụdị ọhụrụ dị: {0}.",in:"Kini Tersedia Versi Terbaru: {0}",is:"Ný útgáfa er fáanleg: {0}",it:"C'è una nuova versione disponibile {0}",iw:"קיימת גרסה חדשה זמינה: {0}",ja:"新しいバージョンが入手できます: {0}",ka:"ხელმისაწვდომია ახალი ვერსია: {0}.",ki:"Hena mùthemba ùngì mwerù n nì ùranyìtìkana: {0}.",kk:"{0}-жаңа нұсқасы бар",kn:"ಹೊಸ ಆವೃತ್ತಿ ಲಭ್ಯವಿದೆ: {0}",ko:"새 버전 사용 가능: {0}",ku:"وەشانی تازە لە ئێستادا بەردەستە:{0}",ku_TR:"Nesxa/kopî nû heye: {0}.",lg:"Waliwo emkola empya eliwo: {0}.",lo:"ມີສະບັບປັບປຸງໃຫມ່: {0}",lt:"Pasiekiama nauja versija: {0}",lv:"Pieejama jauna versija: {0}.",mg:"Misy dikan-teny vaovao azo alaina: {0}.",mi:"Kua Rite Te Putanga Hou: {0}",mk:"Има достапна нова верзија: {0}.",ml:"പുതിയ വേര്‍ഷന്‍ ({0})ലഭ്യമാണ്.",mn:"Шинэ хувилбар ашиглах боломжтой: {0}.",mr:"{0} हे नविन संस्करण उपलब्ध आहे",ms:"Terdapat versi baru tersedia: {0}.",mt:"Hemm verżjoni iġded disponibbli:{0}",nb:"Ny versjon er tilgjengelig: {0}.",ne:"नवीन संस्करण उपलब्ध छ:  {0}.",nl:"Er is een nieuwe versie beschikbaar:  {0}.",nn:"Det finst ein ny versjon: {0}.",ny:"Pali mtundu watsopano womwe ulipo: {0}.",om:"Maxxansa haaraan tokko jira: {0}.",pl:"Dostępna jest nowa wersja: {0}.",ps:"یو نوی بڼه شتون لري: {0}.",pt:"Está disponível uma nova versão: {0}",pt_BR:"Há uma nova versão disponível: {0}.",qu:"Kachkan huk musuq ima niraq: {0}.",ro:"Nouă versiune disponibilă: {0}",ru:"Доступна новая версия: {0}",rw:"Hari indi verisiyo nshyashya:{0}.",se:"Ođđa veršuvdna gávdno: {0}.",sh:"Нова верзија овде: {0}.",si:"ලබා ගත හැකි නව අනුවාදයක් තිබේ : {0}.",sk:"Je dostupná nová verzia: {0}.",sl:"Na voljo je nova verzija: {0}.",sn:"Hakuna mhando itsva iripo: {0}.",sp:"There is a new version available: {0}.",sq:"Ekziston një version i ri: {0}",sr:"Доступна нова верзија: {0}.",st:"Phethoho e ncha e ea fumaneha: {0}",sv:"Det finns en ny version att använda: {0}.",sw:"Kuna Toleo jipya linapatikana: {0}.",ta:"புதிய பதிப்பு பெற்றுக் கொள்ளலாம்: {0}",te:"అందుబాటులో కొత్త వెర్షన్ ఉంది :{0}.",tg:"Версияи нав дастрас аст: {0}",th:"มีสถานการณ์จำลองเวอร์ชันใหม่มาแล้ว: {0}",ti:"ሓድሽ ምዕባለ ኣሎ: {0}.",tk:"Täze elýeterli wersiýa bar: {0}.",tl:"Mayroong bagong bersyon na magagamit: {0}.",tn:"Go na le tebego e ncha: {0}",tr:"Yeni sürüm mevcut: {0}",tw:"Ade foforɔ aba: {0}.",uk:"Доступна нова версія: {0}.",ur:"نیا ورژن موجود ہے: {0}.",uz:"Yangi versiyasi mavjud: {0}",vi:"Đã có phiên bản mới: {0}",wo:"Bi Moy Yeesal Bu Bess: {0}",yo:"Ẹya tuntun wa: {0}.",zh_CN:"有一个新的版本可用: {0}",zh_HK:"新版本可供使用: {0}",zh_TW:"已經有新版本：{0}。",zu:"There is a new version available: {0}."},R.OPT_OUT),R.OPT_OUT),_X=new Fe(new He("JOIST/updates.yourCurrentVersion",{en:"Your current version is: {0}.",af:"Your current version is: {0}.",am:"የተሻሻለው ቅጂ ፡{0}።",ar:"نسختك الحالية هي: {0}.",ar_KW:"الاصدار الحالي: {0}",ar_LY:"الإصدار الحالي لديك هو: {0}.",ar_MA:"نسختك الحالية هي: {0}",ar_SA:"Your current version is: {0}.",ar_SY:"نسختك الحالية هي: {0}.",ay:"İndi işlətdiyiniz versiya: {0}",az:"Cari versiyanız: {0}",be:"Ваша бягучая версія: {0}.",bg:"Настоящата версия: {0}",bi:"Version blo yu em i: {0}",bn:"তোমার বর্তমান ভার্সন হয়: {0}.",bo:"ད་ལྟའི་ཐོན་ནི་ {0}",bs:"Vaša trenutna verzija je: {0}",ca:"La versió actual és: {0}.",cs:"Vaše současná verze je: {0}.",cy:"Eich fersiwn cyfredol yw: {0}",da:`Din nuværende version er: 
{0}.`,de:"Deine aktuelle Version ist: {0}.",ee:"Wo tɔtrɔ yeye si zam nele fifiae nye: {0}.",el:"Η τρέχουσα έκδοση είναι: {0}",en_GB:"version {0}",es:"Su versión actual es: {0}.",es_ES:"Tu versión actual és: {0}",es_MX:"Versión actual: {0}",es_PE:"Su versión actual es: {0}",es_UY:"Your current version is: {0}.",et:"Sinu praegune tarkvara versioon: {0}.",eu:"Zure bertsioa {0} duzu.",fa:"نسخه فعلی شما: {0} است.",fa_DA:"نسخه فعلی شما: {0} است.",fi:"Nykyinen versio on: {0}.",fr:"Votre version actuelle est: {0}.",ga:"An leagan atá agat faoi láthair: {0}",gl:"A versión actual é: {0}",gu:"આપનું હાલનું સંસ્કરણ : {0} છે.",ha:"Sigar dake hannunka a yanzu: {0}.",hi:"आपका वर्तमान संस्करण : {0}",hr:"Vaša trenutna verzija je: {0}",ht:"Vèsyon kounye a se: {0}.",hu:"Az ön jelenlegi verziója: {0}.",hy:"Ձեր ընթացիկ տարբերակն է՝ {0}:",ig:"Mbipute ugbua nke gi bu: {0}.",in:"Versi yang kamu punya saat ini adalah : {0}",is:"Þetta er útgáfa: {0}",it:"La tua versione attuale è: {0}",iw:"הגרסה הנוכחית שלך היא: {0}",ja:"現在のバージョン: {0}",ka:"თქვენი ამჟამიდენლი ვერსია: {0}",ki:"muthemba uria wikwo riuu: {0}.",kk:"{0}-қазіргі нұсқа",kn:"ನಿಮ್ಮ ಪ್ರಸ್ತುತ ಆವೃತ್ತಿ: {0} .",ko:"현재의 버전은 {0} 입니다.",ku:"وەشانی ئێستا بریتیە لە {0}",ku_TR:"guhertoya weya niha: {0} e",lg:"Ekika kyokozesa kati:{0}",lo:"ສະບັບປະຈຸບັນ: {0}.",lt:"Jūsų versija yra: {0}.",lv:"Pašreizējā versija: {0}.",mg:"Ny kinovanao ankehitriny dia: {0}.",mi:"Tō putanga: {0}",mk:"Вашата тековна верзија е: {0}.",ml:"നിങ്ങള്‍ ഇപ്പോള്‍ ഉപയോഗിക്കുന്ന വേര്‍ഷന്‍ {0}",mn:"Таны ашиглаж буй хувилбар бол: {0}.",mr:"तुमची सध्याची आवृत्ती : {0} ही आहे.",ms:"Versi terkini anda ialah: {0}.",mt:"Il-verżjoni kurrenti tiegħek hi:{0}",nb:"Din nåværende versjon er: {0}.",ne:"तपाईँको हालको संस्करण हो: {0}.",nl:"Je huidige versie is: {0}.",nn:"Din versjon: {0}",ny:"version wanu wamakono ndi: {0}.",om:"Maxxansi kee ammaa kan ta'e:{0}.",pl:"Twoja aktualna wersja to: {0}.",ps:"ستاسو موجوده بڼه: {0}",pt:"A sua versão atual é: {0}.",pt_BR:"Sua versão atual é: {0}.",qu:"Ima niraq kaymi: {0}.",ro:"Versiunea curentă este: {0}",ru:"Текущая версия: {0}",rw:"Ubu ingeri yawe ni:{0}.",se:"Dálá veršuvdna dus lea: {0}.",sh:"Ваша тренутна верзија{0}",si:"ඔබගේ නව අනුවාදය වනුයේ : {0}",sk:"Vaša súčasná verzia je: {0}",sl:"Vaša verzija je: {0}.",sn:"Mhando yako itsva i : {0}.",sp:"Your current version is: {0}.",sq:"Versioni i juaj është: {0}.",sr:"Ваша тренутна верзија је: {0}.",st:"Phetolelo e teng hona joale: {0}",sv:"Din nuvarande version är: {0}.",sw:"Toleo lako la sasa ni {0}.",ta:"உமது தற்போதைய பதிப்பு: {0}.",te:"మీ ప్రస్తుత వెర్షన్:{0}",tg:"Верисияи ҳозираи шумо ин : {0}.",th:"สถานการณ์จำลองนี้เป็นเวอร์ชัน: {0}",ti:"ሐዚ ዘሎ ቅዳሕ: {0}.",tk:"Siziň häzirki wersiýaňyz: {0}.",tl:"ang aming kasalukuyang bersyon ay: {0}.",tn:"Tebego ya gago ke: {0}",tr:"Kullandığınız versiyon: {0}",tw:"Wo mprenpren foforɔyɛ no yɛ: {0}.",uk:"Ваша поточна версія: {0}.",ur:"آپ کا موجودہ ورژن ہے: {0}",uz:"Sizdagi hozirgi versiya: {0}",vi:"Phiên bản hiện tại: {0}",wo:"Sa Yeesal Bi Moy: {0}",yo:"Eda titun: {0}.",zh_CN:"当前版本: {0}",zh_HK:"你現時持有版本: {0}.",zh_TW:"您目前的版本為 {0}。",zu:"Your current version is: {0}."},R.OPT_OUT),R.OPT_OUT),AX=new Fe(new He("JOIST/updates.getUpdate",{en:"Get Update…",af:"Kry opdaterings...",am:"ማሻሻያውን አግኝ/ኚ...",ar:"احصل على التحديث ...",ar_KW:"التحديث...",ar_LY:"احصل على التحديث…",ar_MA:"احصل على تحديث",ar_SA:"احصل على التحديث",ar_SY:"احصل على التحديث ...",ay:"Güncəlləmə alın...",az:"Yeniləmələri əldə edin...",be:"Атрымаць абнаўленне ...",bg:"Вземи обновление",bi:"Kasem update...",bn:"(আপডেট  পাও ) Get Update…",bo:"ཐོན་གསར་པ།",bs:"Dobiti ažuriranja ...",ca:"Actualitza...",cs:"Získat aktualizaci…",cy:"Estyn diweddariad...",da:"Hent opdatering...",de:"Update herunterladen...",ee:"Na tɔtrɔ yeyea na su asiwo",ef:"Ufamkpọ Adi...",el:"Λήψη ενημέρωσης...",en_GB:"Get Update…",es:"Actualizar...",es_ES:"Actualizar...",es_MX:"Obtener actualización",es_PE:"Obtener Actualización...",es_UY:"Get Update…",et:"Lae uuendus...",eu:"Eguneraketa lortu...",fa:"بروزرسانی را دریافت کن...",fa_DA:"به روزرسانی را دریافت کنید...",fi:"Hae päivitys...",fo:"Tak niður dagføring",fr:"Obtenir la mise à jour…",ga:"Faigh nuashonrúchán...",gl:"Actualizar...",gu:"અપડેટ કરો...",ha:"Samo sabon bayani...",hi:"अद्यतन प्राप्त करें ........",hr:"Nadogradi...",ht:"Jwenn Mizajou...",hu:"Frissítés betöltése",hy:"Թարմացնել",ig:"Nweta Mmelite…",in:"Dapatkan Pembaharuan",is:"Sækja uppfærslu…",it:"Resta aggiornato...",iw:"לעדכון...",ja:"アップデートを入手",ka:"განახლების მიღება...",ki:"Ĩngĩra Mũrũhi…",kk:"Жаңарту...",kn:"ನವೀಕರಣ ಪಡೆಯಿರಿ...",ko:"업데이트 하기",ku:"نوێکردنەوە وەدەست بخە",ku_TR:"nûvekirinê bistîn...",lg:"Funa Ebipya",lo:"ໄດ້ຮັບການປັບປຸງ",lt:"Gauti atnaujinimus...",lv:"Iegūt atjauninājumu...",mg:"Mahazoa fanavaozana…",mi:"Tiki Whakahoutanga",mk:"Преземи го ажурирањето...",mn:"Шинэчлэх...",mr:"अपडेट मिळवा",ms:"Dapatkan kemas kini...",mt:"Ġib l-aħħar aġġornament...",my:"အသစ်အသစ်သော အချက်အလက်များရယူရန်",nb:"Hent oppdatering",ne:"अद्यावधिक (अपडेट) प्राप्त गर्नुहोस्",nl:"Haal update op ...",nn:"Hent oppdatering…",ny:"Pezani zinthu zamakono...",om:"Fooyya’insa Argadhu...",or:" ଅପଡେଟ୍‍ ନିଅନ୍ତୁ…",pl:"Pobierz aktualizację...",ps:"نوي معلومات تر لاسه کړئ...",pt:"Obter atualização...",pt_BR:"Atualizar...",qu:"Tariy kunanyachiyta",ro:"Descarcă actualizare...",ru:"Обновить...",rw:"Guhuza n'igihe...",se:"Viečča ođasteami...",sh:"Преузми ажурирање...",si:"යාවත්කාලීන ලබා ගන්න ...",sk:"Aktualizuj...",sl:"Pridobi posodobitev...",sn:"Wana ma updates",sp:"Hwetša  Dimpshafatšo.....",sq:"Merr Përditësime...",sr:"Ажурирај...",st:"Fumana Phethoho",sv:"Hämta uppdatering...",sw:"Pata toleo jipya...",ta:"இற்றைப்படுத்தலை பெறு",te:"అప్డేట్ల ను పొందండి ...",tg:"Дастраскунии навгонӣ",th:"รับสารสนเทศล่าสุด",ti:"ምዕባለታት ይርኸቡ...",tk:"Täzelenme al…",tl:"Kumuha ng Update",tn:"Tsenya diphetogo tse di sha",tr:"Güncelle..",tw:"Pɛ deɛ Akɔsi...",uk:"Отримати оновлення..",ur:"تازہ تفصیلات حاصل کریں:",uz:"Yangilanishlarni olish…",vi:"Tải cập nhật...",wo:"Yeesal...",yo:"Dide...",zh_CN:"获取更新…",zh_HK:"取得更新",zh_TW:"取得更新...",zu:"Thola isibuyekezo..."},R.OPT_OUT),R.OPT_OUT),wX=new Fe(new He("JOIST/updates.noThanks",{en:"No Thanks",af:"Nee, dankie",am:"አልፈልግም አመሰግናለሁ",ar:"لا شكرا",ar_KW:"لا شكراً",ar_LY:"ًلا شكرا",ar_MA:"لا، شكرا",ar_SA:"لا شكرا",ar_SY:"لا شكرا",ay:"Xeyr, təşəkkürlər",az:"Xeyr, təşəkkürlər",be:"Не, дзякуй",bg:"Не, благодаря",bi:"No tankyu",bn:"না, ধন্যবাদ",bo:"མིན། ཐུགས་རྗེ་ཆེ།",bs:"Ne hvala!",ca:"No, gràcies",cs:"Ne děkuji",cy:"Dim Diolch",da:"Nej tak",de:"Nein, danke",ee:"Ao Akpe",ef:"Ifọñọ",el:"Όχι ευχαριστώ",en_GB:"No Thanks",es:"No, gracias",es_ES:"No, gracias",es_MX:"No gracias",es_PE:"No gracias",es_UY:"No Thanks",et:"Tänan ei",eu:"Ez, eskerrik asko.",fa:"نه متشکرم",fa_DA:"نخیر متشکرم",fi:"Ei kiitos",fo:"Nei takk",fr:"Non Merci",ga:"Ní anois",gl:"Non, grazas",gu:"ના, આભાર.",ha:"A'a an gode",hi:"जी नहीं, धन्यवाद",hr:"Ne, hvala",ht:"Non Mési",hu:"Nem kérem",hy:"Ոչ, շնորհակալություն",ig:"Mba Daalụ",in:"Tidak Terimakasih",is:"Nei, takk",it:"Nessun ringraziamento",iw:"לא, תודה",ja:"不要",ka:"არა, მადლობა",ki:"Aca thengìo",kk:"Жоқ, рақмет",kn:"ಬೇಡ",ko:"아니요",ku:"نەخێر سوپاس",ku_TR:"Na Spas",lg:"Tewali kwebaza",lo:"ບໍ່ ຂອບໃຈ",lt:"Ačiū ne",lv:"Nē, paldies",mg:"Tsia fa misaotra",mi:"Kāo",mk:"Не благодарам",mn:"Үгүй, баярлалаа",mr:"नको, आभार",ms:"Tidak, Terima Kasih",mt:"Le Grazzi",my:"No Thanks",nb:"Nei takk",ne:"चाहँदैनन् धन्यवाद ",nl:"Nee, dank u",nn:"Nei takk!",ny:"Ayi zikomo",om:"Lakkii Galatoomaa",or:"ନାଁ,ଧନ୍ୟବାଦ",pl:"Nie, dziękuję",ps:"نه، مننه",pt:"Não, obrigado",pt_BR:"Não, obrigado",qu:"Manam, Añay",ro:"Nu, mulțumesc!",ru:"Нет, спасибо",rw:"Oya  Murakoze",sd:"مھربانيون",se:"In hálit",sh:"Не хвала!",si:"ස්තුතියි, අවශ්‍ය නැත",sk:"Nie, ďakujem",sl:"Ne hvala",sn:"Kwete Tinotenda",sp:"Aowa Ke a leboga",sq:"Jo Faleminderit",sr:"Не хвала!",st:"Che kea leboha",sv:"Nej tack",sw:"Ghairi",ta:"வேண்டாம் நன்றி",te:"వద్దండీ, ధన్యవాదాలు!",tg:"Не, ташаккур",th:"ไม่เป็นไร ขอบคุณ",ti:"የቐንየለይ ኣይፋል",tk:"Ýok, sag boluň",tl:"Hindi, salamat",tn:"Nnyaa, ke a leboga.",tr:"Hayır, teşekkürler",tw:"Daabi Meda wo ase",uk:"Ні, дякуємо",ur:"نہیں، شکریہ",uz:"Yo‘q, rahmat",vi:"Không, cám ơn",wo:"Deet Baxna",yo:"Rara Ese",zh_CN:"不了谢谢",zh_HK:"謝謝,不用了。",zh_TW:"不用了，謝謝",zu:`Cha 

























cha ngiyabonga`},R.OPT_OUT),R.OPT_OUT),SX=new Fe(new He("JOIST/updates.offline",{en:"Unable to check for updates.",af:"Kan nie opdaterings opspoor nie.",am:"ማሻሻያ መኖሩን ማረጋገጥ አልቻልኩም።",ar:"غير قادر على التحقق من وجود تحديثات.",ar_KW:"غير قادر على التحقق من التحديثات",ar_LY:"غير قادر على التحقق من التحديثات.",ar_MA:"لا يمكن الحصول على تحديثات",ar_SA:"تحديث",ar_SY:"غير قادر على التحقق من وجود تحديثات.",ay:"Güncəlləməri yoxlamaq mümkün olmadı.",az:"Güncəlləmələri yoxlamaq mümkün olmadı.",be:"Немагчыма праверыць наяўнасць абнаўленняў.",bg:`Неуспешна проверка за обновления.

Не може да се обнови`,bi:"No save checkin long niufala updates",bn:"আপডেট  খুঁজতে  অসমর্থ",bo:"ཐོན་གསར་པ་བལྟ་མ་ཐུབ།",bs:"Nije moguće provjeriti ažuriranja.",ca:"No podem comprovar les actualitzacions.",cs:"Nemohu zkontrolovat aktualizace.",cy:"Ddim yn gallu gwirio am ddiweddariadau.",da:`Kunne ikke søge efter 
opdateringer.`,de:"Prüfen nach Aktualisierung nicht möglich.",ee:"Mete ŋu di tɔtrɔ yeyeawo o",el:"Αδυναμία ελέγχου για ενημερώσεις",en_GB:"Unable to check for updates.",es:"No se pueden buscar actualizaciones",es_ES:"No se pueden comprobar actualizaciones",es_MX:"No se puede comprobar si hay actualizaciones.",es_PE:"No es posible buscar actualizaciones.",es_UY:"Unable to check for updates.",et:"Ei ole võimalik uuendusi kontrollida.",eu:"Ezin dira baieztatu eguneraketak.",fa:"بررسی به روزرسانی ها امکان پذیر نیست.",fa_DA:"بررسی به روزرسانی ها امکان پذیر نیست.",fi:"Päivitysten tarkistaminen epäonnistui.",fr:"Impossible de vérifier les mises à jour.",ga:"Ní féidir seiceáil le haghaidh nuashonrúchán.",gl:"Non se puideron buscar actualizacións.",gu:"અપડેટ ચેક કરી શકતા નથી",ha:"An kasa samun bayanan zamani.",hi:"अद्यतन जांच करने में असमर्थ",hr:"Nadogradnju nije moguće provjeriti.",ht:"Pa kapab tcheke mizajou yo.",hu:"Nem sikerült a frissítés keresése.",hy:"Հնարավոր չէ ստուգել թարմացումները:",ig:"Enweghị mmelite",in:"kukanTidak dapat memeriksa pembaharuan",is:"Get ekki leitað að uppfærslu.",it:"Impossibile controllare gli aggiornamenti.",iw:"בדיקת עדכונים נכשלה.",ja:"アップデートをチェックできません",ka:"განახლების შემოწმება შეუძლებელია.",ki:"Hagatwi kũjũria mũrũhi",kk:"Жаңару жасалғанын тексеру мүмкін емес",kn:"ನವೀಕರಣಗಳ ಪರಿಶೀಲಿಸಲು ಸಾಧ್ಯವಿಲ್ಲ.",ko:"업데이트 확인 불가",ku:"گەڕان بۆ وەشانی نوێ سەرکەوتوو نەبوو",ku_TR:"nikarin Nûvekirinan kontrol bikin",lg:"Elemeredwa okukebera ebipya",lo:"ບໍ່ສາມາດກວດສອບການປັບປຸງ.",lt:"Negalima patikrinti atnaujinimų.",lv:"Neizdevās atrast atjauninājumus.",mg:"Tsy afaka nanamarina ny fanavaozana.",mi:"Kāore i taea te kimi whakahoutanga",mk:"Не може да се провери дали има ажурирања.",mn:"Шинэчлэлтийг шалгах боломжгүй",mr:"अद्ययावत करण्यात अडचणी येत आहेत.",ms:"Tidak boleh menyemak kemas kini.",mt:"Ma nistgħux niċċekkjaw għall- aġġornamenti.",my:"အသစ်အသစ်သောအကြောင်းအရာအတွက် အဆင့်မြှင့်တင်၍မရနိုင်သေးပါ",nb:"Greier ikke å se etter oppdateringer.",ne:"अद्यावधिकका (अपडेटहरूका) लागि जाँच गर्न अक्षम ।",nl:"Niet in staat updates op te halen.",nn:"Sjå etter oppdateringar.",ny:"Sitinathe kuwona zosintha zamakono.",om:"Fooyya'iinsa ilaaluu hin dandeenye.",or:" ଅପ୍‍ଡେଟଗୁଡିକୁ ଯାଞ୍ଚ କରିବା ପାଇଁ ଅସମର୍ଥ।",pl:"Nie można sprawdzić aktualizacji.",ps:"د نویو معلوماتو پلټنه نشئ کولی.",pt:"Não é possível procurar atualizações.",pt_BR:"Não foi possível verificar atualizações.",qu:"Mana tarikunchu huk kunanyachiyta",ro:"Nu se pot căuta actualizări.",ru:"Невозможно проверить наличие обновлений.",rw:"Ntushobora kugenzura ibijyanye n'igihe.",se:"Ii leat vejolaš gávdnat ođastemiid",sh:"Не могу да проверим ажурирања.",si:"යාවත්කාලීන තිබේදැයි පරීක්ෂා කළ නොහැකිය.",sk:"Nie je možné skontrolovať aktualizácie",sl:"Ni mogoče preveriti, če so na voljo nove posodobitve.",sn:"Kukundikana kutarisa ma updates",sp:"Ga a kgone go lekola dimpshafatšo...",sq:"Nuk mund të gjejmë përditësimet.",sr:"Не могу да проверим ажурирања.",st:"Ho se khone ho sheba liphethoho",sv:"Det går inte att kontrollera uppdateringar.",sw:"Imeshindwa kuangalia toleo jipya.",ta:"இற்றைப் படுத்தலைச் சரிபார்க்க முடியாது",te:"అప్డేట్ల  కోసం తనిఖీ చెయ్యలేకపోయాము.",tg:"Санҷиши версияи нав ғайриимкон аст.",th:"ตรวจสอบแล้วไม่พบการปรับปรุงใหม่กว่านี้",ti:"እዋናዊ ምዕባለታት ንምርኻብ ኣይተኻኣለን።",tk:"Täzelenmeleri barlap bilmeýär.",tl:"Hindi masuri ang mga update.",tn:"Ga re kgone go tlhola diphetogo tse di sha",tr:"Güncellemeler kontrol edilemiyor.",tw:"Antumi anhwɛ deɛ Akɔsi.",uk:"Не вдається перевірити наявність оновлень.",ur:"اپ ڈیٹ کی جانچ نہیں ہو پا رہی ہے ہوسکی/ہوسکتی",uz:"Yangilanishlarni tekshirib bo‘lmadi",vi:"Không thể kiểm tra phiên bản",wo:"Parewouma nguir Yeesal",yo:"Ko le ṣayẹwo fun awọn imudojuiwọn.",zh_CN:"无法检查更新",zh_HK:"無法檢查更新",zh_TW:"無法檢查更新。",zu:"Ayikwazi ukuhlola izibuyekezo"},R.OPT_OUT),R.OPT_OUT);class Z2 extends a0(fd){paintCanvas(e,t,n){const s=e.context;s.beginPath(),s.arc(0,0,t._radius,0,Math.PI*2,!1),s.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e))}markDirtyRadius(){this.markPaintDirty()}dispose(){super.dispose()}}es.mixInto(Z2);const CM=gr(i=>class extends o0(i){initialize(e,t,...n){super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyRadius=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyRadius(){this.dirtyRadius=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyRadius=!1}});class DM extends CM(l0){constructor(e,t){super(e,t),Qi.prepareForTransform(this.domElement)}initialize(e,t){if(super.initialize(e,t),this.matrix=this.matrix||It.pool.fetch(),!this.fillElement||!this.strokeElement){const n=document.createElement("div");this.fillElement=n;const s=document.createElement("div");this.strokeElement=s,n.style.display="block",n.style.position="absolute",n.style.left="0",n.style.top="0",n.style.pointerEvents="none",s.style.display="block",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.pointerEvents="none",n.appendChild(s)}this.domElement=this.fillElement}updateDOM(){const e=this.node,t=this.fillElement,n=this.strokeElement;if(this.paintDirty&&(this.dirtyRadius&&(t.style.width=`${2*e._radius}px`,t.style.height=`${2*e._radius}px`,t.style[mi.borderRadius]=`${e._radius}px`),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?n.style.borderStyle="solid":n.style.borderStyle="none"),e.hasStroke())){const s=!this.hadStroke;(s||this.dirtyLineWidth||this.dirtyRadius)&&(n.style.width=`${2*e._radius-e.getLineWidth()}px`,n.style.height=`${2*e._radius-e.getLineWidth()}px`,n.style[mi.borderRadius]=`${e._radius+e.getLineWidth()/2}px`),(s||this.dirtyLineWidth)&&(n.style.left=`${-e.getLineWidth()/2}px`,n.style.top=`${-e.getLineWidth()/2}px`,n.style.borderWidth=`${e.getLineWidth()}px`),(s||this.dirtyStroke)&&(n.style.borderColor=e.getSimpleCSSStroke())}if(this.transformDirty||this.dirtyRadius){this.matrix.set(this.getTransformMatrix());const s=It.translation(-e._radius,-e._radius);this.matrix.multiplyMatrix(s),s.freeToPool(),Qi.applyPreparedTransform(this.matrix,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}es.mixInto(DM);const PX=!0;class IM extends CM(Vf){initialize(e,t){super.initialize(e,t,!0,PX),this.svgElement=this.svgElement||document.createElementNS(Kn,"circle")}updateSVGSelf(){const e=this.svgElement;this.dirtyRadius&&e.setAttribute("r",this.node._radius),this.updateFillStrokeStyle(e)}}es.mixInto(IM);const TX=["radius"];class ma extends bi{constructor(e,t){super(null),this._radius=0,typeof e=="object"?t=e:t=fp({radius:e},t),this.mutate(t)}getStrokeRendererBitmask(){let e=super.getStrokeRendererBitmask();return this.hasStroke()&&!this.getStroke().isGradient&&!this.getStroke().isPattern&&this.getLineWidth()<=this.getRadius()&&(e|=qe.bitmaskDOM),e}getPathRendererBitmask(){return qe.bitmaskCanvas|qe.bitmaskSVG|(mi.borderRadius?qe.bitmaskDOM:0)}invalidateCircle(){this._shape=null,this.invalidatePath()}createCircleShape(){return zt.circle(0,0,this._radius).makeImmutable()}intersectsBoundsSelf(e){let t=Math.abs(e.centerX),n=Math.abs(e.centerY);const s=e.maxX-t,r=e.maxY-n;return t>s+this._radius||n>r+this._radius?!1:t<=s||n<=r?!0:(t-=s,n-=r,t*t+n*n<=this._radius*this._radius)}canvasPaintSelf(e,t){Z2.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return DM.createFromPool(e,t)}createSVGDrawable(e,t){return IM.createFromPool(e,t)}createCanvasDrawable(e,t){return Z2.createFromPool(e,t)}setRadius(e){if(this._radius!==e){this._radius=e,this.invalidateCircle();const t=this._drawables.length;for(let n=0;n<t;n++)this._drawables[n].markDirtyRadius()}return this}set radius(e){this.setRadius(e)}get radius(){return this.getRadius()}getRadius(){return this._radius}computeShapeBounds(){let e=new pt(-this._radius,-this._radius,this._radius,this._radius);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}containsPointSelf(e){const t=e.x*e.x+e.y*e.y;let n=!0,s;if(this._strokePickable){s=this.getLineWidth()/2;const r=this._radius+s;n=n&&t<=r*r}if(this._fillPickable)return this._strokePickable?n:t<=this._radius*this._radius;if(this._strokePickable){const r=this._radius-s;return n&&t>=r*r}else return!1}setShape(e){if(e!==null)throw new Error("Cannot set the shape of a Circle to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createCircleShape()),this._shape}hasShape(){return!0}setShapeProperty(e){if(e!==null)throw new Error("Cannot set the shapeProperty of a Circle to something non-null, it handles this itself");return this}mutate(e){return super.mutate(e)}}ma.prototype._mutatorKeys=TX.concat(bi.prototype._mutatorKeys);ma.prototype.drawableMarkFlags=bi.prototype.drawableMarkFlags.concat(["radius"]).filter(i=>i!=="shape");class WS extends Ge{constructor(e){const t=Ne()({diameter:15,speed:1,numberOfElements:16,elementFactory:WS.rectangleFactory,activeColor:"rgba( 0, 0, 0, 1 )",inactiveColor:"rgba( 0, 0, 0, 0.15 )"},e);super(t),this.indicatorRotation=Math.PI*2,this.angleDelta=2*Math.PI/t.numberOfElements,this.activeColorProperty=new Rs(t.activeColor),this.inactiveColorProperty=new Rs(t.inactiveColor),this.speed=t.speed,this.elements=[];let n=0;for(let s=0;s<t.numberOfElements;s++){const r=t.elementFactory(t.diameter,t.numberOfElements);r.right=t.diameter/2,r.centerY=0,r.rotate(n,!0),n+=this.angleDelta,this.elements.push(r)}this.children=this.elements,this.step(0)}step(e){this.indicatorRotation+=e*10*this.speed;let t=this.indicatorRotation;for(let n=0;n<this.elements.length;n++){let s=Math.pow(t/(2*Math.PI)%1,.5);s<.2?s=1-s*5:s=(s-.2)*10/8;const r=s*this.inactiveColorProperty.value.red+(1-s)*this.activeColorProperty.value.red,a=s*this.inactiveColorProperty.value.green+(1-s)*this.activeColorProperty.value.green,o=s*this.inactiveColorProperty.value.blue+(1-s)*this.activeColorProperty.value.blue,l=s*this.inactiveColorProperty.value.alpha+(1-s)*this.activeColorProperty.value.alpha;this.elements[n].fill=new ct(r,a,o,l),t-=this.angleDelta}}dispose(){this.activeColorProperty.dispose(),this.inactiveColorProperty.dispose(),super.dispose()}static rectangleFactory(e,t){return new xt(0,0,e*.175,1.2*e/t)}static circleFactory(e,t){return new ma(.8*e/t)}}class Sk extends Lf{constructor(e,t){const n=Ne()({font:hr.DEFAULT,textFill:"black",maxTextWidth:null,tandem:R.REQUIRED,innerContent:e},t),s=new kt(e,Ut({font:n.font,fill:n.textFill,maxWidth:n.maxTextWidth},n.textNodeOptions));n.content=s,super(n),this.disposeTextPushButton=()=>{s.dispose()}}dispose(){this.disposeTextPushButton(),super.dispose()}}const xX="M9.65,20.8L.33,11.48c-.44-.44-.44-1.16,0-1.6l1.93-1.93c.44-.44,1.16-.44,1.6,0l6.59,6.59L24.65.33c.44-.44,1.16-.44,1.6,0l1.93,1.93c.44.44.44,1.16,0,1.6L11.26,20.8c-.44.44-1.16.44-1.6,0Z",LM=new zt(xX),EX="M44.96,35.84L25.07,1.39c-1.07-1.85-3.73-1.85-4.8,0L.38,35.84c-1.07,1.85.27,4.16,2.4,4.16h39.79c2.13,0,3.47-2.31,2.4-4.16ZM25.22,34.07c0,.9-.73,1.62-1.62,1.62h-1.85c-.9,0-1.62-.73-1.62-1.62v-1.85c0-.9.73-1.62,1.62-1.62h1.85c.9,0,1.62.73,1.62,1.62v1.85ZM25.22,15.52l-.55,11.16c-.04.87-.76,1.55-1.62,1.55h-.74c-.86,0-1.58-.68-1.62-1.54l-.57-11.16v-3.14c0-.9.73-1.62,1.62-1.62h1.85c.9,0,1.62.73,1.62,1.62v3.14Z",VX=new zt(EX),Ty=new ki(14),Em=550,vu={createCheckingNode:function(i){const e=new WS({diameter:i.big?24:18}),t=new _i(an({spacing:i.big?10:8,maxWidth:Em,children:[e,new mr(gX,{font:new ki(i.big?16:14),fontWeight:i.big?"bold":"normal"})]},i));return t.step=function(n){ms.stateProperty.value===cn.CHECKING&&e.step(n)},t.stepListener=t.step.bind(t),t},createUpToDateNode:function(i){return new _i(an({spacing:8,maxWidth:Em,children:[new xt(0,0,20,20,5,5,{fill:"#5c3",scale:i.big?1.2:1,children:[new bi(LM,{fill:"#fff",scale:.48,centerX:10,centerY:10})]}),new mr(yX,{font:new ki(i.big?16:14),fontWeight:i.big?"bold":"normal"})]},i))},createOutOfDateAboutNode:function(i){const e=new Dt([vX,Cu],(s,r)=>r?`<a href="{{url}}">${s}</a>`:s),t={url:ms.updateURL},n=new pi(e,{links:t,font:Ty});return new _i(an({spacing:8,maxWidth:Em,children:[new bi(VX,{fill:"#E87600",scale:.381}),n],tagName:"div"},i))},createOutOfDateDialogNode:function(i,e,t,n){const s=new Dt([bX],a=>Gn.format(a,t)),r=new Dt([_X],a=>Gn.format(a,e));return new Ai(an({spacing:15,maxWidth:Em,children:[new Ai({spacing:5,align:"left",children:[new mr(s,{font:new ki(16),fontWeight:"bold"}),new mr(r,{font:Ty})]}),new _i({spacing:25,children:[new Sk(AX,{visibleProperty:Cu,baseColor:"#6f6",font:Ty,listener:function(){hp(ms.updateURL)}}),new Sk(wX,{baseColor:"#ddd",font:Ty,listener:function(){i.hide()}})]})]},n))},createOfflineNode:function(i){return new _i(an({spacing:0,maxWidth:Em,children:[new Fm(20),new mr(SX,{font:new ki(i.big?16:14),fontWeight:i.big?"bold":"normal"})]},i))}},Vh=550,kh=16;class kX extends Ua{constructor(e,t,n,s){const r=Ne()({xSpacing:26,topMargin:26,bottomMargin:26,leftMargin:26,phetioReadOnly:!0,phetioDynamicElement:!0,isDisposable:!1,accessibleName:e,tandem:R.REQUIRED},s),a=phet.brand.Brand;let o=[];const l=new mr(e,{font:new ki(2*kh),maxWidth:Vh,accessibleParagraph:null});o.push(l);const h=new Dt([tX],D=>Gn.format(D,t));o.push(new mr(h,{font:new ki(kh),maxWidth:Vh})),phet.chipper.buildTimestamp&&o.push(new mr(phet.chipper.buildTimestamp,{font:new ki(.65*kh),maxWidth:Vh}));let c=null,f=null,g=null;if(ms.areUpdatesChecked){const D={left:0,top:0},M=vu.createCheckingNode(D),B=vu.createUpToDateNode(D),O=vu.createOutOfDateAboutNode(D),x=vu.createOfflineNode(D);c=M.stepListener,f=Z=>{M.visible=Z===cn.CHECKING,B.visible=Z===cn.UP_TO_DATE,O.visible=Z===cn.OUT_OF_DATE,x.visible=Z===cn.OFFLINE,M.pdomVisible=M.visible,B.pdomVisible=B.visible,O.pdomVisible=O.visible,x.pdomVisible=x.visible},g=new Ge({children:[M,B,O,x],maxWidth:Vh,visibleProperty:Cu}),o.push(g)}const v=[];if(a.name&&v.push(new ha(a.name,{font:new ki(kh),supScale:.5,supYOffset:3,maxWidth:Vh,readingBlockDisabledTagName:"h2"})),a.copyright){const D=phet.chipper.buildTimestamp?phet.chipper.buildTimestamp.split("-")[0]:new Date().getFullYear(),M=Gn.fillIn(a.copyright,{year:D});v.push(new mr(M,{font:new ki(.75*kh),maxWidth:Vh}))}let A=null;a.additionalLicenseStatement&&(A=new ha(a.additionalLicenseStatement,{font:new ki(.65*kh),fill:"gray",align:"left",maxWidth:Vh}),v.push(A)),v.length>0&&(o.push(new Fm(15)),o=o.concat(v));let P=null;(a.id==="phet"||a.id==="phet-io")&&(o.push(new Fm(15)),P=new dX(n,{titleFont:new ki({size:kh,weight:"bold"}),textFont:new ki(.75*kh),maxWidth:Vh}),o.push(P));const w=a.getLinks(Zc.name,Mr.value);if(w&&w.length>0){const D=new Ai({spacing:6,align:"left",maxWidth:Vh});o.push(D),Mr.link(M=>{D.children.forEach(x=>x.dispose());const B=a.getLinks(Zc.name,M),O=[];O.push(new Fm(15));for(let x=0;x<B.length;x++){const Z=B[x],de=new Kb([Cu,Z.textStringProperty],(me,ue)=>me?`<a href="{{url}}">${ue}</a>`:`${ue}: ${Z.url}`),$=new pi(de,{links:{url:Z.url},font:new ki(kh)});$.disposeEmitter.addListener(()=>{de.dispose()}),O.push($)}D.children=O})}const T=new Ai({align:"left",spacing:6,children:o,tagName:"div"});super(T,r),this.updateStepListener=c,this.updateVisibilityListener=f,this.addAriaLabelledbyAssociation({thisElementName:vn.PRIMARY_SIBLING,otherElementName:vn.PRIMARY_SIBLING,otherNode:l})}show(){this.shouldShowPopup()&&(ms.areUpdatesChecked&&!this.isShowingProperty.value&&(ms.resetTimeout(),(ms.stateProperty.value===cn.OFFLINE||ms.stateProperty.value===cn.UNCHECKED)&&ms.check(),this.updateStepListener&&zn.addListener(this.updateStepListener),this.updateVisibilityListener&&ms.stateProperty.link(this.updateVisibilityListener)),super.show())}hide(){this.isShowingProperty.value&&(super.hide(),ms.areUpdatesChecked&&(this.updateVisibilityListener&&ms.stateProperty.unlink(this.updateVisibilityListener),this.updateStepListener&&zn.removeListener(this.updateStepListener)))}}let LA=!0;const CX={start:function(i){const e=document.createElement("div");e.style.opacity="0",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0",e.style.clip="rect(0,0,0,0)",e.setAttribute("aria-hidden","true"),i.display.domElement.appendChild(e),i.frameStartedEmitter.addListener(()=>{i.frameCounter%1e3===0&&(LA=!LA,e.innerHTML=`${LA}`)})}},Rv=new VD;class Pk extends Ob{constructor(e,t){super(new oi(e),t)}}const Tk=new Fe(new He("SCENERY_PHET/a11y.measuringTape",{en:"Measuring Tape"},R.OPT_OUT),R.OPT_OUT),xk=new Fe(new He("SCENERY_PHET/a11y.measuringTapeTip",{en:"Measuring Tape Tip"},R.OPT_OUT),R.OPT_OUT),DX=new Fe(new He("SCENERY_PHET/measuringTapeReadoutPattern",{en:"{{distance}} {{units}}",af:"{{distance}} {{units}}",ak:"{{distance}} {{units}}",am:"{{distance}} {{units}}",ar:"{{distance}} {{units}}",ar_KW:"{{distance}} {{units}}",ar_LY:"{{distance}} {{units}}",ar_MA:"{{units}} {{distance}}",az:"{{distance}} {{units}}",be:"{{distance}} {{units}}",bg:"{{distance}} {{units}}",bn:"{{distance}} {{units}}",bs:"{{distance}} {{units}}",ca:"{{distance}} {{units}}",da:"{{distance}}{{units}}",de:"{{distance}} {{units}}",el:"{{distance}} {{units}}",es:"{{distance}} {{units}}",es_PE:"{{distance}} {{units}}",eu:"{{distance}} {{units}}",fa:"{{units}} {{distance}}",fi:"{{distance}} {{units}}",fr:"{{distance}} {{units}}",ga:"{{distance}} {{units}}",gl:"{{distance}} {{units}}",gu:"{{distance}} {{units}}",ha:"{{distance}}{{units}}",hi:"{{distance}} {{units}}",hr:"{{distance}} {{units}}",ht:"{{distance}} {{units}}",hu:"{{distance}} {{units}}",hy:"{{distance}} {{units}}",ig:"{{distance}} {{units}}",is:"{{distance}} {{units}}",it:"{{distance}} {{units}}",iw:"{{units}} {{distance}}",ka:"{{distance}} {{units}}",ki:"{{distance}} {{units}}",kn:"{{distance}} {{units}}",ko:"{{distance}} {{units}}",ku:"{{distance}} {{units}}",lg:"{{distance}} {{units}}",lt:"{{distance}} {{units}}",lv:"{{distance}} {{units}}",mn:"{{distance}} {{units}}",mr:"{{distance}} {{units}}",ms:"{{distance}} {{units}}",mt:"{{distance}} {{units}}",nb:"{{distance}} {{units}}",ne:"{{distance}} {{units}}",nn:"{{distance}} {{units}}",ny:"{{distance}} {{units}}",om:"{{distance}} {{units}}",pl:"{{distance}} {{units}}",pt:"{{distance}} {{units}}",pt_BR:"{{distance}} {{units}}",ro:"{{distance}} {{units}}",ru:"{{distance}} {{units}}",rw:"{{distance}} {{units}}",se:"{{distance}} {{units}}",sk:"{{distance}} {{units}}",sl:"{{distance}} {{units}}",sn:"{{distance}} {{units}}",sp:"{{distance}} {{units}}",sq:"{{distance}} {{units}}",sr:"{{distance}} {{units}}",st:"{{distance}} {{units}}",sv:"{{distance}} {{units}}",sw:"{{distance}} {{units}}",te:"{{distance}} {{units}}",tg:"{{distance}} {{units}}",th:"{{distance}} {{units}}",ti:"{{distance}} {{units}}",tk:"{{distance}} {{units}}",tr:"{{distance}} {{units}}",tw:"{{distance}} {{units}}",uk:"{{distance}} {{units}}",ur:"{{distance}} {{units}}",uz:"{{distance}} {{units}}",vi:"{{distance}} {{units}}",yo:"{{distance}} {{units}}",zh_CN:"{{distance}} {{units}}",zh_HK:"{{distance}} {{units}}",zh_TW:"{{distance}} {{units}}",zu:"{{distance}} {{units}}"},R.OPT_OUT),R.OPT_OUT);class Ek extends Df(Ge){constructor(e){super(e)}}const r_=new Image,IX=_n.createLock(r_);r_.onload=IX;r_.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAogSURBVHjazJprcFRnGcf/Z+/37C3JJiwkhFuDtg0UDbZCQ2la7XS004wzVochqKPOOAPyQb8IVoaKM3wp8Ek/1NSZUmfU0BY7OoooXqCmliYI5RJomjvsbrK37P3q85yTTUJIsmdDNvLOvNnN7tn3nN/7fy7v+5wjYAnbTw+iyWDAboMeTVotWowGQKUC1OqFfycIQC4HZDLoicbE/g59fO47+xAs5fzCEgBYlUp8nyHsNtQ77IDFDBAQdDpAoyEgZZGLUAA0BrIZIJEEwhPA2DiCoRDeJrDj3/geesoOc+TH+AlB7Kt0wlrpACoqALMJMHE3KgjGCLXGAoXCXOQqVKSOFvlcHNlsAOmUH/F4UoS6fQe448G5UBj7i0EJizUnMp0OUqGpugqw2QCrhXoFA6mhN7igUNIX0JD5CNT1UKl1C4yYoiuhHws28TfIx6gPI5u+iXhsBIFgGgODBObBsWQSh3Z9e27zExYB0q7Xo8NVDVQ5JRCbFXDYFTAYrIgntIjFIjSzUYLIlTS2Xm+BwVgLo+khqLQN9Ak5W+42cukuxKJ98HjT6L2FnnE/9hBQz33BkFl1kAm117gkECtBkInBbtUgltAgFIqVDLAQmM2xBTrjZ+g/LUHdQiZxFn6/B1evIzg8ih2zgYRSQMxmtNfWEAD5h5M6mxhHolBYsWQQc0FVup6FStNE/4WQT72LgP8qLn+E4NDI3UBCKYqsqJGU4F5VCTIpgGy47E2hUMBR+SjM1hfpvwwBdWJ87Aou9qDfN4ZNBR9SyfCRDopY7dWVEoTTKakSIx9Npe89PpzUoWuwDte81fg3vc5uFm0CG6s9aF45gOZVA7JgWHWfpxupZAQO124Imhdhs4exYd1gfSSCl+mQ/UWVYWen5Cc6e021ZFYMFItLSW5mY4CODz6LMzc3SLanoMShVEuvuSy9p3nLEn2W3ucooeTzIljr+l7s2dKFxiqPLLDK6s0w275KY/QiFvwVPvxvGv0DWE3q9AsLhV9KZN1VBFDrkkBYHTarXH76OFbg8Nln0DVUT8GHHNVE4a2CDjbTq9YgweRzEgzPQJoGiIbI/H1AgABSMRGsdd0NHNh5Bu6KYFGTc9e9RD60AbnkGxgc7MWFLhz7+rewXzlfVqfJ/RslQWvVpHkxCF9LdoYiJ85vx77TbRhJsDOtAlY/QuRrCYYOpoRJZ5QgVJMK8XsN5Rsj5RRHLQ1KE6CnhJqMo89jwqnLj0CrymBT7ci8MHkCz+UCMJqbyABSJHYv/AHoTv4Gv5gTZueT+Bnlki+IIJNRi9dY6fS0X+z57UvovLaF4jKBNBCEq0FSgtcmsj2bTm+i+F5dJ75PhqP4x616jIStolLztUw6Cqt9vZiHcpmP4BvLuR5vxnHlPOb1Oq2zxFzCQBSSkUpNg3zt17soc60jR1oD1H2KFmIWyU8W23gCWE0rzVrEj2vDFQsCsTp6vZMEt5DVXiVlMpRQ8ae5pvFVUkVcZ1ksUnZPp6a//O6pr+BamExp5UPAqkbJT5aqsb9tfIJmz4FOMrkf/uFL8x+bD9OfCMWWlBjF2AUUs1RpIXNq4VVvhVnK8OzsBYd/hR3dS0qsWCeZVSkmJbexqTZuJb+yikCdlx+dR02DlHMgOTEHydlX8zIv21kRNi2TUdxjTIfeS9sk+2bHFYTyZUkGWrtZVP2Vs60YDlnlueBMVchXWqTlu6QK0xba8QstZHPVkiIKZfnTvsUh+mM4baWo+VRpMNR280aKQRhIq5lOjKxK19jDpMhqKbQuV+Nwb3Oi83oT+kNOeTCTeYWX9uCtrsXEyWn6oI7uxykEu6SIs5yN8xNHTNoL/fKDz5F3KGQp087bVt7q0jpM7AVfCSX1ODO4SconMvxEKIe5mZ34/Y3NSEMtC+bLbGJ6naSMcoZLiGstWpqoLbYZBQhB7DMLElMRs5TVMP1QIdw7nvQdLSKUgnQxVifCOROue6sWHo9NjF5bGEY3qUx+5tpr3E2EdlLacE/imn6/uEnP8dIkL42VnzUIf54sLJ1oB8uL1vcG1xZVpoX9gx1ep5X6zBXxVYYxmJCbB6Scbeo8ao0YQUeKhGiGaWIYPp6BlMp7ndBgMqMc1y/bv8SthILMzFYU5kleRGrUUo1rto9fH18JjVaHbCZ9l8/cN4ggyE+8bCo0m2pkisLUszLzVh7pSwXJJSyxmc3lJwLm48tOhpZ8cRg2Le6szuwdZGPlqDgrWo26fOFXTiRMJOQlTZ4NpULKUXNJnKdtr3LmlJVxXTan6CkCyaWwscjWegqGTU05R4LdaB9ELBaDU68puzLzFzwTYqxeUWxLPbsaP7s1u24gORGCUau9Kz8sa4sExGLI1iLVnKIbkuYVfeJgKhX5jUqBZW8cRen8brO/aAWn6NVZtHG0ui7gkxEvGl3W5YeZIFViEwvWBGTDcNvTeAaB0SHyGy10y6kO19vGRshn4mjf8v7SwDTX3kKz4Ty6B+5g60rH8sEEvaSMD20bPyxaT5MNw+3glpMY77+JJPl+vdVQfpBkHPANwpIfx4Gdfy55p7lga3QMY9+aDrx/5QYecztQY9KWD4TvB3r7aTNFIC1/FMu4SwrDbe+md/GU+hROd/eiZU11eYDYT0gRjA2jbf17aHv4kvz9USHr5mSmjqNPvIa10b/gdxd7sW11FVYvpcmJDj8EePrR1vBPHH3udEk/n4Lh2nYmK2MXq4nhzaePoCV3Ep1dV9BQWYFn1lTeV5RTq1VcaBUhMPox2urP4egX3ym9ZFAooKUzUglWq5EH9POWEzjR04/j//omqhvW47lGN3zhKC57wggm0rJObtRpaAmlQDLgQ3L0E1giH+PA9rfQ9ulLi5oUhglmMrAyCN9A4kqmXJPb23Qarau6cfjiLpwa3IaqlXVocjvJYVUIRBPwx5IiWL5gylzfIxUEAsjSDPq8XkS9w4D/tqjG3uf/KisELwRzjsZ9IU6RMBKVTE1RgsU02ofwZusRdN1eh86+7Thz/vMIa2phsTuh1elgM+qm9i++UIQCVBSJEGX1CT8sqVE8v+I/2PvsWbgtwft2OYb5O8Pw3TB+iCAUlorlpbbmmptiB14Twbpur8dVfx3CXtPU3TM7mYDb4IHb5UHzY31odvctbZmN+uvUX2VlgiGKij4yBa1UQ1tsmwZb3qb40WHxTu0xLvqFCGbMD4zQ5nIiAiz3Sr+UFo95aVcwJubXwu64cLf5EJecaGfaNDYu3SHjB3Js/PiIRVKKO/uSIDwAJDTJocBlDFPsiJKfDwyJ91qDU5fGd8zo5S2uCRQK6EaTZG5c6eRih/h00gMAo5ycVLYef0B6UOgHB7HjrkubrG52UH+BD1ZPlp/Ex6xUc9TU/l8wSgmIA9bEBHrIRXawu8w5z5Mq7WPTY6UKpvXAmFlhPZrFMfLrQ5N+X9xoCKyegR7AGNBPEP0zP/ifAAMAmVerrtl2FKkAAAAASUVORK5CYII=";const Fu="shift?+",MM=new Mt(`${Fu}a`),OM=new Mt(`${Fu}d`),NM=new Mt(`${Fu}w`),RM=new Mt(`${Fu}s`),BM=new Mt(`${Fu}arrowLeft`),qM=new Mt(`${Fu}arrowRight`),zM=new Mt(`${Fu}arrowUp`),FM=new Mt(`${Fu}arrowDown`),HM=[MM,OM,BM,qM],UM=[NM,RM,zM,FM],LX=[...HM,...UM],MX=new Map([["both",LX],["leftRight",HM],["upDown",UM]]);class GM extends Xl{constructor(e){const t=Ne()({dragDelta:10,shiftDragDelta:5,dragSpeed:0,shiftDragSpeed:0,keyboardDragDirection:"both",positionProperty:null,transform:null,dragBoundsProperty:null,mapPosition:null,translateNode:!1,start:null,drag:null,end:null,moveOnHoldDelay:500,moveOnHoldInterval:400,tandem:R.REQUIRED,phetioReadOnly:!0},e),n=MX.get(t.keyboardDragDirection),s=Ne()({keyStringProperties:n},t);if(super(s),this.leftKeyDownProperty=new oi(!1),this.rightKeyDownProperty=new oi(!1),this.upKeyDownProperty=new oi(!1),this.downKeyDownProperty=new oi(!1),this.startNextKeyboardEvent=!1,this.restartTimerNextKeyboardEvent=!1,this.modelDelta=new Oe(0,0),this.modelPoint=new Oe(0,0),this.vectorDelta=new Oe(0,0),this._isKeyboardDragListener=!0,this.pressedKeyStringPropertiesProperty.link(r=>{this.leftKeyDownProperty.value=r.includes(BM)||r.includes(MM),this.rightKeyDownProperty.value=r.includes(qM)||r.includes(OM),this.upKeyDownProperty.value=r.includes(zM)||r.includes(NM),this.downKeyDownProperty.value=r.includes(FM)||r.includes(RM)}),this._start=t.start,this._drag=t.drag,this._end=t.end,this._dragBoundsProperty=t.dragBoundsProperty||new Mt(null),this._mapPosition=t.mapPosition,this._translateNode=t.translateNode,this._transform=t.transform,this._positionProperty=t.positionProperty,this._dragSpeed=t.dragSpeed,this._shiftDragSpeed=t.shiftDragSpeed,this._dragDelta=t.dragDelta,this._shiftDragDelta=t.shiftDragDelta,this._moveOnHoldDelay=t.moveOnHoldDelay,this.useDragSpeed=t.dragSpeed>0||t.shiftDragSpeed>0,this.dragStartAction=new Zi(r=>{this._start&&this._start(r,this),this.useDragSpeed&&zn.addListener(this.boundStepListener)},{parameters:[{name:"event",phetioType:Lo.SceneryEventIO}],tandem:t.tandem.createTandem("dragStartAction"),phetioDocumentation:"Emits whenever a keyboard drag starts.",phetioReadOnly:t.phetioReadOnly,phetioEventType:vi.USER}),this.dragAction=new Zi(()=>{if(t.transform){const r=t.transform instanceof $r?t.transform:t.transform.value;this.modelDelta=r.inverseDelta2(this.vectorDelta)}else this.modelDelta=this.vectorDelta;if(this._translateNode){let r=this.getCurrentTarget().translation.plus(this.vectorDelta);r=this.mapModelPoint(r),this.getCurrentTarget().translation=r,this.modelPoint=this.parentToModelPoint(r)}if(this._positionProperty){let r=this._positionProperty.value.plus(this.modelDelta);r=this.mapModelPoint(r),this.modelPoint=r,r.equals(this._positionProperty.value)||(this._positionProperty.value=r)}if(this._drag){const r=this.createSyntheticEvent(this._pointer);this._drag(r,this)}},{parameters:[],tandem:t.tandem.createTandem("dragAction"),phetioDocumentation:"Emits every time there is some input from a keyboard drag.",phetioHighFrequency:!0,phetioReadOnly:t.phetioReadOnly,phetioEventType:vi.USER}),this.dragEndAction=new Zi(()=>{this.useDragSpeed?zn.removeListener(this.boundStepListener):this.callbackTimer.stop(!1);const r=this._pointer?this.createSyntheticEvent(this._pointer):null;this._end&&this._end(r,this),this.clearPointer()},{parameters:[],tandem:t.tandem.createTandem("dragEndAction"),phetioDocumentation:"Emits whenever a keyboard drag ends.",phetioReadOnly:t.phetioReadOnly,phetioEventType:vi.USER}),this._pointerListener={listener:this,interrupt:this.interrupt.bind(this)},this._pointer=null,this.callbackTimer=new jb({callback:()=>{const a=or.shiftKeyDown?t.shiftDragDelta:t.dragDelta;this.moveFromDelta(a)},delay:t.moveOnHoldDelay,interval:t.moveOnHoldInterval}),this.boundStepListener=this.stepForSpeed.bind(this),this.isPressedProperty.lazyLink(r=>{r?this.startNextKeyboardEvent=!0:(this.startNextKeyboardEvent=!1,this.restartTimerNextKeyboardEvent=!1,this.isDragging()&&this.dragEndAction.execute())}),!this.useDragSpeed){const r=a=>{a.link(o=>{o&&(this.restartTimerNextKeyboardEvent=!0)})};r(this.leftKeyDownProperty),r(this.rightKeyDownProperty),r(this.upKeyDownProperty),r(this.downKeyDownProperty)}this._disposeKeyboardDragListener=()=>{this.leftKeyDownProperty.dispose(),this.rightKeyDownProperty.dispose(),this.upKeyDownProperty.dispose(),this.downKeyDownProperty.dispose(),this.callbackTimer.dispose(),zn.hasListener(this.boundStepListener)&&zn.removeListener(this.boundStepListener)}}stepForSpeed(e){const t=or.shiftKeyDown,n=e*(t?this.shiftDragSpeed:this.dragSpeed);this.moveFromDelta(n)}moveFromDelta(e){let t=0,n=0;this.leftKeyDownProperty.value&&(t-=e),this.rightKeyDownProperty.value&&(t+=e),this.upKeyDownProperty.value&&(n-=e),this.downKeyDownProperty.value&&(n+=e);const s=new Oe(t,n);s.equals(Oe.ZERO)||(this.vectorDelta=s,this.dragAction.execute())}parentToModelPoint(e){return this.transform?(this.transform instanceof $r?this.transform:this.transform.value).inverseDelta2(e):e}localToParentPoint(e){return this.getCurrentTarget().localToParentPoint(e)}getDragBounds(){return this._dragBoundsProperty.value}get dragBounds(){return this.getDragBounds()}setTransform(e){this._transform=e}set transform(e){this.setTransform(e)}get transform(){return this.getTransform()}getTransform(){return this._transform}get dragSpeed(){return this._dragSpeed}set dragSpeed(e){this._dragSpeed=e}get shiftDragSpeed(){return this._shiftDragSpeed}set shiftDragSpeed(e){this._shiftDragSpeed=e}get dragDelta(){return this._dragDelta}set dragDelta(e){this._dragDelta=e}get shiftDragDelta(){return this._shiftDragDelta}set shiftDragDelta(e){this._shiftDragDelta=e}movingLeft(){return this.leftKeyDownProperty.value&&!this.rightKeyDownProperty.value}movingRight(){return this.rightKeyDownProperty.value&&!this.leftKeyDownProperty.value}movingUp(){return this.upKeyDownProperty.value&&!this.downKeyDownProperty.value}movingDown(){return this.downKeyDownProperty.value&&!this.upKeyDownProperty.value}getCurrentTarget(){return this._pointer.trail.lastNode()}isDragging(){return!!this._pointer&&this._pointer.attachedListener===this._pointerListener}keydown(e){super.keydown(e);const t=e.domEvent;if(!t.metaKey&&Qe.isMovementKey(t)){if(Zn.safari&&this.pressedKeyStringPropertiesProperty.value.length>1){this.interrupt();return}t.preventDefault(),this.startNextKeyboardEvent&&!e.pointer.isAttached()&&(this._pointer=e.pointer,e.pointer.addInputListener(this._pointerListener,!0),this.dragStartAction.execute(e),this.startNextKeyboardEvent=!1),this.restartTimerNextKeyboardEvent&&this.isDragging()&&(this.callbackTimer.stop(!1),this.callbackTimer.start(),this._moveOnHoldDelay>0&&this.callbackTimer.fire(),this.restartTimerNextKeyboardEvent=!1)}}mapModelPoint(e){return this._mapPosition?this._mapPosition(e):this._dragBoundsProperty.value?this._dragBoundsProperty.value.closestPointTo(e):e}clearPointer(){this._pointer&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null)}dispose(){this.interrupt(),this._disposeKeyboardDragListener(),super.dispose()}}class OX{constructor(e){const t=Ne()({positionProperty:null,start:null,end:null,drag:null,transform:null,dragBoundsProperty:null,mapPosition:null,translateNode:!1,dragListenerOptions:{},keyboardDragListenerOptions:{}},e),n={positionProperty:t.positionProperty,transform:t.transform,dragBoundsProperty:t.dragBoundsProperty||void 0,mapPosition:t.mapPosition||void 0,translateNode:t.translateNode},s=(g,v)=>{this.keyboardDragListener.interrupt(),t.start&&t.start(g,v),t.dragListenerOptions.start&&t.dragListenerOptions.start(g,v)},r=(g,v)=>{t.drag&&t.drag(g,v),t.dragListenerOptions.drag&&t.dragListenerOptions.drag(g,v)},a=(g,v)=>{t.end&&t.end(g,v),t.dragListenerOptions.end&&t.dragListenerOptions.end(g,v)},o=Ut({},n,t.dragListenerOptions,{start:s,drag:r,end:a});this.dragListener=new vd(o);const l=(g,v)=>{this.dragListener.interrupt(),t.start&&t.start(g,v),t.keyboardDragListenerOptions.start&&t.keyboardDragListenerOptions.start(g,v)},h=(g,v)=>{t.drag&&t.drag(g,v),t.keyboardDragListenerOptions.drag&&t.keyboardDragListenerOptions.drag(g,v)},c=(g,v)=>{t.end&&t.end(g,v),t.keyboardDragListenerOptions.end&&t.keyboardDragListenerOptions.end(g,v)},f=Ut({},n,t.keyboardDragListenerOptions,{start:l,drag:h,end:c});this.keyboardDragListener=new GM(f),this.hotkeys=this.keyboardDragListener.hotkeys,this.isPressedProperty=Dt.or([this.dragListener.isPressedProperty,this.keyboardDragListener.isPressedProperty])}get isPressed(){return this.dragListener.isPressed||this.keyboardDragListener.isPressed}dispose(){this.isPressedProperty.dispose(),this.dragListener.dispose(),this.keyboardDragListener.dispose()}interrupt(){this.dragListener.interrupt(),this.keyboardDragListener.interrupt()}keydown(e){this.keyboardDragListener.keydown(e)}focusout(e){this.keyboardDragListener.focusout(e)}focusin(e){this.keyboardDragListener.focusin(e)}cancel(){this.keyboardDragListener.cancel()}click(e){this.dragListener.click(e)}touchenter(e){this.dragListener.touchenter(e)}touchmove(e){this.dragListener.touchmove(e)}focus(e){this.dragListener.focus(e)}blur(){this.dragListener.blur()}down(e){this.dragListener.down(e)}up(e){this.dragListener.up(e)}enter(e){this.dragListener.enter(e)}move(e){this.dragListener.move(e)}exit(e){this.dragListener.exit(e)}pointerUp(e){this.dragListener.pointerUp(e)}pointerCancel(e){this.dragListener.pointerCancel(e)}pointerMove(e){this.dragListener.pointerMove(e)}pointerInterrupt(){this.dragListener.pointerInterrupt()}}const WM={grabSoundPlayer:$n.get("grab"),releaseSoundPlayer:$n.get("release")},NX=ie.assignIn({keyboardDragListenerSoundOptions:{},dragListenerSoundOptions:{}},WM);class Mu extends OX{constructor(e){const t=so()({},NX,e),n=Ut({},t,t.dragListenerSoundOptions),s=Ut({},t,t.keyboardDragListenerSoundOptions),r=n.grabSoundPlayer,a=n.releaseSoundPlayer,o=s.grabSoundPlayer,l=s.releaseSoundPlayer;super(t),Mu.linkToDragEvents(this.dragListener,r,a),Mu.linkToDragEvents(this.keyboardDragListener,o,l)}static linkToDragEvents(e,t,n){const s=r=>{r?t&&t.play():e.interrupted||n&&n.play()};e.isPressedProperty.link(s)}}Mu.DEFAULT_SOUND_OPTIONS=WM;class Vk extends vd{constructor(e){const t=so()({},Mu.DEFAULT_SOUND_OPTIONS,e);super(t),Mu.linkToDragEvents(this,t.grabSoundPlayer,t.releaseSoundPlayer)}}class kk extends GM{constructor(e){const t=so()({},Mu.DEFAULT_SOUND_OPTIONS,e);super(t),Mu.linkToDragEvents(this,t.grabSoundPlayer,t.releaseSoundPlayer)}}const xy=600;class KS extends Ge{constructor(e,t){const n=!t?.basePositionProperty,s=!t?.tipPositionProperty,r=Ne()({basePositionProperty:new Wy(new Oe(0,0)),tipPositionProperty:new Wy(new Oe(1,0)),hasValue:!0,dragBounds:pt.EVERYTHING,textPosition:new Oe(0,30),modelViewTransform:Qo.createIdentity(),significantFigures:1,textColor:"white",textBackgroundColor:null,textBackgroundXMargin:4,textBackgroundYMargin:2,textBackgroundCornerRadius:2,textMaxWidth:200,textFont:new ki({size:16,weight:"bold"}),baseScale:.8,lineColor:"gray",tapeLineWidth:2,tipCircleColor:"rgba(0,0,0,0.1)",tipCircleRadius:10,crosshairColor:"rgb(224, 95, 32)",crosshairSize:5,crosshairLineWidth:2,isBaseCrosshairRotating:!0,isTipCrosshairRotating:!0,isTipDragBounded:!0,interactive:!0,baseDragStarted:ie.noop,baseDragEnded:ie.noop,phetioReadoutStringPropertyInstrumented:!0,phetioFeaturedMeasuredDistanceProperty:!1,baseKeyboardDragListenerOptions:{dragSpeed:xy,shiftDragSpeed:xy/4},tipKeyboardDragListenerOptions:{dragSpeed:xy,shiftDragSpeed:xy/4}},t);super(),this.unitsProperty=e,this.significantFigures=r.significantFigures,this.dragBoundsProperty=new Mt(r.dragBounds),this.modelViewTransformProperty=new Mt(r.modelViewTransform),this.isTipDragBounded=r.isTipDragBounded,this.basePositionProperty=r.basePositionProperty,this.tipPositionProperty=r.tipPositionProperty,this.ownsBasePositionProperty=n,this.ownsTipPositionProperty=s,this._isTipUserControlledProperty=new Mt(!1),this.isTipUserControlledProperty=this._isTipUserControlledProperty,this._isBaseUserControlledProperty=new Mt(!1),this.isBaseUserControlledProperty=this._isBaseUserControlledProperty,this.measuredDistanceProperty=new Dt([this.basePositionProperty,this.tipPositionProperty],(D,M)=>D.distance(M),{tandem:r.tandem?.createTandem("measuredDistanceProperty"),phetioDocumentation:"The distance measured by the measuring tape",phetioValueType:Ii,phetioFeatured:r.phetioFeaturedMeasuredDistanceProperty,units:this.basePositionProperty.units});const a=new zt().moveTo(-r.crosshairSize,0).moveTo(-r.crosshairSize,0).lineTo(r.crosshairSize,0).moveTo(0,-r.crosshairSize).lineTo(0,r.crosshairSize),o=new bi(a,{stroke:r.crosshairColor,lineWidth:r.crosshairLineWidth}),l=new bi(a,{stroke:r.crosshairColor,lineWidth:r.crosshairLineWidth}),h=new ma(r.tipCircleRadius,{fill:r.tipCircleColor}),c=new Ek({interactiveHighlightEnabled:!1});this.baseImage=new ba(r_,{scale:r.baseScale,cursor:"pointer",tagName:"div",focusable:!0,ariaRole:"application",innerContent:Tk,ariaLabel:Tk}),c.addChild(this.baseImage);const f=new Fh(this.basePositionProperty.value,this.tipPositionProperty.value,{stroke:r.lineColor,lineWidth:r.tapeLineWidth}),g=new Ek({children:[h,l],cursor:"pointer",interactiveHighlightEnabled:!1,tagName:"div",focusable:!0,ariaRole:"application",innerContent:xk,ariaLabel:xk}),v=new Kb([this.unitsProperty,this.measuredDistanceProperty,DX],(D,M,B)=>{const O=pd(D.multiplier*M,this.significantFigures);return Gn.fillIn(B,{distance:O,units:D.name})},{tandem:r.phetioReadoutStringPropertyInstrumented?r.tandem?.createTandem("readoutStringProperty"):R.OPT_OUT,phetioDocumentation:"The text content of the readout on the measuring tape"});this.valueNode=new kt(v,{font:r.textFont,fill:r.textColor,maxWidth:r.textMaxWidth}),this.valueBackgroundNode=new xt(0,0,1,1,{cornerRadius:r.textBackgroundCornerRadius,fill:r.textBackgroundColor});const A=()=>{const D=this.valueNode.width+2*r.textBackgroundXMargin,M=this.valueNode.height+2*r.textBackgroundYMargin;this.valueBackgroundNode.setRect(0,0,D,M),this.valueBackgroundNode.center=this.valueNode.center};this.valueNode.boundsProperty.lazyLink(A),A(),g.touchArea=g.localBounds.dilated(15),this.baseImage.touchArea=this.baseImage.localBounds.dilated(20),this.baseImage.mouseArea=this.baseImage.localBounds.dilated(10),this.addChild(f),this.addChild(o),this.addChild(c),this.valueContainer=new Ge({children:[this.valueBackgroundNode,this.valueNode]}),r.hasValue&&this.addChild(this.valueContainer),this.addChild(g);let P;if(this.baseDragListener=null,r.interactive){c.interactiveHighlightEnabled=!0,g.interactiveHighlightEnabled=!0;const D=()=>{this.moveToFront(),r.baseDragStarted(),this._isBaseUserControlledProperty.value=!0},M=()=>{this._isBaseUserControlledProperty.value=!1,r.baseDragEnded()},B=me=>{if(!this.isTipUserControlledProperty.value){const ue=me.plus(this.tipPositionProperty.value);if(r.isTipDragBounded){const Se=this.dragBoundsProperty.value.closestPointTo(ue);this.tipPositionProperty.set(Se)}else this.tipPositionProperty.set(ue)}};this.baseDragListener=new Vk(Ut({tandem:r.tandem?.createTandem("baseDragListener"),start:me=>{D();const ue=this.modelViewTransformProperty.value.modelToViewPosition(this.basePositionProperty.value);P=me.currentTarget.globalToParentPoint(me.pointer.point).minus(ue)},drag:(me,ue)=>{const Se=ue.currentTarget.globalToParentPoint(me.pointer.point).minus(P),Te=this.modelViewTransformProperty.value.viewToModelPosition(Se),Re=this.dragBoundsProperty.value.closestPointTo(Te),We=Re.minus(this.basePositionProperty.value);this.basePositionProperty.set(Re),B(We)},end:M},r.baseDragListenerOptions)),this.baseImage.addInputListener(this.baseDragListener);const O=new kk(Ut({tandem:r.tandem?.createTandem("baseKeyboardDragListener"),positionProperty:this.basePositionProperty,transform:this.modelViewTransformProperty,dragBoundsProperty:this.dragBoundsProperty,start:D,drag:(me,ue)=>{B(ue.modelDelta)},end:M},r.baseKeyboardDragListenerOptions));this.baseImage.addInputListener(O);const x=()=>{this._isTipUserControlledProperty.value=!1};let Z;const de=new Vk(Ut({tandem:r.tandem?.createTandem("tipDragListener"),start:me=>{this.moveToFront(),this._isTipUserControlledProperty.value=!0;const ue=this.modelViewTransformProperty.value.modelToViewPosition(this.tipPositionProperty.value);Z=me.currentTarget.globalToParentPoint(me.pointer.point).minus(ue)},drag:(me,ue)=>{const Se=ue.currentTarget.globalToParentPoint(me.pointer.point).minus(Z),Te=this.modelViewTransformProperty.value.viewToModelPosition(Se);r.isTipDragBounded?this.tipPositionProperty.value=this.dragBoundsProperty.value.closestPointTo(Te):this.tipPositionProperty.value=Te},end:x},r.tipDragListenerOptions));g.addInputListener(de);const $=new kk(Ut({tandem:r.tandem?.createTandem("tipKeyboardDragListener"),positionProperty:this.tipPositionProperty,dragBoundsProperty:r.isTipDragBounded?this.dragBoundsProperty:null,transform:this.modelViewTransformProperty,start:()=>{this.moveToFront(),this._isTipUserControlledProperty.value=!0},end:x},r.tipKeyboardDragListenerOptions));g.addInputListener($),this.visibleProperty.lazyLink(me=>{me||this.interruptSubtreeInput()})}const w=()=>{this.valueNode.centerTop=this.baseImage.center.plus(r.textPosition.times(r.baseScale))};v.link(w);const T=Cn.multilink([this.measuredDistanceProperty,e,this.modelViewTransformProperty,this.tipPositionProperty,this.basePositionProperty],(D,M,B,O,x)=>{const Z=B.modelToViewPosition(O),de=B.modelToViewPosition(x),$=this.baseImage.getRotation(),me=Math.atan2(Z.y-de.y,Z.x-de.x),ue=me-$;o.center=de,g.center=Z,this.baseImage.setRotation(0),this.baseImage.rightBottom=de,this.baseImage.rotateAround(this.baseImage.rightBottom,me),f.setLine(de.x,de.y,Z.x,Z.y),r.isTipCrosshairRotating&&g.rotateAround(Z,ue),r.isBaseCrosshairRotating&&o.rotateAround(de,ue),w()});this.disposeMeasuringTapeNode=()=>{T.dispose(),v.dispose(),this.ownsBasePositionProperty&&this.basePositionProperty.dispose(),this.ownsTipPositionProperty&&this.tipPositionProperty.dispose(),c.dispose(),g.dispose()},this.mutate(r)}reset(){this.ownsBasePositionProperty&&this.basePositionProperty.reset(),this.ownsTipPositionProperty&&this.tipPositionProperty.reset()}dispose(){this.disposeMeasuringTapeNode(),super.dispose()}setDragBounds(e){const t=e.copy();this.dragBoundsProperty.value=t,this.basePositionProperty.value=t.closestPointTo(this.basePositionProperty.value),this.isTipDragBounded&&(this.tipPositionProperty.value=t.closestPointTo(this.tipPositionProperty.value))}getDragBounds(){return this.dragBoundsProperty.value.copy()}getLocalBaseCenter(){return new Oe(-this.baseImage.imageWidth/2,-this.baseImage.imageHeight/2)}getLocalBaseBounds(){return this.baseImage.bounds.copy()}startBaseDrag(e){this.baseDragListener&&this.baseDragListener.press(e)}static createIcon(e){const t=Ne()({tapeLength:30},e),n=new KS(new Mt({name:"",multiplier:1}),{tipPositionProperty:new Wy(new Oe(t.tapeLength,0)),hasValue:!1,interactive:!1});t.children=[n];const s=new Ge(t);return n.toImage(r=>s.setChildren([new ba(r)])),s}}var KM={exports:{}};(function(i){function e(){}function t(){}(function(){function n(a,o){o=o||1/0;for(var l,h=a.length,c=null,f=[],g=0;g<h;g++){if(l=a.charCodeAt(g),l>55295&&l<57344)if(c)if(l<56320){(o-=3)>-1&&f.push(239,191,189),c=l;continue}else l=c-55296<<10|l-56320|65536,c=null;else if(l>56319){(o-=3)>-1&&f.push(239,191,189);continue}else if(g+1===h){(o-=3)>-1&&f.push(239,191,189);continue}else{c=l;continue}else c&&((o-=3)>-1&&f.push(239,191,189),c=null);if(l<128){if((o-=1)<0)break;f.push(l)}else if(l<2048){if((o-=2)<0)break;f.push(l>>6|192,l&63|128)}else if(l<65536){if((o-=3)<0)break;f.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<2097152){if((o-=4)<0)break;f.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return f}function s(a,o,l){var h="",c="";l=Math.min(a.length,l||1/0),o=o||0;for(var f=o;f<l;f++)a[f]<=127?(h+=r(c)+String.fromCharCode(a[f]),c=""):c+="%"+a[f].toString(16);return h+r(c)}function r(a){try{return decodeURIComponent(a)}catch{return"�"}}e.prototype.encode=function(a){var o;return typeof Uint8Array>"u"?o=n(a):o=new Uint8Array(n(a)),o},t.prototype.decode=function(a){return s(a,0,a.length)}})(),i&&(i.exports.TextDecoderLite=t,i.exports.TextEncoderLite=e)})(KM);var RX=KM.exports;const BX=t0(RX);var a_={};a_.byteLength=FX;a_.toByteArray=UX;a_.fromByteArray=KX;var Ml=[],So=[],qX=typeof Uint8Array<"u"?Uint8Array:Array,MA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $d=0,zX=MA.length;$d<zX;++$d)Ml[$d]=MA[$d],So[MA.charCodeAt($d)]=$d;So[45]=62;So[95]=63;function YM(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function FX(i){var e=YM(i),t=e[0],n=e[1];return(t+n)*3/4-n}function HX(i,e,t){return(e+t)*3/4-t}function UX(i){var e,t=YM(i),n=t[0],s=t[1],r=new qX(HX(i,n,s)),a=0,o=s>0?n-4:n,l;for(l=0;l<o;l+=4)e=So[i.charCodeAt(l)]<<18|So[i.charCodeAt(l+1)]<<12|So[i.charCodeAt(l+2)]<<6|So[i.charCodeAt(l+3)],r[a++]=e>>16&255,r[a++]=e>>8&255,r[a++]=e&255;return s===2&&(e=So[i.charCodeAt(l)]<<2|So[i.charCodeAt(l+1)]>>4,r[a++]=e&255),s===1&&(e=So[i.charCodeAt(l)]<<10|So[i.charCodeAt(l+1)]<<4|So[i.charCodeAt(l+2)]>>2,r[a++]=e>>8&255,r[a++]=e&255),r}function GX(i){return Ml[i>>18&63]+Ml[i>>12&63]+Ml[i>>6&63]+Ml[i&63]}function WX(i,e,t){for(var n,s=[],r=e;r<t;r+=3)n=(i[r]<<16&16711680)+(i[r+1]<<8&65280)+(i[r+2]&255),s.push(GX(n));return s.join("")}function KX(i){for(var e,t=i.length,n=t%3,s=[],r=16383,a=0,o=t-n;a<o;a+=r)s.push(WX(i,a,a+r>o?o:a+r));return n===1?(e=i[t-1],s.push(Ml[e>>2]+Ml[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],s.push(Ml[e>>10]+Ml[e>>4&63]+Ml[e<<2&63]+"=")),s.join("")}class YS extends to{initialize(e,t){super.initialize(t),this.display=e,this.drawableCount=0,this.used=!0,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,this.zIndex=0}dispose(){this.display=null,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,super.dispose()}addDrawable(e){this.drawableCount++,this.markDirtyDrawable(e)}removeDrawable(e){this.drawableCount--,this.markDirty()}onIntervalChange(e,t){}updateInterval(){(this.pendingFirstDrawable!==this.firstDrawable||this.pendingLastDrawable!==this.lastDrawable)&&(this.onIntervalChange(this.pendingFirstDrawable,this.pendingLastDrawable),this.firstDrawable=this.pendingFirstDrawable,this.lastDrawable=this.pendingLastDrawable)}notifyInterval(e,t){this.pendingFirstDrawable=e,this.pendingLastDrawable=t,this.updateInterval()}audit(e,t,n){}}class Jo{constructor(e,t){this.initialize(e,t)}initialize(e,t){this.nextChangeInterval=null,this.drawableBefore=e,this.drawableAfter=t,this.collapsedEmpty=!1}dispose(){this.nextChangeInterval=null,this.drawableBefore=null,this.drawableAfter=null,this.freeToPool()}constrict(){let e=!1;if(this.isEmpty())return!0;for(;this.drawableBefore&&this.drawableBefore.nextDrawable===this.drawableBefore.oldNextDrawable;)if(this.drawableBefore=this.drawableBefore.nextDrawable,e=!0,this.drawableBefore||(this.collapsedEmpty=!0),this.isEmpty())return!0;for(;this.drawableAfter&&this.drawableAfter.previousDrawable===this.drawableAfter.oldPreviousDrawable;)if(this.drawableAfter=this.drawableAfter.previousDrawable,e=!0,this.drawableAfter||(this.collapsedEmpty=!0),this.isEmpty())return!0;return e}isEmpty(){return this.collapsedEmpty||this.drawableBefore!==null&&this.drawableBefore===this.drawableAfter}getOldInternalDrawableCount(e,t){const n=this.drawableBefore?this.drawableBefore.oldNextDrawable:e,s=this.drawableAfter;let r=0;for(let a=n;a!==s;a=a.oldNextDrawable)r++;return r}getNewInternalDrawableCount(e,t){const n=this.drawableBefore?this.drawableBefore.nextDrawable:e,s=this.drawableAfter;let r=0;for(let a=n;a!==s;a=a.nextDrawable)r++;return r}static newForDisplay(e,t,n){const s=Jo.createFromPool(e,t);return n.markChangeIntervalToDispose(s),s}}es.mixInto(Jo);const Ck=pt.NOTHING.copy();class xs extends YS{initialize(e,t,n,s){return super.initialize(e,t),this.transformRootInstance=n,this.canBeFullDisplay=n.isDisplayRoot,this.preferredFit=s,this.fit=s,this.dirtyFit=!0,this.commonFitInstance=null,this.fitBounds=pt.NOTHING.copy(),this.oldFitBounds=pt.NOTHING.copy(),this.unfittableDrawableCount=0,this.dirtyFitListener=this.dirtyFitListener||this.markDirtyFit.bind(this),this.fittableListener=this.fittableListener||this.onFittabilityChange.bind(this),this.display.sizeProperty.lazyLink(this.dirtyFitListener),this}setFit(e){!this.canBeFullDisplay&&e===xs.FULL_DISPLAY&&(e=xs.COMMON_ANCESTOR),this.fit!==e&&(this.fit=e,this.markDirtyFit(),this.oldFitBounds.set(pt.NOTHING),e===xs.COMMON_ANCESTOR&&this.removeCommonFitInstance())}markDirtyFit(){this.dirtyFit=!0,this.markDirty()}updateFit(){if(!(!this.dirtyFit&&this.fit===xs.FULL_DISPLAY))if(this.dirtyFit=!1,this.fit===xs.COMMON_ANCESTOR&&this.commonFitInstance===null&&this.addCommonFitInstance(this.computeCommonAncestorInstance()),this.fit===xs.COMMON_ANCESTOR&&this.commonFitInstance.fittability.subtreeUnfittableCount>0&&this.canBeFullDisplay&&(this.oldFitBounds.set(pt.NOTHING),this.fit=xs.FULL_DISPLAY),this.fit===xs.FULL_DISPLAY)this.fitBounds.set(pt.NOTHING),this.setSizeFullDisplay();else if(this.fit===xs.COMMON_ANCESTOR){this.fitBounds.set(this.commonFitInstance.node.getLocalBounds());let e=this.commonFitInstance;for(;e!==this.transformRootInstance;)this.fitBounds.transform(e.node.getMatrix()),e=e.parent;this.fitBounds.roundOut(),this.fitBounds.dilate(4),this.transformRootInstance.isDisplayRoot&&(Ck.setMinMax(0,0,this.display.width,this.display.height),this.fitBounds.constrainBounds(Ck)),this.fitBounds.isValid()||this.fitBounds.setMinMax(0,0,0,0),this.fitBounds.equals(this.oldFitBounds)||(this.oldFitBounds.set(this.fitBounds),this.setSizeFitBounds())}else throw new Error("unknown fit")}setSizeFullDisplay(){}setSizeFitBounds(){}addCommonFitInstance(e){e&&(this.commonFitInstance=e,this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.addListener(this.dirtyFitListener))}removeCommonFitInstance(){this.commonFitInstance&&(this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.removeListener(this.dirtyFitListener),this.commonFitInstance=null)}dispose(){this.display.sizeProperty.unlink(this.dirtyFitListener),this.removeCommonFitInstance(),this.transformRootInstance=null,super.dispose()}addDrawable(e){super.addDrawable(e),e.fittableProperty.lazyLink(this.fittableListener),e.fittable||this.incrementUnfittable()}removeDrawable(e){super.removeDrawable(e),e.fittableProperty.unlink(this.fittableListener),e.fittable||this.decrementUnfittable()}onFittabilityChange(e){e?this.decrementUnfittable():this.incrementUnfittable()}incrementUnfittable(){this.unfittableDrawableCount++,this.unfittableDrawableCount===1&&this.checkFitConstraints()}decrementUnfittable(){this.unfittableDrawableCount--,this.unfittableDrawableCount===0&&this.checkFitConstraints()}checkFitConstraints(){this.unfittableDrawableCount>0&&this.canBeFullDisplay?this.setFit(xs.FULL_DISPLAY):this.setFit(this.preferredFit)}computeCommonAncestorInstance(){let e=this.firstDrawable.instance,t=this.lastDrawable.instance;const n=Math.min(e.trail.length,t.trail.length);for(;e.trail.length>n;)e=e.parent;for(;t.trail.length>n;)t=t.parent;for(;e!==t;)e=e.parent,t=t.parent;return e}onIntervalChange(e,t){super.onIntervalChange(e,t),this.fit===xs.COMMON_ANCESTOR&&(this.removeCommonFitInstance(),this.markDirtyFit())}}xs.FULL_DISPLAY=1;xs.COMMON_ANCESTOR=2;xs.fitString={1:"fullDisplay",2:"commonAncestor"};const Dk=new It,Ik=new It;class o_ extends xs{constructor(e,t,n,s){super(),this.initialize(e,t,n,s)}initialize(e,t,n,s){super.initialize(e,t,n,xs.COMMON_ANCESTOR),this.filterRootInstance=s,this.dirtyDrawables=zi(this.dirtyDrawables),this.domElement||(this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id=`scenery-canvas${this.id}`,this.context=this.canvas.getContext("2d"),this.context.save(),this.context.miterLimit=20,this.context.miterLimit=10,this.wrapper=new Ic(this.canvas,this.context),this.domElement=this.canvas,this.wrapperStack=[this.wrapper]),this.wrapperStackIndex=0,this.filterListenerCountMap=this.filterListenerCountMap||{},Qi.prepareForTransform(this.canvas),Qi.unsetTransform(this.canvas),this.canvasDrawOffset=new Oe(0,0),this.currentDrawable=null,this.clipDirty=!0,this.clipCount=0,this.backingScale=t&qe.bitmaskCanvasLowResolution?1:Qi.backingScale(this.context),this.clipDirtyListener=this.markDirty.bind(this),this.opacityDirtyListener=this.markDirty.bind(this)}setSizeFullDisplay(){const e=this.display.getSize();this.canvas.width=e.width*this.backingScale,this.canvas.height=e.height*this.backingScale,this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`,this.wrapper.resetStyles(),this.canvasDrawOffset.setXY(0,0),Qi.unsetTransform(this.canvas)}setSizeFitBounds(){const e=this.fitBounds.minX,t=this.fitBounds.minY;this.canvasDrawOffset.setXY(-e,-t),Qi.setTransform(`matrix(1,0,0,1,${e},${t})`,this.canvas),this.canvas.width=this.fitBounds.width*this.backingScale,this.canvas.height=this.fitBounds.height*this.backingScale,this.canvas.style.width=`${this.fitBounds.width}px`,this.canvas.style.height=`${this.fitBounds.height}px`,this.wrapper.resetStyles()}update(){if(!super.update())return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();this.updateFit(),this.context.restore(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.wrapper.resetStyles(),this.currentDrawable=null;for(let e=this.firstDrawable;e!==null&&(this.renderDrawable(e),e!==this.lastDrawable);e=e.nextDrawable);return this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,0),!0}applyClip(e){this.clipDirty=!1;const t=this.wrapperStack[this.wrapperStackIndex],n=t.context;if(n.restore(),n.save(),t.resetStyles(),this.clipCount){const r=e.instance.trail;Dk.rowMajor(this.backingScale,0,this.canvasDrawOffset.x*this.backingScale,0,this.backingScale,this.canvasDrawOffset.y*this.backingScale,0,0,1),Ik.set(this.transformRootInstance.trail.getMatrix()).invert(),Ik.multiplyMatrix(Dk).canvasSetTransform(n);for(let a=0;a<r.length;a++){const o=r.nodes[a];o.getMatrix().canvasAppendTransform(n),o.hasClipArea()&&(n.beginPath(),o.clipArea.writeToContext(n),n.clip())}}}pushWrapper(){if(this.wrapperStackIndex++,this.clipDirty=!0,this.wrapperStackIndex===this.wrapperStack.length){const n=document.createElement("canvas"),s=n.getContext("2d");s.save(),this.wrapperStack.push(new Ic(n,s))}const e=this.wrapperStack[this.wrapperStackIndex],t=e.context;e.setDimensions(this.canvas.width,this.canvas.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width,this.canvas.height)}popWrapper(){this.wrapperStackIndex--,this.clipDirty=!0}walkDown(e,t){const n=this.filterRootInstance.trail.length-1;for(let s=e.length-1;s>=t;s--){const r=e.nodes[s];if(r.hasClipArea()&&(this.clipCount--,this.clipDirty=!0),s>n){if(r._filters.length){const a=this.wrapperStack[this.wrapperStackIndex],o=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),o.context.setTransform(1,0,0,1,0,0);const l=r._filters;let h=mi.canvasFilter;for(let c=0;c<l.length;c++)h=h&&l[c].isDOMCompatible();if(h){let c="";for(let f=0;f<l.length;f++)c+=`${c?" ":""}${l[f].getCSSFilterString()}`;o.context.filter=c,o.context.drawImage(a.canvas,0,0),o.context.filter="none"}else{for(let c=0;c<l.length;c++)l[c].applyCanvasFilter(a);o.context.drawImage(a.canvas,0,0)}}if(r.getEffectiveOpacity()!==1){const a=this.wrapperStack[this.wrapperStackIndex],o=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),o.context.setTransform(1,0,0,1,0,0),o.context.globalAlpha=r.getEffectiveOpacity(),o.context.drawImage(a.canvas,0,0),o.context.globalAlpha=1}}}}walkUp(e,t){const n=this.filterRootInstance.trail.length-1;for(let s=t;s<e.length;s++){const r=e.nodes[s];s>n&&(r.getEffectiveOpacity()!==1&&this.pushWrapper(),r._filters.length&&this.pushWrapper()),r.hasClipArea()&&(this.clipCount++,this.clipDirty=!0)}}renderDrawable(e){if(!e.visible||this.canvas.width===0||this.canvas.height===0)return;const t=this.currentDrawable?e.instance.getBranchIndexTo(this.currentDrawable.instance):0;this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,t),this.walkUp(e.instance.trail,t);const n=this.wrapperStack[this.wrapperStackIndex],s=n.context;this.clipDirty&&this.applyClip(e);const r=e.instance.relativeTransform.matrix;s.setTransform(this.backingScale,0,0,this.backingScale,this.canvasDrawOffset.x*this.backingScale,this.canvasDrawOffset.y*this.backingScale),e.instance!==this.transformRootInstance&&r.canvasAppendTransform(s),e.paintCanvas(n,e.instance.node,e.instance.relativeTransform.matrix),this.currentDrawable=e}dispose(){this.transformRootInstance=null,zi(this.dirtyDrawables),this.canvas.width=0,this.canvas.height=0,super.dispose()}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}addDrawable(e){super.addDrawable(e);for(let t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){const n=t.node;this.filterListenerCountMap[n.id]?this.filterListenerCountMap[n.id]++:(this.filterListenerCountMap[n.id]=1,n.filterChangeEmitter.addListener(this.opacityDirtyListener),n.clipAreaProperty.lazyLink(this.clipDirtyListener))}}removeDrawable(e){for(let t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){const n=t.node;this.filterListenerCountMap[n.id]--,this.filterListenerCountMap[n.id]===0&&(delete this.filterListenerCountMap[n.id],n.clipAreaProperty.unlink(this.clipDirtyListener),n.filterChangeEmitter.removeListener(this.opacityDirtyListener))}super.removeDrawable(e)}onIntervalChange(e,t){super.onIntervalChange(e,t),this.markDirty()}onPotentiallyMovedDrawable(e){e.markDirty()}toString(){return`CanvasBlock#${this.id}-${xs.fitString[this.fit]}`}}es.mixInto(o_);class jS extends YS{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return super.initialize(e,t.renderer),this.domDrawable=t,this.domElement=t.domElement,this}update(){return super.update()?(this.domDrawable.update(),!0):!1}dispose(){this.domDrawable=null,this.domElement=null,super.dispose()}markDirtyDrawable(e){this.markDirty()}addDrawable(e){super.addDrawable(e)}removeDrawable(e){super.removeDrawable(e)}}es.mixInto(jS);class YX{constructor(e,t){this.create=e,this.destroy=t,this.map=new Map}increment(e,t=1){if(this.map.has(e))this.map.get(e).count+=t;else{const n=this.create(e),s=$2.createFromPool(t,e,n);this.map.set(e,s)}}decrement(e,t=1){const n=this.map.get(e);n&&(n.count-=t,n.count<1&&(this.destroy(e,n.value),this.map.delete(e),n.dispose()))}get(e){return this.map.get(e).value}clear(){this.map.clear()}}class $2{constructor(e,t,n){this.initialize(e,t,n)}initialize(e,t,n){this.count=e,this.key=t,this.value=n}dispose(){this.key=null,this.value=null,this.freeToPool()}}es.mixInto($2,{initialize:$2.prototype.initialize});let jX=1,XX=1;class Ol{constructor(e,t,n){this.id=`group${jX++}`,this.initialize(e,t,n)}initialize(e,t,n){this.block=e,this.instance=t,this.node=t.trail.lastNode(),this.parent=n,this.children=zi(this.children),this.hasSelfDrawable=!1,this.selfDrawable=null,this.dirty=!0,this.willApplyTransforms=this.block.transformRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.willApplyFilters=this.block.filterRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.transformDirty=!0,this.hasTransform=this.hasTransform!==void 0?this.hasTransform:!1,this.transformDirtyListener=this.transformDirtyListener||this.markTransformDirty.bind(this),this.willApplyTransforms&&this.node.transformEmitter.addListener(this.transformDirtyListener),this.filterDirty=!0,this.visibilityDirty=!0,this.clipDirty=!0,this.filterElement=this.filterElement||null,this.hasOpacity=this.hasOpacity!==void 0?this.hasOpacity:!1,this.hasFilter=!1,this.clipDefinition=this.clipDefinition!==void 0?this.clipDefinition:null,this.clipPath=this.clipPath!==void 0?this.clipPath:null,this.filterChangeListener=this.filterChangeListener||this.onFilterChange.bind(this),this.visibilityDirtyListener=this.visibilityDirtyListener||this.onVisibleChange.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipChange.bind(this),this.node.visibleProperty.lazyLink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.addListener(this.filterChangeListener),this.node.clipAreaProperty.lazyLink(this.clipDirtyListener),this.orderDirty=!0,this.orderDirtyListener=this.orderDirtyListener||this.markOrderDirty.bind(this),this.node.childrenChangedEmitter.addListener(this.orderDirtyListener),this.svgGroup||(this.svgGroup=document.createElementNS(Kn,"g")),this.instance.addSVGGroup(this),this.block.markDirtyGroup(this)}addSelfDrawable(e){this.selfDrawable=e,this.svgGroup.insertBefore(e.svgElement,this.children.length?this.children[0].svgGroup:null),this.hasSelfDrawable=!0}removeSelfDrawable(e){this.hasSelfDrawable=!1,this.svgGroup.removeChild(e.svgElement),this.selfDrawable=null}addChildGroup(e){this.markOrderDirty(),e.parent=this,this.children.push(e),this.svgGroup.appendChild(e.svgGroup)}removeChildGroup(e){this.markOrderDirty(),e.parent=null,this.children.splice(ie.indexOf(this.children,e),1),this.svgGroup.removeChild(e.svgGroup)}markDirty(){this.dirty||(this.dirty=!0,this.block.markDirtyGroup(this))}markOrderDirty(){this.orderDirty||(this.orderDirty=!0,this.markDirty())}markTransformDirty(){this.transformDirty||(this.transformDirty=!0,this.markDirty())}onFilterChange(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}onVisibleChange(){this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}onClipChange(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}update(){if(!this.block)return;const e=this.svgGroup;if(this.dirty=!1,this.transformDirty&&(this.transformDirty=!1,this.willApplyTransforms?this.node.transform.isIdentity()?this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform")):(this.hasTransform=!0,e.setAttribute("transform",this.node.transform.getMatrix().getSVGTransform())):this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform"))),this.visibilityDirty&&(this.visibilityDirty=!1,e.style.display=this.node.isVisible()?"":"none"),this.filterDirty){this.filterDirty=!1;const t=this.node.effectiveOpacity;this.willApplyFilters&&t!==1?(this.hasOpacity=!0,e.setAttribute("opacity",t)):this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity"));const n=this.willApplyFilters&&this.node._filters.length,s=`filter-${this.id}`;if(n){for(this.filterElement||(this.filterElement=document.createElementNS(Kn,"filter"),this.filterElement.setAttribute("id",s));this.filterElement.firstChild;)this.filterElement.removeChild(this.filterElement.lastChild);let r=50,a="SourceGraphic";const o=this.node._filters.length;for(let c=0;c<o;c++){const f=this.node._filters[c],g=c===o-1?void 0:`e${c}`;f.applySVGFilter(this.filterElement,a,g),r+=f.filterRegionPercentageIncrease,a=g}const l=`-${En(r)}%`,h=`${En(2*r+100)}%`;this.filterElement.setAttribute("x",l),this.filterElement.setAttribute("y",l),this.filterElement.setAttribute("width",h),this.filterElement.setAttribute("height",h)}n&&(this.hasFilter||this.block.defs.appendChild(this.filterElement),e.setAttribute("filter",`url(#${s})`),this.hasFilter=!0),this.hasFilter&&!n&&(e.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement))}if(this.clipDirty)if(this.clipDirty=!1,this.node.clipArea){if(!this.clipDefinition){const t=`clip${XX++}`;this.clipDefinition=document.createElementNS(Kn,"clipPath"),this.clipDefinition.setAttribute("id",t),this.clipDefinition.setAttribute("clipPathUnits","userSpaceOnUse"),this.block.defs.appendChild(this.clipDefinition),this.clipPath=document.createElementNS(Kn,"path"),this.clipDefinition.appendChild(this.clipPath),e.setAttribute("clip-path",`url(#${t})`)}this.clipPath.setAttribute("d",this.node.clipArea.getSVGPath())}else this.clipDefinition&&(e.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null);if(this.orderDirty){this.orderDirty=!1;let t=this.children.length-1;const n=this.instance.children;for(let s=n.length-1;s>=0;s--){const r=n[s].lookupSVGGroup(this.block);if(r){if(this.children[t]!==r){e.insertBefore(r.svgGroup,t+1>=this.children.length?null:this.children[t+1].svgGroup);const a=ie.indexOf(this.children,r);this.children.splice(a,1),this.children.splice(t,0,r)}t--}}}}isReleasable(){return!this.hasSelfDrawable&&!this.children.length&&this.parent}dispose(){this.hasFilter&&(this.svgGroup.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement)),this.willApplyTransforms&&this.node.transformEmitter.removeListener(this.transformDirtyListener),this.node.visibleProperty.unlink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.removeListener(this.filterChangeListener),this.node.clipAreaProperty.unlink(this.clipDirtyListener),this.node.childrenChangedEmitter.removeListener(this.orderDirtyListener),this.instance.active&&this.instance.removeSVGGroup(this),this.clipDefinition&&(this.svgGroup.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null),this.parent=null,this.block=null,this.instance=null,this.node=null,zi(this.children),this.selfDrawable=null,this.freeToPool()}toString(){return`SVGGroup:${this.block.toString()}_${this.instance.toString()}`}static addDrawable(e,t){Ol.ensureGroupsToInstance(e,t.instance).addSelfDrawable(t)}static removeDrawable(e,t){t.instance.lookupSVGGroup(e).removeSelfDrawable(t),Ol.releaseGroupsToInstance(e,t.instance)}static ensureGroupsToInstance(e,t){let n=t.lookupSVGGroup(e);if(!n){const s=Ol.ensureGroupsToInstance(e,t.parent);n=Ol.createFromPool(e,t,s),s.addChildGroup(n)}return n}static releaseGroupsToInstance(e,t){const n=t.lookupSVGGroup(e);if(n.isReleasable()){const s=n.parent;s.removeChildGroup(n),Ol.releaseGroupsToInstance(e,s.instance),n.dispose()}}}es.mixInto(Ol);class jM extends xs{constructor(e,t,n,s){super(),this.initialize(e,t,n,s)}initialize(e,t,n,s){super.initialize(e,t,n,xs.COMMON_ANCESTOR),this.filterRootInstance=s,this.dirtyGradients=zi(this.dirtyGradients),this.dirtyGroups=zi(this.dirtyGroups),this.dirtyDrawables=zi(this.dirtyDrawables),this.paintCountMap=this.paintCountMap||new YX(this.onAddPaint.bind(this),this.onRemovePaint.bind(this)),this.areReferencesReduced=!0,this.domElement||(this.svg=document.createElementNS(Kn,"svg"),this.svg.style.pointerEvents="none",this.svg.style.position="absolute",this.svg.style.left="0",this.svg.style.top="0",this.svg.setAttribute("focusable",!1),this.defs=document.createElementNS(Kn,"defs"),this.svg.appendChild(this.defs),this.baseTransformGroup=document.createElementNS(Kn,"g"),this.svg.appendChild(this.baseTransformGroup),this.domElement=this.svg),this.forceRefreshListener=()=>{if(!this.workaroundRect){const h=document.createElementNS(Kn,"g");this.svg.appendChild(h),this.workaroundRect=document.createElementNS(Kn,"rect"),this.workaroundRect.setAttribute("width","0"),this.workaroundRect.setAttribute("height","0"),this.workaroundRect.setAttribute("fill","none"),h.appendChild(this.workaroundRect)}const a=ol.nextIntBetween(0,255),o=ol.nextIntBetween(0,255),l=ol.nextIntBetween(0,255);this.workaroundRect.setAttribute("fill",`rgba(${a},${o},${l},0.02)`)},this.display._refreshSVGEmitter.addListener(this.forceRefreshListener),Qi.prepareForTransform(this.svg),Qi.unsetTransform(this.svg),this.baseTransformGroup.setAttribute("transform","");const r=n.trail.nodes.length>s.trail.nodes.length?s:n;return this.rootGroup=Ol.createFromPool(this,r,null),this.baseTransformGroup.appendChild(this.rootGroup.svgGroup),this}onAddPaint(e){const t=e.createSVGPaint(this);return t.definition.setAttribute("id",`${e.id}-${this.id}`),this.defs.appendChild(t.definition),t}onRemovePaint(e,t){this.defs.removeChild(t.definition),t.dispose()}incrementPaint(e){this.paintCountMap.increment(e)}decrementPaint(e){this.paintCountMap.decrement(e)}markDirtyGradient(e){this.dirtyGradients.push(e),this.markDirty()}markDirtyGroup(e){this.dirtyGroups.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}setSizeFullDisplay(){this.baseTransformGroup.removeAttribute("transform"),Qi.unsetTransform(this.svg);const e=this.display.getSize();this.svg.setAttribute("width",e.width),this.svg.setAttribute("height",e.height)}setSizeFitBounds(){const e=this.fitBounds.minX,t=this.fitBounds.minY;this.baseTransformGroup.setAttribute("transform",`translate(${-e},${-t})`),Qi.setTransform(`matrix(1,0,0,1,${e},${t})`,this.svg),this.svg.setAttribute("width",this.fitBounds.width),this.svg.setAttribute("height",this.fitBounds.height)}update(){if(!super.update())return!1;for(;this.dirtyGroups.length;){const e=this.dirtyGroups.pop();e.block===this&&e.update()}for(;this.dirtyGradients.length;)this.dirtyGradients.pop().update();for(;this.dirtyDrawables.length;){const e=this.dirtyDrawables.pop();e.parentDrawable===this&&e.update()}return this.areReferencesReduced=!0,this.updateFit(),!0}reduceReferences(){if(this.areReferencesReduced)return;let e=0,t=0;for(;e<this.dirtyGroups.length;){const n=this.dirtyGroups[e];n.block===this&&(t!==e&&(this.dirtyGroups[t]=n),t++),e++}for(;this.dirtyGroups.length>t;)this.dirtyGroups.pop();for(e=0,t=0;e<this.dirtyDrawables.length;){const n=this.dirtyDrawables[e];n.parentDrawable===this&&(t!==e&&(this.dirtyDrawables[t]=n),t++),e++}for(;this.dirtyDrawables.length>t;)this.dirtyDrawables.pop();this.areReferencesReduced=!0}dispose(){for(this.svg.setAttribute("width","0"),this.svg.setAttribute("height","0"),this.filterRootInstance=null,zi(this.dirtyGradients),zi(this.dirtyGroups),zi(this.dirtyDrawables),this.paintCountMap.clear(),this.display._refreshSVGEmitter.removeListener(this.forceRefreshListener),this.baseTransformGroup.removeChild(this.rootGroup.svgGroup),this.rootGroup.dispose(),this.rootGroup=null;this.defs.childNodes.length;)this.defs.removeChild(this.defs.childNodes[0]);super.dispose()}addDrawable(e){super.addDrawable(e),Ol.addDrawable(this,e),e.updateSVGBlock(this)}removeDrawable(e){Ol.removeDrawable(this,e),super.removeDrawable(e)}onIntervalChange(e,t){super.onIntervalChange(e,t)}toString(){return`SVGBlock#${this.id}-${xs.fitString[this.fit]}`}}es.mixInto(jM);class XM{constructor(e,t,n,s){const r=Ne()({attributes:[],uniforms:[]},s);this.vertexSource=t,this.fragmentSource=n,this.attributeNames=r.attributes,this.uniformNames=r.uniforms,this.initialize(e)}initialize(e){this.gl=e,this.used=!1,this.program=this.gl.createProgram(),this.vertexShader=Qi.createShader(this.gl,this.vertexSource,this.gl.VERTEX_SHADER),this.fragmentShader=Qi.createShader(this.gl,this.fragmentSource,this.gl.FRAGMENT_SHADER),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||(console.log("GLSL link error:"),console.log(this.gl.getProgramInfoLog(this.program)),console.log("for vertex shader"),console.log(this.vertexSource),console.log("for fragment shader"),console.log(this.fragmentSource)),this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),this.uniformLocations={},this.attributeLocations={},this.activeAttributes={},ie.each(this.attributeNames,t=>{this.attributeLocations[t]=this.gl.getAttribLocation(this.program,t),this.activeAttributes[t]=!0}),ie.each(this.uniformNames,t=>{this.uniformLocations[t]=this.gl.getUniformLocation(this.program,t)}),this.isInitialized=!0}use(){this.used||(this.used=!0,this.gl.useProgram(this.program),ie.each(this.attributeNames,e=>{this.activeAttributes[e]&&this.enableVertexAttribArray(e)}))}activateAttribute(e){this.activeAttributes[e]||(this.activeAttributes[e]=!0,this.used&&this.enableVertexAttribArray(e))}enableVertexAttribArray(e){this.gl.enableVertexAttribArray(this.attributeLocations[e])}unuse(){this.used&&(this.used=!1,ie.each(this.attributeNames,e=>{this.activeAttributes[e]&&this.disableVertexAttribArray(e)}))}disableVertexAttribArray(e){this.gl.disableVertexAttribArray(this.attributeLocations[e])}deactivateAttribute(e){this.activeAttributes[e]&&(this.activeAttributes[e]=!1,this.used&&this.disableVertexAttribArray(e))}dispose(){this.gl.deleteProgram(this.program)}}class XS extends xs{constructor(e,t,n,s){super(),this.initialize(e,t,n,s)}initialize(e,t,n,s){return super.initialize(e,t,n,xs.FULL_DISPLAY),this.filterRootInstance=s,this.preserveDrawingBuffer=e._preserveDrawingBuffer,this.dirtyDrawables=zi(this.dirtyDrawables),this.spriteSheets=this.spriteSheets||[],this.projectionMatrix=this.projectionMatrix||new It,this.projectionMatrixArray=new Float32Array(9),this.customProcessor=this.customProcessor||new QX,this.vertexColorPolygonsProcessor=this.vertexColorPolygonsProcessor||new JX(this.projectionMatrixArray),this.texturedTrianglesProcessor=this.texturedTrianglesProcessor||new ZX(this.projectionMatrixArray),this.glChangedEmitter=new un,this.isContextLost=!1,this.contextLostListener=this.onContextLoss.bind(this),this.contextRestoreListener=this.onContextRestoration.bind(this),this.domElement||(this.domElement=document.createElement("div"),this.domElement.className="webgl-container",this.domElement.style.position="absolute",this.domElement.style.left="0",this.domElement.style.top="0",this.rebuildCanvas()),this.gl.clear(this.gl.COLOR_BUFFER_BIT),Qi.prepareForTransform(this.canvas),Qi.unsetTransform(this.canvas),this}rebuildCanvas(){const e=document.createElement("canvas"),t=this.getContextFromCanvas(e);t&&(this.canvas&&(this.domElement.removeChild(this.canvas),this.canvas.removeEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoreListener,!1)),this.canvas=e,this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id=`scenery-webgl${this.id}`,this.canvas.addEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoreListener,!1),this.domElement.appendChild(this.canvas),this.setupContext(t))}setupContext(e){this.isContextLost=!1,this.gl=e,this.backingScale=Qi.backingScale(this.gl),this.display._allowBackingScaleAntialiasing&&e.getParameter(e.SAMPLES)===0&&(this.backingScale*=2),this.originalBackingScale=this.backingScale,Qi.applyWebGLContextDefaults(this.gl),this.markDirty(),this.dirtyFit=!0,this.customProcessor.initializeContext(this.gl),this.vertexColorPolygonsProcessor.initializeContext(this.gl),this.texturedTrianglesProcessor.initializeContext(this.gl);for(let t=0;t<this.spriteSheets.length;t++)this.spriteSheets[t].initializeContext(this.gl);this.glChangedEmitter.emit()}delayedRebuildCanvas(){const e=this;self.setTimeout(function(){e.rebuildCanvas()})}onContextLoss(e){this.isContextLost||(this.isContextLost=!0,e.preventDefault(),this.canvas.style.display="none",this.markDirty())}onContextRestoration(e){if(this.isContextLost){const t=this.getContextFromCanvas(this.canvas);this.setupContext(t),this.canvas.style.display=""}}getContextFromCanvas(e){const t={antialias:!0,preserveDrawingBuffer:this.preserveDrawingBuffer};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)}setSizeFullDisplay(){const e=this.display.getSize();this.canvas.width=Math.ceil(e.width*this.backingScale),this.canvas.height=Math.ceil(e.height*this.backingScale),this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`}setSizeFitBounds(){throw new Error("setSizeFitBounds unimplemented for WebGLBlock")}update(){if(!super.update())return!1;const e=this.gl;for(this.isContextLost&&this.display._aggressiveContextRecreation&&this.delayedRebuildCanvas();this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();const t=this.spriteSheets.length;for(let r=0;r<t;r++)this.spriteSheets[r].updateTexture();this.firstDrawable&&this.firstDrawable===this.lastDrawable&&this.firstDrawable.node&&this.firstDrawable.node._webglScale!==null&&this.backingScale!==this.originalBackingScale*this.firstDrawable.node._webglScale&&(this.backingScale=this.originalBackingScale*this.firstDrawable.node._webglScale,this.dirtyFit=!0),this.updateFit(),this.projectionMatrix.rowMajor(2/this.display.width,0,-1,0,-2/this.display.height,1,0,0,1),this.projectionMatrix.copyToArray(this.projectionMatrixArray),this.preserveDrawingBuffer&&e.clear(e.COLOR_BUFFER_BIT),e.viewport(0,0,this.canvas.width,this.canvas.height);let n=null,s=0;for(let r=this.firstDrawable;r!==null;r=r.nextDrawable){if(r.visible){let a=null;r.webglRenderer===qe.webglTexturedTriangles?a=this.texturedTrianglesProcessor:r.webglRenderer===qe.webglCustom?a=this.customProcessor:r.webglRenderer===qe.webglVertexColorPolygons&&(a=this.vertexColorPolygonsProcessor),a!==n&&(n&&(s+=n.deactivate()),n=a,n.activate()),n.processDrawable(r)}if(r===this.lastDrawable)break}return n&&(s+=n.deactivate()),s===0&&!this.preserveDrawingBuffer&&e.clear(e.COLOR_BUFFER_BIT),e.flush(),!0}dispose(){zi(this.dirtyDrawables),super.dispose()}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}addDrawable(e){super.addDrawable(e),e.onAddToBlock(this)}removeDrawable(e){let t=0;for(;(t=this.dirtyDrawables.indexOf(e,t))>=0;)this.dirtyDrawables.splice(t,1);e.onRemoveFromBlock(this),super.removeDrawable(e)}addSpriteSheetImage(e,t,n){let s=null;const r=this.spriteSheets.length;for(let a=0;a<r&&(s=this.spriteSheets[a].addImage(e,t,n),!s);a++);if(!s){const a=new sg(!0);if(s=a.addImage(e,t,n),a.initializeContext(this.gl),this.spriteSheets.push(a),!s)throw new Error("Attempt to load image that is too large for sprite sheets")}return s}removeSpriteSheetImage(e){e.spriteSheet.removeImage(e.image)}onIntervalChange(e,t){super.onIntervalChange(e,t),this.markDirty()}onPotentiallyMovedDrawable(e){this.markDirty()}toString(){return`WebGLBlock#${this.id}-${xs.fitString[this.fit]}`}}class QS{activate(){}initializeContext(e){}processDrawable(e){}deactivate(){}}class QX extends QS{constructor(){super(),this.drawable=null}activate(){this.drawCount=0}processDrawable(e){this.drawable=e,this.draw()}deactivate(){return this.drawCount}draw(){if(this.drawable){const e=this.drawable.draw();this.drawCount+=e,this.drawable=null}}}class JX extends QS{constructor(e){super(),this.projectionMatrixArray=e,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)}initializeContext(e){this.gl=e,this.shaderProgram=new XM(e,["attribute vec2 aVertex;","attribute vec4 aColor;","varying vec4 vColor;","uniform mat3 uProjectionMatrix;","void main() {","  vColor = aColor;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join(`
`),["precision mediump float;","varying vec4 vColor;","void main() {","  gl_FragColor = vec4( vColor.rgb * vColor.a, vColor.a );","}"].join(`
`),{attributes:["aVertex","aColor"],uniforms:["uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}activate(){this.shaderProgram.use(),this.vertexArrayIndex=0,this.drawCount=0}processDrawable(e){if(e.includeVertices){const t=e.vertexArray;for(;t.length+this.vertexArrayIndex>this.vertexArray.length;){const n=new Float32Array(this.vertexArray.length*2);n.set(this.vertexArray),this.vertexArray=n}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length,this.drawCount++}}deactivate(){return this.drawCount&&this.draw(),this.shaderProgram.unuse(),this.drawCount}draw(){const e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const t=Float32Array.BYTES_PER_ELEMENT,n=6*t;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,n,0*t),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aColor,4,e.FLOAT,!1,n,2*t),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/6),this.vertexArrayIndex=0}}class ZX extends QS{constructor(e){super(),this.projectionMatrixArray=e,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)}initializeContext(e){this.gl=e,this.shaderProgram=new XM(e,["attribute vec2 aVertex;","attribute vec2 aTextureCoord;","attribute float aAlpha;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform mat3 uProjectionMatrix;","void main() {","  vTextureCoord = aTextureCoord;","  vAlpha = aAlpha;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join(`
`),["precision mediump float;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform sampler2D uTexture;","void main() {","  vec4 color = texture2D( uTexture, vTextureCoord, -0.7 );","  color.a *= vAlpha;","  gl_FragColor = color;","}"].join(`
`),{attributes:["aVertex","aTextureCoord","aAlpha"],uniforms:["uTexture","uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}activate(){this.shaderProgram.use(),this.currentSpriteSheet=null,this.vertexArrayIndex=0,this.drawCount=0}processDrawable(e){if(!e.sprite)return;this.currentSpriteSheet&&e.sprite.spriteSheet!==this.currentSpriteSheet&&this.draw(),this.currentSpriteSheet=e.sprite.spriteSheet;const t=e.vertexArray;for(;t.length+this.vertexArrayIndex>this.vertexArray.length;){const n=new Float32Array(this.vertexArray.length*2);n.set(this.vertexArray),this.vertexArray=n}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length}deactivate(){return this.currentSpriteSheet&&this.draw(),this.shaderProgram.unuse(),this.drawCount}draw(){const e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const t=5,n=Float32Array.BYTES_PER_ELEMENT,s=t*n;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,s,0*n),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aTextureCoord,2,e.FLOAT,!1,s,2*n),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aAlpha,1,e.FLOAT,!1,s,4*n),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.currentSpriteSheet.texture),e.uniform1i(this.shaderProgram.uniformLocations.uTexture,0),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/t),e.bindTexture(e.TEXTURE_2D,null),this.drawCount++,this.currentSpriteSheet=null,this.vertexArrayIndex=0}}es.mixInto(XS);class $X{initialize(e,t,n,s,r,a,o){this.backbone=e,this.firstDrawable=t,this.lastDrawable=n,this.touchedBlocks=zi(this.touchedBlocks)}clean(){this.backbone=null,this.firstDrawable=null,this.lastDrawable=null}recordBackboneBoundaries(){this.backbone.previousFirstDrawable=this.firstDrawable,this.backbone.previousLastDrawable=this.lastDrawable}notePendingAddition(e,t){e.notePendingAddition(this.backbone.display,t,this.backbone)}notePendingMove(e,t){e.notePendingMove(this.backbone.display,t)}notePendingRemoval(e){e.notePendingRemoval(this.backbone.display)}markBlockForDisposal(e){e.domElement.parentNode===this.backbone.domElement&&this.backbone.domElement.removeChild(e.domElement),e.markForDisposal(this.backbone.display)}removeAllBlocks(){for(;this.backbone.blocks.length;){const e=this.backbone.blocks[0];this.removeBlock(e),this.markBlockForDisposal(e)}}notifyInterval(e,t,n){e.notifyInterval(t,n),this.backbone.markDirtyDrawable(e)}markBeforeBlock(e,t){e.pendingFirstDrawable=t,this.touchedBlocks.push(e)}markAfterBlock(e,t){e.pendingLastDrawable=t,this.touchedBlocks.push(e)}updateBlockIntervals(){for(;this.touchedBlocks.length;){const e=this.touchedBlocks.pop();e.used&&(e.updateInterval(),this.backbone.markDirtyDrawable(e))}}createBlock(e,t){const n=this.backbone;let s;if(qe.isCanvas(e))s=o_.createFromPool(n.display,e,n.transformRootInstance,n.backboneInstance);else if(qe.isSVG(e))s=jM.createFromPool(n.display,e,n.transformRootInstance,n.backboneInstance);else if(qe.isDOM(e))s=jS.createFromPool(n.display,t);else if(qe.isWebGL(e))s=XS.createFromPool(n.display,e,n.transformRootInstance,n.backboneInstance);else throw new Error(`unsupported renderer for createBlock: ${e}`);return s.setBlockBackbone(n),n.domElement.appendChild(s.domElement),n.isDisplayRoot&&s.domElement.setAttribute("aria-hidden",!0),n.markDirtyDrawable(s),s}appendBlock(e){this.backbone.blocks.push(e)}removeBlock(e){const t=ie.indexOf(this.backbone.blocks,e);this.backbone.blocks.splice(t,1)}useNoBlocks(){zi(this.backbone.blocks)}reindex(){this.backbone.reindexBlocks()}auditStitch(){}static debugIntervals(e){}static debugDrawables(e,t,n,s,r){}}function Bv(i,e){return i.renderer!==e.renderer||qe.isDOM(i.renderer)||qe.isDOM(e.renderer)}function OA(i){return i.previousDrawable!==null&&!Bv(i.previousDrawable,i)}function NA(i){return i.nextDrawable!==null&&!Bv(i,i.nextDrawable)}function eQ(i,e,t){return i.drawableBefore?i.drawableBefore.nextDrawable!==i.drawableAfter:i.drawableAfter?i.drawableAfter.previousDrawable!==i.drawableBefore:e!==null}function tQ(i,e,t){return i.drawableBefore?i.drawableBefore.oldNextDrawable!==i.drawableAfter:i.drawableAfter?i.drawableAfter.oldPreviousDrawable!==i.drawableBefore:e!==null}function iQ(i,e,t){const n=i.drawableBefore?i.drawableBefore.parentDrawable:null,s=i.drawableAfter?i.drawableAfter.parentDrawable:null;return n&&s&&n===s?!1:n?n.nextBlock!==s:s?s.previousBlock!==n:e!==null}function nQ(i){const e=i.drawableAfter;if(e){const t=e.renderer,n=i.nextChangeInterval?i.nextChangeInterval.drawableBefore.nextDrawable:null;let s=e;for(;;){const r=s.nextDrawable;if(r!==n&&r.renderer===t)s=r;else break}return s}else return null}class sQ extends $X{stitch(e,t,n,s,r,a,o){this.initialize(e,t,n,s,r,a,o),this.blockOrderChanged=!1,this.reusableBlocks=zi(this.reusableBlocks),this.blockWasAdded=!1;let l;if(this.recordBackboneBoundaries(),e.blocks.length){const h=e.blocks[0];for(e.blocks[e.blocks.length-1],l=a;l!==null;l=l.nextChangeInterval){if(tQ(l,s)){const c=l.drawableBefore?l.drawableBefore.oldNextDrawable:s,f=l.drawableAfter?l.drawableAfter.oldPreviousDrawable:r;for(let g=c;this.notePendingRemoval(g),g!==f;g=g.oldNextDrawable);}if(iQ(l,h)){const c=l.drawableBefore===null?e.blocks[0]:l.drawableBefore.parentDrawable.nextBlock,f=l.drawableAfter===null?e.blocks[e.blocks.length-1]:l.drawableAfter.parentDrawable.previousBlock;for(let g=c;this.unuseBlock(g),g!==f;g=g.nextBlock);}}}if(t)for(l=a;l!==null;l=l.nextChangeInterval)this.processInterval(e,l,t,n);this.removeUnusedBlocks(),this.updateBlockIntervals(),t===null?this.useNoBlocks():this.blockOrderChanged&&(this.processBlockLinkedList(e,t.pendingParentDrawable,n.pendingParentDrawable),this.reindex()),this.clean(),zi(this.reusableBlocks)}processInterval(e,t,n,s){if(eQ(t,n)){let r=t.drawableBefore?t.drawableBefore.nextDrawable:n,a=null,o=null,l=!0;for(;;){const h=r.nextDrawable,c=h===t.drawableAfter;if(a||(a=r),o===null&&r.parentDrawable&&!r.parentDrawable.used&&r.backbone===e&&r.parentDrawable.parentDrawable===e&&(o=r.parentDrawable),(c||Bv(r,h))&&(l&&this.processEdgeCases(t,OA(a),NA(r)),this.processSubBlock(t,a,r,o,l,c),a=null,o=null,l=!1),c)break;r=h}}else{if(t.drawableBefore&&t.drawableAfter){const r=!Bv(t.drawableBefore,t.drawableAfter);this.processEdgeCases(t,r,r)}t.drawableBefore&&!NA(t.drawableBefore)?this.linkAfterDrawable(t.drawableBefore):t.drawableAfter&&!OA(t.drawableAfter)&&this.linkBeforeDrawable(t.drawableAfter)}}processSubBlock(e,t,n,s,r,a){const o=OA(t),l=NA(n);o&&(s=t.previousDrawable.pendingParentDrawable),l&&(s=n.nextDrawable.pendingParentDrawable),s=this.ensureUsedBlock(s,t);for(let h=t;this.notePendingAddition(h,s),h!==n;h=h.nextDrawable);o||this.linkBeforeDrawable(t),a&&!l&&this.linkAfterDrawable(n)}processEdgeCases(e,t,n){if(e.drawableBefore!==null&&e.drawableAfter!==null){const s=e.drawableBefore.pendingParentDrawable,r=e.drawableAfter.pendingParentDrawable,a=e.nextChangeInterval&&e.nextChangeInterval.drawableAfter?e.nextChangeInterval.drawableAfter.pendingParentDrawable:null;s===r&&(this.blockWasAdded=!0);let o;t&&n?o=s:this.blockWasAdded||s===r?(o=this.createBlock(e.drawableAfter.renderer,e.drawableAfter),this.blockOrderChanged=!0):o=r,r===o?this.blockWasAdded=!0:this.changeExternals(e,o),a!==r&&(this.blockWasAdded||this.unuseBlock(r),this.blockWasAdded=!1)}}changeExternals(e,t){const n=nQ(e);this.notePendingMoves(t,e.drawableAfter,n),(!e.nextChangeInterval||e.nextChangeInterval.drawableBefore!==n)&&this.linkAfterDrawable(n)}notePendingMoves(e,t,n){for(let s=t;this.notePendingMove(s,e),s!==n;s=s.nextDrawable);}ensureUsedBlock(e,t){return e?e.used||this.useBlock(e):e=this.getBlockForRenderer(t.renderer,t),e}getBlockForRenderer(e,t){let n;if(!qe.isDOM(e))for(let s=this.reusableBlocks.length-1;s>=0;s--){const r=this.reusableBlocks[s];if(r.renderer===e){this.useBlockAtIndex(r,s),n=r;break}}return n||(n=this.createBlock(e,t)),this.blockOrderChanged=!0,n}unuseBlock(e){e.used&&(e.used=!1,this.reusableBlocks.push(e))}useBlock(e){this.useBlockAtIndex(e,ie.indexOf(this.reusableBlocks,e))}useBlockAtIndex(e,t){this.reusableBlocks.splice(t,1),e.used=!0}removeUnusedBlocks(){for(;this.reusableBlocks.length;){const e=this.reusableBlocks.pop();this.markBlockForDisposal(e),this.blockOrderChanged=!0}}linkBeforeDrawable(e){const t=e.previousDrawable;this.linkBlocks(t?t.pendingParentDrawable:null,e.pendingParentDrawable,t,e)}linkAfterDrawable(e){const t=e.nextDrawable;this.linkBlocks(e.pendingParentDrawable,t?t.pendingParentDrawable:null,e,t)}linkBlocks(e,t,n,s){e&&(e.nextBlock!==t&&(this.blockOrderChanged=!0,e.nextBlock&&(e.nextBlock.previousBlock=null),e.nextBlock=t),this.markAfterBlock(e,n)),t&&(t.previousBlock!==e&&(this.blockOrderChanged=!0,t.previousBlock&&(t.previousBlock.nextBlock=null),t.previousBlock=e),this.markBeforeBlock(t,s))}processBlockLinkedList(e,t,n){for(;e.blocks.length;)e.blocks.pop();if(t)for(let s=t;e.blocks.push(s),s!==n;s=s.nextBlock);}}class Nh extends to{constructor(e,t,n,s,r){super(),this.initialize(e,t,n,s,r)}initialize(e,t,n,s,r){if(super.initialize(s),this.display=e,this.backboneInstance=t,this.transformRootInstance=n,this.filterRootAncestorInstance=t.parent?t.parent.getFilterRootInstance():t,this.transformRootAncestorInstance=t.parent?t.parent.getTransformRootInstance():t,this.willApplyTransform=this.transformRootAncestorInstance!==this.transformRootInstance,this.willApplyFilters=this.filterRootAncestorInstance!==this.backboneInstance,this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.willApplyTransform&&(this.backboneInstance.relativeTransform.addListener(this.transformListener),this.backboneInstance.relativeTransform.addPrecompute()),this.backboneVisibilityListener=this.backboneVisibilityListener||this.updateBackboneVisibility.bind(this),this.backboneInstance.relativeVisibleEmitter.addListener(this.backboneVisibilityListener),this.updateBackboneVisibility(),this.visibilityDirty=!0,this.renderer=s,this.domElement=r?e.domElement:Nh.createDivBackbone(),this.isDisplayRoot=r,this.dirtyDrawables=zi(this.dirtyDrawables),Qi.prepareForTransform(this.domElement),this.watchedFilterNodes=zi(this.watchedFilterNodes),this.filterDirty=!0,this.clipDirty=!0,this.filterDirtyListener=this.filterDirtyListener||this.onFilterDirty.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipDirty.bind(this),this.willApplyFilters)for(let a=this.backboneInstance;a!==this.filterRootAncestorInstance;a=a.parent){const o=a.node;this.watchedFilterNodes.push(o),o.filterChangeEmitter.addListener(this.filterDirtyListener),o.clipAreaProperty.lazyLink(this.clipDirtyListener)}this.lastZIndex=0,this.blocks=this.blocks||[],this.previousFirstDrawable=null,this.previousLastDrawable=null,this.removedDrawables=!1,this.stitcher=this.stitcher||new sQ}dispose(){for(;this.watchedFilterNodes.length;){const e=this.watchedFilterNodes.pop();e.filterChangeEmitter.removeListener(this.filterDirtyListener),e.clipAreaProperty.unlink(this.clipDirtyListener)}if(this.backboneInstance.relativeVisibleEmitter.removeListener(this.backboneVisibilityListener),!this.removedDrawables)for(let e=this.previousFirstDrawable;e!==null&&(e.parentDrawable.removeDrawable(e),e!==this.previousLastDrawable);e=e.nextDrawable);this.markBlocksForDisposal(),this.willApplyTransform&&(this.backboneInstance.relativeTransform.removeListener(this.transformListener),this.backboneInstance.relativeTransform.removePrecompute()),this.backboneInstance=null,this.transformRootInstance=null,this.filterRootAncestorInstance=null,this.transformRootAncestorInstance=null,zi(this.dirtyDrawables),zi(this.watchedFilterNodes),this.previousFirstDrawable=null,this.previousLastDrawable=null,super.dispose()}markBlocksForDisposal(){for(;this.blocks.length;){const e=this.blocks.pop();e.domElement.parentNode===this.domElement&&this.domElement.removeChild(e.domElement),e.markForDisposal(this.display)}}updateBackboneVisibility(){this.visible=this.backboneInstance.relativeVisible,this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}markForDisposal(e){for(let t=this.previousFirstDrawable;t!==null&&(t.notePendingRemoval(this.display),t!==this.previousLastDrawable);t=t.oldNextDrawable);this.removedDrawables=!0,super.markForDisposal(e)}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}markTransformDirty(){Qi.applyPreparedTransform(this.backboneInstance.relativeTransform.matrix,this.domElement)}onFilterDirty(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}onClipDirty(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}update(){if(!super.update())return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();if(this.filterDirty){this.filterDirty=!1;let e="";const t=this.watchedFilterNodes.length;for(let n=0;n<t;n++){const s=this.watchedFilterNodes[n],r=s.getEffectiveOpacity();for(let a=0;a<s._filters.length;a++)e+=`${e?" ":""}${s._filters[a].getCSSFilterString()}`;r!==1&&(e+=`${e?" ":""}opacity(${En(r)})`)}this.domElement.style.filter=e}return this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.display=this.visible?"":"none"),this.clipDirty&&(this.clipDirty=!1),!0}getFilterVisibility(){const e=this.watchedFilterNodes.length;for(let t=0;t<e;t++)if(!this.watchedFilterNodes[t].isVisible())return!1;return!0}getFilterClip(){return""}reindexBlocks(){let e=0;for(let t=0;t<this.blocks.length;t++){const n=this.blocks[t];if(n.zIndex<=e){const s=t+1<this.blocks.length&&this.blocks[t+1].zIndex-1>e?Math.ceil((e+this.blocks[t+1].zIndex)/2):e+20;n.domElement.style.zIndex=n.zIndex=s}e=n.zIndex}this.lastZIndex=e+1}stitch(e,t,n,s){if(n===null||s===null)return;let r=null,a=n,o=!1;for(;a;)o=a.constrict()||o,a.isEmpty()?r&&(r.nextChangeInterval=a.nextChangeInterval):(r||(n=a),r=a),a=a.nextChangeInterval;r&&(s=r,s.nextChangeInterval=null,this.stitcher.stitch(this,e,t,this.previousFirstDrawable,this.previousLastDrawable,n,s))}audit(e,t,n){}static createRootDivBackbone(){const e=document.createElement("div");return e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0",e}static createDivBackbone(){const e=document.createElement("div");return e.style.position="relative",e.style.left="0",e.style.top="0",e}static repurposeBackboneContainer(e){return(e.style.position!=="relative"||e.style.position!=="absolute")&&(e.style.position="relative"),e.style.left="0",e.style.top="0",e}}es.mixInto(Nh);const rQ=[];class QM extends fd{paintCanvas(e,t,n){if(!t.selfBounds.isEmpty()){const s=e.context;s.save(),s.fillStyle="black",s.strokeStyle="black",s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.lineDash=rQ,s.lineDashOffset=0,s.miterLimit=10,t.paintCanvas(s),s.restore()}}}es.mixInto(QM);const aQ=["canvasBounds"];class JS extends Ge{constructor(e){super(e),this.setRendererBitmask(qe.bitmaskCanvas)}setCanvasBounds(e){this.invalidateSelf(e)}set canvasBounds(e){this.setCanvasBounds(e)}get canvasBounds(){return this.getCanvasBounds()}getCanvasBounds(){return this.getSelfBounds()}isPainted(){return!0}invalidatePaint(){const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirty()}canvasPaintSelf(e,t){this.paintCanvas(e.context)}containsPointSelf(e){return!1}getSelfShape(){return new zt}createCanvasDrawable(e,t){return QM.createFromPool(e,t)}mutate(e){return super.mutate(e)}}JS.prototype._mutatorKeys=aQ.concat(Ge.prototype._mutatorKeys);class l_{constructor(e,t,n){this.display=e,this.rootNode=t;const s=document.createElementNS(Kn,"svg");s.style.position="absolute",s.setAttribute("class",n),s.style.top="0",s.style.left="0",s.style["pointer-events"]="none",this.svg=s;function r(a,o){s.setAttribute("width",""+a),s.setAttribute("height",""+o),s.style.clip=`rect(0px,${a}px,${o}px,0px)`}e.sizeProperty.link(a=>{r(a.width,a.height)}),this.domElement=s}addShape(e,t,n){const s=document.createElementNS(Kn,"path");let r=e.getSVGPath();r||(r="M0 0"),r?s.setAttribute("d",r):s.hasAttribute("d")&&s.removeAttribute("d"),s.setAttribute("style",`fill: none; stroke: ${t}; stroke-dasharray: 5, 3; stroke-dashoffset: ${n?5:0}; stroke-width: 3;`),this.svg.appendChild(s)}update(){for(;this.svg.childNodes.length;)this.svg.removeChild(this.svg.childNodes[this.svg.childNodes.length-1]);this.addShapes()}dispose(){}}class Za{constructor(e,t){this.trail=e,this.setBefore(t)}isActive(){return!!this.trail}copy(){return new Za(this.trail.copy(),this.isBefore)}setBefore(e){this.isBefore=e,this.isAfter=!e}getRenderSwappedPointer(){const e=this,t=this.isBefore?e.trail.previous():e.trail.next();return t===null?null:new Za(t,!this.isBefore)}getRenderBeforePointer(){return this.isBefore?this:this.getRenderSwappedPointer()}getRenderAfterPointer(){return this.isAfter?this:this.getRenderSwappedPointer()}compareRender(e){const t=this.getRenderBeforePointer(),n=e.getRenderBeforePointer();return t!==null&&n!==null?t.trail.compare(n.trail):t===n?0:t===null?1:-1}compareNested(e){const t=this,n=e,s=t.trail.compare(n.trail);return s===0?this.isBefore===e.isBefore?0:this.isBefore?-1:1:t.trail.isExtensionOf(n.trail)?e.isBefore?1:-1:n.trail.isExtensionOf(t.trail)?this.isBefore?-1:1:s}equalsRender(e){return this.compareRender(e)===0}equalsNested(e){return this.compareNested(e)===0}hasTrail(){return!!this.trail}nestedForwards(){const e=this;if(this.isBefore){const t=e.trail.lastNode()._children;t.length>0?e.trail.addDescendant(t[0],0):this.setBefore(!1)}else{if(e.trail.indices.length===0)return this.trail=null,null;{const t=e.trail.indices[e.trail.indices.length-1];e.trail.removeDescendant();const n=e.trail.lastNode()._children;n.length>t+1&&(e.trail.addDescendant(n[t+1],t+1),this.setBefore(!0))}}return this}nestedBackwards(){const e=this;if(this.isBefore){if(e.trail.indices.length===0)return this.trail=null,null;{const t=e.trail.indices[e.trail.indices.length-1];e.trail.removeDescendant(),t-1>=0&&(e.trail.addDescendant(e.trail.lastNode()._children[t-1],t-1),this.setBefore(!1))}}else if(e.trail.lastNode()._children.length>0){const t=e.trail.lastNode()._children;e.trail.addDescendant(t[t.length-1],t.length-1)}else this.setBefore(!0);return this}eachNodeBetween(e,t){this.eachTrailBetween(e,n=>t(n.lastNode()))}eachTrailBetween(e,t){this.isBefore&&t(this.trail),this.depthFirstUntil(e,n=>n.isBefore?t(n.trail):!1,!0)}depthFirstUntil(e,t,n){const s=this,r=e;s.trail.reindex(),r.trail.reindex();const a=this.copy();a.trail.setMutable();let o=!0;for(;!a.equalsNested(e);){let l=!1;if(o?(n||(l=t(a)),o=!1):l=t(a),l&&a.isBefore){if(a.setBefore(!1),a.compareNested(e)===1)break}else a.nestedForwards()}n||t(a)}toString(){return`[${this.isBefore?"before":"after"} ${this.trail.toString().slice(1)}`}static compareNested(e,t,n,s){const r=e.compare(n);return r===0?t===s?0:t?-1:1:e.isExtensionOf(n)?s?1:-1:n.isExtensionOf(e)?t?-1:1:r}static eachTrailUnder(e,t){new Za(e,!0).eachTrailBetween(new Za(e,!1),t)}static eachPaintedTrailBetween(e,t,n,s,r){Za.eachTrailBetween(e,t,a=>a.isPainted()?n(a):!1,s,r)}static eachTrailBetween(e,t,n,s,r){const a=e?new Za(e.copy(),!0):new Za(new Yi(r),!0),o=t?new Za(t.copy(),!0):new Za(new Yi(r),!1);s&&(a.nestedForwards(),o.nestedBackwards(),a.compareNested(o)===1)||a.depthFirstUntil(o,l=>l.isBefore?n(l.trail):!1,!1)}}class oQ extends l_{constructor(e,t){super(e,t,"canvasNodeBoundsOverlay")}addShapes(){Za.eachTrailUnder(new Yi(this.rootNode),e=>{const t=e.lastNode();if(!t.isVisible())return!0;if(t instanceof JS&&e.isVisible()){const n=e.getTransform();this.addShape(n.transformShape(zt.bounds(t.selfBounds)),"rgba(0,255,0,0.8)",!0)}return!1})}}class qv extends l0{constructor(e,t){super(e,t),Qi.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement=this.node._container}updateDOM(){this.transformDirty&&!this.node._preventTransform&&Qi.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.transformDirty=!1}dispose(){super.dispose(),this.domElement=null}}es.mixInto(qv);class lQ extends l_{constructor(e,t){super(e,t,"canvasNodeBoundsOverlay")}addShapes(){const e=this;function t(r,a){r.willApplyTransform&&(a=a.timesMatrix(r.backboneInstance.relativeTransform.matrix)),r.blocks.forEach(o=>{n(o,a)})}function n(r,a){if(r instanceof xs&&!r.fitBounds.isEmpty()&&e.addShape(zt.bounds(r.fitBounds).transformed(a),"rgba(255,0,0,0.8)",!0),r.firstDrawable&&r.lastDrawable){for(let o=r.firstDrawable;o!==r.lastDrawable;o=o.nextDrawable)s(o,a);s(r.lastDrawable,a)}}function s(r,a){r instanceof Nh&&t(r,a)}t(this.display.rootBackbone,It.IDENTITY)}}class up extends l_{constructor(e,t){super(e,t,"hitAreaOverlay")}addShapes(){Za.eachTrailUnder(new Yi(this.rootNode),e=>{const t=e.lastNode();if(!t.isVisible()||t.pickable===!1)return!0;if(t.inputListeners.length&&e.isVisible()){const n=up.getLocalMouseShape(t),s=up.getLocalTouchShape(t),r=e.getMatrix();n.bounds.isEmpty()||this.addShape(n.transformed(r),"rgba(0,0,255,0.8)",!0),s.bounds.isEmpty()||this.addShape(s.transformed(r),"rgba(255,0,0,0.8)",!1)}return!1})}static getLocalMouseShape(e){let t=zt.union([e.mouseArea?e.mouseArea instanceof zt?e.mouseArea:zt.bounds(e.mouseArea):e.getSelfShape(),...e.children.filter(n=>e.visible&&e.pickable!==!1).map(n=>up.getLocalMouseShape(n).transformed(n.matrix))]);return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}static getLocalTouchShape(e){let t=zt.union([e.touchArea?e.touchArea instanceof zt?e.touchArea:zt.bounds(e.touchArea):e.getSelfShape(),...e.children.filter(n=>e.visible&&e.pickable!==!1).map(n=>up.getLocalTouchShape(n).transformed(n.matrix))]);return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}}class hQ extends Uc{constructor(e,t,n){super(t,"pen"),this.id=e}move(e){const t=this.hasPointChanged(e);return this.point=e,t}toString(){return`Pen#${this.id}`}isTouchLike(){return!0}}class uQ extends Uc{constructor(e,t,n){super(t,"touch"),this.id=e}move(e){const t=this.hasPointChanged(e);return this.point=e,t}toString(){return`Touch#${this.id}`}isTouchLike(){return!0}}const Lk=Kl(Uc.PointerIO),cQ=["focus","blur","focusin","focusout"],dQ=80;class cg extends rn{constructor(e,t,n,s,r,a,o,l){const h=Ne()({phetioType:cg.InputIO,phetioDocumentation:"Central point for user input events, such as mouse, touch"},l);super(h),this.currentSceneryEvent=null,this.display=e,this.rootNode=e.rootNode,this.attachToWindow=t,this.batchDOMEvents=n,this.assumeFullWindow=s,this.passiveEvents=r,this.preventMultitouch=a,this.interruptMultitouch=o,this.batchedEvents=[],this.pdomPointer=null,this.mouse=null,this.pointers=[],this.pointerAddedEmitter=new un,this.currentlyFiringEvents=!1,this.upTimeStamp=0,this.validatePointersAction=new Zi(()=>{let c=this.pointers.length;for(;c--;){const f=this.pointers[c];f.point&&f!==this.pdomPointer&&this.branchChangeEvents(f,f.lastEventContext||Xi.createSynthetic(),!1)}},{phetioPlayback:!0,tandem:h.tandem?.createTandem("validatePointersAction"),phetioHighFrequency:!0}),this.mouseUpAction=new Zi((c,f)=>{const g=this.ensureMouse(c,f);g.id=null,this.upEvent(g,f,c)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("mouseUpAction"),parameters:[{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a mouse button is released."}),this.mouseDownAction=new Zi((c,f,g)=>{this.interruptMultitouch&&this.interruptMultitouchPointers(f,g);const v=this.ensureMouse(f,g);v.id=c,this.downEvent(v,g,f)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("mouseDownAction"),parameters:[{name:"id",phetioType:fi(Ii)},{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a mouse button is pressed."}),this.mouseMoveAction=new Zi((c,f)=>{const g=this.ensureMouse(c,f);g.move(c),this.moveEvent(g,f)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("mouseMoveAction"),parameters:[{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the mouse is moved.",phetioHighFrequency:!0}),this.mouseOverAction=new Zi((c,f)=>{this.ensureMouse(c,f).over(c)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("mouseOverAction"),parameters:[{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the mouse is moved while on the sim."}),this.mouseOutAction=new Zi((c,f)=>{this.ensureMouse(c,f).out(c)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("mouseOutAction"),parameters:[{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the mouse moves out of the display."}),this.wheelScrollAction=new Zi(c=>{const f=c.domEvent,g=this.ensureMouse(this.pointFromEvent(f),c);if(g.wheel(f),g.point){const v=this.rootNode.trailUnderPointer(g)||new Yi(this.rootNode);this.dispatchEvent(v,"wheel",g,c,!0)}},{phetioPlayback:!0,tandem:h.tandem?.createTandem("wheelScrollAction"),parameters:[{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the mouse wheel scrolls.",phetioHighFrequency:!0}),this.touchStartAction=new Zi((c,f,g)=>{const v=new uQ(c,f,g.domEvent);this.addPointer(v,f,g),this.downEvent(v,g,f)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("touchStartAction"),parameters:[{name:"id",phetioType:Ii},{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a touch begins."}),this.touchEndAction=new Zi((c,f,g)=>{const v=this.findPointerById(c);v&&(this.upEvent(v,g,f),this.removePointer(v))},{phetioPlayback:!0,tandem:h.tandem?.createTandem("touchEndAction"),parameters:[{name:"id",phetioType:Ii},{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a touch ends."}),this.touchMoveAction=new Zi((c,f,g)=>{const v=this.findPointerById(c);v&&(v.move(f),this.moveEvent(v,g))},{phetioPlayback:!0,tandem:h.tandem?.createTandem("touchMoveAction"),parameters:[{name:"id",phetioType:Ii},{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a touch moves.",phetioHighFrequency:!0}),this.touchCancelAction=new Zi((c,f,g)=>{const v=this.findPointerById(c);v&&(this.cancelEvent(v,g,f),this.removePointer(v))},{phetioPlayback:!0,tandem:h.tandem?.createTandem("touchCancelAction"),parameters:[{name:"id",phetioType:Ii},{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a touch is canceled."}),this.penStartAction=new Zi((c,f,g)=>{const v=new hQ(c,f,g.domEvent);this.addPointer(v,f,g),this.downEvent(v,g,f)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("penStartAction"),parameters:[{name:"id",phetioType:Ii},{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a pen touches the screen."}),this.penEndAction=new Zi((c,f,g)=>{const v=this.findPointerById(c);v&&(this.upEvent(v,g,f),this.removePointer(v))},{phetioPlayback:!0,tandem:h.tandem?.createTandem("penEndAction"),parameters:[{name:"id",phetioType:Ii},{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a pen is lifted."}),this.penMoveAction=new Zi((c,f,g)=>{const v=this.findPointerById(c);v&&(v.move(f),this.moveEvent(v,g))},{phetioPlayback:!0,tandem:h.tandem?.createTandem("penMoveAction"),parameters:[{name:"id",phetioType:Ii},{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a pen is moved.",phetioHighFrequency:!0}),this.penCancelAction=new Zi((c,f,g)=>{const v=this.findPointerById(c);v&&(this.cancelEvent(v,g,f),this.removePointer(v))},{phetioPlayback:!0,tandem:h.tandem?.createTandem("penCancelAction"),parameters:[{name:"id",phetioType:Ii},{name:"point",phetioType:Oe.Vector2IO},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a pen is canceled."}),this.gotPointerCaptureAction=new Zi((c,f)=>{const g=this.findPointerById(c);g&&g.onGotPointerCapture()},{phetioPlayback:!0,tandem:h.tandem?.createTandem("gotPointerCaptureAction"),parameters:[{name:"id",phetioType:Ii},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a pointer is captured (normally at the start of an interaction)",phetioHighFrequency:!0}),this.lostPointerCaptureAction=new Zi((c,f)=>{const g=this.findPointerById(c);g&&zn.setTimeout(()=>{g.onLostPointerCapture()},2)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("lostPointerCaptureAction"),parameters:[{name:"id",phetioType:Ii},{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when a pointer loses its capture (normally at the end of an interaction)",phetioHighFrequency:!0}),this.focusinAction=new Zi(c=>{const f=this.getPDOMEventTrail(c.domEvent,"focusin");f&&(this.dispatchPDOMEvent(f,"focus",c,!1),this.dispatchPDOMEvent(f,"focusin",c,!0))},{phetioPlayback:!0,tandem:h.tandem?.createTandem("focusinAction"),parameters:[{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the PDOM root gets the focusin DOM event."}),this.focusoutAction=new Zi(c=>{const f=this.getPDOMEventTrail(c.domEvent,"focusout");f&&(this.dispatchPDOMEvent(f,"blur",c,!1),this.dispatchPDOMEvent(f,"focusout",c,!0))},{phetioPlayback:!0,tandem:h.tandem?.createTandem("focusoutAction"),parameters:[{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the PDOM root gets the focusout DOM event."}),this.clickAction=new Zi(c=>{const f=this.getPDOMEventTrail(c.domEvent,"click");f&&this.dispatchPDOMEvent(f,"click",c,!0)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("clickAction"),parameters:[{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the PDOM root gets the click DOM event."}),this.inputAction=new Zi(c=>{const f=this.getPDOMEventTrail(c.domEvent,"input");f&&this.dispatchPDOMEvent(f,"input",c,!0)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("inputAction"),parameters:[{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the PDOM root gets the input DOM event."}),this.changeAction=new Zi(c=>{const f=this.getPDOMEventTrail(c.domEvent,"change");f&&this.dispatchPDOMEvent(f,"change",c,!0)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("changeAction"),parameters:[{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the PDOM root gets the change DOM event."}),this.keydownAction=new Zi(c=>{const f=this.getPDOMEventTrail(c.domEvent,"keydown");f&&this.dispatchPDOMEvent(f,"keydown",c,!0)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("keydownAction"),parameters:[{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the PDOM root gets the keydown DOM event."}),this.keyupAction=new Zi(c=>{const f=this.getPDOMEventTrail(c.domEvent,"keydown");f&&this.dispatchPDOMEvent(f,"keyup",c,!0)},{phetioPlayback:!0,tandem:h.tandem?.createTandem("keyupAction"),parameters:[{name:"context",phetioType:Ms}],phetioEventType:vi.USER,phetioDocumentation:"Emits when the PDOM root gets the keyup DOM event."})}interruptPointers(e=null){ie.each(this.pointers,t=>{t!==e&&t.interruptAll()})}batchEvent(e,t,n,s){this.display.interactive&&(this.batchedEvents.push($m.pool.create(e,t,n)),(s||!this.batchDOMEvents)&&this.fireBatchedEvents());const r=Zn.firefox&&e.domEvent instanceof PointerEvent&&n===this.pointerDown&&e.domEvent.pointerType==="touch";this.passiveEvents!==!0&&(n!==this.mouseDown||Zn.edge)&&!r&&t!==Di.ALT_TYPE&&!e.allowsDOMInput()&&e.domEvent.preventDefault()}fireBatchedEvents(){if(!this.currentlyFiringEvents&&this.batchedEvents.length){this.currentlyFiringEvents=!0;const e=this.batchedEvents;for(let t=0;t<e.length;t++){const n=e[t];n.run(this),n.dispose()}zi(e),this.currentlyFiringEvents=!1}}clearBatchedEvents(){this.batchedEvents.length=0}validatePointers(){this.validatePointersAction.execute()}removeTemporaryPointers(){for(let e=this.pointers.length-1;e>=0;e--){const t=this.pointers[e];if(!(t instanceof Qm)){this.pointers.splice(e,1);const n=t.trail||new Yi(this.rootNode);this.exitEvents(t,Xi.createSynthetic(),n,0,!0)}}}connectListeners(){ii.addDisplay(this.display,this.attachToWindow,this.passiveEvents)}disconnectListeners(){ii.removeDisplay(this.display,this.attachToWindow,this.passiveEvents)}pointFromEvent(e){const t=Oe.pool.create(e.clientX,e.clientY);if(!this.assumeFullWindow){const n=this.display.domElement.getBoundingClientRect();n.width>0&&n.height>0&&(t.subtractXY(n.left,n.top),(n.width!==this.display.width||n.height!==this.display.height)&&(t.x*=this.display.width/n.width,t.y*=this.display.height/n.height))}return t}interruptMultitouchPointers(e,t){const n=this.pointers.filter(s=>s.isTouchLike());for(const s of n)this.cancelEvent(s,t,e),this.removePointer(s)}addPointer(e,t,n){this.preventMultitouch&&e.isTouchLike()&&this.pointers.some(s=>s.isTouchLike())||(this.interruptMultitouch&&(this.interruptMultitouchPointers(t,n),this.mouse&&this.mouse.interruptAll()),this.pointers.push(e),this.pointerAddedEmitter.emit(e))}removePointer(e){for(let t=this.pointers.length-1;t>=0;t--)this.pointers[t]===e&&this.pointers.splice(t,1);e.dispose()}findPointerById(e){let t=this.pointers.length;for(;t--;){const n=this.pointers[t];if(n.id===e)return n}return null}getPDOMEventTrail(e,t){if(!this.display.interactive)return null;const n=this.getTrailFromPDOMEvent(e);return n&&!(t==="click"&&ie.some(n.nodes,r=>r.positionInPDOM)&&e.timeStamp-this.upTimeStamp<=dQ)?n:null}ensureMouse(e,t){const n=this.mouse;if(n)return n;{const s=new Qm(e);return this.mouse=s,this.addPointer(s,e,t),s}}ensurePDOMPointer(e){const t=this.pdomPointer;if(t)return t;{const n=new Dv(this.display);return this.pdomPointer=n,this.addPointer(n,Oe.ZERO,e),n}}dispatchPDOMEvent(e,t,n,s){this.ensurePDOMPointer(n).updateTrail(e),Ti.USER_GESTURE_EVENTS.includes(t)&&Gs.userGestureEmitter.emit();const r=n.domEvent;r.target&&r.target.hasAttribute(Ti.DATA_EXCLUDE_FROM_INPUT)||(e.isPickable()||cQ.includes(t)||(e=new Yi([])),this.dispatchEvent(e,t,this.pdomPointer,n,s))}getRelatedTargetTrail(e){const t=e.relatedTarget;if(t&&this.display.isElementUnderPDOM(t,!1)){const s=e.relatedTarget.getAttribute(Ti.DATA_PDOM_UNIQUE_ID);return Hy(this.display,s)}return null}getTrailFromPDOMEvent(e){if(!this.display._accessible)return null;if(e[tv]){const t=e[tv].getAttribute(Ti.DATA_PDOM_UNIQUE_ID);return Hy(this.display,t)}else{const t=e.target;if(t&&t instanceof self.Element&&this.display.isElementUnderPDOM(t,!1)){const n=t.getAttribute(Ti.DATA_PDOM_UNIQUE_ID);return Hy(this.display,n)}}return null}mouseDown(e,t,n){this.mouseDownAction.execute(e,t,n)}mouseUp(e,t){this.mouseUpAction.execute(e,t)}mouseMove(e,t){this.mouseMoveAction.execute(e,t)}mouseOver(e,t){this.mouseOverAction.execute(e,t)}mouseOut(e,t){this.mouseOutAction.execute(e,t)}wheel(e){this.wheelScrollAction.execute(e)}touchStart(e,t,n){this.touchStartAction.execute(e,t,n)}touchEnd(e,t,n){this.touchEndAction.execute(e,t,n)}touchMove(e,t,n){this.touchMoveAction.execute(e,t,n)}touchCancel(e,t,n){this.touchCancelAction.execute(e,t,n)}penStart(e,t,n){this.penStartAction.execute(e,t,n)}penEnd(e,t,n){this.penEndAction.execute(e,t,n)}penMove(e,t,n){this.penMoveAction.execute(e,t,n)}penCancel(e,t,n){this.penCancelAction.execute(e,t,n)}pointerDown(e,t,n,s){const r=this.attachToWindow?document.body:this.display.domElement;switch(r.setPointerCapture&&!s.allowsDOMInput()&&r.setPointerCapture(s.domEvent.pointerId),t=this.handleUnknownPointerType(t,e),t){case"mouse":this.mouseDown(e,n,s);break;case"touch":this.touchStart(e,n,s);break;case"pen":this.penStart(e,n,s);break}}pointerUp(e,t,n,s){switch(this.upTimeStamp=s.domEvent.timeStamp,t=this.handleUnknownPointerType(t,e),t){case"mouse":this.mouseUp(n,s);break;case"touch":this.touchEnd(e,n,s);break;case"pen":this.penEnd(e,n,s);break}}pointerCancel(e,t,n,s){switch(t=this.handleUnknownPointerType(t,e),t){case"mouse":console&&console.log&&console.log("WARNING: Pointer mouse cancel was received");break;case"touch":this.touchCancel(e,n,s);break;case"pen":this.penCancel(e,n,s);break;default:console.log&&console.log(`Unknown pointer type: ${t}`)}}gotPointerCapture(e,t,n,s){this.gotPointerCaptureAction.execute(e,s)}lostPointerCapture(e,t,n,s){this.lostPointerCaptureAction.execute(e,s)}pointerMove(e,t,n,s){switch(t=this.handleUnknownPointerType(t,e),t){case"mouse":this.mouseMove(n,s);break;case"touch":this.touchMove(e,n,s);break;case"pen":this.penMove(e,n,s);break;default:console.log&&console.log(`Unknown pointer type: ${t}`)}}pointerOver(e,t,n,s){}pointerOut(e,t,n,s){}pointerEnter(e,t,n,s){}pointerLeave(e,t,n,s){}focusIn(e){this.focusinAction.execute(e)}focusOut(e){this.focusoutAction.execute(e)}input(e){this.inputAction.execute(e)}change(e){this.changeAction.execute(e)}click(e){this.clickAction.execute(e)}keyDown(e){this.keydownAction.execute(e)}keyUp(e){this.keyupAction.execute(e)}handleUnknownPointerType(e,t){return e!==""?e:this.mouse&&this.mouse.id===t?"mouse":"touch"}getPointerTrail(e){return this.rootNode.trailUnderPointer(e)||new Yi(this.rootNode)}upEvent(e,t,n){if(this.display.isElementUnderPDOM(t.domEvent.target,!0))return;const s=e.up(n,t.domEvent),r=this.branchChangeEvents(e,t,s);this.dispatchEvent(r,"up",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,r,0,!0)}downEvent(e,t,n){if(this.display.isElementUnderPDOM(t.domEvent.target,!0))return;const s=e.updatePoint(n),r=this.branchChangeEvents(e,t,s);e.down(t.domEvent),this.dispatchEvent(r,"down",e,t,!0)}moveEvent(e,t){this.branchChangeEvents(e,t,!0)}cancelEvent(e,t,n){const s=e.cancel(n),r=this.branchChangeEvents(e,t,s);this.dispatchEvent(r,"cancel",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,r,0,!0)}branchChangeEvents(e,t,n){const s=this.getPointerTrail(e),r=s.slice(0,Math.min(s.nodes.length,s.getLastInputEnabledIndex()+1)),a=e.inputEnabledTrail||new Yi(this.rootNode),o=Yi.branchIndex(r,a),l=a.lastNode()!==r.lastNode();return n&&this.dispatchEvent(s,"move",e,t,!0),this.exitEvents(e,t,a,o,l),this.enterEvents(e,t,r,o,l),e.trail=s,e.inputEnabledTrail=r,s}enterEvents(e,t,n,s,r){r&&this.dispatchEvent(n,"over",e,t,!0,!0);for(let a=s;a<n.length;a++)this.dispatchEvent(n.slice(0,a+1),"enter",e,t,!1)}exitEvents(e,t,n,s,r){for(let a=n.length-1;a>=s;a--)this.dispatchEvent(n.slice(0,a+1),"exit",e,t,!1,!0);r&&this.dispatchEvent(n,"out",e,t,!0)}dispatchEvent(e,t,n,s,r,a=!1){const o=new Lo(e,t,n,s);this.currentSceneryEvent=o,this.dispatchToListeners(n,n.getListeners(),t,o),this.dispatchToTargets(e,t,n,o,r,a),this.dispatchToListeners(n,this.display.getInputListeners(),t,o),Gs.inputListeners.length&&this.dispatchToListeners(n,Gs.inputListeners.slice(),t,o),this.currentSceneryEvent=null}dispatchToListeners(e,t,n,s){if(s.handled)return;const r=e.type+n;for(let a=0;a<t.length;a++){const o=t[a];!s.aborted&&o[r]&&o[r](s),!s.aborted&&o[n]&&o[n](s)}}dispatchToTargets(e,t,n,s,r,a=!1){if(s.aborted||s.handled)return;const o=e.getLastInputEnabledIndex();for(let l=e.nodes.length-1;l>=0;r?l--:l=-1){const h=e.nodes[l],c=o<l;if(!(h.isDisposed||!a&&c)&&(s.currentTarget=h,this.dispatchToListeners(n,h.getInputListeners(),t,s),s.aborted||s.handled))return}}static debugText(e,t){let n=`${t.timeStamp} ${t.type}`;return e!==null&&(n=`${e.x},${e.y} ${n}`),n}}cg.InputIO=new ui("InputIO",{valueType:cg,applyState:ie.noop,toStateObject:i=>({pointers:Lk.toStateObject(i.pointers)}),stateSchema:{pointers:Lk}});class pQ{constructor(e){this.instance=e}initialize(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.selfFittable=!!t&&this.isSelfFitSupported(),this.ancestorsFittable=this.selfFittable,this.subtreeUnfittableCount=this.selfFittable?0:1,this.subtreeFittabilityChangeEmitter=this.subtreeFittabilityChangeEmitter||new un,this}get parent(){return this.instance.parent?this.instance.parent.fittability:null}checkSelfFittability(){const e=this.isSelfFitSupported();this.selfFittable!==e&&this.updateSelfFittable()}isSelfFitSupported(){return this.display._allowLayerFitting&&!this.node.isPreventFit()}markSubtreeFittable(){if(!this.selfFittable)return;this.ancestorsFittable=!0;const e=this.instance.children;for(let t=0;t<e.length;t++)e[t].fittability.markSubtreeFittable();this.instance.updateDrawableFittability(!0)}markSubtreeUnfittable(){if(!this.ancestorsFittable)return;this.ancestorsFittable=!1;const e=this.instance.children;for(let t=0;t<e.length;t++)e[t].fittability.markSubtreeUnfittable();this.instance.updateDrawableFittability(!1)}updateSelfFittable(){const e=this.isSelfFitSupported();this.selfFittable=e,this.selfFittable&&(!this.parent||this.parent.ancestorsFittable)?this.markSubtreeFittable():this.selfFittable||this.markSubtreeUnfittable(),this.selfFittable?this.decrementSubtreeUnfittableCount():this.incrementSubtreeUnfittableCount()}incrementSubtreeUnfittableCount(){this.subtreeUnfittableCount++,this.subtreeUnfittableCount===1&&(this.parent&&this.parent.incrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}decrementSubtreeUnfittableCount(){this.subtreeUnfittableCount--,this.subtreeUnfittableCount===0&&(this.parent&&this.parent.decrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}onInsert(e){this.ancestorsFittable||e.markSubtreeUnfittable(),e.subtreeUnfittableCount>0&&this.incrementSubtreeUnfittableCount()}onRemove(e){this.ancestorsFittable||e.markSubtreeFittable(),e.subtreeUnfittableCount>0&&this.decrementSubtreeUnfittableCount()}audit(){}}class fQ extends to{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){super.initialize(e),this.instance=t}stitch(e,t,n,s){}}class mQ{constructor(e){this.instance=e}initialize(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.transformDirty=!0,this.nodeTransformListener=this.nodeTransformListener||this.onNodeTransformDirty.bind(this),this.matrix=this.matrix||It.identity(),this.relativeSelfDirty=!0,this.relativeChildrenListenersCount=0,this.relativePrecomputeCount=0,this.relativeChildrenPrecomputeCount=0,this.relativeFrameId=-1,this.relativeChildDirtyFrame=e?e._frameId:0,this.relativeTransformListeners=zi(this.relativeTransformListeners),this}get parent(){return this.instance.parent?this.instance.parent.relativeTransform:null}addInstance(e){e.stateless||(e.relativeTransform.hasAncestorListenerNeed()&&this.incrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.incrementTransformPrecomputeChildren()),e.relativeTransform.forceMarkTransformDirty()}removeInstance(e){e.relativeTransform.hasAncestorListenerNeed()&&this.decrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.decrementTransformPrecomputeChildren()}attachNodeListeners(){this.node.transformEmitter.addListener(this.nodeTransformListener)}detachNodeListeners(){this.node.transformEmitter.removeListener(this.nodeTransformListener)}hasDescendantListenerNeed(){return this.instance.isTransformed?this.relativeChildrenListenersCount>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}hasAncestorListenerNeed(){return this.instance.isTransformed?this.relativeTransformListeners.length>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}hasSelfListenerNeed(){return this.relativeTransformListeners.length>0}incrementTransformListenerChildren(){const e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount++,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.incrementTransformListenerChildren()}decrementTransformListenerChildren(){const e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount--,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}addListener(e){const t=this.hasAncestorListenerNeed();this.relativeTransformListeners.push(e),t!==this.hasAncestorListenerNeed()&&(this.parent&&this.parent.incrementTransformListenerChildren(),this.hasAncestorComputeNeed()||this.forceMarkTransformDirty())}removeListener(e){const t=this.hasAncestorListenerNeed();this.relativeTransformListeners.splice(ie.indexOf(this.relativeTransformListeners,e),1),t!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}hasDescendantComputeNeed(){return this.instance.isTransformed?this.relativeChildrenPrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}hasAncestorComputeNeed(){return this.instance.isTransformed?this.relativePrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}hasSelfComputeNeed(){return this.relativePrecomputeCount>0}incrementTransformPrecomputeChildren(){const e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount++,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.incrementTransformPrecomputeChildren()}decrementTransformPrecomputeChildren(){const e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}addPrecompute(){const e=this.hasAncestorComputeNeed();this.relativePrecomputeCount++,e!==this.hasAncestorComputeNeed()&&(this.parent&&this.parent.incrementTransformPrecomputeChildren(),this.hasAncestorListenerNeed()||this.forceMarkTransformDirty())}removePrecompute(){const e=this.hasAncestorComputeNeed();this.relativePrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}onNodeTransformDirty(){this.transformDirty||this.forceMarkTransformDirty()}forceMarkTransformDirty(){this.transformDirty=!0,this.relativeSelfDirty=!0;const e=this.display._frameId;let t=this.instance.parent;for(;t&&t.relativeTransform.relativeChildDirtyFrame!==e;){const n=t.parent,s=t.isTransformed;if(t.relativeTransform.relativeChildDirtyFrame=e,n===null){this.display.markTransformRootDirty(t,s);break}else if(s){this.display.markTransformRootDirty(t,!0);break}t=n}}computeRelativeTransform(){const e=this.node.getMatrix();this.instance.parent&&!this.instance.parent.isTransformed?(this.matrix.set(this.parent.matrix),this.matrix.multiplyMatrix(e)):this.matrix.set(e),this.relativeFrameId=this.display._frameId,this.relativeSelfDirty=!1}isValidationNotNeeded(){return this.hasAncestorComputeNeed()||this.relativeFrameId===this.display._frameId}validate(){if(!this.isValidationNotNeeded()&&(this.instance.parent&&!this.instance.parent.isTransformed&&this.parent.validate(),this.relativeSelfDirty)){this.computeRelativeTransform();const e=this.instance.children.length;for(let t=0;t<e;t++)this.instance.children[t].relativeTransform.relativeSelfDirty=!0}}updateTransformListenersAndCompute(e,t,n,s){let r,a;if(s)for(r=this.instance.children.length,a=0;a<r;a++)this.instance.children[a].relativeTransform.updateTransformListenersAndCompute(!1,!1,n,!1);else{const o=e||this.relativeSelfDirty,l=o||this.relativeChildDirtyFrame===n,h=this.hasDescendantComputeNeed(),c=this.hasDescendantListenerNeed(),f=this.hasSelfComputeNeed(),g=this.hasSelfListenerNeed();if(!h&&o&&!t&&(this.relativeSelfDirty=!0),!l||!h&&!c&&!f&&!g)return;if(o&&(h||f)&&this.computeRelativeTransform(),this.transformDirty&&(this.transformDirty=!1),this.notifyRelativeTransformListeners(),!this.instance.isTransformed||s){const v=o&&!(h||f);for(r=this.instance.children.length,a=0;a<r;a++)this.instance.children[a].relativeTransform.updateTransformListenersAndCompute(o,v,n,!1)}}}notifyRelativeTransformListeners(){const e=this.relativeTransformListeners.length;for(let t=0;t<e;t++)this.relativeTransformListeners[t]()}audit(e,t){}}class gQ extends to{constructor(e,t,n,s){super(),this.initialize(e,t,n,s)}initialize(e,t,n,s){super.initialize(t),this.instance=n,this.sharedInstance=s}}let yQ=1;const vQ=qe.createOrderBitmask(qe.bitmaskSVG,qe.bitmaskCanvas,qe.bitmaskDOM,qe.bitmaskWebGL);class bc{constructor(e,t,n,s){this.display=null,this.active=!1,this.initialize(e,t,n,s)}initialize(e,t,n,s){return t.setImmutable(),this.id=this.id||yQ++,this.isWebGLSupported=e.isWebGLAllowed()&&Qi.isWebGLSupported,this.relativeTransform=this.relativeTransform||new mQ(this),this.fittability=this.fittability||new pQ(this),this.visible=!0,this.relativeVisible=!0,this.selfVisible=!0,this.visibilityDirty=!0,this.childVisibilityDirty=!0,this.voicingVisible=!0,this.branchIndexMap=this.branchIndexMap||{},this.branchIndexReferences=zi(this.branchIndexReferences),this.addRemoveCounter=0,this.stitchChangeFrame=e._frameId,this.stitchChangeBefore=0,this.stitchChangeAfter=0,this.stitchChangeOnChildren=0,this.stitchChangeIncluded=!1,this.childInsertedListener=this.childInsertedListener||this.onChildInserted.bind(this),this.childRemovedListener=this.childRemovedListener||this.onChildRemoved.bind(this),this.childrenReorderedListener=this.childrenReorderedListener||this.onChildrenReordered.bind(this),this.visibilityListener=this.visibilityListener||this.onVisibilityChange.bind(this),this.markRenderStateDirtyListener=this.markRenderStateDirtyListener||this.markRenderStateDirty.bind(this),this.visibleEmitter=new un,this.relativeVisibleEmitter=new un,this.selfVisibleEmitter=new un,this.canVoiceEmitter=new un,this.cleanInstance(e,t),this.node.addInstance(this),this.externalReferenceCount=0,this.stateless=!0,this.isDisplayRoot=n,this.isSharedCanvasCacheRoot=s,this.preferredRenderers=0,this.isUnderCanvasCache=s,this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCachePlaceholder=!1,this.isSharedCanvasCacheSelf=s,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0,this.renderStateDirtyFrame=e._frameId,this.skipPruningFrame=e._frameId,this.active=!0,this}cleanInstance(e,t){this.display=e,this.trail=t,this.node=t?t.lastNode():null,this.parent=null,this.oldParent=null,this.children=zi(this.children),this.sharedCacheInstance=null,this.relativeTransform.initialize(e,t),this.fittability.initialize(e,t),this.instanceRemovalCheckList=zi(this.instanceRemovalCheckList),this.selfDrawable=null,this.groupDrawable=null,this.sharedCacheDrawable=null,this.firstDrawable=null,this.lastDrawable=null,this.firstInnerDrawable=null,this.lastInnerDrawable=null,this.svgGroups=zi(this.svgGroups),this.cleanSyncTreeResults()}cleanSyncTreeResults(){this.beforeStableIndex=this.children.length,this.afterStableIndex=-1,this.firstChangeInterval=null,this.lastChangeInterval=null,this.incompatibleStateChange=!1,this.groupChanged=!1,this.cascadingStateChange=!1,this.anyStateChange=!1}updateRenderingState(){const e=this.isBackbone,t=this.isTransformed,n=this.isVisibilityApplied,s=this.isInstanceCanvasCache,r=this.isSharedCanvasCacheSelf,a=this.isSharedCanvasCachePlaceholder,o=this.isUnderCanvasCache,l=this.selfRenderer,h=this.groupRenderer,c=this.sharedCacheRenderer,f=this.preferredRenderers;this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCacheSelf=!1,this.isSharedCanvasCachePlaceholder=!1,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0;const g=this.node;this.isUnderCanvasCache=this.isSharedCanvasCacheRoot||(this.parent?this.parent.isUnderCanvasCache||this.parent.isInstanceCanvasCache||this.parent.isSharedCanvasCacheSelf:!1),this.preferredRenderers=this.parent?this.parent.preferredRenderers:vQ,g._renderer&&(this.preferredRenderers=qe.pushOrderBitmask(this.preferredRenderers,g._renderer));const v=this.node.hasClipArea(),A=this.node.effectiveOpacity!==1||g._usesOpacity||this.node._filters.length>0;let P=!1,w=!1;if(A)for(let O=0;O<this.node._filters.length;O++){const x=this.node._filters[O];x.isSVGCompatible()||(P=!0),x.isCanvasCompatible()||(w=!0)}const T=g._cssTransform||g._layerSplit,D=this.isDisplayRoot||!this.isUnderCanvasCache&&T,M=!D&&(A||v)&&(!P&&this.node._rendererSummary.isSubtreeRenderedExclusivelySVG(this.preferredRenderers)||!w&&this.node._rendererSummary.isSubtreeRenderedExclusivelyCanvas(this.preferredRenderers));if((M?!1:D||A||v)?(this.isBackbone=!0,this.isVisibilityApplied=!0,this.isTransformed=this.isDisplayRoot||!!g._cssTransform,this.groupRenderer=qe.bitmaskDOM):!M&&(A||v||g._canvasCache)&&(g._singleCache?this.isSharedCanvasCacheRoot?(this.isSharedCanvasCacheSelf=!0,this.sharedCacheRenderer=this.isWebGLSupported?qe.bitmaskWebGL:qe.bitmaskCanvas):this.isSharedCanvasCachePlaceholder=!0:(this.isInstanceCanvasCache=!0,this.isUnderCanvasCache=!0,this.groupRenderer=this.isWebGLSupported?qe.bitmaskWebGL:qe.bitmaskCanvas)),this.node.isPainted())if(this.isUnderCanvasCache)this.selfRenderer=qe.bitmaskCanvas;else{let O=this.node._rendererBitmask;if(!this.isWebGLSupported){const x=qe.bitmaskWebGL;O=O^O&x}this.selfRenderer=O&qe.bitmaskOrder(this.preferredRenderers,0)||O&qe.bitmaskOrder(this.preferredRenderers,1)||O&qe.bitmaskOrder(this.preferredRenderers,2)||O&qe.bitmaskOrder(this.preferredRenderers,3)||O&qe.bitmaskSVG||O&qe.bitmaskCanvas||O&qe.bitmaskDOM||O&qe.bitmaskWebGL||0}this.groupChanged=e!==this.isBackbone||s!==this.isInstanceCanvasCache||r!==this.isSharedCanvasCacheSelf,this.cascadingStateChange=o!==this.isUnderCanvasCache||f!==this.preferredRenderers,this.incompatibleStateChange=this.isTransformed!==t||this.isSharedCanvasCachePlaceholder!==a,this.anyStateChange=this.groupChanged||this.cascadingStateChange||this.incompatibleStateChange||l!==this.selfRenderer||h!==this.groupRenderer||c!==this.sharedCacheRenderer,n!==this.isVisibilityApplied&&(this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()),this.fittability.checkSelfFittability()}getStateString(){return`${`S[ ${this.isDisplayRoot?"displayRoot ":""}${this.isBackbone?"backbone ":""}${this.isInstanceCanvasCache?"instanceCache ":""}${this.isSharedCanvasCachePlaceholder?"sharedCachePlaceholder ":""}${this.isSharedCanvasCacheSelf?"sharedCacheSelf ":""}${this.isTransformed?"TR ":""}${this.isVisibilityApplied?"VIS ":""}${this.selfRenderer?this.selfRenderer.toString(16):"-"},${this.groupRenderer?this.groupRenderer.toString(16):"-"},${this.sharedCacheRenderer?this.sharedCacheRenderer.toString(16):"-"} `}]`}baseSyncTree(){this.syncTree(),this.cleanSyncTreeResults()}syncTree(){const e=this.stateless;if((e||this.parent&&this.parent.cascadingStateChange||this.renderStateDirtyFrame===this.display._frameId)&&this.updateRenderingState(),!e&&this.incompatibleStateChange)return!1;if(this.stateless=!1,e&&(this.isTransformed&&this.display.markTransformRootDirty(this,!0),this.attachNodeListeners()),this.isSharedCanvasCachePlaceholder)this.sharedSyncTree();else if(e||this.skipPruningFrame===this.display._frameId||this.anyStateChange){this.prepareChildInstances(e),this.firstDrawable,this.lastDrawable,this.firstInnerDrawable,this.lastInnerDrawable;const t=this.updateSelfDrawable();this.localSyncTree(t),this.groupSyncTree(e)}return!0}localSyncTree(e){const t=this.display._frameId;let n=this.selfDrawable,s=n,r=null;e&&(r=Jo.newForDisplay(null,null,this.display));let a=r,o=e?null:this.selfDrawable;for(let l=0;l<this.children.length;l++){let h=this.children[l];h.syncTree()||(h=this.updateIncompatibleChildInstance(h,l),h.syncTree());const f=h.shouldIncludeInParentDrawables();f&&h.firstDrawable&&(s?to.connectDrawables(s,h.firstDrawable,this.display):n=h.firstDrawable,s=h.lastDrawable);const g=h.stitchChangeIncluded,v=f;h.stitchChangeIncluded=v,h.stitchChangeFrame===t&&(h.firstChangeInterval=h.lastChangeInterval=Jo.newForDisplay(null,null,this.display));const A=h.firstChangeInterval;let P=a&&a.drawableAfter===null;const w=A&&A.drawableBefore===null;if(h.stitchChangeBefore===t&&!P&&!w){const D=Jo.newForDisplay(o,null,this.display);a&&(a.nextChangeInterval=D),a=D,r=r||a,P=!0}if((g||v)&&(P?A?A.drawableBefore===null?(a.drawableAfter=A.drawableAfter,a.nextChangeInterval=A.nextChangeInterval,a=h.lastChangeInterval===A?a:h.lastChangeInterval):(a.drawableAfter=h.firstDrawable,a.nextChangeInterval=A,a=h.lastChangeInterval):a.drawableAfter=h.firstDrawable:A&&(r=r||A,A.drawableBefore===null&&(A.drawableBefore=o),a&&(a.nextChangeInterval=A),a=h.lastChangeInterval),o=a&&a.drawableAfter===null?null:h.lastDrawable?h.lastDrawable:o),l===this.children.length-1&&h.stitchChangeAfter===t&&!(a&&a.drawableAfter===null)){const D=Jo.newForDisplay(o,null,this.display);a&&(a.nextChangeInterval=D),a=D,r=r||a}h.cleanSyncTreeResults()}!r&&this.stitchChangeOnChildren===this.display._frameId&&this.children.length===0&&(r=a=Jo.newForDisplay(null,null,this.display)),this.firstChangeInterval=r,this.lastChangeInterval=a,this.firstDrawable=this.firstInnerDrawable=n,this.lastDrawable=this.lastInnerDrawable=s}updateSelfDrawable(){if(this.node.isPainted()){const e=this.selfRenderer;if(!this.selfDrawable||!(this.selfDrawable.renderer&e&qe.bitmaskRendererArea))return this.selfDrawable&&this.selfDrawable.markForDisposal(this.display),this.selfDrawable=qe.createSelfDrawable(this,this.node,e,this.fittability.ancestorsFittable),!0}return!1}updateIncompatibleChildInstance(e,t){this.display.markInstanceRootForDisposal(e);const n=bc.createFromPool(this.display,this.trail.copy().addDescendant(e.node,t),!1,!1);return this.replaceInstanceWithIndex(e,n,t),n}groupSyncTree(e){const t=this.groupRenderer,n=!!t!=!!this.groupDrawable||!e&&this.groupChanged||this.groupDrawable&&this.groupDrawable.renderer!==t;n&&(this.groupDrawable&&(this.groupDrawable.markForDisposal(this.display),this.groupDrawable=null),this.firstChangeInterval=this.lastChangeInterval=Jo.newForDisplay(null,null,this.display)),t&&(this.firstDrawable&&to.disconnectBefore(this.firstDrawable,this.display),this.lastDrawable&&to.disconnectAfter(this.lastDrawable,this.display),this.isBackbone?(n&&(this.groupDrawable=Nh.createFromPool(this.display,this,this.getTransformRootInstance(),t,this.isDisplayRoot),this.isTransformed&&this.display.markTransformRootDirty(this,!0)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isInstanceCanvasCache?(n&&(this.groupDrawable=fQ.createFromPool(t,this)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isSharedCanvasCacheSelf&&n&&(this.groupDrawable=o_.createFromPool(t,this)),this.groupDrawable.setFittable(this.fittability.ancestorsFittable),this.firstDrawable=this.lastDrawable=this.groupDrawable),n?this.firstChangeInterval=this.lastChangeInterval=Jo.newForDisplay(null,null,this.display):t&&(this.firstChangeInterval=this.lastChangeInterval=null)}sharedSyncTree(){this.ensureSharedCacheInitialized();const e=this.sharedCacheRenderer;(!this.sharedCacheDrawable||this.sharedCacheDrawable.renderer!==e)&&(this.sharedCacheDrawable&&this.sharedCacheDrawable.markForDisposal(this.display),this.sharedCacheDrawable=new gQ(this.trail,e,this,this.sharedCacheInstance),this.firstDrawable=this.sharedCacheDrawable,this.lastDrawable=this.sharedCacheDrawable,this.firstChangeInterval=this.lastChangeInterval=Jo.newForDisplay(null,null,this.display))}prepareChildInstances(e){for(;this.instanceRemovalCheckList.length;){const t=this.instanceRemovalCheckList.pop();t.addRemoveCounter===-1&&(t.addRemoveCounter=0,this.display.markInstanceRootForDisposal(t))}if(e)for(let t=0;t<this.node.children.length;t++){const n=this.node.children[t];this.appendInstance(bc.createFromPool(this.display,this.trail.copy().addDescendant(n,t),!1,!1))}}ensureSharedCacheInitialized(){if(!this.sharedCacheInstance){const e=this.node.getId();this.sharedCacheInstance=this.display._sharedCanvasInstances[e],this.sharedCacheInstance||(this.sharedCacheInstance=bc.createFromPool(this.display,new Yi(this.node),!1,!0),this.sharedCacheInstance.syncTree(),this.display._sharedCanvasInstances[e]=this.sharedCacheInstance,this.display.markTransformRootDirty(this.sharedCacheInstance,!0)),this.sharedCacheInstance.externalReferenceCount++,this.isTransformed&&this.display.markTransformRootDirty(this,!0)}}shouldIncludeInParentDrawables(){return this.node.isVisible()||!this.node.isExcludeInvisible()}findPreviousDrawable(e){for(let t=e-1;t>=0;t--){const n=this.children[t].lastDrawable;if(n!==null)return n}return null}findNextDrawable(e){const t=this.children.length;for(let n=e+1;n<t;n++){const s=this.children[n].firstDrawable;if(s!==null)return s}return null}appendInstance(e){this.insertInstance(e,this.children.length)}insertInstance(e,t){e.stitchChangeFrame=this.display._frameId,this.stitchChangeOnChildren=this.display._frameId,this.children.splice(t,0,e),e.parent=this,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>this.afterStableIndex?this.afterStableIndex=t+1:this.afterStableIndex++,this.fittability.onInsert(e.fittability),this.relativeTransform.addInstance(e),this.markChildVisibilityDirty()}removeInstance(e){this.removeInstanceWithIndex(e,ie.indexOf(this.children,e))}removeInstanceWithIndex(e,t){const n=this.display._frameId;e.stitchChangeFrame=n,this.stitchChangeOnChildren=n,t-1>=0&&(this.children[t-1].stitchChangeAfter=n),t+1<this.children.length&&(this.children[t+1].stitchChangeBefore=n),this.children.splice(t,1),e.parent=null,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>=this.afterStableIndex?this.afterStableIndex=t:this.afterStableIndex--,this.fittability.onRemove(e.fittability),this.relativeTransform.removeInstance(e)}replaceInstanceWithIndex(e,t,n){this.removeInstanceWithIndex(e,n),this.insertInstance(t,n)}reorderInstances(e,t){const n=this.display._frameId;this.children.splice(e,t-e+1);for(let s=e;s<=t;s++){const r=this.findChildInstanceOnNode(this.node._children[s]);this.children.splice(s,0,r),r.stitchChangeFrame=n,s>e&&(r.stitchChangeAfter=n),s<t&&(r.stitchChangeBefore=n)}this.stitchChangeOnChildren=n,this.beforeStableIndex=Math.min(this.beforeStableIndex,e-1),this.afterStableIndex=Math.max(this.afterStableIndex,t+1)}findChildInstanceOnNode(e){const t=e.getInstances();for(let n=0;n<t.length;n++)if(t[n].oldParent===this)return t[n];return null}onChildInserted(e,t){let n=this.findChildInstanceOnNode(e);n?n.addRemoveCounter+=1:n=bc.createFromPool(this.display,this.trail.copy().addDescendant(e,t),!1,!1),this.insertInstance(n,t),this.markSkipPruning()}onChildRemoved(e,t){const n=this.findChildInstanceOnNode(e);n.addRemoveCounter-=1,this.instanceRemovalCheckList.push(n),this.removeInstanceWithIndex(n,t),this.markSkipPruning()}onChildrenReordered(e,t){this.reorderInstances(e,t),this.markSkipPruning()}onVisibilityChange(){this.stitchChangeFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning(),this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()}onOpacityChange(){this.markRenderStateDirty()}markChildVisibilityDirty(){this.childVisibilityDirty||(this.childVisibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty())}updateDrawableFittability(e){this.selfDrawable&&this.selfDrawable.setFittable(e),this.groupDrawable&&this.groupDrawable.setFittable(e)}updateVisibility(e,t,n,s){this.visibilityDirty&&(s=!0);const r=this.node.isVisible(),a=this.visible,o=this.relativeVisible,l=this.selfVisible,h=this.node.voicingVisibleProperty.value,c=this.voicingVisible,f=a&&c;this.visible=e&&r,this.voicingVisible=t&&h,this.relativeVisible=n&&r,this.selfVisible=this.isVisibilityApplied?!0:this.relativeVisible;const g=this.children.length;for(let A=0;A<g;A++){const P=this.children[A];(s||P.visibilityDirty||P.childVisibilityDirty)&&P.updateVisibility(this.visible,this.voicingVisible,this.isVisibilityApplied?!0:this.relativeVisible,s)}this.visibilityDirty=!1,this.childVisibilityDirty=!1,this.visible!==a&&this.visibleEmitter.emit(),this.relativeVisible!==o&&this.relativeVisibleEmitter.emit(),this.selfVisible!==l&&this.selfVisibleEmitter.emit();const v=this.voicingVisible&&this.visible;v!==f&&this.canVoiceEmitter.emit(v)}getDescendantCount(){let e=this.children.length;for(let t=0;t<this.children.length;t++)e+=this.children[t].getDescendantCount();return e}addSVGGroup(e){this.svgGroups.push(e)}removeSVGGroup(e){gs(this.svgGroups,e)}lookupSVGGroup(e){const t=this.svgGroups.length;for(let n=0;n<t;n++){const s=this.svgGroups[n];if(s.block===e)return s}return null}getFilterRootInstance(){return this.isBackbone||this.isInstanceCanvasCache||!this.parent?this:this.parent.getFilterRootInstance()}getTransformRootInstance(){return this.isTransformed||!this.parent?this:this.parent.getTransformRootInstance()}getVisibilityRootInstance(){return this.isVisibilityApplied||!this.parent?this:this.parent.getVisibilityRootInstance()}attachNodeListeners(){this.relativeTransform.attachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.addListener(this.childInsertedListener),this.node.childRemovedEmitter.addListener(this.childRemovedListener),this.node.childrenReorderedEmitter.addListener(this.childrenReorderedListener),this.node.visibleProperty.lazyLink(this.visibilityListener),this.node.voicingVisibleProperty.lazyLink(this.visibilityListener),this.node.filterChangeEmitter.addListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.lazyLink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.addListener(this.markRenderStateDirtyListener))}detachNodeListeners(){this.relativeTransform.detachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.removeListener(this.childInsertedListener),this.node.childRemovedEmitter.removeListener(this.childRemovedListener),this.node.childrenReorderedEmitter.removeListener(this.childrenReorderedListener),this.node.visibleProperty.unlink(this.visibilityListener),this.node.voicingVisibleProperty.unlink(this.visibilityListener),this.node.filterChangeEmitter.removeListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.unlink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.removeListener(this.markRenderStateDirtyListener))}markRenderStateDirty(){this.renderStateDirtyFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}markSkipPruning(){this.skipPruningFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}getBranchIndexTo(e){const t=this.branchIndexMap[e.id];if(t!==void 0)return t;const n=this.trail.getBranchIndexTo(e.trail);return this.branchIndexMap[e.id]=n,e.branchIndexMap[this.id]=n,this.branchIndexReferences.push(e),e.branchIndexReferences.push(this),n}dispose(){for(this.active=!1;this.branchIndexReferences.length;){const t=this.branchIndexReferences.pop();delete this.branchIndexMap[t.id],delete t.branchIndexMap[this.id],gs(t.branchIndexReferences,this)}this.groupDrawable&&this.groupDrawable.disposeImmediately(this.display),this.sharedCacheDrawable&&this.sharedCacheDrawable.disposeImmediately(this.display),this.selfDrawable&&this.selfDrawable.disposeImmediately(this.display);const e=this.children.length;for(let t=0;t<e;t++)this.children[t].dispose();for(;this.instanceRemovalCheckList.length;){const t=this.instanceRemovalCheckList.pop();t.active&&t.dispose()}this.stateless||this.detachNodeListeners(),this.node.removeInstance(this),this.sharedCacheInstance&&(this.sharedCacheInstance.externalReferenceCount--,this.sharedCacheInstance.externalReferenceCount===0&&(delete this.display._sharedCanvasInstances[this.node.getId()],this.sharedCacheInstance.dispose())),this.cleanInstance(null,null),this.visibleEmitter.removeAllListeners(),this.relativeVisibleEmitter.removeAllListeners(),this.selfVisibleEmitter.removeAllListeners(),this.canVoiceEmitter.removeAllListeners(),this.freeToPool()}audit(e,t){}auditVisibility(e){}auditChangeIntervals(e,t,n,s){if(e){let r=e;for(;r!==t;)r=r.oldNextDrawable}if(n){let r=n;for(;r!==s;)r=r.nextDrawable}}toString(){return`${this.id}#${this.node?`${this.node.constructor.name?this.node.constructor.name:"?"}#${this.node.id}`:"-"}`}}es.mixInto(bc);class bQ extends l_{constructor(e,t){super(e,t,"mouseTouchAreaOverlay")}addShapes(){Za.eachTrailUnder(new Yi(this.rootNode),e=>{const t=e.lastNode();if(!t.isVisible())return!0;if((t.mouseArea||t.touchArea)&&e.isVisible()){const n=e.getTransform();t.mouseArea&&this.addShape(n.transformShape(t.mouseArea instanceof pt?zt.bounds(t.mouseArea):t.mouseArea),"rgba(0,0,255,0.8)",!0),t.touchArea&&this.addShape(n.transformShape(t.touchArea instanceof pt?zt.bounds(t.touchArea):t.touchArea),"rgba(255,0,0,0.8)",!1)}return!1})}}class _Q{constructor(e,t){this.display=e,this.rootNode=t,this.pointerSVGContainer=document.createElement("div"),this.pointerSVGContainer.style.position="absolute",this.pointerSVGContainer.style.top="0",this.pointerSVGContainer.style.left="0",this.pointerSVGContainer.style["pointer-events"]="none";const n=10,s=1,r=(n+s/2)*2,a=r/2;e.sizeProperty.lazyLink(l=>{this.pointerSVGContainer.setAttribute("width",""+l.width),this.pointerSVGContainer.setAttribute("height",""+l.height),this.pointerSVGContainer.style.clip=`rect(0px,${l.width}px,${l.height}px,0px)`});const o=It.IDENTITY.copy();this.pointerAdded=l=>{const h=document.createElementNS(Kn,"svg");h.style.position="absolute",h.style.top="0",h.style.left="0",h.style["pointer-events"]="none",Qi.prepareForTransform(h),h.setAttribute("width",""+r),h.setAttribute("height",""+r);const c=document.createElementNS(Kn,"circle");c.setAttribute("cx",""+(n+s/2)),c.setAttribute("cy",""+(n+s/2)),c.setAttribute("r",""+n),c.setAttribute("style","fill:black;"),c.setAttribute("style","stroke:white;"),c.setAttribute("opacity","0.4");const f=A=>Qi.applyPreparedTransform(o.setToTranslation(A.x-a,A.y-a),h),g=()=>{l.isTouchLike()&&(this.pointerSVGContainer.removeChild(h),l.removeInputListener(v))},v={move:()=>{l.point&&f(l.point)},up:g,cancel:g,focus:()=>{l instanceof Dv&&l.point&&(f(l.point),this.pointerSVGContainer.appendChild(h))},blur:()=>{this.pointerSVGContainer.contains(h)&&this.pointerSVGContainer.removeChild(h)}};l.addInputListener(v),v.move(),h.appendChild(c),this.pointerSVGContainer.appendChild(h)},e._input.pointerAddedEmitter.addListener(this.pointerAdded),e._input&&e._input.mouse&&this.pointerAdded(e._input.mouse),this.domElement=this.pointerSVGContainer}dispose(){this.display._input.pointerAddedEmitter.removeListener(this.pointerAdded)}update(){}}class AQ{constructor(e){this.display=e;const t=document.createElementNS(Kn,"svg");this.domElement=t,t.style.position="absolute",t.setAttribute("class","safari-workaround"),t.style.top="0",t.style.left="0",t.style["pointer-events"]="none",e.sizeProperty.link(n=>{t.setAttribute("width",""+n.width),t.setAttribute("height",""+n.height),t.style.clip=`rect(0px,${n.width}px,${n.height}px,0px)`}),this.rect=document.createElementNS(Kn,"rect"),t.appendChild(this.rect),this.update()}update(){const e=ol.nextDouble();this.rect.setAttribute("x",""+e),this.rect.setAttribute("y",""+e),this.rect.setAttribute("style","fill: rgba(255,200,100,0); stroke: none;"),this.display.width&&this.rect.setAttribute("width",""+(this.display.width-e*2)),this.display.height&&this.rect.setAttribute("height",""+(this.display.height-e*2))}}const wQ=100;class SQ{constructor(e,t){this.initialPointerPoint=null,this.relativePointerDistance=0;const n=Ne()({interactiveHighlightsEnabledProperty:new Mt(!1)},t);this.display=e;const s={move:this.handleMove.bind(this)},r=()=>{this.display.focusManager.pdomFocusHighlightsVisibleProperty.value=!0},a={};["click","input","change","keydown","keyup"].forEach(v=>{a[v]=r}),this.display.addInputListener(a);const o=v=>{Qe.isKeyEvent(v,Qe.KEY_TAB)&&r()};or.keyupEmitter.addListener(o);const l=v=>{this.display.focusManager.interactiveHighlightsVisibleProperty.value=v};n.interactiveHighlightsEnabledProperty.link(l);const h=n.interactiveHighlightsEnabledProperty,c=this.display.focusManager.pdomFocusHighlightsVisibleProperty,f=new Cn([h,c],(v,A)=>{v&&A?(this.display.addInputListener(s),this.initialPointerPoint=null,this.relativePointerDistance=0):this.display.hasInputListener(s)&&this.display.removeInputListener(s)}),g={down:v=>{if(this.display.bounds.containsPoint(v.pointer.point)){this.display.focusManager.pdomFocusHighlightsVisibleProperty.value=!1;const A=Gc();A&&(v.trail.nodes.includes(A)||(Bn.pdomFocus=null))}}};this.display.addInputListener(g),this.disposeHighlightVisibilityController=()=>{this.display.removeInputListener(a),or.keyupEmitter.removeListener(o),this.display.removeInputListener(g),l&&n.interactiveHighlightsEnabledProperty.unlink(l),f&&f.dispose()}}handleMove(e){this.initialPointerPoint===null?this.initialPointerPoint=e.pointer.point:(this.relativePointerDistance=e.pointer.point.distance(this.initialPointerPoint),this.relativePointerDistance>wQ&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.value=!1,this.display.focusManager.interactiveHighlightsVisibleProperty.value=!0))}dispose(){this.disposeHighlightVisibilityController()}}const PQ=a_.fromByteArray,TQ={"scenery-grab-pointer":["grab","-moz-grab","-webkit-grab","pointer"],"scenery-grabbing-pointer":["grabbing","-moz-grabbing","-webkit-grabbing","pointer"]};let xQ=1,Mk=0;class Do{constructor(e,t){this._requestAnimationFrameID=null,this._highlightVisibilityController=null,this._refreshSVGEmitter=new kn,this._refreshSVGPending=!1;const n=Ne()({width:t&&t.container&&t.container.clientWidth||640,height:t&&t.container&&t.container.clientHeight||480,allowCSSHacks:!0,allowSafariRedrawWorkaround:!1,allowSceneOverflow:!1,allowLayerFitting:!1,forceSVGRefresh:!1,defaultCursor:"default",backgroundColor:null,preserveDrawingBuffer:!1,allowWebGL:!0,accessibility:!0,interactiveHighlightsEnabledProperty:new Mt(!1),baseHeadingLevel:1,interactive:!0,listenToOnlyElement:!1,batchDOMEvents:!1,assumeFullWindow:!1,aggressiveContextRecreation:!0,passiveEvents:Zn.safari?!1:null,allowBackingScaleAntialiasing:!0,preventMultitouch:!1,interruptMultitouch:!1},t);this.id=xQ++,this._accessible=n.accessibility,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._allowWebGL=n.allowWebGL,this._allowCSSHacks=n.allowCSSHacks,this._allowSceneOverflow=n.allowSceneOverflow,this._defaultCursor=n.defaultCursor,this.sizeProperty=new oi(new ji(n.width,n.height)),this._currentSize=new ji(-1,-1),this._rootNode=e,this._rootNode.addRootedDisplay(this),this._rootBackbone=null,this._domElement=n.container?Nh.repurposeBackboneContainer(n.container):Nh.createRootDivBackbone(),this._sharedCanvasInstances={},this._baseInstance=null,this._frameId=0,this._dirtyTransformRoots=[],this._dirtyTransformRootsWithoutPass=[],this._instanceRootsToDispose=[],this._reduceReferencesNeeded=[],this._drawablesToDispose=[],this._drawablesToChangeBlock=[],this._drawablesToUpdateLinks=[],this._changeIntervalsToDispose=[],this._lastCursor=null,this._currentBackgroundCSS=null,this._backgroundColor=null,this._input=null,this._inputListeners=[],this._interactive=n.interactive,this._listenToOnlyElement=n.listenToOnlyElement,this._batchDOMEvents=n.batchDOMEvents,this._assumeFullWindow=n.assumeFullWindow,this._passiveEvents=n.passiveEvents,this._preventMultitouch=n.preventMultitouch,this._interruptMultitouch=n.interruptMultitouch,this._aggressiveContextRecreation=n.aggressiveContextRecreation,this._allowBackingScaleAntialiasing=n.allowBackingScaleAntialiasing,this._allowLayerFitting=n.allowLayerFitting,this._forceSVGRefresh=n.forceSVGRefresh,this._overlays=[],this._pointerOverlay=null,this._pointerAreaOverlay=null,this._hitAreaOverlay=null,this._canvasAreaBoundsOverlay=null,this._fittedBlockBoundsOverlay=null,this._interactiveHighlightsEnabledProperty=n.interactiveHighlightsEnabledProperty,this.applyCSSHacks(),this.setBackgroundColor(n.backgroundColor);const s=new If;if(this.descriptionUtteranceQueue=new Xb(s,{initialize:this._accessible,featureSpecificAnnouncingControlPropertyName:"descriptionCanAnnounceProperty"}),Zn.safari&&n.allowSafariRedrawWorkaround&&this.addOverlay(new AQ(this)),this.focusManager=new Bn,this._accessible&&(this._focusRootNode=new Ge,this._focusOverlay=new la(this,this._focusRootNode,Do,{pdomFocusHighlightsVisibleProperty:this.focusManager.pdomFocusHighlightsVisibleProperty,interactiveHighlightsVisibleProperty:this.focusManager.interactiveHighlightsVisibleProperty,readingBlockHighlightsVisibleProperty:this.focusManager.readingBlockHighlightsVisibleProperty}),this.addOverlay(this._focusOverlay),this._highlightVisibilityController=new SQ(this,{interactiveHighlightsEnabledProperty:this._interactiveHighlightsEnabledProperty})),this._accessible){this._rootPDOMInstance=Dc.pool.create(null,this,new Yi,n.baseHeadingLevel-1),gn.rebuildInstanceTree(this._rootPDOMInstance),this._domElement.appendChild(this._rootPDOMInstance.peer.primarySibling);const r=s.ariaLiveContainer;this._domElement.appendChild(r),r.style[mi.userSelect]="none",this._boundHandleFullScreenNavigation=this.handleFullScreenNavigation.bind(this),or.keydownEmitter.addListener(this._boundHandleFullScreenNavigation)}}getDOMElement(){return this._domElement}get domElement(){return this.getDOMElement()}updateDisplay(){const e=!!this._baseInstance;for(this._input&&this._input.validatePointers(),this._accessible&&this._rootPDOMInstance.peer.updateSubtreePositioning(),this._rootNode.validateWatchedBounds(),this._baseInstance=this._baseInstance||bc.createFromPool(this,new Yi(this._rootNode),!0,!1),this._baseInstance.baseSyncTree(),e&&this.markTransformRootDirty(this._baseInstance,this._baseInstance.isTransformed);this._drawablesToUpdateLinks.length;)this._drawablesToUpdateLinks.pop().updateLinks();for(;this._changeIntervalsToDispose.length;)this._changeIntervalsToDispose.pop().dispose();for(this._rootBackbone=this._rootBackbone||this._baseInstance.groupDrawable;this._drawablesToChangeBlock.length;)this._drawablesToChangeBlock.pop().updateBlock();for(this.updateDirtyTransformRoots(),this._baseInstance.updateVisibility(!0,!0,!0,!1);this._instanceRootsToDispose.length;)this._instanceRootsToDispose.pop().dispose();for(;this._drawablesToDispose.length;)this._drawablesToDispose.pop().dispose();if(this._rootBackbone.update(),this.updateCursor(),this.updateBackgroundColor(),this.updateSize(),this._overlays.length){let t=this._rootBackbone.lastZIndex;for(let n=0;n<this._overlays.length;n++){const s=this._overlays[n];s.domElement.style.zIndex=""+t++,s.update()}}for(;this._reduceReferencesNeeded.length;)this._reduceReferencesNeeded.pop().reduceReferences();this._frameId++,gn.auditPDOMDisplays(this.rootNode),(this._forceSVGRefresh||this._refreshSVGPending)&&(this._refreshSVGPending=!1,this.refreshSVG())}getPhetioElementAt(e){const t=this._rootNode.getPhetioMouseHit(e);return t==="phetioNotSelectable"?null:t}updateSize(){let e=!1;this.size.width!==this._currentSize.width&&(e=!0,this._currentSize.width=this.size.width,this._domElement.style.width=`${this.size.width}px`),this.size.height!==this._currentSize.height&&(e=!0,this._currentSize.height=this.size.height,this._domElement.style.height=`${this.size.height}px`),e&&!this._allowSceneOverflow&&(this._domElement.style.clip=`rect(0px,${this.size.width}px,${this.size.height}px,0px)`)}isWebGLAllowed(){return this._allowWebGL}get webglAllowed(){return this.isWebGLAllowed()}getRootNode(){return this._rootNode}get rootNode(){return this.getRootNode()}getRootBackbone(){return this._rootBackbone}get rootBackbone(){return this.getRootBackbone()}getSize(){return this.sizeProperty.value}get size(){return this.getSize()}getBounds(){return this.size.toBounds()}get bounds(){return this.getBounds()}setSize(e){this.sizeProperty.value=e}setWidthHeight(e,t){this.setSize(new ji(e,t))}getWidth(){return this.size.width}get width(){return this.getWidth()}set width(e){this.setWidth(e)}setWidth(e){return this.getWidth()!==e&&this.setSize(new ji(e,this.getHeight())),this}getHeight(){return this.size.height}get height(){return this.getHeight()}set height(e){this.setHeight(e)}setHeight(e){return this.getHeight()!==e&&this.setSize(new ji(this.getWidth(),e)),this}setBackgroundColor(e){return this._backgroundColor=e,this}set backgroundColor(e){this.setBackgroundColor(e)}get backgroundColor(){return this.getBackgroundColor()}getBackgroundColor(){return this._backgroundColor}setInteractiveHighlightsEnabled(e){return this._interactiveHighlightsEnabledProperty.value=e,this}set interactiveHighlightsEnabled(e){this.setInteractiveHighlightsEnabled(e)}get interactiveHighlightsEnabled(){return this.getInteractiveHighlightsEnabled()}getInteractiveHighlightsEnabled(){return this._interactiveHighlightsEnabledProperty.value}get interactive(){return this._interactive}set interactive(e){this._accessible&&e!==this._interactive&&this._rootPDOMInstance.peer.recursiveDisable(!e),this._interactive=e,!this._interactive&&this._input&&(this._input.interruptPointers(),this._input.clearBatchedEvents(),this._input.removeTemporaryPointers(),this._rootNode.interruptSubtreeInput(),this.interruptInput())}addOverlay(e){this._overlays.push(e),this._domElement.appendChild(e.domElement),e.domElement.setAttribute("aria-hidden","true")}removeOverlay(e){this._domElement.removeChild(e.domElement),this._overlays.splice(ie.indexOf(this._overlays,e),1)}getPDOMRootElement(){return this._accessible?this._rootPDOMInstance.peer.primarySibling:null}get pdomRootElement(){return this.getPDOMRootElement()}isAccessible(){return this._accessible}isElementUnderPDOM(e,t){if(!this._accessible)return!1;const n=this.pdomRootElement.contains(e),s=e!==this.pdomRootElement;return t?n:n&&s}handleFullScreenNavigation(e){if(Gl.isFullScreen()&&Qe.isKeyEvent(e,Qe.KEY_TAB)){const t=this.pdomRootElement;(e.shiftKey?Ti.getPreviousFocusable(t||void 0):Ti.getNextFocusable(t||void 0))===e.target&&e.preventDefault()}}getUsedRenderersBitmask(){function e(t){let n=0;return ie.each(t.blocks,s=>{s instanceof jS&&s.domDrawable instanceof Nh?n=n|e(s.domDrawable):n=n|s.renderer}),n}return e(this._rootBackbone)&qe.bitmaskRendererArea}markTransformRootDirty(e,t){t?this._dirtyTransformRoots.push(e):this._dirtyTransformRootsWithoutPass.push(e)}updateDirtyTransformRoots(){for(;this._dirtyTransformRoots.length;)this._dirtyTransformRoots.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!0);for(;this._dirtyTransformRootsWithoutPass.length;)this._dirtyTransformRootsWithoutPass.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!1)}markDrawableChangedBlock(e){this._drawablesToChangeBlock.push(e)}markForReducedReferences(e){this._reduceReferencesNeeded.push(e)}markInstanceRootForDisposal(e){this._instanceRootsToDispose.push(e)}markDrawableForDisposal(e){this._drawablesToDispose.push(e)}markDrawableForLinksUpdate(e){this._drawablesToUpdateLinks.push(e)}markChangeIntervalToDispose(e){this._changeIntervalsToDispose.push(e)}updateBackgroundColor(){const e=this._backgroundColor===null?"":this._backgroundColor.toCSS?this._backgroundColor.toCSS():this._backgroundColor;e!==this._currentBackgroundCSS&&(this._currentBackgroundCSS=e,this._domElement.style.backgroundColor=e)}updateCursor(){if(this._input&&this._input.mouse&&this._input.mouse.point){if(this._input.mouse.cursor){this.setSceneCursor(this._input.mouse.cursor);return}const e=this._rootNode.trailUnderPointer(this._input.mouse);if(e)for(let t=e.getCursorCheckIndex();t>=0;t--){const s=e.nodes[t].getEffectiveCursor();if(s){this.setSceneCursor(s);return}}}this.setSceneCursor(this._defaultCursor)}setElementCursor(e){this._domElement.style.cursor=e,this._assumeFullWindow&&(document.body.style.cursor=e)}setSceneCursor(e){if(e!==this._lastCursor){this._lastCursor=e;const t=TQ[e];if(t)for(let n=t.length-1;n>=0;n--)this.setElementCursor(t[n]);else this.setElementCursor(e)}}applyCSSHacks(){this._allowSceneOverflow||(this._domElement.style.overflow="hidden"),this._domElement.style.msTouchAction="none",mi.setStyle(this._domElement,mi.fontSmoothing,"antialiased"),this._allowCSSHacks&&(this._listenToOnlyElement||(document.onselectstart=()=>!1,document.body.style.msContentZooming="none"),mi.setStyle(this._domElement,mi.userDrag,"none"),mi.setStyle(this._domElement,mi.userSelect,"none"),mi.setStyle(this._domElement,mi.touchAction,"none"),mi.setStyle(this._domElement,mi.touchCallout,"none"),mi.setStyle(this._domElement,mi.tapHighlightColor,"rgba(0,0,0,0)"))}canvasDataURL(e){this.canvasSnapshot(t=>{e(t.toDataURL())})}canvasSnapshot(e){const t=document.createElement("canvas");t.width=this.size.width,t.height=this.size.height;const n=t.getContext("2d");this._rootNode.renderToCanvas(t,n,()=>{e(t,n.getImageData(0,0,t.width,t.height))},this.domElement.style.backgroundColor)}setPointerDisplayVisible(e){const t=!!this._pointerOverlay;e!==t&&(e?(this._pointerOverlay=new _Q(this,this._rootNode),this.addOverlay(this._pointerOverlay)):(this.removeOverlay(this._pointerOverlay),this._pointerOverlay.dispose(),this._pointerOverlay=null))}setPointerAreaDisplayVisible(e){const t=!!this._pointerAreaOverlay;e!==t&&(e?(this._pointerAreaOverlay=new bQ(this,this._rootNode),this.addOverlay(this._pointerAreaOverlay)):(this.removeOverlay(this._pointerAreaOverlay),this._pointerAreaOverlay.dispose(),this._pointerAreaOverlay=null))}setHitAreaDisplayVisible(e){const t=!!this._hitAreaOverlay;e!==t&&(e?(this._hitAreaOverlay=new up(this,this._rootNode),this.addOverlay(this._hitAreaOverlay)):(this.removeOverlay(this._hitAreaOverlay),this._hitAreaOverlay.dispose(),this._hitAreaOverlay=null))}setCanvasNodeBoundsVisible(e){const t=!!this._canvasAreaBoundsOverlay;e!==t&&(e?(this._canvasAreaBoundsOverlay=new oQ(this,this._rootNode),this.addOverlay(this._canvasAreaBoundsOverlay)):(this.removeOverlay(this._canvasAreaBoundsOverlay),this._canvasAreaBoundsOverlay.dispose(),this._canvasAreaBoundsOverlay=null))}setFittedBlockBoundsVisible(e){const t=!!this._fittedBlockBoundsOverlay;e!==t&&(e?(this._fittedBlockBoundsOverlay=new lQ(this,this._rootNode),this.addOverlay(this._fittedBlockBoundsOverlay)):(this.removeOverlay(this._fittedBlockBoundsOverlay),this._fittedBlockBoundsOverlay.dispose(),this._fittedBlockBoundsOverlay=null))}resizeOnWindowResize(){const e=()=>{this.setWidthHeight(self.innerWidth,self.innerHeight)};self.addEventListener("resize",e),e()}updateOnRequestAnimationFrame(e){let t=0,n=0;const s=this;(function r(){s._requestAnimationFrameID=self.requestAnimationFrame(r,s._domElement);const a=Date.now();t!==0&&(n=(a-t)/1e3),t=a;const o=document.timeline.currentTime;(o===null||o!==Mk)&&(Mk=o,zn.emit(n)),e&&e(n),s.updateDisplay()})()}cancelUpdateOnRequestAnimationFrame(){this._requestAnimationFrameID!==null&&self.cancelAnimationFrame(this._requestAnimationFrameID)}initializeEvents(e){const t=new cg(this,!this._listenToOnlyElement,this._batchDOMEvents,this._assumeFullWindow,this._passiveEvents,this._preventMultitouch,this._interruptMultitouch,e);this._input=t,t.connectListeners()}detachEvents(){this._input.disconnectListeners(),this._input=null}addInputListener(e){return ie.includes(this._inputListeners,e)||this._inputListeners.push(e),this}removeInputListener(e){return this._inputListeners.splice(ie.indexOf(this._inputListeners,e),1),this}hasInputListener(e){for(let t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}getInputListeners(){return this._inputListeners.slice(0)}get inputListeners(){return this.getInputListeners()}interruptInput(){const e=this.inputListeners;for(let t=0;t<e.length;t++){const n=e[t];n.interrupt&&n.interrupt()}return this}interruptPointers(){return this._input&&this._input.interruptPointers(),this}interruptOtherPointers(e=null){return this._input&&this._input.interruptPointers(e||this._input.currentSceneryEvent?.pointer||null),this}ensureNotPainting(){}loseWebGLContexts(){(function e(t){t.blocks&&t.blocks.forEach(n=>{const s=n.gl;s&&Qi.loseContext(s);for(let r=n.firstDrawable;r!==null&&(e(r),r!==n.lastDrawable);r=r.nextDrawable);})})(this._rootBackbone)}getDebugHTML(){const e="font-weight: bold; font-size: 120%; margin-top: 5px;";let t=0,n="";n+=`<div style="${e}">Display (${this.id}) Summary</div>`,n+=`${this.size.toString()} frame:${this._frameId} input:${!!this._input} cursor:${this._lastCursor}<br/>`;function s(P){let w=1;for(let T=0;T<P.children.length;T++)w+=s(P.children[T]);return w}n+=`Nodes: ${s(this._rootNode)}<br/>`;function r(P){let w=1;for(let T=0;T<P.children.length;T++)w+=r(P.children[T]);return w}n+=this._baseInstance?`Instances: ${r(this._baseInstance)}<br/>`:"";function a(P){let w=1;if(P.blocks)ie.each(P.blocks,T=>{w+=a(T)});else if(P.firstDrawable&&P.lastDrawable){for(let T=P.firstDrawable;T!==P.lastDrawable;T=T.nextDrawable)w+=a(T);w+=a(P.lastDrawable)}return w}n+=this._rootBackbone?`Drawables: ${a(this._rootBackbone)}<br/>`:"";const o={};function l(P){const w=P.constructor.name;o[w]?o[w]++:o[w]=1}function h(P){let w=0;P.selfDrawable&&(l(P.selfDrawable),w++),P.groupDrawable&&(l(P.groupDrawable),w++),P.sharedCacheDrawable&&(l(P.sharedCacheDrawable),w++);for(let T=0;T<P.children.length;T++)w+=h(P.children[T]);return w}n+=this._baseInstance?`Retained Drawables: ${h(this._baseInstance)}<br/>`:"";for(const P in o)n+=`&nbsp;&nbsp;&nbsp;&nbsp;${P}: ${o[P]}<br/>`;function c(P){if(!P.firstDrawable||!P.lastDrawable)return"";const w=P.domDrawable&&P.domDrawable.blocks;let T=`<div style="margin-left: ${t*20}px">`;if(T+=P.toString(),w||(T+=` (${P.drawableCount} drawables)`),T+="</div>",t+=1,w)for(let D=0;D<P.domDrawable.blocks.length;D++)T+=c(P.domDrawable.blocks[D]);return t-=1,T}if(this._rootBackbone){n+=`<div style="${e}">Block Summary</div>`;for(let P=0;P<this._rootBackbone.blocks.length;P++)n+=c(this._rootBackbone.blocks[P])}function f(P){let w="";function T(B){w+=` <span style="color: #008">${B}</span>`}const D=P.node;w+=P.id,w+=` ${D.constructor.name?D.constructor.name:"?"}`,w+=` <span style="font-weight: ${D.isPainted()?"bold":"normal"}">${D.id}</span>`,w+=D.getDebugHTMLExtras(),D.visible||T("invis"),P.visible||T("I-invis"),P.relativeVisible||T("I-rel-invis"),P.selfVisible||T("I-self-invis"),P.fittability.ancestorsFittable||T("nofit-ancestor"),P.fittability.selfFittable||T("nofit-self"),D.pickable===!0&&T("pickable"),D.pickable===!1&&T("unpickable"),P.trail.isPickable()&&T('<span style="color: #808">hits</span>'),D.getEffectiveCursor()&&T(`effectiveCursor:${D.getEffectiveCursor()}`),D.clipArea&&T("clipArea"),D.mouseArea&&T("mouseArea"),D.touchArea&&T("touchArea"),D.getInputListeners().length&&T("inputListeners"),D.getRenderer()&&T(`renderer:${D.getRenderer()}`),D.isLayerSplit()&&T("layerSplit"),D.opacity<1&&T(`opacity:${D.opacity}`),D.disabledOpacity<1&&T(`disabledOpacity:${D.disabledOpacity}`),D._boundsEventCount>0&&T(`<span style="color: #800">boundsListen:${D._boundsEventCount}:${D._boundsEventSelfCount}</span>`);let M="";switch(D.transform.getMatrix().type){case qt.IDENTITY:M="";break;case qt.TRANSLATION_2D:M="translated";break;case qt.SCALING:M="scale";break;case qt.AFFINE:M="affine";break;case qt.OTHER:M="other";break;default:throw new Error(`invalid matrix type: ${D.transform.getMatrix().type}`)}return M&&(w+=` <span style="color: #88f" title="${D.transform.getMatrix().toString().replace(`
`,"&#10;")}">${M}</span>`),w+=` <span style="color: #888">[Trail ${P.trail.indices.join(".")}]</span>`,w+=` <span style="color: #8c8">${D._rendererSummary.bitmask.toString(16)}${D._rendererBitmask!==qe.bitmaskNodeDefault?` (${D._rendererBitmask.toString(16)})`:""}</span>`,w}function g(P){let w=P.toString();return P.visible&&(w=`<strong>${w}</strong>`),P.dirty&&(w+=P.dirty?' <span style="color: #c00;">[x]</span>':""),P.fittable||(w+=P.dirty?' <span style="color: #0c0;">[no-fit]</span>':""),w}function v(P){let w=`<div style="margin-left: ${t*20}px">`;function T(D,M){w+=` <span style="color: #888">${D}:${g(M)}</span>`}w+=f(P),P.selfDrawable&&T("self",P.selfDrawable),P.groupDrawable&&T("group",P.groupDrawable),P.sharedCacheDrawable&&T("sharedCache",P.sharedCacheDrawable),w+="</div>",n+=w,t+=1,ie.each(P.children,D=>{v(D)}),t-=1}this._baseInstance&&(n+=`<div style="${e}">Root Instance Tree</div>`,v(this._baseInstance)),ie.each(this._sharedCanvasInstances,P=>{n+=`<div style="${e}">Shared Canvas Instance Tree</div>`,v(P)});function A(P){let w=`<div style="margin-left: ${t*20}px">`;if(w+=g(P),P.instance?(w+=` <span style="color: #0a0;">(${P.instance.trail.toPathString()})</span>`,w+=`&nbsp;&nbsp;&nbsp;${f(P.instance)}`):P.backboneInstance&&(w+=` <span style="color: #a00;">(${P.backboneInstance.trail.toPathString()})</span>`,w+=`&nbsp;&nbsp;&nbsp;${f(P.backboneInstance)}`),w+="</div>",n+=w,P.blocks)t+=1,ie.each(P.blocks,T=>{A(T)}),t-=1;else if(P.firstDrawable&&P.lastDrawable){t+=1;for(let T=P.firstDrawable;T!==P.lastDrawable;T=T.nextDrawable)A(T);A(P.lastDrawable),t-=1}}return this._rootBackbone&&(n+='<div style="font-weight: bold;">Root Drawable Tree</div>',A(this._rootBackbone)),n}getDebugURI(){return`data:text/html;charset=utf-8,${encodeURIComponent(`<!DOCTYPE html><html lang="en"><head><title>Scenery Debug Snapshot</title></head><body style="font-size: 12px;">${this.getDebugHTML()}</body></html>`)}`}popupDebug(){self.open(this.getDebugURI())}iframeDebug(){const e=document.createElement("iframe");e.width=""+self.innerWidth,e.height=""+self.innerHeight,e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.zIndex="10000",document.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.write(this.getDebugHTML()),e.contentWindow.document.close(),e.contentWindow.document.body.style.background="white";const t=document.createElement("button");t.style.position="absolute",t.style.top="0",t.style.right="0",t.style.zIndex="10001",document.body.appendChild(t),t.textContent="close",["pointerdown","click","touchdown"].forEach(n=>{t.addEventListener(n,()=>{document.body.removeChild(e),document.body.removeChild(t)},!0)})}getPDOMDebugHTML(){let e="";const t="font-weight: bold; font-size: 120%; margin-top: 5px;",n="&nbsp;&nbsp;&nbsp;&nbsp;";e+=`<div style="${t}">Accessible Instances</div><br>`,s(this._rootPDOMInstance,"");function s(l,h){e+=`${h+N2(`${l.isRootInstance?"":l.node.tagName} ${l.toString()}`)}<br>`,l.children.forEach(c=>{s(c,h+n)})}e+=`<br><div style="${t}">Parallel DOM</div><br>`;let r=this._rootPDOMInstance.peer.primarySibling.outerHTML;r=r.replace(/></g,`>
<`);const a=r.split(`
`);let o="";for(let l=0;l<a.length;l++){const h=a[l],c=h.startsWith("</");c&&(o=o.slice(n.length)),e+=`${o+N2(h)}<br>`,c||(o+=n)}return e}foreignObjectRasterization(e){const t={};let n=0;function s(A){A.id||(A.id=`unknown-canvas-${n++}`),t[A.id]=A.toDataURL()}function r(A){if(A instanceof Nh)ie.each(A.blocks,P=>{r(P)});else if(A instanceof YS&&A.firstDrawable&&A.lastDrawable){for(let P=A.firstDrawable;P!==A.lastDrawable;P=P.nextDrawable)r(P);r(A.lastDrawable),(A instanceof o_||A instanceof XS)&&A.canvas&&A.canvas instanceof self.HTMLCanvasElement&&s(A.canvas)}qv&&A instanceof qv&&(A.domElement instanceof self.HTMLCanvasElement&&s(A.domElement),Array.prototype.forEach.call(A.domElement.getElementsByTagName("canvas"),P=>{s(P)}))}r(this._rootBackbone);const a=document.implementation.createHTMLDocument("");a.documentElement.innerHTML=this.domElement.outerHTML,a.documentElement.setAttribute("xmlns",a.documentElement.namespaceURI),a.documentElement.appendChild(document.createElement("style")).innerHTML=`.${gS.ROOT_CLASS_NAME} { display:none; } `;let o=a.documentElement.getElementsByTagName("canvas");o=Array.prototype.slice.call(o);for(let A=0;A<o.length;A++){const P=o[A],w=P.style.cssText,T=a.createElement("img"),D=t[P.id];T.src=D,T.setAttribute("style",w),P.parentNode.replaceChild(T,P)}const l=this.width,h=this.height,c=()=>{Do.elementToSVGDataURL(a.documentElement,l,h,e)};let f=0,g=!1;const v=Array.prototype.slice.call(a.documentElement.getElementsByTagName("image"));for(let A=0;A<v.length;A++){const P=v[A],w=P.getAttribute("xlink:href");w.slice(0,5)!=="data:"&&(f++,g=!0,(()=>{const T=new self.Image,D=P;T.onload=()=>{const M=document.createElement("canvas");M.width=T.width,M.height=T.height,M.getContext("2d").drawImage(T,0,0),D.setAttribute("xlink:href",M.toDataURL()),--f===0&&c()},T.onerror=()=>{--f===0&&c()},T.src=w})())}g||c()}popupRasterization(){this.foreignObjectRasterization(e=>{e&&self.open(e)})}getTrailFromPDOMIndicesString(e){if(!this._rootPDOMInstance)return null;let t=this._rootPDOMInstance;const n=e.split(Fb);for(let s=0;s<n.length;s++){const r=Number(n[s]);if(t=t.children[r],!t)return null}return t&&t.trail?t.trail:null}refreshSVG(){this._refreshSVGEmitter.emit()}refreshSVGOnNextFrame(){this._refreshSVGPending=!0}dispose(){this._input&&this.detachEvents(),this._rootNode.removeRootedDisplay(this),this._accessible&&(or.keydownEmitter.removeListener(this._boundHandleFullScreenNavigation),this._rootPDOMInstance.dispose()),this._highlightVisibilityController&&this._highlightVisibilityController.dispose(),this._focusOverlay&&this._focusOverlay.dispose(),this.sizeProperty.dispose(),this._baseInstance&&this._baseInstance.dispose(),this.descriptionUtteranceQueue.dispose(),this.focusManager&&this.focusManager.dispose(),this.cancelUpdateOnRequestAnimationFrame()}static elementToSVGDataURL(e,t,n,s){const r=document.createElement("canvas"),a=r.getContext("2d");r.width=t,r.height=n;const o=new self.XMLSerializer().serializeToString(e),l=`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${n}"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">${o}</div></foreignObject></svg>`,h=new self.Image;h.onload=()=>{a.drawImage(h,0,0),s(r.toDataURL())},h.onerror=()=>{s(null)};const c=new BX.TextEncoderLite("utf-8").encode(l),f=PQ(c);h.src=`data:image/svg+xml;base64,${f}`}static assertSubtreeDisposed(e){}static addInputListener(e){ie.includes(Gs.inputListeners,e)||Gs.inputListeners.push(e)}static removeInputListener(e){Gs.inputListeners.splice(ie.indexOf(Gs.inputListeners,e),1)}static hasInputListener(e){return ie.includes(Gs.inputListeners,e)}static interruptInput(){const e=Gs.inputListeners.slice(0);for(let t=0;t<e.length;t++){const n=e[t];n.interrupt&&n.interrupt()}}}Do.INTERRUPT_OTHER_POINTERS=i=>{self.phet?.joist?.display?.interruptOtherPointers(i?.pointer)};const EQ=["element","preventTransform","allowInput"];let Ao=null;class Vr extends Ge{constructor(e,t){super(),this._container=document.createElement("div"),this._container.style.position="absolute",this._container.style.left="0",this._container.style.top="0",this._container.style.setProperty("padding","0","important"),this._container.style.setProperty("margin","0","important"),this._allowInput=!1,this.invalidateDOMLock=!1,this._preventTransform=!1,this.invalidateAllowInput(this._allowInput),t=fp({element:e},t),this.mutate(t),this.setRendererBitmask(qe.bitmaskDOM)}calculateDOMBounds(){return new pt(0,0,this._element.offsetWidth,this._element.offsetHeight)}invalidateDOM(){if(this.invalidateDOMLock)return;this.invalidateDOMLock=!0;const e=!this._container.isConnected;e&&(Ao||(Ao=document.createElement("div"),Ao.style.visibility="hidden",Ao.style.position="absolute",Ao.style.left="0px",Ao.style.top="0px",Ao.style.setProperty("padding","0","important"),Ao.style.setProperty("margin","0","important")),this._container.removeChild(this._element),Ao.appendChild(this._element),document.body.appendChild(Ao));const t=this.calculateDOMBounds();this.invalidateSelf(t),e&&(document.body.removeChild(Ao),Ao.removeChild(this._element),this._container.appendChild(this._element)),this.invalidateDOMLock=!1}createDOMDrawable(e,t){return qv.createFromPool(e,t)}isPainted(){return!0}setElement(e){return this._element!==e&&(this._element&&this._container.removeChild(this._element),this._element=e,this._container.appendChild(this._element),this.invalidateDOM()),this}set element(e){this.setElement(e)}get element(){return this.getElement()}getElement(){return this._element}setPreventTransform(e){this._preventTransform!==e&&(this._preventTransform=e)}set preventTransform(e){this.setPreventTransform(e)}get preventTransform(){return this.isTransformPrevented()}isTransformPrevented(){return this._preventTransform}setAllowInput(e){this._allowInput!==e&&(this._allowInput=e,this.invalidateAllowInput(e))}isInputAllowed(){return this._allowInput}invalidateAllowInput(e){this._container.dataset.sceneryAllowInput=e?"true":"false",this._container.style.pointerEvents=e?"auto":"none"}set allowInput(e){this.setAllowInput(e)}get allowInput(){return this.isInputAllowed()}mutate(e){return super.mutate(e)}}Vr.prototype._mutatorKeys=EQ.concat(Ge.prototype._mutatorKeys);class ZS extends VS{initialize(e,t){super.initialize(e,t),this.contextChangeListener=this.contextChangeListener||this.onWebGLContextChange.bind(this),this.painter=null}createPainter(){const e=this.node.painterType;return new e(this.webGLBlock.gl,this.node)}onWebGLContextChange(){this.painter=this.createPainter()}onAddToBlock(e){this.webGLBlock=e,this.painter=this.createPainter(),e.glChangedEmitter.addListener(this.contextChangeListener)}onRemoveFromBlock(e){e.glChangedEmitter.removeListener(this.contextChangeListener)}draw(){const e=this.instance.relativeTransform.matrix;return this.painter.paint(e,this.webGLBlock.projectionMatrix)}dispose(){this.painter.dispose(),this.painter=null,this.webGLBlock&&(this.webGLBlock=null),super.dispose()}markPaintDirty(){this.markDirty()}get shaderAttributes(){return this.node.shaderAttributes}}ZS.prototype.webglRenderer=qe.webglCustom;es.mixInto(ZS);const VQ=["canvasBounds"];class h_ extends Ge{constructor(e,t){super(t),this.setRendererBitmask(qe.bitmaskWebGL),this.painterType=e}setCanvasBounds(e){return this.invalidateSelf(e),this}set canvasBounds(e){this.setCanvasBounds(e)}get canvasBounds(){return this.getCanvasBounds()}getCanvasBounds(){return this.getSelfBounds()}isPainted(){return!0}invalidatePaint(){const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirty()}containsPointSelf(e){return!1}getSelfShape(){return new zt}canvasPaintSelf(e,t){}renderToCanvasSelf(e,t){const n=e.canvas.width,s=e.canvas.height,r=document.createElement("canvas");r.width=n,r.height=s;const a={antialias:!0,preserveDrawingBuffer:!0},o=r.getContext("webgl",a)||r.getContext("experimental-webgl",a);Qi.applyWebGLContextDefaults(o);const l=new It().rowMajor(2/n,0,-1,0,-2/s,1,0,0,1);o.viewport(0,0,n,s);const h=this.painterType,c=new h(o,this);c.paint(t,l),c.dispose(),l.freeToPool(),o.flush(),e.context.setTransform(1,0,0,1,0,0),e.context.drawImage(r,0,0),e.context.restore()}createWebGLDrawable(e,t){return ZS.createFromPool(e,t)}mutate(e){return super.mutate(e)}}h_.PAINTED_NOTHING=0;h_.PAINTED_SOMETHING=1;h_.prototype._mutatorKeys=VQ.concat(Ge.prototype._mutatorKeys);class dg extends qL{constructor(e,t){super(e,t)}initialize(e,t){return super.initialize(e,t),this.definition.setAttribute("cx",""+t.largePoint.x),this.definition.setAttribute("cy",""+t.largePoint.y),this.definition.setAttribute("r",""+t.maxRadius),this.definition.setAttribute("fx",""+t.focalPoint.x),this.definition.setAttribute("fy",""+t.focalPoint.y),this}createDefinition(){return document.createElementNS(Kn,"radialGradient")}freeToPool(){dg.pool.freeToPool(this)}}dg.pool=new us(dg);class gc extends ll{constructor(e,t,n,s,r,a){if(super(),this.start=new Oe(e,t),this.end=new Oe(s,r),Zn.safari){const o=(e+s)/2,l=(t+r)/2;this.start.x=o,this.start.y=l,this.end.x=o,this.end.y=l}this.startRadius=n,this.endRadius=a,this.focalPoint=this.start.plus(this.end.minus(this.start).times(this.startRadius/(this.startRadius-this.endRadius))),this.startIsLarger=this.startRadius>this.endRadius,this.largePoint=this.startIsLarger?this.start:this.end,this.maxRadius=Math.max(this.startRadius,this.endRadius),this.minRadius=Math.min(this.startRadius,this.endRadius),this.startRadius>=this.endRadius}createCanvasGradient(){return Pp.createRadialGradient(this.start.x,this.start.y,this.startRadius,this.end.x,this.end.y,this.endRadius)}createSVGPaint(e){return dg.pool.create(e,this)}getSVGStops(){const e=this.startIsLarger,t=this.maxRadius,n=this.minRadius;function s(o,l,h,c,f){return h+(f-o)*(c-h)/(l-o)}function r(o){let l=e?1-o.ratio:o.ratio;return n>0&&(l=s(0,1,n/t,1,l)),{ratio:l,color:o.color}}const a=this.stops.map(r);return e&&a.reverse(),a}toString(){let e=`RadialGradient( ${this.start.x}, ${this.start.y}, ${this.startRadius}, ${this.end.x}, ${this.end.y}, ${this.endRadius} )`;return ie.each(this.stops,t=>{e+=`.addColorStop( ${t.ratio}, ${rg.scenerySerialize(t.color)} )`}),e}}gc.prototype.isRadialGradient=!0;function kQ(i,e){const t=Ne()({resolution:1,sourceBounds:null,useTargetBounds:!0,wrap:!0,useCanvas:!1,nodeOptions:{},imageOptions:{}},e),n=t.resolution,s=t.sourceBounds,r=new Ge({scale:n,children:[i]});let a=s||i.getSafeTransformedVisibleBounds().dilated(2).roundedOut();n!==1&&(a=new pt(n*a.minX,n*a.minY,n*a.maxX,n*a.maxY),a.width%1!==0&&(a.maxX+=1-a.width%1),a.height%1!==0&&(a.maxY+=1-a.height%1));let o=null;function l(g,v,A,P,w){const T=t.useCanvas?g:g.toDataURL();o=new ba(T,Ut({},t.imageOptions,{x:-v,y:-A,initialWidth:P,initialHeight:w})),o.scale(1/n,1/n,!0)}r.toCanvas(l,-a.minX,-a.minY,ws(a.width),ws(a.height));const h=o;r.dispose();let c=i.getVisibleBounds();s&&(c=s.intersection(c)),t.useTargetBounds&&(h.imageBounds=h.parentToLocalBounds(c));let f;if(t.wrap){const g=new Ge({children:[h]});t.useTargetBounds&&(g.localBounds=c),f=g}else t.useTargetBounds&&(h.localBounds=h.parentToLocalBounds(c)),f=h;return f.mutate(t.nodeOptions)}class CQ{constructor(e){this._focusWasInGroup=!1,this.focusInGroupProperty=new Qt(!1),this.focusTargetProperty=new Mt(null),this.groupParent=e}focusin(e){this.focusInGroupProperty.value=!0,this.focusTargetProperty.value=e.target,this._focusWasInGroup=!0}focusout(e){const t=lr.value?.trail;t&&t.containsNode(this.groupParent)||(this.focusInGroupProperty.value=!1,this.focusTargetProperty.value=null,this._focusWasInGroup=!1)}get focusWasInGroup(){return this._focusWasInGroup}dispose(){this.focusInGroupProperty.dispose(),this.focusTargetProperty.dispose()}}class u_ extends nh(ys(Ge)){constructor(e,t,n,s){const r=Ne()({centerColor:"black",radius:u_.DEFAULT_RADIUS,selectedColor:"rgb( 143, 197, 250 )",deselectedColor:"white",xSpacing:8,stroke:"black",soundPlayer:GS.getSelectionSoundPlayer(0),a11yNameAttribute:null,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,cursor:"pointer",disabledOpacity:Ha.DISABLED_OPACITY,tandem:R.REQUIRED,tandemNameSuffix:"RadioButton",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!1,tagName:"input",inputType:"radio",containerTagName:"li",labelTagName:"label",appendLabel:!0,appendDescription:!0,accessibleNameBehavior:ys.BASIC_ACCESSIBLE_NAME_BEHAVIOR},s);super(),this.onInputEmitter=new kn,this._isMouseAreaCustomized=!1,this._isTouchAreaCustomized=!1,this._isSettingAreas=!1,this.value=t;const a=new Ge,o=new ma(r.radius/3,{fill:r.centerColor}),l=new ma(r.radius,{fill:r.selectedColor,stroke:r.stroke}),h=new Ge({children:[l,o]});a.addChild(h);const c=new Ge,f=new ma(r.radius,{fill:r.deselectedColor,stroke:r.stroke});c.addChild(f);const g=new Ge({children:[a,c],pickable:!1}),v=()=>{n.left=f.right+r.xSpacing,n.centerY=f.centerY};n.boundsProperty.link(v);const A=new xt({});a.pickable=c.pickable=!1,n.pickable=!1,this.children=[g,n,A],this.constraint=new DQ(this,g,n,A,r),this.constraint.updateLayout();const P=B=>{a.visible=B===t,c.visible=!a.visible};e.link(P);const w=()=>{const B=e.value;e.set(t),B!==e.value&&this.onInputEmitter.emit()},T=new Rr({fire:w,tandem:r.tandem});this.addInputListener(T),this.onInputEmitter.addListener(()=>{r.soundPlayer.play(),this.voicingSpeakNameResponse()});const D={change:w};this.addInputListener(D),e.value===t&&this.setPDOMAttribute("checked","checked");const M=B=>{this.pdomChecked=B===t};e.link(M),r.accessibleName||(r.accessibleName=Du(n)),r.a11yNameAttribute!==null&&this.setPDOMAttribute("name",r.a11yNameAttribute),this.mutate(r),this.disposeAquaRadioButton=()=>{this.constraint.dispose(),this.onInputEmitter.dispose(),this.removeInputListener(T),this.removeInputListener(D),e.unlink(M),e.unlink(P),n.boundsProperty.hasListener(v)&&n.boundsProperty.unlink(v),T.dispose()}}dispose(){this.disposeAquaRadioButton(),super.dispose()}}u_.DEFAULT_RADIUS=7;class DQ extends Oo{constructor(e,t,n,s,r){super(e),this.radioButton=e,this.radioNode=t,this.labelNode=n,this.rectangle=s,this.options=r,this.radioButton.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.addNode(n)}layout(){super.layout();const e=this.createLayoutProxy(this.labelNode),t=e.minimumWidth,n=this.radioNode.width+this.options.xSpacing+t,s=Math.max(n,this.radioButton.localPreferredWidth||0);qh(this.labelNode)&&(e.preferredWidth=s-this.radioNode.width-this.options.xSpacing),e.left=this.radioNode.right+this.options.xSpacing,e.centerY=this.radioNode.centerY,this.rectangle.rectBounds=this.radioNode.bounds.union(e.bounds).withMaxX(Math.max(this.radioNode.left+s,e.right)),this.radioButton._isSettingAreas=!0,this.radioButton._isTouchAreaCustomized||(this.radioButton.touchArea=this.radioButton.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation)),this.radioButton._isMouseAreaCustomized||(this.radioButton.mouseArea=this.radioButton.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation)),this.radioButton._isSettingAreas=!1,e.dispose(),this.radioButton.localMinimumWidth=n}dispose(){this.radioButton.localPreferredWidthProperty.unlink(this._updateLayoutListener),super.dispose()}}let Ok=0;const IQ="AquaRadioButtonGroup";class LQ extends sh{constructor(e,t,n){Ok++;const s=Ne()({touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,orientation:"vertical",spacing:3,stretch:!0,disabledOpacity:Ha.DISABLED_OPACITY,tandem:R.REQUIRED,tandemNameSuffix:"RadioButtonGroup",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioFeatured:!0,tagName:"ul",labelTagName:"h3",ariaRole:"radiogroup",accessibleHelpTextBehavior:Dr.HELP_TEXT_BEFORE_CONTENT,groupFocusHighlight:!0},n),r=p0(t,s.tandem);s.orientation==="vertical"&&(s.align=s.align||"left");const a=t.map((c,f)=>{const g=r[f];return new u_(e,c.value,g,Ut({a11yNameAttribute:IQ+Ok,soundPlayer:GS.getSelectionSoundPlayer(f),tandem:c.tandemName?s.tandem.createTandem(c.tandemName):s.tandem===R.OPT_OUT?R.OPT_OUT:R.REQUIRED,touchAreaXDilation:s.orientation==="horizontal"?s.spacing/2:s.touchAreaXDilation,touchAreaYDilation:s.orientation==="vertical"?s.spacing/2:s.touchAreaYDilation,mouseAreaXDilation:s.orientation==="horizontal"?s.spacing/2:s.mouseAreaXDilation,mouseAreaYDilation:s.orientation==="vertical"?s.spacing/2:s.mouseAreaYDilation},s.radioButtonOptions,c.options))});s.children=a,super(s),this.onInputEmitter=new kn;const o=new CQ(this);o.focusTargetProperty.link(c=>{if(c){const f=c;o.focusWasInGroup?f.voicingSpeakNameResponse():f.voicingSpeakFullResponse({contextResponse:null,hintResponse:this.accessibleHelpText})}}),this.addInputListener(o),this.addAriaLabelledbyAssociation({thisElementName:vn.PRIMARY_SIBLING,otherNode:this,otherElementName:vn.LABEL_SIBLING});const l={keydown:c=>{Qe.isArrowKey(c.domEvent)&&c.pointer.reserveForKeyboardDrag()}};this.addInputListener(l);const h=this.onRadioButtonInput.bind(this);for(let c=0;c<a.length;c++)a[c].onInputEmitter.addListener(h);this.addLinkedElement(e,{tandemName:"property"}),this.disposeAquaRadioButtonGroup=()=>{this.removeInputListener(l),a.forEach(c=>c.dispose()),this.onInputEmitter.dispose(),o.dispose(),r.forEach(c=>c.dispose())},this.radioButtons=a}onRadioButtonInput(){this.onInputEmitter.emit()}dispose(){this.disposeAquaRadioButtonGroup(),super.dispose()}getButton(e){return ie.find(this.radioButtons,n=>n.value===e)}}const Ey=(i,e=2)=>pd(i,e);class Ar extends js{}Ar.MOUSE=new Ar;Ar.TOUCH=new Ar;Ar.NONE=new Ar;Ar.enumeration=new Sr(Ar);const MQ=i=>!!i.getHelperNode;class yc{constructor(e,t){this.sim=e,this.simDisplay=t,this.activeProperty=new oi(!1),this.visualTreeVisibleProperty=new Qt(!1,{tandem:R.OPT_OUT}),this.pdomTreeVisibleProperty=new Qt(!1,{tandem:R.OPT_OUT}),this.underPointerVisibleProperty=new Qt(!0,{tandem:R.OPT_OUT}),this.optionsVisibleProperty=new Qt(!0,{tandem:R.OPT_OUT}),this.previewVisibleProperty=new Qt(!1,{tandem:R.OPT_OUT}),this.selectedNodeContentVisibleProperty=new Qt(!0,{tandem:R.OPT_OUT}),this.selectedTrailContentVisibleProperty=new Qt(!0,{tandem:R.OPT_OUT}),this.highlightVisibleProperty=new Qt(!0,{tandem:R.OPT_OUT}),this.boundsVisibleProperty=new Qt(!0,{tandem:R.OPT_OUT}),this.selfBoundsVisibleProperty=new Qt(!1,{tandem:R.OPT_OUT}),this.getHelperNodeVisibleProperty=new Qt(!0,{tandem:R.OPT_OUT}),this.helperVisibleProperty=new Qt(!0,{tandem:R.OPT_OUT}),this.inputBasedPickingProperty=new Qt(!0,{tandem:R.OPT_OUT}),this.useLeafNodeProperty=new Qt(!1,{tandem:R.OPT_OUT}),this.pointerAreaTypeProperty=new qS(Ar.MOUSE,{tandem:R.OPT_OUT}),this.pointerPositionProperty=new oi(Oe.ZERO),this.overInterfaceProperty=new Qt(!1,{tandem:R.OPT_OUT}),this.selectedTrailProperty=new oi(null),this.treeHoverTrailProperty=new oi(null),this.pointerTrailProperty=new Dt([this.pointerPositionProperty,this.overInterfaceProperty,this.pointerAreaTypeProperty,this.inputBasedPickingProperty],(te,fe,_e,ke)=>{if(fe)return null;if(!ke)return $M(t.rootNode,te);let $e=t.rootNode.hitTest(te,_e===Ar.MOUSE,_e===Ar.TOUCH);if($e&&!this.useLeafNodeProperty.value){for(;$e.length>0&&$e.lastNode().inputListeners.length===0;)$e.removeDescendant();if($e.length===0)$e=null;else{const rt=$e.lastNode().inputListeners[0];rt instanceof Fa&&rt.targetNode&&rt.targetNode!==$e.lastNode()&&$e.containsNode(rt.targetNode)&&($e=$e.subtrailTo(rt.targetNode))}}return $e},{tandem:R.OPT_OUT,valueComparisonStrategy:"equalsFunction"}),this.previewTrailProperty=new Dt([this.selectedTrailProperty,this.treeHoverTrailProperty,this.pointerTrailProperty],(te,fe,_e)=>te||fe||_e),this.previewShapeProperty=new Dt([this.previewTrailProperty,this.inputBasedPickingProperty,this.pointerAreaTypeProperty],(te,fe,_e)=>te?fe?Bk(te,_e===Ar.MOUSE,_e===Ar.TOUCH):Bk(te,!1,!1):null),this.helperNodeProperty=new Dt([this.selectedTrailProperty],te=>{if(te){const fe=te.lastNode();return MQ(fe)?fe.getHelperNode():null}else return null}),this.screenViewProperty=new oi(null),this.imageDataProperty=new oi(null),this.colorProperty=new Dt([this.pointerPositionProperty,this.imageDataProperty],(te,fe)=>{if(!fe)return ct.TRANSPARENT;const _e=Math.floor(te.x/this.simDisplay.width*fe.width),ke=Math.floor(te.y/this.simDisplay.height*fe.height),$e=4*(_e+fe.width*ke);return _e<0||ke<0||_e>fe.width||ke>fe.height?ct.TRANSPARENT:new ct(fe.data[$e],fe.data[$e+1],fe.data[$e+2],fe.data[$e+3]/255)},{tandem:R.OPT_OUT});const n=new Qt(phet.chipper.queryParameters.fuzz,{tandem:R.OPT_OUT});n.lazyLink(te=>{phet.chipper.queryParameters.fuzz=te});const s=new Qt(!1,{tandem:R.OPT_OUT}),r=new oi({name:"view units",multiplier:0}),a=new oi(pt.NOTHING),o=new Ge({renderer:"svg"}),l=new Pk(this.pointerPositionProperty,{tandem:R.OPT_OUT,bidirectional:!0,map:te=>{const fe=this.screenViewProperty.value;if(fe){const _e=fe.globalToLocalPoint(te);return`global: x: ${Ey(te.x)}, y: ${Ey(te.y)}<br>view: x: ${Ey(_e.x)}, y: ${Ey(_e.y)}`}else return"-"}}),h=new pi(l,{font:new ki(12)}),c=te=>`${te.toHexString()} ${te.toCSS()}`,f=new Pk(this.colorProperty,{tandem:R.OPT_OUT,bidirectional:!0,map:c}),g=new pi(f,{font:new ki(12)});this.colorProperty.link(te=>{g.fill=ct.getLuminance(te)>128?ct.BLACK:ct.WHITE});const v=new ct("#804000"),A=new ct("#208020"),P=new ct(255,100,0),w=new ct(0,0,255),T=new ct(255,0,0),D=new ct(200,0,200),M=new Dt([this.inputBasedPickingProperty,this.pointerAreaTypeProperty],(te,fe)=>te?fe===Ar.MOUSE?w:fe===Ar.TOUCH?T:D:P,{tandem:R.OPT_OUT}),B=new nl(g,{cornerRadius:0,stroke:null,fill:this.colorProperty}),O=new Ge({visibleProperty:this.previewVisibleProperty}),x=new xt(0,0,200,200,{fill:new nL(new Ge({children:[new xt(0,0,10,10,{fill:"#ddd"}),new xt(10,10,10,10,{fill:"#ddd"}),new xt(0,10,10,10,{fill:"#fafafa"}),new xt(10,0,10,10,{fill:"#fafafa"})]}),2,0,0,20,20),stroke:"black",visibleProperty:this.previewVisibleProperty});this.previewTrailProperty.link(te=>{if(O.removeAllChildren(),te){O.addChild(x);const fe=te.lastNode();if(fe.bounds.isValid()){const _e=self.devicePixelRatio*.9*Math.min(x.selfBounds.width/fe.width,x.selfBounds.height/fe.height);O.addChild(new Ge({scale:_e/self.devicePixelRatio,center:x.center,children:[kQ(fe,{resolution:_e,sourceBounds:fe.bounds.dilated(fe.bounds.width*.01).roundedOut()})]}))}}});const Z=new Ai({spacing:3,align:"left",visibleProperty:this.selectedNodeContentVisibleProperty});this.previewTrailProperty.link(te=>{Z.children=te?RQ(te):[]});const de=new kl(n,"Fuzz"),$=new kl(s,"Measuring Tape"),me=new kl(this.visualTreeVisibleProperty,"Visual Tree"),ue=new kl(this.pdomTreeVisibleProperty,"PDOM Tree"),Se=new kl(this.inputBasedPickingProperty,"Input-based"),Te=new kl(this.useLeafNodeProperty,"Use Leaf",{enabledProperty:this.inputBasedPickingProperty}),Re=new kl(this.highlightVisibleProperty,"Highlight",{labelOptions:{fill:M}}),We=new kl(this.boundsVisibleProperty,"Bounds",{labelOptions:{fill:v}}),Le=new kl(this.selfBoundsVisibleProperty,"Self Bounds",{labelOptions:{fill:A}}),lt=new kl(this.getHelperNodeVisibleProperty,"getHelperNode()"),st=new LQ(this.pointerAreaTypeProperty,[{value:Ar.MOUSE,createNode:te=>new kt("Mouse",{fontSize:12})},{value:Ar.TOUCH,createNode:te=>new kt("Touch",{fontSize:12})},{value:Ar.NONE,createNode:te=>new kt("None",{fontSize:12})}],{orientation:"horizontal",enabledProperty:this.inputBasedPickingProperty,radioButtonOptions:{xSpacing:3},spacing:10,tandem:R.OPT_OUT}),De=new Ai({align:"left",visibleProperty:this.selectedTrailContentVisibleProperty});this.previewTrailProperty.link(te=>{if(De.children=[],te){te.nodes.slice().forEach((ke,$e)=>{De.addChild(new pi(`${$e>0?te.nodes[$e-1].children.indexOf(ke):"-"} ${ke.constructor.name}`,{font:new ki(12),fill:$e===te.nodes.length-1?"black":"#bbb",layoutOptions:{leftMargin:$e*10},cursor:"pointer",inputListeners:[new Rr({fire:()=>{this.selectedTrailProperty.value=te.subtrailTo(ke),Ct()},tandem:R.OPT_OUT})]}))}),te.lastNode().children.forEach((ke,$e)=>{De.addChild(new pi(`${te.lastNode().children.indexOf(ke)} ${ke.constructor.name}`,{font:new ki(12),fill:"#88f",layoutOptions:{leftMargin:te.nodes.length*10},cursor:"pointer",inputListeners:[new Rr({fire:()=>{this.selectedTrailProperty.value=te.copy().addDescendant(ke,$e),Ct()},tandem:R.OPT_OUT})]}))}),te.isVisible()||De.addChild(new kt("invisible",{fill:"#60a",fontSize:12})),te.getOpacity()!==1&&De.addChild(new kt(`opacity: ${te.getOpacity()}`,{fill:"#888",fontSize:12}));const fe=ie.some(te.nodes,ke=>ke.pickable===!1||!ke.visible),_e=ie.some(te.nodes,ke=>ke.inputListeners.length>0||ke.pickable===!0);!fe&&_e&&De.addChild(new kt("Hit Tested",{fill:"#f00",fontSize:12})),te.getMatrix().isIdentity()||De.addChild(new Ge({children:[new ZM(te.getMatrix())]}))}});const et=new Nk(this.visualTreeVisibleProperty,this,()=>new $S(new Yi(t.rootNode),this)),Ke=new Nk(this.pdomTreeVisibleProperty,this,()=>new eP(t._rootPDOMInstance,this)),Ct=()=>{et.focusSelected(),Ke.focusSelected()},dt=new bi(null,{visibleProperty:this.boundsVisibleProperty,stroke:v,fill:v.withAlpha(.1),lineDash:[2,2],lineDashOffset:2});this.previewTrailProperty.link(te=>{te&&te.lastNode().localBounds.isValid()?dt.shape=zt.bounds(te.lastNode().localBounds).transformed(te.getMatrix()):dt.shape=null});const Et=new bi(null,{visibleProperty:this.selfBoundsVisibleProperty,stroke:A,fill:A.withAlpha(.1),lineDash:[2,2],lineDashOffset:1});this.previewTrailProperty.link(te=>{te&&te.lastNode().selfBounds.isValid()?Et.shape=zt.bounds(te.lastNode().selfBounds).transformed(te.getMatrix()):Et.shape=null});const ut=new Dt([M],te=>te.withAlpha(.2),{tandem:R.OPT_OUT}),Wt=new bi(null,{stroke:M,lineDash:[2,2],fill:ut,visibleProperty:this.highlightVisibleProperty});this.previewShapeProperty.link(te=>{Wt.shape=te});const Nt=new Ge({visibleProperty:this.getHelperNodeVisibleProperty});this.selectedTrailProperty.link(te=>{te&&(Nt.matrix=te.getMatrix())}),this.helperNodeProperty.link(te=>{Nt.removeAllChildren(),te&&Nt.addChild(te)}),o.addChild(dt),o.addChild(Et),o.addChild(Wt);const ci=new Ge;ci.addInputListener(new Fa({press:()=>{this.selectedTrailProperty.value=this.pointerTrailProperty.value,Ct()},tandem:R.OPT_OUT})),o.addChild(ci),o.addChild(Nt);const Yt=new sh({orientation:"vertical",spacing:5,align:"left",children:[h,B],visibleProperty:this.underPointerVisibleProperty}),Pe=new Ai({spacing:3,align:"left",children:[jy("Tools"),new Ai({spacing:3,align:"left",children:[new _i({spacing:10,children:[de,$]}),new _i({spacing:10,children:[me,...t._accessible?[ue]:[]]})]}),jy("Picking",void 0,{layoutOptions:{topMargin:3}}),new Ai({spacing:3,align:"left",children:[new _i({spacing:10,children:[Se,Te]}),st]}),jy("Show",void 0,{layoutOptions:{topMargin:3}}),new Ai({spacing:3,align:"left",children:[new _i({spacing:10,children:[Re,lt]}),new _i({spacing:10,children:[We,Le]})]})],visibleProperty:this.optionsVisibleProperty}),pe=new Ai({spacing:5,align:"left",children:[ep("Under Pointer",this.underPointerVisibleProperty,Yt,{layoutOptions:{topMargin:0}}),Yt,ep("Options",this.optionsVisibleProperty,Pe),Pe,ep("Preview",this.previewVisibleProperty,O),O,ep("Selected Trail",this.selectedTrailContentVisibleProperty,De),De,ep("Selected Node",this.selectedNodeContentVisibleProperty,Z),Z],visibleProperty:this.helperVisibleProperty}),bt=new Ai({spacing:5,align:"left",children:[ep("Helper",this.helperVisibleProperty,pe),new zS,pe]}),wt=new nl(bt,{fill:"rgba(255,255,255,0.85)",stroke:"rgba(0,0,0,0.85)",cornerRadius:0});wt.addInputListener(new vd({translateNode:!0,targetNode:wt,tandem:R.OPT_OUT})),wt.addInputListener({wheel:te=>{const fe=te.domEvent.deltaY,_e=1;wt.y-=fe*_e}}),o.addChild(wt),o.addChild(et),o.addChild(Ke);const Gt=new KS(r,{tandem:R.OPT_OUT,visibleProperty:s,textBackgroundColor:"rgba(0,0,0,0.5)"});Gt.basePositionProperty.value=new Oe(100,300),Gt.tipPositionProperty.value=new Oe(200,300),o.addChild(Gt);const Ft=te=>{this.helperDisplay.width=te.width,this.helperDisplay.height=te.height,a.value=a.value.withMaxX(te.width).withMaxY(te.height),ci.mouseArea=new pt(0,0,te.width,te.height),ci.touchArea=new pt(0,0,te.width,te.height),et.resize(te),Ke.resize(te)},V=te=>{this.overInterfaceProperty.value=wt.bounds.containsPoint(this.pointerPositionProperty.value)||this.visualTreeVisibleProperty.value&&et.bounds.containsPoint(this.pointerPositionProperty.value)||this.pdomTreeVisibleProperty.value&&Ke.bounds.containsPoint(this.pointerPositionProperty.value)||Nt.containsPoint(this.pointerPositionProperty.value),this.helperDisplay?.updateDisplay()};document.addEventListener("keyup",te=>{te.key==="Escape"&&(this.selectedTrailProperty.value=null)}),this.activeProperty.lazyLink(te=>{if(te){e.activeProperty.value=!1;const fe=e.selectedScreenProperty.value;fe.hasView()?this.screenViewProperty.value=fe.view:this.screenViewProperty.value=null,this.helperDisplay=new Do(o,{assumeFullWindow:!0}),this.helperDisplay.initializeEvents(),e.dimensionProperty.link(Ft),Rv.addListener(V),document.body.appendChild(this.helperDisplay.domElement),this.helperDisplay.domElement.style.zIndex="10000";const _e=ke=>{this.pointerPositionProperty.value=ke.pointer.point};this.helperDisplay.addInputListener({move:_e,down:_e,up:_e}),this.screenViewProperty.value&&(r.value={name:"view units",multiplier:this.screenViewProperty.value.getGlobalToLocalMatrix().getScaleVector().x}),this.simDisplay.foreignObjectRasterization(ke=>{if(ke){const $e=document.createElement("img");$e.addEventListener("load",()=>{const Xe=$e.width,rt=$e.height,Dn=document.createElement("canvas"),Xt=Dn.getContext("2d");Dn.width=Xe,Dn.height=rt,Xt.drawImage($e,0,0),this.activeProperty.value&&(this.imageDataProperty.value=Xt.getImageData(0,0,Xe,rt))}),$e.src=ke}else console.log("Could not load foreign object rasterization")})}else e.dimensionProperty.unlink(Ft),Rv.removeListener(V),document.body.removeChild(this.helperDisplay.domElement),this.helperDisplay.dispose(),e.activeProperty.value=!0,this.imageDataProperty.value=null,this.visualTreeVisibleProperty.value=!1})}static initialize(e,t){document.addEventListener("keydown",n=>{n.ctrlKey&&n.key==="H"&&(yc.helper||(yc.helper=new yc(e,t)),yc.helper.activeProperty.value=!yc.helper.activeProperty.value)})}}class kl extends US{constructor(e,t,n){const s=Ne()({tandem:R.OPT_OUT,boxWidth:14,labelOptions:{font:new ki(12)}},n);super(e,new pi(t,s.labelOptions),s)}}class JM extends Ge{constructor(e,t){const n=Ne()({createChildren:()=>[],spacing:0,indent:5},t);super({excludeInvisibleChildrenFromBounds:!0}),this.selfNode=e,this.selfNode.centerY=0,this.expandedProperty=new oi(!0),this.childTreeNodes=xf({elements:n.createChildren()});const s=12,r=new zt().moveToPoint(Oe.createPolar(s/2.5,3/4*Math.PI).plusXY(s/8,0)).lineTo(s/8,0).lineToPoint(Oe.createPolar(s/2.5,5/4*Math.PI).plusXY(s/8,0));this.expandCollapseButton=new xt(-12/2,-12/2,s,s,{children:[new bi(r,{stroke:"#888",lineCap:"round",lineWidth:1.5})],visible:!1,cursor:"pointer",right:0}),this.expandedProperty.link(o=>{this.expandCollapseButton.rotation=o?Math.PI/2:0}),this.expandCollapseButton.addInputListener(new Rr({fire:()=>{this.expandedProperty.value=!this.expandedProperty.value},tandem:R.OPT_OUT})),this.addChild(this.expandCollapseButton),this.childContainer=new sh({orientation:"vertical",align:"left",spacing:n.spacing,children:this.childTreeNodes,x:n.indent,y:this.selfNode.bottom+n.spacing,visibleProperty:this.expandedProperty}),this.addChild(this.childContainer),this.addChild(e);const a=()=>{this.childContainer.children=this.childTreeNodes,this.expandCollapseButton.visible=this.childTreeNodes.length>0};this.childTreeNodes.addItemAddedListener(()=>{a()}),this.childTreeNodes.addItemRemovedListener(()=>{a()}),a(),this.mutate(n)}expand(){this.expandedProperty.value=!0}collapse(){this.expandedProperty.value=!1}expandRecusively(){this.expandedProperty.value=!0,this.childTreeNodes.forEach(e=>{e.expandRecusively()})}collapseRecursively(){this.expandedProperty.value=!1,this.childTreeNodes.forEach(e=>{e.collapseRecursively()})}}class $S extends JM{constructor(e,t){const n=e.lastNode(),s=e.isVisible(),r=new hr({size:12}),a=new _i({spacing:5}),o=n.constructor.name;o&&a.addChild(new kt(o,{font:r,pickable:!1,fill:s?"#000":"#60a"})),n instanceof kt&&a.addChild(new kt('"'+n.string+'"',{font:r,pickable:!1,fill:"#666"}));const l=xt.bounds(a.bounds,{children:[a],cursor:"pointer",fill:new Dt([t.selectedTrailProperty,t.pointerTrailProperty],(h,c)=>h&&e.equals(h)?"rgba(0,128,255,0.4)":c&&e.equals(c)?"rgba(0,128,255,0.2)":"transparent",{tandem:R.OPT_OUT})});l.addInputListener({enter:()=>{t.treeHoverTrailProperty.value=e},exit:()=>{t.treeHoverTrailProperty.value=null}}),l.addInputListener(new Rr({fire:()=>{t.selectedTrailProperty.value=e},tandem:R.OPT_OUT})),super(l,{createChildren:()=>e.lastNode().children.map(h=>new $S(e.copy().addDescendant(h),t))}),n.visible||(this.expandedProperty.value=!1),this.trail=e}find(e){if(e.equals(this.trail))return this;{const t=ie.find(this.childTreeNodes,n=>e.isExtensionOf(n.trail,!0));return t?t.find(e):null}}}class eP extends JM{constructor(e,t){const n=e.trail,s=n.isPDOMVisible(),r=new hr({size:12}),a=new _i({spacing:5});if(n.nodes.length){const l=s?"#000":"#60a",h=n.lastNode();h.tagName&&a.addChild(new kt(h.tagName,{font:new hr({size:12,weight:"bold"}),fill:l})),h.labelContent&&a.addChild(new kt(h.labelContent,{font:r,fill:"#800"})),h.innerContent&&a.addChild(new kt(h.innerContent,{font:r,fill:"#080"})),h.descriptionContent&&a.addChild(new kt(h.descriptionContent,{font:r,fill:"#444"}));const c=e.parent?e.parent.trail:new Yi,f=n.nodes.slice(c.nodes.length).map(g=>g.constructor.name).filter(g=>g!=="Node").join(",");f&&a.addChild(new kt(`(${f})`,{font:r,fill:"#008"}))}else a.addChild(new kt("(root)",{font:r}));const o=xt.bounds(a.bounds,{children:[a],cursor:"pointer",fill:new Dt([t.selectedTrailProperty,t.pointerTrailProperty],(l,h)=>l&&n.equals(l)?"rgba(0,128,255,0.4)":h&&n.equals(h)?"rgba(0,128,255,0.2)":"transparent",{tandem:R.OPT_OUT})});n.length&&(o.addInputListener({enter:()=>{t.treeHoverTrailProperty.value=n},exit:()=>{t.treeHoverTrailProperty.value=null}}),o.addInputListener(new Rr({fire:()=>{t.selectedTrailProperty.value=n},tandem:R.OPT_OUT}))),super(o,{createChildren:()=>e.children.map(l=>new eP(l,t))}),this.instance=e,this.trail=n}find(e){if(e.equals(this.instance.trail))return this;{const t=ie.find(this.childTreeNodes,n=>e.isExtensionOf(n.instance.trail,!0));return t?t.find(e):null}}}class Nk extends xt{constructor(e,t,n){super({fill:"rgba(255,255,255,0.85)",stroke:"black",rectWidth:400,visibleProperty:e,pickable:!0}),this.helper=t,this.treeContainer=new Ge,this.addChild(this.treeContainer),this.addInputListener(new vd({targetNode:this,drag:(s,r)=>{this.x=this.x+r.modelDelta.x},tandem:R.OPT_OUT})),this.addInputListener({wheel:s=>{const r=s.domEvent.deltaX,a=s.domEvent.deltaY,o=1;this.treeNode&&(this.treeNode.x-=r*o,this.treeNode.y-=a*o),this.constrainTree()}}),t.pointerTrailProperty.lazyLink(()=>{t.selectedTrailProperty.value||this.focusPointer()}),Cn.multilink([t.activeProperty,e],(s,r)=>{s&&r?(this.treeNode=n(),this.treeNode.x=500,this.treeNode.y=500,this.treeContainer.children=[this.treeNode],this.focusSelected(),this.constrainTree()):this.treeContainer.children=[]})}resize(e){this.rectHeight=e.height,this.right=e.width,this.treeContainer.clipArea=zt.bounds(this.localBounds.dilated(10))}constrainTree(){this.treeNode&&(this.treeNode.bottom<this.selfBounds.bottom-5&&(this.treeNode.bottom=this.selfBounds.bottom-5),this.treeNode.top>this.selfBounds.top+5&&(this.treeNode.top=this.selfBounds.top+5),this.treeNode.right<this.selfBounds.right-8&&(this.treeNode.right=this.selfBounds.right-8),this.treeNode.left>this.selfBounds.left+8&&(this.treeNode.left=this.selfBounds.left+8))}focusTrail(e){if(this.treeNode){const t=this.treeNode.find(e);if(t){const n=t.localToGlobalPoint(t.selfNode.center).y-this.centerY;this.treeNode.y-=n,this.constrainTree()}}}focusPointer(){this.helper.pointerTrailProperty.value&&this.focusTrail(this.helper.pointerTrailProperty.value)}focusSelected(){this.helper.selectedTrailProperty.value!==null&&this.focusTrail(this.helper.selectedTrailProperty.value)}}const jy=(i,e,t)=>new kt(i,an({fontSize:14,fontWeight:"bold",visibleProperty:e?new Dt([e.boundsProperty],n=>!n.isEmpty()):new oi(!0)},t)),ep=(i,e,t,n)=>{const s=jy(i,t,n);return s.addInputListener(new Rr({fire:()=>{e.value=!e.value},tandem:R.OPT_OUT})),s.cursor="pointer",new _i({spacing:7,children:[new mM(e,{tandem:R.OPT_OUT,sideLength:14}),s],visibleProperty:s.visibleProperty})};class ZM extends Mf{constructor(e){super({xSpacing:5,ySpacing:0,children:[new kt(e.m00(),{layoutOptions:{column:0,row:0}}),new kt(e.m01(),{layoutOptions:{column:1,row:0}}),new kt(e.m02(),{layoutOptions:{column:2,row:0}}),new kt(e.m10(),{layoutOptions:{column:0,row:1}}),new kt(e.m11(),{layoutOptions:{column:1,row:1}}),new kt(e.m12(),{layoutOptions:{column:2,row:1}}),new kt(e.m20(),{layoutOptions:{column:0,row:2}}),new kt(e.m21(),{layoutOptions:{column:1,row:2}}),new kt(e.m22(),{layoutOptions:{column:2,row:2}})]})}}class OQ extends bi{constructor(e){super(e,{maxWidth:15,maxHeight:15,stroke:"black",cursor:"pointer",strokePickable:!0}),this.addInputListener(new Rr({fire:()=>Xy(e.getSVGPath()),tandem:R.OPT_OUT}))}}class NQ extends ba{constructor(e){super(e.getImage(),{maxWidth:15,maxHeight:15})}}const RQ=i=>{const e=[],t=i.lastNode(),n=eS(t.constructor).map(P=>P.name).filter(P=>P&&P!=="Object"),s=n.includes("Node")?n.slice(0,n.indexOf("Node")):n;s.length>0&&e.push(new pi(s.map((P,w)=>w===0?`<b>${P}</b>`:`<br>&nbsp;${ie.repeat("  ",w)}extends ${P}`).join(""),{font:new ki(12)}));const r=(P,w)=>{e.push(new _i({spacing:0,align:"top",children:[new kt(P+": ",{fontSize:12}),w]}))},a=(P,w)=>{w!==void 0&&r(P,new pi(""+JSON.stringify(w),{lineWrap:400,font:new ki(12),cursor:"pointer",inputListeners:[new Rr({fire:()=>Xy(""+JSON.stringify(w)),tandem:R.OPT_OUT})]}))},o=P=>new _i({spacing:4,children:[new xt(0,0,10,10,{fill:P,stroke:"black",lineWidth:.5}),new kt(P.toHexString(),{fontSize:12}),new kt(P.toCSS(),{fontSize:12})],cursor:"pointer",inputListeners:[new Rr({fire:()=>Xy(P.toHexString()),tandem:R.OPT_OUT})]}),l=(P,w)=>{const T=ew(w);T!==null&&r(P,o(T))},h=(P,w)=>{const T=D=>new _i({spacing:3,children:[new kt(D.ratio,{fontSize:12}),o(ew(D.color)||ct.TRANSPARENT)]});w instanceof Ul?w instanceof il?r(P,new Ai({align:"left",spacing:3,children:[new kt(`LinearGradient (${w.start.x},${w.start.y}) => (${w.end.x},${w.end.y})`,{fontSize:12}),...w.stops.map(T)]})):w instanceof gc?r(P,new Ai({align:"left",spacing:3,children:[new kt(`RadialGradient (${w.start.x},${w.start.y}) ${w.startRadius} => (${w.end.x},${w.end.y}) ${w.endRadius}`,{fontSize:12}),...w.stops.map(T)]})):w instanceof Wb&&r(P,new Ai({align:"left",spacing:3,children:[new kt("Pattern",{fontSize:12}),new ba(w.image,{maxWidth:10,maxHeight:10})]})):l(P,w)},c=(P,w)=>a(P,w),f=(P,w)=>r(P,new ZM(w)),g=(P,w)=>{w.equals(pt.NOTHING)||(w.equals(pt.EVERYTHING)?a(P,"everything"):r(P,new pi(`x: [${w.minX}, ${w.maxX}]<br>y: [${w.minY}, ${w.maxY}]`,{font:new ki(12)})))},v=(P,w)=>r(P,new OQ(w)),A=(P,w)=>r(P,new NQ(w));return t.tandem.supplied&&a("tandem",t.tandem.phetioID.split(".").join(" ")),t instanceof Vr&&a("element",t.element.constructor.name),Fc(t)&&(!t.widthSizable&&a("widthSizable",t.widthSizable),t.preferredWidth!==null&&a("preferredWidth",t.preferredWidth),t.preferredWidth!==t.localPreferredWidth&&a("localPreferredWidth",t.localPreferredWidth),t.minimumWidth!==null&&a("minimumWidth",t.minimumWidth),t.minimumWidth!==t.localMinimumWidth&&a("localMinimumWidth",t.localMinimumWidth)),jm(t)&&(!t.heightSizable&&a("heightSizable",t.heightSizable),t.preferredHeight!==null&&a("preferredHeight",t.preferredHeight),t.preferredHeight!==t.localPreferredHeight&&a("localPreferredHeight",t.localPreferredHeight),t.minimumHeight!==null&&a("minimumHeight",t.minimumHeight),t.minimumHeight!==t.localMinimumHeight&&a("localMinimumHeight",t.localMinimumHeight)),t.layoutOptions&&a("layoutOptions",JSON.stringify(t.layoutOptions,null,2)),t instanceof IS&&(!t.resize&&a("resize",t.resize),!t.layoutOrigin.equals(Oe.ZERO)&&a("layoutOrigin",t.layoutOrigin)),t instanceof sh&&(a("orientation",t.orientation),a("align",t.align),t.spacing&&a("spacing",t.spacing),t.lineSpacing&&a("lineSpacing",t.lineSpacing),a("justify",t.justify),t.justifyLines&&a("justifyLines",t.justifyLines),t.wrap&&a("wrap",t.wrap),t.stretch&&a("stretch",t.stretch),t.grow&&a("grow",t.grow),t.leftMargin&&a("leftMargin",t.leftMargin),t.rightMargin&&a("rightMargin",t.rightMargin),t.topMargin&&a("topMargin",t.topMargin),t.bottomMargin&&a("bottomMargin",t.bottomMargin),t.minContentWidth!==null&&a("minContentWidth",t.minContentWidth),t.minContentHeight!==null&&a("minContentHeight",t.minContentHeight),t.maxContentWidth!==null&&a("maxContentWidth",t.maxContentWidth),t.maxContentHeight!==null&&a("maxContentHeight",t.maxContentHeight)),t instanceof Mf&&(a("xAlign",t.xAlign),a("yAlign",t.yAlign),t.xSpacing&&a("xSpacing",t.xSpacing),t.ySpacing&&a("ySpacing",t.ySpacing),t.xStretch&&a("xStretch",t.xStretch),t.yStretch&&a("yStretch",t.yStretch),t.xGrow&&a("xGrow",t.xGrow),t.yGrow&&a("yGrow",t.yGrow),t.leftMargin&&a("leftMargin",t.leftMargin),t.rightMargin&&a("rightMargin",t.rightMargin),t.topMargin&&a("topMargin",t.topMargin),t.bottomMargin&&a("bottomMargin",t.bottomMargin),t.minContentWidth!==null&&a("minContentWidth",t.minContentWidth),t.minContentHeight!==null&&a("minContentHeight",t.minContentHeight),t.maxContentWidth!==null&&a("maxContentWidth",t.maxContentWidth),t.maxContentHeight!==null&&a("maxContentHeight",t.maxContentHeight)),t instanceof xt&&(g("rectBounds",t.rectBounds),(t.cornerXRadius||t.cornerYRadius)&&(t.cornerXRadius===t.cornerYRadius?a("cornerRadius",t.cornerRadius):(a("cornerXRadius",t.cornerXRadius),a("cornerYRadius",t.cornerYRadius)))),t instanceof Fh&&(a("x1",t.x1),a("y1",t.y1),a("x2",t.x2),a("y2",t.y2)),t instanceof ma&&a("radius",t.radius),t instanceof kt&&(a("text",t.string),a("font",t.font),t.boundsMethod!=="hybrid"&&a("boundsMethod",t.boundsMethod)),t instanceof pi&&(a("text",t.string),a("font",t.font instanceof hr?t.font.getFont():t.font),h("fill",t.fill),h("stroke",t.stroke),t.boundsMethod!=="hybrid"&&a("boundsMethod",t.boundsMethod),t.lineWrap!==null&&a("lineWrap",t.lineWrap)),t instanceof ba&&(A("image",t),a("imageWidth",t.imageWidth),a("imageHeight",t.imageHeight),t.imageOpacity!==1&&a("imageOpacity",t.imageOpacity),t.imageBounds&&g("imageBounds",t.imageBounds),t.initialWidth&&a("initialWidth",t.initialWidth),t.initialHeight&&a("initialHeight",t.initialHeight),t.hitTestPixels&&a("hitTestPixels",t.hitTestPixels)),(t instanceof JS||t instanceof h_)&&g("canvasBounds",t.canvasBounds),t instanceof bi&&(t.shape&&v("shape",t.shape),t.boundsMethod!=="accurate"&&a("boundsMethod",t.boundsMethod)),(t instanceof bi||t instanceof kt)&&(h("fill",t.fill),h("stroke",t.stroke),t.lineDash.length&&a("lineDash",t.lineDash),t.fillPickable||a("fillPickable",t.fillPickable),t.strokePickable&&a("strokePickable",t.strokePickable),t.lineWidth!==1&&a("lineWidth",t.lineWidth),t.lineCap!=="butt"&&a("lineCap",t.lineCap),t.lineJoin!=="miter"&&a("lineJoin",t.lineJoin),t.lineDashOffset!==0&&a("lineDashOffset",t.lineDashOffset),t.miterLimit!==10&&a("miterLimit",t.miterLimit)),t.tagName&&a("tagName",t.tagName),t.accessibleName&&a("accessibleName",t.accessibleName),t.accessibleHelpText&&a("accessibleHelpText",t.accessibleHelpText),t.containerTagName&&a("containerTagName",t.containerTagName),t.containerAriaRole&&a("containerAriaRole",t.containerAriaRole),t.innerContent&&a("innerContent",t.innerContent),t.inputType&&a("inputType",t.inputType),t.inputValue&&a("inputValue",t.inputValue),t.pdomNamespace&&a("pdomNamespace",t.pdomNamespace),t.ariaLabel&&a("ariaLabel",t.ariaLabel),t.ariaRole&&a("ariaRole",t.ariaRole),t.ariaValueText&&a("ariaValueText",t.ariaValueText),t.labelTagName&&a("labelTagName",t.labelTagName),t.labelContent&&a("labelContent",t.labelContent),t.appendLabel&&a("appendLabel",t.appendLabel),t.descriptionTagName&&a("descriptionTagName",t.descriptionTagName),t.descriptionContent&&a("descriptionContent",t.descriptionContent),t.appendDescription&&a("appendDescription",t.appendDescription),t.pdomVisible||a("pdomVisible",t.pdomVisible),t.pdomOrder&&a("pdomOrder",t.pdomOrder.map(P=>P===null?"null":P.constructor.name)),t.visible||a("visible",t.visible),t.opacity!==1&&c("opacity",t.opacity),t.pickable!==null&&a("pickable",t.pickable),t.enabled||a("enabled",t.enabled),t.inputEnabled||a("inputEnabled",t.inputEnabled),t.cursor!==null&&a("cursor",t.cursor),t.transformBounds&&a("transformBounds",t.transformBounds),t.renderer&&a("renderer",t.renderer),t.usesOpacity&&a("usesOpacity",t.usesOpacity),t.layerSplit&&a("layerSplit",t.layerSplit),t.cssTransform&&a("cssTransform",t.cssTransform),t.excludeInvisible&&a("excludeInvisible",t.excludeInvisible),t.preventFit&&a("preventFit",t.preventFit),t.webglScale!==null&&a("webglScale",t.webglScale),t.matrix.isIdentity()||f("matrix",t.matrix),t.maxWidth!==null&&a("maxWidth",t.maxWidth),t.maxHeight!==null&&a("maxHeight",t.maxHeight),t.clipArea!==null&&v("clipArea",t.clipArea),t.mouseArea!==null&&(t.mouseArea instanceof pt?g("mouseArea",t.mouseArea):v("mouseArea",t.mouseArea)),t.touchArea!==null&&(t.touchArea instanceof pt?g("touchArea",t.touchArea):v("touchArea",t.touchArea)),t.inputListeners.length&&a("inputListeners",t.inputListeners.map(P=>P.constructor.name).join(", ")),e.push(new kM(5,5)),g("localBounds",t.localBounds),t.localBoundsOverridden&&a("localBoundsOverridden",t.localBoundsOverridden),g("bounds",t.bounds),isFinite(t.width)&&a("width",t.width),isFinite(t.height)&&a("height",t.height),e.push(new Lf({content:new kt("Copy Path",{fontSize:12}),listener:()=>Xy("phet.joist.display.rootNode"+i.indices.map(P=>`.children[ ${P} ]`).join("")),tandem:R.OPT_OUT})),e},ew=i=>{const e=ai(i)?i.value:i;return e===null?null:ct.toColor(e)},Rk=i=>{if(i instanceof Ul)return!0;{const e=ew(i);return!!e&&e.alpha>0}},$M=(i,e)=>{if(!i.visible)return null;const t=i._transform.getInverse().timesVector2(e),n=i.clipArea;if(n!==null&&!n.containsPoint(t))return null;for(let s=i._children.length-1;s>=0;s--){const r=i._children[s],a=$M(r,t);if(a)return a.addAncestor(i,s)}if(i.selfBounds.containsPoint(t)){if(i instanceof bi&&i.hasShape()){if(Rk(i.fill)&&i.getShape().containsPoint(t))return new Yi(i);if(Rk(i.stroke)&&i.getStrokedShape().containsPoint(t))return new Yi(i)}else if(i.containsPointSelf(t))return new Yi(i)}return null},Xy=async i=>{await navigator.clipboard?.writeText(i)},e3=(i,e,t)=>{let n=zt.union([...e&&i.mouseArea?[i.mouseArea instanceof zt?i.mouseArea:zt.bounds(i.mouseArea)]:[],...t&&i.touchArea?[i.touchArea instanceof zt?i.touchArea:zt.bounds(i.touchArea)]:[],i.getSelfShape(),...i.children.filter(s=>s.visible&&s.pickable!==!1).map(s=>e3(s,e,t).transformed(s.matrix))].filter(s=>s.bounds.isValid()));return i.hasClipArea()&&(n=n.shapeIntersection(i.clipArea)),n},Bk=(i,e,t)=>{let n=e3(i.lastNode(),e,t);for(let s=i.nodes.length-1;s>=0;s--){const r=i.nodes[s];r.hasClipArea()&&(n=n.shapeIntersection(r.clipArea)),n=n.transformed(r.matrix)}return n},t3=new Fe(new He("JOIST/a11y.home",{en:"Home"},R.OPT_OUT),R.OPT_OUT),BQ=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.moveToNextItemOrGroup",{en:"Move to next item or group",af:"Beweeg na volgende item of groep",am:"ወደሚቀጥለው ምር1ጫ ወይም ቡድን ሂድ/ጅ",ar:"انتقل إلى العنصرأو المجموعة التالية",ar_KW:"الانتقال للعنصر أو المجموعة التالية",ar_LY:"الانتقال إلى العنصر أو المجموعة التالية",ar_MA:"انتقل إلى العنصر أو المجموعة الموالية",ar_SY:"انتقل إلى العنصرأو المجموعة التالية",az:"Növbəti maddəyə yaxud qrupa keçin",be:"Пераход да наступнага элемента або групы",bg:"Отиди на следващ обект",bn:"Move to next item or group",bs:"Pređite na sljedeću stavku ili grupu",ca:"Mou-te a l'element o el grup següent",cs:"Posunout na další položku nebo skupinu",cy:"Symud i'r item nesaf neu grŵp",da:"Flyt til næste emne eller gruppe",de:"Zum nächsten Element oder nächster Gruppe wechseln",el:"Μετακίνηση στο επόμενο αντικείμενο ή ομάδα",es:"mover al siguiente elemento o grupo",es_ES:"Pasar al siguiente ítem o grupo",es_MX:"Moverse al siguiente elemento o grupo",es_PE:"Mover al siguiente elemento o grupo",eu:"Mugitu hurrengo elementura edo taldera",fa:"جابجا شدن به آیتم یا گروه بعدی",fa_DA:"رفتن به بخش یا گروه بعدی",fi:"Seuraava",fr:"Aller à l'élément suivant ou au groupe",ga:"Bog go chéad mhír nó ghrúpa eile",gl:"Moverse o elemento ou grupo seguinte",gu:"પછીની વસ્તુ અથવા જૂથ પર જાઓ",ha:"Matsa zuwa ga abu na gaba ko zuma ga gungu",hi:"अगली वस्तु या समूह पर जाएँ",hr:"Premještanje na slijedeću stavku u grupi",ht:"Ale nan pwochen eleman oubyen gwoup",hu:"Mozgás a következő tételre vagy csoportra",hy:"Տեղափոխել հաջորդ տարր կամ խումբ",ig:"Gaa na ihe ma ọ bụ otu na-esote",in:"Pindah ke pilihan berikut dalam grup",is:"Færa yfir á næsta hlut eða hóp",it:"Passa al prossimo elemento o gruppo",iw:"עבור לעצם או לקבוצה הבאים",ja:"次のアイテム（グループ）",ka:"ჯგუფის შემდეგ სხეულზე გადასვლა",ki:"Tora kũgũrũ ya rũhĩgũ rwa iria cia gĩkũgũa",kk:"Келесі пунктке немесе топқа өту",kn:"ಮುಂದಿನ ಐಟಮ್ ಅಥವ ಗುಂಪಿಗೆ ಹೋಗಿ",ko:"다음 항목이나 그룹으로 이동",ku:"بۆ دانەیەک یان گروپی داهاتو بجوڵی",ku_TR:"herin Koma an tişta din",lg:"Genda kukintu ekidako oba ekibinja",lo:"ຍ້າຍໄປສິ່ງຂອງຕໍ່ໄປ ຫຼື ກຸ່ມຕໍ່ໄປ",lt:"Eiti į kitą elementą ar grupę",lv:"Pārvietoties uz nākamo elementu vai grupu",mg:"Mifindra any amin'ny singa na vondrona manaraka",mi:"Neke ki te tūemi ki te rōpū rānei e whai ake nei",mn:"Дараагийн дүрс эсвэл бүлэгт шилжих",mr:"ग्रुप मधील पुढील पर्यायावर जा",ms:"Bergerak ke item atau kumpulan selepasnya",mt:"Imxi għall-item jew grupp li jmiss",my:"နောက်ထပ် အုပ်စုတစ်ခု (သို့) နောက် items သို့ရွှေ့ပါ",nb:"Flytt til neste oppgave eller gruppe",ne:"पछिल्लो वस्तु वा समूह मा जानुहोस्",nl:"Ga naar volgend voorwerp of groep",nn:"Flytt til neste oppgåve eller gruppe",ny:"Pitani ku chinthu china kapena gulu",om:"Gara wanta ykn garee itti aanutti ce'i",pl:"Przejdź do następnej pozycji lub grupy",ps:"یو بلې ډلې جنسونو ته ورتلل",pt:"Mover para o item ou grupo seguinte",pt_BR:"Mover para o próximo item ou grupo",qu:"Chimpay sapan huñusqamantapas",ro:"Mergi la următorul element sau grup",ru:"Перейти к следующему<br>пункту или группе",rw:"Imura ku kintu cyangwa itsinda rikurikira",se:"Sirdde boahtte fáddái dahje jovkui",si:"ඊළඟ අයිතමයට හෝ කණ්ඩායමට යන්න",sk:"Posun na ďalšiu položku alebo skupinu",sl:"Premakni se na naslednji predmet ali skupino",sn:"Enda kune itemu inoterera kana boka rinotevera",sp:"Sutlela go selo se se latelago goba sehlopha",sq:"Lëvizni në objektin ose grupin e ardhshëm",sr:"Пређите на следећу ставку или  групу",st:"E-ea ho ntho kapa sehlopha se latelang",sv:"Flytta till nästa objekt eller grupp",sw:"Nenda kwenye bidha au kundi  linalofuata",ta:"அடுத்து செல்ல",te:"తర్వాతి అంశం లేదా సమూహం వైపు కదులు",tg:"Гузариш ба ҷузъ ё гурӯҳи оянда",th:"ไปยังตัวเลือกหรือกลุ่มถัดไป",tk:"Indiki elemente ýa-da topara geç",tl:"Lumipat sa susunod na aytem o pangkat",tn:"Tsamaela ko Setlhopheng kgotsa ntlheng e e latelang",tr:"Sonraki maddeye ya da gruba geç",tw:"Kɔ ade foforɔ so Anaa ekuo foforɔ mu",uk:"Переміщення до наступного елементу чи групи",ur:"اگلی شئے یا گروپ پر جائیں",uz:"Keyingi element yoki elementlar guruhiga o‘tish",vi:"Chuyển tới đối tượng/nhóm kế tiếp",wo:"Dem Si Benen Mbir Ci Mbooloo Mi",yo:"Gbe lọ si nkan ti o tẹle tabi ẹgbẹ",zh_CN:"下一个物体或组合",zh_HK:"移至下一件物件或群組",zh_TW:"移動到下一個項目或群組",zu:"hambisa entweni elandelayo noma eqenjini"},R.OPT_OUT),R.OPT_OUT),qQ=new Fe(new He("SCENERY_PHET/a11y.keyboardHelpDialog.general.tabGroupDescription",{en:"Move to next item or group with Tab key."},R.OPT_OUT),R.OPT_OUT),zQ=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.moveToPreviousItemOrGroup",{en:"Move to previous item or group",af:"Skuif na vorige item of groep",am:"ወደቅድሙ ምርጫ ወይም ቡድን ሂድ/ጅ",ar:"انتقل إلى العنصر أو المجموعة السابقة",ar_KW:"الانتقال للعنصر أو المجموعة  السابقة",ar_LY:"الانتقال إلى العنصر أو المجموعة السابقة",ar_MA:"انتقل إلى العنصر أو المجموعة السابقة",ar_SY:"انتقل إلى العنصر أو المجموعة السابقة",az:"Əvvəlki maddəyə yaxud qrupa keçin",be:"Перайсці да папярэдняга элемента або групы",bg:"Отиди на предходен обект",bn:"Move to previous item or group",bs:"Vratite se na prethodnu stavku ili grupu",ca:"Mou-te a l'element o el grup anterior",cs:"Posunout na předchozí položku nebo skupinu",cy:"Symud i'r item neu grŵp blaenorol",da:"Flyt til tidligere emne eller gruppe",de:"Zum letzten Element oder letzter Gruppe wechseln",el:"Μετακίνηση στο προηγούμενο αντικείμενο ή ομάδα",es:"mover al elemento o grupo anterior",es_ES:"Pasar al ítem o grupo anterior",es_MX:"Moverse al elemento o grupo anterior",es_PE:"Mover al elemento anterior o grupo",eu:"Mugitu aurreko elementura edo taldera",fa:"جابجا شدن به آیتم یا گروه قبلی",fa_DA:"رفتن به بخش یا گروه قبلی",fi:"Edellinen",fr:"Aller à l'élément précédent ou au groupe",ga:"Bog go mír nó grúpa deireadh",gl:"Moverse o elemento ou grupo anterior",gu:"પહેલાની વસ્તુ અથવા જૂથ પર જાઓ",ha:"Matsa zuwa inda ka baro gungu inda ka baro",hi:"पिछली वस्तु या समूह पर जाएँ",hr:"Premještanje na prethodnu stavku u grupi",ht:"Ale nan eleman anvan oubyen gwoup",hu:"Mozgás az előző tételre vagy csoportra",hy:"Տեղափոխել նախորդ տարր կամ խումբ",ig:"Gaa na ihe gara aga ma ọ bụ otu",in:"Pindah ke pilihan sebelumnya dalam grup",is:"Færa yfir á fyrri hlut eða hóp",it:"Passa al precedente elemento o gruppo",iw:"עבור לעצם הקודם או לקבוצה הקודמת",ja:"前のアイテム（グループ）",ka:"ჯგუფის წინა სხეულზე გადასვლა",ki:"Tora kũrũ ya rũhĩgũ rwa iria cia muoyo cia gĩthũmba",kk:"Алдыңғы пунктке немесе топқа өту",kn:"ಹಿಂದಿನ ಐಟಮ್ ಅಥವ ಗುಂಪಿಗೆ ಹೋಗಿ",ko:"이전 항목이나 그룹으로 이동",ku:"بۆ دانەیەک یان گروپی پێشتر بجوڵی",ku_TR:"veger tişt an Koma berê",lg:"Genda kukintu oba ekibinja kyewavudeko",lo:"ຍ້າຍໄປສິ່ງຂອງ ຫຼື ກຸ່ມທີ່ຜ່ານມາ",lt:"Grįžti į buvusį elementą ar grupę",lv:"Pārvietoties uz iepriekšējo elementu vai grupu",mg:"Mifindra any amin'ny singa na vondrona teo aloha",mi:"Neke ki te tūemi ki te rōpū rānei o mua",mn:"Өмнөх дүрс эсвэл бүлэгт шилжих",mr:"ग्रुप मधील मागील पर्यायावर जा",ms:"Bergerak ke item atau kumpulan sebelumnya",mt:"Imxi għall-item jew grupp ta' qabel",my:"မူလအုပ်စုသို့ ပြန်ရွှေ့ပါ",nb:"Flytt til forrige oppgave eller gruppe",ne:"अघिल्लो वस्तु वा समूहमा जानुहोस्",nl:"Ga naar vorig voorwerp of groep",nn:"Flytt til førre oppgåve eller gruppe",ny:"Pitani ku chinthu chotsatirakapena gulu",om:"Gara wanta ykn garee duraatti ce'i",pl:"Przejdź do poprzedniej pozycji lub grupy",ps:"مخکنۍ ډلې جنسونو ته ورتلل",pt:"Mover para o grupo anterior",pt_BR:"Mover para item ou grupo anterior",qu:"Riy sapan huñusqamanata qepaman",ro:"Mergi la elementul sau grupul anterior",ru:"Перейти к предыдущему<br>пункту или группе",rw:"Imura ku bintu byabanjirije cyangwa itsinda",se:"Sirdde ovddit fáddái dahje jovkui",si:"පෙර අයිතමයට හෝ කණ්ඩායමකට ගෙන යන්න",sk:"Posun na predchádzajúcu položku alebo skupinu",sl:"Premakni se na prejšnji predmet ali skupino",sn:"Enda kune itemu yapfuura kana boka rapfuura",sp:"Sutlela go selo goba sehlopha sa peleng",sq:"Lëvizni në objektin ose grupin paraardhës",sr:"Вратите се на претходну ставку или групу",st:"Suthela nthong kapa sehlopha se fetileng",sv:"Flytta till föregående objekt eller grupp",sw:"Rudi kwenye bidhaa au kundi lililopita",ta:"முன் செல்ல",te:"మునుపటి అంశం లేదా సమూహం వైపు కదులు",tg:"Гузариш ба ҷузъ ё гурӯҳи пештара",th:"ไปยังตัวเลือกหรือกลุ่มที่แล้ว",tk:"Öňki elemente ýa-da topara geç",tl:"Lumipat sa nakaraang item o pangkat",tn:"Boela ko Setlhopheng kgotsa kwa ntlheng  e ko morago",tr:"Önceki maddeye ya da gruba geç",tw:"San kɔ deɛ atwam no so Anaa ekuo foforɔ nu mu bio",uk:"Перейти до попередньої позиції чи групи",ur:"پچھلی شئے یا گروپ پر جائیں",uz:"Avvalgi element yoki elementlar guruhiga qaytish",vi:"Chuyển tới đối tượng/nhóm trước đó",wo:"Dem Ci Mbir Mi Jalë wala Mbooloo",yo:"Gbe lọ si nkan iṣaaju tabi ẹgbẹ",zh_CN:"上一个物体或组合",zh_HK:"移至上一件物件或群組",zh_TW:"移動到前一個項目或群組",zu:"hambisa entweni yangaphambilini noma eqenjini"},R.OPT_OUT),R.OPT_OUT),FQ=new Fe(new He("SCENERY_PHET/a11y.keyboardHelpDialog.general.shiftTabGroupDescription",{en:"Move to previous item or group with Shift plus Tab key."},R.OPT_OUT),R.OPT_OUT),HQ=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.moveBetweenItemsInAGroup",{en:"Move between items in a group",af:"Beweeg tussen items in 'n groep",am:"በቡድን ውስጥ ባሉ ምርጫዎች መካከል ሂድ/ጅ",ar:"انتقل بين عناصر المجموعة",ar_KW:"الانتقال بين العناصر في المجموعة",ar_LY:"التنقل بين العناصر في المجموعة",ar_MA:"التنقل بين عناصر المجموعة",ar_SY:"انتقل بين عناصر المجموعة",az:"Qrupdakı növbəti maddəyə keçin",be:"Перамяшчайцеся паміж элементамі ў групе",bg:"Движи се между обектите",bn:"Move between items in a group",bs:"Prelazite između stavki u grupi",ca:"Mou-te entre els elements d'un grup",cs:"Posunout mezi položkami ve skupině",cy:"Symud rhwng eitemau yn y grŵp",da:"Flyt mellem emner i en gruppe",de:"Zwischen Elementen einer Gruppe wechseln",el:"Μετακίνηση μεταξύ των αντικειμένων μιας ομάδας",es:"mover entre los elementos del grupo",es_ES:"Moverse entre los ítems de un mismo grupo",es_MX:"Moverse entre los elementos de un grupo",es_PE:"Mover entre elementos en un grupo",eu:"Mugitu taldeko elementuen artean",fa:"جابجا شدن بین آیتم های یک گروه",fa_DA:"رفتن به بخش‌های یک گروه",fi:"Liiku ryhmän valintojen välillä",fr:"Déplacement entre élément dans un groupe",ga:"Bog idir míreanna i ngrúpa",gl:"Moverse entre elementos dun grupo",gu:"ગ્રુપની અન્ય વસ્તુઓ પર જાઓ",ha:"Matsa zuwa a cikin gungun",hi:"एक समूह की वस्तुओं के बीच हिलाएं",hr:"Premještanje između stavki u grupi",ht:"Deplase ant eleman nan yon gwoup",hu:"Mozgás a csoporton belül",hy:"Տեղափոխել խմբի տարրերի միջև",ig:"Bugharịa n'etiti ihe dị n'otu",in:"Pindah diantara pilihan di dalam grup",is:"Færa á milli hluta í hóp",it:"Muovi tra gli elementi del gruppo",iw:"עבור בין עצמים בקבוצה",ja:"グループ内で選択",ka:"ჯგუფის სხეულებს შორის გადასვლა",ki:"Tora kũrũrũ ndũng'u cia iria cia muoyo",kk:"Топтағы пункттер арасынан өту",kn:"ಒಂದು ಗುಂಪಿನಲ್ಲಿ ಅಂಶಗಳನ್ನು ಬದಲಾಯಿಸಿ",ko:"그룹내 항목간 이동",ku:"لە نێوان داناکان یان گروپەکان بجوڵی",ku_TR:"dinav hêmsnên komê de bizivirin",lg:"Genda wakati w’ebintu ebiri mu kibinja",lo:"ຍ້າຍສິ່ງຂອງຢູ່ພາຍໃນກຸ່ມ",lt:"Eiti į grupės elementus",lv:"Pārvietoties starp elementiem grupā",mg:"Mifindra eny amin'ireo singa ao anaty vondrona",mi:"Neke ki tētahi atu tūemi o te rōpū",mn:"Бүлэг доторх дүрс хооронд шилжих",mr:"ग्रूपमधील पर्याय निवडता येतील",ms:"Bergerak antara item-item di dalam kumpulan",mt:"Mexxi bejn oġġetti fil-grupp",my:"အုပ်စုတစ်ခုအတွင်း items များကိုရွှေ့ပြောင်းပါ",nb:"Flytt mellom temaer i en gruppe",ne:"समूहमा भएको विकल्पहरू बीचमा सार्नुहोस्",nl:"Kies een voorwerp in een groep",nn:"Flytt mellom tema i ei gruppe",ny:"Sunthani pakati pa zinthu pagulu",om:"Wantoota garee keessa jiran gidduutti sochoosi",pl:"Przechodź między pozycjami w grupie",ps:"یو ډله جنسونو ته ورتلل",pt:"Mover entre itens num grupo",pt_BR:"Mover entre itens de um grupo",qu:"Muyuriy imakuna huñusqampimanta",ro:"Deplasare între elementele unui grup",ru:"Переход между пунктами в группе",rw:"Imura hagati y'ibintu mu matsinda",se:"Sirdde joavkku fáttáid gaskkas",si:"කණ්ඩායමක අයිතම අතර ගෙන යන්න",sk:"Posun medzi položkami v skupine",sl:"Premik med predmeti v skupini",sn:"Famba pakati pemaitem muboka",sp:"Suthiša magareng ga dilo ka sehlopheng",sq:"Lëvizni ndërmjet objekteve në grup",sr:"Прелазите између ставки у групи",st:"Tsamaisa pakeng tsa dintho ka sehlopha",sv:"Flytta mellan objekt i en grupp",sw:"Pita kati ya vitu katika kundi",te:"ఒక సమూహంలోని వివిధ అంశాల మధ్య కదులు",tg:"Гузариш байни ҷузъҳои гурӯҳ",th:"ย้ายระหว่างตัวเลือกในกลุ่ม",tk:"Toparyň içindäki elementleriň arasynda geç",tl:"Lumipat sa pagitan ng mga aytem sa isang pangkat",tn:"Tsamaya fo gare ga Diitem kgotsa Setlhopha",tr:"Grup içindeki maddeler arasında geçiş yap",tw:"Kyinkyini akuo no mu",uk:"Переміщення між елементами в групі",ur:"گروپ کے اندرون مختلف اشیا کے درمیان جائیں",uz:"Guruh elementlari orasida harakatlantirish",vi:"Di chuyển giữa các đối tượng",wo:"Dox Ci digente ñari Mbir Si Benn Mbooloo",yo:"Gbe laarin awọn ohun kan ninu ẹgbẹ kan",zh_CN:"移到组内物体",zh_HK:"在群組內移動",zh_TW:"在一個群組裡的項目間移動",zu:"hamba phaka kwezinto ngeqembu"},R.OPT_OUT),R.OPT_OUT),UQ=new Fe(new He("SCENERY_PHET/a11y.keyboardHelpDialog.general.groupNavigationDescription",{en:"Move between items in a group with Left and Right arrow keys or Up and Down arrow keys."},R.OPT_OUT),R.OPT_OUT),GQ=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.pressButtons",{en:"Press buttons",af:"Druk knoppies",am:"ቁልፎቹን ተጫን/ኝ",ar:"اضغط على الأزرار",ar_KW:"اضغط الأزرار",ar_LY:"اضغط على الأزرار",ar_MA:"اضغط",ar_SA:"اضغط على المفاتيح",ar_SY:"اضغط على الأزرار",az:"Düymələrə basın",be:"Націскаць кнопкі",bg:"Натисни бутона",bn:"বাটনটি চাপো (Press buttons)",bs:"Pritisni tastere",ca:"Prem els botons",cs:"Stisknout tlačítko",cy:"Pwyso botymau",da:"Trykknapper",de:"Knopf drücken",el:"Πάτημα πλήκτρων",es:"Presionar botones",es_ES:"Apretar botones",es_MX:"Presionar el botón",es_PE:"Presiones los botones",eu:"Sakatu botoiak",fa:"دکمه ها را فشار دهید",fa_DA:"دکمه ها را فشار دهید",fi:"Paina nappuloita",fr:"Appuie sur le bouton",ga:"Brú cnaipí",gl:"Pulsar botóns",gu:"બટનો દબાવો",ha:"Danna madannai",hi:"कुंजी दबाएं",hr:"Stisni  gumb",ht:"Peze bouton",hu:"Nyomd a gombokat",hy:"Սեղմեք կոճակները",ig:"Pịa bọtịnụ",in:"Tekan Tombol",is:"Þrýsta á takka",it:"Premi i pulsanti",iw:"מקשי הפעלה",ja:"ボタンを押す",ka:"ღილაკზე დაჭერა",ki:"Tora miringo",kk:"Пунктті белгілеу",kn:"ಬಟನ್ ಒತ್ತಿ",ko:"버튼 누름",ku:"کلیک لەسەر ئەم خاڵە بکە",ku_TR:"bişkokên çapemeniyê",lg:"Nyiga amapeesa ",lo:"ກົດປຸ່ມ",lt:"Paspauskite mygtukus",lv:"Nospiest pogas",mg:"Tsindrio bokotra",mi:"Pēhi pātene",mn:"Товч дар",mr:"बटण दाबा",ms:"Tekan butang",mt:"Agħfas il-buttuni",my:"အောက်ခလုတ်ကို နှိပ်ပါ",nb:"Trykk på knappen",ne:"बटन थिच्नुहोस्",nl:"Druk op knoppen",nn:"Trykk på knappen",ny:"Dinani Mabatani",om:"Qabdoota  dhiibaa",pl:"Naciśnij przycisk",ps:"بټن کیکاږئ",pt:"Pressionar botões",pt_BR:"Pressione os botões",qu:"Wutunkuna ñupuna",ro:"Apasă butoanele",ru:"Нажать графическую кнопку",rw:"Kanda izi buto",se:"Deatte boaluid",sk:"Stlačenie tlačidla",sl:"Pritisni gumb",sn:"Dzvanya mabhatani",sp:"Tobetsa dikonopo",sq:"Shtypni butonat",sr:"Притисни тастере",st:"Tobetsa likonopo",sv:"Tryck på knapparna",sw:"Bonyeza vitufe",te:"బటన్లను నొక్కండి",tg:"Тугмаҳоро пахш кунед",th:"กดปุ่ม",tk:"Düwmelere bas",tl:"Pindutin ang mga pindotanan",tn:"Tobetsa dikonopo",tr:"Düğmelere basın",tw:"Mia so",uk:"Натисніть на кнопку",ur:"بٹن دبانا",uz:"Tugmachalarni bosing",vi:"Bấm phím",wo:"Bësal  Butonbi",yo:"Tẹ awọn bọtini",zh_CN:"按下按钮",zh_HK:"按鍵",zh_TW:"按下按鍵",zu:"cindezela izinkinobho"},R.OPT_OUT),R.OPT_OUT),WQ=new Fe(new He("SCENERY_PHET/a11y.keyboardHelpDialog.general.pressButtonsDescription",{en:"Press buttons with Space or Enter keys."},R.OPT_OUT),R.OPT_OUT),KQ=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.exitADialog",{en:"Exit a dialog",af:"Verlaat 'n dialoog",am:"ከውይይት ውጣ/ጭ",ar:"الخروج من مربع الحوار",ar_KW:"خروج",ar_LY:"الخروج من الحوار",ar_MA:"الخروج",ar_SA:"الخروج من المحادثة",ar_SY:"الخروج من مربع الحوار",az:"Pəncərəni bağlayın",be:"Выйсці з дыялогу",bg:"Затвори прозореца",bn:"Exit a dialog",bs:"Izađite iz dijaloga",ca:"Surt d'un diàleg",cs:"Ukončit akce",cy:"Gadael y deialog",da:"Slut en dialog",de:"Dialog verlassen",el:"Κλείσιμο παραθύρου",es:"Salir",es_ES:"Salid del diálogo",es_MX:"Salir",es_PE:"Salir de un diálogo",eu:"Irten azalpen-lehiotik",fa:"خروج از یک دیالوگ",fa_DA:"خروج از یک دیالوگ",fi:"Poistu",fr:"Quitter la boîte de dialogue",gl:"Saír dunha xanela de diálogo",gu:"ડાયલોગ બોક્સ બંધ કરો",ha:"Fita daga zance",hi:"बाहर निकले",hr:"napustite dijaloški okvir",ht:"Soti nan yon bwat dyalòg",hu:"Kilépés a párbeszédből",hy:"Դուրս գալ երկխոսությունից",ig:"Pụọ",in:"Keluar dari percakapan",is:"Loka glugga",it:"Chiudi la finestra di dialogo",iw:"יציאה מתיבת השיח",ja:"ダイアログを終了",ka:"დიალოგის დახურვა",ki:"Kurutwo matigari",kk:"Диалог терезесінен шығу",kn:"ಡೈಲಾಗ್‍ನಿಂದ ನಿರ್ಗಮಿಸು",ko:"대화 종료",ku:"چوونە دەرەوە لە بژاردە",ku_TR:"je diyalogê derkevin",lg:"Galawo okwogerezeganya",lo:"ອອກຈາກລະບົບ",lt:"Uždaryti langą",lv:"Aizvērt dialogu",mg:"Hivoaka ny fifanakalozan-kevitra",mi:"Puta atu i te pouaka kōrero",mn:"Диалогоос гарах",mr:"संवादिकेतून बाहेर पडा",ms:"Keluar dari paparan",mt:"Oħroġ barra",my:"ထွက်ပါ",nb:"Gå ut av dialogen",ne:"यस बाट बाहिर निस्कनुहोस् ",nl:"Verlaat dialoog",ny:"Tulukani pazokambirana",om:"Qaaqa tokko keessaa ba'i",pl:"Wyjdź z okna dialogowego",ps:"د دیالوګ څخه وتل",pt:"Sair do diálogo",pt_BR:"Sair do diálogo",qu:"Lluqsiy rimaymanta",ro:"Ieși din fereastră",ru:"Выйти из диалогового окна",rw:"Kurekeraho ikiganiro",se:"Mana eret dialogas",si:"සංවාදයෙන් ඉවත් වන්න",sk:"Koniec dialógu",sl:"Zapri okno",sn:"Buda muchivakwa",sp:"Tšwa ka gare ga poledišano",sq:"Dilni nga dialogu",sr:"Изађите из дијалога",st:"tsoa puisano",sv:"Lämna ett dialogfönster",sw:"Funga ujumbe",ta:"வெளியேற",te:"పరిశీలనాంశం నుండి బయటకు రండి",tg:"Аз муколама баромадан",th:"ออกจากกล่องข้อความ",tk:"Gepleşik penjiresinden çyk",tl:"Lumabas sa isang dialogue",tn:"Tswaya mo puisanong",tr:"Diyaloğu kapat",tw:"Fa nkitahodie no bra awieeɛ",uk:"Вийти з діалогового вікна",ur:"اخراج کریں",uz:"Dialog oynani tark etish",vi:"Thoát khỏi dialog",wo:"genë",yo:"Jade ajọṣọ",zh_CN:"退出对话",zh_HK:"離開對話",zh_TW:"離開對話框",zu:"phuma engxoxweni"},R.OPT_OUT),R.OPT_OUT),YQ=new Fe(new He("SCENERY_PHET/a11y.keyboardHelpDialog.general.exitDialogDescription",{en:"Exit a dialog with Escape key."},R.OPT_OUT),R.OPT_OUT),jQ=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.setValuesInKeypad",{en:"Set values within keypad",af:"Stel waardes binne sleutelbord",am:"በቁልፍ ሰሌዳ ውስጥ ዋጋዎቹን ያስቀምጡ",ar:"قم بتعيين القيم داخل لوحة المفاتيح",ar_KW:"Set values within keypad",ar_LY:"تعيين القيم داخل لوحة المفاتيح",ar_MA:"ادخال القيم باستعمال لوحة المفاتيح",ar_SY:"قم بتعيين القيم داخل لوحة المفاتيح",az:"Klaviatura daxilində qiymətlər təyin edin",be:"Задайце значэнні з дапамогай клавіятуры",bg:"Въведи стойности от клавиатурата",bn:"Set values within keypad",bs:"Podesite vrijednosti preko tastature",ca:"Introdueix valors al teclat",cs:"Nastavit hodnoty na klávesnici",da:"Indstil værdier i tastaturet",de:"Werte mit der Tastatur einstellen",el:"Ορίστε τιμές στο πληκτρολόγιο",es:"Establecer valores con el teclado",es_PE:"Establecer valores dentro del teclado",eu:"Ezarri balioak teklatuaren barruan",fa:"تنظیم مقادیر صفحه کلید",fa_DA:"تنظیم مقدارهای صفحه کلید",fi:"Aseta arvot näppäimistöllä",fr:"Configurer les valeurs dans le pavé numérique",gu:"કી પેડ ની અંદર કિમતો સેટ કરો",ha:"Sanya ƙima ta hanyar amfani da kibod",hi:"कीपैड में ही मान भरें",hr:"Postavite vrijednosti pomoću tipkovnice",ht:"Met valè nan klavye",hu:"Értékek beállítása a billentyűzeten belül",hy:"Սահմանեք արժեքներ ստեղնաշարով",ig:"Tọọ ụkpụrụ n'ime ahụ igodo",is:"Setja gildi á lyklaborði",it:"Imposta i valori col tastierino",iw:"הגדר ערכים בלוח המקשים",ki:"Ũthoũrwo Maundũko Inĩũ",kn:"Set values within keypad",ko:"키패드로 값 설정",ku:"نرخەکان لە نێو تەختەکلیلەکە جێگر بکە",mi:"Tautuhi ngā uara",mn:"Товч дахь утга тохируул",mr:"की पॅड मधील किमती भरा",ms:"Tetapkan nilai antara pad kekunci",mt:"Issettja valuri bil-keypad",nb:"Sett verdier innenfor nummertastaturet",nl:"Zet waarden in het toetsenbord",om:"Gatii qindeessi  cuqoo lakkafsaa kessaatti",pl:"Ustaw wartości za pomocą klawiatury",ps:"د کیلیو په صفحې کې د مقدارونو تنظیم",pt:"Definir valores no teclado",pt_BR:"Definir valores no teclado",ro:"Setați valorile din tastatură",sk:"Nastavte hodnoty",sl:"Nastavi vrednosti s številčno tipkovnico",sn:"Isa mavalue mumakiyipedhi",sp:"Beakanya dikelo ka gare ga keypad",sr:"Подесите вредности преко тастатуре",sv:"Ställ in värden med knappsatsen",sw:"Weka thamani ndani ya vitufe",te:"Set values within keypad",tg:"Муайян кардани бузургӣ бо ёрии клавиатура",th:"ตั้งค่าด้วยปุ่มตัวเลข",tr:"Tuş takımı içinde değerleri ayarlayın",ur:"کی پیاڈ میں قدروں کو سبٹ کریں",uz:"Klaviaturada qiymatlarni o'rnating",vi:"Set values within keypad",yo:"Ṣeto awọn iye laarin oriṣi bọtini",zh_TW:"用數字鍵設定值",zu:"setha amanani ngaphakathi kwekhiphedi"},R.OPT_OUT),R.OPT_OUT),XQ=new Fe(new He("SCENERY_PHET/a11y.keyboardHelpDialog.general.setValuesInKeypadDescription",{en:"Set values within keypad using number keys 0-9."},R.OPT_OUT),R.OPT_OUT),QQ=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.toggleCheckboxes",{en:"Toggle checkboxes",af:"Toggle checkboxes",am:"አመልካች ሳጥኖችን ቀይር",ar:"تبديل مربعات الاختيار",ar_KW:"تبديل الاختيار",ar_LY:"تبديل مربعات الاختيار",ar_MA:"تبديل مربعات الاختيار",ar_SY:"تبديل مربعات الاختيار",az:"Seçim qutusunu dəyişdirin",be:"Пераключыце сцяжкі",bg:"Маркирай квадратчето",bn:"Toggle checkboxes",bs:"Promijenite čekiranja",ca:"Activa o desactiva la casella",cs:"Přepnout zaškrtávací políčka",cy:"Toglo blychau gwirio",da:"Skift afkrydsningsfelter",de:"Checkboxen umschalten",el:"Εναλλαγή πλαισίων ελέγχου",es:"Alternar casillas de verificación",es_ES:"Alternar casillas de verificación",es_MX:"Activar/Desactivar casillas",es_PE:"Activar casilla de verificación",eu:"Aktibatu/desaktibatu laukitxoak",fa:"تغییر کادرهای انتخاب",fa_DA:"چک بکس‌ها را تغییر دهید",fi:"Liiku valintojen välillä",fr:"Cocher les cases",ga:"Scoránaigh ticbhosca",gl:"Marcar ou desmarcar casas de verificación",gu:"ચેક બોક્ષ અદલ બદલ કરો",ha:"Juyawar wuraren cikawa na kan manhaja",hi:"चेकबॉक्स टॉगल करें",hr:"Uključite potvrdne okvire",ht:"Aktive kaz yo",hu:"Jelölőnégyzet ki/be",hy:"Փոխարկելի վանդակներ",ig:"Tụgharịa akpa",is:"Breyta vali",it:"Attiva/disattiva le caselle di controllo",iw:"בחירה בתיבות סימון",ja:"チェックボックスを切り替える",ki:"Toggle checkboxes",kk:"Белгіні таңдау/алып тастау",kn:"ಚೆಕ್‍ಬಾಕ್ಸ್ ಬದಲಾಯಿಸಿ",ko:"토글 체크상자",ku:"گۆڕینی چێکبۆکسەکان",ku_TR:"Qutiyên kontrolê bikin",lg:"Juzamu mububokisi bwebamakinga",lo:"ເລືອກບ໋ອກ",lt:"Perjungti žymimuosius langelius",lv:"Pārslēgt izvēles rūtiņu stāvokli",mg:"Ampifamadiho ny boaty",mi:"Hohoko ngā pouaka taki",mn:"Сонголт хийх",mr:"चेकबॉक्स मधील माहिती क्लिक करून निवडा/रद्द करा",ms:"Buka/Tutup Kotak semak",mt:"Għamel l-għażla tieghek billi tittikkja l-kaxxa",nb:"Veksle mellom sjekkbokser",ne:"चेकबक्सहरू टॉगल गर्नुहोस्",nl:"Verwissel checkboxes",nn:"Veksle mellom sjekkboksar",ny:"Sinthani mabokosi owonera",om:"Sanduuqawwan filannoo jijjiiri",pl:"Przełącz pola wyboru",ps:"چک باکس وتاکئ",pt:"Alternar caixas de seleção",pt_BR:"Alternar caixas de seleção",qu:"Tikray chanin maskaykaqata",ro:"Comutare casete de selectare",ru:"Установить/снять галочку",rw:"Kuzuza utudirishya",se:"Merke merkenbovssaid",sk:"Prepnutie začiarkavacieho políčka",sl:"Označi kvadratke",sn:"Toggle checkboxes",sp:"Fetola mapokisi a go hlahloba",sq:"Ndryshoni kutitë e kontrollit",sr:"Промените чекирања",st:"Fetolela li-checkbox",sv:"Markera i bockrutorna",sw:"Badili vitufe vya kuteua",te:"చెక్ బాక్స్‌లను మార్చు",tg:"Гузаронидани куттихои кайд",th:"เลือกกล่องข้อความ",tk:"Barlag gutularyny belle-aýyr",tl:"Toggle checkboxes",tn:"Tshikinya Dicheckbox",tr:"Onay kutularını aç/kapat",tw:"Sɔ anaa ɛensɔ wɔ adaka yi mu",uk:"Перемкнути прапорці",ur:"کنٹرول باکس ٹوگل کرنا",uz:"O‘tish qutilari",vi:"Thay đổi dấu chọn",wo:"Tëbël Ci Yenen Kër ",yo:"Yipada awọn apoti ayẹwo",zh_CN:"勾选框",zh_HK:"切換複選框",zh_TW:"切換勾選盒",zu:"guqula amabhokisi okuhlola"},R.OPT_OUT),R.OPT_OUT),JQ=new Fe(new He("SCENERY_PHET/a11y.keyboardHelpDialog.general.toggleCheckboxesDescription",{en:"Toggle checkboxes with Space key."},R.OPT_OUT),R.OPT_OUT),ZQ=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.basicActions",{en:"Basic Actions",af:"Basiese aksies",am:"ዋና ተግባራት",ar:"الإجراءات الأساسية",ar_KW:"الاجراءات الأساسية",ar_LY:"الإجراءات الأساسية",ar_MA:"الإجراءات الأساسية",ar_SA:"الاجراءات الرئيسية ",ar_SY:"الإجراءات الأساسية",az:"Əsas fəaliyyətlər",be:"Асноўныя дзеянні",bg:"Основни действия",bn:"Basic Actions",bs:"Osnovne radnje",ca:"Accions bàsiques",cs:"Základní akce",cy:"Gweithrediadau sylfaenol",da:"Basale handlinger",de:"Grundoperationen",el:"Βασικές ενέργειες",es:"Acciones Básicas",es_ES:"Acciones básicas",es_MX:"Acciones Básicas",es_PE:"Acciones Básicas",eu:"Oinarrizko akzioak",fa:"اقدامات مقدماتی",fa_DA:"اقدامات اولیه",fi:"Perustoiminnot",fr:"Actions de base",gl:"Accións básicas",gu:"મૂળભૂત ક્રિયાઓ",ha:"Matakan da aka san dasu",hi:"आधारभूत क्रियाएँ",hr:"Osnovne akcije",ht:"Aksyon Debaz",hu:"Alaplehetőségek",hy:"Հիմնական գործողություններ",ig:"Ọrụ Mbụ",in:"Tindakan dasar",is:"Grunnaðgerðir",it:"Azioni base",iw:"פעולות בסיסיות",ja:"基本操作",ka:"ძირითადი მოქმედებები",ki:"Miringo itiganwa",kk:"Базалық әрекеттер",kn:"ಮೂಲ ಚಟುವಟಿಕೆಗಳು",ko:"기본 동작",ku:"کرداری سەرەتایی",ku_TR:"Çalakiyên bingehîn",lg:"Ebikolwa Ebisokelwaako",lo:"ພື້ນຖານການປະຕິບັດ",lt:"Pagr. veiksmai",lv:"Pamata darbības",mg:"Hetsika fototra",mi:"He Hohenga Māmā",mn:"Үндсэн үйлдлүүд",mr:"मूळ कृती",ms:"Tindakan Asas",mt:"Azzjonijiet Bażiċi",my:"အခြေခံ လုပ်ဆောင်ချက်များ",nb:"Grunnleggende",ne:"आधारभूत क्रियाहरू",nl:"Eenvoudige acties",nn:"Handlingar",ny:"Zochita zofunikira",om:"Tarkaanfiiwwan Bu’uuraa",pl:"Podstawowe działania",ps:"لومړنۍ کړنې",pt:"Ações Básicas",pt_BR:"Ações Básicas",qu:"Ruwaykuna qallarinapaq",ro:"Acțiuni de bază",ru:"Базовые действия",rw:"Ibikorwa by'ibanze",se:"Vuđolaš doaimmat",sk:"Základné akcie",sl:"Osnovne akcije",sn:"Bhesiki Ekisheni",sp:"Ditiro tša Motheo",sq:"Veprimet Bazë",sr:"Основне радње",st:"Liketso tsa Motheo",sv:"Grundläggande åtgärder",sw:"matendo za Msingi",ta:"அடிப்படைச் செயற்பாடு",te:"ప్రాథమిక క్రియలు",tg:"Амалҳо ҳастанд",th:"การใช้งานโดยพื้นฐาน",tk:"Esasy hereketler",tl:"Pangunahing Aksyon",tn:"Dikgato tsa Tshimologo",tr:"Temel Eylemler",tw:"Mfiase ndeyɛe",uk:"Основні дії",ur:"بنیادی اقدام",uz:"Asosiy  harakatlar",vi:"Thao tác cơ bản",wo:"Jëf Yi Suufe",yo:"Awọn iṣe ipilẹ",zh_CN:"基本操作",zh_HK:"基本動作",zh_TW:"基本動作",zu:"Izenzo Eziyisisekelo"},R.OPT_OUT),R.OPT_OUT),qk=new Fe(new He("SCENERY_PHET/a11y.resetAll.label",{en:"Reset All"},R.OPT_OUT),R.OPT_OUT),$Q=new Fe(new He("SCENERY_PHET/a11y.voicing.resetAll.contextResponse",{en:"Everything Reset."},R.OPT_OUT),R.OPT_OUT),eJ=new Fe(new He("SCENERY_PHET/a11y.resetAll.alert",{en:"Sim screen restarted. Everything reset."},R.OPT_OUT),R.OPT_OUT),tJ=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.resetAll",{en:"Reset All",af:"Stel alles terug",ak:"Hyɛ biri biaasi bio",am:"ሁሉንም ዳግም አስጀምር",ar:"إعادة ضبط الجميع",ar_KW:"إعادة ضبط الكل",ar_LY:"إعادة تعيين الكل",ar_MA:"Reset All",ar_SY:"إعادة ضبط الجميع",az:"Hamısını Sıfırla",be:"Скінуць усе",bg:"Нулирай всичко",bn:"Reset All",bs:"Sve na početak",ca:"Reinicia tot",cs:"Obnovit vše",da:"Nulstil alt",de:"Alle zurücksetzen",el:"Επαναφορά όλων",es:"Resetear Todo",es_PE:"Reinicia todo",eu:"Berrezarri guztiak",fa:"بازنشانی همه",fa_DA:"همه را دوباره تنظیم کنید",fi:"Nollaa kaikki",fr:"Réinitialiser tout",ga:"Athshocraigh gach rud",gu:"બધુ રીસેટ કરો",ha:"sake saitawa gaba daya",hi:"सब कुछ पहले जैसा करें",hr:"Resetiraj sve",ht:"Reyinisyalize tout",hu:"Az összes visszaállítása",hy:"Վերականգնել բոլորը",ig:"Tọgharịa Ha niile",is:"Endurstilla allt",it:"Azzera tutto",iw:"אפס הכל",ki:"Ũhoragia Gĩtũko",kn:"ಎಲ್ಲವನ್ನು ರಿಸೆಟ್ ಮಾಡಿ",ko:"모두 재설정",ku:"هەموو ڕێک بخەوە",lv:"Atiestatīt visu",mi:"Tautuhi anō te Katoa",mn:"Дахин Эхэл",mr:"मूळ स्थितीत आणा",ms:"Set Semula Semua",mt:"Reset  Kollox",nb:"Tilbakestill alt",nl:"Reset alles",ny:"Yambitsanso",om:"Hundaa Irra Deebi'ii Saagi",pl:"Resetuj wszystko",ps:"ټول اولني خالت ته راولئ",pt:"Reiniciar Tudo",pt_BR:"Reiniciar Tudo",ro:"Resetare",rw:"Tangira bushyashya",se:"Ođas buot",sk:"Obnoviť všetko",sl:"Resetiraj vse",sn:"Tangidza zvese",sp:"Seta gape Tsohle",sr:"Све на почетак",sv:"Återställ allt",sw:"weka upya zote",te:"అన్నింటిని పునఃసాధన చేయు",tg:"Ҳамаро аз нав танзим кунед",th:"เริ่มใหม่ทั้งหมด",tr:"Hepsini sıfırla",uk:"Скинути налаштування",ur:"سب کو ریسیٹ کرئیے",uz:"Hammasini tiklash",vi:"Reset all",yo:"Tun Gbogbo",zh_TW:"全部重置",zu:"setha ka busha konke"},R.OPT_OUT),R.OPT_OUT),iJ=new Fe(new He("SCENERY_PHET/a11y.keyboardHelpDialog.general.resetAllDescriptionPattern",{en:"Reset All with {{altOrOption}} plus R."},R.OPT_OUT),R.OPT_OUT),i3=new ld("sceneryPhet"),c_={DEFAULT_BUTTON_RADIUS:20.8,PLAY_CONTROL_BUTTON_RADIUS:28},RA=5;class g0 extends rh{constructor(e,t,n){let s=Ne()({sizable:!1,radius:n&&n.content?null:30,lineWidth:.5,stroke:null,touchAreaDilation:0,mouseAreaDilation:0,touchAreaXShift:0,touchAreaYShift:0,mouseAreaXShift:0,mouseAreaYShift:0,cursor:"pointer",xMargin:5,yMargin:5,buttonAppearanceStrategy:g0.ThreeDAppearanceStrategy},n);s.content,s.radius,s.buttonAppearanceStrategyOptions||(s.buttonAppearanceStrategyOptions={stroke:s.stroke,lineWidth:s.lineWidth});const r=new ma(1),a=ie.pick(s,Ge.REQUIRES_BOUNDS_OPTION_KEYS);s=ie.omit(s,Ge.REQUIRES_BOUNDS_OPTION_KEYS),super(e,r,t,s),this.buttonNodeConstraint=new sJ(this,this.layoutSizeProperty,{content:s.content??null,radius:s.radius,buttonBackground:r,xMargin:s.xMargin,yMargin:s.yMargin,maxLineWidth:this.maxLineWidth,touchAreaDilation:s.touchAreaDilation,touchAreaXShift:s.touchAreaXShift,touchAreaYShift:s.touchAreaYShift,mouseAreaDilation:s.mouseAreaDilation,mouseAreaXShift:s.mouseAreaXShift,mouseAreaYShift:s.mouseAreaYShift}),this.addDisposable(this.buttonNodeConstraint),this.mutate(a)}}class nJ{constructor(e,t,n,s){const r=s&&s.stroke?s.stroke:new Rs(n,{luminanceFactor:-.4}),a=s&&s.lineWidth!==void 0?s.lineWidth:.3,o=Ne()({stroke:r,lineWidth:a,overStroke:r,overLineWidth:a,overButtonOpacity:1,selectedStroke:r,selectedLineWidth:a,selectedButtonOpacity:1,deselectedFill:null,deselectedStroke:r,deselectedLineWidth:a,deselectedButtonOpacity:1,overFill:n},s),l=new Rs(n,{luminanceFactor:.8}),h=new Rs(n,{luminanceFactor:.7}),c=new Rs(n,{luminanceFactor:.3}),f=new Rs(n,{luminanceFactor:-.1}),g=new Rs(n,{luminanceFactor:-.2}),v=new Rs(n,{luminanceFactor:-.4}),A=new Rs(n,{luminanceFactor:-.5}),P=new Dt([n],M=>M.withAlpha(0)),w=new ma(1,{stroke:o.stroke?o.stroke:v,lineWidth:o.lineWidth,pickable:!1});e.addChild(w),this.maxLineWidth=w.hasStroke()&&o&&typeof o.lineWidth=="number"?o.lineWidth:0;let T;const D=()=>{const M=e.radius,B=M-RA/2,O=M+RA/2,x=RA/2;if(M<x)return;const Z=new gc(x,x,B,x,x,O).addColorStop(0,n).addColorStop(1,h),de=new gc(-2.5,-2.5,B,-2.5,-2.5,O).addColorStop(0,P).addColorStop(1,A),$=new gc(x,x,B,x,x,O).addColorStop(0,c).addColorStop(1,l),me=new gc(-2.5,-2.5,B,-2.5,-2.5,O).addColorStop(0,P).addColorStop(1,A),ue=new gc(-2.5,-2.5,0,0,0,O).addColorStop(0,f).addColorStop(.6,g).addColorStop(.8,n).addColorStop(1,l);w.radius=M,e.cachedPaints=[Z,$,ue],w.cachedPaints=[de,me],T&&t.unlink(T),T=Se=>{switch(Se){case Jn.IDLE:e.fill=o.deselectedFill||Z,e.stroke=o.deselectedStroke,e.lineWidth=o.deselectedLineWidth,e.opacity=o.deselectedButtonOpacity,w.fill=de,w.opacity=o.deselectedButtonOpacity;break;case Jn.OVER:e.fill=$,e.stroke=o.overStroke,e.lineWidth=o.overLineWidth,e.opacity=o.overButtonOpacity,w.fill=me,w.opacity=o.overButtonOpacity;break;case Jn.PRESSED:e.fill=ue,e.stroke=o.selectedStroke,e.lineWidth=o.selectedLineWidth,e.opacity=o.selectedButtonOpacity,w.fill=me,w.opacity=o.selectedButtonOpacity;break;default:throw new Error(`unsupported interactionState: ${Se}`)}},t.link(T)};e.selfBoundsProperty.link(D),this.disposeThreeDAppearanceStrategy=()=>{e.selfBoundsProperty.unlink(D),t.hasListener(T)&&t.unlink(T),l.dispose(),h.dispose(),c.dispose(),f.dispose(),g.dispose(),v.dispose(),A.dispose(),P.dispose()}}dispose(){this.disposeThreeDAppearanceStrategy()}}g0.ThreeDAppearanceStrategy=nJ;class sJ extends Oo{constructor(e,t,n){super(e),this.buttonNode=e,this.layoutSizeProperty=t,this.isFirstLayout=!0,this.lastLocalWidth=0,this.lastLocalHeight=0,this.options=n,this.buttonNode.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.options.content&&this.addNode(this.options.content),this.layout()}layout(){super.layout();const e=this.buttonNode,t=this.options.content,n=t?this.createLayoutProxy(t):null;if(!!t!=!!n)return;const s=e.widthSizable,r=e.heightSizable,a=n?n.minimumWidth+this.options.xMargin*2:0,o=n?n.minimumHeight+this.options.yMargin*2:0;let l=Math.max(a,o)/2;this.options.radius!==null&&(l=this.options.radius);let h=this.isFirstLayout||s?2*l:e.localMinimumWidth,c=this.isFirstLayout||r?2*l:e.localMinimumHeight;this.lastLocalWidth=this.isFirstLayout||s?Math.max(h,s?e.localPreferredWidth??0:0):this.lastLocalWidth,this.lastLocalHeight=this.isFirstLayout||r?Math.max(c,r?e.localPreferredHeight??0:0):this.lastLocalHeight;const f=Math.max(this.lastLocalWidth,this.lastLocalHeight);if(!s&&r&&(h=f),!r&&s&&(c=f),this.isFirstLayout||s||r){const g=(f-this.options.maxLineWidth)/2;this.options.buttonBackground.radius=g}if(this.isFirstLayout||s||r){const g=this.options.buttonBackground.localBounds.width/2;this.buttonNode.touchArea=zt.circle(this.options.touchAreaXShift,this.options.touchAreaYShift,g+this.options.touchAreaDilation),this.buttonNode.mouseArea=zt.circle(this.options.mouseAreaXShift,this.options.mouseAreaYShift,g+this.options.mouseAreaDilation),this.buttonNode.focusHighlight=zt.circle(0,0,g+5)}if(n){const g=f-this.options.xMargin*2,v=f-this.options.yMargin*2;if(n.preferredWidth=g,n.preferredHeight=v,this.options.radius!==null){const A=this.buttonNode.contentContainer;A.maxWidth=g,A.maxHeight=v}}this.isFirstLayout=!1,this.layoutSizeProperty.value=new ji(this.lastLocalWidth,this.lastLocalHeight),e.localMinimumWidth=h,e.localMinimumHeight=c}dispose(){this.buttonNode.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.unlink(this._updateLayoutListener),super.dispose()}}class tP extends g0{constructor(e){const t=Ne()({soundPlayer:$n.get("pushButton"),tandem:R.REQUIRED,listenerOptions:{tandem:R.OPT_OUT}},e),n=t.listener,s=ie.omit(t,["listener"]),r=new Zb(s);super(r,new NS(r),s),this.pushButtonModel=r,n&&this.addListener(n);const a=()=>{t.soundPlayer.play()};r.produceSoundEmitter.addListener(a),this.disposeRoundPushButton=()=>{r.produceSoundEmitter.removeListener(a),r.dispose()}}dispose(){super.dispose(),this.disposeRoundPushButton()}addListener(e){this.pushButtonModel.addListener(e)}removeListener(e){this.pushButtonModel.removeListener(e)}}class rJ extends zt{constructor(e){super();const t=e*.4,n=e*.625,s=2.25*(n-t),r=-Math.PI*.35,a=-2*Math.PI*.85,o=-Math.PI*.18;this.moveTo(t*Math.cos(r),t*Math.sin(r)),this.lineTo(n*Math.cos(r),n*Math.sin(r));const l=r+a;this.arc(0,0,n,r,l,!0);const h=(s-(n-t))/2;this.lineTo((n+h)*Math.cos(l),(n+h)*Math.sin(l));const c=(n+t)*.55;this.lineTo(c*Math.cos(l+o),c*Math.sin(l+o)),this.lineTo((t-h)*Math.cos(l),(t-h)*Math.sin(l)),this.lineTo(t*Math.cos(l),t*Math.sin(l)),this.arc(0,0,t,l,r),this.close()}}class aJ extends tP{constructor(e){const t=e&&e.radius?e.radius:24,n=Ne()({radius:t,arrowColor:"black",baseColor:"white",xMargin:6,yMargin:6,xContentOffset:-.03*t,yContentOffset:-.0125*t,tandem:R.REQUIRED,tandemNameSuffix:"ResetButton"},e),s=new rJ(n.radius),r=new bi(s,{fill:n.arrowColor}),a=new bi(s.transformed(It.scaling(-1,-1)));r.localBounds=r.localBounds.union(a.localBounds),n.content=r,super(n)}}const oJ=5/c_.DEFAULT_BUTTON_RADIUS;class y0 extends aJ{constructor(e){const t=Ne()({radius:c_.DEFAULT_BUTTON_RADIUS,phetioRestoreScreenStateOnReset:!0,interruptScreenViewInput:!0,touchAreaDilation:5.2,baseColor:Hp.RESET_ALL_BUTTON_BASE_COLOR,arrowColor:"white",tandem:R.REQUIRED,tandemNameSuffix:"ResetAllButton",phetioDocumentation:"The orange, round button that can be used to restore the initial state",soundPlayer:$n.get("resetAll"),accessibleName:qk,voicingNameResponse:qk,voicingContextResponse:$Q},e);t.xMargin=t.yMargin=t.radius*oJ,super(t);const n=new ZL({alert:eJ});let s=Eo.enabled;const r=new Map;this.pushButtonModel.isFiringProperty.lazyLink(o=>{ML.value=o,o?(t.interruptScreenViewInput&&this.interruptScreenViewInput(),s=Eo.enabled,Eo.enabled=!1,Eo.clear()):(R.PHET_IO_ENABLED&&t.phetioRestoreScreenStateOnReset&&this.isPhetioInstrumented()&&phet.phetio.phetioEngine.phetioStateEngine.restoreStateForScreen(t.tandem),Eo.enabled=s,this.voicingSpeakFullResponse()),this.forEachUtteranceQueue(l=>{o?(r.set(l,l.enabled),l.enabled=!1,l.clear()):(l.enabled=r.get(l)||l.enabled,l.addToBack(n))})});const a=Xl.createGlobal(this,{keyStringProperties:y0.RESET_ALL_HOTKEY_DATA.keyStringProperties,fire:()=>this.pdomClick(),fireOnDown:!1});this.disposeResetAllButton=()=>{a.dispose(),r.clear()}}interruptScreenViewInput(){const e=this.getParentScreenViews();for(let t=0;t<e.length;t++)e[t].interruptSubtreeInput()}getParentScreenViews(){const e=self.phet?.joist?.ScreenView;if(!e)return[];const t=this.getTrails(),n=[];for(let s=0;s<t.length;s++){const a=t[s].nodes;for(let o=a.length-1;o>=0;o--){const l=a[o];if(l instanceof e){n.push(l);break}}}return ie.uniq(n)}dispose(){this.disposeResetAllButton(),super.dispose()}}y0.RESET_ALL_HOTKEY_DATA=new ir({keyStringProperties:[new Mt("alt+r")],keyboardHelpDialogLabelStringProperty:tJ,keyboardHelpDialogPDOMLabelStringProperty:Gn.fillIn(iJ,{altOrOption:On.getAltKeyString()}),repoName:i3.name,global:!0});class zk extends jn{constructor(e,t){super(e.toString(),t)}}class lJ extends BS{constructor(e){const t=Ne()({withCheckboxContent:!1,withKeypadContent:!1},e),n=On.tab(),s=La.labelWithIcon(BQ,n,{labelInnerContent:qQ}),r=Mn.shiftPlusIcon(n),a=La.labelWithIcon(zQ,r,{labelInnerContent:FQ}),o=Mn.leftRightArrowKeysRowIcon(),l=Mn.upDownArrowKeysRowIcon(),h=Mn.iconOrIcon(o,l),c=La.labelWithIcon(HQ,h,{labelInnerContent:UQ}),f=On.space(),g=On.enter(),v=Mn.iconOrIcon(f,g),A=La.labelWithIcon(GQ,v,{labelInnerContent:WQ}),P=La.fromHotkeyData(y0.RESET_ALL_HOTKEY_DATA),w=On.esc(),T=La.labelWithIcon(KQ,w,{labelInnerContent:YQ}),D=[s,a,c];if(t.withKeypadContent){const M=Mn.iconToIcon(new zk(0),new zk(9)),B=La.labelWithIcon(jQ,M,{labelInnerContent:XQ});D.push(B)}if(t.withCheckboxContent){const M=On.space(),B=La.labelWithIcon(QQ,M,{labelInnerContent:JQ});D.push(B)}D.push(A,P,T),super(ZQ,D,t)}}class hJ extends Ge{constructor(){const e=new lJ;super({children:[e]})}}const uJ=new Fe(new He("JOIST/a11y.screenNamePattern",{en:"{{name}} Screen"},R.OPT_OUT),R.OPT_OUT),n3=new Fe(new He("JOIST/a11y.goToScreenPattern",{en:"Go to {{name}} Screen."},R.OPT_OUT),R.OPT_OUT),cJ=new Fe(new He("JOIST/a11y.screenSimPattern",{en:"{{screenName}}, {{simName}}"},R.OPT_OUT),R.OPT_OUT),dJ=new Fe(new He("JOIST/a11y.simScreen",{en:"Sim Screen"},R.OPT_OUT),R.OPT_OUT),Yp=new ji(548,373);class pJ extends Ge{constructor(e,t){const n=Ne()({size:Yp,maxIconWidthProportion:.85,maxIconHeightProportion:.85,fill:"white",stroke:null},t),s=new xt(0,0,n.size.width,n.size.height,{fill:n.fill,stroke:n.stroke});e.pickable=!1;const r=()=>{e.setScaleMagnitude(1),e.setScaleMagnitude(Math.min(n.maxIconWidthProportion*s.width/e.width,n.maxIconHeightProportion*s.height/e.height)),e.center=s.center};e.localBoundsProperty.link(r),n.children=[s,e],super(n),this.disposeScreenIcon=()=>{e.localBoundsProperty.hasListener(r)&&e.localBoundsProperty.unlink(r)}}dispose(){this.disposeScreenIcon(),super.dispose()}}const Fk=uJ,fJ=n3,mJ=cJ,gJ=dJ,tw=new ji(147,100);tw.width/tw.height;const yJ=Yp.width/Yp.height;class dl extends rn{constructor(e,t,n){const s=Ne()({name:null,instrumentNameProperty:!0,backgroundColorProperty:new Mt("white"),homeScreenIcon:null,showUnselectedHomeScreenIconFrame:!1,navigationBarIcon:null,showScreenIconFrameForNavigationBarFill:null,maxDT:.5,createKeyboardHelpNode:null,screenButtonsHelpText:null,tandem:R.REQUIRED,tandemNameSuffix:R.SCREEN_TANDEM_NAME_SUFFIX,phetioType:dl.ScreenIO,phetioState:!1,phetioFeatured:!0},n);if(super(s),!s.homeScreenIcon){const r=new xt(0,0,Yp.width,Yp.height);s.homeScreenIcon=new pJ(r,{fill:s.backgroundColorProperty.value,maxIconWidthProportion:1,maxIconHeightProportion:1})}s.navigationBarIcon||(s.navigationBarIcon=s.homeScreenIcon),Hk(s.homeScreenIcon),Hk(s.navigationBarIcon),this.backgroundColorProperty=s.backgroundColorProperty,s.name?(this.nameProperty=s.name,s.instrumentNameProperty&&this.addLinkedElement(s.name,{tandemName:"nameProperty"})):this.nameProperty=new Mt(""),this.homeScreenIcon=s.homeScreenIcon,this.navigationBarIcon=s.navigationBarIcon,this.showUnselectedHomeScreenIconFrame=s.showUnselectedHomeScreenIconFrame,this.showScreenIconFrameForNavigationBarFill=s.showScreenIconFrameForNavigationBarFill,this.createKeyboardHelpNode=s.createKeyboardHelpNode,this.pdomDisplayNameProperty=new Dt([this.nameProperty,Fk],r=>r===null?"":Gn.fillIn(Fk,{name:r})),this.maxDT=s.maxDT,this.createModel=e,this.createView=t,this._model=null,this._view=null,this.activeProperty=new Qt(!0,{tandem:s.tandem.createTandem("activeProperty"),phetioReadOnly:!0,phetioDocumentation:"Indicates whether the screen is currently displayed in the simulation.  For single-screen simulations, there is only one screen and it is always active."}),this.screenButtonsHelpText="",s.screenButtonsHelpText?this.screenButtonsHelpText=s.screenButtonsHelpText:this.nameProperty.value?this.screenButtonsHelpText=new _a(fJ,{name:this.nameProperty},{tandem:R.OPT_OUT}):this.screenButtonsHelpText=gJ}get model(){return this._model}get view(){return this._view}hasModel(){return!!this._model}hasView(){return!!this._view}reset(){}initializeModel(){this._model=this.createModel()}initializeView(e,t,n,s){this._view=this.createView(this.model),this._view.setVisible(!1),phet.chipper.queryParameters.dev&&this._view.addChild(vJ(this._view.layoutBounds)),phet.chipper.queryParameters.showVisibleBounds&&this._view.addChild(bJ(this._view)),Cn.multilink([t,e,this.pdomDisplayNameProperty],(r,a,o)=>{let l;n===1?l=r:s?l=a:l=Gn.fillIn(mJ,{screenName:o,simName:a}),this._view.setScreenSummaryIntroAndTitle(a,o,l,n>1)})}}dl.HOME_SCREEN_ICON_ASPECT_RATIO=yJ;dl.MINIMUM_HOME_SCREEN_ICON_SIZE=Yp;dl.MINIMUM_NAVBAR_ICON_SIZE=tw;dl.ScreenIO=new ui("ScreenIO",{valueType:dl,supertype:BL(ui.ObjectIO),documentation:"Section of a simulation which has its own model and view."});function Hk(i,e,t,n){i.width/i.height}function vJ(i){return new bi(zt.bounds(i),{stroke:"red",lineWidth:3,pickable:!1})}function bJ(i){const e=new bi(zt.bounds(i.visibleBoundsProperty.value),{stroke:"blue",lineWidth:6,pickable:!1});return i.visibleBoundsProperty.link(t=>{e.shape=zt.bounds(t)}),e}class _J{constructor(e,t,n,s){this.simScreens=t,this.screenProperty=e,this.activeSimScreensProperty=n,this.selectedScreenProperty=new Mt(t[0],{validValues:t,phetioValueType:dl.ScreenIO,tandem:s.createTandem("selectedScreenProperty"),phetioFeatured:!0}),this.screenProperty.link(r=>{ie.includes(t,r)&&(this.selectedScreenProperty.value=r)})}reset(){}}const AJ=new Fe(new He("JOIST/a11y.homeScreenDescriptionPattern",{en:"Welcome to {{name}}. It has {{screens}} interactive screens that you can explore."},R.OPT_OUT),R.OPT_OUT),wJ=new Fe(new He("JOIST/a11y.homeScreenIntroPattern",{en:"{{description}} {{hint}}"},R.OPT_OUT),R.OPT_OUT),SJ=new Fe(new He("JOIST/a11y.homeScreenButtonDetailsPattern",{en:"On {{name}}, {{screenHint}}"},R.OPT_OUT),R.OPT_OUT),Uk=new Fe(new He("JOIST/a11y.homeScreenHint",{en:"Choose a screen to start exploring."},R.OPT_OUT),R.OPT_OUT);class PJ extends Ge{constructor(e,t){const n=Ne()({xMargin1:6,yMargin1:6,cornerRadius:0},t);super();const s=e.width+2*n.xMargin1,r=e.height+2*n.yMargin1;this.gradient=new il(0,0,s,0).addColorStop(0,"#fbff41").addColorStop(118/800,"#fef98b").addColorStop(372/800,"#feff40").addColorStop(616/800,"#fffccd").addColorStop(1,"#fbff41");const a=new xt(0,0,s,r,n.cornerRadius,n.cornerRadius,{stroke:this.gradient,lineWidth:3,x:e.x-n.xMargin1,y:e.y-n.yMargin1});this.addChild(a),this.mutate(n);const o=pt.rect(a.x,a.y,s,r);this.highlightRectangle=xt.bounds(o.dilated(.75),{stroke:"transparent",lineWidth:4.5}),this.addChild(this.highlightRectangle)}setHighlighted(e){this.highlightRectangle.stroke=e?this.gradient:"transparent"}}const Gk=140;class TJ extends ys(Ai){constructor(e,t,n){const s=Ne()({cursor:"pointer",showUnselectedHomeScreenIconFrame:!1,tagName:"button",appendDescription:!0,containerTagName:"li",phetioEventType:vi.USER,phetioDocumentation:"A button on the home screen for choosing a simulation screen"},n),r=new Dt([t.selectedScreenProperty],$=>$===e),a=new Qt(!1);let o=Or(2,4,.875,.5,t.simScreens.length);t.simScreens.length>=5&&(o=.4);const l=o*Gk,h=e.homeScreenIcon,c=new Ge({children:[h],scale:l/h.height}),f=new Ge({children:[h],scale:Gk/h.height}),g=new xt(0,0,c.width,c.height,{stroke:s.showUnselectedHomeScreenIconFrame?Hp.SCREEN_ICON_FRAME:null,lineWidth:.7}),v=new PJ(f),A=new Ge({children:[g,c]}),P=new Ge({children:[v,f]}),w=new Ge({pdomVisible:!1}),T=new kt(e.nameProperty);super(an({children:[w,T]},s)),this.screen=e,this.addAriaDescribedbyAssociation({otherNode:this,otherElementName:vn.DESCRIPTION_SIBLING,thisElementName:vn.PRIMARY_SIBLING});const D={small:{node:[A],font:new ki(18),spacing:3},large:{node:[P],font:new ki(42),spacing:0}},M=()=>{const $=r.value||a.value?1:.5;f.opacity=$,c.opacity=$,T.fill=r.value||a.value?"white":"gray"};r.link($=>{const me=$?D.large:D.small;w.children=me.node,T.font=me.font,T.maxWidth=w.width,M(),this.setSpacing(me.spacing)}),a.link($=>{v.setHighlighted($),M()});const B=new Sn;let O=!1;const x=()=>{const $=Z.pointer&&Z.pointer.isTouchLike();r.value&&(!$||O)?(t.screenProperty.value=e,this.voicingSpeakFullResponse({objectResponse:null,hintResponse:null,utterance:B})):(t.selectedScreenProperty.value=e,this.voicingSpeakFullResponse({objectResponse:null,contextResponse:null}))},Z=new Rr({fire:x,tandem:s.tandem.createTandem("fireListener")});this.addInputListener(Z),this.addInputListener({focus:$=>{!r.value&&Z.fire($)}}),this.addInputListener({click:()=>!r.value&&this.focus()}),this.addInputListener({focus:()=>a.set(!0),blur:()=>a.set(!1),over:()=>a.set(!0),out:()=>a.set(!1)});const de=()=>{O=t.selectedScreenProperty.value===e,t.selectedScreenProperty.value=e};this.addInputListener({touchover:de,penover:de}),this.boundsProperty.link(()=>{this.mouseArea=this.touchArea=zt.bounds(this.localBounds)})}}const xJ=.1,EJ=.2;class VJ extends NL{constructor(e,t){const n=Ne()({initialPlaybackRate:1},t);super(n),this.activeBufferSources=[],this.valueToWrappedAudioBufferMap=e,this.localGainNode=this.audioContext.createGain(),this.localGainNode.connect(this.soundSourceDestination),this.fullyEnabledProperty.lazyLink(s=>{s||this.stopAll()}),this.playbackRate=n.initialPlaybackRate===void 0?1:n.initialPlaybackRate,this.audioContextStateChangeListener=null,this.timeOfDeferredPlayRequest=Number.NEGATIVE_INFINITY}playAssociatedSound(e,t=0){const n=this.valueToWrappedAudioBufferMap.get(e);if(this.audioContext.state==="running"){if(this.fullyEnabled&&n.audioBufferProperty.value){const s=this.audioContext.currentTime;this.localGainNode.gain.cancelScheduledValues(s),this.localGainNode.gain.setValueAtTime(1,s);const r=this.audioContext.createBufferSource();r.buffer=n.audioBufferProperty.value,r.playbackRate.setValueAtTime(this.playbackRate,this.audioContext.currentTime),r.connect(this.localGainNode),this.activeBufferSources.push(r),r.onended=()=>{const a=this.activeBufferSources.indexOf(r);a>-1&&this.activeBufferSources.splice(a,1)},r.start(s+t)}}else this.audioContextStateChangeListener&&Zo.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener),this.timeOfDeferredPlayRequest=Date.now(),this.audioContextStateChangeListener=()=>{(Date.now()-this.timeOfDeferredPlayRequest)/1e3<EJ&&this.playAssociatedSound(e,.1),Zo.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener),this.audioContextStateChangeListener=null},Zo.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener)}setPlaybackRate(e){this.playbackRate=e}stopAll(){const e=this.audioContext.currentTime+xJ;this.localGainNode.gain.linearRampToValueAtTime(0,e),this.activeBufferSources.forEach(t=>{t.stop(e)}),this.activeBufferSources.length=0}}const s3="data:audio/mpeg;base64,//swxAAAA3QZA7SQgDGEjym3NTiCAAACbs2AAAGqCgEAwSYujQIIOnKgQlAxTrlAGAggCQSAwInoJvJduAAez8PpG6ltDAnjvbjMiRIIeZ8jCLEDtPFAGSK7XQEZTQi1GA3iTA+IE+k480aDYsDtQDcS3fBEADmMTmT7e3jeDG4gGOAxR8Dh/nLqSno12c54A6EAACGqr6gAAAAA//syxAUACNxrZVmngBkFD2oftpAHABnBKKR1MTRk5pB4lkDgpMUXQGD5aKBVhLL7yiBQtJJbSRasLM2vlmJJ7KBLb7LG/VsXXJ6ZJ5SxZ6RWtABLeAAAoGBF5hGFGFph7YsPDQYVllF5t1d2H3GaasV236GdJGCNHUMVnJKgsG0NOEKNNzCr2k41Wf/8hCjU042QqgpQAAJuUucYCP/7MsQEggiQZ0JuaMdZDw3n3c0k5ghh0TnRSUDh0ZOwRw5BvmqI4OALrQGXEBz3OA5dNBcMujKItB6BklEt6WFYbCwQeiK0w0pK0LiIuuHfwJMYAgEMyZRovoQqkyGMhIsnM3ke44YZMBSS1FMk/7MVZy1uLQU21dhHaFJhX2xsNMS+0zwdHdIjDKXvck1R//////oqAAAPTAAACWr/+zLEBAIING03Tukm4Q0NpundmN4fJflgDAAa5oUHQqNpmhsZYyi0Mzo0SQsOSuizOZSXxLGBhuga0pqTcRtCm8oKCKaNTxVT8MblG/bABJMCyAXHyRNYgYDAGafAqIQsNPoMPRBASOmOF6GzuwfZbazDQKYaU+onoKg0WOQLMkxl3pclcrIL/7Ff/83/f//1XwAAKaTFkAjkTeUk//swxAWCSHxbN03xJTEKjeZJ3STWCzDHw8ojMJB47TijXwwMABwsCZW+HH7jDUaemppFI63opfHWzIugDBRpuX81VWeRMfv/9V30f//QUs0pmh2bmFTIMDwpMERfBPNmCyga4PhhZIydiDdgyWAsRiYlOYGyM1JfeogQbu/o0aO45++iBj0mKxQc/d/////atQQACAYnGAAB3JFO//syxAWACGxvQ6zthPj0jGfdvCVGKiFwT3QuOAdjPRExuFNvH0RU0kCaTRdoaJY1xWSceIZOVHGCIenzHqmEJ9qu92bGBopOTCHJ6YrATTcdAA3KlHY22ca3xQSNv6gVSGXSp3jE0wDGbdmS0geVXHSUmQoWEWR1IlOrW5ZBadfN9RIYzZ8bp7/htQwACU4pBAABy0ACy4w6qCxkpf/7MsQJAEdka0Ws7SUw5A2oNaYNZjH6EDBqGhzw2lAuuW0r5ZzKwyXIy/wEKlaIv8Q7lwXk525/1PVpaZ/0hAAApRuCYTcPtELDEBEFznqMjYcxKw+78v8DXuD5biw3UD0iR2ua3ZbmDsMGo4p8v41GocKCV/0UKggAAkq5BAABrFRN0AsIjzwhwMN1gMCDgWaSaJ9gwjoOYKjgmaf/+zLEEoBHXGlBraULMNKNJyW0lZ+Kl+MnwqTNg08FIVqFMbxfF8Y04t/YAAKd4TEPv2pIAAQ2AgoFOJ8QdWgIwP8MAUSsmeymKic4WaXEE2tUerJNRhYqEwnvPsmIkmoQBl//ACb6mmqcYMjLAFTM3ilNLAQCmAxrR4Zm06CX+ksAJSQCXJdYYtAoHxNM6mhJ++ytQF9PrAAAJkOJ//swxB6ARvhpOy2YrvDjiiVlvqSkkiMBRlMB1jnz8EioYjZ0YeiQYhi4dWhSNFmLA60aEt9DsjXIA2wXP0Q2pHEErh69IejxHQF1GACLPcB7HOATQJa2AnsxYPLTBmcz+yGAVpUdeJ2YalsdWPD1mcNAS2yAIF6oKoAJF2pA8oHQ5+hMAhSa7YDMp8mZKY0MB5QtIi9mhsbOjwYR//syxCmAR0BPMsfsw7DnjGt0/LGPRsNHfGWejtoKJRwoZ4xEVwZjuVDlUDc/aPJlvObfYpQqUAUtyAAAB64m9LLkX2POQYXCQTZEy7T0wzJoTQFhwfQeK3iJZpUNjZji4cCRwGkAPD0glMgWuDNcbpIYEyXbacAQEAIZFUiwydu7A+QQmj4pkSnVbupBfKfJj25gqb4z0iTDCe++hP/7MsQzgEdgZUlMpNC44g0mSb0Y5ozSnYlhPv9zsk6TYRoRAAAB0IcLjLqMDCc1UExGGzI1pNSGxGJmZhySLbxWTV0pTEic8EqMJBHWlwyzGrryaQxqXQuJQADYD7gRg1ch8B7KoiNSPMMzKxo/K8I3MwBhO2IUgHVbNK1UhECmGLhwBgYgBtOj+b5ZX3WziZ7my1Jb/6pZJk0WaNL/+zLEPYNHeE8ubm0nIOQKJA2NmHgCFTGDBeIx4cz8wFOAsKHBE76Qh348IAMugYyGHbIKFkWdduby53scuZX3FqABNwAG6lUDNiQ4mC0EahAA4HzCk/J6gIZGvCSeUtkgcskrsRxTqlWTOQ+wZE2elVku/+n6vyO6CEwAAZ6mU1YGiRiaEceGFlznC83IsBCjFlXVgl4H7Xg1syh8//swxEcDBlg/GAxzYkDcB+KNzSDi5MJZafMOhKapn8HLzv++rSgAkpbADXqR+kegchCIANNggUlWjapq9Le47sSFTHZa/bXAYlqM8rPYhWNtwYaKlkKf8rUnAAABKpqTWC2wMzN4cy5FNowTcAgiDDU0MyzaHUQh4SpS5zkJxrVtQzO1FXFVBM7rDUrGAFG99gAT0sNBXkiS1TGC//syxFWCRqBBCm3pBxDJi6DpvAkeOFrDRL8AcbCEzNYromyrcdkFQl6rWB4zLlQ0O+EVyd/f7u7tAAAAwn0IQgJ3WvGk2afAi+M1MgBoYzTiisJvExKk3FGqJ1VMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsRlgEZkMOZs7wRguogddPY9R1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEeIPE+C79zOHmeAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",kJ=bs(gt,s3),CJ=_n.createLock(s3),jp=new _s;let Wk=!1;const zv=()=>{Wk||(CJ(),Wk=!0)},DJ=i=>{jp.audioBufferProperty.value===null&&(jp.audioBufferProperty.set(i),zv())},IJ=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),jp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),zv()},Kk=gt.decodeAudioData(kJ.buffer,DJ,IJ);Kk&&Kk.then(i=>{jp.audioBufferProperty.value===null&&(jp.audioBufferProperty.set(i),zv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),zv()});const r3="data:audio/mpeg;base64,//swxAACBbQfAa1vAjjzBGF2uiAGAAAAVtwAAAB7yZwNh6oRieZxJ6ZAiC/ATEjWf4paPzHKWsS3vMPHu8R6o/M8eAnZcHGwD9C4jQ2xTmNgzZHbzxk5zD0HTBEWTHspzBMqDK8KxIF37fd35ff/MUdUL/Ebxn9X8v1v6Fr/qUoAAAAEOAWfACgXUDbgA1LRszBjFcN1Q5A37hmD//syxA4ACgAhKbngkhD9BGDHvgAGGWHvMr8isweRLzBiAgMNQMkxCAAAEEEBgeVczyMNGKtsf6F4Giv/rT/odb3f/NeUfP4tFRANCwGGTlYyyEw/cJjMePwAT7SyQczJUPyKoQwYKqCgmCeiMBgE4FSYDIBVgYCxMAaABwCAANnj7qmgbL//++oAAACT1PNJAHxGinXcyGFGEMY9Mv/7MsQKAAcgGyWu+0Bw1gNkqey8jtZp4mrGBaEuYskFTJir6hjU38h9pGJE1e6j2dP16PZ0+3/r0e0AEfK5YkoDQMIPEstTDOAsMYyMs59DMBoM08VQseAdGGgKwaNoyxP16PIbk+2fs9nT7f//tpoAAAJ72ShtQGa8BoaQQT5hFA5GMcVKdoQoJiOAPgkrOATlQcDhXSQ2qmoydr3/+zLEFoJHJBsnr2GEcMsDZPXfYEaeS3N//s7fTvR/p/SFN8xoeGOEfTDSZ6D6YHbMbFxFJgYAxBqwaRl6p2KP3OOIqcUqvattP9yPq0/6PZv//9MAAAKTiC1xwHUiuHc40mB8CKYCqQx3mymHxcm6GBZP17maxazTein9P+j6m0+3o9llP/9lIOZgrByCHtnZWY4ZiqUpj4uvGhXg//swxCSCBowbJa77gDDRg2Il7+xGuBg9YF4Jpo0hixIXkQQs+iqhVNf1f0r//9v/sd/b/k0AAAAKcFJBzzB8nPiVAZdJYBiuEJnyGdkYSIe5+JIBOnyxgEWjVUbPleFtdPVo//7aPTRZ9bP//pCu9FwMmga40MyCTMMhDE7Fz7dKMIDElBibcARSRyHt9Bnbq/s3pQAAAANVnW6Q//syxDOCRxAfD49rBDCZA2N17vAGCA4OIM4qpYxYOwwIzM5oCgxiAktuxQi1OBF1E6XJqSZp0fRZ+j+zp////SAA0iQCsAHUo9Ia9HYZvsF6GoXAqf9il5jeBrH0jZkRcd+mtIOAlu7GetVcvLMd3/p//9lH/YoAAAXgGg7h7VkfY5r0nAFGMhRQdmDlw/OW+eialAABX+GAANouzf/7MsRIAgZsGxXuvMYw2AReve3ghCHw7VaMOCTf7AkcLBW2GGCSRH8ABzEFogX0VXiamZeIAAAANmlTC4o1mzOAYj1V86QwPjSTpkY95TRZARC/grAwJq4SVhZMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEVwBDmBsIjeeAOI2FXrW9GE5VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxHqDxWAq183lZngAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",LJ=bs(gt,r3),MJ=_n.createLock(r3),Xp=new _s;let Yk=!1;const Fv=()=>{Yk||(MJ(),Yk=!0)},OJ=i=>{Xp.audioBufferProperty.value===null&&(Xp.audioBufferProperty.set(i),Fv())},NJ=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Xp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Fv()},jk=gt.decodeAudioData(LJ.buffer,OJ,NJ);jk&&jk.then(i=>{Xp.audioBufferProperty.value===null&&(Xp.audioBufferProperty.set(i),Fv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Fv()});class ql extends js{}ql.HOME_SCREEN_SELECTED=new ql;ql.DIFFERENT_ICON_SELECTED=new ql;ql.enumeration=new Sr(ql);class RJ extends VJ{constructor(e,t){const n=new Map([[ql.HOME_SCREEN_SELECTED,jp],[ql.DIFFERENT_ICON_SELECTED,Xp]]);super(n,t),e.screenProperty.lazyLink(s=>{s.model===e&&this.playAssociatedSound(ql.HOME_SCREEN_SELECTED)}),e.selectedScreenProperty.lazyLink(()=>{e.screenProperty.value.model===e&&this.playAssociatedSound(ql.DIFFERENT_ICON_SELECTED)})}}class no extends Rh{constructor(e,t,n){const s=Ne()({layoutBounds:no.LAYOUT_BOUNDS,warningNode:null,includePDOMNodes:!1},n);super(s);const r=new Ge({tagName:"p"});this.addChild(r),this.selectedScreenProperty=t.selectedScreenProperty;const a=new kt(e,{font:new ki({size:52,family:no.TITLE_FONT_FAMILY}),fill:"white",y:130,maxWidth:this.layoutBounds.width-10});a.localBoundsProperty.link(()=>{a.centerX=this.layoutBounds.centerX}),this.addChild(a);const o=s.tandem.createTandem("buttonGroup");this.screenButtons=ie.map(t.simScreens,c=>{const f=new TJ(c,t,{showUnselectedHomeScreenIconFrame:c.showUnselectedHomeScreenIconFrame,accessibleHelpText:c.screenButtonsHelpText,voicingHintResponse:c.screenButtonsHelpText,tandem:c.tandem.supplied?o.createTandem(`${c.tandem.name}Button`):R.REQUIRED});return f.voicingNameResponse=c.pdomDisplayNameProperty,f.accessibleName=c.pdomDisplayNameProperty,f});let l=60;t.simScreens.length===4&&(l=33),t.simScreens.length>=5&&(l=20),this.homeScreenScreenSummaryIntroProperty=new _a(AJ,{name:e,screens:t.simScreens.length},{tandem:R.OPT_OUT}),r.accessibleName=new _a(wJ,{description:this.homeScreenScreenSummaryIntroProperty,hint:Uk},{tandem:R.OPT_OUT}),this.screenButtons.forEach(c=>{c.voicingContextResponse=e});const h=new _i({spacing:l,align:"top",maxWidth:this.layoutBounds.width-118,tagName:"ol"});if(t.activeSimScreensProperty.link(c=>{h.children=c.map(f=>ie.find(this.screenButtons,g=>g.screen===f))}),this.addChild(new jl(h,{alignBounds:this.layoutBounds,yAlign:"top",topMargin:this.layoutBounds.height/3+20})),io.addSoundGenerator(new RJ(t,{initialOutputLevel:.5}),{categoryName:"user-interface"}),s.warningNode){const c=s.warningNode;this.addChild(c),c.centerX=this.layoutBounds.centerX,c.bottom=this.layoutBounds.maxY-2}}focusHighlightedScreenButton(){for(let e=0;e<this.screenButtons.length;e++){const t=this.screenButtons[e];if(t.screen===this.selectedScreenProperty.value){t.focus();break}}}getVoicingOverviewContent(){return this.homeScreenScreenSummaryIntroProperty}getVoicingDetailsContent(){let e="";return this.screenButtons.forEach(t=>{e!==""&&(e+=" "),e+=Gn.fillIn(SJ,{name:t.screen.pdomDisplayNameProperty.value,screenHint:t.screen.screenButtonsHelpText})}),e}getVoicingHintContent(){return Uk}}no.LAYOUT_BOUNDS=new pt(0,0,768,504);no.TITLE_FONT_FAMILY="Century Gothic, Futura";const BJ=t3,a3=ct.BLACK;class Hv extends dl{constructor(e,t,n,s,r){const a=Ne()({backgroundColorProperty:new Mt(a3),name:BJ,createKeyboardHelpNode:()=>new hJ,instrumentNameProperty:!1},r);super(()=>new _J(t(),n,s,a.tandem.createTandem("model")),o=>new no(e,o,{warningNode:a.warningNode,tandem:a.tandem.createTandem("view")}),a)}}Hv.BACKGROUND_COLOR=a3;const qJ=new Fe(new He("JOIST/a11y.simScreens",{en:"Sim Screens"},R.OPT_OUT),R.OPT_OUT),zJ=new Fe(new He("JOIST/a11y.simResources",{en:"Sim Resources"},R.OPT_OUT),R.OPT_OUT);class iP extends Oo{constructor(e,t,n){super(e),this.lock(),this.nodes=t,this.cells=t.map(s=>new wS(this,s,null)),this.layoutCallback=n,this.nodes.forEach(s=>this.addNode(s,!1)),this.unlock(),this.updateLayout()}layout(){super.layout();const e=this.cells.map(t=>t.isConnected()?t.proxy:null);this.layoutCallback.apply(null,e),this.finishedLayoutEmitter.emit()}dispose(){this.cells.forEach(e=>e.dispose()),super.dispose()}static create(e,t,n){return new iP(e,t,n)}}const FJ="M44.34,17.66l-4.29-3.57V1.83c0-1.01-.82-1.82-1.82-1.82h-3.88c-1.01,0-1.82.82-1.82,1.82v5.98L23.67.43c-.68-.56-1.66-.56-2.34,0L.66,17.66c-.77.64-.88,1.8-.23,2.57l.77.93c.64.77,1.8.88,2.57.23L22.5,5.78l18.73,15.61c.77.64,1.92.54,2.57-.23l.77-.93c.64-.77.54-1.92-.23-2.57Z M22.55,9.13L5.05,23.57v14.6c0,1.01.82,1.82,1.82,1.82h11.77v-11.89h7.82v11.89h11.77c1.01,0,1.82-.82,1.82-1.82v-14.6l-17.5-14.44Z",HJ=new zt(FJ),UJ=t3,GJ=n3;class WJ extends d0{constructor(e,t,n,s){const r=new _a(GJ,{name:UJ}),a=Ne()({highlightExtensionWidth:4,containerTagName:"li",accessibleHelpText:r,appendDescription:!0,voicingHintResponse:r},s),o=new bi(HJ);o.setScaleMagnitude(.48*e/o.height*.85);const l=new xt(0,0,o.width/.85+12,e);o.center=l.center;const h=new Ge({children:[l,o]}),c=new Sn,f=a.listener;a.listener=()=>{f&&f(),this.voicingSpeakFullResponse({objectResponse:null,hintResponse:null,utterance:c})},super(h,t,a),this.focusHighlight=zt.bounds(this.bounds.setMaxY(this.bounds.maxY-2)),Cn.multilink([this.interactionStateProperty,t],(g,v)=>{v.equals(ct.BLACK)?o.fill=g===Jn.PRESSED?"gray":"white":o.fill=g===Jn.PRESSED?"#444":"#222"}),this.addInputListener({focus:()=>{this.voicingSpeakFullResponse({objectResponse:null,contextResponse:null})}}),n.link(g=>{this.accessibleName=g,this.voicingNameResponse=g})}}const KJ=4,Xk=i=>i.width+2*KJ;class YJ extends ys(Ge){constructor(e,t,n,s,r,a){const o=Ne()({cursor:"pointer",phetioDocumentation:`Button in the navigation bar that selects the '${n.tandem.name}' screen`,maxButtonWidth:null,tagName:"button",containerTagName:"li",accessibleHelpText:n.screenButtonsHelpText,appendDescription:!0,voicingHintResponse:n.screenButtonsHelpText},a);super(),this.screen=n,n.pdomDisplayNameProperty.link(O=>{this.accessibleName=O,this.voicingNameResponse=O});const l=new Ge({children:[n.navigationBarIcon],maxHeight:.625*r,pdomVisible:!1}),h=new xt(0,0,l.width,l.height),c=new Ge({children:[l,h]}),f=new kt(n.nameProperty,{font:new ki(10)}),g=new Ai({children:[c,f],pickable:!1,usesOpacity:!0,maxHeight:r}),v=new xt({rectBounds:g.bounds}),A=Xk(v),P=new j2(A,v.height,{center:g.center,fill:"white"}),w=new j2(A,v.height,{center:g.center,fill:"black"}),T=new Dt([t],O=>O===n);this.buttonModel=new Zb({listener:()=>{t.value!==n&&this.voicingSpeakFullResponse({objectResponse:null,hintResponse:null}),t.value=n},tandem:o.tandem,phetioEnabledPropertyInstrumented:!1});const D=this.buttonModel.createPressListener({tandem:R.OPT_OUT});this.addInputListener(D),this.addInputListener({focus:()=>{this.voicingSpeakFullResponse({objectResponse:null,contextResponse:null})}}),Cn.multilink([T,this.buttonModel.looksPressedProperty,this.buttonModel.isOverOrFocusedProperty,e,this.buttonModel.enabledProperty],(O,x,Z,de,$)=>{const me=!de.equals(ct.BLACK),ue=me?"black":Hp.BUTTON_YELLOW,Se=me?"gray":"white";f.fill=O?ue:Se,g.opacity=O?1:x?.65:.5,P.visible=!me&&$&&(Z||x),w.visible=me&&$&&(Z||x),n.showScreenIconFrameForNavigationBarFill==="black"&&de.equals(ct.BLACK)?h.stroke=Hp.SCREEN_ICON_FRAME:n.showScreenIconFrameForNavigationBarFill==="white"&&de.equals(ct.WHITE)?h.stroke="black":h.stroke="transparent"}),this.buttonModel.enabledProperty.link(O=>{this.cursor=O?o.cursor:null});const M=()=>{g.spacing=Xn(12-f.height,0,3),v.setRectBounds(g.bounds),P.spacing=w.spacing=Xk(v),P.center=w.center=g.center};g.boundsProperty.lazyLink(M),f.boundsProperty.link(M),this.children=[g,v,P,w],o.maxButtonWidth&&this.width>o.maxButtonWidth?f.maxWidth=l.maxWidth=o.maxButtonWidth-(this.width-g.width):f.maxWidth=this.width,this.localBoundsProperty.link(O=>{this.focusHighlight=zt.bounds(O)}),this.mutate(o)}}const Qk=new Fe(new He("JOIST/a11y.phetMenu",{en:"PhET Menu"},R.OPT_OUT),R.OPT_OUT),Jk=2.5;class jJ extends bi{constructor(e){const t=new zt;for(let n=0;n<3;n++)t.circle(0,n*3.543*Jk,Jk);super(t,e)}}const XJ=new Fe(new He("JOIST/menuItem.phetWebsite",{en:"PhET Website…",af:"PhET Webwerf…",ak:"PhET Ntintan Bia",am:"ፌት ድረ-ገጽ...",ar:"موقع PhET...",ar_KW:"موقع PhET",ar_LY:"موقع PhET…",ar_MA:"موقع PhET",ar_SA:" موقع فيت الالكتروني",ar_SY:"موقع PhET...",ay:"PhET Veb Səhifəsi",az:"PhET Veb Səhifəsi",be:"Сайт PhET",bg:"Сайтът на PhET…",bi:"PhET Website...",bn:"পদার্থবিজ্ঞান শিক্ষা প্রযুক্তি  ওয়েবসাইট...",bo:"Phet དྲ་ཚིགས།",bs:"PhET sajt",ca:"Lloc web del PhET…",cs:"PhET web…",cy:"Gwefan PhET...",da:"PhET hjemmeside...",de:"PhET Webseite...",ee:"PhET Nyatakaka dzraɖoƒea…",el:"Ιστότοπος PhET...",en_GB:"PhET Website...",es:"Sitio web PhET",es_ES:"Visitar PhET...",es_MX:"Sitio web de PhET ...",es_PE:"Sitio Web PhET...",es_UY:"PhET Website…",et:"PhET veebileht...",eu:"PHET Web gunea",fa:"سایت اینترنتی PhET...",fa_DA:"سایت انترنتی PhET...",fi:"PhET-sivusto...",fo:"PhET heimasíðan",fr:"Site internet de PhET",ga:"Suíomh Gréasáin PhET…",gl:"Web de PhET",gu:"PhET  વેબસાઈટ",ha:"Adireshin PhET na yanar gizo...",hi:"PhET संकेतस्थल .......",hr:"PhET web stranica",ht:"Sitweb PhET...",hu:"A PhET oldalára",hy:"Phet-ի կայքը",ig:"PhET Webụsaịtị...",in:"Laman PhET",is:"Heimasíða PhET…",it:"Il sito di PhET...",iw:"אתר PhET...",ja:"PhETのホームページ",ka:"PhET ვებ-გვერდი...",ki:"PhET mahiga makwa",kk:"PhET сайты...",kn:"PhET ವೆಬ್ಸೈಟ್ ...",ko:"PhET 웹사이트",ku:"ماڵپەڕی فێت",ku_TR:"PhET Cî Înternetê...",lg:"Omutimbagano gwa Phet",lo:"ເວບໄຊສ໌ຂອງ PhET ",lt:"PhET svetainė",lv:"PhET mājas lapa...",mg:"Tranonkala PhET…",mi:"Paetukutuku PhET...",mk:"PhET веб-страница…",mn:"PhET Веб сайт",mr:"PhET संस्थळ…",ms:"Laman Web PhET...",mt:"Websajt ta' Phet",nb:"PhET Nettsted",ne:"PhET वेबसाइट...",nl:"PhET website...",nn:"Nettstaden til PhET…",ny:"PhET Webusayiti…",om:"Marsariitii PhET...",or:" ଫେଟ୍‍ ୱେବସାଇଟ୍‍",pl:"Witryna PhET...",ps:"د PhET ویب پاڼه...",pt:"Website PhET...",pt_BR:"Portal PhET…",qu:"Kitin PhETpa…",ro:"Pagina web PhET...",ru:"Сайт PhET...",rw:"Urubuga rwa Phet...",se:"Phet neahttabáiki...",sh:" PhETвебсајт...",si:"PhET වෙබ් අඩවිය ...",sk:"Stránka PhET...",sl:"PhET spletna stran…",sn:"PhET webhusaiti…",sp:"Webosaete ya PhET...",sq:"Uebfaqja PhET...",sr:"PhET вебсајт...",st:"Website ea PhET",sv:"PhET Webbsida…",sw:"Tovuti ya PhET...",ta:"PhET வலைத்தளம்",te:"Phet వెబ్సైట్ ...",tg:"Сомонаи PhET ...",th:"เว็บไซต์ของ PhET",ti:"PhET መርበብ ሓበሬታ…",tk:"PhET websaýty…",tl:"Phet Website",tn:"Website ya PhET",tr:"PhET Anasayfa",tw:"PhET Ntentanfidie...",uk:"Вебсайт PhET...",ur:"فیٹ ویب سائٹ",uz:"PhET vebsayti...",vi:"PhET Website…",wo:"Berëbu PhET...",yo:"Itakun ayelujara PhET...",zh_CN:"PhET 网站…",zh_HK:"PhET 網站 ... ",zh_TW:"PhET 網站...",zu:"Iwebhusayathi ye-PhET..."},R.OPT_OUT),R.OPT_OUT),QJ=new Fe(new He("JOIST/menuItem.reportAProblem",{en:"Report a Problem…",af:"Rapporteer ‘n fout",ak:"Ka ɔhaw a wánya",am:"ችግሩን አመልክት/ች...",ar:"الإبلاغ عن مشكلة…",ar_KW:"الإبلاغ عن مشكلة",ar_LY:"الإبلاغ عن مشكلة…",ar_MA:"التبليغ عن مشكلة",ar_SA:"الابلاغ عن مشكلة",ar_SY:"الإبلاغ عن مشكلة",ay:"Bir Problemi Bildir...",az:"Problemi Bildirin...",be:"Паведаміць аб памылцы ...",bg:"Съобщи за проблем",bi:"Reportem wan problem...",bn:"(সমস্যার জন্য রিপোর্ট  করো... )",bo:"དཀའ་རྙོག་ཞུ་ཐོ།",bs:"Prijavi problem ...",ca:"Avisa'ns d'un problema...",cs:"Oznámit problém...",cy:"Rhoi gwybod am Broblem...",da:"Rapporter et problem...",de:"Problem melden...",ee:"Ka nya ta tso kuxi aɖe ŋu.......",el:"Αναφορά προβλήματος...",en_GB:"Report a Problem....",es:"Informe un problema",es_ES:"Informar de un problema...",es_MX:"Reportar un problema...",es_PE:"Reporta un Problema",es_UY:"Report a Problem…",et:"Teata probleemist...",eu:"Arazoren berri eman...",fa:"گزارش مشکل…",fa_DA:"گزارش مشکل…",fi:"Ilmoita ongelmasta...",fo:"Sig frá trupulleika",fr:"Signaler un problème…",ga:"Tuairiscigh Fadhb…",gl:"Avisar dun problema...",gu:"સમસ્યા જણાવો...",ha:"Sanar da wata matsala...",hi:"समस्या के बारे में बताएं ......",hr:"Prijavi problem...",ht:"Rapòte yon Pwoblèm...",hu:"Problémabejelentés",hy:"Հաղորդել խնդրի վերաբերյալ…",ig:"Kọọ Ahụhụ",in:"Laporkan Masalah...",is:"Tilkynna vandamál…",it:"Segnala un problema...",iw:"דווח על בעיה...",ja:"問題を報告",ka:"პრობლემის შეტყობინება...",ki:"Riboti  Thĩna",kk:"Қате туралы хабарлау...",kn:"ಸಮಸ್ಯೆ ವರದಿಮಾಡಿ ...",ko:"문제를 보고",ku:"گوزارشتکردن لە گرفت",ku_TR:"pirsgirêka raporê...",lg:"Lonpa obuzibu",lo:"ລາຍງານບັນຫາ",lt:"Pranešti apie problemą",lv:"Ziņot par problēmu...",mg:"Mitatitra olana…",mi:"Whakamōhio mai he take...",mk:"Пријави проблем...",mn:"Асуудлыг мэдээлэх...",mr:"अडचण नोंदवा.",ms:"Laporkan Masalah...",mt:"Irrapporta d-diffikulta...",my:"ပြဿနာများကိုတင်ပြရန်",nb:"Rapporter problem...",ne:"समस्या रिपोर्ट गर्नुहोस्...",nl:"Meld een probleem ...",nn:"Meld frå om eit problem…",ny:"Nenani Vuto...",om:"Rakkoo jiru gabaasi...",or:"ତ୍ରୁଟି ଜଣାନ୍ତୁ…",pl:"Zgłoś problem...",ps:"د یوې ستونزې راپور ورکول...",pt:"Reportar um problema...",pt_BR:"Informar problema...",qu:"Willana sasachakuyta",ro:"Raportează o problemă...",ru:"Сообщить об ошибке...",rw:"Vuga niba hari ikibazo...",sd:"مسئلي کي رپورٽ ڪريو",se:"Dieđit váttisvuođa...",sh:"Извести о проблему...",si:"ගැටලුවක් වාර්තා කරන්න ...",sk:"Nahlás problém",sl:"Prijavi težavo",sn:"Mhan'ara Dambudziko.",sp:"Bega Bothata...",sq:"Raportoni një Problem...",sr:"Пријави проблем...",st:"Tlaleha bothata",sv:"Rapportera ett problem...",sw:"Wasilisha Itilafu...",ta:"பிரச்சினையை அறிவி...",te:"సమస్యను నివేదించండి ...",tg:"Гузориш оид ба муаммо...",th:"แจ้งปัญหาการใช้งาน",ti:"ፀገም እንተሎ ይሓብሩ…",tk:"Meseläni habar ber…",tl:"Mag-ulat ng Problema",tn:"Bega bothata",tr:"Problem Bildir",tw:"Ka ɔhaw a aba...",uk:"Повідомте про проблему...",ur:"مسئلہ کو رپورٹ کیجئے۔۔۔",uz:"Muammo haqida xabar berish...",vi:"Thông báo sự cố...",wo:"Wane Ap Cax...",yo:"Jabọ isoro kan…",zh_CN:"报告问题……",zh_HK:"報告問題 ...",zh_TW:"回報問題...",zu:"Bika inkinga..."},R.OPT_OUT),R.OPT_OUT),JJ=new Fe(new He("JOIST/menuItem.getUpdate",{en:"Check for Updates…",af:"Soek na opdaterings...",ak:"Hwihwɛ nkahodi nfɔfɔrɔ",am:"ማሻሻያዎች ካለ አረጋግጥ/ጭ...",ar:"تحقق من وجود تحديثات ...",ar_KW:"تحقق من التحديثات",ar_LY:"التحقق من التحديثات…",ar_MA:"تحقق من التحديثات ...",ar_SA:"البحث عن تحديث",ar_SY:"تحقق من وجود تحديثات ...",ay:"Güncəlləmələri yoxla...",az:"Güncəlləmələri yoxla...",be:"Праверыць наяўнасць абнаўленняў ...",bg:"Провери за обновления",bi:"Check lo updates",bn:"আপডেটের জন্য চেক কর(Check for Updates…)",bo:"ཐོན་གསར་པ་འདུག་གམ།",bs:"Provjeriti ažuriranja ...",ca:"Comprova les actualitzacions...",cs:"Zkontrolovat aktualizace…",cy:"Gwirio am ddiweddariadau...",da:"Søg efter opdateringer...",de:"Updates suchen...",ee:"Kpɔe ɖa be asitrɔtrɔ yeye ɖe va hã",el:"Έλεγχος για ενημερώσεις...",en_GB:"Check for Updates…",es:"Buscar actualizaciones...",es_ES:"Actualizaciones...",es_MX:"Revisar actualizaciones",es_PE:"Buscar Actualizaciones",es_UY:"Check for Updates…",et:"Kontrolli uuendusi...",eu:"Bilatu eguneraketak...",fa:"بررسی  به‌ روزرسانی‌ها…",fa_DA:"بررسی به‌ روزرسانی‌ها…",fi:"Tarkista päivitykset...",fo:"Kanna fyri dagføringum...",fr:"Vérifier les mises à jour...",ga:"Seiceáil le haghaidh nuashonrúchán…",gl:"Buscar actualizacións...",gu:"અપડેટ ચેક કરો...",ha:"Bincika sababbin bayanai...",hi:"अद्यतन के लिए जाँचे .......",hr:"Provjeri nadogradnju...",ht:"Tcheke pou Mizajou yo...",hu:"Frissítés ellenőrzése",hy:"Ստուգել թարմացումները…",ig:"Mmelite...",in:"Perbarui",is:"Kanna með uppfærslur…",it:"Controlla gli aggiornamenti...",iw:"חיפוש עדכונים...",ja:"アップデートの確認",ka:"განახლება",ki:"Rora macokio merũ",kk:"Жаңару жүргізілгенін тексеру...",kn:"ನವೀಕರಣಗಳಿಗಾಗಿ ಪರಿಶೀಲಿಸಿ ...",ko:"업데이트 확인",ku:"گەڕان بۆ نوێکردنەوە",ku_TR:"Nûvekirinan kotrol bikin",lg:"Kebela ebipya",lo:"ກວດເບິ່ງການອັບເດດ",lt:"Patikrinti naujinimus...",lv:"Meklēt atjauninājumus...",mg:"Hijerena ny vaovao farany…",mi:"Kimi Whakahoutanga...",mk:"Провери за ажурирања...",mn:"Шинэчлэлтийг шалгах...",mr:"अपडेट आहे की नाही हे तपासा",ms:"Semak kemas kini...",mt:"Iċċekkja għal aggornamenti",my:"အသစ်သစ်သောအကြောင်းအရာများအတွက် အဆင့်မြှင့်တင်ရန် စစ်ဆေးပါ",nb:"Se etter oppdateringer",ne:"अद्यावधिकका ( अपडेटहरूका ) लागि जाँच गर्नुहोस्",nl:"Controleer of er updates zijn ...",nn:"Hent oppdateringar…",ny:"Onani zinthu zamakono...",om:"Fooyya’insa jiru argachuuf ilaali...",or:"ଅପଡେଟ୍‍ ଯାଞ୍ଚ କରିବା…",pl:"Sprawdź aktualizacje…",ps:"د نویو معلوماتو لټون...",pt:"Procurar atualizações...",pt_BR:"Conferir atualizações...",qu:"Maskana musuqkunata",ro:"Caută actualizări...",ru:"Проверить на наличие обновлений...",rw:"Kureba ibigezweho...",se:"Oza ođastemiid...",sh:"Провери ажурирања...",si:"යාවත්කාලීන කිරීම් සඳහා පරීක්ෂා කරන්න ...",sk:"Skontroluj aktualizácie...",sl:"Preveri posodobitve...",sn:"Tarisa ma updates",sp:"..Lekola Dimpshafatšo...",sq:"Kontrolloni për Përditësime...",sr:"Провери ажурирања",st:"Sheba liphethoho",sv:"Kontrollera uppdateringar...",sw:"Angalia toleo jipya...",ta:"இற்றைப்படுத்தலை சரிபார்",te:"అప్డేట్ల కోసం తనిఖీ చేయండి ...",tg:"Навсозиро санҷед…",th:"ตรวจสอบการพัฒนาล่าสุด",ti:"እዋናዊ ምዕባለታት እንተሃልዩ ይኣልሹ...",tk:"Täzelenmeleri barla…",tl:"Suriin para sa mga Update...",tn:"Tlhola diphetogo tse di sha",tr:"Güncellemeler için tıklayınız",tw:"Hwɛ deɛ Akɔsi...",uk:"Перевір оновлення",ur:"تازہ اطلاعات کی جانچ کریں ۔۔۔",uz:"Yangilanishlarni tekshirish…",vi:"Kiểm tra phiên bản...",wo:"Xool Ngir Yeesal...",yo:"Ṣayẹwo fun awọn imudojuiwọn…",zh_CN:"检查更新……",zh_HK:"檢查更新",zh_TW:"檢查更新...",zu:"Hlola izibuyekezo..."},R.OPT_OUT),R.OPT_OUT),ZJ=new Fe(new He("JOIST/menuItem.screenshot",{en:"Screenshot",af:"Skermgreep",ak:"Komputa no anim mfoni",am:"ሰሌዳ ማንሻ",ar:"لقطة شاشة",ar_KW:"تصوير الشاشة",ar_LY:"لقطة الشاشة",ar_MA:"تصوير شاشة الحاسوب",ar_SA:"لقطة الشاشة",ar_SY:"لقطة شاشة",ay:"Ekran görüntüsünü çəkin",az:"Ekran görüntüsü",be:"Здымак экрана",bg:"Снимка на екрана",bi:"Pija blo screen",bn:"স্ক্রিনশট",bo:"བརྙན་ཡོལ་པར་ལེན།",bs:"Slika ekrana",ca:"Captura de pantalla",cs:"Náhled obrazovky",cy:"Ciplun",da:"Skærmbillede",de:"Bildschirmfoto",ee:"Ɖe foto screen",el:"Στιγμιότυπο οθόνης",en_GB:"Screenshot",es:"Captura de pantalla",es_ES:"Captura de pantalla",es_MX:"Captura de pantalla",es_PE:"Captura de imagen",es_UY:"Screenshot",et:"Ekraanitõmmis",eu:"Pantailaren kopia",fa:"عکس از صفحه",fa_DA:"عکس از صفحه",fi:"Kuvankaappaus",fo:"Tak skermmynd",fr:"Capture d'écran",ga:"Seat scáileáin",gl:"Captura de pantalla",gu:"સ્ક્રીનશોટ",ha:"Hoton allo",hi:"स्क्रीनशॉट",hr:"Snimka zaslona",ht:"Kapti ekran",hu:"Képernyőfelvétel",hy:"Սքրինշոթ",ig:"Nseta Ihuenyo",in:"Tangkapan Layar",is:"Skjámynd",it:"Cattura schermo",iw:"צילום מסך",ja:"スクリーンショット",ka:"ეკრანის სურათი",ki:"mbica ya mbica",kk:"Экранды суретке түсіру",kn:"ತೆರೆಚಿತ್ರ",ko:"스크린 사진",ku:"وێنەگرتنی شاشە",ku_TR:"Erkana/Şaşa",lg:"Kuba ekifananyi kya sikulini",lo:"ບັນທຶກພາບຫນ້າຈໍ",lt:"Ekrano kopija",lv:"Ekrānuzņēmums",mg:"Pikantsarin'ny",mi:"Kapomata",mk:"Слика од екранот",mn:"Дэлгэцийн зураг",mr:"स्क्रिन शॉट",ms:"Tangkap Layar",mt:"Screenshot",my:"screenshot",nb:"Skjermbilde",ne:"स्क्रिनसट",nl:"Schermafbeelding",nn:"Skjermbilete",ny:"Chithunzi cha pa sikilini",om:"Argii garagalchi",or:"ସ୍କ୍ରିନ୍ ର ପ୍ରତିଛବି",pl:"Zrzut ekranu",ps:"Screenshot",pt:"Captura de ecrã",pt_BR:"Captura de tela",qu:"Hapiy qawanapampanta",ro:"Captură de ecran",ru:"Фотография экрана",rw:"Ifoto ya ekara",se:"Šearbmagovva",sh:"Снимак екрана",si:"තිරයේ පිටපත",sk:"Odfoť obrazovku",sl:"Zaslonska slika",sn:"Skrinishoti",sp:"Seswantšho sa skrine",sq:"Screenshot",sr:"Слика екрана (скриншот)",st:"Senepe",sv:"Skärmdump",sw:"Picha ya Skrini",ta:"திரைக்காட்சி",te:"స్క్రీన్ షాట్",tg:"Сохтани скриншот",th:"ภาพหน้าจอ",ti:"ምስሊ ስክሪን",tk:"Ekran suraty",tl:"Screenshot",tn:"Setshwantsho sa screen",tr:"Ekran görüntüsü",tw:"Twa ani",uk:"Скріншот",ur:"اسکرین شاٹ",uz:"Ekranni rasmga olish",vi:"Ảnh chụp màn hình",wo:"Portale Yatuway Bi",xh:"Umfanekiso weskrini",yo:"Asareya",zh_CN:"屏幕截图",zh_HK:"螢幕截圖",zh_TW:"螢幕快照",zu:"Sithombe-skrini"},R.OPT_OUT),R.OPT_OUT),$J=new Fe(new He("JOIST/menuItem.fullscreen",{en:"Full Screen",af:"Volskerm",ak:"Anim Nyinaa",am:"ሙሉ ሰሌዳ",ar:"تكبير الشاشة",ar_KW:"تكبير الشاشة",ar_LY:"ملء الشاشة",ar_MA:"تكبير الشاشة",ar_SA:"شاشة كاملة",ar_SY:"تكبير الشاشة",ay:"Tam ekran",az:"Tam ekran",be:"На ўвесь экран",bg:"Цял екран",bi:"Full screen",bn:"ফুল স্ক্রীন",bo:"བརྙན་ཡོལ་ཆ་ཚང་གཏོང་།",bs:"Cijeli ekran",ca:"Pantalla completa",cs:"Celá obrazovka",cy:"Maint sgrin lawn",da:"Hel skærm",de:"Ganzer Bildschirm",ee:"Screen bliboa dzi",el:"Πλήρης οθόνη",en_GB:"Full Screen",es:"Pantalla completa",es_ES:"Pantalla completa",es_MX:"Pantalla completa",es_PE:"Pantalla Completa",es_UY:"Full Screen",et:"Täisekraan",eu:"Pantaila osoa",fa:"تمام صفحه",fa_DA:"تمام صفحه",fi:"Koko näyttö",fo:"Fullan skerm",fr:"Plein écran",ga:"Lánscáileán",gl:"Pantalla completa",gu:"ફૂલ સ્ક્રીન",ha:"Hoton ya fito gaba ɗaya",hi:"पूर्ण स्क्रीन",hr:"Puni zaslon",ht:"Gran ekran",hu:"Teljes képernyő",hy:"Ամբողջ էկրանով",ig:"Ihuenyo zuru oke",in:"Layar Penuh",is:"Fylla skjá",it:"Schermo intero",iw:"מסך מלא",ja:"全画面表示",ka:"გადიდება",ki:"gicicio giothe",kk:"Толық экран",kn:"ಪೂರ್ಣ ಪರದೆ",ko:"전체 화면",ku:"پڕ شاشە",ku_TR:"erkana tevayî",lg:"Sikulini yonna",lo:"ເຕັມ​ຈໍ",lt:"Pilnas ekranas",lv:"Pilnekrāns",mg:"Mameno efijery",mi:"Mata katoa",mk:"Цел екран",mn:"Бүтэн дэлгэц",mr:"पुर्ण स्क्रिन",ms:"Layar Penuh",mt:"Uża l-iskrijn kollu",my:"ဖန်သားမျက်နှာပြင် အပြည့်",nb:"Fullskjerm",ne:"पूर्ण स्क्रिन",nl:"Volledig scherm",nn:"Fullskjerm",ny:"Kudzaza sikirini yonse",om:"Argii Guutuu",or:"ବଡ ସ୍କ୍ରିନ୍",pl:"Pełny ekran",ps:"ټوله صفحه",pt:"Ecrã inteiro",pt_BR:"Tela Cheia",qu:"Llapan qawanapampa",ro:"Afișare pe tot ecranul",ru:"Во весь экран",rw:"Ekara yuzuye",sd:"مڪمل اسڪرين",se:"Ollesšearbma",sh:"Цео екран",si:"සම්පූර්ණ තිරය ",sk:"Celá obrazovka",sl:"Celozaslonska slika",sn:"Skrini izere",sp:"Skrine se Feletseng",sq:"Ekran i Plotë",sr:"Цео екран",st:"Sekerine  se felletseng",sv:"Helskärm",sw:"Skrini Nzima",ta:"முழுத் திரை",te:"పూర్తి స్క్రీన్",tg:"Экрани пурра",th:"แสดงผลแบบเต็มจอ",ti:"ምሉእ ስክሪን",tk:"Doly ekran",tl:"Buong Screen",tn:"Tlatsa screen",tr:"Tam Ekran",tw:"Ma Anii Nyɛ Kɛse",uk:"Повний екран",ur:"مکمل اسکرین",uz:"To‘liq ekran",vi:"Toàn màn hình",wo:"Yatuway Bi Yëp",yo:"Kun oju aworan",zh_CN:"全屏",zh_HK:"全螢幕",zh_TW:"全螢幕",zu:"Sikrini esigcwele"},R.OPT_OUT),R.OPT_OUT),eZ=new Fe(new He("JOIST/menuItem.about",{en:"About…",af:"Omtrent...",ak:"Nfatɔhɔ",am:"ስለ...",ar:"حول ...",ar_KW:"حول ...",ar_LY:"عن…",ar_MA:"معلومات حول الاصدار",ar_SA:"حول",ar_SY:"حول ...",ay:"Haqqında...",az:"Haqqında...",be:"Аб...",bg:"Относно",bi:"Long saed blo simulation ia ...",bn:"সম্পর্কে",bo:"ངོ་སྤོད།",bs:"O ...",ca:"Pel que fa a...",cs:"O...",cy:"Mwy Am...",da:"Om....",de:"Über...",ee:"Ku ɖe.......",el:"Σχετικά...",en_GB:"About…",es:"Acerca de...",es_ES:"Acerca de...",es_MX:"Acerca de...",es_PE:"Acerca de...",es_UY:"About…",et:"Teave...",eu:"Honi buruz...",fa:"دربارۀ",fa_DA:"دربارۀ...",fi:"Tietoja...",fo:"Um...",fr:"À propos ...",ga:"Maidir le…",gl:"Acerca desta simulación...",gu:"ના વિષે...",ha:"Kusa ga...",hi:"के बारे में .....",hr:"O programu...",ht:"Apwopo...",hu:"Névjegy",hy:"Համակարգչային նմանեցման վերաբերյալ",ig:"Banyere...",in:"Tentang",is:"Um…",it:"A proposito di...",iw:"אודות...",ja:"メニュー項目",ka:"პროგრამის შესახებ",ki:"Kũhũraga...",kk:"Анықтама",kn:"ಬಗ್ಗೆ ...",ko:"개요",ku:"سەبارەت",ku_TR:"derbarê menultem de",lg:"Ku",lo:"ກ່ຽວກັບ",lt:"Apie...",lv:"Par...",mg:"Mombamomba",mi:"Mō...",mk:"За нас…",mn:"Тухай...",mr:"याविषयी",ms:"Tentang...",mt:"Tagħrif...",my:"အကြောင်းအရာ",nb:"Om..",ne:"बारेमा",nl:"Over ...",nn:"Om…",ny:"Za...",om:"Waa’ee...",or:" ବିଷୟରେ...",pl:"O aplikacji...",ps:"په اړه...",pt:"Sobre...",pt_BR:"Sobre...",qu:"Chaymanta...",ro:"Despre...",ru:"Справка",rw:"Kuri...",sd:" سميوليشن جي باري ۾",se:"Dán birra...",sh:"Основно о ...",si:"පිළිබඳ…",sk:"O simulácii",sl:"O tem...",sn:"Nezve....",sp:"Mabapi le…",sq:"Për...",sr:"Детаљи...",st:"Mabapi...",sv:"Om...",sw:"Kuhusu...",ta:"பற்றி...",te:"గురించి ...",tg:"Дар бораи…",th:"ข้อมูลสถานการณ์จำลอง",ti:"ብዛዕባ...",tk:"Hakynda…",tl:"Tungkol",tn:"Ka...",tr:"Hakkında...",tw:"ɛfa ho...",uk:"Інформ.",ur:"اس سیمولیشن کے متعلق۔۔۔۔",uz:"Simulyatsiya haqida…",vi:"Thông tin...",wo:"Ci Mbirmi...",yo:"Nipa",zh_CN:"关于……",zh_HK:"關於...",zh_TW:"關於...",zu:"Mayelana..."},R.OPT_OUT),R.OPT_OUT);var o3={exports:{}};(function(i,e){(function(t,n){n()})($s,function(){function t(h,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function n(h,c,f){var g=new XMLHttpRequest;g.open("GET",h),g.responseType="blob",g.onload=function(){l(g.response,c,f)},g.onerror=function(){console.error("could not download file")},g.send()}function s(h){var c=new XMLHttpRequest;c.open("HEAD",h,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function r(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(c)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $s=="object"&&$s.global===$s?$s:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(h,c,f){var g=a.URL||a.webkitURL,v=document.createElement("a");c=c||h.name||"download",v.download=c,v.rel="noopener",typeof h=="string"?(v.href=h,v.origin===location.origin?r(v):s(v.href)?n(h,c,f):r(v,v.target="_blank")):(v.href=g.createObjectURL(h),setTimeout(function(){g.revokeObjectURL(v.href)},4e4),setTimeout(function(){r(v)},0))}:"msSaveOrOpenBlob"in navigator?function(h,c,f){if(c=c||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,f),c);else if(s(h))n(h,c,f);else{var g=document.createElement("a");g.href=h,g.target="_blank",setTimeout(function(){r(g)})}}:function(h,c,f,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof h=="string")return n(h,c,f);var v=h.type==="application/octet-stream",A=/constructor/i.test(a.HTMLElement)||a.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||v&&A||o)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var M=w.result;M=P?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=M:location=M,g=null},w.readAsDataURL(h)}else{var T=a.URL||a.webkitURL,D=T.createObjectURL(h);g?g.location=D:location.href=D,g=null,setTimeout(function(){T.revokeObjectURL(D)},4e4)}});a.saveAs=l.saveAs=l,i.exports=l})})(o3);var tZ=o3.exports;const iZ=t0(tZ),l3=new bi(LM,{fill:"rgba(0,0,0,0.7)",maxWidth:15.5}),nZ=18,sZ="#a6d2f4",rZ=400,h3=2,Zk=l3.width+h3,$k=2,aZ=5,eC=3,oZ=5;class lZ extends nh(ys(Ge)){constructor(e,t,n,s,r,a){const o=Ne()({separatorBefore:!1,checkedProperty:null,textFill:"black",cursor:"pointer",phetioDocumentation:"Item buttons shown in a popup menu",phetioEventType:vi.USER,tagName:"button",containerTagName:"li",containerAriaRole:"none",ariaRole:"menuitem",positionInPDOM:!0},a);super(),r&&this.setVisibleProperty(Cu);const l=g=>{this.innerContent=g,this.voicingNameResponse=g};t.link(l),this.present=s;const h=new kt(t,{font:new ki(nZ),fill:o.textFill,maxWidth:rZ}),c=new xt({cornerRadius:oZ});h.boundsProperty.link(g=>{this.localMinimumWidth=g.width+$k+aZ+Zk,c.rectHeight=g.height+eC+eC}),this.localPreferredWidthProperty.link(g=>{g===null?g=this.localMinimumWidth:g=Math.max(this.localMinimumWidth||0,g),g&&(c.rectWidth=g)}),this.addChild(c),this.addChild(h),Vo.create(this,[c,h],(g,v)=>{v.left=g.left+$k+Zk,v.centerY=g.centerY}),this.addInputListener({enter:()=>{c.fill=sZ},exit:()=>{c.fill=null}}),this.addInputListener(new Rr({tandem:o.tandem,fire:g=>{e(g),n(g)}})),this.separatorBefore=o.separatorBefore;let f=null;if(o.checkedProperty){const g=new Ge({children:[l3],right:h.left-h3,centerY:h.centerY});f=v=>{g.visible=v},o.checkedProperty.link(f),this.addChild(g)}this.mutate(o),this.disposeMenuItem=()=>{o.checkedProperty&&f&&o.checkedProperty.hasListener(f)&&o.checkedProperty.unlink(f),t.hasListener(l)&&t.unlink(l),h.dispose()}}dispose(){this.disposeMenuItem(),super.dispose()}}const hZ=new ld("joist");class Qp{static generateScreenshotAtIncreasedResolution(e,t){const n=document.createElement("canvas"),s=n.getContext("2d"),r=Qi.backingScale(s)*t;n.width=e.display.width*r,n.height=e.display.height*r,s.scale(r,r),s.fillStyle=e.display.domElement.style.backgroundColor,s.fillRect(0,0,n.width,n.height);const a=new Ic(n,s);return e.rootNode.renderToCanvasSubtree(a,It.scaling(r)),n}static renderAtScale(e,t){const n=document.createElement("canvas"),s=n.getContext("2d");return n.width=e.width*t,n.height=e.height*t,s.scale(t,t),s.drawImage(e,0,0),n}static generateScreenshot(e,t="image/png"){const n=Qp.generateScreenshotAtIncreasedResolution(e,2);return Qp.renderAtScale(n,1/2).toDataURL(t)}}hZ.register("ScreenshotGenerator",Qp);class uZ extends Ua{constructor(e){const t={centerX:0,centerY:0,big:!0},n=vu.createCheckingNode(t),s=vu.createUpToDateNode(t),r=new Ge({tagName:"div"}),a=vu.createOfflineNode(t),o=new Ge({children:[n,s,r,a],tagName:"div"});super(o,e);const l=()=>{const h=ms.latestVersion?ms.latestVersion.toString():"x.x.xx",c=ms.ourVersion.toString();r.children=[vu.createOutOfDateDialogNode(this,c,h,t)]};l(),this.updateStepListener=n.stepListener,this.updateVisibilityListener=h=>{h===cn.OUT_OF_DATE&&l(),n.visible=h===cn.CHECKING,s.visible=h===cn.UP_TO_DATE,r.visible=h===cn.OUT_OF_DATE,a.visible=h===cn.OFFLINE,n.pdomVisible=n.visible,s.pdomVisible=s.visible,r.pdomVisible=r.visible,a.pdomVisible=a.visible}}show(){this.shouldShowPopup()&&(ms.areUpdatesChecked&&!this.isShowingProperty.value&&(ms.resetTimeout(),(ms.stateProperty.value===cn.OFFLINE||ms.stateProperty.value===cn.UNCHECKED)&&ms.check(),zn.addListener(this.updateStepListener),ms.stateProperty.link(this.updateVisibilityListener)),super.show())}hide(){this.isShowingProperty.value&&(super.hide(),ms.areUpdatesChecked&&(ms.stateProperty.unlink(this.updateVisibilityListener),zn.removeListener(this.updateStepListener)))}}class pg extends GL(Ge,0){constructor(e,t){const n=phet.chipper.brand==="phet",s=phet.chipper.isApp,r=Ne()({phetioType:pg.PhetMenuIO,phetioState:!1,phetioDocumentation:"This menu is displayed when the PhET button is pressed.",phetioVisiblePropertyInstrumented:!1,tagName:"ul",ariaRole:"menu"},t);super(r);const a=new Iu(T=>new kX(e.simNameProperty,e.version,e.credits,{tandem:T,focusOnHideNode:this.focusOnHideNode}),[],{tandem:r.tandem.createTandem("aboutDialogCapsule"),phetioType:Iu.PhetioCapsuleIO(Ua.DialogIO),disposeOnClear:!1});let o=null;const f=[{textStringProperty:XJ,present:n,shouldBeHiddenWhenLinksAreNotAllowed:!0,callback:()=>{hp(`https://phet.colorado.edu/${e.locale}`)}},{textStringProperty:QJ,present:n&&!s,shouldBeHiddenWhenLinksAreNotAllowed:!0,callback:()=>{const T=`https://phet.colorado.edu/files/troubleshooting/?sim=${encodeURIComponent(e.simNameProperty.value)}&version=${encodeURIComponent(`${e.version} ${phet.chipper.buildTimestamp?phet.chipper.buildTimestamp:"(unbuilt)"}`)}&url=${encodeURIComponent(self.location.href)}&dependencies=${encodeURIComponent(JSON.stringify({}))}`;hp(T)}},{textStringProperty:new oi("QR code"),present:phet.chipper.queryParameters.qrCode,shouldBeHiddenWhenLinksAreNotAllowed:!0,callback:()=>{hp(`http://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(self.location.href)}&size=220x220&margin=0`)}},{textStringProperty:JJ,present:ms.areUpdatesChecked,shouldBeHiddenWhenLinksAreNotAllowed:!0,callback:()=>{o||(o=new uZ({focusOnHideNode:this.focusOnHideNode})),o.show()},options:{textFill:new Dt([ms.stateProperty],T=>T===cn.OUT_OF_DATE?"#0a0":"#000")}},{textStringProperty:ZJ,present:!s&&!phet.chipper.isFuzzEnabled(),shouldBeHiddenWhenLinksAreNotAllowed:!1,callback:()=>{const T=Qp.generateScreenshot(e);if(self.Blob&&new self.Blob){const M=T.slice("data:image/png;base64,".length),B=self.atob(M),O=new self.Uint8Array(B.length);for(let de=0;de<O.length;de++)O[de]=B.charCodeAt(de);const x=new self.Blob([O],{type:"image/png"}),Z=`${Mb(e.simNameProperty.value)} screenshot.png`;phet.chipper.isFuzzEnabled()||iZ(x,Z)}else hp(T,!0)},options:{tandem:r.tandem.createTandem("screenshotMenuItem"),phetioDocumentation:"This menu item captures a screenshot from the simulation and saves it to the file system.",visiblePropertyOptions:{phetioFeatured:!0}}},{textStringProperty:$J,present:Gl.isFullScreenEnabled()&&!s&&!Zn.mobileSafari&&!phet.chipper.queryParameters.preventFullScreen,shouldBeHiddenWhenLinksAreNotAllowed:!1,callback:()=>{phet.chipper.isFuzzEnabled()||Gl.toggleFullScreen(e.display)},options:{checkedProperty:Gl.isFullScreenProperty,tandem:r.tandem.createTandem("fullScreenMenuItem"),phetioDocumentation:"This menu item requests full-screen access for the simulation display.",visiblePropertyOptions:{phetioFeatured:!0}}},{textStringProperty:eZ,present:!0,shouldBeHiddenWhenLinksAreNotAllowed:!1,callback:()=>a.getElement().show(),options:{separatorBefore:n,tandem:r.tandem.createTandem("aboutMenuItem"),phetioDocumentation:"This menu item shows a dialog with information about the simulation.",phetioVisiblePropertyInstrumented:!1}}].filter(T=>T.present||T.options&&T.options.tandem).map(T=>new lZ(()=>this.hide(),T.textStringProperty,T.callback,T.present,T.shouldBeHiddenWhenLinksAreNotAllowed,T.options)).filter(T=>T.present);this.items=f;const g=new Ai({stretch:!0,spacing:2,children:ie.flatten(f.map(T=>T.separatorBefore?[new zS({stroke:"gray"}),T]:[T]))}),v=5,A=5,P=new bi(null,{fill:"white",stroke:"black"});g.localBoundsProperty.link(()=>{g.left=v,g.top=A}),g.boundsProperty.link(T=>{P.shape=cZ(T.width+2*v,T.height+2*A)}),this.addChild(P),this.addChild(g);const w=new Xl({keys:["escape","arrowDown","arrowUp","tab","shift+tab"],fire:(T,D)=>{const M=this.items[0],B=this.items[this.items.length-1];T&&T.preventDefault(),D==="arrowDown"?(B.focused?M:Ti.getNextFocusable()).focus():D==="arrowUp"?(M.focused?B:Ti.getPreviousFocusable()).focus():(D==="escape"||D==="tab"||D==="shift+tab")&&this.hide()}});this.addInputListener(w),this.disposePhetMenu=()=>{this.removeInputListener(w),w.dispose()}}dispose(){this.disposePhetMenu(),ie.each(this.items,e=>e.dispose()),super.dispose()}}pg.PhetMenuIO=new ui("PhetMenuIO",{valueType:pg,documentation:"The PhET Menu in the bottom right of the screen"});const cZ=(i,e)=>{const t=new zt().moveTo(i-20,e).lineToRelative(0,20).lineToRelative(-20,-20).close();return zt.roundRect(0,0,i,e,8,8).shapeUnion(t)},dZ=108,pZ=.28;class fg extends d0{constructor(e,t,n){const s=phet.brand.Brand,r=s.name==="phet"||s.name==="phet-io"||s.name==="adapted-from-phet",a=s.logoOnBlackBackground,o=s.logoOnWhiteBackground,l=new ba(a,{scale:pZ/a.height*dZ*.85,pickable:!1}),h=new jJ({scale:.83,left:l.width+8,pickable:!1});r?h.bottom=l.bottom-.5:h.centerY=l.centerY;const c=[l,h],f=new Ge({children:c}),g=$n.get("pushButton");super(f,t,{highlightExtensionWidth:6,highlightExtensionHeight:5,highlightCenterOffsetY:r?4:0,listener:()=>{v.show(),v.items[0].focus(),g.play()},tandem:n,phetioType:fg.PhetButtonIO,phetioDocumentation:"The button that appears at the right side of the navigation bar, which shows a menu when pressed",enabledPropertyOptions:{phetioFeatured:!0,phetioDocumentation:"When disabled, the (three dots) are hidden and the button cannot be pressed, hiding the PhET menu."},phetioVisiblePropertyInstrumented:!1,accessibleName:Qk,voicingNameResponse:Qk});const v=new pg(e,{tandem:n.createTandem("phetMenu"),focusOnHideNode:this});Cn.multilink([e.boundsProperty,e.screenBoundsProperty,e.scaleProperty,v.localBoundsProperty],(A,P,w)=>{if(A&&P&&w){v.setScaleMagnitude(w),v.right=A.right-2;const T=A.height-P.height;v.bottom=P.bottom+T/2}}),Cn.multilink([t,e.selectedScreenProperty,ms.stateProperty],(A,P,w)=>{const T=P===e.homeScreen,D=!A.equals(ct.BLACK)&&!T,M=w===cn.OUT_OF_DATE;h.fill=D?M?"#0a0":"#222":M?"#3F3":"white",l.image=D?o:a}),this.buttonModel.enabledProperty.link(A=>{h.visible=A}),gM.mutateNode(this,!0)}}fg.PhetButtonIO=new ui("PhetButtonIO",{valueType:fg,documentation:"The PhET Button in the bottom right of the screen"});const Dl=new ji(no.LAYOUT_BOUNDS.width,40),Vy=10,BA=25,cc=6,qA=10,u3=5,tC=u3,iC=0,fZ=60;class iw extends Ge{constructor(e,t){super(),this.homeButton=null,this.navigationBarFillProperty=new Dt([e.selectedScreenProperty,e.lookAndFeel.navigationBarFillProperty],(h,c)=>h===e.homeScreen?Hv.BACKGROUND_COLOR:c),this.background=new xt(0,0,Dl.width,Dl.height,{pickable:!0,fill:this.navigationBarFillProperty}),this.addChild(this.background),this.barContents=new Ge,this.addChild(this.barContents);const n=new kt(e.displayedSimNameProperty,{font:new ki(16),fill:e.lookAndFeel.navigationBarTextFillProperty,tandem:t.createTandem("titleText"),phetioFeatured:!0,phetioDocumentation:"Displays the title of the simulation in the navigation bar (bottom left)",visiblePropertyOptions:{phetioFeatured:!0},stringPropertyOptions:{phetioReadOnly:!0},phetioVisiblePropertyInstrumented:!0}),s=new Ge({children:[n],visibleProperty:new Dt([e.selectedScreenProperty],h=>h!==e.homeScreen)});this.barContents.addChild(s);const r=new fg(e,this.navigationBarFillProperty,t.createTandem("phetButton"));this.barContents.addChild(r),this.a11yButtonsHBox=new eX(e,this.navigationBarFillProperty,{tandem:t}),this.barContents.addChild(this.a11yButtonsHBox),this.localeNode&&this.barContents.addChild(this.localeNode),this.addAriaLabelledbyAssociation({thisElementName:vn.PRIMARY_SIBLING,otherNode:this,otherElementName:vn.LABEL_SIBLING});let a;const o=this.a11yButtonsHBox.bounds.isValid()?this.a11yButtonsHBox.width:0;if(e.simScreens.length===1)n.maxWidth=no.LAYOUT_BOUNDS.width-Vy-BA-cc-o-(this.localeNode?this.localeNode.width:0)-cc-r.width-qA;else{const h=Math.min(n.width,.2*no.LAYOUT_BOUNDS.width),c=new Qt(!0,{tandem:R.GENERAL_MODEL.createTandem("screens").createTandem("isUserNavigableProperty"),phetioFeatured:!0,phetioDocumentation:"If the screens are user navigable, icons are displayed in the navigation bar and the user can switch between screens."});a=new Ge({tagName:"ol",containerTagName:"nav",labelTagName:"h2",labelContent:qJ,visibleProperty:new Dt([e.activeSimScreensProperty,e.selectedScreenProperty,c],(O,x,Z)=>x!==e.homeScreen&&O.length>1&&Z)}),a.ariaLabelledbyAssociations=[{thisElementName:vn.CONTAINER_PARENT,otherElementName:vn.LABEL_SIBLING,otherNode:a}],this.barContents.addChild(a),this.homeButton=new WJ(Dl.height,e.lookAndFeel.navigationBarFillProperty,e.homeScreen?e.homeScreen.pdomDisplayNameProperty:new Cf("NO HOME SCREEN"),{listener:()=>{e.selectedScreenProperty.value=e.homeScreen},tandem:t.createTandem("homeButton"),centerY:Dl.height/2}),e.homeScreen&&a.addChild(this.homeButton);const f=no.LAYOUT_BOUNDS.width/2-Vy-h-BA-u3-this.homeButton.width-tC,g=no.LAYOUT_BOUNDS.width/2-cc-o-(this.localeNode?this.localeNode.width:0)-cc-r.width-qA,v=2*Math.min(f,g),A=(v-(e.simScreens.length-1)*iC)/e.simScreens.length,P=e.simScreens.map(O=>new YJ(e.lookAndFeel.navigationBarFillProperty,e.selectedScreenProperty,O,e.simScreens.indexOf(O),Dl.height,{maxButtonWidth:A,tandem:O.tandem.supplied?t.createTandem(`${O.tandem.name}Button`):R.REQUIRED})),w=[this.homeButton,...P],T=Math.max(fZ,ie.maxBy(P,O=>O.width).width),D=ie.maxBy(P,O=>O.height).height,M=new Map;P.forEach(O=>{M.set(O.screen,new jl(O,{excludeInvisibleChildrenFromBounds:!0,alignBounds:new pt(0,0,T,D),visibleProperty:O.visibleProperty}))});const B=new _i({spacing:iC,maxWidth:v});a.addChild(B),e.activeSimScreensProperty.link(O=>{B.children=O.map(x=>M.get(x))}),Vo.create(this,[this.background,B],(O,x)=>{x.center=O.center}),iP.create(this.barContents,[this.homeButton,...P],(O,...x)=>{const Z=x.filter(de=>de&&de.visible);O&&Z.length>0&&(O.right=Math.min(...Z.map(de=>de.left))-tC)}),Vo.create(this.barContents,[this.homeButton,n],(O,x)=>{x.maxWidth=O.left-Vy-BA}),e.simNameProperty.link(O=>{w.forEach(x=>{x.voicingContextResponse=O})})}n.left=Vy,n.centerY=Dl.height/2,r.centerY=Dl.height/2,Vo.create(this,[this.background,r],(h,c)=>{c.right=h.right-qA}),Vo.create(this.barContents,[r,this.a11yButtonsHBox],(h,c)=>{c.right=h.left-cc,c.centerY=h.centerY}),this.localeNode&&Vo.create(this.barContents,[r,this.a11yButtonsHBox,this.localeNode],(h,c,f)=>{c.right=h.left-cc,c.centerY=h.centerY,f.centerY=h.centerY,f.right=Math.min(c.left,h.left)-cc}),this.layout(1,Dl.width,Dl.height);const l=new Ge({tagName:"div",containerTagName:"section",labelTagName:"h2",labelContent:zJ,pdomOrder:[this.a11yButtonsHBox,r].filter(h=>h!==void 0)});l.ariaLabelledbyAssociations=[{thisElementName:vn.CONTAINER_PARENT,otherElementName:vn.LABEL_SIBLING,otherNode:l}],this.addChild(l)}layout(e,t,n){this.background.rectWidth=t,this.background.rectHeight=n,this.barContents.setScaleMagnitude(e)}}iw.NAVIGATION_BAR_SIZE=Dl;const zA=" — ",FA=30;class nP{constructor(){this.allTimes=[],this.histogram=[],this.longTimes=[],this.frameStartTime=0,this.previousFrameStartTime=0;for(let t=0;t<FA;t++)this.histogram.push(0);const e=document.createElement("div");e.id="phetProfiler",e.style.zIndex="99999999",e.style.position="absolute",e.style.color="red",e.style.left="10px",document.body.appendChild(e)}static start(e){const t=new nP;e.frameStartedEmitter.addListener(()=>t.frameStarted()),e.frameEndedEmitter.addListener(()=>t.frameEnded())}frameStarted(){this.frameStartTime=Date.now()}frameEnded(){if(this.allTimes.length>0&&this.allTimes.length%60===0){let e=0;for(let r=0;r<this.allTimes.length;r++)e+=this.allTimes[r];let n=`${ws(1e3/(e/this.allTimes.length))} FPS`;const s=ws(e/this.allTimes.length);n=`${n+zA+s}ms/frame`,n=n+zA+this.histogram,this.longTimes.length>0&&(this.longTimes.sort((r,a)=>a-r),n=n+zA+this.longTimes),document.querySelector("#phetProfiler").innerHTML=n;for(let r=0;r<FA;r++)this.histogram[r]=0;this.longTimes.length=0,this.allTimes.length=0}if(this.previousFrameStartTime){const e=this.frameStartTime-this.previousFrameStartTime;this.allTimes.push(e),e<FA?this.histogram[e]++:this.longTimes.push(e)}this.previousFrameStartTime=this.frameStartTime}}const mZ=new Fe(new He("JOIST/queryParametersWarningDialog.invalidQueryParameters",{en:"Invalid Query Parameters",af:"Ongeldige navraagparameters",ak:"San kɔ wákyi",am:"የማያገለግሉ የጥያቄ መለኪያዎች",ar:"معاملات الاستفسار غير صالحة",ar_KW:"Invalid Query Parameters",ar_LY:"معلمات الاستعلام غير صالحة",ar_MA:"معطيات بحث غير صالحة",ar_SY:"معاملات الاستفسار غير صالحة",az:"Yanlış sorğu parametrləri",be:"Няправільныя параметры запыту",bg:"Невалидни параметри",bn:"Invalid Query Parameters",bs:"Nevažeći parametri upita",ca:"Els paràmetres de consulta no són vàlids.",cs:"Chybné parametry dotazu",da:"Ugyldige søgeparametre",de:"Unzulässige Eingabewerte",el:"Λανθασμένες παράμετροι ερωτήματος",es:"Parametros de consulta no válidos",es_ES:"Parámetros de búsqueda inválidos",es_MX:"Parametro de Consulta Inválido ",es_PE:"Parámetros de consulta no válidos",eu:"Kontsulta-parametro baliogabeak",fa:"پارامترهای درخواست نامعتبر است",fa_DA:"پارامترهای درخواست نامعتبر است",fi:"Virheelliset parametrit",fr:"Paramètres de requête non valides",gl:"Parámetros de consulta inválidos",gu:"માગેલ માહિતી યોગ્ય નથી.",ha:"Ɓatattar tambaya",hi:"अमान्य पूछताछ मापदंड",hr:"Pogrešni parametri upita",ht:"Paramèt Rechèch Envalid",hu:"Érvénytelen paraméterek",hy:"Հարցման անվավեր պարամետրեր",ig:"Enwere Ajụjụ",in:"Kriteria tidak sesuai",is:"Ógildar færibreytur í fyrirspurn",it:"Parametri richiesti non validi",iw:"ערכי חיפוש לא חוקיים",ki:"Ndumiriri cia Kĩũria Itirĩ cia Kĩene",kn:"ಅನಧಿಕೃತ ವಿಚಾರಣಾ ಅಂಶಗಳು",ko:"유효하지 않은 질문 변수",ku:"داواکراوەکەت هەڵەی تێدایە",ku_TR:"Pîvanên lêpirsînê yên nederbasdar",lg:"Byokozesa okunoonya bifu",lo:"ພາລາແມັດເຕີ້ທີ່ຊອກຫາບໍ່ຖືກຕ້ອງ",lt:"Neteisingi užklausos parametrai",lv:"Nederīgi vaicājuma parametri",mg:"Paramètre fanontaniana tsy mety",mi:"He Tawhā Muhu",mn:"Тохирохгүй асуулга",mr:"शंकेचे परिमाण चुकले आहे",ms:"Parameter Pertanyaan Tidak Sah",mt:"Il-Parametri ta' dak li staqsejt invalidi",my:"သတ်မှတ်ထားသောမေးခွန်းဘောင်အတွင်း မရနိုင်သေးပါ",nb:"Feil i spørsmålet",ne:"अमान्य क्वेरी प्यारामिटरहरू",nl:"Ongeldige Keuze Parameters",nn:"Feil i spørsmålet",ny:"Ma Parameter ofunsira Osalondola",om:"Ulaagaaleewwan gaaffii sirrii hin taane",pl:"Błędne parametry query",ps:"د غوښتنې ناسم پارامترونه",pt:"Parâmetros de Consulta não Válidos",pt_BR:"Parâmetros de Consulta Inválidos",qu:"Harkasqapi mana chaninchu",ro:"Parametri de interogare greșiți",ru:"Неверные параметры запроса",rw:"Ibisabwa ntibihura",se:"Gažaldaga paramehterat leat eahpegustojeaddji",sk:"Neplatné zadané parametre",sl:"Napačni iskalni parametri",sn:"Invalid Query Parameters",sp:"Invalid Query Parameters",sq:"Parametra Hyrës të Papranueshëm",sr:"Неважећи параметри упита",st:"Mekhahlelo e Fokotseng ea Potso",sv:"Ogiltiga parametrar",sw:"Vigezo Batili vya Maulizo",te:"చెల్లని ప్రశ్న పారామీటర్లు",tg:"Параметрҳои дархости",th:"พารามิเตอร์ผิดพลาด",tk:"Sorag parametrleri nädogry",tl:"Di-wastong pagsusuri ng limitasyon",tn:"Dikarolo tse di sa letlelesegeng tsa go ngongorega",tr:"Geçersiz Sorgu Parametreleri",tw:"Nkwankyerɛ a eni ngyinasoↄ",uk:"Недійсні параметри",ur:"سوال کے غلط پیرامیٹرز",uz:"Yaroqsiz so‘rov parametrlari",vi:"Tham số không đúng",wo:"Laj Bu Jagul",yo:"Awọn paramita ibeere ti ko tọ",zh_CN:"无效的查询值",zh_HK:"無效查詢參數",zh_TW:"查詢參數不正確",zu:"Amapharamitha Wombuzo Angavumemelekile"},R.OPT_OUT),R.OPT_OUT),gZ=new Fe(new He("JOIST/queryParametersWarningDialog.oneOrMoreQueryParameters",{en:"One or more of these query parameters have<br>invalid values:",af:"Een of meer van hierdie navraagparameters het<br>ongeldige waardes:",ak:"Baako mienu bi ankɔ yie. San trai bio",am:"ከእነዚህ መጠይቅ መለኪያዎች ውስጥ አንድ ወይም  ከዚያ በላይ <br>ልክ ያልሆኑ እሴቶች አሏቸው፡",ar:"تحتوي واحدة أو أكثر من معامِلات طلب البحث هذه على <br> قيم غير صالحة:",ar_KW:"One or more of these query parameters have<br>invalid values:",ar_LY:"تحتوي واحدة أو أكثر من معلمات الاستعلام التالية على قيم غير صالحة:",ar_MA:"واحدة أو أكثر من معامِلات البحث تحتوي على <br> قيم غير صالحة:",ar_SY:"تحتوي واحدة أو أكثر من معامِلات طلب البحث هذه على <br> قيم غير صالحة:",az:"Bu sorğu parametrlərindən birində və ya bir neçəsində<br>yanlış dəyərlər var:",be:"Адзін або некалькі з гэтых параметраў запыту маюць<br>памылковыя значэнні:",bg:"Един или повече от тези параметри са невалидни:",bn:"One or more of these query parameters have<br>invalid values:",bs:"Jedan ili više ulaznih parametara ima nevažeće vrijednosti",ca:"Algun paràmetre de la consulta <br>té valors que no són vàlids:",cs:"Jeden nebo více těchto parametrů dotazu má<br>neplatné hodnoty:",da:"En eller flere af disse søgeparametre har<br>ulovlige værdier:",de:"Ein oder mehrere Eingabewerte sind nicht zulässig:",el:"Μία ή περισσότερες παράμετροι του ερωτήματος<br>έχουν λανθασμένες τιμές:",es:"Uno o más parámetros de consulta tienen valores no válidos:",es_ES:"Uno o algunos de los paràmetros de búsqueda tienen<br>valores inválidos",es_MX:"Uno o mas parámetros de consulta tienen valores inválidos",es_PE:"Uno o más de estos parámetros de consulta tienen <br> valores no válidos:",eu:"Kontsulta-parametro hauetako batek edo gehiagok<br>balio baliogabeak dituzte:",fa:"یک یا تعداد بیشتری از این پارامترهای درخواست مقادیر نامعتبر دارند:",fa_DA:"یک یا تعداد بیشتری از این پارامترهای درخواست مقدارهای نامعتبر دارند:",fi:"Yksi tai useampi muuttujien arvoista on<br>virheellinen:",fr:"Un ou plusieurs paramètres de requête ont <br> des valeurs invalides:",gl:"Un ou máis destes parámetros de consulta teñen<br>valores inválidos:",gu:"એક અથવા વધુ પરિમાણોની <br>કિંમત યોગ્ય નથી.",ha:"Daya ko mafi yawan sigan tambaya mai neman bayanai nada<br>marar daraja (nakasu):",hi:"इनमें से एक या अधिक पूछताछ के मापदंड में<br>अमान्य मान हैं:",hr:"Jedan ili više parametara iz upita imaju pogrešne vrijednostu",ht:"Youn oswa plis nan paramèt rechèch sa yo genyen <br> valè envalid:",hu:"Egy vagy több paraméter értéke érvénytelen:",hy:"Այս պարամետրերից մեկը կամ մի քանիսը ունեն<br>անիրական արժեք(ներ)",ig:"Nọmba ezighi ezi",in:"Satu atau lebih patokan memiliki nilai tidak sesuai",is:"Ein eða fleiri af færibreytum<br>hafa ekki leyfð gildi:",it:"Uno o più parametri della richiesta hanno prodotto un risultato <br>non valido:",iw:"אחד או יותר מערכי החיפוש לא חוקיים:",ki:"Ũmwe kana o maingĩ ma maciĩũria cia mũtaratara iri <br>gĩtiagĩrĩire:indo cia bata",kn:"ಒಂದು ಅಥವಾ ಹೆಚ್ಚಿನ ಕೋರಿಕೆ ಅಂಶಗಳು <br> ಅಸಿಂಧು ಮೌಲ್ಯಗಳಾಗಿವೆ",ko:"1개 이상의 질문 변수가 유효하지 않은 값을 가짐",ku:"یەکێکلە داواکاریەکەت هەڵەی تێدایە",ku_TR:"Yek angelek ji<br>van parametreyan pûç in",lg:"Ekimu oba kubimu kubipimo byokubuuza bilina<br>omuwendo ogutaliyo",lo:"ໜຶ່ງ ຫຼືຫຼາຍກ່ວາພາລາແມັດເຕີ້ທີ່ຊອກຫາມີ<br>ຄ່າທີ່ບໍ່ຖືກຕ້ອງ",lt:"Vieno ar daugiau šių parametrų <br>reikšmės netinkamos:",lv:"Viens vai vairāki vaicājuma parametri<br>satur nederīgas vērtības:",mg:"Ny iray na maromaro amin'ireto mari-pamantarana fangatahana ireto dia manana sanda tsy mety:",mi:"Tētahi, ētahi rānei o ēnei tawhā uiuitanga kua<br>muhu ngā uara:",mn:"Эдгээр асуулгаас нэг буюу хэд хэдэн утга<br>буруу байна:",mr:"एक किंवा एकापेक्षा जास्त शंकेची किंमत चुकली आहे <br>invalid values:",ms:"Satu atau lebih parameter mempunyai <br> nilai yang tidak sah:",mt:"Wieħed jew iktar minn dawn il-parametri <br> b'valuri invalidu/ invalidi",nb:"En eller flere feil i spørsmålet",ne:"<br>यी क्वेरी प्यारामिटरहरू मध्ये एक वा बढी अमान्य मानहरू छन्यी क्वेरी प्यारामिटरहरू मध्ये एक वा बढी अमान्य मानहरू छन्:",nl:"Een of meer van de gekozen parameters hebben<br>ongeldige waarden:",nn:"Ein eller flere feil i spørsmålet",ny:"Chimodzi kapena zingapo zafunsozi zili ndi<br>zosavomerezeka:",om:"Ulaagaaleewwan gaaffii kana keessaa tokko ykn isaa ol ta'an<br>gatiiwwan sirrii hin taane qabu:",pl:"Co najmniej jeden z tych parametrów query ma<br>nieprawidłowe wartości:",ps:"د غوښتنې له دغو پارامترونو څخه یو یا څو یی ناسمې اندازې لري:",pt:"Um ou mais parâmetros da consulta têm valores inválidos:",pt_BR:"Um ou mais parâmetros de consulta têm<br>valores inválidos:",qu:"Huk achkapas harkasqapi mana chaninchu:",ro:"Unul sau mai mulți parametri de interogare listați au <br> valori greșite:",ru:"Один или несколько параметров запроса имеют недопустимые значения:",rw:"Kimwe cyangwa byinshi muri ibi bipimo by'ibibazo bifite agaciro <br>  ntizemewe:",se:"Ovttas dahje eambbo dáin gažaldat paramehteriin lea <br> eahpegusttojeaddji árvvut:",sk:"Jeden alebo viacero z týchto parametrov má<br>neplatné hodnoty:",sl:"Eden ali več od naštetih iskalnih parametrov ima <br>napačne vrednosti:",sn:"Maquery parameters aya ane<br>invalid values:",sp:"E tee goba tše ntši tša ditekanyetšo tše tša potšišo di na le<br>dikelo tše di sa šomego:",sq:"Një ose disa parametra hyrëse kanë vlera të papranueshme:",sr:"Један или више улазних параметара има неважеће вредности",st:"E 'ngoe kapa tse ngata tsa lipotso tsena li na le<br>litheko tse fosahetseng:",sv:"En eller flera av dessa variabler har<br>ogiltiga värden:",sw:"Moja au zaidi ya vigezo ulivyoweka vina<br>thamani batili:",te:"ఒకటి లేదా మరెన్నోల్లో ప్రశ్న పారామీటర్లలో   <br> చెల్లని విలువలు ఉన్నాయి:",tg:"Як ё якчанд аз ин параметрҳои дархостҳо дорои дастгоҳҳои беэътибор доранд:",th:"พารามิเตอร์ที่เลือกใช้<br>ตั้งค่าผิดพลาด",tk:"Şu sorag parametrleriniň biriniň ýa-da birnäçesiniň<br> bahasy nädogry:",tl:"Isa o higit pa sa mga parameter ng query na ito ay may<br>mga di-wastong halaga:",tn:"Nngwe kgotsa dingwe tsa dikarolo tsa ngongorego",tr:"Bir ya da daha fazla sorgu parametresi <br>geçersiz değerlere sahip:",tw:"Baako anaa Dodoɔ a ɛwɔ adeyɔ yi mu<br> ne no mfa:",uk:"Один або кілька параметрів запиту мають недійсні значення:",ur:"ایک یا زیادہ سوالات کے پیرامیٹرز میں<br> غلط اقدار ہیں :",uz:"Bir yoki ko‘proq ushbu so‘rov paramentrlarida<br>yaroqsiz qiymat mavjud:",vi:"Một hay nhiều tham số không đúng",wo:"Benn wala Laj Yu Bari Am <br> Ngëm Yu Baxul",yo:"Ọkan tabi diẹ ẹ sii ti awọn paramita ibeere wọnyi ni<br>aiṣedeede esi:",zh_CN:"一个或多个参数有<br>无效值：",zh_HK:"以下一個或以上查詢參數有<br>無效數值",zh_TW:"查詢參數中有不正確的值：",zu:"eyodwa noma ngaphezulu yale pharamitha yombuzo inamanani <br>angavumelekile:"},R.OPT_OUT),R.OPT_OUT),yZ=new Fe(new He("JOIST/queryParametersWarningDialog.theSimulationWillStart",{en:"The simulation will start with default values for<br>those query parameters.",af:"Die simulasie sal begin met verstekwaardes vir<br>daardie navraagparameters.",am:"ሲሙሌሽኑ  ለተጠየቁት መለኪያዎች <br> በነባሪ ዋጋዎች ይጀምራል።",ar:"ستبدأ المحاكاة بالقيم الافتراضية <br> معامِلات طلب البحث هذه",ar_KW:"The simulation will start with default values for<br>those query parameters.",ar_LY:"ستبدأ المحاكاة بالقيم الافتراضية لمعلمات الاستعلام تلك.",ar_MA:"ستبدأ المحاكاة بالقيم الافتراضية <br> معامِلات طلب البحث هذه.",ar_SY:"ستبدأ المحاكاة بالقيم الافتراضية <br> معامِلات طلب البحث هذه",az:"Simulyasiya həmin sorğu parametrləri üçün<br>cari dəyərlərlə başlayacaq.",be:"Мадэляванне пачнецца са значэнняў па ўмаўчанні для<br>гэтых параметраў запыту.",bg:"Симулацията ще започне със стандартните стойности за тези параметри.",bn:"The simulation will start with default values for<br>those query parameters.",bs:"Simulacija će početi sa zadanim vrijednostima za ove <br> parametre upita",ca:"La simulació començarà amb els valors per defecte <br>per aquests paràmetres consultats.",cs:"Simulace začne s výchozími hodnotami pro tyto <br> parametry dotazu.",da:"Simuleringen vil starte med forhånds-indstillede værdier for <br>disse søgeparametre.",de:"Die Simulation startet mit Grundeinstellungen für<br>die Eingabewerte.",el:"Η προσομοίωση θα ξεκινήσει με τις προκαθορισμένες<br>τιμές για αυτές τις παραμέτρους του ερωτήματος.",es:"La simulación comenzará con los valores predeterminados para esos <br> parámetros de consulta.",es_ES:"La simulación comenzará con valores predeterminados para<br>esos parámetros de consulta.",es_MX:"La simulación comenzará con los valores predeterminados <br> para esos parámetros de consulta.",es_PE:"La simulación comenzará con los valores predeterminados para<br>esos parámetros de consulta.",eu:"Aurrez zehazturiko parametroekin hasiko da simulazioa kontsulta-parametro horietarako.",fa:"شبیه سازی با مقادیر پیش فرض برای پارامترهای درخواستی شروع خواهد شد.",fa_DA:"شبیه سازی با مقدارهای پیش فرض برای پارامترهای درخواستی شروع خواهد شد.",fi:"Simulaatio käynnistyy oletusarvoilla",fr:"La simulation commencera avec les valeurs par défaut pour <br> ces paramètres de requête.",gl:"Esta simulación comezará con valores por defecto para<br>estes parámetros de consulta.",gu:"આ સિમ્યુલેશન પ્રશ્નોના પરિમાણોની<br>મૂળભૂત કિંમતો સાથે ચાલુ થશે.",ha:"Wannan kwaikwayon zai fara ta yadda aka saita shi.",hi:"सिम्युलेशन जिन पूछताछ मापदंड<br>के लिए डिफ़ॉल्ट मानों के साथ शुरू होगा।",hr:"Početak simulacije je sa početnim postavkama za te <br> parametre upita.",ht:"Similasyon an ap kòmanse ak valè defo pou <br> paramèt rechèch sa yo.",hu:"A szimuláció alapértékekkel indul<br>a következő paraméterekre.",hy:"Նմանակումը կգործարկվի  այս հարցման պարամետրերի լռելայն արժեքներով",ig:"Ihe ngosi ga-amalite na ụkpụrụ ndabara maka<br>paramita ajụjụ ndị ahụ.",in:"Simulasi dimulai dengan nilai dasar untuk setiap kriteria",is:"Sýndartilraunin fer í gang með sjálfgefnum gildum<br>fyrir þessar fyrirspurnarbreytur.",it:"La simulazione partirà con valori standard per i seguenti<br>parametri richiesti",iw:"ההדמיה תתחיל עם ערכי ברירת מחדל עבור<br>ערכי החיפוש.",ki:"simulation nĩ kuambĩrĩria na indo ca bata cia default <br>icio ciĩũria cia mũtaratara",kn:"ಈ ಕೋರಿಕೆ ಅಂಶಗಳಿಗೆ ಸಿಮ್ಯುಲೇಶನ್ ಮೂಲ ಮೌಲ್ಯಗಳೊಂದಿಗೆ ಆರಂಭಿಸಲಾಗುವುದು.",ko:"시뮬레이션이 질문 변수가 <br> 디폴트인 상태로 시작됨",ku:"ئەم تاقیکردنەوەیە بە شیوازە سەرەتایەکەی دەست پێدەکات",ku_TR:"sîmulasyon dê bi rêjeya xwerû dest pê bike. Ew pîvan",lg:"Okusiiga kujja kutandika n'emiwendo egy'enjawulo egy'<br>ebipimo ebyo eby'okubuuza.",lo:"ແບບຈຳລອງຈະເລີ່ມຈາກຄ່າຕັ້ງຕົ້ນສຳລັບ<br>ຂອງພາລາແມັດເຕີ້ທີ່ຊອກຫາ",lt:"Simuliacija prasidės su numatytomis<br>šių parametrų reikšmėmis.",lv:"Simulācija tiks uzsākta ar noklusētajām vērtībām<br>šiem vaicājuma parametriem.",mg:"Ny simulation dia hanomboka amin'ny sanda mahazatra ho an'ny<br>ireo mari-pamantarana fangatahana.",mi:"Ka tīmata te whaihanga ki ngā uara taunoa mō<br>ēnā tawhā uiuitanga.",mn:"Симуляци нь эдгээр асуулгын өгөгдмөл <br>утгуудаас эхэлнэ.",mr:"हे सादृश्य त्याच्या मुळ किमती ने सुरु होइल<br>",ms:"Simulasi akan dimulakan dengan nilai tetap bagi<br>parameter yang diberi.",mt:"Is-simulazzjoni tibda bil-valuri 'default ' għal <br> fir-parametri maghzula.",nb:"Simuleringen vil starte med standardverdier<br>for parameterne i spørsmålet.",ne:"<br> यी क्वेरी प्यारामिटरहरूका पूर्वनिर्धारित मानहरूसँग सिमुलेशन सुरु हुने छ !",nl:"De simulatie zal starten met bepaalde waarden voor<br>deze te kiezen parameters.",nn:"Simuleringen vil starte med standardverdier for <br>parameterne i spørsmålet.",ny:"Chifanifani chidzayamba ndi makonda a<br>mafunso awo.",om:"Siimuleeshinii gatiiwwan durtii<br>ulaagaaleewwan gaaffii sanaan ni jalqaba.",pl:"Symulacja rozpocznie się z wartościami domyślnymi<br>tych parametrów query.",ps:"د غوښتنې د دغو پارامترونو لپاره به سېمولېشن د مخکنیو اندازو سره شروع کیږي.",pt:"A simulação começará com valores padrão<pt>para estes parâmetros de consulta.",pt_BR:"A simulação iniciará com valores padrão para esses<br>parâmetros de consulta.",qu:"Simulación nisqan qallaykunqa chanin ñawpasqaña harkasqa tapunakuna.",ro:"Simularea va începe cu valori implicite pentru <br> acei parametri de interogare.",ru:"Моделирование начнется со значений по умолчанию<br>для этих параметров запроса.",rw:"Igereranya rizatangirana n'agaciro gasanzwe kuri <br> ibyo bipimo by'ibibazo.",se:"Simuleren álgá ovdagihtii válljejuvvon árvvuiguin daidda <br> gažaldat paramehteriidda.",sk:"Simulácia sa spustí s predvolenými hodnotami<br>pre tieto parametre nastavenia.",sl:"Simulacija se bo začela s privzetimi<br>vrednostmi za te iskalne parametre.",sn:"Simulation inozotanga netsika dzakagara dziripo dze<br>idzo kwiri parameters.",sp:"E tee goba tše ntši tša ditekanyetšo tše tša potšišo di na le<br>dikelo tše di sa šomego:",sq:"Simulimi do të fillojë me vlerat e paracaktuara për<br>këto parametra hyrës.",sr:"Симулација ће почети са заданим вредностима за ове <br> параметре упита",st:"Ketsiso e tla qala ka boleng ba kamehla bakeng sa<br>litlhophiso tseo tsa potso.",sv:"Simuleringen börjar med standardvärden för<br>dessa variabler.",sw:"Mwigo utaanza na taarifa msingi za <br> maulizo yaliyowekwa",te:"The simulation will start with default values for<br>those query parameters.",tg:"Модел барои идоракунии бо ёрии пешфарз>ин параметрҳои дархост оғоз мешавад.",th:"แบบจำลองจะเริ่มต้นด้วยค่าปริยายสำหรับ<br>พารามิเตอร์ที่ต้องใช้",tk:"Şol sorag parametrleri üçin bu simulýasiýa<br> öňden bellenen bahalar bilen başlar.",tl:"Magsisimula ang simulasyon sa mga default na value para sa<br>mga limitasyon na katanungan.",tn:"Setshwantsho sa tshwantshiso se tla simolola ka maemo a a tlhophetsweng ruri fa dikarolo tsa ngongora e le <br>",tr:"Bu Simülasyon mevcut sorgu parametreleri için <br>varsayılan değerlerle başlayacak.",tw:"Dwumadie yi bɛhyɛ aseɛ wɔ ɔno ara tumi so<br>ɛwɔ adeyɔ yi mu.",uk:"Моделювання розпочнеться із значень за замовчуванням для таких <br>параметрів.",ur:"ان پیرامیٹرز کے لئیے پہلے سے طے شدہ <br>اقدار کے ساتھ سیمولیشن شروع ہو جائے گی۔",uz:"Simulyatsiya ushbu<br>so‘rov parametrlari uchun avvaldan belgilangan qiymatlar bilan boshlanadi.",vi:"Mô phỏng sẽ bắt đầu với giá trị mặc định đối với<br> tham số được yêu cầu",wo:"Bi Po Day Dor Ak Ay Yenn Ngëm Ngir <br> Say Lac",yo:"Simulation yoo bẹrẹ pẹlu aiyipada iye fun<br>awon paramita ibeere",zh_CN:"模拟应用将会从<br>这些询问值的默认值开始",zh_HK:"模擬器會以預設數值 <br> 開始",zh_TW:"此模擬教材會以這些參數當預設值。",zu:"ukulingisa kuzoqala ngamavelu azenzakalelayo<br> alawo mapharamitha wombuzo."},R.OPT_OUT),R.OPT_OUT),d_=new Image,vZ=_n.createLock(d_);d_.onload=vZ;d_.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAAEUCAYAAAAGDDkDAAAACXBIWXMAABcSAAAXEgFnn9JSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAALgRJREFUeNrsfQuUFdWV9qFpaASFC/KK0PZFkTCo0MYXJFEvOiqZSaQzSsZJjLRRVzIZJzTOrJmsxBlgYpxM1iiQlX/yJ1EBTf4xUUfQZP3gTKCRjJL4alQYRNTmGR4qt0GkG2h66jt1dt19q6tuVd2quvfc27XXKvpyn1X1nf3tx9lnHyESSSSRRBKpQulX5dfXaBwp40irg2SYeg3SbhzrjWOlcWSTIVFZkjGOhcbxlHG8axw9AY9DxtGSaLreAs1tMo6r1N9eclpdragfPVQ+Pq9+RN5r40edIQYbr+86eESse3mHeP/wMXppuXHcloCuj6QUwHOVZlty5tDTJLDjR58h6g1A7SB7ya9feFv8+vnt9F9Q/Sb2cqsyA+0J6KUFG9Q7Tz2WMskAdurE0WKacQD0sLJx8x7xyOo3Cr2lzThWKDbIJqCXCGyAO/PihsiAtsvaV3aIt3Z9YDDGUOs5/H+bcTAB4IuMY0kCerQCsBcQ2NDqmZ8wwS6XgAl+/fzb3P63KvvfnoAePsxaTDYbNnpOZnJgGx1E3lJa7Pc3wAaw/8e6TpLWz1TUn4BehDQrwFPwvP/0kxPF1YZ2xy2bth+QnnyQgQVt//GqV8XuA0cqDvj+Gp3LMhVnDwKV33XjxeL89MiS/PDLb+4zwzhmx71kcN0Accnkj4kt7e+Jw0ePDzKeutk41hjHPt1Br9HEWXtVabm4aeZk0fKFS2Nx0ly1tuOYobmdnprtlAeY/4XLpAlS17GORxcJ6O6A40Y1mjfw0pLQuV0+cACUC2w3qNwpnHMBPgHdH+CXxeqseWn6W/khWZ4gXIPtdovjcf63Xn+h/Ksc0YWJTfcBuNKUssgTrVvFmcNOE9PPH+f4+tgRQ2TICIev/Q8d0hTYQ8ehQ+rEMOPAe1TksUpX+14uTV+sC+DK+5baXkjAQrfOutCK1xG22QWDhg2GZQm95yddpNP2tdkXlRVw7qC972HXIQAUjqZkh3VbrQHDBQOD0XxLAnou8SJvXrlseJ6mHzwS6P1Xs6zgI2ted7TvyC8oWaCjN19q0JeRxpTDS3eSQg6cm5A2Q9OdaB7Xxrz5lr4M+kKy42QbdZBtRYCOa5ijaJ6lY/MEqWOm7em+CHpaXTy3edppuR+7zp02JJAAuJO2w3RNypmvBX0RdHnRuAnlnCXrpeW7D+UnaTqOBfr8n37yXNObf2OP8+szzqWHzTrZ9poSaXmz7SZoIZu27w/1eWg7WAsMoeLzQtre0pdAt7RcB2+dUzmFXFMmFu9UzlAJHSfQbQN9ni7aHjfoKV21nOz5jMY/EsNOH1z095C5cosCMNDV5JF1L6oddHmRCF900nKumdd9+pJQ34PrIop3StZw26+0vepBn0dxq04Cj5tAv/7TF4f+Piqz3n3wsAsbjKGIBf5NYzWD3kjxKS5aRwcOtnz82FGhv49YzG1OHoCzezC3mkGfSzZPl7jcTu1zZl0ZyfedOXSQqekHDnvafuGyMKOUEicaGdvFhkqe2GPqQiJXtowyJ3JGDDstrwqHh1dE7UNPH2K9dl5RoJ9mmY1CoOO8jPcQxbdVG+gpsl1e1A7nB7YQ1AiQP+o64eoQhRE4kxx8Tu14vOa3L3mWTIUVmpNXClF1oGfoRtupHRcNcDG75ZX3Bij1Y0daj/3a3937DsoDsnn7DnH4w4/MwcUG0+03zbIeD1UhG2XWpp07OpYp3/NyoGP93ZJqA11q+aTxpoODogNcrFMCg4Cd3jjFeDzSeDxKat7QELGzk2xs+x85ALYYB7T6ehaqna+SM6B3TKDgwGClhJLXapqPCtB6nqaPH5F3f8olcdW9oxQqA21BRUohW/fGr34aOcDFCNgAgwGDA3/xf7vdNtOqw3nCRQotfkRoSkUWbvL1+9fQw+GiTOvh4gL9XZE/ndgucgv/QP1WKdH93/xqZF50EAH9P/TEaqn5YBZo/vTGP7Jex/MvGAOABoGT80aDYOPmvdJU3TrrAtc6O5L7Hn2ezAwWR7RWE+g96i+claUKbG7v13GHavWD97lqH4ESJRsAxDvvWdzreQw+DEInmXXHt+S5gL3cHM3v3HmlZ73+kl++SL7M54W5JLoqbHqjKLyqM0thFWgfNxJaZ3fSHl/9nFj0w0cl8AB8wV1fjowRZhj+AwYS/IfrjLAN2ozfw0G/ZRfKz9O6OrmS1Qgj8XeXEZ8jK+dngQY+q0BvrCbQAepFwn0lZxvFtKBCOHmgWX6jATQBjsGAQfE33/uxpOAoNB7f8csl91jfhcEEasd5+B1Y59GsoZpIOubTmdNB4sjItQufS3cpcQMNs8v85hslyM8/tkQOCPyNkuLt3wWwYWbcplnh+XslhPoy6L6FQiHynDkgiKN/eu98K6aOIkce1rsnDa90KfsCRtJ22FWnG/3nLfeKszNfEp+8uUXa/6iBBKUvXv4fjmxTrVKrA+goLHzBAXTYdXoedv0Ow+MGzUcld97zQN7vYuC5ee/VJGXXdFoT7qTFRPn9BwywgI9K2/HdBHhN//6Wb+H0/ZTSTUCPSDDB4mVH+9XUyMOPQ+VXtmzfaQFeU1trAe/EOLv3vSf/TqoCe64F6FR2PINlw5y0q1+/fnkARJee6pf3155+jVqOdZ5IQKd5crt3nvf/nh7Rc+qU4+AILT1m8pC+3yksJO0fPyr8zBtbO9fWZ0Gnke8UkhHA3SdOGNiY4IQpV+ZCBRSnurvN71egO9XMHf7wqBmLDxoQ5aVn+xLoKaeR76TBSNCYythj/T+qBA0GD2XfCHB47k6Dj5y7SeOHh2e2XA1B1RVRFJJG7hQVagaA1ChCtMdXb5CDYnrE1E4zfKBvaLgbixC9o/QqFKvlp2qzfQn0PKFFg26AQvPmN/+Z6+eRtEERxIK7bikqazfdYzCRliPNGrbjFSucbO1rjlwj3cRiBBk0yt4hroaXjzAurjQtaXkU4Ror7mwvJ+jl0PQUJWVoXjoIYAAZmTp8hhysOIswaIBFkXNnpmxTX9P0aaTpx1Rihoof/dIxgY+YGra+EP2HET4RFMUS67c0cOLK6r3XFxnz8jl1ePO/WHJPbCdKgNvLp4t14mzdo/sU6Bmi92KFQrnFy5+UZU9xZdHgP0h28ah7q5RQrVygW06ceZjJjqD5dMyvE/Bm5erRWGw5PHec54wIQGfU3lpu0GvLATqt8qQFBcVoKuw4Yuu4PHewiGnLx0RSFbNttwX6+r4G+jQ3T9ipONJLkEyJKi1r13IK1dja8lD2nFXQll3TS03vpj1nThzFv5sjrooJIwuNkBCCxQtRtCBnvW1gz7N9CXRrUSNPdNAAcCqXKofQAghb58eQTpyVlFmlwzWWEvQmsuPcRhLVr/nty4HiZ5REF6qi8fMeu+C9ZMsBeFQVrkzTV+oAeilt+myn8IfWbcOmQ9v9TKogI0eLE5CNw4KFYacPkQsgUWQBjx6vAXjYZr91dXcbgwSfARNF1TIFtpxt8NNWDaCn1d92H9QuNZ2t3GTAj5GLHqBlfpIttDCCgHerZIVj+KAqo/YzkIjWvzzrguicws17tNJySJgm/1gM9pjItfLeVAB8bGrTBGp3spN4ft0rO6SWwhufePZZBX+4buAAmZmDlqOLBAqd8Lfr+AnxiSkT5bIlxPIPfPOrYtQI79ZtGDTf+8kvzBzAZ6eJCR+Lrt3bv//XFtJ0LPPaqgPoYRYwysoGpERZnH2RC4VhY55GLON1o01a7ovvw0qTUi1ugHZ/oeVeeQ1+lhoHs+UH5N4vitqH66LpYRw5GXpgTRhb4L/YJUxr9MpsUbts3PwvtHw38oUNbs4eAQ47HiXgkHW5RsFLhUYSBvQ2iq/ZAoGM6N1lYYGfzBbf2gNOHcBwWhceB+CQEUY8HmWvG9v+rMt1Aj2MTZ8AkOE133D1DGmPlXbuZ1mnZmXz5QzTkaPH5QY3OJxkQG2NtcHdwUNHxTNrN0pQMpdNi/zCYf8hb+/8g9mT5uARseG1XWLT2wfEie5T8hwH1xVfCPnomjdoVg2Ar6gW0EHvX4NWfv2LN8gb92wu1l7B3tMBL/9k96nUu3/o8LyxAP6KafWy0xOAeHXLdhnDw0Hz45T5FTiD+E44fDh3/I5kAGNgYtCBmosdANBy+ChKPi8023Y7bCcKpJpScLzggKFercD3NqlYvdnuuSOMQ7xuz8nDEXpk9etWQSFm1qIsmDCrcH7Wy4wg9Wpv+E/niTyDV+cp1m0CWn6b0EyKBR12e54CMoW4GRpzwWfvJBs5oUD4lmIDoFf3RDhUSM1SMx/slwbgqTMVvHqEYmEqY3OrVZ+0nsOAwhQtnqdzwMyYU6Mk6jeDgTpJNQTmWr7YAJ2ZwPZKBn2xAnupekyJGatXC5YVq9kpv010Usr5m63+ph2TLA5dqhAxBK2Ahc8BUHkyB+VWGLTID2DJMh8IfgXAT8UAMJgAG/spLUcacL7QUPxm5CyHTIGTF5/TujMTgP8hJvADelZlqlayDF+jOq5Sf1NOXjUoGQcGHCjfDXycG3wC+4pUs7buRjfGwLlj3nuayE0UuToU2/I9dbquRUJT8Qv6bAKVAMbNBui4mR0KfHbji/W42tWx0iHWT7FwsIEGhz0Hb2r0TnmeYB37Qki8j3rM9GKUXIFmWmnpQgezRuwk2KAQtvNbrpvzFgT0ZdzxAp3C8cGNpN5rXIPYTYs6xiLWcBoMyANkCuXgcZ4YEF6NiupzgzatsogrlSOW5bkJDxbLCE0mVooBvdHuaSMmr5czWQflDcIN3Nn6c6ebFvdeJWlm/xcpKrb2SAHjwLHEypcgDp/DgGhS37neg53afA6IigBd2r4O1cSvw6EAEf1gqAEgu2mNMYDcpOx8xmtQYWDyhr9+hTpDY1A/8HcDxd3fP06am/FpmlYoBy5bqaBLTUKjXoQyAB3JF7LfL6gGuxQC0U2LWNPTir6b7S9cdamZV8oe7hGb3jRXnc6+ur9YtbY71A8Sk02bXCN/Y/2L3WLu7FrRcJZzxnr9S91i09ZTInukh851tjIJbZUIepa8X6JIbjN5aINBgXDtOmUz1SAI08g+pW6gle2Z9vEaefMBBB6TAOQbWzrlc9M+boIeZoZul0Oni1vxu5e4JS/NTN0jq05KZjDAx3WvU8CvrDTQrQkVngXjPdiplzpVqNj6tRQLOj73FDENgP7HvxxoaJpzSoG0PD2unzEgjMHwo+IbA21U3n7qjH4S5B17uswReIZ3OgMD4waDaa75SifOKaWu4Tah2WSLL9CpGzJ3diiZwZMemxX9s5TmVUVcMGlJKm2A/NC9dQU0jGjeBDp7JAfOC0UWWRJ7wUyAttv39gicB2eWgvRk/P7Lj58mbv+HLrFi1UmKfoRuwHsN4WXCZQM5gH++qjvnXR2gLZiyLCINaQEOCn9ySZ0vDQM40C68973/HiwmzvpIghW0pTiKKGG+CLg/myc1VrLMP/5l8Nk2BrzQTeO9ZtkQqtxMjhnadg4aONBaMYrpVMxOQcPxGHEw6B8ZsIMfdEiT6xN0C3DQ+ZNLBolBdf4yxGnDwfrBz07ClhoaWis/h4GA87nlhmsCAQ75t3+oMz5/Svxy9Uk5AH7+/Trf55KXzTLOZcdey8lE5LFDF+fOi7eoo7MUaDY0CLsxoMIUVTMIjaD1NBDMeD5QXxiyfynQ6P1GqBT8Bptj9wc/OyG+cUutBAsmB2B62XD0cSfAH/5OnRhmfPaffiRDNanhftjGTR4yvg+D2Is1daN3EoDS5GdqE8B/8uZ5NAAu8jG65XfDdr5k0GoxN5koHgJqbt/TIz16cjxxzmSKaC+XZ1nHSPwmAEoNFeLGeV2SNQAWnotCdKN6v3e4SYFTsD02lSCptCwyUzM9vnehCs0kWH4dJidBuARNB4C/eXiQBB43GwAWEoALdqGQi8JDfEcYLfcAvmxbefix6SRbVVYq/fTaF0TX8ZMybKNN7CiGb/r6ArLlMAt/YRz7CnwnqG4x0er1n+of6kIun1oj1vx3t7SjP3n8pJg8oUbaZzBIp4ElnidAp0+rEV+dM0Da6+lT+4sv/X2X/AyZiieXRgu4i41f43F/yq7p3PZmKD3L+645zEUX8twRg2NCI/WNWwbIlGcUAq2GRvGsHCIBhH2pM4TMsplZPDO+X7X2pBXnmza8OE89yPmpOJ4UY2Y5nLtihjM0FJMbjdzGU0IEzpOylYWKCOQWXgDkNw8NivyiAPoPfn5CplD9iFcCKEbg25Xfk9UddMsWOzl2LE7PKm3POgyaZRQPx3mjQacAHnE7nL28pI6h/aB+ZNGipnI/wF8y55g8L6XpM0sJfKi1bE5tP5CnVzNVVAtn91Sl4wZaL5RaBVj2PHtQwfffaoVMA4QugkEGvwEaz3L1F+kSp3umaB091dy05jyHKCCNi0Y8XYie4Ukzb7fqxBYhNAq2QaGuoBekIpb+bBT5xY5zScsLUeqmN7tVtq2fqGYB8E8urcsze9qDvsul4T4ydGx9WxPz2JvIcSokiLHlTZlcI6pd4Fs8/J3SAh+K3gtNYV6X65s+l4MPO+3lvFEYFcaeRy1I3jwSk7mB38HC1mbhr1Kn5KDnZeGchGk6UbwEf+4Ntb4AB/2X2qsu5GN8xYj/cfC4PlqPPkd0IuZsXRjQWws5czaKn6fAlyFSpVE7snRUnvWVe7piCS2RQlYS+wKJ0He2o0C3RlaJ2kw3z0t7SZO8iidKLbC7OHecHwMoEsGsnpojgCKt1Bl0FbbtdH0D2w9FzsfPnumdFtDVc4cfQinaf/rRCc+JHL+CpBELTUuyKiYM6B1uCRoSJGkoNw8t8aJ2Tu8N4/QL1xBqwrkE4AA+Crk931ykdAe9oE0noSJK1LL5ccx0pXeSB/7e9LJB8TRzV6wgAdWe/x3LSgF86J4zftt7kgb79dx1jqvJqaMKm2IjAvINUIamahRSOsfplk2nEuhCFE+AetlBel33pAzF1LDFxWg77gWmgCW93zRLRjkP5Pr2NImYy6rC3t02L4rHLBwtd8IEQ6GbtP5F/ZIyTkILL0yK7goMuJpokdpNjRDxmHrYC9v6f91Ab/eieHMx4WesC754zjFX75ee05neSTD/TjRtn7b1C/gvbd0xoSCM5hfrCvomP84c313R9HyPi4mzeoOvY/q1UAhH2u7Hk4f9xoDngDstm7bRfJOOoLf6ceb4cmHQGbSfg3+7Lb2ZGioqQkjbMffvpu0wZ6jMpaJL2G83wF1oPqUb6JZN99qSg7QdjQtQM4/6OlwgwIdDBC3wW96kk7aTJ3/3vxzvZarAALguqtkDmPDUvfaLhXOnHGDY9ZaozztsMNypKGjsRVMmFmzkixUnKKUaPSIlmwGiDh0rUDDy0cgPM3bU0O/hiOrNSyFgqN+9dkrsf79HrrZBUun7D58UX/q7Llmdi0pcgLzq3xbJJot+BD3u8BnVlw9zFj9W91oLTbco3mtnBtJ0ezP/KWrVDDl7lSbc6QSFm76KlUuHo5sFCwbdrgSFKErbU1GHcFGAvt4JTDe7Do0udimx7gKgGdhYyYLCUNkMGP3kg+5KxYpO5+kG+koC068X77SUeItGG/cEEblUOhe+4l7MVGAvV88vxGsAPGiPOrOf/WCy7Y06gW4B79bdieQ6Nb/+rAMrxLGhXokFoH9eOBdAyFahtClQEGE1CRndQF/hh+Jzmr6l12sdMW2dqYm0kmIsUtt/+RW2bnCajpqeNbszvlTwAuC0Pf/Y0qqh9yAmmkwbnF7QPQaAlwN8fg70tG6gC3JYHlab0vqwU45SxWXPoH9ZJAHbjlVAoPu7PdbQ78o5vVkdQZf902gkBxH+/oZxlVX2nM61GvPjaC0nbQezYfCztKujMAbcpCPo1Nw3sJe6q4JDOFbOnfKp7dLRA+BIx3p1tGSRTpuOoJPdktoeZP+VZwPsvljhkiEvnNLQXlquNN1SKB1Bz+aSET/zlYyAXYtzgx6NxKqKocIJP/eGh8S6gk62vR2evBfNw5azEGZ5lYOOiZO02QPnRs834/6xvMci3UHPUnhi30XBflF33PMAB3xFFQOOcEumUtE+faiP7lusM9ZyEfGWIHG5yiuVxjvGoqD9O+5ZTPTfJjTd9iJCwZr8FJJTfmh9Det8JWKohY9zV2UA2WgAm0FMCkrDRe+SOyRZkw9gBe22sIpBy5vlDfFB67QFOAO8vZJAFwpQVH80w77bir6g4bcJDXczCiKs0DNbQMvlgPez4cDfqO281f1ZGMc5xw16VgG7QrCdF9T/q8Jxa997qlAcbWn5/R5JGIdIJrb93GpLdG9aRQVscxGTLecFEQVjchbJLBIxthqrEYmUwJZ7t1ZlnbNXxkXrCejxy2I/Wm7b3bldlGCbzgT0eCQjVM26l5aD0lmqtSSRTAJ6dJIKassBOEtelWyznwT0kMKWVDcyLc94aTnAZrn1km7yk4BeBo8dYZktzVrS8DUBPWwiIn8hZouXltt2nFguyrC/egJ6SHk6f/O/gh47JpmYp162OYcE9JCyal3vhoJOWu4wyVTSzs8J6BGJuVGAqem04QEmVZy0nG1zUvZJptoEuuBCfeSXqp4xtCe72z5wsOEMcGh4eznPX6d6Y8S5h/Dg5GtDtHDQoMnm5rlmfzv5d2t+7xwURKCO360wwrbNSVk37NFR07WYUwddY9WpVw9YTJVimVahOn6EZgzw24Qmk066rSzoKaemQ4NHfipXzIlq1XrDPuMvPG/aWx2yWVWqosiRmgXxxMtGVRGsHLclQqPqIN1sOrQ9BZvZUIaVLh1HesfUOIJW69p2fmwVmpWD6ea9y9wzK0woqZj9Xwd6drcyO2bNsvrn2IXVs5OnrpUk3rtNaG8ZdIPiDhuARFEjllSDskHh+Ivn2J418jm2FGm+0LD+T7cGrJi0mI71YdTAp9TyqVs65Y7KncdzYH9iynkSzGfWviB3kQao6I9DDhx2naRl2N/7yWPyPaJEc+PVoOkdOiRcnOw6D9FmNE6Rf8mZwzFn1hWybNk2cyYS0H3adLMnW3n2UUN7b+zVYu9oCZCxVhz7y9odO1A8UqxscCwRGtcE6haygd5fxRr17asHl/1kJs76yN6au5czB4F2s+ZJKGpcqLPfomMHAHmX0UsO3aBL2TIUoWLb1lOSaZ5ee9IRcE7vLA7n4dlMobnoCLrcfJc/AacO2t8gHTxzEITZBIBSrLS7MkDeseeUI8iTPv5x0dXZKXbscG+PMiyVEh3ZrM73VHvQJcX7fbMcDD67V7gBy2XQoEGi0wD52uuuE5dedpl8bv/+/eLnjz4qn4eMGTNGnN3QIBqM44nHH7cDr0V+vdLi9LyODrjBuOlc67IdHZZmAcT2vcF7yuJ7ATDAem3TJvn47r/9W/GrZ56R/8/mNFe+F68V0vKuTquLZyYBvThNtzSOAIdcZmgeNGzDc8/J44orrxTb3nxTvgeaCXAgv//97+XzU6dNE1OnTpXUjPdDM7/05S/3ZgDjdQD3ovG5SZMmSdC3bdsmz2Gn8Rpp9Wg1UPLo33g/Psetke70rq2mX2iA1dXVJcEjWsXNd9I0Ghj0OkDE5+rq6qznNsCWdzinATCY/vPZZ+XA+GNj8MiEgRoEncqeb2Dvb2DnQd/Zma/pCegB5Sq6saBz8bnPSbvJNd7K5Bg3nDSP3XT5WYB0wDYYmLOVJ7DdGCQA91dPP+3pzBVy6iqB4rXNvQNMAA0QCHCiWqJx0DB/P9d+Ozhke+k77HLjnDnioQcftCj7sssvl79N34HPwJxgcNkpHgxhGwgJ6AFF0uObhubZbKW8sRL0sWOlvSbNBaCSFQjgYcN6gQwgwQw0IJwG2V/ddVcv0yGUqcCxISBbJSFbwOQMp1YIbjo0DYcfIS8c1H2tstPFCAaNdPRUxGB3Livs3mqp6Y1cy6699lp5s+Fk2R0oL+FeeBjQwRJn+/jd//PDH9p9BixgXKkj6LoVUaQI3M8ZDhzonQC/VIVrQcACZQMIn5oZSjDIKoXidZxPvxna/dprr0kth4DSZ159dTAKq60V77//vgQcj88991zH9+H17u7uXs5ZUOk+eVJs2ZLX0hxf+OOE3gPQO0BArA4vGo5ZEJEOm/EZDBbu4TvafhUdfPaGG2Qip2hNN3wPSiixa0kLDRspaRmywTP/rEHvxQgY4r8Mk4DPA4i/+uu/dn0vQi0ADrAc6Lko+w+H0xaJLE9suo9QJwwAL/7ud1LbkNDBAJDhmwNT4DWADkEWLiy980iDyezEkfPpyIUB4PY775RMQdSN0M0JcMq8UX4+CnGILjKJI+ct/5c0D85XWPv6zttvS/pGrN2QTsvnEA20rl0b2oy4JXhA70ePHuXOHJyKrQnozgKnpwU3zm8CppCMGzdOxvoAHF48wj9oOAYChYCf+ZM/ifwi8Ft79+zhT8GzW5XQewHPnfLqkTiEBm3z70PMjkF105w5oRI2Xk6o7hSvHeijIwTdSeDkIXcfl4zpPeeeFhFupFdtoEvPPWpAnObQvWL3GLz4uQnoJaJ3onQn7z1W0HuHnE0J6M5OXCpq0HlhBYVUlI+3JVHi1nStKL5GJy0PMovmRw44TLRcqGJyzL71VYrXBfSr4nDi7JpOsbQEPUZNdwG9OQG9BJpun1LlU7MYELFSfG+7ntLFtusCeiYOz73DwXPn2h8nxctJHE1z8TW6AI7sWdApVL+eO9XFAQhu531UtYYSB+ZqFv625+wboEdN7TxG72LLkeyDIs6qGq7pLGHTnICunLizYwCdNN0lDJQv7oxR28Fc9NuMxeb1ddBTcWk62XOqnyeaZxm6VidnL2q59PLLTV+iq4u0PS3KnI8vN+gZ0sS47Dm+m5w3/AbL0MmNgPfv2xdv6Ka8ePwuY5y5fRn02XFRu1OMbpO2Umg69+LZQotmpfF9EnQZtzpMR0YeozvY9SzZ9Y6OePsbEei2iZ7Gvgg6AE9h9I+JeTqVNI6Bm+Xa7rawMSrfwpYEwm9eJMq4EKKc1bCzuc2L42ZD6tjcNgO3LaApKMq8oFqHljsr0aIJUblAT8VJ7XmJmcIO4no4kzAFDtmzKMFGpDBflGgLLl1Bb1LAy1JllDUB/Kg9eIh9jXpcIle2btvmVqCxSBfAywk6Rj4a7DUbGpmidiLQNnkYlB9FHXqcdhpMgjQuVdtyE4HWougx98Tq52QXSd2kXKC3K7qbr8IXxK0ZWgdOHi8OJG2iYgCWa8/TOhp0DvVt+e4+a3BkFzQTvP7TF8um/9QF+onc7ooJ6DZZro60on2kKdN8AMDDb1BLhgFMBN4+ufENhcK8QoIGwOPVBgB4zNp9ay86rWVrV5QPW7+AuiqDHqFdr+Fg9pLStmSroaF8MBDdkveOurhUb8a4TeQ37s2ov8sw8OxtvdElspLArQTQSaQ7fxPb/QhbYwD8jW1bZOdltOb02/SH2AIDx0c83soGwzq0AV1w1y2eG94noIcXmamqZzd6uqH106Xmm5vcUSP9XfsOit373pPPbZGDwVxO1JHfaL9VscgOlphZ6QN8HBk0+7Xv0ZKAHq2k1aFAdhbQrBwIwvk92HVB7aMC4Ipt0IswK4PvqjbQdVu12kROUhjZmAuT1ocMK9vBKkE37klADyayoAL7nYURFhu3hjyfFfjn2d++nIAek1ipWcS7xcpuaecPRgX6StsgCmO2EtDdqB0hURhveXO+AxdW2mgg2Zr5+5LpjVMS0D1EVpO4bVLrV7Zs35kHWATSStFBUBk/dmSe2UpA701/mShAZ9QeVcVju41BfAtzSDNCg9Jn3UCfZ9ryS1w3qy0C9Kg0fQflBoJr+iiewWtKQM+XZvxz06wrRLUJY65kAaPNgUuZs1SX6Ihbuxn7bynqwywSyeji0OkA+uywYVopQC9WbIN5XgI6s3VhHTidhZmt5gR05dXaHJ6qE2i6yj1osVxZixUuYXPtXDqK8LJLA/zFeeasL4Mu586nRwj6lmgzcnF48X1e06U3Wx9RkQKL0bWTKXJH5sFE8em+DHoj3ZAoZLOmWk5yfu46+zToUsJm4UjYPHqUNeYyZNulKnTCajv3Zfoi6JGP9jW5ee/1UYMehekYevoQLRin7KBH5bnDgVPA+KmBK0oOaxoZVCS9RyGP5xYWxAF4qy0ySEDXDPQVMXy99BF0XKLUZ0EH4Ip622Py3DeZPkO4AskpE8+mh1f1VdAjKypYvPw/6OHSmM51pc1vKEqGJY6cGaOzOrKitZw5cMtjOlfLOWQDLKH3colNy7Mx/tRSovhivfiOD48moEdhy5mWL4n55+ArtAFwLHUqLqzcGUceoe+Ajpu/6IeP0n8Xxazledr+uKbrzqsedGgb89iXlOhn4TNkwS6VDHxFgo6b/tAT/5/+O7/EPy+1/YkE9NI7b0rLW0Xp+7HJCAGJGp2ncqsKdBu1LirDKbTTQCvWoUtALz5EaxXlmzdfUckOXU0Fa/n8Mp4KNL1i165XFOiMTmXMXObTkRRfiWvXKwp0ViSxVIPTsSi+0ubZayoH8JfIW24XZeygzKSN2KbSKL5iQGc0ulKj06rI9iQVAzorYNBpA/pW89y2JKDH4bVH2EcmaoqvOC++nKD77vKreT27NDcbK6iUqtSgo1pmoXEcMo4WPLF4+ZPiz1vuLagpukxJush6m/lxFVbfP62cJ1zKjpFp41gnHOrdX1C9X7He6/5vfrXXB1lDgHYNQW81B6bZs7bQwg22wiXVVzS9WXgscEDMy+bILWErUXUEPSusalnfDh0tWV6ojnS1gi4rQO8ce5a4L32uPPD4wiGn570JWTf77BWrN28TekqrH7vOWAD1gU8ZxwJ1vAtLVyoGKLkjN2HQaeLCwUPkccOIkeK+hnPENanhNo3f4PbxFqFZIz6/dh0sNuuObxX6jhZl/lLVAjpGdgYPzqnrvV3GnWPOKuDE5a0qIc3Q1q47zbHjObvZmn7GUPHQeZPFM1OmiqXnnCeG9O9P92lxNYCOkYudEqRGq4vzLQ5N+zIagp7JAfyeg5ZvyMvPw6R9uz4tRg8YKP9/jsF++D/zfWK9xlJ47wC8EWC7afTGI4fz/m+WGR+1aBHyxVFjxP87uF9oSO/WoIZg4wF7H3p7O7KWs8b3+hKYOyjFb7KH6J5NqETQU8pGScBhu520/J3OY+Kn+/f2onRO69AE2H8MDrxfaYIuiZomboedNJ33wcG1kIY7mTlc49Hu7jTz7CsG9IwarWkCHBfrpOFL9u7CRcrX5xkaMMa4Ia9/dFS8a4IrHT/YP0hQ01DC/ENB4dR+wWD3pU24PjDaT/dJJUDPueVxhKm1MdyAxWr0yxH97fqGXoAfOHFcXhjROl7nTACQCWguowcM4I6hLprumV2rHzvScvBO9xi4xGivH/0wpcK6mSLimv7aCDV7rmDN8XDyGLVcO6HRT3/wnlhlHHhMtvovRvnbZ21MjhZTGmn6JsE6RlFp9pxZV1h963kHig/VdReSb49vEN/a8Q5MWaOK4eeLCNfp9Qtps5sVDVkUB2cEQNrtFhwU2G4CGx7sHWM+5kj7bvLvhiOnnDktdidWgvNYgOs+cOIENLRXQobTO+5Ly7h66bgVEtwnBTw91a6ue2VYzS/GSBKFP2Ycs7jWQasvPv0MCSRpOKj8u7t3SA0/0dMjLxqZOBzDawcE+uE3DFsPe6+SIbrQO67/5tP710oTRWy0+3iX/Nt1/EQ+mKe6pQLgWkYPHMjZK08G1tSIzww/U5qDN499hHtHqduvGcdkpbBb49b0tEqMNHNPFLZ3vwGs8jot8Gcb9A4njBw1es4vlVeQpgMMGWch0WL3XUi76f84fxWWWYyHEM7Noyetx/3FZ+k7ldAS6vVB6L9fEArjFH5NakQvisKJQaPtFOfnwioYdKHsbhrzCV607Qa+kw/k9BmuXDYh+vcE3w+9I/RqIfD+OX2OBNyJlsbX1ckBAQZ45egRSee4iH9NTwxM5RVE7xRNNOKe2CeQ3EKz6WcME38s/YDj0hSAwp873CHGGJSP+8gFivT9PTuJ5qXyTB86VMwwvgMmAr4Eo3841Sgp6ywW9GVE5y1n1Us77CdWxkl/wrDtG4yLwKh8xdB82Kew8puOQ0b83qkj6MPlDe/Xr9fkkRf4Vw5LyYHy+tGjcgBsOJyV92zyaYOlXYd5fOK9gxJsyZjjTBwwaPB//MW9xXvf6erE+9LK1/qFG/D9PSi9RWrqhInSQQt0FwzNJuBxMf0UU4SRpz94n2zaIqHX3DpsawuctJtGjg78YTAEtP64ASy0mbT+jY8+lPdPZusMoL/+sXGODAvAcW9xv1/58EM4i2OVs/cLp9+rKeC0zaPUYJCwigs+90XluPHYvBgB2MxX0AlwAj3U9cm5CVVrAPo+oJxjYlnYfD/3G8kwJU3K7PgGHYCnMHqC0JVbhgkXgRsCei5WVr1v5bRbNQS9kecjwggcQfhNJBgIQTAA8Oz9c4OA3kyARSGk7cXeEHwOzowSHYsjLUECiiVUihKeni4GA9h5+2D0Ah1vTJke5tBIbgR9D25GEArE++HI4GCi9b4flEmzTxcHHeRhlO6cQVahSsbpdafce4ZoJirBAMKoBYjwMO3fjTDswPHj0o4h0YMQxD5AyM4JvfLueTadrhXn/d1d7dK5QjIqyL3EZ4kpilU6r3yIE+gNRC1RygRj9OFiMGWKkiloAmy8PZHTO54dKulKTTfqSu9tys9I5w1m49pwuM1HOLJbV6dF7RFNJaftPlBtIbsCeolqDptCDVAXMktci83CggHWQLvA0JAhRhiC/0O7l+zdTVoeZ1fIsIIp0GXGdWWc6BqHH/CpjoBNIwcWlcDi/tlCL9DTZE9hmxAChE2fQvarnPE71kUNFLPPHCk12en7KaXLnL+siGFuOUJpV+cH0Bc42VMCv1DKlZShWKbF5x/ct9ceiXmCnuKO1DfeeSvURAlGHXLmROMAGBdMYQVOEu95w3id7LkD5SNMmy/0rXu3n2trIfAxmDGonQpMoooeyLdw8oFc6R3xoargkHSM5Mo1w4ZbuXU/YQeffOGzbLIuTlXO2GaN7JqDGaQVFQK2G/hpYZudpGTTPEOhcJ+jCI0BMAAHk1CJGr7fryMHRykDsPBBssE4SYBI8TKlVCcYThnmfFER8q5yQuyaSrZsv6HFMBkumgyQd4hcP5msqA7Bdd0mzJYpi+2aj8EPJUDms1j/yV5wge9ScxTCKZHVz8Wmv0oZOZoShVZuPNJhTQz4CRtgr2G3MSAe3P8HO9jLlRa3ir4lLcJhQQPVE/5OzZv7LSODaUR4SDULqJ9HdHT79q1E7zCLS7xAhyBvu4ySNHabLmNJpdVvMCAvUNqPH8XnnOaNFdi6TZiUWqz72zuxYuYzvEAHBri3xLy8mphpPRjzIj+azjV+GdEROWDQXi8akjF49gN7VioBu/f9fUq4pErdCk+cikspGsAs33d37SDAKdppCwI6j/MW8MQDgMfImsASCIgv8WMOlR0J2O6SUlTfXMhMorDCnq2j16jIkq8hKAR4UGlWtr7Hx3FIXUw6wdU33R+i+2coUo+h6a73F6+1nFXf88yUqT33pc+1v/dVN/YIoulOtJRRf6+yeak7VJjVluBYlNYvUwNAMihCZJmtHJijeGi1WVtwVNK8bUZPt9rBRHwKFGod12yDxqU248BjB+1flrBq9YD/VAETuk6Ff4FnHfsl97ZiBgBJNjGfiQSW/xVgAMkWcFCGKJWfAAAAAElFTkSuQmCC";class mg extends Ua{constructor(e,t){const n=Ne()({iconPosition:"right",topMargin:20,bottomMargin:20,phetioType:mg.OopsDialogIO},t),s=new pi(e,Ne()({font:new ki(20),maxWidth:600,maxHeight:400},n.richTextOptions)),r=n.iconNode||new ba(d_,{maxHeight:132}),a=new _i({spacing:20,children:n.iconPosition==="left"?[r,s]:[s,r]});super(a,n),this.disposeOopsDialog=()=>{s.dispose()},typeof e!="string"&&this.addLinkedElement(e)}dispose(){this.disposeOopsDialog(),super.dispose()}}mg.OopsDialogIO=new ui("OopsDialogIO",{valueType:mg,supertype:Ua.DialogIO});class bZ extends mg{constructor(e,t){const n=Ne()({richTextOptions:{font:new ki(16)},title:new kt(mZ,{font:new ki(28)}),tandem:R.OPT_OUT},t);let s=`${gZ}<br><br>`;e.forEach(r=>{s+=`${r.key}=${r.value}<br>`}),s+=`<br>${yZ}`,super(s,n)}}const c3="data:audio/mpeg;base64,//swxAAABEw23pTEgDl2DiczO0AALSjcthgsLBXEsG4NyeLwnEsG4NxHJ4jn92FwTAGBsnpBgAAAAQBAGQ6EAAAABvIDAOYYEoLAkYzitYnDKoTjfBJjYPrz3Sv6fQ6UpkyHJrgVpj+gGB6coHn6gERAB7vA5psDBhQMKBA3sQG0Rm/DBYuAnGAXNAOCgBBwyn0PJlRAC4AA6amr//syxAOBCFRXRN3MADEPCqaOuYAGMoWIgCYUIZpi6HoVgZtMRkolmKgeKgQwyHBkBl0Xihp41hlrBVweOQOE80Zsc1/2s4rayxxw+M3LVZd4KAsACb4OBCv0bBGCzHAuNt9Y3KPjAQ7EhkPBUGgwtMYFBTL4El8Zi2KyRLLT3mp7Ou/rGzytf/fOY0vcTN///W7/8jVnVDB3ZVeYiP/7MsQEAAikW3XZjAAQ/Yrmz7rwBpkAAAAACOlUi2kT+JSpXpJpfA7TYbxAgOINiEti4FzsveeNP0nIjahW7k4JOfl1Uk3d/WH+4NBFJBR0le2SxAAA4SYi0lNm/FADABRm0lUGUZYGHQQmGQPoippMPf2H2cs5nQ5bU4ZoBEXpXRq11hyxeJb/2fRqvBsfiv6lAAIBCMUfIOILiVr/+zLEBYIICEcoTPRlsQcI5V2PbIZ78mSCXnxannEwaGJxDGH5SAUG0yAKAy2E1JqRU2TLHBVnIhJg62sJnBcEywiU9P//////+gJJbsYCtxb9oqmAdMG+MA0U8xSlAT74UzNHM3OQMULGqwlVfctlEvYlHHwUVuZ38cv5n+pGtCdPb3d/tp/kf7Ef6QA7qAC0w2k0+dMZo8wSUF4z//swxAiDCBg7Hmz7ZFEUCeVJnuCWkI+DKxCcMAsL86TrM7BjBAEsCq6xGINrTtgedABQPWCkKF0VHfq3iyk/29/d+j+kTzAVXVOsI2cAHHemYoGUdovgaTDIZAgyICWMSAgPkACc9pRnvsALNoA2DKANRTokENuW/FJuVv/fpJZh/0gRo+/93/+hCAAABttAAADVVNngWELypUAE//syxAkASXRdNa7kyaECiKVNz2DINDC6FTP5NjLhcimMLMjEJrJmKEvZayRSgaolVlnrpetjjXS8AoiYYbDXtZ8sM4VFFcCS5ynESUdbUGqI2Bg+6xfwaBwGMJjFFHuNkY/I4xqrB1mEQDaPAGHLIoYFCGSK+pVduqrYWyQ2dJxldRpECHs61Na8FUhmpfpVIAAoAa0lalExpdKqQ//7MsQGgwc4RyRu6ikQ7AmljdyJLiLBprzBgxWp/krY7iMGPUyY5IGix5l+K/2MchyggJ/yKgKobD+bidfd////uIEtgAWgX2i8kL5lnDBERTFl+zGKOzU0kz50ASqPzWHeh63ZnnurVbECaxuKU2dfo8VZq/rW+j5H//5NAAAZDAATaTEg6Kp0BgMhUhTWovzId0z6caT9bHkCuBn/+zLEEAJHPEspLuXoMSsKZqXN5Rep8UD9dF+Wl7B8ElgZMMCoY0GF/WnQJX/70k/0DoMlrQyrEhAYFF5kmCGHBQdBMxlwEa7anUnZkAkYaKghIARaXzRoSDBQBZ8EVLpMhBO91FpKDuRJ1LICSdQJqQg+R4WsQlsTgmAMGkYAAAZFUsqNxRxF4mnYmMlGhFDgYNfzI0MDU90uIqeV//swxBGAR0xRP01x6HjDCOZZvqUXzBCfdUqWbbG5bl5dkefgddi8vWhyNhLoBYB0mgQKzlPxMIeBzRpUy+qOeIjAgNzGSdQgRVNn9e6vNOPDRUsP+U4bV9oaaH5sVQAkO2AAP02sHUCv3kMFCwRwwzSpDrw3Q+MmMkBxtBAKqxAYP0WZB4VBYm32/L8+sU+z7JHr9d31iBYAEAXy//syxB8CBwRHKu51KHDbBiSdvqTWHAM7k3yLhip8cGdGBALmjQZkQWGodahCKDwFuoFQgLmGRo0Hh9ZfGtt1//////p/1gRQAACxUPq96U4olSJhwpm4vWYW1Zh43mOIPH02gGaoPgYWB4Fk+mXw41aKxKvATUrRA9kqf+0cAAD4QFdUVTdGomRRUayghmGwnmxWYGCwf+pSZGBUYP/7MsQrg4bgMxZsc6RQ3QZiTY50ikganAli0xkb9yagpqZm3btX/////Z9a6gABQADQN/GiOOtAElMOipM6VgMiitOVSIMFUGM0sBjzA7BlAwECB6GMPwLFqsqo46+YuG+3////9wYocYCOKf8rto0gkFBYpmK+CayRR3U5DJDH/d2AHhSbAghaGoPp8Ji1Xl3nR2iOX/7v//Te75X/+zLEOAMHJDEKbHfEUOQGYM3O5QbZ9NUAAAzJhQAFhZC38MVneQIhx1MXpAwIDjBRTPCak/XUGZynBjWZyQdAh1e9v2///oCFQEaWAJxUy9lZQogjXdoMfzQ7sGzA4cjjXkj7rAsBRuMaBdbGcq2lua7Xsw4R2AAAACpNgAAA/LcqPtK2IGtGb+BBMCpCFAWZopIsWU1nBWCxzVxo//swxEKCRfAvDU5gSnC9hV+dzukGUTnsChWUBUcDE3tcKZ0hEAAciVRdHwwrAzDAkDDSZFTHM4TWIsTE0YDCD9j2QgBFgqBmwCtlxWnWo1zC3ESX2XUAAAAvXYAAAEAJLlyyYQPDBrwcje03PcWON+7Df66v7yq1xhkQ07ybhCr6wgAAFNsAJBAEDQbMOmAPjSzJMzngCgMe5kHE//syxFaCRoxdBazwRvDJBh1djuyU100ZKfoePxSuIm8nBGK7N4tLPWmPlTSAApNtgAAA6T7N+1JuNwqCmFuYQIH2boescuTO0nTGLYBUBDW6Hrruga6YXYVp09C6vXvJkAABXiBbeiQzlFlruCncpUrEzE5FzlU1x5JFzdEPYFyiCEtx6Kh60Za5VaoAAAMuGDsGVK0qzl9y2xgKaf/7MsRnAEVoRv2jaMUwwAoedY0w1hvawQy/RtQA5hkXR8f8xm2KhakvcOsMYEmG9NLRqj5thOzI6CAFDsxiecngMp58YhlVCjxL8kQLtUNODkJRZNFSdc5DVji+XTDWy1lhqzXv7Km/4AAAABDpXiF5dAHSRMMNihDQgxMSBqiaUVtDVK5GRCW2ld1oAA4B2N8xFczqTebMDVDXew7/+zLEfQDGiEztrOmIsK+H3fj8vF6X/MZJRgPM24T7hIWXyYMDlqQZvN1LzLq8u8uwAAAAFSl5r9VDxE8xprMemTbuM8lONdMjKNo5M1ASILCYAAbFCBOqCsy7oAAE5V0MpMIQzjrk4TZPjVAMaL3iMxXcMXQOuau7uwAAAABI5b3O0kTLKgXBJkXchJOiU5DbtQyoMJTuiABi1SHA//swxJCAxmw6uoz15OCxBxr5jL0W4Ubnbhp0ynbEyeB7xga4BKYQ+IQGQ1lrBl5B1GZtMQzGzzwjxoV5EkYKoHkmDgAHhihOVxdMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxKQAxHwnHcxh4XiwBRfRneCfVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQxMQU1FMy45OS41qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7MsTAAMVwKufMbSFweQQbuN3kV6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqTEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+zDE3wDD2CDLzGcIOPSERJHP7Jyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+zLEvAPAHAIAAQAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//syxLuDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",_Z=bs(gt,c3),AZ=_n.createLock(c3),Jp=new _s;let nC=!1;const Uv=()=>{nC||(AZ(),nC=!0)},wZ=i=>{Jp.audioBufferProperty.value===null&&(Jp.audioBufferProperty.set(i),Uv())},SZ=i=>{console.warn("decode of audio data failed, using stubbed sound, error: "+i),Jp.audioBufferProperty.set(gt.createBuffer(1,1,gt.sampleRate)),Uv()},sC=gt.decodeAudioData(_Z.buffer,wZ,SZ);sC&&sC.then(i=>{Jp.audioBufferProperty.value===null&&(Jp.audioBufferProperty.set(i),Uv())}).catch(i=>{console.warn("promise rejection caught for audio decode, error = "+i),Uv()});class PZ extends Jb{constructor(e,t,n){super(Jp,n),e.lazyLink(s=>{s!==t&&this.play()})}}const rC=new Fe(new He("JOIST/simTitleWithScreenNamePattern",{en:"{{simName}} — {{screenName}}",af:"{{simName}} —{{screenName}}",ak:"{{simName}} — {{screenName}}",am:"{{simName}} — {{screenName}}",ar:"{{simName}} — {{screenName}}",ar_KW:"{{simName}} — {{screenName}}",ar_LY:"{{simName}} — {{screenName}}",ar_MA:"{{simName}} — {{screenName}}",ar_SA:"{{simName}} — {{screenName}}",ar_SY:"{{simName}} — {{screenName}}",ay:"{{simName}} — {{screenName}}",az:"{{simName}} — {{screenName}}",be:"{{simName}} — {{screenName}}",bg:"{{simName}} — {{screenName}}",bn:"{{simName}} — {{screenName}}",bs:"{{simName}} — {{screenName}}",ca:"{{simName}} — {{screenName}}",da:"{{simName}} — {{screenName}}",de:"{{simName}} — {{screenName}}",ee:"{{simName}} — {{screenName}}",el:"{{simName}} — {{screenName}}",es:"{{simName}} — {{screenName}}",es_ES:"{{simName}} — {{screenName}}",es_MX:"{{simName}} — {{screenName}}",es_PE:"{{simName}} — {{screenName}}",eu:"{{simName}} — {{screenName}}",fa:"{{simName}} — {{screenName}}",fi:"{{simName}} — {{screenName}}",fo:"{{simName}}-{{screenName}}",fr:"{{simName}} — {{screenName}}",ga:"{{simName}} — {{screenName}}",gl:"{{simName}} — {{screenName}}",gu:"{{simName}} — {{screenName}}",ha:"{{simName}} — {{screenName}}",hi:"{{simName}} — {{screenName}}",hr:"{{simName}} — {{screenName}}",ht:"{{simName}} — {{screenName}}",hu:"{{simName}} — {{screenName}}",hy:"{{simName}} — {{screenName}}",ig:"{{simName}} — {{screenName}}",in:"{{simName}} — {{screenName}}",is:"{{simName}} — {{screenName}}",it:"{{simName}} — {{screenName}}",iw:"{{simName}} — {{screenName}}",ka:"{{simName}} — {{screenName}}",ki:"{{simName}} — {{screenName}}",kk:"{{simName}} — {{screenName}}",kn:"{{simName}} — {{screenName}}",ko:"{{simName}} — {{screenName}}",ku:"{{simName}} — {{screenName}}",ku_TR:"{{simName}} — {{screenName}}",lg:"{{simName}} — {{screenName}}",lo:"{{simName}} — {{screenName}}",lt:"{{simName}} — {{screenName}}",lv:"{{simName}} — {{screenName}}",mg:"{{simName}} — {{screenName}}",mi:"{{simName}} — {{screenName}}",mn:"{{simName}} — {{screenName}}",mr:"{{simName}} — {{screenName}}",ms:"{{simName}} — {{screenName}}",mt:"{{simName}} - {{screenName}}",nb:"{{simName}} — {{screenName}}",ne:"{{simName}} — {{screenName}}",nn:"{{simName}} — {{screenName}}",ny:"{{simName}} — {{screenName}}",om:"{{simName}} — {{screenName}}",pl:"{{simName}} — {{screenName}}",pt:"{{simName}} — {{screenName}}",pt_BR:"{{simName}} — {{screenName}}",qu:"{{simName}} — {{screenName}}",ro:"{{simName}} — {{screenName}}",ru:"{{simName}} — {{screenName}}",rw:"{{simName}} — {{screenName}}",se:"{{simName}} — {{screenName}}",si:"{{simName}} — {{screenName}}",sk:"{{simName}} — {{screenName}}",sl:"{{simName}} — {{screenName}}",sn:"{{simName}} — {{screenName}}",sp:"{{simName}} — {{screenName}}",sq:"{{simName}} - {{screenName}}",sr:"{{simName}} — {{screenName}}",st:"{{simName}} — {{screenName}}",sv:"{{simName}} — {{screenName}}",sw:"{{simName}} — {{screenName}}",ta:"{{simName}} — {{screenName}}",te:"{{simName}} — {{screenName}}",tg:"{{simName}} — {{screenName}}",th:"{{simName}} — {{screenName}}",ti:"{{simName}} — {{screenName}}",tk:"{{simName}} — {{screenName}}",tl:"{{simName}} — {{screenName}}",tn:"{{simName}} — {{screenName}}",tr:"{{simName}} — {{screenName}}",tw:"{{simName}} — {{screenName}}",uk:"{{simName}} — {{screenName}}",ur:"{{simName}} — {{screenName}}",uz:"{{simName}} — {{screenName}}",vi:"{{simName}} — {{screenName}}",wo:"{{simName}} — {{screenName}}",yo:"{{simName}} — {{screenName}}",zh_CN:"{{simName}} — {{screenName}}",zh_HK:"{{simName}} — {{screenName}}",zh_TW:"{{simName}} — {{screenName}}",zu:"{{simName}} — {{screenName}}"},R.OPT_OUT),R.OPT_OUT);class vc{constructor(e){this.inclusions=e}size(){return this.inclusions.length}includes(e){return this.inclusions[e]}apply(e){return e.filter((t,n)=>this.inclusions[n])}inverted(){return new vc(this.inclusions.map(e=>!e))}getIncludedIndices(){return ie.range(0,this.size()).filter(e=>this.inclusions[e])}toString(){return`C[${this.inclusions.map(e=>e?"1":"0").join("")}]`}equals(e){return this.inclusions.length===e.inclusions.length&&ie.isEqual(this.inclusions,e.inclusions)}static empty(e){return new vc(ie.range(0,e).map(()=>!1))}static full(e){return new vc(ie.range(0,e).map(()=>!0))}static combinations(e){const t=[],n=[];return function s(r){r===e?t.push(new vc(n.slice())):(n.push(!1),s(r+1),n.pop(),n.push(!0),s(r+1),n.pop())}(0),t}static forEachCombination(e,t){const n=[];(function s(r){r===e.length?t(n):(s(r+1),n.push(e[r]),s(r+1),n.pop())})(0)}static combinationsOf(e){const t=[];return vc.forEachCombination(e,n=>{t.push(n.slice())}),t}}function TZ(i,e){if(e<i)return[];const t=new Array(e-i+1);for(let n=i;n<=e;n++)t[n-i]=n;return t}class Ih{constructor(e){this.indices=e}size(){return this.indices.length}apply(e){if(typeof e=="number")return this.indices[e];{if(e.length!==this.size())throw new Error(`Permutation length ${this.size()} not equal to list length ${e.length}`);const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[this.indices[n]];return t}}inverted(){const e=new Array(this.size());for(let t=0;t<this.size();t++)e[this.indices[t]]=t;return new Ih(e)}withIndicesPermuted(e){const t=[];return Ih.forEachPermutation(e,n=>{const s=this.indices,r=s.slice(0);for(let a=0;a<e.length;a++)r[e[a]]=s[n[a]];t.push(new Ih(r))}),t}toString(){return`P[${this.indices.join(", ")}]`}equals(e){return this.indices.length===e.indices.length&&ie.isEqual(this.indices,e.indices)}static identity(e){const t=new Array(e);for(let n=0;n<e;n++)t[n]=n;return new Ih(t)}static permutations(e){const t=[];return Ih.forEachPermutation(TZ(0,e-1),n=>{t.push(new Ih(n.slice()))}),t}static forEachPermutation(e,t){p3(e,[],t)}static permutationsOf(e){const t=[];return Ih.forEachPermutation(e,n=>{t.push(n.slice())}),t}}function p3(i,e,t){if(i.length===0)t(e);else for(let n=0;n<i.length;n++){const s=i[n],r=i.slice(0);r.splice(n,1);const a=e.slice(0);a.push(s),p3(r,a,t)}}let xZ=class extends xt{constructor(e){super(-2e3,-2e3,6e3,6e3,e)}};class EZ extends xZ{constructor(e,t){const n=Ne()({fill:"rgba( 0, 0, 0, 0.3 )",pickable:!0,phetioReadOnly:!0,phetioEventType:vi.USER,visiblePropertyOptions:{phetioState:!1}},t);super(n);const s=r=>{this.visible=r>0};e.lengthProperty.link(s),this.addInputListener(new Rr({tandem:R.OPT_OUT,phetioReadOnly:n.phetioReadOnly,fire(){(!phet.chipper.isFuzzEnabled()||ol.nextDouble()<.005)&&e.get(e.length-1).hide()}})),this.disposeBarrierRectangle=()=>{e.lengthProperty.hasListener(s)&&e.lengthProperty.unlink(s)}}dispose(){this.disposeBarrierRectangle(),super.dispose()}}const aC="phet.sim.launchCount";function VZ(i){let e=null,t=null;try{e=self.localStorage.getItem(aC)}catch(n){console.error("Error accessing localStorage:",n)}e?t=parseInt(e,10)+1:t=1;try{self.localStorage.setItem(aC,pd(t,0))}catch(n){console.error("Error accessing localStorage:",n)}return new oi(i.value+" (Run "+t+")")}class kZ{constructor(){this.backgroundColorProperty=new Mt(ct.BLACK),this.navigationBarDarkProperty=new Dt([this.backgroundColorProperty],e=>e.equals(ct.BLACK)),this.navigationBarFillProperty=new Dt([this.navigationBarDarkProperty],e=>e?ct.WHITE:ct.BLACK),this.navigationBarTextFillProperty=new Dt([this.navigationBarFillProperty],e=>e.equals(ct.BLACK)?ct.WHITE:ct.BLACK)}reset(){this.backgroundColorProperty.reset()}}class CZ{constructor(e){this.windowSize=e,this.samples=new Array(e),this.sampleIndex=0,this.total=0,this.numSamples=0,this.clear()}clear(){this.total=0,this.numSamples=0;for(let e=0;e<this.windowSize;e++)this.samples[e]=0}getRunningAverage(){return this.total/this.numSamples}isSaturated(){return this.numSamples>=this.windowSize}updateRunningAverage(e){return this.numSamples=Math.min(this.windowSize,this.numSamples+1),this.total-=this.samples[this.sampleIndex],this.total+=e,this.samples[this.sampleIndex]=e,this.sampleIndex=(this.sampleIndex+1)%this.windowSize,this.getRunningAverage()}}const oC=1024*1024;let lC=!1;class Hm{constructor(e){const t=Ne()({windowSize:2e3,memoryLimit:phet.chipper.queryParameters.memoryLimit},e);this.memoryLimit=t.memoryLimit*oC,this.runningAverage=new CZ(t.windowSize),this.lastMemory=0}measure(){if(!self.performance||!self.performance.memory||!self.performance.memory.usedJSHeapSize)return;const e=self.performance.memory.usedJSHeapSize;this.lastMemory=e;const t=this.runningAverage.updateRunningAverage(e);if(this.memoryLimit&&this.runningAverage.isSaturated()&&!lC&&t>this.memoryLimit&&e>this.memoryLimit*.5)throw lC=!0,new Error(`Average memory used (${Hm.memoryString(t)}) is above our memoryLimit (${Hm.memoryString(this.memoryLimit)}). Current memory: ${Hm.memoryString(e)}.`)}static memoryString(e){return`${Math.ceil(e/oC)}MB`}}const DZ=ie.hasIn(self,"phet.chipper.queryParameters.colorProfile")?phet.chipper.queryParameters.colorProfile:Ha.DEFAULT_COLOR_PROFILE,IZ=ie.hasIn(self,"phet.chipper.colorProfiles")?phet.chipper.colorProfiles:[Ha.DEFAULT_COLOR_PROFILE],LZ=new Cf(DZ,{tandem:R.GENERAL_VIEW.createTandem("colorProfileProperty"),phetioFeatured:!0,validValues:IZ});let ky=null;const MZ="PREFERENCES:";class Il{constructor(){this.enabled=!0,this.registedProperties=[];try{self.localStorage.setItem("test","test")}catch(e){if(this.enabled=!1,e instanceof Error)if(self.navigator.userAgent.includes("Safari")&&!self.navigator.userAgent.includes("Chrome")&&e.message.includes("QuotaExceededError"))console.log("It looks like you are browsing with private mode in Safari. Please turn that setting off if you want to use PreferencesStorage");else throw e}}registerToLocalStorage(e,t){const n=`${MZ}${t}`;self.localStorage.getItem(n)&&(e.value=JSON.parse(self.localStorage.getItem(n))),e.link(s=>{self.localStorage.setItem(n,JSON.stringify(s))}),this.registedProperties.push(e)}static register(e,t){return phet.chipper.queryParameters.preferencesStorage&&(ky||(ky=new Il),ky.enabled&&ky.registerToLocalStorage(e,t)),e}}const hC="audioModel",uC="visualModel",cC="inputModel";class gg extends rn{constructor(e={}){const t=phet.chipper.queryParameters,n={...Ne()({tandem:R.OPT_OUT,phetioType:gg.PreferencesModelIO,phetioFeatured:!0,phetioState:!1,phetioReadOnly:!0},e),simulationOptions:Ne()({tandemName:"simulationModel",customPreferences:[]},e.simulationOptions),visualOptions:Ne()({tandemName:uC,supportsProjectorMode:!1,supportsInteractiveHighlights:t.supportsInteractiveHighlights,customPreferences:[]},e.visualOptions),audioOptions:Ne()({tandemName:hC,supportsVoicing:t.supportsVoicing,supportsTier1Voicing:t.supportsTier1Voicing,supportsSound:t.supportsSound,supportsExtraSound:t.supportsExtraSound,customPreferences:[]},e.audioOptions),inputOptions:Ne()({tandemName:cC,supportsGestureControl:t.supportsGestureControl,customPreferences:[]},e.inputOptions),localizationOptions:Ne()({tandemName:"localizationModel",supportsDynamicLocale:!!Mr.availableRuntimeLocales&&Mr.supportsDynamicLocale&&phet.chipper.queryParameters.supportsDynamicLocale,customPreferences:[],includeLocalePanel:!0},e.localizationOptions)};super(n),this.simulationModel=n.simulationOptions;const s=n.tandem.createTandem(uC);this.visualModel=an({interactiveHighlightsEnabledProperty:new Qt(phet.chipper.queryParameters.interactiveHighlightsInitiallyEnabled,{tandem:s.createTandem("interactiveHighlightsEnabledProperty"),phetioState:!1}),colorProfileProperty:LZ},n.visualOptions);const r=TI.isSpeechSynthesisSupported()&&(phet.chipper.locale.startsWith("en")||phet.chipper.queryParameters.supportsDynamicLocale&&ie.some(Mr.availableRuntimeLocales,f=>f.startsWith("en"))),a=wu.audioAllowed,o=n.audioOptions.supportsVoicing&&r&&a,l=n.audioOptions.supportsTier1Voicing&&r&&a,h=o||l;this.audioModel={supportsVoicing:o,supportsTier1Voicing:l,supportsAnyVoicing:h,supportsSound:n.audioOptions.supportsSound&&a,supportsExtraSound:n.audioOptions.supportsExtraSound&&a,audioEnabledProperty:wu.audioEnabledProperty,soundEnabledProperty:io.enabledProperty,extraSoundEnabledProperty:io.extraSoundEnabledProperty,voicingEnabledProperty:$i.enabledProperty,voicingMainWindowVoicingEnabledProperty:$i.mainWindowVoicingEnabledProperty,voicingObjectResponsesEnabledProperty:pu.objectResponsesEnabledProperty,voicingContextResponsesEnabledProperty:pu.contextResponsesEnabledProperty,voicingHintResponsesEnabledProperty:pu.hintResponsesEnabledProperty,voicePitchProperty:$i.voicePitchProperty,voiceRateProperty:$i.voiceRateProperty,voiceProperty:$i.voiceProperty,toolbarEnabledProperty:new Qt(!phet.chipper.queryParameters.voicingRemoveToolbar,{tandem:n.tandem.createTandem(hC).createTandem("toolbarEnabledProperty"),phetioState:!1}),customPreferences:n.audioOptions.customPreferences,tandemName:n.audioOptions.tandemName};const c=n.tandem.createTandem(cC);if(this.inputModel=an({gestureControlsEnabledProperty:new Qt(!1,{tandem:c.createTandem("gestureControlsEnabledProperty"),phetioState:!1})},n.inputOptions),this.localizationModel=an({localeProperty:Mr},n.localizationOptions),this.audioModel.supportsExtraSound,this.addPhetioLinkedElementsForModel(n.tandem,this.simulationModel),this.addPhetioLinkedElementsForModel(n.tandem,this.visualModel,[{property:this.visualModel.colorProfileProperty}]),this.addPhetioLinkedElementsForModel(n.tandem,this.audioModel,[{property:this.audioModel.audioEnabledProperty,tandemName:"audioEnabledProperty"},{property:this.audioModel.soundEnabledProperty,tandemName:"soundEnabledProperty"},{property:this.audioModel.extraSoundEnabledProperty,tandemName:"extraSoundEnabledProperty"},{property:this.audioModel.voicingEnabledProperty,tandemName:"voicingEnabledProperty"},{property:this.audioModel.voicingMainWindowVoicingEnabledProperty,tandemName:"voicingMainWindowVoicingEnabledProperty"},{property:this.audioModel.voicingObjectResponsesEnabledProperty,tandemName:"voicingObjectResponsesEnabledProperty"},{property:this.audioModel.voicingContextResponsesEnabledProperty,tandemName:"voicingContextResponsesEnabledProperty"},{property:this.audioModel.voicingHintResponsesEnabledProperty,tandemName:"voicingHintResponsesEnabledProperty"},{property:this.audioModel.voicePitchProperty,tandemName:"voicePitchProperty"},{property:this.audioModel.voiceRateProperty,tandemName:"voiceRateProperty"}]),this.addPhetioLinkedElementsForModel(n.tandem,this.inputModel),this.addPhetioLinkedElementsForModel(n.tandem,this.localizationModel,[{property:this.localizationModel.localeProperty,tandemName:"localeProperty"}]),h){$i.enabledProperty.value=phet.chipper.queryParameters.voicingInitiallyEnabled;let f=!1;if(Mr.link(g=>{const v=$i.voicingSupportedForLocale(g);$i.enabledProperty.value?($i.enabledProperty.value=v,f=!0):f&&v&&($i.enabledProperty.value=!0,f=!1)}),$i.enabledProperty.link(g=>{Eo.enabled=g,!g&&Eo.clear()}),phet.chipper.queryParameters.voicingInitiallyEnabled){const g=Cn.multilink([$i.voicesProperty,$i.isInitializedProperty],(v,A)=>{A&&v.length>0&&($i.voiceProperty.value=$i.getEnglishPrioritizedVoices()[0],Cn.unmultilink(g))})}pu.objectResponsesEnabledProperty.value=!!phet.chipper.queryParameters.voicingAddObjectResponses,pu.contextResponsesEnabledProperty.value=!!phet.chipper.queryParameters.voicingAddContextResponses,pu.hintResponsesEnabledProperty.value=!!phet.chipper.queryParameters.voicingAddHintResponses}phet.chipper.queryParameters.printVoicingResponses&&$i.startSpeakingEmitter.addListener(f=>console.log(f)),this.registerPreferencesStorage()}registerPreferencesStorage(){this.visualModel.supportsInteractiveHighlights&&Il.register(this.visualModel.interactiveHighlightsEnabledProperty,"interactiveHighlightsEnabledProperty"),this.audioModel.supportsAnyVoicing&&(Il.register(this.audioModel.voicingObjectResponsesEnabledProperty,"objectResponsesEnabledProperty"),Il.register(this.audioModel.voicingContextResponsesEnabledProperty,"contextResponsesEnabledProperty"),Il.register(this.audioModel.voicingHintResponsesEnabledProperty,"hintResponsesEnabledProperty"),Il.register(this.audioModel.voiceRateProperty,"voiceRateProperty"),Il.register(this.audioModel.voicePitchProperty,"voicePitchProperty")),this.audioModel.supportsExtraSound&&Il.register(this.audioModel.extraSoundEnabledProperty,"extraSoundEnabledProperty"),this.inputModel.supportsGestureControl&&Il.register(this.inputModel.gestureControlsEnabledProperty,"gestureControlsEnabledProperty")}addPhetioLinkedElementsForModel(e,t,n=[]){const s=e.createTandem(t.tandemName),r=n;for(let a=0;a<r.length;a++){const o=r[a],l=o.tandemName||o.property.tandem.name;this.addLinkedElement(o.property,{tandem:s.createTandem(l)})}}preferenceModelHasCustom(e){return e.customPreferences.length>0}supportsSimulationPreferences(){return this.preferenceModelHasCustom(this.simulationModel)}supportsVisualPreferences(){return this.visualModel.supportsInteractiveHighlights||this.visualModel.supportsProjectorMode||this.preferenceModelHasCustom(this.visualModel)}supportsAudioPreferences(){return wu.audioAllowed?this.audioModel.supportsSound||this.audioModel.supportsExtraSound||this.audioModel.supportsAnyVoicing||this.preferenceModelHasCustom(this.audioModel):!1}supportsInputPreferences(){return this.inputModel.supportsGestureControl||this.preferenceModelHasCustom(this.inputModel)}supportsLocalizationPreferences(){return this.localizationModel.supportsDynamicLocale||Nf.length>1||this.preferenceModelHasCustom(this.localizationModel)}shouldShowDialog(){return this.supportsSimulationPreferences()||this.supportsVisualPreferences()||this.supportsInputPreferences()||this.supportsLocalizationPreferences()||this.supportsAudioPreferences()}}gg.PreferencesModelIO=new ui("PreferencesModelIO",{valueType:gg,toStateObject:i=>({supportsProjectorMode:i.visualModel.supportsProjectorMode,supportsInteractiveHighlights:i.visualModel.supportsInteractiveHighlights,supportsVoicing:i.audioModel.supportsVoicing,supportsTier1Voicing:i.audioModel.supportsTier1Voicing,supportsSound:i.audioModel.supportsSound,supportsExtraSound:i.audioModel.supportsExtraSound,supportsGestureControl:i.inputModel.supportsGestureControl,supportsDynamicLocale:i.localizationModel.supportsDynamicLocale,supportsAudioPreferences:i.supportsAudioPreferences(),supportsInputPreferences:i.supportsInputPreferences(),supportsLocalizationPreferences:i.supportsLocalizationPreferences(),supportsSimulationPreferences:i.supportsSimulationPreferences(),supportsVisualPreferences:i.supportsVisualPreferences()}),stateSchema:{supportsProjectorMode:Fs,supportsInteractiveHighlights:Fs,supportsVoicing:Fs,supportsTier1Voicing:Fs,supportsSound:Fs,supportsExtraSound:Fs,supportsGestureControl:Fs,supportsDynamicLocale:Fs,supportsAudioPreferences:Fs,supportsInputPreferences:Fs,supportsLocalizationPreferences:Fs,supportsSimulationPreferences:Fs,supportsVisualPreferences:Fs}});function OZ(i,e,t,n,s,r,a,o,l){i.length===1&&t&&e&&dc("homeScreen",e,"cannot specify homeScreen=true for single-screen sims");let h=[];if(a&&(!r||r.length===0)&&(dc("screens",r,'"?screens" query parameter must have screen values'),h=i),a&&r)for(let A=0;A<r.length;A++){const P=r[A],w=P-1;if(w>=0&&w<i.length)h.push(i[w]);else{dc("screens",r,`invalid value in screens query parameter: ${P}`),h=i;break}}else h=i;if(o(h),s&&n===0&&!e){const A="cannot specify initialScreen=0 when home screen is disabled with homeScreen=false";dc("initialScreen",n,A),dc("homeScreen",e,A)}s&&n===0&&h.length===1&&dc("initialScreen",n,"cannot specify initialScreen=0 for single-screen sims or when only one screen is loaded with screens=n");const c=h.slice();let f=null;h.length>1&&e&&(f=l(h),c.unshift(f));let g=n===0?c[0]:i[n-1];c.includes(g)||(dc("initialScreen",n,`invalid initial screen: ${n}`),g=c[0]);const v=ie.isEqual(new Set(i),new Set(h))&&(i.length>1?!!f:!0);return{homeScreen:f,initialScreen:g,selectedSimScreens:h,screens:c,allScreensCreated:v}}function dc(i,e,t){ua.addWarning(i,e,t)}const dC={INPUT:[...Qe.ARROW_KEYS,Qe.KEY_PAGE_UP,Qe.KEY_PAGE_DOWN,Qe.KEY_HOME,Qe.KEY_END,Qe.KEY_ENTER,Qe.KEY_SPACE],DIV:[...Qe.ARROW_KEYS,...Qe.WASD_KEYS],P:[Qe.KEY_ESCAPE],BUTTON:[Qe.KEY_ENTER,Qe.KEY_SPACE]},pC=Qe.ALL_KEYS,fC=100,NZ=.1,f3=.6,RZ=f3+.1,BZ="keydown",qZ="keyup";class zZ{constructor(e,t){this.display=e,this.random=new Vu({seed:t}),this.numberOfComponentsTested=10,this.keyupListeners=[],this.currentElement=null}chooseNextElement(){if(this.currentElement===null)this.currentElement=document.activeElement;else if(this.random.nextDouble()<NZ){this.clearListeners();const e=Ti.getRandomFocusable(this.random);e&&(e.focus(),this.currentElement=e)}}clearListeners(){this.keyupListeners.forEach(e=>{zn.clearTimeout(e.timeout),e()})}triggerClickEvent(){const e=document.activeElement;e instanceof HTMLElement&&e.click()}triggerKeyDownUpEvents(e){this.triggerDOMEvent(BZ,e);const t=this.random.nextInt(fC),n=()=>{this.triggerDOMEvent(qZ,e),this.keyupListeners.includes(n)&&this.keyupListeners.splice(this.keyupListeners.indexOf(n),1)};n.timeout=zn.setTimeout(n,t===fC?2e3:t),this.keyupListeners.push(n)}triggerRandomKeyDownUpEvents(e){const t=pC[Math.floor(this.random.nextDouble()*(pC.length-1))];this.triggerKeyDownUpEvents(t)}fuzzBoardEvents(e){if(this.display&&this.display._input&&this.display._input.pdomPointer){const t=this.display._input.pdomPointer;t&&!t.blockTrustedEvents&&(t.blockTrustedEvents=!0)}for(let t=0;t<this.numberOfComponentsTested;t++){this.chooseNextElement();for(let n=0;n<e/this.numberOfComponentsTested;n++){const s=document.activeElement;if(s&&dC[s.tagName.toUpperCase()]){const r=this.random.nextDouble();if(r<f3){const a=dC[s.tagName],o=this.random.sample(a);this.triggerKeyDownUpEvents(o)}else r<RZ?this.triggerClickEvent():this.triggerRandomKeyDownUpEvents(s)}else s&&this.triggerRandomKeyDownUpEvents(s)}}}triggerDOMEvent(e,t){if(document.activeElement){const n=new KeyboardEvent(e,{bubbles:!0,code:t,shiftKey:or.shiftKeyDown,altKey:or.altKeyDown,ctrlKey:or.ctrlKeyDown});document.activeElement.dispatchEvent(n)}}}class FZ{constructor(e,t){this.display=e,this.touches=[],this.nextTouchID=1,this.isMouseDown=!1,this.mousePosition=new Oe(0,0),this.random=new Vu({seed:t}),this.mouseToggleAction=()=>{this.mouseToggle()},this.mouseMoveAction=()=>{this.mouseMove()},this.touchStartAction=()=>{const n=this.createTouch(this.getRandomPosition());this.touchStart(n)},this.touchMoveAction=()=>{const n=this.random.sample(this.touches);this.touchMove(n)},this.touchEndAction=()=>{const n=this.random.sample(this.touches);this.touchEnd(n),this.removeTouch(n)},this.touchCancelAction=()=>{const n=this.random.sample(this.touches);this.touchCancel(n),this.removeTouch(n)}}fuzzEvents(e,t,n,s){for(this.display._input.currentlyFiringEvents=!0;this.random.nextDouble()<1-1/(e+1);){const a=this.touches.length+(this.isMouseDown?1:0)<s,o=[];t&&(this.isMouseDown||a)&&(o.push(this.mouseToggleAction),o.push(this.mouseMoveAction)),n&&(a&&o.push(this.touchStartAction),this.touches.length&&(o.push(this.random.nextDouble()<.8?this.touchEndAction:this.touchCancelAction),o.push(this.touchMoveAction))),this.random.sample(o)()}this.display._input.currentlyFiringEvents=!1,this.display._input.fireBatchedEvents()}createTouchEvent(e,t){const n=this.display.domElement,s=t.map(r=>({identifier:r.id,target:n,clientX:r.position.x,clientY:r.position.y}));if(self.Touch!==void 0&&self.TouchEvent!==void 0&&self.Touch.length===1&&self.TouchEvent.length===1){const r=s.map(a=>new self.Touch(a));return new self.TouchEvent(e,{cancelable:!0,bubbles:!0,touches:r,targetTouches:[],changedTouches:r,shiftKey:!1})}else{const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!0,!0,{touches:s,targetTouches:[],changedTouches:s}),r}}getRandomPosition(){return new Oe(Math.floor(this.random.nextDouble()*this.display.width),Math.floor(this.random.nextDouble()*this.display.height))}createTouch(e){const t={id:this.nextTouchID++,position:e};return this.touches.push(t),t}removeTouch(e){this.touches.splice(this.touches.indexOf(e),1)}touchStart(e){const t=this.createTouchEvent("touchstart",[e]);this.display._input.validatePointers(),this.display._input.touchStart(e.id,e.position,new Xi(t))}touchMove(e){e.position=this.getRandomPosition();const t=this.createTouchEvent("touchmove",[e]);this.display._input.validatePointers(),this.display._input.touchMove(e.id,e.position,new Xi(t))}touchEnd(e){const t=this.createTouchEvent("touchend",[e]);this.display._input.validatePointers(),this.display._input.touchEnd(e.id,e.position,new Xi(t))}touchCancel(e){const t=this.createTouchEvent("touchcancel",[e]);this.display._input.validatePointers(),this.display._input.touchCancel(e.id,e.position,new Xi(t))}mouseToggle(){const e=document.createEvent("MouseEvent");e.initMouseEvent(this.isMouseDown?"mouseup":"mousedown",!0,!0,self,1,this.mousePosition.x,this.mousePosition.y,this.mousePosition.x,this.mousePosition.y,!1,!1,!1,!1,0,null),this.display._input.validatePointers(),this.isMouseDown?(this.display._input.mouseUp(this.mousePosition,new Xi(e)),this.isMouseDown=!1):(this.display._input.mouseDown(null,this.mousePosition,new Xi(e)),this.isMouseDown=!0)}mouseMove(){this.mousePosition=this.getRandomPosition();const e=document.createEvent("MouseEvent");e.initMouseEvent("mousemove",!0,!0,self,0,this.mousePosition.x,this.mousePosition.y,this.mousePosition.x,this.mousePosition.y,!1,!1,!1,!1,0,null),this.display._input.validatePointers(),this.display._input.mouseMove(this.mousePosition,new Xi(e))}}const mC=1,HZ=8,UZ=.01,gC=0,GZ="Sometimes when Hippopotomonstrosesquippedaliophobia want lyrics you turn to Shakespeare like the following text copied from some work To be or not to be that is the question Supercalifragilisticexpeladocious tis nobler in the mind to suffer The slings and arrows of antidisestablishmentarianism fortune Or to take Incomprehensibility against a sea of Floccinaucinihilipilification";class p_{constructor(){this.stringFactor=mC,this.stride=gC}handleEvent(e){e.code==="ArrowLeft"?this.halveStrings():e.code==="ArrowRight"?this.doubleStrings():e.code==="ArrowUp"?this.setStride(this.stride+1):e.code==="ArrowDown"?this.setStride(this.stride-1):e.code==="Space"&&this.reset()}doubleStrings(){this.setStringFactor(Math.min(this.stringFactor*2,HZ))}halveStrings(){this.setStringFactor(Math.max(this.stringFactor*.5,UZ))}setStringFactor(e){this.stringFactor=e,console.log(`stringFactor = ${this.stringFactor}`),WZ(this.stringFactor)}setStride(e){const t=p_.WORDS;e>t.length-1?e=0:e<0&&(e=t.length-1),this.stride=e,console.log(`stride = ${this.stride}`),iv.forEach((n,s)=>{n.property.value=t[(s+this.stride)%t.length]})}reset(){this.setStride(gC),this.setStringFactor(mC)}}p_.WORDS=GZ.split(" ");function WZ(i){iv.forEach(e=>{if(e.restoreInitialValue("en"),i!==1){const t=e.property.value.replace(/[\u202A\u202B\u202C]/g,"");e.property.value=KZ(i,t)}})}function KZ(i,e){if(i>1)return YZ(e,i);{const t=e.match(/{{(.+?)}}/g)||[],n=e.replace(/{{(.+?)}}/g,""),s=oM(n.length*i+1,0);return n.substring(0,s)+t.join("")}}function YZ(i,e){let t=i;for(;e>1;)t+=i,e-=1;return t}class yg extends Do{constructor(e){const t=Ne()({rootRenderer:"svg",webgl:yg.DEFAULT_WEBGL,allowBackingScaleAntialiasing:!0,allowSceneOverflow:!1,allowWebGL:phet.chipper.queryParameters.webgl,assumeFullWindow:!0,forceSVGRefresh:phet.chipper.queryParameters.forceSVGRefresh,accessibility:phet.chipper.queryParameters.supportsInteractiveDescription,preventMultitouch:phet.chipper.queryParameters.preventMultitouch,interruptMultitouch:phet.chipper.queryParameters.interruptMultitouch,tandem:R.REQUIRED},e);t.interactiveHighlightsEnabledProperty=t.preferencesModel.visualModel.interactiveHighlightsEnabledProperty,t.rootRenderer=phet.chipper.queryParameters.rootRenderer||t.rootRenderer,ua.containsKey("webgl")&&(t.webgl=phet.chipper.queryParameters.webgl),Qi.setWebGLEnabled(t.webgl),phet.chipper.isFuzzEnabled()&&(self.open=function(){return{focus:ie.noop,blur:ie.noop}}),document.body.style.padding="0",document.body.style.margin="0",document.body.style.overflow="hidden",document.getElementById("sim")&&document.getElementById("sim").parentNode===document.body&&document.body.removeChild(document.getElementById("sim")),document.onselectstart=function(){return!1},super(new Ge({renderer:t.rootRenderer}),t),this.simulationRoot=new Ge,this.focusablePlaceholder=null,this.simulationRoot=new Ge,this.rootNode.addChild(this.simulationRoot),Zn.chromium&&this.simulationRoot.transformEmitter.addListener(()=>{this.refreshSVGOnNextFrame()});const n=phet.chipper.queryParameters.randomSeed*Math.PI;if(this.inputFuzzer=new FZ(this,n),this.keyboardFuzzer=new zZ(this,n),this.supportsPanAndZoomProperty=new Qt(phet.chipper.queryParameters.supportsPanAndZoom,{tandem:t.tandem.createTandem("supportsPanAndZoomProperty"),phetioFeatured:!0}),this.domElement.id="sim",phet.chipper.queryParameters.supportsInteractiveDescription&&(this.pdomRootElement.lang="en"),phet.chipper.queryParameters.sceneryLog&&fu.enableLogging(phet.chipper.queryParameters.sceneryLog),phet.chipper.queryParameters.sceneryStringLog&&fu.switchLogToString(),phet.chipper.queryParameters.stringTest==="dynamic"){const r=new p_;self.addEventListener("keydown",a=>r.handleEvent(a))}this.initializeEvents({tandem:R.GENERAL_CONTROLLER.createTandem("input")}),self.phet.joist.rootNode=this.rootNode,self.phet.joist.display=this,this.setPointerDisplayVisible(phet.chipper.queryParameters.showPointers),this.setPointerAreaDisplayVisible(phet.chipper.queryParameters.showPointerAreas),this.setHitAreaDisplayVisible(phet.chipper.queryParameters.showHitAreas),this.setCanvasNodeBoundsVisible(phet.chipper.queryParameters.showCanvasNodeBounds),this.setFittedBlockBoundsVisible(phet.chipper.queryParameters.showFittedBlockBounds),al.initialize(this.simulationRoot,{tandem:t.tandem.createTandem("panZoomListener"),stepEmitter:null});const s=al.listener;this.supportsPanAndZoomProperty.link(r=>{r?this.addInputListener(s):this.hasInputListener(s)&&this.removeInputListener(s)}),self.addEventListener("pageshow",r=>{r.persisted&&self.location.reload()})}fuzzInputEvents(){const e=phet.chipper.queryParameters.fuzzTouch||phet.chipper.queryParameters.fuzz,t=phet.chipper.queryParameters.fuzzMouse||phet.chipper.queryParameters.fuzz;(t||e)&&this.inputFuzzer.fuzzEvents(phet.chipper.queryParameters.fuzzRate,t,e,phet.chipper.queryParameters.fuzzPointers),phet.chipper.queryParameters.fuzzBoard&&document.hasFocus()&&this.keyboardFuzzer.fuzzBoardEvents(phet.chipper.queryParameters.fuzzRate)}step(e){this.supportsPanAndZoomProperty.value&&al.listener.step(e)}getFocusablePlaceholder(){if(this.focusablePlaceholder)return this.focusablePlaceholder;if(this.isAccessible())return null;{this.focusablePlaceholder=document.createElement("div"),this.focusablePlaceholder.tabIndex=0;const e=document.createElement("span"),t="This is an interactive sim. It changes as you play with it.";return e.innerHTML=t,e.ariaLabel=t,e.setAttribute("style",jD),this.focusablePlaceholder.appendChild(e),document.body.appendChild(this.focusablePlaceholder),this.focusablePlaceholder}}}yg.DEFAULT_WEBGL=!1;class vg extends rn{constructor(e){super({tandem:R.GENERAL_MODEL.createTandem("simInfo"),phetioType:vg.SimInfoIO,phetioReadOnly:!0,phetioDocumentation:"A collection of data about the runtime and simulation. Available in the simStarted PhET-iO data stream event, as well as on demand in the PhET-iO state."}),this.info={},this.putInfo("url",self.location.href),this.putInfo("randomSeed",self.phet.chipper.queryParameters.randomSeed),this.putInfo("userAgent",self.navigator.userAgent),this.putInfo("language",self.navigator.language),this.putInfo("window",`${window.innerWidth}x${window.innerHeight}`),this.putInfo("referrer",document.referrer),this.putInfo("checkIE11StencilSupport",Qi.checkIE11StencilSupport()),this.putInfo("isWebGLSupported",phet.chipper.queryParameters.webgl?Qi.isWebGLSupported:!1);let t,n,s;const r=[];self.navigator.pointerEnabled&&r.push("pointerEnabled"),self.navigator.msPointerEnabled&&r.push("msPointerEnabled"),self.navigator.onLine||r.push("offline");try{t=document.createElement("canvas"),n=t.getContext("2d"),s=Qi.backingStorePixelRatio(n),this.putInfo("pixelRatio",`${window.devicePixelRatio||1}/${s}`),(self.devicePixelRatio||1)/s!==1&&r.push("pixelRatioScaling")}catch{}this.putInfo("flags",r.join(", ")),t=null,this.putInfo("simName",e.simNameProperty.value),this.putInfo("simVersion",e.version),this.putInfo("repoName",Zc.name),this.putInfo("screens",e.screens.map(a=>{const o={name:a.nameProperty.value||e.simNameProperty.value};return R.PHET_IO_ENABLED&&(o.phetioID=a.tandem.phetioID),o})),R.PHET_IO_ENABLED&&(this.putInfo("screenPropertyValue",e.selectedScreenProperty.value.tandem.phetioID),this.putInfo("wrapperMetadata",phet.preloads.phetio.simStartedMetadata),this.putInfo("dataStreamVersion",phet.phetio.dataStream.VERSION),this.putInfo("phetioCommandProcessorProtocol",phet.phetio.phetioCommandProcessor.PHET_IO_PROTOCOL))}putInfo(e,t){t===void 0&&(t="{{undefined}}"),this.info[e]=t}}vg.SimInfoIO=new ui("SimInfoIO",{valueType:vg,toStateObject:i=>({simName:i.info.simName,screens:i.info.screens,repoName:i.info.repoName,screenPropertyValue:i.info.screenPropertyValue,dataStreamVersion:i.info.dataStreamVersion,phetioCommandProcessorProtocol:i.info.phetioCommandProcessorProtocol,simVersion:i.info.simVersion,wrapperMetadata:i.info.wrapperMetadata,randomSeed:i.info.randomSeed,url:i.info.url,userAgent:i.info.userAgent,window:i.info.window,referrer:i.info.referrer,language:i.info.language,pixelRatio:i.info.pixelRatio,isWebGLSupported:i.info.isWebGLSupported,checkIE11StencilSupport:i.info.checkIE11StencilSupport,flags:i.info.flags||null}),applyState:ie.noop,stateSchema:{simName:xi,screens:Kl($y),repoName:xi,screenPropertyValue:xi,wrapperMetadata:fi($y),dataStreamVersion:xi,phetioCommandProcessorProtocol:xi,simVersion:fi(xi),randomSeed:fi(Ii),url:fi(xi),userAgent:fi(xi),window:fi(xi),referrer:fi(xi),language:fi(xi),pixelRatio:fi(xi),isWebGLSupported:fi(Fs),checkIE11StencilSupport:fi(Fs),flags:fi(xi)},apiStateKeys:["screens","repoName","dataStreamVersion","phetioCommandProcessorProtocol"]});class jZ{constructor(e){this.sim=e,self.addEventListener("message",t=>{t.data.messageName==="pause"?(e.stepOneFrame(),e.activeProperty.value=!1):t.data.messageName==="resume"&&(e.activeProperty.value=!0)})}start(){this.sim.isConstructionCompleteProperty.link(e=>{e&&self.parent!==self&&self.parent.postMessage({message:"init"},"*")})}}const XZ=new Fe(new He("JOIST/a11y.toolbar.openToolbar",{en:"Open Toolbar"},R.OPT_OUT),R.OPT_OUT),QZ=new Fe(new He("JOIST/a11y.toolbar.closeToolbar",{en:"Close Toolbar"},R.OPT_OUT),R.OPT_OUT),JZ=new Fe(new He("JOIST/a11y.toolbar.hideToolbar",{en:"Hide Toolbar"},R.OPT_OUT),R.OPT_OUT),ZZ=new Fe(new He("JOIST/a11y.toolbar.showToolbar",{en:"Show Toolbar"},R.OPT_OUT),R.OPT_OUT),$Z=new Fe(new He("JOIST/a11y.toolbar.toolbarShown",{en:"Toolbar Shown."},R.OPT_OUT),R.OPT_OUT),e$=new Fe(new He("JOIST/a11y.toolbar.toolbarHidden",{en:"Toolbar hidden."},R.OPT_OUT),R.OPT_OUT);class t${constructor(e){this.screenProperty=e}createOverviewContent(){return this.screenProperty.value.view.getVoicingOverviewContent()}createDetailsContent(){return this.screenProperty.value.view.getVoicingDetailsContent()}createHintContent(){return this.screenProperty.value.view,this.screenProperty.value.view.getVoicingHintContent()}}const i$=new Fe(new He("JOIST/a11y.toolbar.voicing.title",{en:"Sim Voicing"},R.OPT_OUT),R.OPT_OUT),n$=new Fe(new He("JOIST/a11y.toolbar.voicing.quickInfo",{en:"Quick Info"},R.OPT_OUT),R.OPT_OUT),s$=new Fe(new He("JOIST/a11y.toolbar.voicing.simVoicingOnAlert",{en:"Sim Voicing on."},R.OPT_OUT),R.OPT_OUT),r$=new Fe(new He("JOIST/a11y.toolbar.voicing.simVoicingOffAlert",{en:"Sim Voicing off."},R.OPT_OUT),R.OPT_OUT),a$=new Fe(new He("JOIST/a11y.toolbar.title",{en:"Toolbar"},R.OPT_OUT),R.OPT_OUT),o$=new Fe(new He("JOIST/a11y.toolbar.voicing.playOverviewLabel",{en:"Play Overview"},R.OPT_OUT),R.OPT_OUT),l$=new Fe(new He("JOIST/a11y.toolbar.voicing.playDetailsLabel",{en:"Play Details"},R.OPT_OUT),R.OPT_OUT),h$=new Fe(new He("JOIST/a11y.toolbar.voicing.playHintLabel",{en:"Play Hint"},R.OPT_OUT),R.OPT_OUT),u$=new Fe(new He("JOIST/a11y.toolbar.voicing.overviewLabel",{en:"Overview"},R.OPT_OUT),R.OPT_OUT),c$=new Fe(new He("JOIST/a11y.toolbar.voicing.detailsLabel",{en:"Details"},R.OPT_OUT),R.OPT_OUT),d$=new Fe(new He("JOIST/a11y.toolbar.voicing.hintLabel",{en:"Hint"},R.OPT_OUT),R.OPT_OUT),p$=new Fe(new He("SCENERY_PHET/a11y.playControlButton.stop",{en:"Stop"},R.OPT_OUT),R.OPT_OUT);class f$ extends zt{constructor(e){super(),this.rect(0,0,e,e)}}const m$=new Fe(new He("SCENERY_PHET/a11y.playControlButton.play",{en:"Play"},R.OPT_OUT),R.OPT_OUT),g$=new Fe(new He("SCENERY_PHET/keyboardHelpDialog.timingControls.pauseOrPlayAction",{en:"Pause or play action",af:"Pouse of speel aksie",ar:"توقف مؤقتًا أو لعب الحركة",ar_KW:"إيقاف مؤقت أو تشغيل",ar_LY:"إيقاف مؤقت أو تشغيل الإجراء",ar_MA:"تشغيل أو ايقاف الحركة",az:"Fəaliyyəti dayandırın və ya oynayın",be:"Прыпыніце або прайграйце дзеянне",bg:"Спри или пусни действие",bn:"বিরতি অথবা শুরু বাটন",bs:"Pauzirajte ili akcija",ca:"Atura o reprodueix l'acció",cs:"Pozastavit nebo přehrát akci",da:"Pause eller afspil handling",de:"Pause oder Wiedergabe",el:"Παύση ή αναπαραγωγή δράσης",es:"Pausar o reproducir la acción",es_PE:"Acción de Pausar o reproducir",eu:"Eten edo erreproduzitu ekintza",fa:"عمل پخش یا توقف",fa_DA:"عملیه را پخش یا متوقف کنید",fi:"Pysäytä tai aloita toiminta",fr:"Arrêter ou relancer",gu:"પ્લે અને પોઝ એક્શન",ha:"Tsayar ko kaci gaba da nuna aikin",hi:"रोकें या चलाएं",hr:"Pauziraj ili pusti radnju",ht:"Pran poz oswa jwe aksyon an",hu:"Állj/tovább működés",is:"Keyra eða gera hlé á hermun",it:"Attiva pausa o riprendi",iw:"עצור או נגן",ki:"Gũtithia kana gũthaka",kn:"Pause or play action",ko:"정지 또는 시작 활동",mn:"Түр зогс эсвэл тоглуул",mr:"थांबवा किंवा पुन्हा सुरु करा",ms:"Jeda atau mainkan tindakan",mt:"Waqqaf jew uri l-azzjoni",nb:"Pause og kjør",nl:"Pauze of speel actie",om:"Tarkaanfii dhaabi ykn taphachisii",pl:"Pauza lub odtwarzanie akcji",pt:"Pausar ou reproduzir ação",pt_BR:"Pausa ou continua",ro:"Pauză sau redare acțiune",sk:"Pozastaviť alebo prehrať akciu",sl:"Ustavi ali predvajaj",sr:"Паузирајте или акција",st:"Ketso ea ho Emisa ha nakoana kapa ho bapala",sv:"Pausa eller spela förlopp",sw:"Sitisha au cheza kitendo",te:"Pause or play action",tg:"Таваққуф  ё амал кардан",th:"หยุดชั่วคราวหรือให้แสดงผล",tr:"Duraklatma veya oynatma eylemi",uz:"To‘xtatib turish yoki o‘ynatish",vi:"Ngừng hay chạy tiếp",yo:"Sinmi tabi mu igbese",zh_TW:"暫停或播放",zu:"phumula noma udlale isenzo"},R.OPT_OUT),R.OPT_OUT);class lp extends g0{constructor(e,t,n,s){const r=Ne()({valueOffSoundPlayer:$n.get("toggleOff"),valueOnSoundPlayer:$n.get("toggleOn"),tandem:R.REQUIRED,phetioFeatured:!0,listenerOptions:{tandem:R.OPT_OUT}},s),a=new pM(t,n,e,r),o=new dM(a);super(a,o,r),this.addLinkedElement(e,{tandemName:"property"});const l=()=>{e.value===t?r.valueOffSoundPlayer.play():e.value===n&&r.valueOnSoundPlayer.play()};this.buttonModel.produceSoundEmitter.addListener(l),this.disposeRoundToggleButton=()=>{this.buttonModel.produceSoundEmitter.removeListener(l),a.dispose()}}dispose(){this.disposeRoundToggleButton(),super.dispose()}}class y$ extends lp{constructor(e,t,n,s){const r=Ne()({content:null,tandem:R.REQUIRED},s),a=new cM(e,t,n);r.content=a,super(e,!1,!0,r),this.disposeBooleanRoundToggleButton=function(){a.dispose()}}dispose(){this.disposeBooleanRoundToggleButton(),super.dispose()}}class v$ extends zt{constructor(e,t){super(),this.moveTo(0,0),this.lineTo(e,t/2),this.lineTo(0,t),this.close()}}class f_ extends y${constructor(e,t,n){const s=Ne()({radius:c_.PLAY_CONTROL_BUTTON_RADIUS,scaleFactorWhenNotPlaying:1,includeGlobalHotkey:!1,startPlayingLabel:m$,endPlayingLabel:null,valueOffSoundPlayer:$n.get("pause"),valueOnSoundPlayer:$n.get("play"),xMargin:0,yMargin:0},n),r=s.radius*.8,a=s.radius,o=new bi(new v$(r,a),{fill:"black",centerX:s.radius*.05,centerY:0}),l=new ma(s.radius,{children:[o]});t.centerX=0,t.centerY=0;const h=new ma(s.radius,{children:[t]});super(e,h,l,s);const c=(g,v)=>{this.innerContent=g?s.endPlayingLabel:s.startPlayingLabel;const A=v===null?1:1/s.scaleFactorWhenNotPlaying;this.scale(g?A:s.scaleFactorWhenNotPlaying)};e.link(c);let f=null;s.includeGlobalHotkey&&phet.chipper.queryParameters.supportsInteractiveDescription&&(f=Xl.createGlobal(this,{keyStringProperties:f_.TOGGLE_PLAY_HOTKEY_DATA.keyStringProperties,fireOnDown:!1,fire:()=>{e.set(!e.get());const g=e.get()?s.valueOnSoundPlayer:s.valueOffSoundPlayer;g&&g.play()}})),this.disposePlayStopButton=()=>{e.hasListener(c)&&e.unlink(c),f&&f.dispose()}}dispose(){this.disposePlayStopButton(),super.dispose()}}f_.TOGGLE_PLAY_HOTKEY_DATA=new ir({keyStringProperties:[new Mt("alt+k")],keyboardHelpDialogLabelStringProperty:g$,repoName:i3.name,global:!0});class b$ extends f_{constructor(e,t){const n=Ne()({radius:c_.PLAY_CONTROL_BUTTON_RADIUS,endPlayingLabel:p$},t),s=n.radius*.75,r=new bi(new f$(s),{fill:"black"});super(e,r,n)}}const Nm=10,_$=20,yC=i$,A$=n$,w$=s$,S$=r$,P$=a$,T$=o$,x$=l$,E$=h$,V$=u$,k$=c$,C$=d$;class D$ extends Ge{constructor(e,t,n){const s=Ne()({isDisposable:!1,tagName:"section",labelTagName:"h2",labelContent:P$,visiblePropertyOptions:{phetioReadOnly:!0}},n);super(s);const r={font:new ki(14),fill:t.navigationBarTextFillProperty,maxWidth:90},a=new kt(yC,r),o=new mr(A$,r);o.focusHighlight=new t_(o,{innerStroke:"white"});const l=new Co($i.mainWindowVoicingEnabledProperty,!1,!0,Ut({accessibleName:yC,rightValueContextResponse:w$,leftValueContextResponse:S$,tandem:s.tandem?.createTandem("muteSpeechSwitch")},Vi.TOGGLE_SWITCH_OPTIONS)),h=new Hh({labelNode:a,controlNode:l,tandem:s.tandem?.createTandem("muteSpeechControl")}),c=new Bh,f=new Bh,g=new HA(V$,T$,c,f,t,e.createOverviewContent.bind(e)),v=new HA(k$,x$,c,f,t,e.createDetailsContent.bind(e)),A=new HA(C$,E$,c,f,t,e.createHintContent.bind(e));this.children=[h,o,g.content,v.content,A.content],o.leftTop=h.leftBottom.plusXY(0,Nm),g.content.leftTop=o.leftBottom.plusXY(_$,Nm),v.content.leftTop=g.content.leftBottom.plusXY(0,Nm),A.content.leftTop=v.content.leftBottom.plusXY(0,Nm);const P=[g,v,A],w=[g.playingProperty,v.playingProperty,A.playingProperty];P.forEach(T=>{T.playingProperty.link(D=>{T.playContent(w)})})}}class HA{constructor(e,t,n,s,r,a){this.lookAndFeel=r,this.objectResponseUtterance=new Sn,this.createAlert=a,this.playingProperty=new Qt(!1,{reentrant:!0}),this.playStopButton=new b$(this.playingProperty,{startPlayingLabel:t,voicingNameResponse:t,voicingIgnoreVoicingManagerProperties:!0,radius:12,tandem:R.OPT_OUT});const o=new kt(e,{font:new ki(12),fill:this.lookAndFeel.navigationBarTextFillProperty,maxWidth:100}),l=n.createBox(o,{xAlign:"left"}),h=s.createBox(this.playStopButton,{xAlign:"right"});this.content=new _i({children:[l,h],spacing:Nm}),$i.endSpeakingEmitter.addListener((g,v)=>{v===this.objectResponseUtterance&&(this.playingProperty.set(!1),Do.hasInputListener(f)&&Do.removeInputListener(f))});const c=g=>{g.trail.nodes.includes(this.playStopButton)||(Do.removeInputListener(f),this.objectResponseUtterance.priorityProperty.value=Sn.LOW_PRIORITY)},f={down:c,focus:c};$i.startSpeakingEmitter.addListener((g,v)=>{v===this.objectResponseUtterance&&Do.addInputListener(f)})}playContent(e){this.playingProperty.value?(ie.without(e,this.playingProperty).forEach(n=>{n.value=!1}),this.objectResponseUtterance.priorityProperty.value=Sn.TOP_PRIORITY,this.playStopButton.voicingSpeakResponse({objectResponse:this.createAlert(),utterance:this.objectResponseUtterance})):Eo.cancelUtterance(this.objectResponseUtterance)}}const I$=250,L$=15,M$=XZ,O$=QZ,N$=JZ,R$=ZZ,B$=$Z,q$=e$;class z$ extends Ge{constructor(e,t,n,s){const r=Ne()({isDisposable:!1,tagName:"div",visiblePropertyOptions:{phetioReadOnly:!0}},s);super(r),this.layoutScale=1,this.isEnabledProperty=e,this.backgroundRectangle=new xt(0,0,0,0,{fill:n.navigationBarFillProperty}),this.openProperty=new Qt(!phet.chipper.queryParameters.voicingCollapseToolbar),this.isShowingProperty=Dt.and([this.isEnabledProperty,$i.enabledProperty,wu.audioEnabledProperty]);const a=new t$(t);this.menuContent=new D$(a,n,{tandem:r.tandem?.createTandem("menuContent")});const o=new F$;this.openButton=new tP({content:o,listener:()=>this.openProperty.toggle(),buttonAppearanceStrategy:rh.FlatAppearanceStrategy,baseColor:"lightgrey",tandem:R.OPT_OUT}),this.contentWidth=this.menuContent.localBounds.width,this.contentMargin=this.openButton.localBounds.width,this.rightPositionProperty=new Ba(this.getHiddenPosition()),this.rightDestinationPosition=0;const l=new Ge({children:[this.backgroundRectangle,this.menuContent,this.openButton]});this.addChild(l);const h=g=>{this.step(g)};zn.addListener(h);const c=(g,v)=>{if(o.matrix=g?It.scaling(-1,1):It.IDENTITY,this.menuContent.pdomVisible=g,this.openButton.accessibleName=g?O$:M$,this.openButton.voicingNameResponse=g?N$:R$,this.updateDestinationPosition(),v!==null){const A=g?B$:q$;this.openButton.voicingSpeakContextResponse({contextResponse:A}),this.addAccessibleResponse(A)}};this.openProperty.link(c);const f=g=>{this.updateDestinationPosition(),l.pdomVisible=g};this.isShowingProperty.link(f)}getDisplayedWidth(){return this.rightPositionProperty.value*this.layoutScale+this.openButton.width/2}getHiddenPosition(){return-this.contentMargin/2}updateDestinationPosition(){this.isShowingProperty.value?this.rightDestinationPosition=this.openProperty.value?this.contentWidth+this.contentMargin*2:this.contentMargin:this.rightDestinationPosition=this.getHiddenPosition()}step(e){const t=Math.abs(this.rightPositionProperty.value-this.rightDestinationPosition);if(t!==0){const n=Math.min(t,I$*e),s=this.rightPositionProperty.value;this.rightPositionProperty.value=this.rightDestinationPosition>s?s+n:s-n}}layout(e,t){this.layoutScale=e,this.menuContent.setScaleMagnitude(e),this.openButton.setScaleMagnitude(e),this.backgroundRectangle.rectWidth=e*(this.contentWidth+this.contentMargin*2),this.backgroundRectangle.rectHeight=t,this.backgroundRectangle.right=this.rightPositionProperty.value*e,this.openButton.center=this.backgroundRectangle.rightCenter,this.menuContent.centerTop=this.backgroundRectangle.centerTop.plusXY(0,L$)}}class F$ extends bi{constructor(){const s=new zt;for(let r=0;r<2;r++){const a=r*8;s.moveTo(a,0),s.lineTo(a+5,12/2),s.lineTo(a,12)}super(s,{stroke:"black",lineWidth:3.5,lineCap:"round"})}}const H$=Zn.android||Zn.mobileSafari;phet.joist.elapsedTime=0;phet.joist.playbackModeEnabledProperty=new Qt(phet.chipper.queryParameters.playbackMode);class U$ extends rn{constructor(e,t,n){const s=Nq(phet.chipper.brand);phet.chipper.queryParameters.launchCounter&&(e=VZ(e));const r=Ne()({credits:{},homeScreenWarningNode:null,preferencesModel:null,webgl:yg.DEFAULT_WEBGL,detachInactiveScreenViews:!1,phetioState:!1,phetioReadOnly:!0,tandem:R.ROOT},n);r.preferencesModel||(r.preferencesModel=new gg);const a={webgl:r.webgl,tandem:R.GENERAL_VIEW.createTandem("display"),preferencesModel:r.preferencesModel};super(r),this._isConstructionCompleteProperty=new Mt(!1),this.isConstructionCompleteProperty=this._isConstructionCompleteProperty,this.frameStartedEmitter=new kn,this.frameEndedEmitter=new kn({tandem:R.GENERAL_MODEL.createTandem("frameEndedEmitter"),phetioHighFrequency:!0,phetioDocumentation:"Indicates when a frame ends. Listen to this Emitter if you have an action that must be performed after the model and view step completes."}),this.activeProperty=new Qt(!0,{tandem:R.GENERAL_MODEL.createTandem("activeProperty"),phetioFeatured:!0,phetioDocumentation:"Determines whether the entire simulation is running and processing user input. Setting this property to false pauses the simulation, and prevents user interaction."}),this.scaleProperty=new Ba(1),this.boundsProperty=new Mt(null),this.screenBoundsProperty=new Mt(null),this.lookAndFeel=new kZ,this.memoryMonitor=new Hm,this.version=Zc.version,this.frameCounter=0,this.resizePending=!0,this.locale=phet.chipper.locale||"en",this.toolbar=null,this.modalNodeStack=xf(),this.barrierRectangle=new EZ(this.modalNodeStack),this.topLayer=new Ge({children:[this.barrierRectangle]}),this.lastStepTime=null,this.lastAnimationFrameTime=null,this.simStartedTime=null,this.credits=r.credits,this.detachInactiveScreenViews=r.detachInactiveScreenViews,this.simNameProperty=e,this.splashScreenProgressBarWidth=s,phet.joist.playbackModeEnabledProperty.lazyLink(()=>{throw new Error("playbackModeEnabledProperty cannot be changed after Sim construction has begun")});const o=new Mt(new ji(0,0),{valueComparisonStrategy:"equalsFunction"});this.dimensionProperty=o,this.resizeAction=new Zi((f,g)=>{if(o.value=new ji(f,g),f===0||g===0)return;const v=Math.min(f/no.LAYOUT_BOUNDS.width,g/no.LAYOUT_BOUNDS.height),A=v*iw.NAVIGATION_BAR_SIZE.height;this.navigationBar.layout(v,f,A),this.navigationBar.y=g-A,this.display.setSize(new ji(f,g));const P=g-this.navigationBar.height;this.toolbar&&this.toolbar.layout(v,P);const w=this.toolbar?this.toolbar.getDisplayedWidth():0,T=new pt(w,0,f,P);ie.each(this.screens,D=>D.view.layout(T)),this.topLayer.children.forEach(D=>{D.layout&&D.layout(T)}),Zn.mobileSafari&&self.scrollTo(0,0),this.scaleProperty.value=v,this.boundsProperty.value=new pt(0,0,f,g),this.screenBoundsProperty.value=T.copy(),al.listener.setTargetScale(v),al.listener.setTargetBounds(this.boundsProperty.value),al.listener.setPanBounds(this.boundsProperty.value),pn.layoutScale=v},{tandem:R.GENERAL_MODEL.createTandem("resizeAction"),parameters:[{name:"width",phetioType:Ii},{name:"height",phetioType:Ii}],phetioPlayback:!0,phetioEventMetadata:{alwaysPlaybackableOverride:!0},phetioDocumentation:"Executes when the sim is resized. Values are the sim dimensions in CSS pixels."}),this.stepSimulationAction=new Zi(f=>{this.frameStartedEmitter.emit(),this.frameCounter++,f*=phet.chipper.queryParameters.speed,this.resizePending&&this.resizeToWindow();const g=this.selectedScreenProperty.value;f=Math.min(f,g.maxDT),phet.joist.elapsedTime+=f*1e3,zn.emit(f),g.model.step&&f&&g.model.step(f),self.TWEEN&&self.TWEEN.update(phet.joist.elapsedTime),this.display.step(f),g.view.step(f),R.PHET_IO_ENABLED&&!phet.phetio.phetioEngine.isReadyForDisplay||this.display.updateDisplay(),phet.chipper.queryParameters.memoryLimit&&this.memoryMonitor.measure(),this.frameEndedEmitter.emit()},{tandem:R.GENERAL_MODEL.createTandem("stepSimulationAction"),parameters:[{name:"dt",phetioType:Ii,phetioDocumentation:"The amount of time stepped in each call, in seconds."}],phetioHighFrequency:!0,phetioPlayback:!0,phetioDocumentation:"A function that steps time forward."});const l=R.GENERAL_MODEL.createTandem("screens"),h=OZ(t,phet.chipper.queryParameters.homeScreen,ua.containsKey("homeScreen"),phet.chipper.queryParameters.initialScreen,ua.containsKey("initialScreen"),phet.chipper.queryParameters.screens,ua.containsKey("screens"),f=>{const g=f.map(A=>t.indexOf(A)+1),v=ie.flatten(vc.combinationsOf(g).map(A=>Ih.permutationsOf(A))).filter(A=>A.length>0).sort();this.availableScreensProperty=new Mt(g,{tandem:l.createTandem("availableScreensProperty"),isValidValue:A=>ie.some(v,P=>ie.isEqual(A,P)),phetioFeatured:!0,phetioValueType:Kl(Ii),phetioDocumentation:"Controls which screens are available, and the order they are displayed."}),this.activeSimScreensProperty=new Dt([this.availableScreensProperty],A=>A.map(P=>t[P-1]))},f=>new Hv(this.simNameProperty,()=>this.selectedScreenProperty,f,this.activeSimScreensProperty,{tandem:r.tandem.createTandem(Fn.HOME_SCREEN_COMPONENT_NAME),warningNode:r.homeScreenWarningNode}));this.homeScreen=h.homeScreen,this.simScreens=h.selectedSimScreens,this.screens=h.screens,this.allScreensCreated=h.allScreensCreated,this.selectedScreenProperty=new Mt(h.initialScreen,{tandem:l.createTandem("selectedScreenProperty"),phetioFeatured:!0,phetioDocumentation:"Determines which screen is selected in the simulation",validValues:this.screens,phetioValueType:dl.ScreenIO}),this.activeSimScreensProperty.lazyLink(f=>{const g=this.selectedScreenProperty.value;g===this.homeScreen?f.length===1?this.selectedScreenProperty.value=f[0]:f.includes(this.homeScreen.model.selectedScreenProperty.value)||(this.homeScreen.model.selectedScreenProperty.value=f[0]):f.includes(g)||(this.selectedScreenProperty.value=f[0])}),this.displayedSimNameProperty=Dt.deriveAny([this.availableScreensProperty,this.simNameProperty,this.selectedScreenProperty,rC,...ie.uniq(this.screens.map(f=>f.nameProperty))],()=>{const f=this.availableScreensProperty.value,g=this.simNameProperty.value,v=this.selectedScreenProperty.value,A=rC,P=v.nameProperty.value,w=f.length===1&&t.length>1;return w&&g&&P?Gn.fillIn(A,{simName:g,screenName:P}):w&&P?P:g},{tandem:R.GENERAL_MODEL.createTandem("displayedSimNameProperty"),tandemNameSuffix:"NameProperty",phetioDocumentation:"Customize this string by editing its dependencies.",phetioFeatured:!0,phetioValueType:xi});const c=new Qt(!0,{tandem:R.GENERAL_MODEL.createTandem("browserTabVisibleProperty"),phetioDocumentation:"Indicates whether the browser tab containing the simulation is currently visible",phetioReadOnly:!0,phetioFeatured:!0});this.browserTabVisibleProperty=c,document.addEventListener("visibilitychange",()=>{c.set(document.visibilityState==="visible")},!1),this.supportsGestureDescription=phet.chipper.queryParameters.supportsInteractiveDescription&&H$,this.hasKeyboardHelpContent=ie.some(this.simScreens,f=>!!f.createKeyboardHelpNode),self.phet.joist.sim=this,this.preferencesModel=r.preferencesModel,wu.initialize(this),this.preferencesModel.audioModel.supportsSound&&io.addSoundGenerator(new PZ(this.selectedScreenProperty,this.homeScreen,{initialOutputLevel:.5}),{categoryName:"user-interface"}),self.phet.joist.ScreenshotGenerator=Qp,this.simNameProperty.link(f=>{document.title=f}),this.preferencesModel.audioModel.supportsAnyVoicing&&(this.toolbar=new z$(this.preferencesModel.audioModel.toolbarEnabledProperty,this.selectedScreenProperty,this.lookAndFeel),this.toolbar.rightPositionProperty.lazyLink(()=>{this.resize(this.boundsProperty.value.width,this.boundsProperty.value.height)})),this.display=new yg(a),this.rootNode=this.display.rootNode,yc.initialize(this,this.display),this.activeProperty.lazyLink(f=>{f&&(this.lastStepTime=null,this.lastAnimationFrameTime=null)}),Cn.multilink([this.activeProperty,phet.joist.playbackModeEnabledProperty],(f,g)=>{g?(this.display.interactive=!0,or.enabled=!0):(this.display.interactive=f,or.enabled=f)}),document.body.appendChild(this.display.domElement),CX.start(this),this.navigationBar=new iw(this,R.GENERAL_VIEW.createTandem("navigationBar")),this.updateBackground=()=>{this.lookAndFeel.backgroundColorProperty.value=ct.toColor(this.selectedScreenProperty.value.backgroundColorProperty.value)},this.lookAndFeel.backgroundColorProperty.link(f=>{this.display.backgroundColor=f}),this.selectedScreenProperty.link(()=>this.updateBackground()),this.selectedScreenProperty.lazyLink((f,g)=>g.view.interruptSubtreeInput()),this.simInfo=new vg(this),R.PHET_IO_ENABLED&&phet.phetio.phetioEngine.onSimConstructionStarted(this.simInfo,this.isConstructionCompleteProperty,this.frameEndedEmitter,this.display),Yl.lazyLink(f=>{f||this.updateViews()}),this.boundRunAnimationLoop=this.runAnimationLoop.bind(this),phet.chipper.queryParameters.legendsOfLearning&&new jZ(this).start(),phet.chipper.isSceneryStack}updateViews(){this.resizeToWindow(),this.selectedScreenProperty.value.view.step&&this.selectedScreenProperty.value.view.step(0),this.display.descriptionUtteranceQueue.clear(),Eo.clear(),Rv.runOnNextTick(()=>phet.joist.display.updateDisplay())}finishInit(e){ie.each(e,s=>{s.view.layerSplit=!0,this.detachInactiveScreenViews||this.display.simulationRoot.addChild(s.view)}),this.display.simulationRoot.addChild(this.navigationBar),this.preferencesModel.audioModel.supportsAnyVoicing&&(this.display.simulationRoot.addChild(this.toolbar),this.display.simulationRoot.pdomOrder=[this.toolbar],$i.voicingFullyEnabledProperty.link(s=>{this.setSimVoicingVisible(s)})),this.selectedScreenProperty.link(s=>{e.forEach(r=>{const a=r===s;a&&(r.activeProperty.set(a),this.detachInactiveScreenViews&&!this.display.simulationRoot.hasChild(r.view)&&this.display.simulationRoot.insertChild(0,r.view)),r.view.setVisible(a),a||(this.detachInactiveScreenViews&&this.display.simulationRoot.hasChild(r.view)&&this.display.simulationRoot.removeChild(r.view),r.activeProperty.set(a))}),this.updateBackground(),Yl.value||al.listener.resetTransform()}),this.display.simulationRoot.addChild(this.topLayer);const t=()=>{phet.joist.playbackModeEnabledProperty.value||(this.resizePending=!0)};self.addEventListener("resize",t),self.addEventListener("orientationchange",t),self.visualViewport&&self.visualViewport.addEventListener("resize",t),this.resizeToWindow(),ms.check();const n=[...ua.warnings,...ua.warnings];if(n.length>0){const s=new bZ(n,{closeButtonListener:()=>{s.hide(),s.dispose()}});s.show()}}showPopup(e,t){t&&(this.rootNode.interruptSubtreeInput(),this.modalNodeStack.push(e),this.setPDOMViewsVisible(!1),this.setNonModalVoicingVisible(!1)),e.layout&&e.layout(this.screenBoundsProperty.value),this.topLayer.addChild(e)}hidePopup(e,t){t&&(this.modalNodeStack.remove(e),this.modalNodeStack.length===0&&(this.setNonModalVoicingVisible($i.voicingFullyEnabledProperty.value),this.setPDOMViewsVisible(!0))),this.topLayer.removeChild(e)}resizeToWindow(){this.resizePending=!1,this.resize(self.innerWidth,self.innerHeight)}resize(e,t){this.resizeAction.execute(e,t)}start(){const e=[];this.screens.forEach(n=>{e.push(()=>{n.backgroundColorProperty.hasListener(this.updateBackground)||n.backgroundColorProperty.link(this.updateBackground),n.initializeModel()}),e.push(()=>{n.initializeView(this.simNameProperty,this.displayedSimNameProperty,this.screens.length,this.homeScreen===n)})});const t=n=>{setTimeout(()=>{e[n]();const s=Or(0,e.length-1,.25,1,n),r=phet.chipper.brand==="phet-io"?"progressBarClipArea":"progressBarForeground";document.getElementById(r)&&document.getElementById(r).setAttribute("width",`${s*this.splashScreenProgressBarWidth}`),n+1<e.length?t(n+1):setTimeout(()=>{this.finishInit(this.screens),Qi.polyfillRequestAnimationFrame(),phet.chipper.queryParameters.profiler&&nP.start(this),this._isConstructionCompleteProperty.value=!0,this.boundRunAnimationLoop(),phet.joist.playbackModeEnabledProperty.value&&zn.emit(0),(!R.PHET_IO_ENABLED||phet.preloads.phetio.queryParameters.phetioStandalone)&&Rq.dispose(),this.simStartedTime=Date.now(),phet.chipper.queryParameters.continuousTest&&phet.chipper.reportContinuousTestResult({type:"continuous-test-load"}),phet.chipper.queryParameters.postMessageOnLoad&&self.parent&&self.parent.postMessage(JSON.stringify({type:"load",url:self.location.href}),"*")},25)},30/e.length)};t(0)}runAnimationLoop(){self.requestAnimationFrame(this.boundRunAnimationLoop),this.activeProperty.value&&!phet.joist.playbackModeEnabledProperty.value&&(this.fuzzFrame(),this.stepOneFrame());const e=Date.now();Rv.emit(vC(this.lastAnimationFrameTime,e)),this.lastAnimationFrameTime=e,R.PHET_IO_ENABLED&&phet.phetio.phetioCommandProcessor.onAnimationLoop(this)}stepOneFrame(){const e=Date.now(),t=vC(this.lastStepTime,e);this.lastStepTime=e,t>0&&this.stepSimulation(t)}stepSimulation(e){this.stepSimulationAction.execute(e)}setPDOMViewsVisible(e){for(let t=0;t<this.screens.length;t++)this.screens[t].view.pdomVisible=e;this.navigationBar.pdomVisible=e,this.homeScreen&&this.homeScreen.view.setPDOMVisible(e),this.toolbar&&this.toolbar.setPDOMVisible(e)}setSimVoicingVisible(e){this.setNonModalVoicingVisible(e),this.topLayer&&this.topLayer.setVoicingVisible(e)}setNonModalVoicingVisible(e){for(let t=0;t<this.screens.length;t++)this.screens[t].view.voicingVisible=e;this.navigationBar.voicingVisible=e}auditScreenNameKeys(){this.screens.length>=2&&this.screens.forEach(e=>{!(e instanceof Hv)&&e.nameProperty instanceof Fe&&e.nameProperty.stringKey})}fuzzFrame(){this.frameCounter>0&&this.display.fuzzInputEvents(),R.PHET_IO_ENABLED&&phet.phetio.phetioEngine.fuzzElements()}getAssertionDebugInfo(){const e={seed:ol.getSeed(),currentScreenName:this.selectedScreenProperty?.value?.constructor.name,secondsSinceSimStarted:this.simStartedTime===null?"sim not started":(Date.now()-this.simStartedTime)/1e3};return this.topLayer.children.length>1&&(e.simTopLayer=this.topLayer.children.map(t=>`${t.constructor.name}${t.constructor.name.includes("Parent")?`: ${t.children.map(n=>n.constructor.name)}`:""}`)),e}}function vC(i,e){return i===null?1/60:(e-i)/1e3}Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i});Math.sign===void 0&&(Math.sign=function(i){return i<0?-1:i>0?1:+i});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&function(){Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(i),t=1;t<arguments.length;t++){var n=arguments[t];if(n!=null)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}}();function Hu(){}Object.assign(Hu.prototype,{addEventListener:function(i,e){this._listeners===void 0&&(this._listeners={});var t=this._listeners;t[i]===void 0&&(t[i]=[]),t[i].indexOf(e)===-1&&t[i].push(e)},hasEventListener:function(i,e){if(this._listeners===void 0)return!1;var t=this._listeners;return t[i]!==void 0&&t[i].indexOf(e)!==-1},removeEventListener:function(i,e){if(this._listeners!==void 0){var t=this._listeners,n=t[i];if(n!==void 0){var s=n.indexOf(e);s!==-1&&n.splice(s,1)}}},dispatchEvent:function(i){if(this._listeners!==void 0){var e=this._listeners,t=e[i.type];if(t!==void 0){i.target=this;for(var n=t.slice(0),s=0,r=n.length;s<r;s++)n[s].call(this,i)}}}});var G$="104",W$=0,bC=1,K$=2,m3=1,Y$=2,v0=0,Xr=1,Rf=2,g3=1,y3=0,v3=1,Bf=2,Um=0,bp=1,nw=2,sw=3,rw=4,b3=5,cp=100,j$=101,X$=102,UA=103,GA=104,Q$=200,J$=201,Z$=202,$$=203,_3=204,A3=205,eee=206,tee=207,iee=208,nee=209,see=210,ree=0,aee=1,oee=2,aw=3,lee=4,hee=5,uee=6,cee=7,m_=0,dee=1,pee=2,WA=0,w3=1,fee=2,mee=3,gee=4,yee=5,sP=300,rP=301,ow=302,S3=303,lw=304,P3=305,aP=306,oP=307,bu=1e3,Ra=1001,Zp=1002,Zr=1003,lP=1004,hP=1005,ga=1006,T3=1007,g_=1008,uP=1009,vee=1010,bee=1011,Gv=1012,_ee=1013,x3=1014,bg=1015,cP=1016,Aee=1017,wee=1018,See=1019,Wv=1020,Pee=1021,$c=1022,Ou=1023,Tee=1024,xee=1025,_p=1026,_g=1027,Eee=1028,_C=33776,AC=33777,wC=33778,SC=33779,PC=35840,TC=35841,xC=35842,EC=35843,Vee=36196,kee=37808,Cee=37809,Dee=37810,Iee=37811,Lee=37812,Mee=37813,Oee=37814,Nee=37815,Ree=37816,Bee=37817,qee=37818,zee=37819,Fee=37820,Hee=37821,Uee=2200,Gee=2201,Wee=2202,Kv=2300,Qy=2301,KA=2302,$p=2400,dp=2401,Yv=2402,dP=0,Kee=1,Yee=2,jv=3e3,jee=3001,E3=3007,Xee=3002,Qee=3004,Jee=3005,Zee=3006,$ee=3200,ete=3201,y_=0,tte=1,tn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var i=[],e=0;e<256;e++)i[e]=(e<16?"0":"")+e.toString(16);return function(){var n=Math.random()*4294967295|0,s=Math.random()*4294967295|0,r=Math.random()*4294967295|0,a=Math.random()*4294967295|0,o=i[n&255]+i[n>>8&255]+i[n>>16&255]+i[n>>24&255]+"-"+i[s&255]+i[s>>8&255]+"-"+i[s>>16&15|64]+i[s>>24&255]+"-"+i[r&63|128]+i[r>>8&255]+"-"+i[r>>16&255]+i[r>>24&255]+i[a&255]+i[a>>8&255]+i[a>>16&255]+i[a>>24&255];return o.toUpperCase()}}(),clamp:function(i,e,t){return Math.max(e,Math.min(t,i))},euclideanModulo:function(i,e){return(i%e+e)%e},mapLinear:function(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)},lerp:function(i,e,t){return(1-t)*i+t*e},smoothstep:function(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))},smootherstep:function(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))},randInt:function(i,e){return i+Math.floor(Math.random()*(e-i+1))},randFloat:function(i,e){return i+Math.random()*(e-i)},randFloatSpread:function(i){return i*(.5-Math.random())},degToRad:function(i){return i*tn.DEG2RAD},radToDeg:function(i){return i*tn.RAD2DEG},isPowerOfTwo:function(i){return(i&i-1)===0&&i!==0},ceilPowerOfTwo:function(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},floorPowerOfTwo:function(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}};function _t(i,e){this.x=i||0,this.y=e||0}Object.defineProperties(_t.prototype,{width:{get:function(){return this.x},set:function(i){this.x=i}},height:{get:function(){return this.y},set:function(i){this.y=i}}});Object.assign(_t.prototype,{isVector2:!0,set:function(i,e){return this.x=i,this.y=e,this},setScalar:function(i){return this.x=i,this.y=i,this},setX:function(i){return this.x=i,this},setY:function(i){return this.y=i,this},setComponent:function(i,e){switch(i){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+i)}return this},getComponent:function(i){switch(i){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+i)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(i){return this.x=i.x,this.y=i.y,this},add:function(i,e){return e!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(i,e)):(this.x+=i.x,this.y+=i.y,this)},addScalar:function(i){return this.x+=i,this.y+=i,this},addVectors:function(i,e){return this.x=i.x+e.x,this.y=i.y+e.y,this},addScaledVector:function(i,e){return this.x+=i.x*e,this.y+=i.y*e,this},sub:function(i,e){return e!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(i,e)):(this.x-=i.x,this.y-=i.y,this)},subScalar:function(i){return this.x-=i,this.y-=i,this},subVectors:function(i,e){return this.x=i.x-e.x,this.y=i.y-e.y,this},multiply:function(i){return this.x*=i.x,this.y*=i.y,this},multiplyScalar:function(i){return this.x*=i,this.y*=i,this},divide:function(i){return this.x/=i.x,this.y/=i.y,this},divideScalar:function(i){return this.multiplyScalar(1/i)},applyMatrix3:function(i){var e=this.x,t=this.y,n=i.elements;return this.x=n[0]*e+n[3]*t+n[6],this.y=n[1]*e+n[4]*t+n[7],this},min:function(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this},max:function(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this},clamp:function(i,e){return this.x=Math.max(i.x,Math.min(e.x,this.x)),this.y=Math.max(i.y,Math.min(e.y,this.y)),this},clampScalar:function(i,e){return this.x=Math.max(i,Math.min(e,this.x)),this.y=Math.max(i,Math.min(e,this.y)),this},clampLength:function(i,e){var t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(i,Math.min(e,t)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(i){return this.x*i.x+this.y*i.y},cross:function(i){return this.x*i.y-this.y*i.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var i=Math.atan2(this.y,this.x);return i<0&&(i+=2*Math.PI),i},distanceTo:function(i){return Math.sqrt(this.distanceToSquared(i))},distanceToSquared:function(i){var e=this.x-i.x,t=this.y-i.y;return e*e+t*t},manhattanDistanceTo:function(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)},setLength:function(i){return this.normalize().multiplyScalar(i)},lerp:function(i,e){return this.x+=(i.x-this.x)*e,this.y+=(i.y-this.y)*e,this},lerpVectors:function(i,e,t){return this.subVectors(e,i).multiplyScalar(t).add(i)},equals:function(i){return i.x===this.x&&i.y===this.y},fromArray:function(i,e){return e===void 0&&(e=0),this.x=i[e],this.y=i[e+1],this},toArray:function(i,e){return i===void 0&&(i=[]),e===void 0&&(e=0),i[e]=this.x,i[e+1]=this.y,i},fromBufferAttribute:function(i,e,t){return t!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=i.getX(e),this.y=i.getY(e),this},rotateAround:function(i,e){var t=Math.cos(e),n=Math.sin(e),s=this.x-i.x,r=this.y-i.y;return this.x=s*t-r*n+i.x,this.y=s*n+r*t+i.y,this}});function wr(i,e,t,n){this._x=i||0,this._y=e||0,this._z=t||0,this._w=n!==void 0?n:1}Object.assign(wr,{slerp:function(i,e,t,n){return t.copy(i).slerp(e,n)},slerpFlat:function(i,e,t,n,s,r,a){var o=t[n+0],l=t[n+1],h=t[n+2],c=t[n+3],f=s[r+0],g=s[r+1],v=s[r+2],A=s[r+3];if(c!==A||o!==f||l!==g||h!==v){var P=1-a,w=o*f+l*g+h*v+c*A,T=w>=0?1:-1,D=1-w*w;if(D>Number.EPSILON){var M=Math.sqrt(D),B=Math.atan2(M,w*T);P=Math.sin(P*B)/M,a=Math.sin(a*B)/M}var O=a*T;if(o=o*P+f*O,l=l*P+g*O,h=h*P+v*O,c=c*P+A*O,P===1-a){var x=1/Math.sqrt(o*o+l*l+h*h+c*c);o*=x,l*=x,h*=x,c*=x}}i[e]=o,i[e+1]=l,i[e+2]=h,i[e+3]=c}});Object.defineProperties(wr.prototype,{x:{get:function(){return this._x},set:function(i){this._x=i,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(i){this._y=i,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(i){this._z=i,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(i){this._w=i,this.onChangeCallback()}}});Object.assign(wr.prototype,{isQuaternion:!0,set:function(i,e,t,n){return this._x=i,this._y=e,this._z=t,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(i){return this._x=i.x,this._y=i.y,this._z=i.z,this._w=i.w,this.onChangeCallback(),this},setFromEuler:function(i,e){if(!(i&&i.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var t=i._x,n=i._y,s=i._z,r=i.order,a=Math.cos,o=Math.sin,l=a(t/2),h=a(n/2),c=a(s/2),f=o(t/2),g=o(n/2),v=o(s/2);return r==="XYZ"?(this._x=f*h*c+l*g*v,this._y=l*g*c-f*h*v,this._z=l*h*v+f*g*c,this._w=l*h*c-f*g*v):r==="YXZ"?(this._x=f*h*c+l*g*v,this._y=l*g*c-f*h*v,this._z=l*h*v-f*g*c,this._w=l*h*c+f*g*v):r==="ZXY"?(this._x=f*h*c-l*g*v,this._y=l*g*c+f*h*v,this._z=l*h*v+f*g*c,this._w=l*h*c-f*g*v):r==="ZYX"?(this._x=f*h*c-l*g*v,this._y=l*g*c+f*h*v,this._z=l*h*v-f*g*c,this._w=l*h*c+f*g*v):r==="YZX"?(this._x=f*h*c+l*g*v,this._y=l*g*c+f*h*v,this._z=l*h*v-f*g*c,this._w=l*h*c-f*g*v):r==="XZY"&&(this._x=f*h*c-l*g*v,this._y=l*g*c-f*h*v,this._z=l*h*v+f*g*c,this._w=l*h*c+f*g*v),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(i,e){var t=e/2,n=Math.sin(t);return this._x=i.x*n,this._y=i.y*n,this._z=i.z*n,this._w=Math.cos(t),this.onChangeCallback(),this},setFromRotationMatrix:function(i){var e=i.elements,t=e[0],n=e[4],s=e[8],r=e[1],a=e[5],o=e[9],l=e[2],h=e[6],c=e[10],f=t+a+c,g;return f>0?(g=.5/Math.sqrt(f+1),this._w=.25/g,this._x=(h-o)*g,this._y=(s-l)*g,this._z=(r-n)*g):t>a&&t>c?(g=2*Math.sqrt(1+t-a-c),this._w=(h-o)/g,this._x=.25*g,this._y=(n+r)/g,this._z=(s+l)/g):a>c?(g=2*Math.sqrt(1+a-t-c),this._w=(s-l)/g,this._x=(n+r)/g,this._y=.25*g,this._z=(o+h)/g):(g=2*Math.sqrt(1+c-t-a),this._w=(r-n)/g,this._x=(s+l)/g,this._y=(o+h)/g,this._z=.25*g),this.onChangeCallback(),this},setFromUnitVectors:function(i,e){var t=1e-6,n=i.dot(e)+1;return n<t?(n=0,Math.abs(i.x)>Math.abs(i.z)?(this._x=-i.y,this._y=i.x,this._z=0,this._w=n):(this._x=0,this._y=-i.z,this._z=i.y,this._w=n)):(this._x=i.y*e.z-i.z*e.y,this._y=i.z*e.x-i.x*e.z,this._z=i.x*e.y-i.y*e.x,this._w=n),this.normalize()},angleTo:function(i){return 2*Math.acos(Math.abs(tn.clamp(this.dot(i),-1,1)))},rotateTowards:function(i,e){var t=this.angleTo(i);if(t===0)return this;var n=Math.min(1,e/t);return this.slerp(i,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(i){return this._x*i._x+this._y*i._y+this._z*i._z+this._w*i._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var i=this.length();return i===0?(this._x=0,this._y=0,this._z=0,this._w=1):(i=1/i,this._x=this._x*i,this._y=this._y*i,this._z=this._z*i,this._w=this._w*i),this.onChangeCallback(),this},multiply:function(i,e){return e!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(i,e)):this.multiplyQuaternions(this,i)},premultiply:function(i){return this.multiplyQuaternions(i,this)},multiplyQuaternions:function(i,e){var t=i._x,n=i._y,s=i._z,r=i._w,a=e._x,o=e._y,l=e._z,h=e._w;return this._x=t*h+r*a+n*l-s*o,this._y=n*h+r*o+s*a-t*l,this._z=s*h+r*l+t*o-n*a,this._w=r*h-t*a-n*o-s*l,this.onChangeCallback(),this},slerp:function(i,e){if(e===0)return this;if(e===1)return this.copy(i);var t=this._x,n=this._y,s=this._z,r=this._w,a=r*i._w+t*i._x+n*i._y+s*i._z;if(a<0?(this._w=-i._w,this._x=-i._x,this._y=-i._y,this._z=-i._z,a=-a):this.copy(i),a>=1)return this._w=r,this._x=t,this._y=n,this._z=s,this;var o=1-a*a;if(o<=Number.EPSILON){var l=1-e;return this._w=l*r+e*this._w,this._x=l*t+e*this._x,this._y=l*n+e*this._y,this._z=l*s+e*this._z,this.normalize()}var h=Math.sqrt(o),c=Math.atan2(h,a),f=Math.sin((1-e)*c)/h,g=Math.sin(e*c)/h;return this._w=r*f+this._w*g,this._x=t*f+this._x*g,this._y=n*f+this._y*g,this._z=s*f+this._z*g,this.onChangeCallback(),this},equals:function(i){return i._x===this._x&&i._y===this._y&&i._z===this._z&&i._w===this._w},fromArray:function(i,e){return e===void 0&&(e=0),this._x=i[e],this._y=i[e+1],this._z=i[e+2],this._w=i[e+3],this.onChangeCallback(),this},toArray:function(i,e){return i===void 0&&(i=[]),e===void 0&&(e=0),i[e]=this._x,i[e+1]=this._y,i[e+2]=this._z,i[e+3]=this._w,i},onChange:function(i){return this.onChangeCallback=i,this},onChangeCallback:function(){}});function Ae(i,e,t){this.x=i||0,this.y=e||0,this.z=t||0}Object.assign(Ae.prototype,{isVector3:!0,set:function(i,e,t){return this.x=i,this.y=e,this.z=t,this},setScalar:function(i){return this.x=i,this.y=i,this.z=i,this},setX:function(i){return this.x=i,this},setY:function(i){return this.y=i,this},setZ:function(i){return this.z=i,this},setComponent:function(i,e){switch(i){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+i)}return this},getComponent:function(i){switch(i){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+i)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(i){return this.x=i.x,this.y=i.y,this.z=i.z,this},add:function(i,e){return e!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(i,e)):(this.x+=i.x,this.y+=i.y,this.z+=i.z,this)},addScalar:function(i){return this.x+=i,this.y+=i,this.z+=i,this},addVectors:function(i,e){return this.x=i.x+e.x,this.y=i.y+e.y,this.z=i.z+e.z,this},addScaledVector:function(i,e){return this.x+=i.x*e,this.y+=i.y*e,this.z+=i.z*e,this},sub:function(i,e){return e!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(i,e)):(this.x-=i.x,this.y-=i.y,this.z-=i.z,this)},subScalar:function(i){return this.x-=i,this.y-=i,this.z-=i,this},subVectors:function(i,e){return this.x=i.x-e.x,this.y=i.y-e.y,this.z=i.z-e.z,this},multiply:function(i,e){return e!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(i,e)):(this.x*=i.x,this.y*=i.y,this.z*=i.z,this)},multiplyScalar:function(i){return this.x*=i,this.y*=i,this.z*=i,this},multiplyVectors:function(i,e){return this.x=i.x*e.x,this.y=i.y*e.y,this.z=i.z*e.z,this},applyEuler:function(){var i=new wr;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(i.setFromEuler(t))}}(),applyAxisAngle:function(){var i=new wr;return function(t,n){return this.applyQuaternion(i.setFromAxisAngle(t,n))}}(),applyMatrix3:function(i){var e=this.x,t=this.y,n=this.z,s=i.elements;return this.x=s[0]*e+s[3]*t+s[6]*n,this.y=s[1]*e+s[4]*t+s[7]*n,this.z=s[2]*e+s[5]*t+s[8]*n,this},applyMatrix4:function(i){var e=this.x,t=this.y,n=this.z,s=i.elements,r=1/(s[3]*e+s[7]*t+s[11]*n+s[15]);return this.x=(s[0]*e+s[4]*t+s[8]*n+s[12])*r,this.y=(s[1]*e+s[5]*t+s[9]*n+s[13])*r,this.z=(s[2]*e+s[6]*t+s[10]*n+s[14])*r,this},applyQuaternion:function(i){var e=this.x,t=this.y,n=this.z,s=i.x,r=i.y,a=i.z,o=i.w,l=o*e+r*n-a*t,h=o*t+a*e-s*n,c=o*n+s*t-r*e,f=-s*e-r*t-a*n;return this.x=l*o+f*-s+h*-a-c*-r,this.y=h*o+f*-r+c*-s-l*-a,this.z=c*o+f*-a+l*-r-h*-s,this},project:function(i){return this.applyMatrix4(i.matrixWorldInverse).applyMatrix4(i.projectionMatrix)},unproject:function(i){return this.applyMatrix4(i.projectionMatrixInverse).applyMatrix4(i.matrixWorld)},transformDirection:function(i){var e=this.x,t=this.y,n=this.z,s=i.elements;return this.x=s[0]*e+s[4]*t+s[8]*n,this.y=s[1]*e+s[5]*t+s[9]*n,this.z=s[2]*e+s[6]*t+s[10]*n,this.normalize()},divide:function(i){return this.x/=i.x,this.y/=i.y,this.z/=i.z,this},divideScalar:function(i){return this.multiplyScalar(1/i)},min:function(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this},max:function(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this},clamp:function(i,e){return this.x=Math.max(i.x,Math.min(e.x,this.x)),this.y=Math.max(i.y,Math.min(e.y,this.y)),this.z=Math.max(i.z,Math.min(e.z,this.z)),this},clampScalar:function(i,e){return this.x=Math.max(i,Math.min(e,this.x)),this.y=Math.max(i,Math.min(e,this.y)),this.z=Math.max(i,Math.min(e,this.z)),this},clampLength:function(i,e){var t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(i,Math.min(e,t)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(i){return this.x*i.x+this.y*i.y+this.z*i.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(i){return this.normalize().multiplyScalar(i)},lerp:function(i,e){return this.x+=(i.x-this.x)*e,this.y+=(i.y-this.y)*e,this.z+=(i.z-this.z)*e,this},lerpVectors:function(i,e,t){return this.subVectors(e,i).multiplyScalar(t).add(i)},cross:function(i,e){return e!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(i,e)):this.crossVectors(this,i)},crossVectors:function(i,e){var t=i.x,n=i.y,s=i.z,r=e.x,a=e.y,o=e.z;return this.x=n*o-s*a,this.y=s*r-t*o,this.z=t*a-n*r,this},projectOnVector:function(i){var e=i.dot(this)/i.lengthSq();return this.copy(i).multiplyScalar(e)},projectOnPlane:function(){var i=new Ae;return function(t){return i.copy(this).projectOnVector(t),this.sub(i)}}(),reflect:function(){var i=new Ae;return function(t){return this.sub(i.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(i){var e=this.dot(i)/Math.sqrt(this.lengthSq()*i.lengthSq());return Math.acos(tn.clamp(e,-1,1))},distanceTo:function(i){return Math.sqrt(this.distanceToSquared(i))},distanceToSquared:function(i){var e=this.x-i.x,t=this.y-i.y,n=this.z-i.z;return e*e+t*t+n*n},manhattanDistanceTo:function(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)+Math.abs(this.z-i.z)},setFromSpherical:function(i){return this.setFromSphericalCoords(i.radius,i.phi,i.theta)},setFromSphericalCoords:function(i,e,t){var n=Math.sin(e)*i;return this.x=n*Math.sin(t),this.y=Math.cos(e)*i,this.z=n*Math.cos(t),this},setFromCylindrical:function(i){return this.setFromCylindricalCoords(i.radius,i.theta,i.y)},setFromCylindricalCoords:function(i,e,t){return this.x=i*Math.sin(e),this.y=t,this.z=i*Math.cos(e),this},setFromMatrixPosition:function(i){var e=i.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(i){var e=this.setFromMatrixColumn(i,0).length(),t=this.setFromMatrixColumn(i,1).length(),n=this.setFromMatrixColumn(i,2).length();return this.x=e,this.y=t,this.z=n,this},setFromMatrixColumn:function(i,e){return this.fromArray(i.elements,e*4)},equals:function(i){return i.x===this.x&&i.y===this.y&&i.z===this.z},fromArray:function(i,e){return e===void 0&&(e=0),this.x=i[e],this.y=i[e+1],this.z=i[e+2],this},toArray:function(i,e){return i===void 0&&(i=[]),e===void 0&&(e=0),i[e]=this.x,i[e+1]=this.y,i[e+2]=this.z,i},fromBufferAttribute:function(i,e,t){return t!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=i.getX(e),this.y=i.getY(e),this.z=i.getZ(e),this}});function Nr(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Nr.prototype,{isMatrix3:!0,set:function(i,e,t,n,s,r,a,o,l){var h=this.elements;return h[0]=i,h[1]=n,h[2]=a,h[3]=e,h[4]=s,h[5]=o,h[6]=t,h[7]=r,h[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(i){var e=this.elements,t=i.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},setFromMatrix4:function(i){var e=i.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var i=new Ae;return function(t){for(var n=0,s=t.count;n<s;n++)i.x=t.getX(n),i.y=t.getY(n),i.z=t.getZ(n),i.applyMatrix3(this),t.setXYZ(n,i.x,i.y,i.z);return t}}(),multiply:function(i){return this.multiplyMatrices(this,i)},premultiply:function(i){return this.multiplyMatrices(i,this)},multiplyMatrices:function(i,e){var t=i.elements,n=e.elements,s=this.elements,r=t[0],a=t[3],o=t[6],l=t[1],h=t[4],c=t[7],f=t[2],g=t[5],v=t[8],A=n[0],P=n[3],w=n[6],T=n[1],D=n[4],M=n[7],B=n[2],O=n[5],x=n[8];return s[0]=r*A+a*T+o*B,s[3]=r*P+a*D+o*O,s[6]=r*w+a*M+o*x,s[1]=l*A+h*T+c*B,s[4]=l*P+h*D+c*O,s[7]=l*w+h*M+c*x,s[2]=f*A+g*T+v*B,s[5]=f*P+g*D+v*O,s[8]=f*w+g*M+v*x,this},multiplyScalar:function(i){var e=this.elements;return e[0]*=i,e[3]*=i,e[6]*=i,e[1]*=i,e[4]*=i,e[7]*=i,e[2]*=i,e[5]*=i,e[8]*=i,this},determinant:function(){var i=this.elements,e=i[0],t=i[1],n=i[2],s=i[3],r=i[4],a=i[5],o=i[6],l=i[7],h=i[8];return e*r*h-e*a*l-t*s*h+t*a*o+n*s*l-n*r*o},getInverse:function(i,e){i&&i.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var t=i.elements,n=this.elements,s=t[0],r=t[1],a=t[2],o=t[3],l=t[4],h=t[5],c=t[6],f=t[7],g=t[8],v=g*l-h*f,A=h*c-g*o,P=f*o-l*c,w=s*v+r*A+a*P;if(w===0){var T="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(e===!0)throw new Error(T);return console.warn(T),this.identity()}var D=1/w;return n[0]=v*D,n[1]=(a*f-g*r)*D,n[2]=(h*r-a*l)*D,n[3]=A*D,n[4]=(g*s-a*c)*D,n[5]=(a*o-h*s)*D,n[6]=P*D,n[7]=(r*c-f*s)*D,n[8]=(l*s-r*o)*D,this},transpose:function(){var i,e=this.elements;return i=e[1],e[1]=e[3],e[3]=i,i=e[2],e[2]=e[6],e[6]=i,i=e[5],e[5]=e[7],e[7]=i,this},getNormalMatrix:function(i){return this.setFromMatrix4(i).getInverse(this).transpose()},transposeIntoArray:function(i){var e=this.elements;return i[0]=e[0],i[1]=e[3],i[2]=e[6],i[3]=e[1],i[4]=e[4],i[5]=e[7],i[6]=e[2],i[7]=e[5],i[8]=e[8],this},setUvTransform:function(i,e,t,n,s,r,a){var o=Math.cos(s),l=Math.sin(s);this.set(t*o,t*l,-t*(o*r+l*a)+r+i,-n*l,n*o,-n*(-l*r+o*a)+a+e,0,0,1)},scale:function(i,e){var t=this.elements;return t[0]*=i,t[3]*=i,t[6]*=i,t[1]*=e,t[4]*=e,t[7]*=e,this},rotate:function(i){var e=Math.cos(i),t=Math.sin(i),n=this.elements,s=n[0],r=n[3],a=n[6],o=n[1],l=n[4],h=n[7];return n[0]=e*s+t*o,n[3]=e*r+t*l,n[6]=e*a+t*h,n[1]=-t*s+e*o,n[4]=-t*r+e*l,n[7]=-t*a+e*h,this},translate:function(i,e){var t=this.elements;return t[0]+=i*t[2],t[3]+=i*t[5],t[6]+=i*t[8],t[1]+=e*t[2],t[4]+=e*t[5],t[7]+=e*t[8],this},equals:function(i){for(var e=this.elements,t=i.elements,n=0;n<9;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(i,e){e===void 0&&(e=0);for(var t=0;t<9;t++)this.elements[t]=i[t+e];return this},toArray:function(i,e){i===void 0&&(i=[]),e===void 0&&(e=0);var t=this.elements;return i[e]=t[0],i[e+1]=t[1],i[e+2]=t[2],i[e+3]=t[3],i[e+4]=t[4],i[e+5]=t[5],i[e+6]=t[6],i[e+7]=t[7],i[e+8]=t[8],i}});var tp,ed={getDataURL:function(i){var e;if(typeof HTMLCanvasElement>"u")return i.src;if(i instanceof HTMLCanvasElement)e=i;else{tp===void 0&&(tp=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),tp.width=i.width,tp.height=i.height;var t=tp.getContext("2d");i instanceof ImageData?t.putImageData(i,0,0):t.drawImage(i,0,0,i.width,i.height),e=tp}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},ite=0;function vs(i,e,t,n,s,r,a,o,l,h){Object.defineProperty(this,"id",{value:ite++}),this.uuid=tn.generateUUID(),this.name="",this.image=i!==void 0?i:vs.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=e!==void 0?e:vs.DEFAULT_MAPPING,this.wrapS=t!==void 0?t:Ra,this.wrapT=n!==void 0?n:Ra,this.magFilter=s!==void 0?s:ga,this.minFilter=r!==void 0?r:g_,this.anisotropy=l!==void 0?l:1,this.format=a!==void 0?a:Ou,this.type=o!==void 0?o:uP,this.offset=new _t(0,0),this.repeat=new _t(1,1),this.center=new _t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h!==void 0?h:jv,this.version=0,this.onUpdate=null}vs.DEFAULT_IMAGE=void 0;vs.DEFAULT_MAPPING=sP;vs.prototype=Object.assign(Object.create(Hu.prototype),{constructor:vs,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.name=i.name,this.image=i.image,this.mipmaps=i.mipmaps.slice(0),this.mapping=i.mapping,this.wrapS=i.wrapS,this.wrapT=i.wrapT,this.magFilter=i.magFilter,this.minFilter=i.minFilter,this.anisotropy=i.anisotropy,this.format=i.format,this.type=i.type,this.offset.copy(i.offset),this.repeat.copy(i.repeat),this.center.copy(i.center),this.rotation=i.rotation,this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrix.copy(i.matrix),this.generateMipmaps=i.generateMipmaps,this.premultiplyAlpha=i.premultiplyAlpha,this.flipY=i.flipY,this.unpackAlignment=i.unpackAlignment,this.encoding=i.encoding,this},toJSON:function(i){var e=i===void 0||typeof i=="string";if(!e&&i.textures[this.uuid]!==void 0)return i.textures[this.uuid];var t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var n=this.image;if(n.uuid===void 0&&(n.uuid=tn.generateUUID()),!e&&i.images[n.uuid]===void 0){var s;if(Array.isArray(n)){s=[];for(var r=0,a=n.length;r<a;r++)s.push(ed.getDataURL(n[r]))}else s=ed.getDataURL(n);i.images[n.uuid]={uuid:n.uuid,url:s}}t.image=n.uuid}return e||(i.textures[this.uuid]=t),t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(i){if(this.mapping!==sP)return i;if(i.applyMatrix3(this.matrix),i.x<0||i.x>1)switch(this.wrapS){case bu:i.x=i.x-Math.floor(i.x);break;case Ra:i.x=i.x<0?0:1;break;case Zp:Math.abs(Math.floor(i.x)%2)===1?i.x=Math.ceil(i.x)-i.x:i.x=i.x-Math.floor(i.x);break}if(i.y<0||i.y>1)switch(this.wrapT){case bu:i.y=i.y-Math.floor(i.y);break;case Ra:i.y=i.y<0?0:1;break;case Zp:Math.abs(Math.floor(i.y)%2)===1?i.y=Math.ceil(i.y)-i.y:i.y=i.y-Math.floor(i.y);break}return this.flipY&&(i.y=1-i.y),i}});Object.defineProperty(vs.prototype,"needsUpdate",{set:function(i){i===!0&&this.version++}});function hs(i,e,t,n){this.x=i||0,this.y=e||0,this.z=t||0,this.w=n!==void 0?n:1}Object.assign(hs.prototype,{isVector4:!0,set:function(i,e,t,n){return this.x=i,this.y=e,this.z=t,this.w=n,this},setScalar:function(i){return this.x=i,this.y=i,this.z=i,this.w=i,this},setX:function(i){return this.x=i,this},setY:function(i){return this.y=i,this},setZ:function(i){return this.z=i,this},setW:function(i){return this.w=i,this},setComponent:function(i,e){switch(i){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+i)}return this},getComponent:function(i){switch(i){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+i)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(i){return this.x=i.x,this.y=i.y,this.z=i.z,this.w=i.w!==void 0?i.w:1,this},add:function(i,e){return e!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(i,e)):(this.x+=i.x,this.y+=i.y,this.z+=i.z,this.w+=i.w,this)},addScalar:function(i){return this.x+=i,this.y+=i,this.z+=i,this.w+=i,this},addVectors:function(i,e){return this.x=i.x+e.x,this.y=i.y+e.y,this.z=i.z+e.z,this.w=i.w+e.w,this},addScaledVector:function(i,e){return this.x+=i.x*e,this.y+=i.y*e,this.z+=i.z*e,this.w+=i.w*e,this},sub:function(i,e){return e!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(i,e)):(this.x-=i.x,this.y-=i.y,this.z-=i.z,this.w-=i.w,this)},subScalar:function(i){return this.x-=i,this.y-=i,this.z-=i,this.w-=i,this},subVectors:function(i,e){return this.x=i.x-e.x,this.y=i.y-e.y,this.z=i.z-e.z,this.w=i.w-e.w,this},multiplyScalar:function(i){return this.x*=i,this.y*=i,this.z*=i,this.w*=i,this},applyMatrix4:function(i){var e=this.x,t=this.y,n=this.z,s=this.w,r=i.elements;return this.x=r[0]*e+r[4]*t+r[8]*n+r[12]*s,this.y=r[1]*e+r[5]*t+r[9]*n+r[13]*s,this.z=r[2]*e+r[6]*t+r[10]*n+r[14]*s,this.w=r[3]*e+r[7]*t+r[11]*n+r[15]*s,this},divideScalar:function(i){return this.multiplyScalar(1/i)},setAxisAngleFromQuaternion:function(i){this.w=2*Math.acos(i.w);var e=Math.sqrt(1-i.w*i.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=i.x/e,this.y=i.y/e,this.z=i.z/e),this},setAxisAngleFromRotationMatrix:function(i){var e,t,n,s,r=.01,a=.1,o=i.elements,l=o[0],h=o[4],c=o[8],f=o[1],g=o[5],v=o[9],A=o[2],P=o[6],w=o[10];if(Math.abs(h-f)<r&&Math.abs(c-A)<r&&Math.abs(v-P)<r){if(Math.abs(h+f)<a&&Math.abs(c+A)<a&&Math.abs(v+P)<a&&Math.abs(l+g+w-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var T=(l+1)/2,D=(g+1)/2,M=(w+1)/2,B=(h+f)/4,O=(c+A)/4,x=(v+P)/4;return T>D&&T>M?T<r?(t=0,n=.707106781,s=.707106781):(t=Math.sqrt(T),n=B/t,s=O/t):D>M?D<r?(t=.707106781,n=0,s=.707106781):(n=Math.sqrt(D),t=B/n,s=x/n):M<r?(t=.707106781,n=.707106781,s=0):(s=Math.sqrt(M),t=O/s,n=x/s),this.set(t,n,s,e),this}var Z=Math.sqrt((P-v)*(P-v)+(c-A)*(c-A)+(f-h)*(f-h));return Math.abs(Z)<.001&&(Z=1),this.x=(P-v)/Z,this.y=(c-A)/Z,this.z=(f-h)/Z,this.w=Math.acos((l+g+w-1)/2),this},min:function(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this.w=Math.min(this.w,i.w),this},max:function(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this.w=Math.max(this.w,i.w),this},clamp:function(i,e){return this.x=Math.max(i.x,Math.min(e.x,this.x)),this.y=Math.max(i.y,Math.min(e.y,this.y)),this.z=Math.max(i.z,Math.min(e.z,this.z)),this.w=Math.max(i.w,Math.min(e.w,this.w)),this},clampScalar:function(){var i,e;return function(n,s){return i===void 0&&(i=new hs,e=new hs),i.set(n,n,n,n),e.set(s,s,s,s),this.clamp(i,e)}}(),clampLength:function(i,e){var t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(i,Math.min(e,t)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(i){return this.x*i.x+this.y*i.y+this.z*i.z+this.w*i.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(i){return this.normalize().multiplyScalar(i)},lerp:function(i,e){return this.x+=(i.x-this.x)*e,this.y+=(i.y-this.y)*e,this.z+=(i.z-this.z)*e,this.w+=(i.w-this.w)*e,this},lerpVectors:function(i,e,t){return this.subVectors(e,i).multiplyScalar(t).add(i)},equals:function(i){return i.x===this.x&&i.y===this.y&&i.z===this.z&&i.w===this.w},fromArray:function(i,e){return e===void 0&&(e=0),this.x=i[e],this.y=i[e+1],this.z=i[e+2],this.w=i[e+3],this},toArray:function(i,e){return i===void 0&&(i=[]),e===void 0&&(e=0),i[e]=this.x,i[e+1]=this.y,i[e+2]=this.z,i[e+3]=this.w,i},fromBufferAttribute:function(i,e,t){return t!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=i.getX(e),this.y=i.getY(e),this.z=i.getZ(e),this.w=i.getW(e),this}});function Uh(i,e,t){this.width=i,this.height=e,this.scissor=new hs(0,0,i,e),this.scissorTest=!1,this.viewport=new hs(0,0,i,e),t=t||{},this.texture=new vs(void 0,void 0,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ga,this.depthBuffer=t.depthBuffer!==void 0?t.depthBuffer:!0,this.stencilBuffer=t.stencilBuffer!==void 0?t.stencilBuffer:!0,this.depthTexture=t.depthTexture!==void 0?t.depthTexture:null}Uh.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Uh,isWebGLRenderTarget:!0,setSize:function(i,e){(this.width!==i||this.height!==e)&&(this.width=i,this.height=e,this.dispose()),this.viewport.set(0,0,i,e),this.scissor.set(0,0,i,e)},clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.width=i.width,this.height=i.height,this.viewport.copy(i.viewport),this.texture=i.texture.clone(),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function VC(i,e,t){Uh.call(this,i,e,t),this.samples=4}VC.prototype=Object.assign(Object.create(Uh.prototype),{constructor:VC,isWebGLMultisampleRenderTarget:!0,copy:function(i){return Uh.prototype.copy.call(this,i),this.samples=i.samples,this}});function ef(i,e,t){Uh.call(this,i,e,t)}ef.prototype=Object.create(Uh.prototype);ef.prototype.constructor=ef;ef.prototype.isWebGLRenderTargetCube=!0;function tf(i,e,t,n,s,r,a,o,l,h,c,f){vs.call(this,null,r,a,o,l,h,n,s,c,f),this.image={data:i,width:e,height:t},this.magFilter=l!==void 0?l:Zr,this.minFilter=h!==void 0?h:Zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}tf.prototype=Object.create(vs.prototype);tf.prototype.constructor=tf;tf.prototype.isDataTexture=!0;function zl(i,e){this.min=i!==void 0?i:new Ae(1/0,1/0,1/0),this.max=e!==void 0?e:new Ae(-1/0,-1/0,-1/0)}Object.assign(zl.prototype,{isBox3:!0,set:function(i,e){return this.min.copy(i),this.max.copy(e),this},setFromArray:function(i){for(var e=1/0,t=1/0,n=1/0,s=-1/0,r=-1/0,a=-1/0,o=0,l=i.length;o<l;o+=3){var h=i[o],c=i[o+1],f=i[o+2];h<e&&(e=h),c<t&&(t=c),f<n&&(n=f),h>s&&(s=h),c>r&&(r=c),f>a&&(a=f)}return this.min.set(e,t,n),this.max.set(s,r,a),this},setFromBufferAttribute:function(i){for(var e=1/0,t=1/0,n=1/0,s=-1/0,r=-1/0,a=-1/0,o=0,l=i.count;o<l;o++){var h=i.getX(o),c=i.getY(o),f=i.getZ(o);h<e&&(e=h),c<t&&(t=c),f<n&&(n=f),h>s&&(s=h),c>r&&(r=c),f>a&&(a=f)}return this.min.set(e,t,n),this.max.set(s,r,a),this},setFromPoints:function(i){this.makeEmpty();for(var e=0,t=i.length;e<t;e++)this.expandByPoint(i[e]);return this},setFromCenterAndSize:function(){var i=new Ae;return function(t,n){var s=i.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}}(),setFromObject:function(i){return this.makeEmpty(),this.expandByObject(i)},clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.min.copy(i.min),this.max.copy(i.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(i){return i===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),i=new Ae),this.isEmpty()?i.set(0,0,0):i.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(i){return i===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),i=new Ae),this.isEmpty()?i.set(0,0,0):i.subVectors(this.max,this.min)},expandByPoint:function(i){return this.min.min(i),this.max.max(i),this},expandByVector:function(i){return this.min.sub(i),this.max.add(i),this},expandByScalar:function(i){return this.min.addScalar(-i),this.max.addScalar(i),this},expandByObject:function(){var i,e,t,n=new Ae;function s(r){var a=r.geometry;if(a!==void 0){if(a.isGeometry){var o=a.vertices;for(e=0,t=o.length;e<t;e++)n.copy(o[e]),n.applyMatrix4(r.matrixWorld),i.expandByPoint(n)}else if(a.isBufferGeometry){var l=a.attributes.position;if(l!==void 0)for(e=0,t=l.count;e<t;e++)n.fromBufferAttribute(l,e).applyMatrix4(r.matrixWorld),i.expandByPoint(n)}}}return function(a){return i=this,a.updateMatrixWorld(!0),a.traverse(s),this}}(),containsPoint:function(i){return!(i.x<this.min.x||i.x>this.max.x||i.y<this.min.y||i.y>this.max.y||i.z<this.min.z||i.z>this.max.z)},containsBox:function(i){return this.min.x<=i.min.x&&i.max.x<=this.max.x&&this.min.y<=i.min.y&&i.max.y<=this.max.y&&this.min.z<=i.min.z&&i.max.z<=this.max.z},getParameter:function(i,e){return e===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Ae),e.set((i.x-this.min.x)/(this.max.x-this.min.x),(i.y-this.min.y)/(this.max.y-this.min.y),(i.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(i){return!(i.max.x<this.min.x||i.min.x>this.max.x||i.max.y<this.min.y||i.min.y>this.max.y||i.max.z<this.min.z||i.min.z>this.max.z)},intersectsSphere:function(){var i=new Ae;return function(t){return this.clampPoint(t.center,i),i.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(i){var e,t;return i.normal.x>0?(e=i.normal.x*this.min.x,t=i.normal.x*this.max.x):(e=i.normal.x*this.max.x,t=i.normal.x*this.min.x),i.normal.y>0?(e+=i.normal.y*this.min.y,t+=i.normal.y*this.max.y):(e+=i.normal.y*this.max.y,t+=i.normal.y*this.min.y),i.normal.z>0?(e+=i.normal.z*this.min.z,t+=i.normal.z*this.max.z):(e+=i.normal.z*this.max.z,t+=i.normal.z*this.min.z),e<=-i.constant&&t>=-i.constant},intersectsTriangle:function(){var i=new Ae,e=new Ae,t=new Ae,n=new Ae,s=new Ae,r=new Ae,a=new Ae,o=new Ae,l=new Ae,h=new Ae;function c(f){var g,v;for(g=0,v=f.length-3;g<=v;g+=3){a.fromArray(f,g);var A=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),P=i.dot(a),w=e.dot(a),T=t.dot(a);if(Math.max(-Math.max(P,w,T),Math.min(P,w,T))>A)return!1}return!0}return function(g){if(this.isEmpty())return!1;this.getCenter(o),l.subVectors(this.max,o),i.subVectors(g.a,o),e.subVectors(g.b,o),t.subVectors(g.c,o),n.subVectors(e,i),s.subVectors(t,e),r.subVectors(i,t);var v=[0,-n.z,n.y,0,-s.z,s.y,0,-r.z,r.y,n.z,0,-n.x,s.z,0,-s.x,r.z,0,-r.x,-n.y,n.x,0,-s.y,s.x,0,-r.y,r.x,0];return!c(v)||(v=[1,0,0,0,1,0,0,0,1],!c(v))?!1:(h.crossVectors(n,s),v=[h.x,h.y,h.z],c(v))}}(),clampPoint:function(i,e){return e===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Ae),e.copy(i).clamp(this.min,this.max)},distanceToPoint:function(){var i=new Ae;return function(t){var n=i.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var i=new Ae;return function(t){return t===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=this.getSize(i).length()*.5,t}}(),intersect:function(i){return this.min.max(i.min),this.max.min(i.max),this.isEmpty()&&this.makeEmpty(),this},union:function(i){return this.min.min(i.min),this.max.max(i.max),this},applyMatrix4:function(){var i=[new Ae,new Ae,new Ae,new Ae,new Ae,new Ae,new Ae,new Ae];return function(t){return this.isEmpty()?this:(i[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),i[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),i[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),i[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),i[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),i[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),i[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),i[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(i),this)}}(),translate:function(i){return this.min.add(i),this.max.add(i),this},equals:function(i){return i.min.equals(this.min)&&i.max.equals(this.max)}});function Gh(i,e){this.center=i!==void 0?i:new Ae,this.radius=e!==void 0?e:0}Object.assign(Gh.prototype,{set:function(i,e){return this.center.copy(i),this.radius=e,this},setFromPoints:function(){var i=new zl;return function(t,n){var s=this.center;n!==void 0?s.copy(n):i.setFromPoints(t).getCenter(s);for(var r=0,a=0,o=t.length;a<o;a++)r=Math.max(r,s.distanceToSquared(t[a]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.center.copy(i.center),this.radius=i.radius,this},empty:function(){return this.radius<=0},containsPoint:function(i){return i.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(i){return i.distanceTo(this.center)-this.radius},intersectsSphere:function(i){var e=this.radius+i.radius;return i.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(i){return i.intersectsSphere(this)},intersectsPlane:function(i){return Math.abs(i.distanceToPoint(this.center))<=this.radius},clampPoint:function(i,e){var t=this.center.distanceToSquared(i);return e===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Ae),e.copy(i),t>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(i){return i===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),i=new zl),i.set(this.center,this.center),i.expandByScalar(this.radius),i},applyMatrix4:function(i){return this.center.applyMatrix4(i),this.radius=this.radius*i.getMaxScaleOnAxis(),this},translate:function(i){return this.center.add(i),this},equals:function(i){return i.center.equals(this.center)&&i.radius===this.radius}});function Mh(i,e){this.normal=i!==void 0?i:new Ae(1,0,0),this.constant=e!==void 0?e:0}Object.assign(Mh.prototype,{set:function(i,e){return this.normal.copy(i),this.constant=e,this},setComponents:function(i,e,t,n){return this.normal.set(i,e,t),this.constant=n,this},setFromNormalAndCoplanarPoint:function(i,e){return this.normal.copy(i),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var i=new Ae,e=new Ae;return function(n,s,r){var a=i.subVectors(r,s).cross(e.subVectors(n,s)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.normal.copy(i.normal),this.constant=i.constant,this},normalize:function(){var i=1/this.normal.length();return this.normal.multiplyScalar(i),this.constant*=i,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(i){return this.normal.dot(i)+this.constant},distanceToSphere:function(i){return this.distanceToPoint(i.center)-i.radius},projectPoint:function(i,e){return e===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Ae),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(i)).add(i)},intersectLine:function(){var i=new Ae;return function(t,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Ae);var s=t.delta(i),r=this.normal.dot(s);if(r===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/r;if(!(a<0||a>1))return n.copy(s).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(i){var e=this.distanceToPoint(i.start),t=this.distanceToPoint(i.end);return e<0&&t>0||t<0&&e>0},intersectsBox:function(i){return i.intersectsPlane(this)},intersectsSphere:function(i){return i.intersectsPlane(this)},coplanarPoint:function(i){return i===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),i=new Ae),i.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var i=new Ae,e=new Nr;return function(n,s){var r=s||e.getNormalMatrix(n),a=this.coplanarPoint(i).applyMatrix4(n),o=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(o),this}}(),translate:function(i){return this.constant-=i.dot(this.normal),this},equals:function(i){return i.normal.equals(this.normal)&&i.constant===this.constant}});function pP(i,e,t,n,s,r){this.planes=[i!==void 0?i:new Mh,e!==void 0?e:new Mh,t!==void 0?t:new Mh,n!==void 0?n:new Mh,s!==void 0?s:new Mh,r!==void 0?r:new Mh]}Object.assign(pP.prototype,{set:function(i,e,t,n,s,r){var a=this.planes;return a[0].copy(i),a[1].copy(e),a[2].copy(t),a[3].copy(n),a[4].copy(s),a[5].copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(i){for(var e=this.planes,t=0;t<6;t++)e[t].copy(i.planes[t]);return this},setFromMatrix:function(i){var e=this.planes,t=i.elements,n=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5],h=t[6],c=t[7],f=t[8],g=t[9],v=t[10],A=t[11],P=t[12],w=t[13],T=t[14],D=t[15];return e[0].setComponents(a-n,c-o,A-f,D-P).normalize(),e[1].setComponents(a+n,c+o,A+f,D+P).normalize(),e[2].setComponents(a+s,c+l,A+g,D+w).normalize(),e[3].setComponents(a-s,c-l,A-g,D-w).normalize(),e[4].setComponents(a-r,c-h,A-v,D-T).normalize(),e[5].setComponents(a+r,c+h,A+v,D+T).normalize(),this},intersectsObject:function(){var i=new Gh;return function(t){var n=t.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),i.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(i)}}(),intersectsSprite:function(){var i=new Gh;return function(t){return i.center.set(0,0,0),i.radius=.7071067811865476,i.applyMatrix4(t.matrixWorld),this.intersectsSphere(i)}}(),intersectsSphere:function(i){for(var e=this.planes,t=i.center,n=-i.radius,s=0;s<6;s++){var r=e[s].distanceToPoint(t);if(r<n)return!1}return!0},intersectsBox:function(){var i=new Ae;return function(t){for(var n=this.planes,s=0;s<6;s++){var r=n[s];if(i.x=r.normal.x>0?t.max.x:t.min.x,i.y=r.normal.y>0?t.max.y:t.min.y,i.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(i)<0)return!1}return!0}}(),containsPoint:function(i){for(var e=this.planes,t=0;t<6;t++)if(e[t].distanceToPoint(i)<0)return!1;return!0}});function Fi(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Fi.prototype,{isMatrix4:!0,set:function(i,e,t,n,s,r,a,o,l,h,c,f,g,v,A,P){var w=this.elements;return w[0]=i,w[4]=e,w[8]=t,w[12]=n,w[1]=s,w[5]=r,w[9]=a,w[13]=o,w[2]=l,w[6]=h,w[10]=c,w[14]=f,w[3]=g,w[7]=v,w[11]=A,w[15]=P,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Fi().fromArray(this.elements)},copy:function(i){var e=this.elements,t=i.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(i){var e=this.elements,t=i.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(i,e,t){return i.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),t.setFromMatrixColumn(this,2),this},makeBasis:function(i,e,t){return this.set(i.x,e.x,t.x,0,i.y,e.y,t.y,0,i.z,e.z,t.z,0,0,0,0,1),this},extractRotation:function(){var i=new Ae;return function(t){var n=this.elements,s=t.elements,r=1/i.setFromMatrixColumn(t,0).length(),a=1/i.setFromMatrixColumn(t,1).length(),o=1/i.setFromMatrixColumn(t,2).length();return n[0]=s[0]*r,n[1]=s[1]*r,n[2]=s[2]*r,n[3]=0,n[4]=s[4]*a,n[5]=s[5]*a,n[6]=s[6]*a,n[7]=0,n[8]=s[8]*o,n[9]=s[9]*o,n[10]=s[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(i){i&&i.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,t=i.x,n=i.y,s=i.z,r=Math.cos(t),a=Math.sin(t),o=Math.cos(n),l=Math.sin(n),h=Math.cos(s),c=Math.sin(s);if(i.order==="XYZ"){var f=r*h,g=r*c,v=a*h,A=a*c;e[0]=o*h,e[4]=-o*c,e[8]=l,e[1]=g+v*l,e[5]=f-A*l,e[9]=-a*o,e[2]=A-f*l,e[6]=v+g*l,e[10]=r*o}else if(i.order==="YXZ"){var P=o*h,w=o*c,T=l*h,D=l*c;e[0]=P+D*a,e[4]=T*a-w,e[8]=r*l,e[1]=r*c,e[5]=r*h,e[9]=-a,e[2]=w*a-T,e[6]=D+P*a,e[10]=r*o}else if(i.order==="ZXY"){var P=o*h,w=o*c,T=l*h,D=l*c;e[0]=P-D*a,e[4]=-r*c,e[8]=T+w*a,e[1]=w+T*a,e[5]=r*h,e[9]=D-P*a,e[2]=-r*l,e[6]=a,e[10]=r*o}else if(i.order==="ZYX"){var f=r*h,g=r*c,v=a*h,A=a*c;e[0]=o*h,e[4]=v*l-g,e[8]=f*l+A,e[1]=o*c,e[5]=A*l+f,e[9]=g*l-v,e[2]=-l,e[6]=a*o,e[10]=r*o}else if(i.order==="YZX"){var M=r*o,B=r*l,O=a*o,x=a*l;e[0]=o*h,e[4]=x-M*c,e[8]=O*c+B,e[1]=c,e[5]=r*h,e[9]=-a*h,e[2]=-l*h,e[6]=B*c+O,e[10]=M-x*c}else if(i.order==="XZY"){var M=r*o,B=r*l,O=a*o,x=a*l;e[0]=o*h,e[4]=-c,e[8]=l*h,e[1]=M*c+x,e[5]=r*h,e[9]=B*c-O,e[2]=O*c-B,e[6]=a*h,e[10]=x*c+M}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var i=new Ae(0,0,0),e=new Ae(1,1,1);return function(n){return this.compose(i,n,e)}}(),lookAt:function(){var i=new Ae,e=new Ae,t=new Ae;return function(s,r,a){var o=this.elements;return t.subVectors(s,r),t.lengthSq()===0&&(t.z=1),t.normalize(),i.crossVectors(a,t),i.lengthSq()===0&&(Math.abs(a.z)===1?t.x+=1e-4:t.z+=1e-4,t.normalize(),i.crossVectors(a,t)),i.normalize(),e.crossVectors(t,i),o[0]=i.x,o[4]=e.x,o[8]=t.x,o[1]=i.y,o[5]=e.y,o[9]=t.y,o[2]=i.z,o[6]=e.z,o[10]=t.z,this}}(),multiply:function(i,e){return e!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(i,e)):this.multiplyMatrices(this,i)},premultiply:function(i){return this.multiplyMatrices(i,this)},multiplyMatrices:function(i,e){var t=i.elements,n=e.elements,s=this.elements,r=t[0],a=t[4],o=t[8],l=t[12],h=t[1],c=t[5],f=t[9],g=t[13],v=t[2],A=t[6],P=t[10],w=t[14],T=t[3],D=t[7],M=t[11],B=t[15],O=n[0],x=n[4],Z=n[8],de=n[12],$=n[1],me=n[5],ue=n[9],Se=n[13],Te=n[2],Re=n[6],We=n[10],Le=n[14],lt=n[3],st=n[7],De=n[11],et=n[15];return s[0]=r*O+a*$+o*Te+l*lt,s[4]=r*x+a*me+o*Re+l*st,s[8]=r*Z+a*ue+o*We+l*De,s[12]=r*de+a*Se+o*Le+l*et,s[1]=h*O+c*$+f*Te+g*lt,s[5]=h*x+c*me+f*Re+g*st,s[9]=h*Z+c*ue+f*We+g*De,s[13]=h*de+c*Se+f*Le+g*et,s[2]=v*O+A*$+P*Te+w*lt,s[6]=v*x+A*me+P*Re+w*st,s[10]=v*Z+A*ue+P*We+w*De,s[14]=v*de+A*Se+P*Le+w*et,s[3]=T*O+D*$+M*Te+B*lt,s[7]=T*x+D*me+M*Re+B*st,s[11]=T*Z+D*ue+M*We+B*De,s[15]=T*de+D*Se+M*Le+B*et,this},multiplyScalar:function(i){var e=this.elements;return e[0]*=i,e[4]*=i,e[8]*=i,e[12]*=i,e[1]*=i,e[5]*=i,e[9]*=i,e[13]*=i,e[2]*=i,e[6]*=i,e[10]*=i,e[14]*=i,e[3]*=i,e[7]*=i,e[11]*=i,e[15]*=i,this},applyToBufferAttribute:function(){var i=new Ae;return function(t){for(var n=0,s=t.count;n<s;n++)i.x=t.getX(n),i.y=t.getY(n),i.z=t.getZ(n),i.applyMatrix4(this),t.setXYZ(n,i.x,i.y,i.z);return t}}(),determinant:function(){var i=this.elements,e=i[0],t=i[4],n=i[8],s=i[12],r=i[1],a=i[5],o=i[9],l=i[13],h=i[2],c=i[6],f=i[10],g=i[14],v=i[3],A=i[7],P=i[11],w=i[15];return v*(+s*o*c-n*l*c-s*a*f+t*l*f+n*a*g-t*o*g)+A*(+e*o*g-e*l*f+s*r*f-n*r*g+n*l*h-s*o*h)+P*(+e*l*c-e*a*g-s*r*c+t*r*g+s*a*h-t*l*h)+w*(-n*a*h-e*o*c+e*a*f+n*r*c-t*r*f+t*o*h)},transpose:function(){var i=this.elements,e;return e=i[1],i[1]=i[4],i[4]=e,e=i[2],i[2]=i[8],i[8]=e,e=i[6],i[6]=i[9],i[9]=e,e=i[3],i[3]=i[12],i[12]=e,e=i[7],i[7]=i[13],i[13]=e,e=i[11],i[11]=i[14],i[14]=e,this},setPosition:function(i){var e=this.elements;return e[12]=i.x,e[13]=i.y,e[14]=i.z,this},getInverse:function(i,e){var t=this.elements,n=i.elements,s=n[0],r=n[1],a=n[2],o=n[3],l=n[4],h=n[5],c=n[6],f=n[7],g=n[8],v=n[9],A=n[10],P=n[11],w=n[12],T=n[13],D=n[14],M=n[15],B=v*D*f-T*A*f+T*c*P-h*D*P-v*c*M+h*A*M,O=w*A*f-g*D*f-w*c*P+l*D*P+g*c*M-l*A*M,x=g*T*f-w*v*f+w*h*P-l*T*P-g*h*M+l*v*M,Z=w*v*c-g*T*c-w*h*A+l*T*A+g*h*D-l*v*D,de=s*B+r*O+a*x+o*Z;if(de===0){var $="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(e===!0)throw new Error($);return console.warn($),this.identity()}var me=1/de;return t[0]=B*me,t[1]=(T*A*o-v*D*o-T*a*P+r*D*P+v*a*M-r*A*M)*me,t[2]=(h*D*o-T*c*o+T*a*f-r*D*f-h*a*M+r*c*M)*me,t[3]=(v*c*o-h*A*o-v*a*f+r*A*f+h*a*P-r*c*P)*me,t[4]=O*me,t[5]=(g*D*o-w*A*o+w*a*P-s*D*P-g*a*M+s*A*M)*me,t[6]=(w*c*o-l*D*o-w*a*f+s*D*f+l*a*M-s*c*M)*me,t[7]=(l*A*o-g*c*o+g*a*f-s*A*f-l*a*P+s*c*P)*me,t[8]=x*me,t[9]=(w*v*o-g*T*o-w*r*P+s*T*P+g*r*M-s*v*M)*me,t[10]=(l*T*o-w*h*o+w*r*f-s*T*f-l*r*M+s*h*M)*me,t[11]=(g*h*o-l*v*o-g*r*f+s*v*f+l*r*P-s*h*P)*me,t[12]=Z*me,t[13]=(g*T*a-w*v*a+w*r*A-s*T*A-g*r*D+s*v*D)*me,t[14]=(w*h*a-l*T*a-w*r*c+s*T*c+l*r*D-s*h*D)*me,t[15]=(l*v*a-g*h*a+g*r*c-s*v*c-l*r*A+s*h*A)*me,this},scale:function(i){var e=this.elements,t=i.x,n=i.y,s=i.z;return e[0]*=t,e[4]*=n,e[8]*=s,e[1]*=t,e[5]*=n,e[9]*=s,e[2]*=t,e[6]*=n,e[10]*=s,e[3]*=t,e[7]*=n,e[11]*=s,this},getMaxScaleOnAxis:function(){var i=this.elements,e=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],t=i[4]*i[4]+i[5]*i[5]+i[6]*i[6],n=i[8]*i[8]+i[9]*i[9]+i[10]*i[10];return Math.sqrt(Math.max(e,t,n))},makeTranslation:function(i,e,t){return this.set(1,0,0,i,0,1,0,e,0,0,1,t,0,0,0,1),this},makeRotationX:function(i){var e=Math.cos(i),t=Math.sin(i);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(i){var e=Math.cos(i),t=Math.sin(i);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(i){var e=Math.cos(i),t=Math.sin(i);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(i,e){var t=Math.cos(e),n=Math.sin(e),s=1-t,r=i.x,a=i.y,o=i.z,l=s*r,h=s*a;return this.set(l*r+t,l*a-n*o,l*o+n*a,0,l*a+n*o,h*a+t,h*o-n*r,0,l*o-n*a,h*o+n*r,s*o*o+t,0,0,0,0,1),this},makeScale:function(i,e,t){return this.set(i,0,0,0,0,e,0,0,0,0,t,0,0,0,0,1),this},makeShear:function(i,e,t){return this.set(1,e,t,0,i,1,t,0,i,e,1,0,0,0,0,1),this},compose:function(i,e,t){var n=this.elements,s=e._x,r=e._y,a=e._z,o=e._w,l=s+s,h=r+r,c=a+a,f=s*l,g=s*h,v=s*c,A=r*h,P=r*c,w=a*c,T=o*l,D=o*h,M=o*c,B=t.x,O=t.y,x=t.z;return n[0]=(1-(A+w))*B,n[1]=(g+M)*B,n[2]=(v-D)*B,n[3]=0,n[4]=(g-M)*O,n[5]=(1-(f+w))*O,n[6]=(P+T)*O,n[7]=0,n[8]=(v+D)*x,n[9]=(P-T)*x,n[10]=(1-(f+A))*x,n[11]=0,n[12]=i.x,n[13]=i.y,n[14]=i.z,n[15]=1,this},decompose:function(){var i=new Ae,e=new Fi;return function(n,s,r){var a=this.elements,o=i.set(a[0],a[1],a[2]).length(),l=i.set(a[4],a[5],a[6]).length(),h=i.set(a[8],a[9],a[10]).length(),c=this.determinant();c<0&&(o=-o),n.x=a[12],n.y=a[13],n.z=a[14],e.copy(this);var f=1/o,g=1/l,v=1/h;return e.elements[0]*=f,e.elements[1]*=f,e.elements[2]*=f,e.elements[4]*=g,e.elements[5]*=g,e.elements[6]*=g,e.elements[8]*=v,e.elements[9]*=v,e.elements[10]*=v,s.setFromRotationMatrix(e),r.x=o,r.y=l,r.z=h,this}}(),makePerspective:function(i,e,t,n,s,r){r===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*s/(e-i),l=2*s/(t-n),h=(e+i)/(e-i),c=(t+n)/(t-n),f=-(r+s)/(r-s),g=-2*r*s/(r-s);return a[0]=o,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(i,e,t,n,s,r){var a=this.elements,o=1/(e-i),l=1/(t-n),h=1/(r-s),c=(e+i)*o,f=(t+n)*l,g=(r+s)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(i){for(var e=this.elements,t=i.elements,n=0;n<16;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(i,e){e===void 0&&(e=0);for(var t=0;t<16;t++)this.elements[t]=i[t+e];return this},toArray:function(i,e){i===void 0&&(i=[]),e===void 0&&(e=0);var t=this.elements;return i[e]=t[0],i[e+1]=t[1],i[e+2]=t[2],i[e+3]=t[3],i[e+4]=t[4],i[e+5]=t[5],i[e+6]=t[6],i[e+7]=t[7],i[e+8]=t[8],i[e+9]=t[9],i[e+10]=t[10],i[e+11]=t[11],i[e+12]=t[12],i[e+13]=t[13],i[e+14]=t[14],i[e+15]=t[15],i}});var nte=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,ste=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rte=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,ate=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( PHYSICAL )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,ote=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,lte="vec3 transformed = vec3( position );",hte=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ute=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick( specularColor, dotNV );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}`,cte=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,dte=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	#endif
#endif`,pte=`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,fte=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )
	varying vec3 vViewPosition;
#endif`,mte=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )
	vViewPosition = - mvPosition.xyz;
#endif`,gte=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,yte=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,vte=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,bte=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,_te=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#define saturate(a) clamp( a, 0.0, 1.0 )
#define whiteCompliment(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}`,Ate=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_textureSize (1024.0)
int getFaceFromDirection(vec3 direction) {
	vec3 absDirection = abs(direction);
	int face = -1;
	if( absDirection.x > absDirection.z ) {
		if(absDirection.x > absDirection.y )
			face = direction.x > 0.0 ? 0 : 3;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	else {
		if(absDirection.z > absDirection.y )
			face = direction.z > 0.0 ? 2 : 5;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	return face;
}
#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
	float dxRoughness = dFdx(roughness);
	float dyRoughness = dFdy(roughness);
	vec3 dx = dFdx( vec * scale * dxRoughness );
	vec3 dy = dFdy( vec * scale * dyRoughness );
	float d = max( dot( dx, dx ), dot( dy, dy ) );
	d = clamp(d, 1.0, cubeUV_rangeClamp);
	float mipLevel = 0.5 * log2(d);
	return vec2(floor(mipLevel), fract(mipLevel));
}
#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
	float a = 16.0 * cubeUV_rcpTextureSize;
	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
	float powScale = exp2_packed.x * exp2_packed.y;
	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
	bool bRes = mipLevel == 0.0;
	scale =  bRes && (scale < a) ? a : scale;
	vec3 r;
	vec2 offset;
	int face = getFaceFromDirection(direction);
	float rcpPowScale = 1.0 / powScale;
	if( face == 0) {
		r = vec3(direction.x, -direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 1) {
		r = vec3(direction.y, direction.x, direction.z);
		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 2) {
		r = vec3(direction.z, direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 3) {
		r = vec3(direction.x, direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else if( face == 4) {
		r = vec3(direction.y, direction.x, -direction.z);
		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else {
		r = vec3(direction.z, -direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	r = normalize(r);
	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
	vec2 base = offset + vec2( texelOffset );
	return base + s * ( scale - 2.0 * texelOffset );
}
#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
vec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {
	float roughnessVal = roughness* cubeUV_maxLods3;
	float r1 = floor(roughnessVal);
	float r2 = r1 + 1.0;
	float t = fract(roughnessVal);
	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
	float s = mipInfo.y;
	float level0 = mipInfo.x;
	float level1 = level0 + 1.0;
	level1 = level1 > 5.0 ? 5.0 : level1;
	level0 += min( floor( s + 0.5 ), 5.0 );
	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
	vec4 result = mix(color10, color20, t);
	return vec4(result.rgb, 1.0);
}
#endif`,wte=`vec3 transformedNormal = normalMatrix * objectNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = normalMatrix * objectTangent;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Ste=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Pte=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );
#endif`,Tte=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,xte=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ete="gl_FragColor = linearToOutputTexel( gl_FragColor );",Vte=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,kte=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToVertex, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		reflectVec = normalize( reflectVec );
		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	envColor = envMapTexelToLinear( envColor );
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Cte=`#if defined( USE_ENVMAP ) || defined( PHYSICAL )
	uniform float reflectivity;
	uniform float envMapIntensity;
#endif
#ifdef USE_ENVMAP
	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )
		varying vec3 vWorldPosition;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Dte=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ite=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Lte=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,Mte=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,Ote=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Nte=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Rte=`#ifdef TOON
	uniform sampler2D gradientMap;
	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
		float dotNL = dot( normal, lightDirection );
		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
		#ifdef USE_GRADIENTMAP
			return texture2D( gradientMap, coord ).rgb;
		#else
			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
		#endif
	}
#endif`,Bte=`#ifdef USE_LIGHTMAP
	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
#endif`,qte=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zte=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif`,Fte=`uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
		float shadowCameraNear;
		float shadowCameraFar;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,Hte=`#if defined( USE_ENVMAP ) && defined( PHYSICAL )
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			vec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );
		#else
			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			vec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,Ute=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Gte=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	#ifdef TOON
		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#else
		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
		vec3 irradiance = dotNL * directLight.color;
	#endif
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Wte=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
#ifdef STANDARD
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );
#endif`,Kte=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
	#ifndef STANDARD
		float clearCoat;
		float clearCoatRoughness;
	#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearCoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifndef STANDARD
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );
	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	#ifndef STANDARD
		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	#ifndef ENVMAP_TYPE_CUBE_UV
		reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	#endif
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifndef STANDARD
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		float dotNL = dotNV;
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	float clearCoatInv = 1.0 - clearCoatDHR;
	#if defined( ENVMAP_TYPE_CUBE_UV )
		vec3 singleScattering = vec3( 0.0 );
		vec3 multiScattering = vec3( 0.0 );
		vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
		BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
		vec3 diffuse = material.diffuseColor;
		reflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;
		reflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;
		reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
	#else
		reflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );
	#endif
	#ifndef STANDARD
		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )
#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Yte=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = normalize( vViewPosition );
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearCoatRadiance = vec3( 0.0 );
#endif`,jte=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )
		irradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );
	#ifndef STANDARD
		clearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );
	#endif
#endif`,Xte=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );
#endif`,Qte=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Jte=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
#endif`,Zte=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,$te=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
	#else
		gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
		gl_Position.z *= gl_Position.w;
	#endif
#endif`,eie=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,tie=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,iie=`#ifdef USE_MAP
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif`,nie=`#ifdef USE_MAP
	uniform mat3 uvTransform;
	uniform sampler2D map;
#endif`,sie=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rie=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,aie=`#ifdef USE_MORPHNORMALS
	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];
#endif`,oie=`#ifdef USE_MORPHTARGETS
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,lie=`#ifdef USE_MORPHTARGETS
	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];
	#endif
#endif`,hie=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
	#endif
#endif`,uie=`#ifdef USE_NORMALMAP
	#ifdef OBJECTSPACE_NORMALMAP
		normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		#ifdef FLIP_SIDED
			normal = - normal;
		#endif
		#ifdef DOUBLE_SIDED
			normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		normal = normalize( normalMatrix * normal );
	#else
		#ifdef USE_TANGENT
			mat3 vTBN = mat3( tangent, bitangent, normal );
			vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
			mapN.xy = normalScale * mapN.xy;
			normal = normalize( vTBN * mapN );
		#else
			normal = perturbNormal2Arb( -vViewPosition, normal );
		#endif
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,cie=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
	#ifdef OBJECTSPACE_NORMALMAP
		uniform mat3 normalMatrix;
	#else
		vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {
			vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
			vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
			vec2 st0 = dFdx( vUv.st );
			vec2 st1 = dFdy( vUv.st );
			float scale = sign( st1.t * st0.s - st0.t * st1.s );
			vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
			vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
			vec3 N = normalize( surf_norm );
			mat3 tsn = mat3( S, T, N );
			vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
			mapN.xy *= normalScale;
			mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			return normalize( tsn * mapN );
		}
	#endif
#endif`,die=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,pie=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,fie=`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
gl_Position = projectionMatrix * mvPosition;`,mie=`#if defined( DITHERING )
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,gie=`#if defined( DITHERING )
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yie=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,vie=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bie=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
		const vec2 offset = vec2( 0.0, 1.0 );
		vec2 texelSize = vec2( 1.0 ) / size;
		vec2 centroidUV = floor( uv * size + 0.5 ) / size;
		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
		vec2 f = fract( uv * size + 0.5 );
		float a = mix( lb, lt, f.y );
		float b = mix( rb, rt, f.y );
		float c = mix( a, b, f.x );
		return c;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,_ie=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
#endif`,Aie=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif`,wie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	DirectionalLight directionalLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	SpotLight spotLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	PointLight pointLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}`,Sie=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Pie=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,Tie=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,xie=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Eie=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Vie=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,kie=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Cie=`#ifndef saturate
	#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,Die=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
#endif`,Iie=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif`,Lie=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Mie=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Oie=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
#endif`,Nie=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = uv2;
#endif`,Rie=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
#endif`,Bie=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,qie=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zie=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = mapTexelToLinear( texColor );
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Fie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Hie=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}`,Uie=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}`,Gie=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Wie=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Kie=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV;
	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Yie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jie=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Xie=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qie=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Jie=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Zie=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$ie=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ene=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,tne=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ine=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nne=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sne=`#define PHYSICAL
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifndef STANDARD
	uniform float clearCoat;
	uniform float clearCoatRoughness;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rne=`#define PHYSICAL
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ane=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,one=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,hne=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,une=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <fog_fragment>
}`,cne=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,pne=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ln={alphamap_fragment:nte,alphamap_pars_fragment:ste,alphatest_fragment:rte,aomap_fragment:ate,aomap_pars_fragment:ote,begin_vertex:lte,beginnormal_vertex:hte,bsdfs:ute,bumpmap_pars_fragment:cte,clipping_planes_fragment:dte,clipping_planes_pars_fragment:pte,clipping_planes_pars_vertex:fte,clipping_planes_vertex:mte,color_fragment:gte,color_pars_fragment:yte,color_pars_vertex:vte,color_vertex:bte,common:_te,cube_uv_reflection_fragment:Ate,defaultnormal_vertex:wte,displacementmap_pars_vertex:Ste,displacementmap_vertex:Pte,emissivemap_fragment:Tte,emissivemap_pars_fragment:xte,encodings_fragment:Ete,encodings_pars_fragment:Vte,envmap_fragment:kte,envmap_pars_fragment:Cte,envmap_pars_vertex:Dte,envmap_physical_pars_fragment:Hte,envmap_vertex:Ite,fog_vertex:Lte,fog_pars_vertex:Mte,fog_fragment:Ote,fog_pars_fragment:Nte,gradientmap_pars_fragment:Rte,lightmap_fragment:Bte,lightmap_pars_fragment:qte,lights_lambert_vertex:zte,lights_pars_begin:Fte,lights_phong_fragment:Ute,lights_phong_pars_fragment:Gte,lights_physical_fragment:Wte,lights_physical_pars_fragment:Kte,lights_fragment_begin:Yte,lights_fragment_maps:jte,lights_fragment_end:Xte,logdepthbuf_fragment:Qte,logdepthbuf_pars_fragment:Jte,logdepthbuf_pars_vertex:Zte,logdepthbuf_vertex:$te,map_fragment:eie,map_pars_fragment:tie,map_particle_fragment:iie,map_particle_pars_fragment:nie,metalnessmap_fragment:sie,metalnessmap_pars_fragment:rie,morphnormal_vertex:aie,morphtarget_pars_vertex:oie,morphtarget_vertex:lie,normal_fragment_begin:hie,normal_fragment_maps:uie,normalmap_pars_fragment:cie,packing:die,premultiplied_alpha_fragment:pie,project_vertex:fie,dithering_fragment:mie,dithering_pars_fragment:gie,roughnessmap_fragment:yie,roughnessmap_pars_fragment:vie,shadowmap_pars_fragment:bie,shadowmap_pars_vertex:_ie,shadowmap_vertex:Aie,shadowmask_pars_fragment:wie,skinbase_vertex:Sie,skinning_pars_vertex:Pie,skinning_vertex:Tie,skinnormal_vertex:xie,specularmap_fragment:Eie,specularmap_pars_fragment:Vie,tonemapping_fragment:kie,tonemapping_pars_fragment:Cie,uv_pars_fragment:Die,uv_pars_vertex:Iie,uv_vertex:Lie,uv2_pars_fragment:Mie,uv2_pars_vertex:Oie,uv2_vertex:Nie,worldpos_vertex:Rie,background_frag:Bie,background_vert:qie,cube_frag:zie,cube_vert:Fie,depth_frag:Hie,depth_vert:Uie,distanceRGBA_frag:Gie,distanceRGBA_vert:Wie,equirect_frag:Kie,equirect_vert:Yie,linedashed_frag:jie,linedashed_vert:Xie,meshbasic_frag:Qie,meshbasic_vert:Jie,meshlambert_frag:Zie,meshlambert_vert:$ie,meshmatcap_frag:ene,meshmatcap_vert:tne,meshphong_frag:ine,meshphong_vert:nne,meshphysical_frag:sne,meshphysical_vert:rne,normal_frag:ane,normal_vert:one,points_frag:lne,points_vert:hne,shadow_frag:une,shadow_vert:cne,sprite_frag:dne,sprite_vert:pne};function Ag(i){var e={};for(var t in i){e[t]={};for(var n in i[t]){var s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture)?e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function Xa(i){for(var e={},t=0;t<i.length;t++){var n=Ag(i[t]);for(var s in n)e[s]=n[s]}return e}var fne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wi(i,e,t){return e===void 0&&t===void 0?this.set(i):this.setRGB(i,e,t)}Object.assign(wi.prototype,{isColor:!0,r:1,g:1,b:1,set:function(i){return i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i),this},setScalar:function(i){return this.r=i,this.g=i,this.b=i,this},setHex:function(i){return i=Math.floor(i),this.r=(i>>16&255)/255,this.g=(i>>8&255)/255,this.b=(i&255)/255,this},setRGB:function(i,e,t){return this.r=i,this.g=e,this.b=t,this},setHSL:function(){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*6*(2/3-n):e}return function(t,n,s){if(t=tn.euclideanModulo(t,1),n=tn.clamp(n,0,1),s=tn.clamp(s,0,1),n===0)this.r=this.g=this.b=s;else{var r=s<=.5?s*(1+n):s+n-s*n,a=2*s-r;this.r=i(a,r,t+1/3),this.g=i(a,r,t),this.b=i(a,r,t-1/3)}return this}}(),setStyle:function(i){function e(f){f!==void 0&&parseFloat(f)<1&&console.warn("THREE.Color: Alpha component of "+i+" will be ignored.")}var t;if(t=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(i)){var n,s=t[1],r=t[2];switch(s){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var a=parseFloat(n[1])/360,o=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(a,o,l)}break}}else if(t=/^\#([A-Fa-f0-9]+)$/.exec(i)){var h=t[1],c=h.length;if(c===3)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(c===6)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}if(i&&i.length>0){var h=fne[i];h!==void 0?this.setHex(h):console.warn("THREE.Color: Unknown color "+i)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(i){return this.r=i.r,this.g=i.g,this.b=i.b,this},copyGammaToLinear:function(i,e){return e===void 0&&(e=2),this.r=Math.pow(i.r,e),this.g=Math.pow(i.g,e),this.b=Math.pow(i.b,e),this},copyLinearToGamma:function(i,e){e===void 0&&(e=2);var t=e>0?1/e:1;return this.r=Math.pow(i.r,t),this.g=Math.pow(i.g,t),this.b=Math.pow(i.b,t),this},convertGammaToLinear:function(i){return this.copyGammaToLinear(this,i),this},convertLinearToGamma:function(i){return this.copyLinearToGamma(this,i),this},copySRGBToLinear:function(){function i(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}return function(t){return this.r=i(t.r),this.g=i(t.g),this.b=i(t.b),this}}(),copyLinearToSRGB:function(){function i(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=i(t.r),this.g=i(t.g),this.b=i(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(i){i===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),i={h:0,s:0,l:0});var e=this.r,t=this.g,n=this.b,s=Math.max(e,t,n),r=Math.min(e,t,n),a,o,l=(r+s)/2;if(r===s)a=0,o=0;else{var h=s-r;switch(o=l<=.5?h/(s+r):h/(2-s-r),s){case e:a=(t-n)/h+(t<n?6:0);break;case t:a=(n-e)/h+2;break;case n:a=(e-t)/h+4;break}a/=6}return i.h=a,i.s=o,i.l=l,i},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(){var i={};return function(e,t,n){return this.getHSL(i),i.h+=e,i.s+=t,i.l+=n,this.setHSL(i.h,i.s,i.l),this}}(),add:function(i){return this.r+=i.r,this.g+=i.g,this.b+=i.b,this},addColors:function(i,e){return this.r=i.r+e.r,this.g=i.g+e.g,this.b=i.b+e.b,this},addScalar:function(i){return this.r+=i,this.g+=i,this.b+=i,this},sub:function(i){return this.r=Math.max(0,this.r-i.r),this.g=Math.max(0,this.g-i.g),this.b=Math.max(0,this.b-i.b),this},multiply:function(i){return this.r*=i.r,this.g*=i.g,this.b*=i.b,this},multiplyScalar:function(i){return this.r*=i,this.g*=i,this.b*=i,this},lerp:function(i,e){return this.r+=(i.r-this.r)*e,this.g+=(i.g-this.g)*e,this.b+=(i.b-this.b)*e,this},lerpHSL:function(){var i={h:0,s:0,l:0},e={h:0,s:0,l:0};return function(n,s){this.getHSL(i),n.getHSL(e);var r=tn.lerp(i.h,e.h,s),a=tn.lerp(i.s,e.s,s),o=tn.lerp(i.l,e.l,s);return this.setHSL(r,a,o),this}}(),equals:function(i){return i.r===this.r&&i.g===this.g&&i.b===this.b},fromArray:function(i,e){return e===void 0&&(e=0),this.r=i[e],this.g=i[e+1],this.b=i[e+2],this},toArray:function(i,e){return i===void 0&&(i=[]),e===void 0&&(e=0),i[e]=this.r,i[e+1]=this.g,i[e+2]=this.b,i},toJSON:function(){return this.getHex()}});var gi={common:{diffuse:{value:new wi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Nr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _t(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new wi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Nr}},sprite:{diffuse:{value:new wi(15658734)},opacity:{value:1},center:{value:new _t(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Nr}}},Oh={basic:{uniforms:Xa([gi.common,gi.specularmap,gi.envmap,gi.aomap,gi.lightmap,gi.fog]),vertexShader:Ln.meshbasic_vert,fragmentShader:Ln.meshbasic_frag},lambert:{uniforms:Xa([gi.common,gi.specularmap,gi.envmap,gi.aomap,gi.lightmap,gi.emissivemap,gi.fog,gi.lights,{emissive:{value:new wi(0)}}]),vertexShader:Ln.meshlambert_vert,fragmentShader:Ln.meshlambert_frag},phong:{uniforms:Xa([gi.common,gi.specularmap,gi.envmap,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.gradientmap,gi.fog,gi.lights,{emissive:{value:new wi(0)},specular:{value:new wi(1118481)},shininess:{value:30}}]),vertexShader:Ln.meshphong_vert,fragmentShader:Ln.meshphong_frag},standard:{uniforms:Xa([gi.common,gi.envmap,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.roughnessmap,gi.metalnessmap,gi.fog,gi.lights,{emissive:{value:new wi(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ln.meshphysical_vert,fragmentShader:Ln.meshphysical_frag},matcap:{uniforms:Xa([gi.common,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.fog,{matcap:{value:null}}]),vertexShader:Ln.meshmatcap_vert,fragmentShader:Ln.meshmatcap_frag},points:{uniforms:Xa([gi.points,gi.fog]),vertexShader:Ln.points_vert,fragmentShader:Ln.points_frag},dashed:{uniforms:Xa([gi.common,gi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ln.linedashed_vert,fragmentShader:Ln.linedashed_frag},depth:{uniforms:Xa([gi.common,gi.displacementmap]),vertexShader:Ln.depth_vert,fragmentShader:Ln.depth_frag},normal:{uniforms:Xa([gi.common,gi.bumpmap,gi.normalmap,gi.displacementmap,{opacity:{value:1}}]),vertexShader:Ln.normal_vert,fragmentShader:Ln.normal_frag},sprite:{uniforms:Xa([gi.sprite,gi.fog]),vertexShader:Ln.sprite_vert,fragmentShader:Ln.sprite_frag},background:{uniforms:{uvTransform:{value:new Nr},t2D:{value:null}},vertexShader:Ln.background_vert,fragmentShader:Ln.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ln.cube_vert,fragmentShader:Ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ln.equirect_vert,fragmentShader:Ln.equirect_frag},distanceRGBA:{uniforms:Xa([gi.common,gi.displacementmap,{referencePosition:{value:new Ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ln.distanceRGBA_vert,fragmentShader:Ln.distanceRGBA_frag},shadow:{uniforms:Xa([gi.lights,gi.fog,{color:{value:new wi(0)},opacity:{value:1}}]),vertexShader:Ln.shadow_vert,fragmentShader:Ln.shadow_frag}};Oh.physical={uniforms:Xa([Oh.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ln.meshphysical_vert,fragmentShader:Ln.meshphysical_frag};function fP(){var i=null,e=!1,t=null;function n(s,r){e!==!1&&(t(s,r),i.requestAnimationFrame(n))}return{start:function(){e!==!0&&t!==null&&(i.requestAnimationFrame(n),e=!0)},stop:function(){e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function mne(i){var e=new WeakMap;function t(o,l){var h=o.array,c=o.dynamic?35048:35044,f=i.createBuffer();i.bindBuffer(l,f),i.bufferData(l,h,c),o.onUploadCallback();var g=5126;return h instanceof Float32Array?g=5126:h instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):h instanceof Uint16Array?g=5123:h instanceof Int16Array?g=5122:h instanceof Uint32Array?g=5125:h instanceof Int32Array?g=5124:h instanceof Int8Array?g=5120:h instanceof Uint8Array&&(g=5121),{buffer:f,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:o.version}}function n(o,l,h){var c=l.array,f=l.updateRange;i.bindBuffer(h,o),l.dynamic===!1?i.bufferData(h,c,35044):f.count===-1?i.bufferSubData(h,0,c):f.count===0?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(i.bufferSubData(h,f.offset*c.BYTES_PER_ELEMENT,c.subarray(f.offset,f.offset+f.count)),f.count=-1)}function s(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function r(o){o.isInterleavedBufferAttribute&&(o=o.data);var l=e.get(o);l&&(i.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){o.isInterleavedBufferAttribute&&(o=o.data);var h=e.get(o);h===void 0?e.set(o,t(o,l)):h.version<o.version&&(n(h.buffer,o,l),h.version=o.version)}return{get:s,remove:r,update:a}}function Xv(i,e,t,n,s,r){this.a=i,this.b=e,this.c=t,this.normal=n&&n.isVector3?n:new Ae,this.vertexNormals=Array.isArray(n)?n:[],this.color=s&&s.isColor?s:new wi,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=r!==void 0?r:0}Object.assign(Xv.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(i){this.a=i.a,this.b=i.b,this.c=i.c,this.normal.copy(i.normal),this.color.copy(i.color),this.materialIndex=i.materialIndex;for(var e=0,t=i.vertexNormals.length;e<t;e++)this.vertexNormals[e]=i.vertexNormals[e].clone();for(var e=0,t=i.vertexColors.length;e<t;e++)this.vertexColors[e]=i.vertexColors[e].clone();return this}});function qf(i,e,t,n){this._x=i||0,this._y=e||0,this._z=t||0,this._order=n||qf.DefaultOrder}qf.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];qf.DefaultOrder="XYZ";Object.defineProperties(qf.prototype,{x:{get:function(){return this._x},set:function(i){this._x=i,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(i){this._y=i,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(i){this._z=i,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(i){this._order=i,this.onChangeCallback()}}});Object.assign(qf.prototype,{isEuler:!0,set:function(i,e,t,n){return this._x=i,this._y=e,this._z=t,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(i){return this._x=i._x,this._y=i._y,this._z=i._z,this._order=i._order,this.onChangeCallback(),this},setFromRotationMatrix:function(i,e,t){var n=tn.clamp,s=i.elements,r=s[0],a=s[4],o=s[8],l=s[1],h=s[5],c=s[9],f=s[2],g=s[6],v=s[10];return e=e||this._order,e==="XYZ"?(this._y=Math.asin(n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-c,v),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(g,h),this._z=0)):e==="YXZ"?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(o,v),this._z=Math.atan2(l,h)):(this._y=Math.atan2(-f,r),this._z=0)):e==="ZXY"?(this._x=Math.asin(n(g,-1,1)),Math.abs(g)<.99999?(this._y=Math.atan2(-f,v),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(l,r))):e==="ZYX"?(this._y=Math.asin(-n(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(g,v),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-a,h))):e==="YZX"?(this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,h),this._y=Math.atan2(-f,r)):(this._x=0,this._y=Math.atan2(o,v))):e==="XZY"?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(g,h),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,v),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,t!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var i=new Fi;return function(t,n,s){return i.makeRotationFromQuaternion(t),this.setFromRotationMatrix(i,n,s)}}(),setFromVector3:function(i,e){return this.set(i.x,i.y,i.z,e||this._order)},reorder:function(){var i=new wr;return function(t){return i.setFromEuler(this),this.setFromQuaternion(i,t)}}(),equals:function(i){return i._x===this._x&&i._y===this._y&&i._z===this._z&&i._order===this._order},fromArray:function(i){return this._x=i[0],this._y=i[1],this._z=i[2],i[3]!==void 0&&(this._order=i[3]),this.onChangeCallback(),this},toArray:function(i,e){return i===void 0&&(i=[]),e===void 0&&(e=0),i[e]=this._x,i[e+1]=this._y,i[e+2]=this._z,i[e+3]=this._order,i},toVector3:function(i){return i?i.set(this._x,this._y,this._z):new Ae(this._x,this._y,this._z)},onChange:function(i){return this.onChangeCallback=i,this},onChangeCallback:function(){}});function V3(){this.mask=1}Object.assign(V3.prototype,{set:function(i){this.mask=1<<i|0},enable:function(i){this.mask|=1<<i|0},toggle:function(i){this.mask^=1<<i|0},disable:function(i){this.mask&=~(1<<i|0)},test:function(i){return(this.mask&i.mask)!==0}});var gne=0;function li(){Object.defineProperty(this,"id",{value:gne++}),this.uuid=tn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=li.DefaultUp.clone();var i=new Ae,e=new qf,t=new wr,n=new Ae(1,1,1);function s(){t.setFromEuler(e,!1)}function r(){e.setFromQuaternion(t,void 0,!1)}e.onChange(s),t.onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Fi},normalMatrix:{value:new Nr}}),this.matrix=new Fi,this.matrixWorld=new Fi,this.matrixAutoUpdate=li.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new V3,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}li.DefaultUp=new Ae(0,1,0);li.DefaultMatrixAutoUpdate=!0;li.prototype=Object.assign(Object.create(Hu.prototype),{constructor:li,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(i){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(i),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(i){return this.quaternion.premultiply(i),this},setRotationFromAxisAngle:function(i,e){this.quaternion.setFromAxisAngle(i,e)},setRotationFromEuler:function(i){this.quaternion.setFromEuler(i,!0)},setRotationFromMatrix:function(i){this.quaternion.setFromRotationMatrix(i)},setRotationFromQuaternion:function(i){this.quaternion.copy(i)},rotateOnAxis:function(){var i=new wr;return function(t,n){return i.setFromAxisAngle(t,n),this.quaternion.multiply(i),this}}(),rotateOnWorldAxis:function(){var i=new wr;return function(t,n){return i.setFromAxisAngle(t,n),this.quaternion.premultiply(i),this}}(),rotateX:function(){var i=new Ae(1,0,0);return function(t){return this.rotateOnAxis(i,t)}}(),rotateY:function(){var i=new Ae(0,1,0);return function(t){return this.rotateOnAxis(i,t)}}(),rotateZ:function(){var i=new Ae(0,0,1);return function(t){return this.rotateOnAxis(i,t)}}(),translateOnAxis:function(){var i=new Ae;return function(t,n){return i.copy(t).applyQuaternion(this.quaternion),this.position.add(i.multiplyScalar(n)),this}}(),translateX:function(){var i=new Ae(1,0,0);return function(t){return this.translateOnAxis(i,t)}}(),translateY:function(){var i=new Ae(0,1,0);return function(t){return this.translateOnAxis(i,t)}}(),translateZ:function(){var i=new Ae(0,0,1);return function(t){return this.translateOnAxis(i,t)}}(),localToWorld:function(i){return i.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var i=new Fi;return function(t){return t.applyMatrix4(i.getInverse(this.matrixWorld))}}(),lookAt:function(){var i=new wr,e=new Fi,t=new Ae,n=new Ae;return function(r,a,o){r.isVector3?t.copy(r):t.set(r,a,o);var l=this.parent;this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(n,t,this.up):e.lookAt(t,n,this.up),this.quaternion.setFromRotationMatrix(e),l&&(e.extractRotation(l.matrixWorld),i.setFromRotationMatrix(e),this.quaternion.premultiply(i.inverse()))}}(),add:function(i){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return i===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",i),this):(i&&i.isObject3D?(i.parent!==null&&i.parent.remove(i),i.parent=this,i.dispatchEvent({type:"added"}),this.children.push(i)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",i),this)},remove:function(i){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var t=this.children.indexOf(i);return t!==-1&&(i.parent=null,i.dispatchEvent({type:"removed"}),this.children.splice(t,1)),this},getObjectById:function(i){return this.getObjectByProperty("id",i)},getObjectByName:function(i){return this.getObjectByProperty("name",i)},getObjectByProperty:function(i,e){if(this[i]===e)return this;for(var t=0,n=this.children.length;t<n;t++){var s=this.children[t],r=s.getObjectByProperty(i,e);if(r!==void 0)return r}},getWorldPosition:function(i){return i===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),i=new Ae),this.updateMatrixWorld(!0),i.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var i=new Ae,e=new Ae;return function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new wr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(i,n,e),n}}(),getWorldScale:function(){var i=new Ae,e=new wr;return function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Ae),this.updateMatrixWorld(!0),this.matrixWorld.decompose(i,e,n),n}}(),getWorldDirection:function(i){i===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),i=new Ae),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return i.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(i){i(this);for(var e=this.children,t=0,n=e.length;t<n;t++)e[t].traverse(i)},traverseVisible:function(i){if(this.visible!==!1){i(this);for(var e=this.children,t=0,n=e.length;t<n;t++)e[t].traverseVisible(i)}},traverseAncestors:function(i){var e=this.parent;e!==null&&(i(e),e.traverseAncestors(i))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(i){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||i)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,i=!0);for(var e=this.children,t=0,n=e.length;t<n;t++)e[t].updateMatrixWorld(i)},updateWorldMatrix:function(i,e){var t=this.parent;if(i===!0&&t!==null&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0)for(var n=this.children,s=0,r=n.length;s<r;s++)n[s].updateWorldMatrix(!1,!0)},toJSON:function(i){var e=i===void 0||typeof i=="string",t={};e&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==dP&&(n.drawMode=this.drawMode);function s(w,T){return w[T.uuid]===void 0&&(w[T.uuid]=T.toJSON(i)),T.uuid}if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(i.geometries,this.geometry);var r=this.geometry.parameters;if(r!==void 0&&r.shapes!==void 0){var a=r.shapes;if(Array.isArray(a))for(var o=0,l=a.length;o<l;o++){var h=a[o];s(i.shapes,h)}else s(i.shapes,a)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var c=[],o=0,l=this.material.length;o<l;o++)c.push(s(i.materials,this.material[o]));n.material=c}else n.material=s(i.materials,this.material);if(this.children.length>0){n.children=[];for(var o=0;o<this.children.length;o++)n.children.push(this.children[o].toJSON(i).object)}if(e){var f=P(i.geometries),g=P(i.materials),v=P(i.textures),A=P(i.images),a=P(i.shapes);f.length>0&&(t.geometries=f),g.length>0&&(t.materials=g),v.length>0&&(t.textures=v),A.length>0&&(t.images=A),a.length>0&&(t.shapes=a)}return t.object=n,t;function P(w){var T=[];for(var D in w){var M=w[D];delete M.metadata,T.push(M)}return T}},clone:function(i){return new this.constructor().copy(this,i)},copy:function(i,e){if(e===void 0&&(e=!0),this.name=i.name,this.up.copy(i.up),this.position.copy(i.position),this.quaternion.copy(i.quaternion),this.scale.copy(i.scale),this.matrix.copy(i.matrix),this.matrixWorld.copy(i.matrixWorld),this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrixWorldNeedsUpdate=i.matrixWorldNeedsUpdate,this.layers.mask=i.layers.mask,this.visible=i.visible,this.castShadow=i.castShadow,this.receiveShadow=i.receiveShadow,this.frustumCulled=i.frustumCulled,this.renderOrder=i.renderOrder,this.userData=JSON.parse(JSON.stringify(i.userData)),e===!0)for(var t=0;t<i.children.length;t++){var n=i.children[t];this.add(n.clone())}return this}});var yne=0;function Gi(){Object.defineProperty(this,"id",{value:yne+=2}),this.uuid=tn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Gi.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Gi,isGeometry:!0,applyMatrix:function(i){for(var e=new Nr().getNormalMatrix(i),t=0,n=this.vertices.length;t<n;t++){var s=this.vertices[t];s.applyMatrix4(i)}for(var t=0,n=this.faces.length;t<n;t++){var r=this.faces[t];r.normal.applyMatrix3(e).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var i=new Fi;return function(t){return i.makeRotationX(t),this.applyMatrix(i),this}}(),rotateY:function(){var i=new Fi;return function(t){return i.makeRotationY(t),this.applyMatrix(i),this}}(),rotateZ:function(){var i=new Fi;return function(t){return i.makeRotationZ(t),this.applyMatrix(i),this}}(),translate:function(){var i=new Fi;return function(t,n,s){return i.makeTranslation(t,n,s),this.applyMatrix(i),this}}(),scale:function(){var i=new Fi;return function(t,n,s){return i.makeScale(t,n,s),this.applyMatrix(i),this}}(),lookAt:function(){var i=new li;return function(t){i.lookAt(t),i.updateMatrix(),this.applyMatrix(i.matrix)}}(),fromBufferGeometry:function(i){var e=this,t=i.index!==null?i.index.array:void 0,n=i.attributes,s=n.position.array,r=n.normal!==void 0?n.normal.array:void 0,a=n.color!==void 0?n.color.array:void 0,o=n.uv!==void 0?n.uv.array:void 0,l=n.uv2!==void 0?n.uv2.array:void 0;l!==void 0&&(this.faceVertexUvs[1]=[]);for(var h=0,c=0;h<s.length;h+=3,c+=2)e.vertices.push(new Ae().fromArray(s,h)),a!==void 0&&e.colors.push(new wi().fromArray(a,h));function f(T,D,M,B){var O=a===void 0?[]:[e.colors[T].clone(),e.colors[D].clone(),e.colors[M].clone()],x=r===void 0?[]:[new Ae().fromArray(r,T*3),new Ae().fromArray(r,D*3),new Ae().fromArray(r,M*3)],Z=new Xv(T,D,M,x,O,B);e.faces.push(Z),o!==void 0&&e.faceVertexUvs[0].push([new _t().fromArray(o,T*2),new _t().fromArray(o,D*2),new _t().fromArray(o,M*2)]),l!==void 0&&e.faceVertexUvs[1].push([new _t().fromArray(l,T*2),new _t().fromArray(l,D*2),new _t().fromArray(l,M*2)])}var g=i.groups;if(g.length>0)for(var h=0;h<g.length;h++)for(var v=g[h],A=v.start,P=v.count,c=A,w=A+P;c<w;c+=3)t!==void 0?f(t[c],t[c+1],t[c+2],v.materialIndex):f(c,c+1,c+2,v.materialIndex);else if(t!==void 0)for(var h=0;h<t.length;h+=3)f(t[h],t[h+1],t[h+2]);else for(var h=0;h<s.length/3;h+=3)f(h,h+1,h+2);return this.computeFaceNormals(),i.boundingBox!==null&&(this.boundingBox=i.boundingBox.clone()),i.boundingSphere!==null&&(this.boundingSphere=i.boundingSphere.clone()),this},center:function(){var i=new Ae;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(i).negate(),this.translate(i.x,i.y,i.z),this}}(),normalize:function(){this.computeBoundingSphere();var i=this.boundingSphere.center,e=this.boundingSphere.radius,t=e===0?1:1/e,n=new Fi;return n.set(t,0,0,-t*i.x,0,t,0,-t*i.y,0,0,t,-t*i.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var i=new Ae,e=new Ae,t=0,n=this.faces.length;t<n;t++){var s=this.faces[t],r=this.vertices[s.a],a=this.vertices[s.b],o=this.vertices[s.c];i.subVectors(o,a),e.subVectors(r,a),i.cross(e),i.normalize(),s.normal.copy(i)}},computeVertexNormals:function(i){i===void 0&&(i=!0);var e,t,n,s,r,a;for(a=new Array(this.vertices.length),e=0,t=this.vertices.length;e<t;e++)a[e]=new Ae;if(i){var o,l,h,c=new Ae,f=new Ae;for(n=0,s=this.faces.length;n<s;n++)r=this.faces[n],o=this.vertices[r.a],l=this.vertices[r.b],h=this.vertices[r.c],c.subVectors(h,l),f.subVectors(o,l),c.cross(f),a[r.a].add(c),a[r.b].add(c),a[r.c].add(c)}else for(this.computeFaceNormals(),n=0,s=this.faces.length;n<s;n++)r=this.faces[n],a[r.a].add(r.normal),a[r.b].add(r.normal),a[r.c].add(r.normal);for(e=0,t=this.vertices.length;e<t;e++)a[e].normalize();for(n=0,s=this.faces.length;n<s;n++){r=this.faces[n];var g=r.vertexNormals;g.length===3?(g[0].copy(a[r.a]),g[1].copy(a[r.b]),g[2].copy(a[r.c])):(g[0]=a[r.a].clone(),g[1]=a[r.b].clone(),g[2]=a[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var i,e,t;for(this.computeFaceNormals(),i=0,e=this.faces.length;i<e;i++){t=this.faces[i];var n=t.vertexNormals;n.length===3?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var i,e,t,n,s;for(t=0,n=this.faces.length;t<n;t++)for(s=this.faces[t],s.__originalFaceNormal?s.__originalFaceNormal.copy(s.normal):s.__originalFaceNormal=s.normal.clone(),s.__originalVertexNormals||(s.__originalVertexNormals=[]),i=0,e=s.vertexNormals.length;i<e;i++)s.__originalVertexNormals[i]?s.__originalVertexNormals[i].copy(s.vertexNormals[i]):s.__originalVertexNormals[i]=s.vertexNormals[i].clone();var r=new Gi;for(r.faces=this.faces,i=0,e=this.morphTargets.length;i<e;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[];var a=this.morphNormals[i].faceNormals,o=this.morphNormals[i].vertexNormals,h,c;for(t=0,n=this.faces.length;t<n;t++)h=new Ae,c={a:new Ae,b:new Ae,c:new Ae},a.push(h),o.push(c)}var l=this.morphNormals[i];r.vertices=this.morphTargets[i].vertices,r.computeFaceNormals(),r.computeVertexNormals();var h,c;for(t=0,n=this.faces.length;t<n;t++)s=this.faces[t],h=l.faceNormals[t],c=l.vertexNormals[t],h.copy(s.normal),c.a.copy(s.vertexNormals[0]),c.b.copy(s.vertexNormals[1]),c.c.copy(s.vertexNormals[2])}for(t=0,n=this.faces.length;t<n;t++)s=this.faces[t],s.normal=s.__originalFaceNormal,s.vertexNormals=s.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new zl),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Gh),this.boundingSphere.setFromPoints(this.vertices)},merge:function(i,e,t){if(!(i&&i.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",i);return}var n,s=this.vertices.length,r=this.vertices,a=i.vertices,o=this.faces,l=i.faces,h=this.faceVertexUvs[0],c=i.faceVertexUvs[0],f=this.colors,g=i.colors;t===void 0&&(t=0),e!==void 0&&(n=new Nr().getNormalMatrix(e));for(var v=0,A=a.length;v<A;v++){var P=a[v],w=P.clone();e!==void 0&&w.applyMatrix4(e),r.push(w)}for(var v=0,A=g.length;v<A;v++)f.push(g[v].clone());for(v=0,A=l.length;v<A;v++){var T=l[v],D,M,B,O=T.vertexNormals,x=T.vertexColors;D=new Xv(T.a+s,T.b+s,T.c+s),D.normal.copy(T.normal),n!==void 0&&D.normal.applyMatrix3(n).normalize();for(var Z=0,de=O.length;Z<de;Z++)M=O[Z].clone(),n!==void 0&&M.applyMatrix3(n).normalize(),D.vertexNormals.push(M);D.color.copy(T.color);for(var Z=0,de=x.length;Z<de;Z++)B=x[Z],D.vertexColors.push(B.clone());D.materialIndex=T.materialIndex+t,o.push(D)}for(v=0,A=c.length;v<A;v++){var $=c[v],me=[];if($!==void 0){for(var Z=0,de=$.length;Z<de;Z++)me.push($[Z].clone());h.push(me)}}},mergeMesh:function(i){if(!(i&&i.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",i);return}i.matrixAutoUpdate&&i.updateMatrix(),this.merge(i.geometry,i.matrix)},mergeVertices:function(){var i={},e=[],t=[],n,s,r=4,a=Math.pow(10,r),o,l,h,c,f,g;for(o=0,l=this.vertices.length;o<l;o++)n=this.vertices[o],s=Math.round(n.x*a)+"_"+Math.round(n.y*a)+"_"+Math.round(n.z*a),i[s]===void 0?(i[s]=o,e.push(this.vertices[o]),t[o]=e.length-1):t[o]=t[i[s]];var v=[];for(o=0,l=this.faces.length;o<l;o++){h=this.faces[o],h.a=t[h.a],h.b=t[h.b],h.c=t[h.c],c=[h.a,h.b,h.c];for(var A=0;A<3;A++)if(c[A]===c[(A+1)%3]){v.push(o);break}}for(o=v.length-1;o>=0;o--){var P=v[o];for(this.faces.splice(P,1),f=0,g=this.faceVertexUvs.length;f<g;f++)this.faceVertexUvs[f].splice(P,1)}var w=this.vertices.length-e.length;return this.vertices=e,w},setFromPoints:function(i){this.vertices=[];for(var e=0,t=i.length;e<t;e++){var n=i[e];this.vertices.push(new Ae(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var i=this.faces,e=i.length,t=0;t<e;t++)i[t]._id=t;function n(h,c){return h.materialIndex-c.materialIndex}i.sort(n);var s=this.faceVertexUvs[0],r=this.faceVertexUvs[1],a,o;s&&s.length===e&&(a=[]),r&&r.length===e&&(o=[]);for(var t=0;t<e;t++){var l=i[t]._id;a&&a.push(s[l]),o&&o.push(r[l])}a&&(this.faceVertexUvs[0]=a),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.parameters!==void 0){var e=this.parameters;for(var t in e)e[t]!==void 0&&(i[t]=e[t]);return i}for(var n=[],s=0;s<this.vertices.length;s++){var r=this.vertices[s];n.push(r.x,r.y,r.z)}for(var a=[],o=[],l={},h=[],c={},f=[],g={},s=0;s<this.faces.length;s++){var v=this.faces[s],A=!0,P=!1,w=this.faceVertexUvs[0][s]!==void 0,T=v.normal.length()>0,D=v.vertexNormals.length>0,M=v.color.r!==1||v.color.g!==1||v.color.b!==1,B=v.vertexColors.length>0,O=0;if(O=$(O,0,0),O=$(O,1,A),O=$(O,2,P),O=$(O,3,w),O=$(O,4,T),O=$(O,5,D),O=$(O,6,M),O=$(O,7,B),a.push(O),a.push(v.a,v.b,v.c),a.push(v.materialIndex),w){var x=this.faceVertexUvs[0][s];a.push(Se(x[0]),Se(x[1]),Se(x[2]))}if(T&&a.push(me(v.normal)),D){var Z=v.vertexNormals;a.push(me(Z[0]),me(Z[1]),me(Z[2]))}if(M&&a.push(ue(v.color)),B){var de=v.vertexColors;a.push(ue(de[0]),ue(de[1]),ue(de[2]))}}function $(Te,Re,We){return We?Te|1<<Re:Te&~(1<<Re)}function me(Te){var Re=Te.x.toString()+Te.y.toString()+Te.z.toString();return l[Re]!==void 0||(l[Re]=o.length/3,o.push(Te.x,Te.y,Te.z)),l[Re]}function ue(Te){var Re=Te.r.toString()+Te.g.toString()+Te.b.toString();return c[Re]!==void 0||(c[Re]=h.length,h.push(Te.getHex())),c[Re]}function Se(Te){var Re=Te.x.toString()+Te.y.toString();return g[Re]!==void 0||(g[Re]=f.length/2,f.push(Te.x,Te.y)),g[Re]}return i.data={},i.data.vertices=n,i.data.normals=o,h.length>0&&(i.data.colors=h),f.length>0&&(i.data.uvs=[f]),i.data.faces=a,i},clone:function(){return new Gi().copy(this)},copy:function(i){var e,t,n,s,r,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=i.name;var o=i.vertices;for(e=0,t=o.length;e<t;e++)this.vertices.push(o[e].clone());var l=i.colors;for(e=0,t=l.length;e<t;e++)this.colors.push(l[e].clone());var h=i.faces;for(e=0,t=h.length;e<t;e++)this.faces.push(h[e].clone());for(e=0,t=i.faceVertexUvs.length;e<t;e++){var c=i.faceVertexUvs[e];for(this.faceVertexUvs[e]===void 0&&(this.faceVertexUvs[e]=[]),n=0,s=c.length;n<s;n++){var f=c[n],g=[];for(r=0,a=f.length;r<a;r++){var v=f[r];g.push(v.clone())}this.faceVertexUvs[e].push(g)}}var A=i.morphTargets;for(e=0,t=A.length;e<t;e++){var P={};if(P.name=A[e].name,A[e].vertices!==void 0)for(P.vertices=[],n=0,s=A[e].vertices.length;n<s;n++)P.vertices.push(A[e].vertices[n].clone());if(A[e].normals!==void 0)for(P.normals=[],n=0,s=A[e].normals.length;n<s;n++)P.normals.push(A[e].normals[n].clone());this.morphTargets.push(P)}var w=i.morphNormals;for(e=0,t=w.length;e<t;e++){var T={};if(w[e].vertexNormals!==void 0)for(T.vertexNormals=[],n=0,s=w[e].vertexNormals.length;n<s;n++){var D=w[e].vertexNormals[n],M={};M.a=D.a.clone(),M.b=D.b.clone(),M.c=D.c.clone(),T.vertexNormals.push(M)}if(w[e].faceNormals!==void 0)for(T.faceNormals=[],n=0,s=w[e].faceNormals.length;n<s;n++)T.faceNormals.push(w[e].faceNormals[n].clone());this.morphNormals.push(T)}var B=i.skinWeights;for(e=0,t=B.length;e<t;e++)this.skinWeights.push(B[e].clone());var O=i.skinIndices;for(e=0,t=O.length;e<t;e++)this.skinIndices.push(O[e].clone());var x=i.lineDistances;for(e=0,t=x.length;e<t;e++)this.lineDistances.push(x[e]);var Z=i.boundingBox;Z!==null&&(this.boundingBox=Z.clone());var de=i.boundingSphere;return de!==null&&(this.boundingSphere=de.clone()),this.elementsNeedUpdate=i.elementsNeedUpdate,this.verticesNeedUpdate=i.verticesNeedUpdate,this.uvsNeedUpdate=i.uvsNeedUpdate,this.normalsNeedUpdate=i.normalsNeedUpdate,this.colorsNeedUpdate=i.colorsNeedUpdate,this.lineDistancesNeedUpdate=i.lineDistancesNeedUpdate,this.groupsNeedUpdate=i.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function fn(i,e,t){if(Array.isArray(i))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=i,this.itemSize=e,this.count=i!==void 0?i.length/e:0,this.normalized=t===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(fn.prototype,"needsUpdate",{set:function(i){i===!0&&this.version++}});Object.assign(fn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(i){if(Array.isArray(i))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=i!==void 0?i.length/this.itemSize:0,this.array=i,this},setDynamic:function(i){return this.dynamic=i,this},copy:function(i){return this.name=i.name,this.array=new i.array.constructor(i.array),this.itemSize=i.itemSize,this.count=i.count,this.normalized=i.normalized,this.dynamic=i.dynamic,this},copyAt:function(i,e,t){i*=this.itemSize,t*=e.itemSize;for(var n=0,s=this.itemSize;n<s;n++)this.array[i+n]=e.array[t+n];return this},copyArray:function(i){return this.array.set(i),this},copyColorsArray:function(i){for(var e=this.array,t=0,n=0,s=i.length;n<s;n++){var r=i[n];r===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),r=new wi),e[t++]=r.r,e[t++]=r.g,e[t++]=r.b}return this},copyVector2sArray:function(i){for(var e=this.array,t=0,n=0,s=i.length;n<s;n++){var r=i[n];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),r=new _t),e[t++]=r.x,e[t++]=r.y}return this},copyVector3sArray:function(i){for(var e=this.array,t=0,n=0,s=i.length;n<s;n++){var r=i[n];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),r=new Ae),e[t++]=r.x,e[t++]=r.y,e[t++]=r.z}return this},copyVector4sArray:function(i){for(var e=this.array,t=0,n=0,s=i.length;n<s;n++){var r=i[n];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),r=new hs),e[t++]=r.x,e[t++]=r.y,e[t++]=r.z,e[t++]=r.w}return this},set:function(i,e){return e===void 0&&(e=0),this.array.set(i,e),this},getX:function(i){return this.array[i*this.itemSize]},setX:function(i,e){return this.array[i*this.itemSize]=e,this},getY:function(i){return this.array[i*this.itemSize+1]},setY:function(i,e){return this.array[i*this.itemSize+1]=e,this},getZ:function(i){return this.array[i*this.itemSize+2]},setZ:function(i,e){return this.array[i*this.itemSize+2]=e,this},getW:function(i){return this.array[i*this.itemSize+3]},setW:function(i,e){return this.array[i*this.itemSize+3]=e,this},setXY:function(i,e,t){return i*=this.itemSize,this.array[i+0]=e,this.array[i+1]=t,this},setXYZ:function(i,e,t,n){return i*=this.itemSize,this.array[i+0]=e,this.array[i+1]=t,this.array[i+2]=n,this},setXYZW:function(i,e,t,n,s){return i*=this.itemSize,this.array[i+0]=e,this.array[i+1]=t,this.array[i+2]=n,this.array[i+3]=s,this},onUpload:function(i){return this.onUploadCallback=i,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function hw(i,e,t){fn.call(this,new Int8Array(i),e,t)}hw.prototype=Object.create(fn.prototype);hw.prototype.constructor=hw;function uw(i,e,t){fn.call(this,new Uint8Array(i),e,t)}uw.prototype=Object.create(fn.prototype);uw.prototype.constructor=uw;function cw(i,e,t){fn.call(this,new Uint8ClampedArray(i),e,t)}cw.prototype=Object.create(fn.prototype);cw.prototype.constructor=cw;function dw(i,e,t){fn.call(this,new Int16Array(i),e,t)}dw.prototype=Object.create(fn.prototype);dw.prototype.constructor=dw;function wg(i,e,t){fn.call(this,new Uint16Array(i),e,t)}wg.prototype=Object.create(fn.prototype);wg.prototype.constructor=wg;function pw(i,e,t){fn.call(this,new Int32Array(i),e,t)}pw.prototype=Object.create(fn.prototype);pw.prototype.constructor=pw;function Sg(i,e,t){fn.call(this,new Uint32Array(i),e,t)}Sg.prototype=Object.create(fn.prototype);Sg.prototype.constructor=Sg;function ni(i,e,t){fn.call(this,new Float32Array(i),e,t)}ni.prototype=Object.create(fn.prototype);ni.prototype.constructor=ni;function fw(i,e,t){fn.call(this,new Float64Array(i),e,t)}fw.prototype=Object.create(fn.prototype);fw.prototype.constructor=fw;function k3(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(k3.prototype,{computeGroups:function(i){for(var e,t=[],n=void 0,s=i.faces,r=0;r<s.length;r++){var a=s[r];a.materialIndex!==n&&(n=a.materialIndex,e!==void 0&&(e.count=r*3-e.start,t.push(e)),e={start:r*3,materialIndex:n})}e!==void 0&&(e.count=r*3-e.start,t.push(e)),this.groups=t},fromGeometry:function(i){var e=i.faces,t=i.vertices,n=i.faceVertexUvs,s=n[0]&&n[0].length>0,r=n[1]&&n[1].length>0,a=i.morphTargets,o=a.length,l;if(o>0){l=[];for(var h=0;h<o;h++)l[h]={name:a[h].name,data:[]};this.morphTargets.position=l}var c=i.morphNormals,f=c.length,g;if(f>0){g=[];for(var h=0;h<f;h++)g[h]={name:c[h].name,data:[]};this.morphTargets.normal=g}var v=i.skinIndices,A=i.skinWeights,P=v.length===t.length,w=A.length===t.length;t.length>0&&e.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var h=0;h<e.length;h++){var T=e[h];this.vertices.push(t[T.a],t[T.b],t[T.c]);var D=T.vertexNormals;if(D.length===3)this.normals.push(D[0],D[1],D[2]);else{var M=T.normal;this.normals.push(M,M,M)}var B=T.vertexColors;if(B.length===3)this.colors.push(B[0],B[1],B[2]);else{var O=T.color;this.colors.push(O,O,O)}if(s===!0){var x=n[0][h];x!==void 0?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new _t,new _t,new _t))}if(r===!0){var x=n[1][h];x!==void 0?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new _t,new _t,new _t))}for(var Z=0;Z<o;Z++){var de=a[Z].vertices;l[Z].data.push(de[T.a],de[T.b],de[T.c])}for(var Z=0;Z<f;Z++){var $=c[Z].vertexNormals[h];g[Z].data.push($.a,$.b,$.c)}P&&this.skinIndices.push(v[T.a],v[T.b],v[T.c]),w&&this.skinWeights.push(A[T.a],A[T.b],A[T.c])}return this.computeGroups(i),this.verticesNeedUpdate=i.verticesNeedUpdate,this.normalsNeedUpdate=i.normalsNeedUpdate,this.colorsNeedUpdate=i.colorsNeedUpdate,this.uvsNeedUpdate=i.uvsNeedUpdate,this.groupsNeedUpdate=i.groupsNeedUpdate,this}});function C3(i){if(i.length===0)return-1/0;for(var e=i[0],t=1,n=i.length;t<n;++t)i[t]>e&&(e=i[t]);return e}var vne=1;function Zt(){Object.defineProperty(this,"id",{value:vne+=2}),this.uuid=tn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Zt.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Zt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(i){Array.isArray(i)?this.index=new(C3(i)>65535?Sg:wg)(i,1):this.index=i},addAttribute:function(i,e){return!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(i,new fn(arguments[1],arguments[2]))):i==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[i]=e,this)},getAttribute:function(i){return this.attributes[i]},removeAttribute:function(i){return delete this.attributes[i],this},addGroup:function(i,e,t){this.groups.push({start:i,count:e,materialIndex:t!==void 0?t:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(i,e){this.drawRange.start=i,this.drawRange.count=e},applyMatrix:function(i){var e=this.attributes.position;e!==void 0&&(i.applyToBufferAttribute(e),e.needsUpdate=!0);var t=this.attributes.normal;if(t!==void 0){var n=new Nr().getNormalMatrix(i);n.applyToBufferAttribute(t),t.needsUpdate=!0}var s=this.attributes.tangent;if(s!==void 0){var n=new Nr().getNormalMatrix(i);n.applyToBufferAttribute(s),s.needsUpdate=!0}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(){var i=new Fi;return function(t){return i.makeRotationX(t),this.applyMatrix(i),this}}(),rotateY:function(){var i=new Fi;return function(t){return i.makeRotationY(t),this.applyMatrix(i),this}}(),rotateZ:function(){var i=new Fi;return function(t){return i.makeRotationZ(t),this.applyMatrix(i),this}}(),translate:function(){var i=new Fi;return function(t,n,s){return i.makeTranslation(t,n,s),this.applyMatrix(i),this}}(),scale:function(){var i=new Fi;return function(t,n,s){return i.makeScale(t,n,s),this.applyMatrix(i),this}}(),lookAt:function(){var i=new li;return function(t){i.lookAt(t),i.updateMatrix(),this.applyMatrix(i.matrix)}}(),center:function(){var i=new Ae;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(i).negate(),this.translate(i.x,i.y,i.z),this}}(),setFromObject:function(i){var e=i.geometry;if(i.isPoints||i.isLine){var t=new ni(e.vertices.length*3,3),n=new ni(e.colors.length*3,3);if(this.addAttribute("position",t.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var s=new ni(e.lineDistances.length,1);this.addAttribute("lineDistance",s.copyArray(e.lineDistances))}e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone())}else i.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(i){for(var e=[],t=0,n=i.length;t<n;t++){var s=i[t];e.push(s.x,s.y,s.z||0)}return this.addAttribute("position",new ni(e,3)),this},updateFromObject:function(i){var e=i.geometry;if(i.isMesh){var t=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(t=void 0,e.elementsNeedUpdate=!1),t===void 0)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}var n;return e.verticesNeedUpdate===!0&&(n=this.attributes.position,n!==void 0&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),e.normalsNeedUpdate===!0&&(n=this.attributes.normal,n!==void 0&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),e.colorsNeedUpdate===!0&&(n=this.attributes.color,n!==void 0&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,n!==void 0&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,n!==void 0&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(i.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(i){return i.__directGeometry=new k3().fromGeometry(i),this.fromDirectGeometry(i.__directGeometry)},fromDirectGeometry:function(i){var e=new Float32Array(i.vertices.length*3);if(this.addAttribute("position",new fn(e,3).copyVector3sArray(i.vertices)),i.normals.length>0){var t=new Float32Array(i.normals.length*3);this.addAttribute("normal",new fn(t,3).copyVector3sArray(i.normals))}if(i.colors.length>0){var n=new Float32Array(i.colors.length*3);this.addAttribute("color",new fn(n,3).copyColorsArray(i.colors))}if(i.uvs.length>0){var s=new Float32Array(i.uvs.length*2);this.addAttribute("uv",new fn(s,2).copyVector2sArray(i.uvs))}if(i.uvs2.length>0){var r=new Float32Array(i.uvs2.length*2);this.addAttribute("uv2",new fn(r,2).copyVector2sArray(i.uvs2))}this.groups=i.groups;for(var a in i.morphTargets){for(var o=[],l=i.morphTargets[a],h=0,c=l.length;h<c;h++){var f=l[h],g=new ni(f.data.length*3,3);g.name=f.name,o.push(g.copyVector3sArray(f.data))}this.morphAttributes[a]=o}if(i.skinIndices.length>0){var v=new ni(i.skinIndices.length*4,4);this.addAttribute("skinIndex",v.copyVector4sArray(i.skinIndices))}if(i.skinWeights.length>0){var A=new ni(i.skinWeights.length*4,4);this.addAttribute("skinWeight",A.copyVector4sArray(i.skinWeights))}return i.boundingSphere!==null&&(this.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(this.boundingBox=i.boundingBox.clone()),this},computeBoundingBox:function(){var i=new zl;return function(){this.boundingBox===null&&(this.boundingBox=new zl);var t=this.attributes.position,n=this.morphAttributes.position;if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),n)for(var s=0,r=n.length;s<r;s++){var a=n[s];i.setFromBufferAttribute(a),this.boundingBox.expandByPoint(i.min),this.boundingBox.expandByPoint(i.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var i=new zl,e=new zl,t=new Ae;return function(){this.boundingSphere===null&&(this.boundingSphere=new Gh);var s=this.attributes.position,r=this.morphAttributes.position;if(s){var a=this.boundingSphere.center;if(i.setFromBufferAttribute(s),r)for(var o=0,l=r.length;o<l;o++){var h=r[o];e.setFromBufferAttribute(h),i.expandByPoint(e.min),i.expandByPoint(e.max)}i.getCenter(a);for(var c=0,o=0,l=s.count;o<l;o++)t.fromBufferAttribute(s,o),c=Math.max(c,a.distanceToSquared(t));if(r)for(var o=0,l=r.length;o<l;o++)for(var h=r[o],f=0,g=h.count;f<g;f++)t.fromBufferAttribute(h,f),c=Math.max(c,a.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var i=this.index,e=this.attributes;if(e.position){var t=e.position.array;if(e.normal===void 0)this.addAttribute("normal",new fn(new Float32Array(t.length),3));else for(var n=e.normal.array,s=0,r=n.length;s<r;s++)n[s]=0;var a=e.normal.array,o,l,h,c=new Ae,f=new Ae,g=new Ae,v=new Ae,A=new Ae;if(i)for(var P=i.array,s=0,r=i.count;s<r;s+=3)o=P[s+0]*3,l=P[s+1]*3,h=P[s+2]*3,c.fromArray(t,o),f.fromArray(t,l),g.fromArray(t,h),v.subVectors(g,f),A.subVectors(c,f),v.cross(A),a[o]+=v.x,a[o+1]+=v.y,a[o+2]+=v.z,a[l]+=v.x,a[l+1]+=v.y,a[l+2]+=v.z,a[h]+=v.x,a[h+1]+=v.y,a[h+2]+=v.z;else for(var s=0,r=t.length;s<r;s+=9)c.fromArray(t,s),f.fromArray(t,s+3),g.fromArray(t,s+6),v.subVectors(g,f),A.subVectors(c,f),v.cross(A),a[s]=v.x,a[s+1]=v.y,a[s+2]=v.z,a[s+3]=v.x,a[s+4]=v.y,a[s+5]=v.z,a[s+6]=v.x,a[s+7]=v.y,a[s+8]=v.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(i,e){if(!(i&&i.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",i);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var t=this.attributes;for(var n in t)if(i.attributes[n]!==void 0)for(var s=t[n],r=s.array,a=i.attributes[n],o=a.array,l=a.itemSize*e,h=Math.min(o.length,r.length-l),c=0,f=l;c<h;c++,f++)r[f]=o[c];return this},normalizeNormals:function(){var i=new Ae;return function(){for(var t=this.attributes.normal,n=0,s=t.count;n<s;n++)i.x=t.getX(n),i.y=t.getY(n),i.z=t.getZ(n),i.normalize(),t.setXYZ(n,i.x,i.y,i.z)}}(),toNonIndexed:function(){function i(P,w){for(var T=P.array,D=P.itemSize,M=new T.constructor(w.length*D),B=0,O=0,x=0,Z=w.length;x<Z;x++){B=w[x]*D;for(var de=0;de<D;de++)M[O++]=T[B++]}return new fn(M,D)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Zt,t=this.index.array,n=this.attributes;for(var s in n){var r=n[s],a=i(r,t);e.addAttribute(s,a)}var o=this.morphAttributes;for(s in o){for(var l=[],h=o[s],c=0,f=h.length;c<f;c++){var r=h[c],a=i(r,t);l.push(a)}e.morphAttributes[s]=l}for(var g=this.groups,c=0,v=g.length;c<v;c++){var A=g[c];e.addGroup(A.start,A.count,A.materialIndex)}return e},toJSON:function(){var i={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),Object.keys(this.userData).length>0&&(i.userData=this.userData),this.parameters!==void 0){var e=this.parameters;for(var t in e)e[t]!==void 0&&(i[t]=e[t]);return i}i.data={attributes:{}};var n=this.index;n!==null&&(i.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var s=this.attributes;for(var t in s){var r=s[t],a={itemSize:r.itemSize,type:r.array.constructor.name,array:Array.prototype.slice.call(r.array),normalized:r.normalized};r.name!==""&&(a.name=r.name),i.data.attributes[t]=a}var o={},l=!1;for(var t in this.morphAttributes){for(var h=this.morphAttributes[t],c=[],f=0,g=h.length;f<g;f++){var r=h[f],a={itemSize:r.itemSize,type:r.array.constructor.name,array:Array.prototype.slice.call(r.array),normalized:r.normalized};r.name!==""&&(a.name=r.name),c.push(a)}c.length>0&&(o[t]=c,l=!0)}l&&(i.data.morphAttributes=o);var v=this.groups;v.length>0&&(i.data.groups=JSON.parse(JSON.stringify(v)));var A=this.boundingSphere;return A!==null&&(i.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),i},clone:function(){return new Zt().copy(this)},copy:function(i){var e,t,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=i.name;var s=i.index;s!==null&&this.setIndex(s.clone());var r=i.attributes;for(e in r){var a=r[e];this.addAttribute(e,a.clone())}var o=i.morphAttributes;for(e in o){var l=[],h=o[e];for(t=0,n=h.length;t<n;t++)l.push(h[t].clone());this.morphAttributes[e]=l}var c=i.groups;for(t=0,n=c.length;t<n;t++){var f=c[t];this.addGroup(f.start,f.count,f.materialIndex)}var g=i.boundingBox;g!==null&&(this.boundingBox=g.clone());var v=i.boundingSphere;return v!==null&&(this.boundingSphere=v.clone()),this.drawRange.start=i.drawRange.start,this.drawRange.count=i.drawRange.count,this.userData=i.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Qv(i,e,t,n,s,r){Gi.call(this),this.type="BoxGeometry",this.parameters={width:i,height:e,depth:t,widthSegments:n,heightSegments:s,depthSegments:r},this.fromBufferGeometry(new nf(i,e,t,n,s,r)),this.mergeVertices()}Qv.prototype=Object.create(Gi.prototype);Qv.prototype.constructor=Qv;function nf(i,e,t,n,s,r){Zt.call(this),this.type="BoxBufferGeometry",this.parameters={width:i,height:e,depth:t,widthSegments:n,heightSegments:s,depthSegments:r};var a=this;i=i||1,e=e||1,t=t||1,n=Math.floor(n)||1,s=Math.floor(s)||1,r=Math.floor(r)||1;var o=[],l=[],h=[],c=[],f=0,g=0;v("z","y","x",-1,-1,t,e,i,r,s,0),v("z","y","x",1,-1,t,e,-i,r,s,1),v("x","z","y",1,1,i,t,e,n,r,2),v("x","z","y",1,-1,i,t,-e,n,r,3),v("x","y","z",1,-1,i,e,t,n,s,4),v("x","y","z",-1,-1,i,e,-t,n,s,5),this.setIndex(o),this.addAttribute("position",new ni(l,3)),this.addAttribute("normal",new ni(h,3)),this.addAttribute("uv",new ni(c,2));function v(A,P,w,T,D,M,B,O,x,Z,de){var $=M/x,me=B/Z,ue=M/2,Se=B/2,Te=O/2,Re=x+1,We=Z+1,Le=0,lt=0,st,De,et=new Ae;for(De=0;De<We;De++){var Ke=De*me-Se;for(st=0;st<Re;st++){var Ct=st*$-ue;et[A]=Ct*T,et[P]=Ke*D,et[w]=Te,l.push(et.x,et.y,et.z),et[A]=0,et[P]=0,et[w]=O>0?1:-1,h.push(et.x,et.y,et.z),c.push(st/x),c.push(1-De/Z),Le+=1}}for(De=0;De<Z;De++)for(st=0;st<x;st++){var dt=f+st+Re*De,Et=f+st+Re*(De+1),ut=f+(st+1)+Re*(De+1),Wt=f+(st+1)+Re*De;o.push(dt,Et,Wt),o.push(Et,ut,Wt),lt+=6}a.addGroup(g,lt,de),g+=lt,f+=Le}}nf.prototype=Object.create(Zt.prototype);nf.prototype.constructor=nf;function Jv(i,e,t,n){Gi.call(this),this.type="PlaneGeometry",this.parameters={width:i,height:e,widthSegments:t,heightSegments:n},this.fromBufferGeometry(new sf(i,e,t,n)),this.mergeVertices()}Jv.prototype=Object.create(Gi.prototype);Jv.prototype.constructor=Jv;function sf(i,e,t,n){Zt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:i,height:e,widthSegments:t,heightSegments:n},i=i||1,e=e||1;var s=i/2,r=e/2,a=Math.floor(t)||1,o=Math.floor(n)||1,l=a+1,h=o+1,c=i/a,f=e/o,g,v,A=[],P=[],w=[],T=[];for(v=0;v<h;v++){var D=v*f-r;for(g=0;g<l;g++){var M=g*c-s;P.push(M,-D,0),w.push(0,0,1),T.push(g/a),T.push(1-v/o)}}for(v=0;v<o;v++)for(g=0;g<a;g++){var B=g+l*v,O=g+l*(v+1),x=g+1+l*(v+1),Z=g+1+l*v;A.push(B,O,Z),A.push(O,x,Z)}this.setIndex(A),this.addAttribute("position",new ni(P,3)),this.addAttribute("normal",new ni(w,3)),this.addAttribute("uv",new ni(T,2))}sf.prototype=Object.create(Zt.prototype);sf.prototype.constructor=sf;var bne=0;function nn(){Object.defineProperty(this,"id",{value:bne++}),this.uuid=tn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=bp,this.side=v0,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=y3,this.opacity=1,this.transparent=!1,this.blendSrc=_3,this.blendDst=A3,this.blendEquation=cp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=aw,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}nn.prototype=Object.assign(Object.create(Hu.prototype),{constructor:nn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(i){if(i!==void 0)for(var e in i){var t=i[e];if(t===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===g3;continue}var n=this[e];if(n===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}n&&n.isColor?n.set(t):n&&n.isVector3&&t&&t.isVector3?n.copy(t):this[e]=t}},toJSON:function(i){var e=i===void 0||typeof i=="string";e&&(i={textures:{},images:{}});var t={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearCoat!==void 0&&(t.clearCoat=this.clearCoat),this.clearCoatRoughness!==void 0&&(t.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(i).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(i).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(i).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(i).uuid),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(i).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(i).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(i).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(i).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(i).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(i).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(i).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(i).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(i).uuid,t.reflectivity=this.reflectivity,this.combine!==void 0&&(t.combine=this.combine),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(i).uuid),this.size!==void 0&&(t.size=this.size),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==bp&&(t.blending=this.blending),this.flatShading===!0&&(t.flatShading=this.flatShading),this.side!==v0&&(t.side=this.side),this.vertexColors!==y3&&(t.vertexColors=this.vertexColors),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(t.morphTargets=!0),this.skinning===!0&&(t.skinning=!0),this.visible===!1&&(t.visible=!1),JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData);function n(a){var o=[];for(var l in a){var h=a[l];delete h.metadata,o.push(h)}return o}if(e){var s=n(i.textures),r=n(i.images);s.length>0&&(t.textures=s),r.length>0&&(t.images=r)}return t},clone:function(){return new this.constructor().copy(this)},copy:function(i){this.name=i.name,this.fog=i.fog,this.lights=i.lights,this.blending=i.blending,this.side=i.side,this.flatShading=i.flatShading,this.vertexColors=i.vertexColors,this.opacity=i.opacity,this.transparent=i.transparent,this.blendSrc=i.blendSrc,this.blendDst=i.blendDst,this.blendEquation=i.blendEquation,this.blendSrcAlpha=i.blendSrcAlpha,this.blendDstAlpha=i.blendDstAlpha,this.blendEquationAlpha=i.blendEquationAlpha,this.depthFunc=i.depthFunc,this.depthTest=i.depthTest,this.depthWrite=i.depthWrite,this.colorWrite=i.colorWrite,this.precision=i.precision,this.polygonOffset=i.polygonOffset,this.polygonOffsetFactor=i.polygonOffsetFactor,this.polygonOffsetUnits=i.polygonOffsetUnits,this.dithering=i.dithering,this.alphaTest=i.alphaTest,this.premultipliedAlpha=i.premultipliedAlpha,this.visible=i.visible,this.userData=JSON.parse(JSON.stringify(i.userData)),this.clipShadows=i.clipShadows,this.clipIntersection=i.clipIntersection;var e=i.clippingPlanes,t=null;if(e!==null){var n=e.length;t=new Array(n);for(var s=0;s!==n;++s)t[s]=e[s].clone()}return this.clippingPlanes=t,this.shadowSide=i.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _ne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ane=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ro(i){nn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=_ne,this.fragmentShader=Ane,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,i!==void 0&&(i.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(i))}ro.prototype=Object.create(nn.prototype);ro.prototype.constructor=ro;ro.prototype.isShaderMaterial=!0;ro.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.fragmentShader=i.fragmentShader,this.vertexShader=i.vertexShader,this.uniforms=Ag(i.uniforms),this.defines=Object.assign({},i.defines),this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.lights=i.lights,this.clipping=i.clipping,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this.extensions=i.extensions,this};ro.prototype.toJSON=function(i){var e=nn.prototype.toJSON.call(this,i);e.uniforms={};for(var t in this.uniforms){var n=this.uniforms[t],s=n.value;s&&s.isTexture?e.uniforms[t]={type:"t",value:s.toJSON(i).uuid}:s&&s.isColor?e.uniforms[t]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[t]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[t]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[t]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[t]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[t]={type:"m4",value:s.toArray()}:e.uniforms[t]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(var a in this.extensions)this.extensions[a]===!0&&(r[a]=!0);return Object.keys(r).length>0&&(e.extensions=r),e};function zf(i,e){this.origin=i!==void 0?i:new Ae,this.direction=e!==void 0?e:new Ae}Object.assign(zf.prototype,{set:function(i,e){return this.origin.copy(i),this.direction.copy(e),this},clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.origin.copy(i.origin),this.direction.copy(i.direction),this},at:function(i,e){return e===void 0&&(console.warn("THREE.Ray: .at() target is now required"),e=new Ae),e.copy(this.direction).multiplyScalar(i).add(this.origin)},lookAt:function(i){return this.direction.copy(i).sub(this.origin).normalize(),this},recast:function(){var i=new Ae;return function(t){return this.origin.copy(this.at(t,i)),this}}(),closestPointToPoint:function(i,e){e===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Ae),e.subVectors(i,this.origin);var t=e.dot(this.direction);return t<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(i){return Math.sqrt(this.distanceSqToPoint(i))},distanceSqToPoint:function(){var i=new Ae;return function(t){var n=i.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(i.copy(this.direction).multiplyScalar(n).add(this.origin),i.distanceToSquared(t))}}(),distanceSqToSegment:function(){var i=new Ae,e=new Ae,t=new Ae;return function(s,r,a,o){i.copy(s).add(r).multiplyScalar(.5),e.copy(r).sub(s).normalize(),t.copy(this.origin).sub(i);var l=s.distanceTo(r)*.5,h=-this.direction.dot(e),c=t.dot(this.direction),f=-t.dot(e),g=t.lengthSq(),v=Math.abs(1-h*h),A,P,w,T;if(v>0)if(A=h*f-c,P=h*c-f,T=l*v,A>=0)if(P>=-T)if(P<=T){var D=1/v;A*=D,P*=D,w=A*(A+h*P+2*c)+P*(h*A+P+2*f)+g}else P=l,A=Math.max(0,-(h*P+c)),w=-A*A+P*(P+2*f)+g;else P=-l,A=Math.max(0,-(h*P+c)),w=-A*A+P*(P+2*f)+g;else P<=-T?(A=Math.max(0,-(-h*l+c)),P=A>0?-l:Math.min(Math.max(-l,-f),l),w=-A*A+P*(P+2*f)+g):P<=T?(A=0,P=Math.min(Math.max(-l,-f),l),w=P*(P+2*f)+g):(A=Math.max(0,-(h*l+c)),P=A>0?l:Math.min(Math.max(-l,-f),l),w=-A*A+P*(P+2*f)+g);else P=h>0?-l:l,A=Math.max(0,-(h*P+c)),w=-A*A+P*(P+2*f)+g;return a&&a.copy(this.direction).multiplyScalar(A).add(this.origin),o&&o.copy(e).multiplyScalar(P).add(i),w}}(),intersectSphere:function(){var i=new Ae;return function(t,n){i.subVectors(t.center,this.origin);var s=i.dot(this.direction),r=i.dot(i)-s*s,a=t.radius*t.radius;if(r>a)return null;var o=Math.sqrt(a-r),l=s-o,h=s+o;return l<0&&h<0?null:l<0?this.at(h,n):this.at(l,n)}}(),intersectsSphere:function(i){return this.distanceSqToPoint(i.center)<=i.radius*i.radius},distanceToPlane:function(i){var e=i.normal.dot(this.direction);if(e===0)return i.distanceToPoint(this.origin)===0?0:null;var t=-(this.origin.dot(i.normal)+i.constant)/e;return t>=0?t:null},intersectPlane:function(i,e){var t=this.distanceToPlane(i);return t===null?null:this.at(t,e)},intersectsPlane:function(i){var e=i.distanceToPoint(this.origin);if(e===0)return!0;var t=i.normal.dot(this.direction);return t*e<0},intersectBox:function(i,e){var t,n,s,r,a,o,l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,f=this.origin;return l>=0?(t=(i.min.x-f.x)*l,n=(i.max.x-f.x)*l):(t=(i.max.x-f.x)*l,n=(i.min.x-f.x)*l),h>=0?(s=(i.min.y-f.y)*h,r=(i.max.y-f.y)*h):(s=(i.max.y-f.y)*h,r=(i.min.y-f.y)*h),t>r||s>n||((s>t||t!==t)&&(t=s),(r<n||n!==n)&&(n=r),c>=0?(a=(i.min.z-f.z)*c,o=(i.max.z-f.z)*c):(a=(i.max.z-f.z)*c,o=(i.min.z-f.z)*c),t>o||a>n)||((a>t||t!==t)&&(t=a),(o<n||n!==n)&&(n=o),n<0)?null:this.at(t>=0?t:n,e)},intersectsBox:function(){var i=new Ae;return function(t){return this.intersectBox(t,i)!==null}}(),intersectTriangle:function(){var i=new Ae,e=new Ae,t=new Ae,n=new Ae;return function(r,a,o,l,h){e.subVectors(a,r),t.subVectors(o,r),n.crossVectors(e,t);var c=this.direction.dot(n),f;if(c>0){if(l)return null;f=1}else if(c<0)f=-1,c=-c;else return null;i.subVectors(this.origin,r);var g=f*this.direction.dot(t.crossVectors(i,t));if(g<0)return null;var v=f*this.direction.dot(e.cross(i));if(v<0||g+v>c)return null;var A=-f*i.dot(n);return A<0?null:this.at(A/c,h)}}(),applyMatrix4:function(i){return this.origin.applyMatrix4(i),this.direction.transformDirection(i),this},equals:function(i){return i.origin.equals(this.origin)&&i.direction.equals(this.direction)}});function ca(i,e,t){this.a=i!==void 0?i:new Ae,this.b=e!==void 0?e:new Ae,this.c=t!==void 0?t:new Ae}Object.assign(ca,{getNormal:function(){var i=new Ae;return function(t,n,s,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Ae),r.subVectors(s,n),i.subVectors(t,n),r.cross(i);var a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}}(),getBarycoord:function(){var i=new Ae,e=new Ae,t=new Ae;return function(s,r,a,o,l){i.subVectors(o,r),e.subVectors(a,r),t.subVectors(s,r);var h=i.dot(i),c=i.dot(e),f=i.dot(t),g=e.dot(e),v=e.dot(t),A=h*g-c*c;if(l===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),l=new Ae),A===0)return l.set(-2,-1,-1);var P=1/A,w=(g*f-c*v)*P,T=(h*v-c*f)*P;return l.set(1-w-T,T,w)}}(),containsPoint:function(){var i=new Ae;return function(t,n,s,r){return ca.getBarycoord(t,n,s,r,i),i.x>=0&&i.y>=0&&i.x+i.y<=1}}(),getUV:function(){var i=new Ae;return function(t,n,s,r,a,o,l,h){return this.getBarycoord(t,n,s,r,i),h.set(0,0),h.addScaledVector(a,i.x),h.addScaledVector(o,i.y),h.addScaledVector(l,i.z),h}}()});Object.assign(ca.prototype,{set:function(i,e,t){return this.a.copy(i),this.b.copy(e),this.c.copy(t),this},setFromPointsAndIndices:function(i,e,t,n){return this.a.copy(i[e]),this.b.copy(i[t]),this.c.copy(i[n]),this},clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.a.copy(i.a),this.b.copy(i.b),this.c.copy(i.c),this},getArea:function(){var i=new Ae,e=new Ae;return function(){return i.subVectors(this.c,this.b),e.subVectors(this.a,this.b),i.cross(e).length()*.5}}(),getMidpoint:function(i){return i===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),i=new Ae),i.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(i){return ca.getNormal(this.a,this.b,this.c,i)},getPlane:function(i){return i===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),i=new Ae),i.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(i,e){return ca.getBarycoord(i,this.a,this.b,this.c,e)},containsPoint:function(i){return ca.containsPoint(i,this.a,this.b,this.c)},getUV:function(i,e,t,n,s){return ca.getUV(i,this.a,this.b,this.c,e,t,n,s)},intersectsBox:function(i){return i.intersectsTriangle(this)},closestPointToPoint:function(){var i=new Ae,e=new Ae,t=new Ae,n=new Ae,s=new Ae,r=new Ae;return function(o,l){l===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),l=new Ae);var h=this.a,c=this.b,f=this.c,g,v;i.subVectors(c,h),e.subVectors(f,h),n.subVectors(o,h);var A=i.dot(n),P=e.dot(n);if(A<=0&&P<=0)return l.copy(h);s.subVectors(o,c);var w=i.dot(s),T=e.dot(s);if(w>=0&&T<=w)return l.copy(c);var D=A*T-w*P;if(D<=0&&A>=0&&w<=0)return g=A/(A-w),l.copy(h).addScaledVector(i,g);r.subVectors(o,f);var M=i.dot(r),B=e.dot(r);if(B>=0&&M<=B)return l.copy(f);var O=M*P-A*B;if(O<=0&&P>=0&&B<=0)return v=P/(P-B),l.copy(h).addScaledVector(e,v);var x=w*B-M*T;if(x<=0&&T-w>=0&&M-B>=0)return t.subVectors(f,c),v=(T-w)/(T-w+(M-B)),l.copy(c).addScaledVector(t,v);var Z=1/(x+O+D);return g=O*Z,v=D*Z,l.copy(h).addScaledVector(i,g).addScaledVector(e,v)}}(),equals:function(i){return i.a.equals(this.a)&&i.b.equals(this.b)&&i.c.equals(this.c)}});function ya(i){nn.call(this),this.type="MeshBasicMaterial",this.color=new wi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=m_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(i)}ya.prototype=Object.create(nn.prototype);ya.prototype.constructor=ya;ya.prototype.isMeshBasicMaterial=!0;ya.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.color.copy(i.color),this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.specularMap=i.specularMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.combine=i.combine,this.reflectivity=i.reflectivity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this};function Ws(i,e){li.call(this),this.type="Mesh",this.geometry=i!==void 0?i:new Zt,this.material=e!==void 0?e:new ya({color:Math.random()*16777215}),this.drawMode=dP,this.updateMorphTargets()}Ws.prototype=Object.assign(Object.create(li.prototype),{constructor:Ws,isMesh:!0,setDrawMode:function(i){this.drawMode=i},copy:function(i){return li.prototype.copy.call(this,i),this.drawMode=i.drawMode,i.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=i.morphTargetInfluences.slice()),i.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},i.morphTargetDictionary)),this},updateMorphTargets:function(){var i=this.geometry,e,t,n;if(i.isBufferGeometry){var s=i.morphAttributes,r=Object.keys(s);if(r.length>0){var a=s[r[0]];if(a!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var o=i.morphTargets;o!==void 0&&o.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var i=new Fi,e=new zf,t=new Gh,n=new Ae,s=new Ae,r=new Ae,a=new Ae,o=new Ae,l=new Ae,h=new Ae,c=new Ae,f=new Ae,g=new _t,v=new _t,A=new _t,P=new Ae,w=new Ae;function T(M,B,O,x,Z,de,$,me){var ue;if(B.side===Xr?ue=x.intersectTriangle($,de,Z,!0,me):ue=x.intersectTriangle(Z,de,$,B.side!==Rf,me),ue===null)return null;w.copy(me),w.applyMatrix4(M.matrixWorld);var Se=O.ray.origin.distanceTo(w);return Se<O.near||Se>O.far?null:{distance:Se,point:w.clone(),object:M}}function D(M,B,O,x,Z,de,$,me,ue,Se){n.fromBufferAttribute(Z,me),s.fromBufferAttribute(Z,ue),r.fromBufferAttribute(Z,Se);var Te=M.morphTargetInfluences;if(B.morphTargets&&de&&Te){h.set(0,0,0),c.set(0,0,0),f.set(0,0,0);for(var Re=0,We=de.length;Re<We;Re++){var Le=Te[Re],lt=de[Re];Le!==0&&(a.fromBufferAttribute(lt,me),o.fromBufferAttribute(lt,ue),l.fromBufferAttribute(lt,Se),h.addScaledVector(a.sub(n),Le),c.addScaledVector(o.sub(s),Le),f.addScaledVector(l.sub(r),Le))}n.add(h),s.add(c),r.add(f)}var st=T(M,B,O,x,n,s,r,P);if(st){$&&(g.fromBufferAttribute($,me),v.fromBufferAttribute($,ue),A.fromBufferAttribute($,Se),st.uv=ca.getUV(P,n,s,r,g,v,A,new _t));var De=new Xv(me,ue,Se);ca.getNormal(n,s,r,De.normal),st.face=De}return st}return function(B,O){var x=this.geometry,Z=this.material,de=this.matrixWorld;if(Z!==void 0&&(x.boundingSphere===null&&x.computeBoundingSphere(),t.copy(x.boundingSphere),t.applyMatrix4(de),B.ray.intersectsSphere(t)!==!1&&(i.getInverse(de),e.copy(B.ray).applyMatrix4(i),!(x.boundingBox!==null&&e.intersectsBox(x.boundingBox)===!1)))){var $;if(x.isBufferGeometry){var me,ue,Se,Te=x.index,Re=x.attributes.position,We=x.morphAttributes.position,Le=x.attributes.uv,lt=x.groups,st=x.drawRange,De,et,Ke,Ct,dt,Et,ut,Wt;if(Te!==null)if(Array.isArray(Z))for(De=0,Ke=lt.length;De<Ke;De++)for(dt=lt[De],Et=Z[dt.materialIndex],ut=Math.max(dt.start,st.start),Wt=Math.min(dt.start+dt.count,st.start+st.count),et=ut,Ct=Wt;et<Ct;et+=3)me=Te.getX(et),ue=Te.getX(et+1),Se=Te.getX(et+2),$=D(this,Et,B,e,Re,We,Le,me,ue,Se),$&&($.faceIndex=Math.floor(et/3),$.face.materialIndex=dt.materialIndex,O.push($));else for(ut=Math.max(0,st.start),Wt=Math.min(Te.count,st.start+st.count),De=ut,Ke=Wt;De<Ke;De+=3)me=Te.getX(De),ue=Te.getX(De+1),Se=Te.getX(De+2),$=D(this,Z,B,e,Re,We,Le,me,ue,Se),$&&($.faceIndex=Math.floor(De/3),O.push($));else if(Re!==void 0)if(Array.isArray(Z))for(De=0,Ke=lt.length;De<Ke;De++)for(dt=lt[De],Et=Z[dt.materialIndex],ut=Math.max(dt.start,st.start),Wt=Math.min(dt.start+dt.count,st.start+st.count),et=ut,Ct=Wt;et<Ct;et+=3)me=et,ue=et+1,Se=et+2,$=D(this,Et,B,e,Re,We,Le,me,ue,Se),$&&($.faceIndex=Math.floor(et/3),$.face.materialIndex=dt.materialIndex,O.push($));else for(ut=Math.max(0,st.start),Wt=Math.min(Re.count,st.start+st.count),De=ut,Ke=Wt;De<Ke;De+=3)me=De,ue=De+1,Se=De+2,$=D(this,Z,B,e,Re,We,Le,me,ue,Se),$&&($.faceIndex=Math.floor(De/3),O.push($))}else if(x.isGeometry){var Nt,ci,Yt,Pe=Array.isArray(Z),pe=x.vertices,bt=x.faces,wt,Gt=x.faceVertexUvs[0];Gt.length>0&&(wt=Gt);for(var Ft=0,V=bt.length;Ft<V;Ft++){var te=bt[Ft],fe=Pe?Z[te.materialIndex]:Z;if(fe!==void 0&&(Nt=pe[te.a],ci=pe[te.b],Yt=pe[te.c],$=T(this,fe,B,e,Nt,ci,Yt,P),$)){if(wt&&wt[Ft]){var _e=wt[Ft];g.copy(_e[0]),v.copy(_e[1]),A.copy(_e[2]),$.uv=ca.getUV(P,Nt,ci,Yt,g,v,A,new _t)}$.face=te,$.faceIndex=Ft,O.push($)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function wne(i,e,t,n){var s=new wi(0),r=0,a,o,l=null,h=0;function c(g,v,A,P){var w=v.background,T=i.vr,D=T.getSession&&T.getSession();if(D&&D.environmentBlendMode==="additive"&&(w=null),w===null?(f(s,r),l=null,h=0):w&&w.isColor&&(f(w,1),P=!0,l=null,h=0),(i.autoClear||P)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),w&&(w.isCubeTexture||w.isWebGLRenderTargetCube)){o===void 0&&(o=new Ws(new nf(1,1,1),new ro({type:"BackgroundCubeMaterial",uniforms:Ag(Oh.cube.uniforms),vertexShader:Oh.cube.vertexShader,fragmentShader:Oh.cube.fragmentShader,side:Xr,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(B,O,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),t.update(o));var M=w.isWebGLRenderTargetCube?w.texture:w;o.material.uniforms.tCube.value=M,o.material.uniforms.tFlip.value=w.isWebGLRenderTargetCube?1:-1,(l!==w||h!==M.version)&&(o.material.needsUpdate=!0,l=w,h=M.version),g.unshift(o,o.geometry,o.material,0,0,null)}else w&&w.isTexture&&(a===void 0&&(a=new Ws(new sf(2,2),new ro({type:"BackgroundMaterial",uniforms:Ag(Oh.background.uniforms),vertexShader:Oh.background.vertexShader,fragmentShader:Oh.background.fragmentShader,side:v0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.removeAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),t.update(a)),a.material.uniforms.t2D.value=w,w.matrixAutoUpdate===!0&&w.updateMatrix(),a.material.uniforms.uvTransform.value.copy(w.matrix),(l!==w||h!==w.version)&&(a.material.needsUpdate=!0,l=w,h=w.version),g.unshift(a,a.geometry,a.material,0,0,null))}function f(g,v){e.buffers.color.setClear(g.r,g.g,g.b,v,n)}return{getClearColor:function(){return s},setClearColor:function(g,v){s.set(g),r=v!==void 0?v:1,f(s,r)},getClearAlpha:function(){return r},setClearAlpha:function(g){r=g,f(s,r)},render:c}}function Sne(i,e,t,n){var s;function r(l){s=l}function a(l,h){i.drawArrays(s,l,h),t.update(h,s)}function o(l,h,c){var f;if(n.isWebGL2)f=i;else if(f=e.get("ANGLE_instanced_arrays"),f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](s,h,c,l.maxInstancedCount),t.update(c,s,l.maxInstancedCount)}this.setMode=r,this.render=a,this.renderInstances=o}function Pne(i,e,t){var n;function s(){if(n!==void 0)return n;var x=e.get("EXT_texture_filter_anisotropic");return x!==null?n=i.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT):n=0,n}function r(x){if(x==="highp"){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";x="mediump"}return x==="mediump"&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext,o=t.precision!==void 0?t.precision:"highp",l=r(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);var h=t.logarithmicDepthBuffer===!0,c=i.getParameter(34930),f=i.getParameter(35660),g=i.getParameter(3379),v=i.getParameter(34076),A=i.getParameter(34921),P=i.getParameter(36347),w=i.getParameter(36348),T=i.getParameter(36349),D=f>0,M=a||!!e.get("OES_texture_float"),B=D&&M,O=a?i.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:s,getMaxPrecision:r,precision:o,logarithmicDepthBuffer:h,maxTextures:c,maxVertexTextures:f,maxTextureSize:g,maxCubemapSize:v,maxAttributes:A,maxVertexUniforms:P,maxVaryings:w,maxFragmentUniforms:T,vertexTextures:D,floatFragmentTextures:M,floatVertexTextures:B,maxSamples:O}}function Tne(){var i=this,e=null,t=0,n=!1,s=!1,r=new Mh,a=new Nr,o={value:null,needsUpdate:!1};this.uniform=o,this.numPlanes=0,this.numIntersection=0,this.init=function(c,f,g){var v=c.length!==0||f||t!==0||n;return n=f,e=h(c,g,0),t=c.length,v},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,l()},this.setState=function(c,f,g,v,A,P){if(!n||c===null||c.length===0||s&&!g)s?h(null):l();else{var w=s?0:t,T=w*4,D=A.clippingState||null;o.value=D,D=h(c,v,T,P);for(var M=0;M!==T;++M)D[M]=e[M];A.clippingState=D,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=w}};function l(){o.value!==e&&(o.value=e,o.needsUpdate=t>0),i.numPlanes=t,i.numIntersection=0}function h(c,f,g,v){var A=c!==null?c.length:0,P=null;if(A!==0){if(P=o.value,v!==!0||P===null){var w=g+A*4,T=f.matrixWorldInverse;a.getNormalMatrix(T),(P===null||P.length<w)&&(P=new Float32Array(w));for(var D=0,M=g;D!==A;++D,M+=4)r.copy(c[D]).applyMatrix4(T,a),r.normal.toArray(P,M),P[M+3]=r.constant}o.value=P,o.needsUpdate=!0}return i.numPlanes=A,P}}function xne(i){var e={};return{get:function(t){if(e[t]!==void 0)return e[t];var n;switch(t){case"WEBGL_depth_texture":n=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=i.getExtension(t)}return n===null&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]=n,n}}}function Ene(i,e,t){var n={},s={};function r(h){var c=h.target,f=n[c.id];f.index!==null&&e.remove(f.index);for(var g in f.attributes)e.remove(f.attributes[g]);c.removeEventListener("dispose",r),delete n[c.id];var v=s[f.id];v&&(e.remove(v),delete s[f.id]),t.memory.geometries--}function a(h,c){var f=n[c.id];return f||(c.addEventListener("dispose",r),c.isBufferGeometry?f=c:c.isGeometry&&(c._bufferGeometry===void 0&&(c._bufferGeometry=new Zt().setFromObject(h)),f=c._bufferGeometry),n[c.id]=f,t.memory.geometries++,f)}function o(h){var c=h.index,f=h.attributes;c!==null&&e.update(c,34963);for(var g in f)e.update(f[g],34962);var v=h.morphAttributes;for(var g in v)for(var A=v[g],P=0,w=A.length;P<w;P++)e.update(A[P],34962)}function l(h){var c=s[h.id];if(c)return c;var f=[],g=h.index,v=h.attributes;if(g!==null)for(var A=g.array,P=0,w=A.length;P<w;P+=3){var T=A[P+0],D=A[P+1],M=A[P+2];f.push(T,D,D,M,M,T)}else for(var A=v.position.array,P=0,w=A.length/3-1;P<w;P+=3){var T=P+0,D=P+1,M=P+2;f.push(T,D,D,M,M,T)}return c=new(C3(f)>65535?Sg:wg)(f,1),e.update(c,34963),s[h.id]=c,c}return{get:a,update:o,getWireframeAttribute:l}}function Vne(i,e,t,n){var s;function r(f){s=f}var a,o;function l(f){a=f.type,o=f.bytesPerElement}function h(f,g){i.drawElements(s,g,a,f*o),t.update(g,s)}function c(f,g,v){var A;if(n.isWebGL2)A=i;else{var A=e.get("ANGLE_instanced_arrays");if(A===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}A[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](s,v,a,g*o,f.maxInstancedCount),t.update(v,s,f.maxInstancedCount)}this.setMode=r,this.setIndex=l,this.render=h,this.renderInstances=c}function kne(i){var e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,o){switch(o=o||1,t.calls++,a){case 4:t.triangles+=o*(r/3);break;case 5:case 6:t.triangles+=o*(r-2);break;case 1:t.lines+=o*(r/2);break;case 3:t.lines+=o*(r-1);break;case 2:t.lines+=o*r;break;case 0:t.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function Cne(i,e){return Math.abs(e[1])-Math.abs(i[1])}function Dne(i){var e={},t=new Float32Array(8);function n(s,r,a,o){var l=s.morphTargetInfluences,h=l.length,c=e[r.id];if(c===void 0){c=[];for(var f=0;f<h;f++)c[f]=[f,0];e[r.id]=c}for(var g=a.morphTargets&&r.morphAttributes.position,v=a.morphNormals&&r.morphAttributes.normal,f=0;f<h;f++){var A=c[f];A[1]!==0&&(g&&r.removeAttribute("morphTarget"+f),v&&r.removeAttribute("morphNormal"+f))}for(var f=0;f<h;f++){var A=c[f];A[0]=f,A[1]=l[f]}c.sort(Cne);for(var f=0;f<8;f++){var A=c[f];if(A){var P=A[0],w=A[1];if(w){g&&r.addAttribute("morphTarget"+f,g[P]),v&&r.addAttribute("morphNormal"+f,v[P]),t[f]=w;continue}}t[f]=0}o.getUniforms().setValue(i,"morphTargetInfluences",t)}return{update:n}}function Ine(i,e){var t={};function n(r){var a=e.render.frame,o=r.geometry,l=i.get(r,o);return t[l.id]!==a&&(o.isGeometry&&l.updateFromObject(r),i.update(l),t[l.id]=a),l}function s(){t={}}return{update:n,dispose:s}}function Nu(i,e,t,n,s,r,a,o,l,h){i=i!==void 0?i:[],e=e!==void 0?e:rP,a=a!==void 0?a:$c,vs.call(this,i,e,t,n,s,r,a,o,l,h),this.flipY=!1}Nu.prototype=Object.create(vs.prototype);Nu.prototype.constructor=Nu;Nu.prototype.isCubeTexture=!0;Object.defineProperty(Nu.prototype,"images",{get:function(){return this.image},set:function(i){this.image=i}});function Pg(i,e,t,n){vs.call(this,null),this.image={data:i,width:e,height:t,depth:n},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=Ra,this.generateMipmaps=!1,this.flipY=!1}Pg.prototype=Object.create(vs.prototype);Pg.prototype.constructor=Pg;Pg.prototype.isDataTexture2DArray=!0;function Tg(i,e,t,n){vs.call(this,null),this.image={data:i,width:e,height:t,depth:n},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=Ra,this.generateMipmaps=!1,this.flipY=!1}Tg.prototype=Object.create(vs.prototype);Tg.prototype.constructor=Tg;Tg.prototype.isDataTexture3D=!0;var D3=new vs,Lne=new Pg,Mne=new Tg,I3=new Nu,kC=[],CC=[],DC=new Float32Array(16),IC=new Float32Array(9),LC=new Float32Array(4);function Ff(i,e,t){var n=i[0];if(n<=0||n>0)return i;var s=e*t,r=kC[s];if(r===void 0&&(r=new Float32Array(s),kC[s]=r),e!==0){n.toArray(r,0);for(var a=1,o=0;a!==e;++a)o+=t,i[a].toArray(r,o)}return r}function Ys(i,e){if(i.length!==e.length)return!1;for(var t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Br(i,e){for(var t=0,n=e.length;t<n;t++)i[t]=e[t]}function L3(i,e){var t=CC[e];t===void 0&&(t=new Int32Array(e),CC[e]=t);for(var n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function One(i,e){var t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Nne(i,e){var t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Rne(i,e){var t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ys(t,e))return;i.uniform2fv(this.addr,e),Br(t,e)}}function Bne(i,e){var t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ys(t,e))return;i.uniform3fv(this.addr,e),Br(t,e)}}function qne(i,e){var t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ys(t,e))return;i.uniform4fv(this.addr,e),Br(t,e)}}function zne(i,e){var t=this.cache,n=e.elements;if(n===void 0){if(Ys(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Br(t,e)}else{if(Ys(t,n))return;LC.set(n),i.uniformMatrix2fv(this.addr,!1,LC),Br(t,n)}}function Fne(i,e){var t=this.cache,n=e.elements;if(n===void 0){if(Ys(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Br(t,e)}else{if(Ys(t,n))return;IC.set(n),i.uniformMatrix3fv(this.addr,!1,IC),Br(t,n)}}function Hne(i,e){var t=this.cache,n=e.elements;if(n===void 0){if(Ys(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Br(t,e)}else{if(Ys(t,n))return;DC.set(n),i.uniformMatrix4fv(this.addr,!1,DC),Br(t,n)}}function Une(i,e,t){var n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.safeSetTexture2D(e||D3,s)}function Gne(i,e,t){var n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||Lne,s)}function Wne(i,e,t){var n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||Mne,s)}function Kne(i,e,t){var n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.safeSetTextureCube(e||I3,s)}function M3(i,e){var t=this.cache;Ys(t,e)||(i.uniform2iv(this.addr,e),Br(t,e))}function O3(i,e){var t=this.cache;Ys(t,e)||(i.uniform3iv(this.addr,e),Br(t,e))}function N3(i,e){var t=this.cache;Ys(t,e)||(i.uniform4iv(this.addr,e),Br(t,e))}function Yne(i){switch(i){case 5126:return One;case 35664:return Rne;case 35665:return Bne;case 35666:return qne;case 35674:return zne;case 35675:return Fne;case 35676:return Hne;case 35678:case 36198:return Une;case 35679:return Wne;case 35680:return Kne;case 36289:return Gne;case 5124:case 35670:return Nne;case 35667:case 35671:return M3;case 35668:case 35672:return O3;case 35669:case 35673:return N3}}function jne(i,e){var t=this.cache;Ys(t,e)||(i.uniform1fv(this.addr,e),Br(t,e))}function Xne(i,e){var t=this.cache;Ys(t,e)||(i.uniform1iv(this.addr,e),Br(t,e))}function Qne(i,e){var t=this.cache,n=Ff(e,this.size,2);Ys(t,n)||(i.uniform2fv(this.addr,n),this.updateCache(n))}function Jne(i,e){var t=this.cache,n=Ff(e,this.size,3);Ys(t,n)||(i.uniform3fv(this.addr,n),this.updateCache(n))}function Zne(i,e){var t=this.cache,n=Ff(e,this.size,4);Ys(t,n)||(i.uniform4fv(this.addr,n),this.updateCache(n))}function $ne(i,e){var t=this.cache,n=Ff(e,this.size,4);Ys(t,n)||(i.uniformMatrix2fv(this.addr,!1,n),this.updateCache(n))}function ese(i,e){var t=this.cache,n=Ff(e,this.size,9);Ys(t,n)||(i.uniformMatrix3fv(this.addr,!1,n),this.updateCache(n))}function tse(i,e){var t=this.cache,n=Ff(e,this.size,16);Ys(t,n)||(i.uniformMatrix4fv(this.addr,!1,n),this.updateCache(n))}function ise(i,e,t){var n=this.cache,s=e.length,r=L3(t,s);Ys(n,r)===!1&&(i.uniform1iv(this.addr,r),Br(n,r));for(var a=0;a!==s;++a)t.safeSetTexture2D(e[a]||D3,r[a])}function nse(i,e,t){var n=this.cache,s=e.length,r=L3(t,s);Ys(n,r)===!1&&(i.uniform1iv(this.addr,r),Br(n,r));for(var a=0;a!==s;++a)t.safeSetTextureCube(e[a]||I3,r[a])}function sse(i){switch(i){case 5126:return jne;case 35664:return Qne;case 35665:return Jne;case 35666:return Zne;case 35674:return $ne;case 35675:return ese;case 35676:return tse;case 35678:return ise;case 35680:return nse;case 5124:case 35670:return Xne;case 35667:case 35671:return M3;case 35668:case 35672:return O3;case 35669:case 35673:return N3}}function rse(i,e,t){this.id=i,this.addr=t,this.cache=[],this.setValue=Yne(e.type)}function R3(i,e,t){this.id=i,this.addr=t,this.cache=[],this.size=e.size,this.setValue=sse(e.type)}R3.prototype.updateCache=function(i){var e=this.cache;i instanceof Float32Array&&e.length!==i.length&&(this.cache=new Float32Array(i.length)),Br(e,i)};function B3(i){this.id=i,this.seq=[],this.map={}}B3.prototype.setValue=function(i,e,t){for(var n=this.seq,s=0,r=n.length;s!==r;++s){var a=n[s];a.setValue(i,e[a.id],t)}};var YA=/([\w\d_]+)(\])?(\[|\.)?/g;function MC(i,e){i.seq.push(e),i.map[e.id]=e}function ase(i,e,t){var n=i.name,s=n.length;for(YA.lastIndex=0;;){var r=YA.exec(n),a=YA.lastIndex,o=r[1],l=r[2]==="]",h=r[3];if(l&&(o=o|0),h===void 0||h==="["&&a+2===s){MC(t,h===void 0?new rse(o,i,e):new R3(o,i,e));break}else{var c=t.map,f=c[o];f===void 0&&(f=new B3(o),MC(t,f)),t=f}}}function Tu(i,e){this.seq=[],this.map={};for(var t=i.getProgramParameter(e,35718),n=0;n<t;++n){var s=i.getActiveUniform(e,n),r=i.getUniformLocation(e,s.name);ase(s,r,this)}}Tu.prototype.setValue=function(i,e,t,n){var s=this.map[e];s!==void 0&&s.setValue(i,t,n)};Tu.prototype.setOptional=function(i,e,t){var n=e[t];n!==void 0&&this.setValue(i,t,n)};Tu.upload=function(i,e,t,n){for(var s=0,r=e.length;s!==r;++s){var a=e[s],o=t[a.id];o.needsUpdate!==!1&&a.setValue(i,o.value,n)}};Tu.seqWithValue=function(i,e){for(var t=[],n=0,s=i.length;n!==s;++n){var r=i[n];r.id in e&&t.push(r)}return t};function ose(i){for(var e=i.split(`
`),t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function OC(i,e,t,n){var s=i.createShader(e);return i.shaderSource(s,t),i.compileShader(s),n===!0&&(i.getShaderParameter(s,35713)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),i.getShaderInfoLog(s)!==""&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===35633?"vertex":"fragment",i.getShaderInfoLog(s),ose(t))),s}var lse=0;function q3(i){switch(i){case jv:return["Linear","( value )"];case jee:return["sRGB","( value )"];case Xee:return["RGBE","( value )"];case Qee:return["RGBM","( value, 7.0 )"];case Jee:return["RGBM","( value, 16.0 )"];case Zee:return["RGBD","( value, 256.0 )"];case E3:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+i)}}function Cy(i,e){var t=q3(e);return"vec4 "+i+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function hse(i,e){var t=q3(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function use(i,e){var t;switch(e){case w3:t="Linear";break;case fee:t="Reinhard";break;case mee:t="Uncharted2";break;case gee:t="OptimizedCineon";break;case yee:t="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function cse(i,e,t){i=i||{};var n=[i.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(i.fragDepth||e.logarithmicDepthBuffer)&&t.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",i.drawBuffers&&t.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(i.shaderTextureLOD||e.envMap)&&t.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return n.filter(Rm).join(`
`)}function dse(i){var e=[];for(var t in i){var n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function pse(i,e){for(var t={},n=i.getProgramParameter(e,35721),s=0;s<n;s++){var r=i.getActiveAttrib(e,s),a=r.name;t[a]=i.getAttribLocation(e,a)}return t}function Rm(i){return i!==""}function NC(i,e){return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function RC(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function mw(i){var e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,s){var r=Ln[s];if(r===void 0)throw new Error("Can not resolve #include <"+s+">");return mw(r)}return i.replace(e,t)}function BC(i){var e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function t(n,s,r,a){for(var o="",l=parseInt(s);l<parseInt(r);l++)o+=a.replace(/\[ i \]/g,"[ "+l+" ]");return o}return i.replace(e,t)}function fse(i,e,t,n,s,r,a,o){var l=i.context,h=n.defines,c=s.vertexShader,f=s.fragmentShader,g="SHADOWMAP_TYPE_BASIC";r.shadowMapType===m3?g="SHADOWMAP_TYPE_PCF":r.shadowMapType===Y$&&(g="SHADOWMAP_TYPE_PCF_SOFT");var v="ENVMAP_TYPE_CUBE",A="ENVMAP_MODE_REFLECTION",P="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case rP:case ow:v="ENVMAP_TYPE_CUBE";break;case aP:case oP:v="ENVMAP_TYPE_CUBE_UV";break;case S3:case lw:v="ENVMAP_TYPE_EQUIREC";break;case P3:v="ENVMAP_TYPE_SPHERE";break}switch(n.envMap.mapping){case ow:case lw:A="ENVMAP_MODE_REFRACTION";break}switch(n.combine){case m_:P="ENVMAP_BLENDING_MULTIPLY";break;case dee:P="ENVMAP_BLENDING_MIX";break;case pee:P="ENVMAP_BLENDING_ADD";break}}var w=i.gammaFactor>0?i.gammaFactor:1,T=a.isWebGL2?"":cse(n.extensions,r,e),D=dse(h),M=l.createProgram(),B,O;if(n.isRawShaderMaterial?(B=[D].filter(Rm).join(`
`),B.length>0&&(B+=`
`),O=[T,D].filter(Rm).join(`
`),O.length>0&&(O+=`
`)):(B=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+s.name,D,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+w,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+A:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+g:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Rm).join(`
`),O=[T,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+s.name,D,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+w,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+v:"",r.envMap?"#define "+A:"",r.envMap?"#define "+P:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+g:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==WA?"#define TONE_MAPPING":"",r.toneMapping!==WA?Ln.tonemapping_pars_fragment:"",r.toneMapping!==WA?use("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.matcapEncoding||r.envMapEncoding||r.emissiveMapEncoding?Ln.encodings_pars_fragment:"",r.mapEncoding?Cy("mapTexelToLinear",r.mapEncoding):"",r.matcapEncoding?Cy("matcapTexelToLinear",r.matcapEncoding):"",r.envMapEncoding?Cy("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Cy("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?hse("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Rm).join(`
`)),c=mw(c),c=NC(c,r),c=RC(c,r),f=mw(f),f=NC(f,r),f=RC(f,r),c=BC(c),f=BC(f),a.isWebGL2&&!n.isRawShaderMaterial){var x=!1,Z=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&c.match(Z)!==null&&f.match(Z)!==null&&(x=!0,c=c.replace(Z,""),f=f.replace(Z,"")),B=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+B,O=[`#version 300 es
`,"#define varying in",x?"":"out highp vec4 pc_fragColor;",x?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+O}var de=B+c,$=O+f,me=OC(l,35633,de,i.debug.checkShaderErrors),ue=OC(l,35632,$,i.debug.checkShaderErrors);if(l.attachShader(M,me),l.attachShader(M,ue),n.index0AttributeName!==void 0?l.bindAttribLocation(M,0,n.index0AttributeName):r.morphTargets===!0&&l.bindAttribLocation(M,0,"position"),l.linkProgram(M),i.debug.checkShaderErrors){var Se=l.getProgramInfoLog(M).trim(),Te=l.getShaderInfoLog(me).trim(),Re=l.getShaderInfoLog(ue).trim(),We=!0,Le=!0;l.getProgramParameter(M,35714)===!1?(We=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(M,35715),"gl.getProgramInfoLog",Se,Te,Re)):Se!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Se):(Te===""||Re==="")&&(Le=!1),Le&&(this.diagnostics={runnable:We,material:n,programLog:Se,vertexShader:{log:Te,prefix:B},fragmentShader:{log:Re,prefix:O}})}l.deleteShader(me),l.deleteShader(ue);var lt;this.getUniforms=function(){return lt===void 0&&(lt=new Tu(l,M)),lt};var st;return this.getAttributes=function(){return st===void 0&&(st=pse(l,M)),st},this.destroy=function(){l.deleteProgram(M),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=s.name,this.id=lse++,this.code=t,this.usedTimes=1,this.program=M,this.vertexShader=me,this.fragmentShader=ue,this}function mse(i,e,t,n){var s=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(h){var c=h.skeleton,f=c.bones;if(t.floatVertexTextures)return 1024;var g=t.maxVertexUniforms,v=Math.floor((g-20)/4),A=Math.min(v,f.length);return A<f.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+f.length+" bones. This GPU supports "+A+"."),0):A}function l(h,c){var f;return h?h.isTexture?f=h.encoding:h.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),f=h.texture.encoding):f=jv,f===jv&&c&&(f=E3),f}this.getParameters=function(h,c,f,g,v,A,P){var w=r[h.type],T=P.isSkinnedMesh?o(P):0,D=t.precision;h.precision!==null&&(D=t.getMaxPrecision(h.precision),D!==h.precision&&console.warn("THREE.WebGLProgram.getParameters:",h.precision,"not supported, using",D,"instead."));var M=i.getRenderTarget(),B={shaderID:w,precision:D,supportsVertexTextures:t.vertexTextures,outputEncoding:l(M?M.texture:null,i.gammaOutput),map:!!h.map,mapEncoding:l(h.map,i.gammaInput),matcap:!!h.matcap,matcapEncoding:l(h.matcap,i.gammaInput),envMap:!!h.envMap,envMapMode:h.envMap&&h.envMap.mapping,envMapEncoding:l(h.envMap,i.gammaInput),envMapCubeUV:!!h.envMap&&(h.envMap.mapping===aP||h.envMap.mapping===oP),lightMap:!!h.lightMap,aoMap:!!h.aoMap,emissiveMap:!!h.emissiveMap,emissiveMapEncoding:l(h.emissiveMap,i.gammaInput),bumpMap:!!h.bumpMap,normalMap:!!h.normalMap,objectSpaceNormalMap:h.normalMapType===tte,displacementMap:!!h.displacementMap,roughnessMap:!!h.roughnessMap,metalnessMap:!!h.metalnessMap,specularMap:!!h.specularMap,alphaMap:!!h.alphaMap,gradientMap:!!h.gradientMap,combine:h.combine,vertexTangents:h.normalMap&&h.vertexTangents,vertexColors:h.vertexColors,fog:!!g,useFog:h.fog,fogExp:g&&g.isFogExp2,flatShading:h.flatShading,sizeAttenuation:h.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:h.skinning&&T>0,maxBones:T,useVertexTexture:t.floatVertexTextures,morphTargets:h.morphTargets,morphNormals:h.morphNormals,maxMorphTargets:i.maxMorphTargets,maxMorphNormals:i.maxMorphNormals,numDirLights:c.directional.length,numPointLights:c.point.length,numSpotLights:c.spot.length,numRectAreaLights:c.rectArea.length,numHemiLights:c.hemi.length,numClippingPlanes:v,numClipIntersection:A,dithering:h.dithering,shadowMapEnabled:i.shadowMap.enabled&&P.receiveShadow&&f.length>0,shadowMapType:i.shadowMap.type,toneMapping:i.toneMapping,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:h.premultipliedAlpha,alphaTest:h.alphaTest,doubleSided:h.side===Rf,flipSided:h.side===Xr,depthPacking:h.depthPacking!==void 0?h.depthPacking:!1};return B},this.getProgramCode=function(h,c){var f=[];if(c.shaderID?f.push(c.shaderID):(f.push(h.fragmentShader),f.push(h.vertexShader)),h.defines!==void 0)for(var g in h.defines)f.push(g),f.push(h.defines[g]);for(var v=0;v<a.length;v++)f.push(c[a[v]]);return f.push(h.onBeforeCompile.toString()),f.push(i.gammaOutput),f.push(i.gammaFactor),f.join()},this.acquireProgram=function(h,c,f,g){for(var v,A=0,P=s.length;A<P;A++){var w=s[A];if(w.code===g){v=w,++v.usedTimes;break}}return v===void 0&&(v=new fse(i,e,g,h,c,f,t),s.push(v)),v},this.releaseProgram=function(h){if(--h.usedTimes===0){var c=s.indexOf(h);s[c]=s[s.length-1],s.pop(),h.destroy()}},this.programs=s}function gse(){var i=new WeakMap;function e(r){var a=i.get(r);return a===void 0&&(a={},i.set(r,a)),a}function t(r){i.delete(r)}function n(r,a,o){i.get(r)[a]=o}function s(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:s}}function yse(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.program!==e.program?i.program.id-e.program.id:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function vse(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function qC(){var i=[],e=0,t=[],n=[],s={id:-1};function r(){e=0,t.length=0,n.length=0}function a(c,f,g,v,A,P){var w=i[e];return w===void 0?(w={id:c.id,object:c,geometry:f,material:g,program:g.program||s,groupOrder:v,renderOrder:c.renderOrder,z:A,group:P},i[e]=w):(w.id=c.id,w.object=c,w.geometry=f,w.material=g,w.program=g.program||s,w.groupOrder=v,w.renderOrder=c.renderOrder,w.z=A,w.group=P),e++,w}function o(c,f,g,v,A,P){var w=a(c,f,g,v,A,P);(g.transparent===!0?n:t).push(w)}function l(c,f,g,v,A,P){var w=a(c,f,g,v,A,P);(g.transparent===!0?n:t).unshift(w)}function h(){t.length>1&&t.sort(yse),n.length>1&&n.sort(vse)}return{opaque:t,transparent:n,init:r,push:o,unshift:l,sort:h}}function bse(){var i={};function e(s){var r=s.target;r.removeEventListener("dispose",e),delete i[r.id]}function t(s,r){var a=i[s.id],o;return a===void 0?(o=new qC,i[s.id]={},i[s.id][r.id]=o,s.addEventListener("dispose",e)):(o=a[r.id],o===void 0&&(o=new qC,a[r.id]=o)),o}function n(){i={}}return{get:t,dispose:n}}function _se(){var i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];var t;switch(e.type){case"DirectionalLight":t={direction:new Ae,color:new wi,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"SpotLight":t={position:new Ae,direction:new Ae,color:new wi,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"PointLight":t={position:new Ae,color:new wi,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _t,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":t={direction:new Ae,skyColor:new wi,groundColor:new wi};break;case"RectAreaLight":t={color:new wi,position:new Ae,halfWidth:new Ae,halfHeight:new Ae};break}return i[e.id]=t,t}}}var Ase=0;function wse(){for(var i=new _se,e={id:Ase++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},t=0;t<9;t++)e.probe.push(new Ae);var n=new Ae,s=new Fi,r=new Fi;function a(o,l,h){for(var c=0,f=0,g=0,v=0;v<9;v++)e.probe[v].set(0,0,0);for(var A=0,P=0,w=0,T=0,D=0,M=h.matrixWorldInverse,v=0,B=o.length;v<B;v++){var O=o[v],x=O.color,Z=O.intensity,de=O.distance,$=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)c+=x.r*Z,f+=x.g*Z,g+=x.b*Z;else if(O.isLightProbe)for(var me=0;me<9;me++)e.probe[me].addScaledVector(O.sh.coefficients[me],Z);else if(O.isDirectionalLight){var ue=i.get(O);if(ue.color.copy(O.color).multiplyScalar(O.intensity),ue.direction.setFromMatrixPosition(O.matrixWorld),n.setFromMatrixPosition(O.target.matrixWorld),ue.direction.sub(n),ue.direction.transformDirection(M),ue.shadow=O.castShadow,O.castShadow){var Se=O.shadow;ue.shadowBias=Se.bias,ue.shadowRadius=Se.radius,ue.shadowMapSize=Se.mapSize}e.directionalShadowMap[A]=$,e.directionalShadowMatrix[A]=O.shadow.matrix,e.directional[A]=ue,A++}else if(O.isSpotLight){var ue=i.get(O);if(ue.position.setFromMatrixPosition(O.matrixWorld),ue.position.applyMatrix4(M),ue.color.copy(x).multiplyScalar(Z),ue.distance=de,ue.direction.setFromMatrixPosition(O.matrixWorld),n.setFromMatrixPosition(O.target.matrixWorld),ue.direction.sub(n),ue.direction.transformDirection(M),ue.coneCos=Math.cos(O.angle),ue.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),ue.decay=O.decay,ue.shadow=O.castShadow,O.castShadow){var Se=O.shadow;ue.shadowBias=Se.bias,ue.shadowRadius=Se.radius,ue.shadowMapSize=Se.mapSize}e.spotShadowMap[w]=$,e.spotShadowMatrix[w]=O.shadow.matrix,e.spot[w]=ue,w++}else if(O.isRectAreaLight){var ue=i.get(O);ue.color.copy(x).multiplyScalar(Z),ue.position.setFromMatrixPosition(O.matrixWorld),ue.position.applyMatrix4(M),r.identity(),s.copy(O.matrixWorld),s.premultiply(M),r.extractRotation(s),ue.halfWidth.set(O.width*.5,0,0),ue.halfHeight.set(0,O.height*.5,0),ue.halfWidth.applyMatrix4(r),ue.halfHeight.applyMatrix4(r),e.rectArea[T]=ue,T++}else if(O.isPointLight){var ue=i.get(O);if(ue.position.setFromMatrixPosition(O.matrixWorld),ue.position.applyMatrix4(M),ue.color.copy(O.color).multiplyScalar(O.intensity),ue.distance=O.distance,ue.decay=O.decay,ue.shadow=O.castShadow,O.castShadow){var Se=O.shadow;ue.shadowBias=Se.bias,ue.shadowRadius=Se.radius,ue.shadowMapSize=Se.mapSize,ue.shadowCameraNear=Se.camera.near,ue.shadowCameraFar=Se.camera.far}e.pointShadowMap[P]=$,e.pointShadowMatrix[P]=O.shadow.matrix,e.point[P]=ue,P++}else if(O.isHemisphereLight){var ue=i.get(O);ue.direction.setFromMatrixPosition(O.matrixWorld),ue.direction.transformDirection(M),ue.direction.normalize(),ue.skyColor.copy(O.color).multiplyScalar(Z),ue.groundColor.copy(O.groundColor).multiplyScalar(Z),e.hemi[D]=ue,D++}}e.ambient[0]=c,e.ambient[1]=f,e.ambient[2]=g,e.directional.length=A,e.spot.length=w,e.rectArea.length=T,e.point.length=P,e.hemi.length=D,e.hash.stateID=e.id,e.hash.directionalLength=A,e.hash.pointLength=P,e.hash.spotLength=w,e.hash.rectAreaLength=T,e.hash.hemiLength=D,e.hash.shadowsLength=l.length}return{setup:a,state:e}}function zC(){var i=new wse,e=[],t=[];function n(){e.length=0,t.length=0}function s(l){e.push(l)}function r(l){t.push(l)}function a(l){i.setup(e,t,l)}var o={lightsArray:e,shadowsArray:t,lights:i};return{init:n,state:o,setupLights:a,pushLight:s,pushShadow:r}}function Sse(){var i={};function e(s){var r=s.target;r.removeEventListener("dispose",e),delete i[r.id]}function t(s,r){var a;return i[s.id]===void 0?(a=new zC,i[s.id]={},i[s.id][r.id]=a,s.addEventListener("dispose",e)):i[s.id][r.id]===void 0?(a=new zC,i[s.id][r.id]=a):a=i[s.id][r.id],a}function n(){i={}}return{get:t,dispose:n}}function td(i){nn.call(this),this.type="MeshDepthMaterial",this.depthPacking=$ee,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(i)}td.prototype=Object.create(nn.prototype);td.prototype.constructor=td;td.prototype.isMeshDepthMaterial=!0;td.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.depthPacking=i.depthPacking,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.map=i.map,this.alphaMap=i.alphaMap,this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this};function id(i){nn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ae,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(i)}id.prototype=Object.create(nn.prototype);id.prototype.constructor=id;id.prototype.isMeshDistanceMaterial=!0;id.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.referencePosition.copy(i.referencePosition),this.nearDistance=i.nearDistance,this.farDistance=i.farDistance,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.map=i.map,this.alphaMap=i.alphaMap,this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this};function z3(i,e,t){for(var n=new pP,s=new Fi,r=new _t,a=new _t(t,t),o=new Ae,l=new Ae,h=1,c=2,f=(h|c)+1,g=new Array(f),v=new Array(f),A={},P={0:Xr,1:v0,2:Rf},w=[new Ae(1,0,0),new Ae(-1,0,0),new Ae(0,0,1),new Ae(0,0,-1),new Ae(0,1,0),new Ae(0,-1,0)],T=[new Ae(0,1,0),new Ae(0,1,0),new Ae(0,1,0),new Ae(0,1,0),new Ae(0,0,1),new Ae(0,0,-1)],D=[new hs,new hs,new hs,new hs,new hs,new hs],M=0;M!==f;++M){var B=(M&h)!==0,O=(M&c)!==0,x=new td({depthPacking:ete,morphTargets:B,skinning:O});g[M]=x;var Z=new id({morphTargets:B,skinning:O});v[M]=Z}var de=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=m3,this.render=function(ue,Se,Te){if(de.enabled!==!1&&!(de.autoUpdate===!1&&de.needsUpdate===!1)&&ue.length!==0){var Re=i.getRenderTarget(),We=i.state;We.setBlending(Um),We.buffers.color.setClear(1,1,1,1),We.buffers.depth.setTest(!0),We.setScissorTest(!1);for(var Le,lt=0,st=ue.length;lt<st;lt++){var De=ue[lt],et=De.shadow,Ke=De&&De.isPointLight;if(et===void 0){console.warn("THREE.WebGLShadowMap:",De,"has no shadow.");continue}var Ct=et.camera;if(r.copy(et.mapSize),r.min(a),Ke){var dt=r.x,Et=r.y;D[0].set(dt*2,Et,dt,Et),D[1].set(0,Et,dt,Et),D[2].set(dt*3,Et,dt,Et),D[3].set(dt,Et,dt,Et),D[4].set(dt*3,0,dt,Et),D[5].set(dt,0,dt,Et),r.x*=4,r.y*=2}if(et.map===null){var ut={minFilter:Zr,magFilter:Zr,format:Ou};et.map=new Uh(r.x,r.y,ut),et.map.texture.name=De.name+".shadowMap",Ct.updateProjectionMatrix()}et.isSpotLightShadow&&et.update(De);var Wt=et.map,Nt=et.matrix;l.setFromMatrixPosition(De.matrixWorld),Ct.position.copy(l),Ke?(Le=6,Nt.makeTranslation(-l.x,-l.y,-l.z)):(Le=1,o.setFromMatrixPosition(De.target.matrixWorld),Ct.lookAt(o),Ct.updateMatrixWorld(),Nt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Nt.multiply(Ct.projectionMatrix),Nt.multiply(Ct.matrixWorldInverse)),i.setRenderTarget(Wt),i.clear();for(var ci=0;ci<Le;ci++){if(Ke){o.copy(Ct.position),o.add(w[ci]),Ct.up.copy(T[ci]),Ct.lookAt(o),Ct.updateMatrixWorld();var Yt=D[ci];We.viewport(Yt)}s.multiplyMatrices(Ct.projectionMatrix,Ct.matrixWorldInverse),n.setFromMatrix(s),me(Se,Te,Ct,Ke)}}de.needsUpdate=!1,i.setRenderTarget(Re)}};function $(ue,Se,Te,Re,We,Le){var lt=ue.geometry,st=null,De=g,et=ue.customDepthMaterial;if(Te&&(De=v,et=ue.customDistanceMaterial),et)st=et;else{var Ke=!1;Se.morphTargets&&(lt&&lt.isBufferGeometry?Ke=lt.morphAttributes&&lt.morphAttributes.position&&lt.morphAttributes.position.length>0:lt&&lt.isGeometry&&(Ke=lt.morphTargets&&lt.morphTargets.length>0)),ue.isSkinnedMesh&&Se.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",ue);var Ct=ue.isSkinnedMesh&&Se.skinning,dt=0;Ke&&(dt|=h),Ct&&(dt|=c),st=De[dt]}if(i.localClippingEnabled&&Se.clipShadows===!0&&Se.clippingPlanes.length!==0){var Et=st.uuid,ut=Se.uuid,Wt=A[Et];Wt===void 0&&(Wt={},A[Et]=Wt);var Nt=Wt[ut];Nt===void 0&&(Nt=st.clone(),Wt[ut]=Nt),st=Nt}return st.visible=Se.visible,st.wireframe=Se.wireframe,st.side=Se.shadowSide!=null?Se.shadowSide:P[Se.side],st.clipShadows=Se.clipShadows,st.clippingPlanes=Se.clippingPlanes,st.clipIntersection=Se.clipIntersection,st.wireframeLinewidth=Se.wireframeLinewidth,st.linewidth=Se.linewidth,Te&&st.isMeshDistanceMaterial&&(st.referencePosition.copy(Re),st.nearDistance=We,st.farDistance=Le),st}function me(ue,Se,Te,Re){if(ue.visible!==!1){var We=ue.layers.test(Se.layers);if(We&&(ue.isMesh||ue.isLine||ue.isPoints)&&ue.castShadow&&(!ue.frustumCulled||n.intersectsObject(ue))){ue.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,ue.matrixWorld);var Le=e.update(ue),lt=ue.material;if(Array.isArray(lt))for(var st=Le.groups,De=0,et=st.length;De<et;De++){var Ke=st[De],Ct=lt[Ke.materialIndex];if(Ct&&Ct.visible){var dt=$(ue,Ct,Re,l,Te.near,Te.far);i.renderBufferDirect(Te,null,Le,dt,ue,Ke)}}else if(lt.visible){var dt=$(ue,lt,Re,l,Te.near,Te.far);i.renderBufferDirect(Te,null,Le,dt,ue,null)}}for(var Et=ue.children,ut=0,Wt=Et.length;ut<Wt;ut++)me(Et[ut],Se,Te,Re)}}}function Pse(i,e,t,n){function s(){var m=!1,_=new hs,S=null,k=new hs(0,0,0,0);return{setMask:function(I){S!==I&&!m&&(i.colorMask(I,I,I,I),S=I)},setLocked:function(I){m=I},setClear:function(I,L,N,q,W){W===!0&&(I*=q,L*=q,N*=q),_.set(I,L,N,q),k.equals(_)===!1&&(i.clearColor(I,L,N,q),k.copy(_))},reset:function(){m=!1,S=null,k.set(-1,0,0,0)}}}function r(){var m=!1,_=null,S=null,k=null;return{setTest:function(I){I?Yt(2929):Pe(2929)},setMask:function(I){_!==I&&!m&&(i.depthMask(I),_=I)},setFunc:function(I){if(S!==I){if(I)switch(I){case ree:i.depthFunc(512);break;case aee:i.depthFunc(519);break;case oee:i.depthFunc(513);break;case aw:i.depthFunc(515);break;case lee:i.depthFunc(514);break;case hee:i.depthFunc(518);break;case uee:i.depthFunc(516);break;case cee:i.depthFunc(517);break;default:i.depthFunc(515)}else i.depthFunc(515);S=I}},setLocked:function(I){m=I},setClear:function(I){k!==I&&(i.clearDepth(I),k=I)},reset:function(){m=!1,_=null,S=null,k=null}}}function a(){var m=!1,_=null,S=null,k=null,I=null,L=null,N=null,q=null,W=null;return{setTest:function(K){K?Yt(2960):Pe(2960)},setMask:function(K){_!==K&&!m&&(i.stencilMask(K),_=K)},setFunc:function(K,G,U){(S!==K||k!==G||I!==U)&&(i.stencilFunc(K,G,U),S=K,k=G,I=U)},setOp:function(K,G,U){(L!==K||N!==G||q!==U)&&(i.stencilOp(K,G,U),L=K,N=G,q=U)},setLocked:function(K){m=K},setClear:function(K){W!==K&&(i.clearStencil(K),W=K)},reset:function(){m=!1,_=null,S=null,k=null,I=null,L=null,N=null,q=null,W=null}}}var o=new s,l=new r,h=new a,c=i.getParameter(34921),f=new Uint8Array(c),g=new Uint8Array(c),v=new Uint8Array(c),A={},P=null,w=null,T=null,D=null,M=null,B=null,O=null,x=null,Z=null,de=null,$=!1,me=null,ue=null,Se=null,Te=null,Re=null,We=i.getParameter(35661),Le=!1,lt=0,st=i.getParameter(7938);st.indexOf("WebGL")!==-1?(lt=parseFloat(/^WebGL\ ([0-9])/.exec(st)[1]),Le=lt>=1):st.indexOf("OpenGL ES")!==-1&&(lt=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(st)[1]),Le=lt>=2);var De=null,et={},Ke=new hs,Ct=new hs;function dt(m,_,S){var k=new Uint8Array(4),I=i.createTexture();i.bindTexture(m,I),i.texParameteri(m,10241,9728),i.texParameteri(m,10240,9728);for(var L=0;L<S;L++)i.texImage2D(_+L,0,6408,1,1,0,6408,5121,k);return I}var Et={};Et[3553]=dt(3553,3553,1),Et[34067]=dt(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),h.setClear(0),Yt(2929),l.setFunc(aw),Ft(!1),V(bC),Yt(2884),wt(Um);function ut(){for(var m=0,_=f.length;m<_;m++)f[m]=0}function Wt(m){Nt(m,0)}function Nt(m,_){if(f[m]=1,g[m]===0&&(i.enableVertexAttribArray(m),g[m]=1),v[m]!==_){var S=n.isWebGL2?i:e.get("ANGLE_instanced_arrays");S[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](m,_),v[m]=_}}function ci(){for(var m=0,_=g.length;m!==_;++m)g[m]!==f[m]&&(i.disableVertexAttribArray(m),g[m]=0)}function Yt(m){A[m]!==!0&&(i.enable(m),A[m]=!0)}function Pe(m){A[m]!==!1&&(i.disable(m),A[m]=!1)}function pe(){if(P===null&&(P=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var m=i.getParameter(34467),_=0;_<m.length;_++)P.push(m[_]);return P}function bt(m){return w!==m?(i.useProgram(m),w=m,!0):!1}function wt(m,_,S,k,I,L,N,q){if(m===Um){T&&(Pe(3042),T=!1);return}if(T||(Yt(3042),T=!0),m!==b3){if(m!==D||q!==$){if((M!==cp||x!==cp)&&(i.blendEquation(32774),M=cp,x=cp),q)switch(m){case bp:i.blendFuncSeparate(1,771,1,771);break;case nw:i.blendFunc(1,1);break;case sw:i.blendFuncSeparate(0,0,769,771);break;case rw:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",m);break}else switch(m){case bp:i.blendFuncSeparate(770,771,1,771);break;case nw:i.blendFunc(770,1);break;case sw:i.blendFunc(0,769);break;case rw:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",m);break}B=null,O=null,Z=null,de=null,D=m,$=q}return}I=I||_,L=L||S,N=N||k,(_!==M||I!==x)&&(i.blendEquationSeparate(t.convert(_),t.convert(I)),M=_,x=I),(S!==B||k!==O||L!==Z||N!==de)&&(i.blendFuncSeparate(t.convert(S),t.convert(k),t.convert(L),t.convert(N)),B=S,O=k,Z=L,de=N),D=m,$=null}function Gt(m,_){m.side===Rf?Pe(2884):Yt(2884);var S=m.side===Xr;_&&(S=!S),Ft(S),m.blending===bp&&m.transparent===!1?wt(Um):wt(m.blending,m.blendEquation,m.blendSrc,m.blendDst,m.blendEquationAlpha,m.blendSrcAlpha,m.blendDstAlpha,m.premultipliedAlpha),l.setFunc(m.depthFunc),l.setTest(m.depthTest),l.setMask(m.depthWrite),o.setMask(m.colorWrite),fe(m.polygonOffset,m.polygonOffsetFactor,m.polygonOffsetUnits)}function Ft(m){me!==m&&(m?i.frontFace(2304):i.frontFace(2305),me=m)}function V(m){m!==W$?(Yt(2884),m!==ue&&(m===bC?i.cullFace(1029):m===K$?i.cullFace(1028):i.cullFace(1032))):Pe(2884),ue=m}function te(m){m!==Se&&(Le&&i.lineWidth(m),Se=m)}function fe(m,_,S){m?(Yt(32823),(Te!==_||Re!==S)&&(i.polygonOffset(_,S),Te=_,Re=S)):Pe(32823)}function _e(m){m?Yt(3089):Pe(3089)}function ke(m){m===void 0&&(m=33984+We-1),De!==m&&(i.activeTexture(m),De=m)}function $e(m,_){De===null&&ke();var S=et[De];S===void 0&&(S={type:void 0,texture:void 0},et[De]=S),(S.type!==m||S.texture!==_)&&(i.bindTexture(m,_||Et[m]),S.type=m,S.texture=_)}function Xe(){try{i.compressedTexImage2D.apply(i,arguments)}catch(m){console.error("THREE.WebGLState:",m)}}function rt(){try{i.texImage2D.apply(i,arguments)}catch(m){console.error("THREE.WebGLState:",m)}}function Dn(){try{i.texImage3D.apply(i,arguments)}catch(m){console.error("THREE.WebGLState:",m)}}function Xt(m){Ke.equals(m)===!1&&(i.scissor(m.x,m.y,m.z,m.w),Ke.copy(m))}function u(m){Ct.equals(m)===!1&&(i.viewport(m.x,m.y,m.z,m.w),Ct.copy(m))}function d(){for(var m=0;m<g.length;m++)g[m]===1&&(i.disableVertexAttribArray(m),g[m]=0);A={},P=null,De=null,et={},w=null,D=null,me=null,ue=null,o.reset(),l.reset(),h.reset()}return{buffers:{color:o,depth:l,stencil:h},initAttributes:ut,enableAttribute:Wt,enableAttributeAndDivisor:Nt,disableUnusedAttributes:ci,enable:Yt,disable:Pe,getCompressedTextureFormats:pe,useProgram:bt,setBlending:wt,setMaterial:Gt,setFlipSided:Ft,setCullFace:V,setLineWidth:te,setPolygonOffset:fe,setScissorTest:_e,activeTexture:ke,bindTexture:$e,compressedTexImage2D:Xe,texImage2D:rt,texImage3D:Dn,scissor:Xt,viewport:u,reset:d}}function Tse(i,e,t,n,s,r,a){var o={},l,h=typeof OffscreenCanvas<"u";function c(Pe,pe){return h?new OffscreenCanvas(Pe,pe):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function f(Pe,pe,bt,wt){var Gt=1;if((Pe.width>wt||Pe.height>wt)&&(Gt=wt/Math.max(Pe.width,Pe.height)),Gt<1||pe===!0)if(typeof HTMLImageElement<"u"&&Pe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Pe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Pe instanceof ImageBitmap){var Ft=pe?tn.floorPowerOfTwo:Math.floor,V=Ft(Gt*Pe.width),te=Ft(Gt*Pe.height);l===void 0&&(l=c(V,te));var fe=bt?c(V,te):l;fe.width=V,fe.height=te;var _e=fe.getContext("2d");return _e.drawImage(Pe,0,0,V,te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Pe.width+"x"+Pe.height+") to ("+V+"x"+te+")."),fe}else return"data"in Pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Pe.width+"x"+Pe.height+")."),Pe;return Pe}function g(Pe){return tn.isPowerOfTwo(Pe.width)&&tn.isPowerOfTwo(Pe.height)}function v(Pe){return s.isWebGL2?!1:Pe.wrapS!==Ra||Pe.wrapT!==Ra||Pe.minFilter!==Zr&&Pe.minFilter!==ga}function A(Pe,pe){return Pe.generateMipmaps&&pe&&Pe.minFilter!==Zr&&Pe.minFilter!==ga}function P(Pe,pe,bt,wt){i.generateMipmap(Pe);var Gt=n.get(pe);Gt.__maxMipLevel=Math.log(Math.max(bt,wt))*Math.LOG2E}function w(Pe,pe){if(!s.isWebGL2)return Pe;var bt=Pe;return Pe===6403&&(pe===5126&&(bt=33326),pe===5131&&(bt=33325),pe===5121&&(bt=33321)),Pe===6407&&(pe===5126&&(bt=34837),pe===5131&&(bt=34843),pe===5121&&(bt=32849)),Pe===6408&&(pe===5126&&(bt=34836),pe===5131&&(bt=34842),pe===5121&&(bt=32856)),bt===33325||bt===33326||bt===34842||bt===34836?e.get("EXT_color_buffer_float"):(bt===34843||bt===34837)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),bt}function T(Pe){return Pe===Zr||Pe===lP||Pe===hP?9728:9729}function D(Pe){var pe=Pe.target;pe.removeEventListener("dispose",D),B(pe),pe.isVideoTexture&&delete o[pe.id],a.memory.textures--}function M(Pe){var pe=Pe.target;pe.removeEventListener("dispose",M),O(pe),a.memory.textures--}function B(Pe){var pe=n.get(Pe);pe.__webglInit!==void 0&&(i.deleteTexture(pe.__webglTexture),n.remove(Pe))}function O(Pe){var pe=n.get(Pe),bt=n.get(Pe.texture);if(Pe){if(bt.__webglTexture!==void 0&&i.deleteTexture(bt.__webglTexture),Pe.depthTexture&&Pe.depthTexture.dispose(),Pe.isWebGLRenderTargetCube)for(var wt=0;wt<6;wt++)i.deleteFramebuffer(pe.__webglFramebuffer[wt]),pe.__webglDepthbuffer&&i.deleteRenderbuffer(pe.__webglDepthbuffer[wt]);else i.deleteFramebuffer(pe.__webglFramebuffer),pe.__webglDepthbuffer&&i.deleteRenderbuffer(pe.__webglDepthbuffer);n.remove(Pe.texture),n.remove(Pe)}}var x=0;function Z(){x=0}function de(){var Pe=x;return Pe>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Pe+" texture units while this GPU supports only "+s.maxTextures),x+=1,Pe}function $(Pe,pe){var bt=n.get(Pe);if(Pe.isVideoTexture&&ut(Pe),Pe.version>0&&bt.__version!==Pe.version){var wt=Pe.image;if(wt===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(wt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Le(bt,Pe,pe);return}}t.activeTexture(33984+pe),t.bindTexture(3553,bt.__webglTexture)}function me(Pe,pe){var bt=n.get(Pe);if(Pe.version>0&&bt.__version!==Pe.version){Le(bt,Pe,pe);return}t.activeTexture(33984+pe),t.bindTexture(35866,bt.__webglTexture)}function ue(Pe,pe){var bt=n.get(Pe);if(Pe.version>0&&bt.__version!==Pe.version){Le(bt,Pe,pe);return}t.activeTexture(33984+pe),t.bindTexture(32879,bt.__webglTexture)}function Se(Pe,pe){var bt=n.get(Pe);if(Pe.image.length===6)if(Pe.version>0&&bt.__version!==Pe.version){We(bt,Pe),t.activeTexture(33984+pe),t.bindTexture(34067,bt.__webglTexture),i.pixelStorei(37440,Pe.flipY);for(var wt=Pe&&Pe.isCompressedTexture,Gt=Pe.image[0]&&Pe.image[0].isDataTexture,Ft=[],V=0;V<6;V++)!wt&&!Gt?Ft[V]=f(Pe.image[V],!1,!0,s.maxCubemapSize):Ft[V]=Gt?Pe.image[V].image:Pe.image[V];var te=Ft[0],fe=g(te)||s.isWebGL2,_e=r.convert(Pe.format),ke=r.convert(Pe.type),$e=w(_e,ke);Re(34067,Pe,fe);for(var V=0;V<6;V++)if(!wt)Gt?t.texImage2D(34069+V,0,$e,Ft[V].width,Ft[V].height,0,_e,ke,Ft[V].data):t.texImage2D(34069+V,0,$e,_e,ke,Ft[V]);else for(var Xe,rt=Ft[V].mipmaps,Dn=0,Xt=rt.length;Dn<Xt;Dn++)Xe=rt[Dn],Pe.format!==Ou&&Pe.format!==$c?t.getCompressedTextureFormats().indexOf(_e)>-1?t.compressedTexImage2D(34069+V,Dn,$e,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+V,Dn,$e,Xe.width,Xe.height,0,_e,ke,Xe.data);wt?bt.__maxMipLevel=rt.length-1:bt.__maxMipLevel=0,A(Pe,fe)&&P(34067,Pe,te.width,te.height),bt.__version=Pe.version,Pe.onUpdate&&Pe.onUpdate(Pe)}else t.activeTexture(33984+pe),t.bindTexture(34067,bt.__webglTexture)}function Te(Pe,pe){t.activeTexture(33984+pe),t.bindTexture(34067,n.get(Pe).__webglTexture)}function Re(Pe,pe,bt){var wt;if(bt?(i.texParameteri(Pe,10242,r.convert(pe.wrapS)),i.texParameteri(Pe,10243,r.convert(pe.wrapT)),(Pe===32879||Pe===35866)&&i.texParameteri(Pe,32882,r.convert(pe.wrapR)),i.texParameteri(Pe,10240,r.convert(pe.magFilter)),i.texParameteri(Pe,10241,r.convert(pe.minFilter))):(i.texParameteri(Pe,10242,33071),i.texParameteri(Pe,10243,33071),(Pe===32879||Pe===35866)&&i.texParameteri(Pe,32882,33071),(pe.wrapS!==Ra||pe.wrapT!==Ra)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(Pe,10240,T(pe.magFilter)),i.texParameteri(Pe,10241,T(pe.minFilter)),pe.minFilter!==Zr&&pe.minFilter!==ga&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),wt=e.get("EXT_texture_filter_anisotropic"),wt){if(pe.type===bg&&e.get("OES_texture_float_linear")===null||pe.type===cP&&(s.isWebGL2||e.get("OES_texture_half_float_linear"))===null)return;(pe.anisotropy>1||n.get(pe).__currentAnisotropy)&&(i.texParameterf(Pe,wt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(pe.anisotropy,s.getMaxAnisotropy())),n.get(pe).__currentAnisotropy=pe.anisotropy)}}function We(Pe,pe){Pe.__webglInit===void 0&&(Pe.__webglInit=!0,pe.addEventListener("dispose",D),Pe.__webglTexture=i.createTexture(),a.memory.textures++)}function Le(Pe,pe,bt){var wt=3553;pe.isDataTexture2DArray&&(wt=35866),pe.isDataTexture3D&&(wt=32879),We(Pe,pe),t.activeTexture(33984+bt),t.bindTexture(wt,Pe.__webglTexture),i.pixelStorei(37440,pe.flipY),i.pixelStorei(37441,pe.premultiplyAlpha),i.pixelStorei(3317,pe.unpackAlignment);var Gt=v(pe)&&g(pe.image)===!1,Ft=f(pe.image,Gt,!1,s.maxTextureSize),V=g(Ft)||s.isWebGL2,te=r.convert(pe.format),fe=r.convert(pe.type),_e=w(te,fe);Re(wt,pe,V);var ke,$e=pe.mipmaps;if(pe.isDepthTexture){if(_e=6402,pe.type===bg){if(!s.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");_e=36012}else s.isWebGL2&&(_e=33189);pe.format===_p&&_e===6402&&pe.type!==Gv&&pe.type!==x3&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),pe.type=Gv,fe=r.convert(pe.type)),pe.format===_g&&(_e=34041,pe.type!==Wv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),pe.type=Wv,fe=r.convert(pe.type))),t.texImage2D(3553,0,_e,Ft.width,Ft.height,0,te,fe,null)}else if(pe.isDataTexture)if($e.length>0&&V){for(var Xe=0,rt=$e.length;Xe<rt;Xe++)ke=$e[Xe],t.texImage2D(3553,Xe,_e,ke.width,ke.height,0,te,fe,ke.data);pe.generateMipmaps=!1,Pe.__maxMipLevel=$e.length-1}else t.texImage2D(3553,0,_e,Ft.width,Ft.height,0,te,fe,Ft.data),Pe.__maxMipLevel=0;else if(pe.isCompressedTexture){for(var Xe=0,rt=$e.length;Xe<rt;Xe++)ke=$e[Xe],pe.format!==Ou&&pe.format!==$c?t.getCompressedTextureFormats().indexOf(te)>-1?t.compressedTexImage2D(3553,Xe,_e,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Xe,_e,ke.width,ke.height,0,te,fe,ke.data);Pe.__maxMipLevel=$e.length-1}else if(pe.isDataTexture2DArray)t.texImage3D(35866,0,_e,Ft.width,Ft.height,Ft.depth,0,te,fe,Ft.data),Pe.__maxMipLevel=0;else if(pe.isDataTexture3D)t.texImage3D(32879,0,_e,Ft.width,Ft.height,Ft.depth,0,te,fe,Ft.data),Pe.__maxMipLevel=0;else if($e.length>0&&V){for(var Xe=0,rt=$e.length;Xe<rt;Xe++)ke=$e[Xe],t.texImage2D(3553,Xe,_e,te,fe,ke);pe.generateMipmaps=!1,Pe.__maxMipLevel=$e.length-1}else t.texImage2D(3553,0,_e,te,fe,Ft),Pe.__maxMipLevel=0;A(pe,V)&&P(3553,pe,Ft.width,Ft.height),Pe.__version=pe.version,pe.onUpdate&&pe.onUpdate(pe)}function lt(Pe,pe,bt,wt){var Gt=r.convert(pe.texture.format),Ft=r.convert(pe.texture.type),V=w(Gt,Ft);t.texImage2D(wt,0,V,pe.width,pe.height,0,Gt,Ft,null),i.bindFramebuffer(36160,Pe),i.framebufferTexture2D(36160,bt,wt,n.get(pe.texture).__webglTexture,0),i.bindFramebuffer(36160,null)}function st(Pe,pe,bt){if(i.bindRenderbuffer(36161,Pe),pe.depthBuffer&&!pe.stencilBuffer){if(bt){var wt=Et(pe);i.renderbufferStorageMultisample(36161,wt,33189,pe.width,pe.height)}else i.renderbufferStorage(36161,33189,pe.width,pe.height);i.framebufferRenderbuffer(36160,36096,36161,Pe)}else if(pe.depthBuffer&&pe.stencilBuffer){if(bt){var wt=Et(pe);i.renderbufferStorageMultisample(36161,wt,34041,pe.width,pe.height)}else i.renderbufferStorage(36161,34041,pe.width,pe.height);i.framebufferRenderbuffer(36160,33306,36161,Pe)}else{var Gt=r.convert(pe.texture.format),Ft=r.convert(pe.texture.type),V=w(Gt,Ft);if(bt){var wt=Et(pe);i.renderbufferStorageMultisample(36161,wt,V,pe.width,pe.height)}else i.renderbufferStorage(36161,V,pe.width,pe.height)}i.bindRenderbuffer(36161,null)}function De(Pe,pe){var bt=pe&&pe.isWebGLRenderTargetCube;if(bt)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,Pe),!(pe.depthTexture&&pe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(pe.depthTexture).__webglTexture||pe.depthTexture.image.width!==pe.width||pe.depthTexture.image.height!==pe.height)&&(pe.depthTexture.image.width=pe.width,pe.depthTexture.image.height=pe.height,pe.depthTexture.needsUpdate=!0),$(pe.depthTexture,0);var wt=n.get(pe.depthTexture).__webglTexture;if(pe.depthTexture.format===_p)i.framebufferTexture2D(36160,36096,3553,wt,0);else if(pe.depthTexture.format===_g)i.framebufferTexture2D(36160,33306,3553,wt,0);else throw new Error("Unknown depthTexture format")}function et(Pe){var pe=n.get(Pe),bt=Pe.isWebGLRenderTargetCube===!0;if(Pe.depthTexture){if(bt)throw new Error("target.depthTexture not supported in Cube render targets");De(pe.__webglFramebuffer,Pe)}else if(bt){pe.__webglDepthbuffer=[];for(var wt=0;wt<6;wt++)i.bindFramebuffer(36160,pe.__webglFramebuffer[wt]),pe.__webglDepthbuffer[wt]=i.createRenderbuffer(),st(pe.__webglDepthbuffer[wt],Pe)}else i.bindFramebuffer(36160,pe.__webglFramebuffer),pe.__webglDepthbuffer=i.createRenderbuffer(),st(pe.__webglDepthbuffer,Pe);i.bindFramebuffer(36160,null)}function Ke(Pe){var pe=n.get(Pe),bt=n.get(Pe.texture);Pe.addEventListener("dispose",M),bt.__webglTexture=i.createTexture(),a.memory.textures++;var wt=Pe.isWebGLRenderTargetCube===!0,Gt=Pe.isWebGLMultisampleRenderTarget===!0,Ft=g(Pe)||s.isWebGL2;if(wt){pe.__webglFramebuffer=[];for(var V=0;V<6;V++)pe.__webglFramebuffer[V]=i.createFramebuffer()}else if(pe.__webglFramebuffer=i.createFramebuffer(),Gt)if(s.isWebGL2){pe.__webglMultisampledFramebuffer=i.createFramebuffer(),pe.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,pe.__webglColorRenderbuffer);var te=r.convert(Pe.texture.format),fe=r.convert(Pe.texture.type),_e=w(te,fe),ke=Et(Pe);i.renderbufferStorageMultisample(36161,ke,_e,Pe.width,Pe.height),i.bindFramebuffer(36160,pe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,pe.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),Pe.depthBuffer&&(pe.__webglDepthRenderbuffer=i.createRenderbuffer(),st(pe.__webglDepthRenderbuffer,Pe,!0)),i.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(wt){t.bindTexture(34067,bt.__webglTexture),Re(34067,Pe.texture,Ft);for(var V=0;V<6;V++)lt(pe.__webglFramebuffer[V],Pe,36064,34069+V);A(Pe.texture,Ft)&&P(34067,Pe.texture,Pe.width,Pe.height),t.bindTexture(34067,null)}else t.bindTexture(3553,bt.__webglTexture),Re(3553,Pe.texture,Ft),lt(pe.__webglFramebuffer,Pe,36064,3553),A(Pe.texture,Ft)&&P(3553,Pe.texture,Pe.width,Pe.height),t.bindTexture(3553,null);Pe.depthBuffer&&et(Pe)}function Ct(Pe){var pe=Pe.texture,bt=g(Pe)||s.isWebGL2;if(A(pe,bt)){var wt=Pe.isWebGLRenderTargetCube?34067:3553,Gt=n.get(pe).__webglTexture;t.bindTexture(wt,Gt),P(wt,pe,Pe.width,Pe.height),t.bindTexture(wt,null)}}function dt(Pe){if(Pe.isWebGLMultisampleRenderTarget)if(s.isWebGL2){var pe=n.get(Pe);i.bindFramebuffer(36008,pe.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,pe.__webglFramebuffer);var bt=Pe.width,wt=Pe.height,Gt=16384;Pe.depthBuffer&&(Gt|=256),Pe.stencilBuffer&&(Gt|=1024),i.blitFramebuffer(0,0,bt,wt,0,0,bt,wt,Gt,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Et(Pe){return s.isWebGL2&&Pe.isWebGLMultisampleRenderTarget?Math.min(s.maxSamples,Pe.samples):0}function ut(Pe){var pe=Pe.id,bt=a.render.frame;o[pe]!==bt&&(o[pe]=bt,Pe.update())}var Wt=!1,Nt=!1;function ci(Pe,pe){Pe&&Pe.isWebGLRenderTarget&&(Wt===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Wt=!0),Pe=Pe.texture),$(Pe,pe)}function Yt(Pe,pe){Pe&&Pe.isWebGLRenderTargetCube&&(Nt===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Nt=!0),Pe=Pe.texture),Pe&&Pe.isCubeTexture||Array.isArray(Pe.image)&&Pe.image.length===6?Se(Pe,pe):Te(Pe,pe)}this.allocateTextureUnit=de,this.resetTextureUnits=Z,this.setTexture2D=$,this.setTexture2DArray=me,this.setTexture3D=ue,this.setTextureCube=Se,this.setTextureCubeDynamic=Te,this.setupRenderTarget=Ke,this.updateRenderTargetMipmap=Ct,this.updateMultisampleRenderTarget=dt,this.safeSetTexture2D=ci,this.safeSetTextureCube=Yt}function xse(i,e,t){function n(s){var r;if(s===bu)return 10497;if(s===Ra)return 33071;if(s===Zp)return 33648;if(s===Zr)return 9728;if(s===lP)return 9984;if(s===hP)return 9986;if(s===ga)return 9729;if(s===T3)return 9985;if(s===g_)return 9987;if(s===uP)return 5121;if(s===Aee)return 32819;if(s===wee)return 32820;if(s===See)return 33635;if(s===vee)return 5120;if(s===bee)return 5122;if(s===Gv)return 5123;if(s===_ee)return 5124;if(s===x3)return 5125;if(s===bg)return 5126;if(s===cP){if(t.isWebGL2)return 5131;if(r=e.get("OES_texture_half_float"),r!==null)return r.HALF_FLOAT_OES}if(s===Pee)return 6406;if(s===$c)return 6407;if(s===Ou)return 6408;if(s===Tee)return 6409;if(s===xee)return 6410;if(s===_p)return 6402;if(s===_g)return 34041;if(s===Eee)return 6403;if(s===cp)return 32774;if(s===j$)return 32778;if(s===X$)return 32779;if(s===Q$)return 0;if(s===J$)return 1;if(s===Z$)return 768;if(s===$$)return 769;if(s===_3)return 770;if(s===A3)return 771;if(s===eee)return 772;if(s===tee)return 773;if(s===iee)return 774;if(s===nee)return 775;if(s===see)return 776;if((s===_C||s===AC||s===wC||s===SC)&&(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null)){if(s===_C)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===AC)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===wC)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===SC)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((s===PC||s===TC||s===xC||s===EC)&&(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null)){if(s===PC)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===TC)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===xC)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===EC)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===Vee&&(r=e.get("WEBGL_compressed_texture_etc1"),r!==null))return r.COMPRESSED_RGB_ETC1_WEBGL;if((s===kee||s===Cee||s===Dee||s===Iee||s===Lee||s===Mee||s===Oee||s===Nee||s===Ree||s===Bee||s===qee||s===zee||s===Fee||s===Hee)&&(r=e.get("WEBGL_compressed_texture_astc"),r!==null))return s;if(s===UA||s===GA){if(t.isWebGL2){if(s===UA)return 32775;if(s===GA)return 32776}if(r=e.get("EXT_blend_minmax"),r!==null){if(s===UA)return r.MIN_EXT;if(s===GA)return r.MAX_EXT}}if(s===Wv){if(t.isWebGL2)return 34042;if(r=e.get("WEBGL_depth_texture"),r!==null)return r.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:n}}function xu(){li.call(this),this.type="Group"}xu.prototype=Object.assign(Object.create(li.prototype),{constructor:xu,isGroup:!0});function Wh(){li.call(this),this.type="Camera",this.matrixWorldInverse=new Fi,this.projectionMatrix=new Fi,this.projectionMatrixInverse=new Fi}Wh.prototype=Object.assign(Object.create(li.prototype),{constructor:Wh,isCamera:!0,copy:function(i,e){return li.prototype.copy.call(this,i,e),this.matrixWorldInverse.copy(i.matrixWorldInverse),this.projectionMatrix.copy(i.projectionMatrix),this.projectionMatrixInverse.copy(i.projectionMatrixInverse),this},getWorldDirection:function(i){i===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),i=new Ae),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return i.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(i){li.prototype.updateMatrixWorld.call(this,i),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function ar(i,e,t,n){Wh.call(this),this.type="PerspectiveCamera",this.fov=i!==void 0?i:50,this.zoom=1,this.near=t!==void 0?t:.1,this.far=n!==void 0?n:2e3,this.focus=10,this.aspect=e!==void 0?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ar.prototype=Object.assign(Object.create(Wh.prototype),{constructor:ar,isPerspectiveCamera:!0,copy:function(i,e){return Wh.prototype.copy.call(this,i,e),this.fov=i.fov,this.zoom=i.zoom,this.near=i.near,this.far=i.far,this.focus=i.focus,this.aspect=i.aspect,this.view=i.view===null?null:Object.assign({},i.view),this.filmGauge=i.filmGauge,this.filmOffset=i.filmOffset,this},setFocalLength:function(i){var e=.5*this.getFilmHeight()/i;this.fov=tn.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var i=Math.tan(tn.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/i},getEffectiveFOV:function(){return tn.RAD2DEG*2*Math.atan(Math.tan(tn.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(i,e,t,n,s,r){this.aspect=i/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=n,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var i=this.near,e=i*Math.tan(tn.DEG2RAD*.5*this.fov)/this.zoom,t=2*e,n=this.aspect*t,s=-.5*n,r=this.view;if(this.view!==null&&this.view.enabled){var a=r.fullWidth,o=r.fullHeight;s+=r.offsetX*n/a,e-=r.offsetY*t/o,n*=r.width/a,t*=r.height/o}var l=this.filmOffset;l!==0&&(s+=i*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,e,e-t,i,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(i){var e=li.prototype.toJSON.call(this,i);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});function Zv(i){ar.call(this),this.cameras=i||[]}Zv.prototype=Object.assign(Object.create(ar.prototype),{constructor:Zv,isArrayCamera:!0});var FC=new Ae,HC=new Ae;function F3(i,e,t){FC.setFromMatrixPosition(e.matrixWorld),HC.setFromMatrixPosition(t.matrixWorld);var n=FC.distanceTo(HC),s=e.projectionMatrix.elements,r=t.projectionMatrix.elements,a=s[14]/(s[10]-1),o=s[14]/(s[10]+1),l=(s[9]+1)/s[5],h=(s[9]-1)/s[5],c=(s[8]-1)/s[0],f=(r[8]+1)/r[0],g=a*c,v=a*f,A=n/(-c+f),P=A*-c;e.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.translateX(P),i.translateZ(A),i.matrixWorld.compose(i.position,i.quaternion,i.scale),i.matrixWorldInverse.getInverse(i.matrixWorld);var w=a+A,T=o+A,D=g-P,M=v+(n-P),B=l*o/T*w,O=h*o/T*w;i.projectionMatrix.makePerspective(D,M,B,O,w,T)}function H3(i){var e=this,t=null,n=null,s=null,r=[],a=new Fi,o=new Fi,l=1,h="stage";typeof window<"u"&&"VRFrameData"in window&&(n=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",M,!1));var c=new Fi,f=new wr,g=new Ae,v=new ar;v.bounds=new hs(0,0,.5,1),v.layers.enable(1);var A=new ar;A.bounds=new hs(.5,0,.5,1),A.layers.enable(2);var P=new Zv([v,A]);P.layers.enable(1),P.layers.enable(2);function w(){return t!==null&&t.isPresenting===!0}var T=new _t,D;function M(){if(w()){var de=t.getEyeParameters("left"),$=de.renderWidth*l,me=de.renderHeight*l;D=i.getPixelRatio(),i.getSize(T),i.setDrawingBufferSize($*2,me,1),Z.start()}else e.enabled&&i.setDrawingBufferSize(T.width,T.height,D),Z.stop()}var B=[];function O(de){for(var $=navigator.getGamepads&&navigator.getGamepads(),me=0,ue=0,Se=$.length;me<Se;me++){var Te=$[me];if(Te&&(Te.id==="Daydream Controller"||Te.id==="Gear VR Controller"||Te.id==="Oculus Go Controller"||Te.id==="OpenVR Gamepad"||Te.id.startsWith("Oculus Touch")||Te.id.startsWith("Spatial Controller"))){if(ue===de)return Te;ue++}}}function x(){for(var de=0;de<r.length;de++){var $=r[de],me=O(de);if(me!==void 0&&me.pose!==void 0){if(me.pose===null)return;var ue=me.pose;ue.hasPosition===!1&&$.position.set(.2,-.6,-.05),ue.position!==null&&$.position.fromArray(ue.position),ue.orientation!==null&&$.quaternion.fromArray(ue.orientation),$.matrix.compose($.position,$.quaternion,$.scale),$.matrix.premultiply(a),$.matrix.decompose($.position,$.quaternion,$.scale),$.matrixWorldNeedsUpdate=!0,$.visible=!0;var Se=me.id==="Daydream Controller"?0:1;B[de]!==me.buttons[Se].pressed&&(B[de]=me.buttons[Se].pressed,B[de]===!0?$.dispatchEvent({type:"selectstart"}):($.dispatchEvent({type:"selectend"}),$.dispatchEvent({type:"select"})))}else $.visible=!1}}this.enabled=!1,this.getController=function(de){var $=r[de];return $===void 0&&($=new xu,$.matrixAutoUpdate=!1,$.visible=!1,r[de]=$),$},this.getDevice=function(){return t},this.setDevice=function(de){de!==void 0&&(t=de),Z.setContext(de)},this.setFramebufferScaleFactor=function(de){l=de},this.setFrameOfReferenceType=function(de){h=de},this.setPoseTarget=function(de){de!==void 0&&(s=de)},this.getCamera=function(de){var $=h==="stage"?1.6:0;if(w()===!1)return de.position.set(0,$,0),de.rotation.set(0,0,0),de;if(t.depthNear=de.near,t.depthFar=de.far,t.getFrameData(n),h==="stage"){var me=t.stageParameters;me?a.fromArray(me.sittingToStandingTransform):a.makeTranslation(0,$,0)}var ue=n.pose,Se=s!==null?s:de;Se.matrix.copy(a),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale),ue.orientation!==null&&(f.fromArray(ue.orientation),Se.quaternion.multiply(f)),ue.position!==null&&(f.setFromRotationMatrix(a),g.fromArray(ue.position),g.applyQuaternion(f),Se.position.add(g)),Se.updateMatrixWorld(),v.near=de.near,A.near=de.near,v.far=de.far,A.far=de.far,v.matrixWorldInverse.fromArray(n.leftViewMatrix),A.matrixWorldInverse.fromArray(n.rightViewMatrix),o.getInverse(a),h==="stage"&&(v.matrixWorldInverse.multiply(o),A.matrixWorldInverse.multiply(o));var Te=Se.parent;Te!==null&&(c.getInverse(Te.matrixWorld),v.matrixWorldInverse.multiply(c),A.matrixWorldInverse.multiply(c)),v.matrixWorld.getInverse(v.matrixWorldInverse),A.matrixWorld.getInverse(A.matrixWorldInverse),v.projectionMatrix.fromArray(n.leftProjectionMatrix),A.projectionMatrix.fromArray(n.rightProjectionMatrix),F3(P,v,A);var Re=t.getLayers();if(Re.length){var We=Re[0];We.leftBounds!==null&&We.leftBounds.length===4&&v.bounds.fromArray(We.leftBounds),We.rightBounds!==null&&We.rightBounds.length===4&&A.bounds.fromArray(We.rightBounds)}return x(),P},this.getStandingMatrix=function(){return a},this.isPresenting=w;var Z=new fP;this.setAnimationLoop=function(de){Z.setAnimationLoop(de),w()&&Z.start()},this.submitFrame=function(){w()&&t.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",M)}}function Ese(i){var e=i.context,t=null,n=null,s=1,r=null,a="stage",o=null,l=[],h=[];function c(){return n!==null&&r!==null}var f=new ar;f.layers.enable(1),f.viewport=new hs;var g=new ar;g.layers.enable(2),g.viewport=new hs;var v=new Zv([f,g]);v.layers.enable(1),v.layers.enable(2),this.enabled=!1,this.getController=function(B){var O=l[B];return O===void 0&&(O=new xu,O.matrixAutoUpdate=!1,O.visible=!1,l[B]=O),O},this.getDevice=function(){return t},this.setDevice=function(B){B!==void 0&&(t=B),B instanceof XRDevice&&e.setCompatibleXRDevice(B)};function A(B){var O=l[h.indexOf(B.inputSource)];O&&O.dispatchEvent({type:B.type})}function P(){i.setFramebuffer(null),i.setRenderTarget(i.getRenderTarget()),M.stop()}this.setFramebufferScaleFactor=function(B){s=B},this.setFrameOfReferenceType=function(B){a=B},this.setSession=function(B){n=B,n!==null&&(n.addEventListener("select",A),n.addEventListener("selectstart",A),n.addEventListener("selectend",A),n.addEventListener("end",P),n.baseLayer=new XRWebGLLayer(n,e,{framebufferScaleFactor:s}),n.requestFrameOfReference(a).then(function(O){r=O,i.setFramebuffer(n.baseLayer.framebuffer),M.setContext(n),M.start()}),h=n.getInputSources(),n.addEventListener("inputsourceschange",function(){h=n.getInputSources(),console.log(h);for(var O=0;O<l.length;O++){var x=l[O];x.userData.inputSource=h[O]}}))};function w(B,O){O===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(O.matrixWorld,B.matrix),B.matrixWorldInverse.getInverse(B.matrixWorld)}this.getCamera=function(B){if(c()){var O=B.parent,x=v.cameras;w(v,O);for(var Z=0;Z<x.length;Z++)w(x[Z],O);B.matrixWorld.copy(v.matrixWorld);for(var de=B.children,Z=0,$=de.length;Z<$;Z++)de[Z].updateMatrixWorld(!0);return F3(v,f,g),v}return B},this.isPresenting=c;var T=null;function D(B,O){if(o=O.getDevicePose(r),o!==null)for(var x=n.baseLayer,Z=O.views,de=0;de<Z.length;de++){var $=Z[de],me=x.getViewport($),ue=o.getViewMatrix($),Se=v.cameras[de];Se.matrix.fromArray(ue).getInverse(Se.matrix),Se.projectionMatrix.fromArray($.projectionMatrix),Se.viewport.set(me.x,me.y,me.width,me.height),de===0&&v.matrix.copy(Se.matrix)}for(var de=0;de<l.length;de++){var Te=l[de],Re=h[de];if(Re){var We=O.getInputPose(Re,r);if(We!==null){"targetRay"in We?Te.matrix.elements=We.targetRay.transformMatrix:"pointerMatrix"in We&&(Te.matrix.elements=We.pointerMatrix),Te.matrix.decompose(Te.position,Te.rotation,Te.scale),Te.visible=!0;continue}}Te.visible=!1}T&&T(B)}var M=new fP;M.setAnimationLoop(D),this.setAnimationLoop=function(B){T=B},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Fi},this.submitFrame=function(){}}function mP(i){console.log("THREE.WebGLRenderer",G$),i=i||{};var e=i.canvas!==void 0?i.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t=i.context!==void 0?i.context:null,n=i.alpha!==void 0?i.alpha:!1,s=i.depth!==void 0?i.depth:!0,r=i.stencil!==void 0?i.stencil:!0,a=i.antialias!==void 0?i.antialias:!1,o=i.premultipliedAlpha!==void 0?i.premultipliedAlpha:!0,l=i.preserveDrawingBuffer!==void 0?i.preserveDrawingBuffer:!1,h=i.powerPreference!==void 0?i.powerPreference:"default",c=null,f=null;this.domElement=e,this.context=null,this.debug={checkShaderErrors:!1},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=w3,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var g=this,v=!1,A=null,P=null,w=null,T=-1,D={geometry:null,program:null,wireframe:!1},M=null,B=null,O=new hs,x=new hs,Z=null,de=e.width,$=e.height,me=1,ue=new hs(0,0,de,$),Se=new hs(0,0,de,$),Te=!1,Re=new pP,We=new Tne,Le=!1,lt=!1,st=new Fi,De=new Ae;function et(){return P===null?me:1}var Ke;try{var Ct={alpha:n,depth:s,stencil:r,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:h};if(e.addEventListener("webglcontextlost",rt,!1),e.addEventListener("webglcontextrestored",Dn,!1),Ke=t||e.getContext("webgl",Ct)||e.getContext("experimental-webgl",Ct),Ke===null)throw e.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");Ke.getShaderPrecisionFormat===void 0&&(Ke.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}var dt,Et,ut,Wt,Nt,ci,Yt,Pe,pe,bt,wt,Gt,Ft,V,te,fe,_e;function ke(){dt=new xne(Ke),Et=new Pne(Ke,dt,i),Et.isWebGL2||(dt.get("WEBGL_depth_texture"),dt.get("OES_texture_float"),dt.get("OES_texture_half_float"),dt.get("OES_texture_half_float_linear"),dt.get("OES_standard_derivatives"),dt.get("OES_element_index_uint"),dt.get("ANGLE_instanced_arrays")),dt.get("OES_texture_float_linear"),_e=new xse(Ke,dt,Et),ut=new Pse(Ke,dt,_e,Et),ut.scissor(x.copy(Se).multiplyScalar(me)),ut.viewport(O.copy(ue).multiplyScalar(me)),Wt=new kne,Nt=new gse,ci=new Tse(Ke,dt,ut,Nt,Et,_e,Wt),Yt=new mne(Ke),Pe=new Ene(Ke,Yt,Wt),pe=new Ine(Pe,Wt),V=new Dne(Ke),bt=new mse(g,dt,Et),wt=new bse,Gt=new Sse,Ft=new wne(g,ut,pe,o),te=new Sne(Ke,dt,Wt,Et),fe=new Vne(Ke,dt,Wt,Et),Wt.programs=bt.programs,g.context=Ke,g.capabilities=Et,g.extensions=dt,g.properties=Nt,g.renderLists=wt,g.state=ut,g.info=Wt}ke();var $e=typeof navigator<"u"&&"xr"in navigator?new Ese(g):new H3(g);this.vr=$e;var Xe=new z3(g,pe,Et.maxTextureSize);this.shadowMap=Xe,this.getContext=function(){return Ke},this.getContextAttributes=function(){return Ke.getContextAttributes()},this.forceContextLoss=function(){var z=dt.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){var z=dt.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return me},this.setPixelRatio=function(z){z!==void 0&&(me=z,this.setSize(de,$,!1))},this.getSize=function(z){return z===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),z=new _t),z.set(de,$)},this.setSize=function(z,j,le){if($e.isPresenting()){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}de=z,$=j,e.width=z*me,e.height=j*me,le!==!1&&(e.style.width=z+"px",e.style.height=j+"px"),this.setViewport(0,0,z,j)},this.getDrawingBufferSize=function(z){return z===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),z=new _t),z.set(de*me,$*me)},this.setDrawingBufferSize=function(z,j,le){de=z,$=j,me=le,e.width=z*le,e.height=j*le,this.setViewport(0,0,z,j)},this.getCurrentViewport=function(z){return z===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),z=new hs),z.copy(O)},this.getViewport=function(z){return z.copy(ue)},this.setViewport=function(z,j,le,xe){z.isVector4?ue.set(z.x,z.y,z.z,z.w):ue.set(z,j,le,xe),ut.viewport(O.copy(ue).multiplyScalar(me))},this.getScissor=function(z){return z.copy(Se)},this.setScissor=function(z,j,le,xe){z.isVector4?Se.set(z.x,z.y,z.z,z.w):Se.set(z,j,le,xe),ut.scissor(x.copy(Se).multiplyScalar(me))},this.getScissorTest=function(){return Te},this.setScissorTest=function(z){ut.setScissorTest(Te=z)},this.getClearColor=function(){return Ft.getClearColor()},this.setClearColor=function(){Ft.setClearColor.apply(Ft,arguments)},this.getClearAlpha=function(){return Ft.getClearAlpha()},this.setClearAlpha=function(){Ft.setClearAlpha.apply(Ft,arguments)},this.clear=function(z,j,le){var xe=0;(z===void 0||z)&&(xe|=16384),(j===void 0||j)&&(xe|=256),(le===void 0||le)&&(xe|=1024),Ke.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",rt,!1),e.removeEventListener("webglcontextrestored",Dn,!1),wt.dispose(),Gt.dispose(),Nt.dispose(),pe.dispose(),$e.dispose(),I.stop()};function rt(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Dn(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1,ke()}function Xt(z){var j=z.target;j.removeEventListener("dispose",Xt),u(j)}function u(z){d(z),Nt.remove(z)}function d(z){var j=Nt.get(z).program;z.program=void 0,j!==void 0&&bt.releaseProgram(j)}function m(z,j){z.render(function(le){g.renderBufferImmediate(le,j)})}this.renderBufferImmediate=function(z,j){ut.initAttributes();var le=Nt.get(z);z.hasPositions&&!le.position&&(le.position=Ke.createBuffer()),z.hasNormals&&!le.normal&&(le.normal=Ke.createBuffer()),z.hasUvs&&!le.uv&&(le.uv=Ke.createBuffer()),z.hasColors&&!le.color&&(le.color=Ke.createBuffer());var xe=j.getAttributes();z.hasPositions&&(Ke.bindBuffer(34962,le.position),Ke.bufferData(34962,z.positionArray,35048),ut.enableAttribute(xe.position),Ke.vertexAttribPointer(xe.position,3,5126,!1,0,0)),z.hasNormals&&(Ke.bindBuffer(34962,le.normal),Ke.bufferData(34962,z.normalArray,35048),ut.enableAttribute(xe.normal),Ke.vertexAttribPointer(xe.normal,3,5126,!1,0,0)),z.hasUvs&&(Ke.bindBuffer(34962,le.uv),Ke.bufferData(34962,z.uvArray,35048),ut.enableAttribute(xe.uv),Ke.vertexAttribPointer(xe.uv,2,5126,!1,0,0)),z.hasColors&&(Ke.bindBuffer(34962,le.color),Ke.bufferData(34962,z.colorArray,35048),ut.enableAttribute(xe.color),Ke.vertexAttribPointer(xe.color,3,5126,!1,0,0)),ut.disableUnusedAttributes(),Ke.drawArrays(4,0,z.count),z.count=0},this.renderBufferDirect=function(z,j,le,xe,Ce,Ue){var je=Ce.isMesh&&Ce.matrixWorld.determinant()<0;ut.setMaterial(xe,je);var nt=K(z,j,xe,Ce),yt=!1;(D.geometry!==le.id||D.program!==nt.id||D.wireframe!==(xe.wireframe===!0))&&(D.geometry=le.id,D.program=nt.id,D.wireframe=xe.wireframe===!0,yt=!0),Ce.morphTargetInfluences&&(V.update(Ce,le,xe,nt),yt=!0);var Vt=le.index,it=le.attributes.position,at=1;xe.wireframe===!0&&(Vt=Pe.getWireframeAttribute(le),at=2);var Tt,At=te;Vt!==null&&(Tt=Yt.get(Vt),At=fe,At.setIndex(Tt)),yt&&(_(xe,nt,le),Vt!==null&&Ke.bindBuffer(34963,Tt.buffer));var ft=1/0;Vt!==null?ft=Vt.count:it!==void 0&&(ft=it.count);var Rt=le.drawRange.start*at,Jt=le.drawRange.count*at,hi=Ue!==null?Ue.start*at:0,si=Ue!==null?Ue.count*at:1/0,di=Math.max(Rt,hi),$t=Math.min(ft,Rt+Jt,hi+si)-1,Nn=Math.max(0,$t-di+1);if(Nn!==0){if(Ce.isMesh)if(xe.wireframe===!0)ut.setLineWidth(xe.wireframeLinewidth*et()),At.setMode(1);else switch(Ce.drawMode){case dP:At.setMode(4);break;case Kee:At.setMode(5);break;case Yee:At.setMode(6);break}else if(Ce.isLine){var Mi=xe.linewidth;Mi===void 0&&(Mi=1),ut.setLineWidth(Mi*et()),Ce.isLineSegments?At.setMode(1):Ce.isLineLoop?At.setMode(2):At.setMode(3)}else Ce.isPoints?At.setMode(0):Ce.isSprite&&At.setMode(4);le&&le.isInstancedBufferGeometry?le.maxInstancedCount>0&&At.renderInstances(le,di,Nn):At.render(di,Nn)}};function _(z,j,le){if(le&&le.isInstancedBufferGeometry&&!Et.isWebGL2&&dt.get("ANGLE_instanced_arrays")===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ut.initAttributes();var xe=le.attributes,Ce=j.getAttributes(),Ue=z.defaultAttributeValues;for(var je in Ce){var nt=Ce[je];if(nt>=0){var yt=xe[je];if(yt!==void 0){var Vt=yt.normalized,it=yt.itemSize,at=Yt.get(yt);if(at===void 0)continue;var Tt=at.buffer,At=at.type,ft=at.bytesPerElement;if(yt.isInterleavedBufferAttribute){var Rt=yt.data,Jt=Rt.stride,hi=yt.offset;Rt&&Rt.isInstancedInterleavedBuffer?(ut.enableAttributeAndDivisor(nt,Rt.meshPerAttribute),le.maxInstancedCount===void 0&&(le.maxInstancedCount=Rt.meshPerAttribute*Rt.count)):ut.enableAttribute(nt),Ke.bindBuffer(34962,Tt),Ke.vertexAttribPointer(nt,it,At,Vt,Jt*ft,hi*ft)}else yt.isInstancedBufferAttribute?(ut.enableAttributeAndDivisor(nt,yt.meshPerAttribute),le.maxInstancedCount===void 0&&(le.maxInstancedCount=yt.meshPerAttribute*yt.count)):ut.enableAttribute(nt),Ke.bindBuffer(34962,Tt),Ke.vertexAttribPointer(nt,it,At,Vt,0,0)}else if(Ue!==void 0){var si=Ue[je];if(si!==void 0)switch(si.length){case 2:Ke.vertexAttrib2fv(nt,si);break;case 3:Ke.vertexAttrib3fv(nt,si);break;case 4:Ke.vertexAttrib4fv(nt,si);break;default:Ke.vertexAttrib1fv(nt,si)}}}}ut.disableUnusedAttributes()}this.compile=function(z,j){f=Gt.get(z,j),f.init(),z.traverse(function(le){le.isLight&&(f.pushLight(le),le.castShadow&&f.pushShadow(le))}),f.setupLights(j),z.traverse(function(le){if(le.material)if(Array.isArray(le.material))for(var xe=0;xe<le.material.length;xe++)W(le.material[xe],z.fog,le);else W(le.material,z.fog,le)})};var S=null;function k(z){$e.isPresenting()||S&&S(z)}var I=new fP;I.setAnimationLoop(k),typeof window<"u"&&I.setContext(window),this.setAnimationLoop=function(z){S=z,$e.setAnimationLoop(z),I.start()},this.render=function(z,j){var le,xe;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),le=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),xe=arguments[3]),!(j&&j.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!v){D.geometry=null,D.program=null,D.wireframe=!1,T=-1,M=null,z.autoUpdate===!0&&z.updateMatrixWorld(),j.parent===null&&j.updateMatrixWorld(),$e.enabled&&(j=$e.getCamera(j)),f=Gt.get(z,j),f.init(),z.onBeforeRender(g,z,j,le||P),st.multiplyMatrices(j.projectionMatrix,j.matrixWorldInverse),Re.setFromMatrix(st),lt=this.localClippingEnabled,Le=We.init(this.clippingPlanes,lt,j),c=wt.get(z,j),c.init(),L(z,j,0,g.sortObjects),g.sortObjects===!0&&c.sort(),Le&&We.beginShadows();var Ce=f.state.shadowsArray;Xe.render(Ce,z,j),f.setupLights(j),Le&&We.endShadows(),this.info.autoReset&&this.info.reset(),le!==void 0&&this.setRenderTarget(le),Ft.render(c,z,j,xe);var Ue=c.opaque,je=c.transparent;if(z.overrideMaterial){var nt=z.overrideMaterial;Ue.length&&N(Ue,z,j,nt),je.length&&N(je,z,j,nt)}else Ue.length&&N(Ue,z,j),je.length&&N(je,z,j);z.onAfterRender(g,z,j),P!==null&&(ci.updateRenderTargetMipmap(P),ci.updateMultisampleRenderTarget(P)),ut.buffers.depth.setTest(!0),ut.buffers.depth.setMask(!0),ut.buffers.color.setMask(!0),ut.setPolygonOffset(!1),$e.enabled&&$e.submitFrame(),c=null,f=null}};function L(z,j,le,xe){if(z.visible!==!1){var Ce=z.layers.test(j.layers);if(Ce){if(z.isGroup)le=z.renderOrder;else if(z.isLight)f.pushLight(z),z.castShadow&&f.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||Re.intersectsSprite(z)){xe&&De.setFromMatrixPosition(z.matrixWorld).applyMatrix4(st);var Ue=pe.update(z),je=z.material;je.visible&&c.push(z,Ue,je,le,De.z,null)}}else if(z.isImmediateRenderObject)xe&&De.setFromMatrixPosition(z.matrixWorld).applyMatrix4(st),c.push(z,null,z.material,le,De.z,null);else if((z.isMesh||z.isLine||z.isPoints)&&(z.isSkinnedMesh&&z.skeleton.update(),!z.frustumCulled||Re.intersectsObject(z))){xe&&De.setFromMatrixPosition(z.matrixWorld).applyMatrix4(st);var Ue=pe.update(z),je=z.material;if(Array.isArray(je))for(var nt=Ue.groups,yt=0,Vt=nt.length;yt<Vt;yt++){var it=nt[yt],at=je[it.materialIndex];at&&at.visible&&c.push(z,Ue,at,le,De.z,it)}else je.visible&&c.push(z,Ue,je,le,De.z,null)}}for(var Tt=z.children,yt=0,Vt=Tt.length;yt<Vt;yt++)L(Tt[yt],j,le,xe)}}function N(z,j,le,xe){for(var Ce=0,Ue=z.length;Ce<Ue;Ce++){var je=z[Ce],nt=je.object,yt=je.geometry,Vt=xe===void 0?je.material:xe,it=je.group;if(le.isArrayCamera){B=le;for(var at=le.cameras,Tt=0,At=at.length;Tt<At;Tt++){var ft=at[Tt];if(nt.layers.test(ft.layers)){if("viewport"in ft)ut.viewport(O.copy(ft.viewport));else{var Rt=ft.bounds,Jt=Rt.x*de,hi=Rt.y*$,si=Rt.z*de,di=Rt.w*$;ut.viewport(O.set(Jt,hi,si,di).multiplyScalar(me))}f.setupLights(ft),q(nt,j,ft,yt,Vt,it)}}}else B=null,q(nt,j,le,yt,Vt,it)}}function q(z,j,le,xe,Ce,Ue){if(z.onBeforeRender(g,j,le,xe,Ce,Ue),f=Gt.get(j,B||le),z.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),z.isImmediateRenderObject){ut.setMaterial(Ce);var je=K(le,j.fog,Ce,z);D.geometry=null,D.program=null,D.wireframe=!1,m(z,je)}else g.renderBufferDirect(le,j.fog,xe,Ce,z,Ue);z.onAfterRender(g,j,le,xe,Ce,Ue),f=Gt.get(j,B||le)}function W(z,j,le){var xe=Nt.get(z),Ce=f.state.lights,Ue=f.state.shadowsArray,je=xe.lightsHash,nt=Ce.state.hash,yt=bt.getParameters(z,Ce.state,Ue,j,We.numPlanes,We.numIntersection,le),Vt=bt.getProgramCode(z,yt),it=xe.program,at=!0;if(it===void 0)z.addEventListener("dispose",Xt);else if(it.code!==Vt)d(z);else if(je.stateID!==nt.stateID||je.directionalLength!==nt.directionalLength||je.pointLength!==nt.pointLength||je.spotLength!==nt.spotLength||je.rectAreaLength!==nt.rectAreaLength||je.hemiLength!==nt.hemiLength||je.shadowsLength!==nt.shadowsLength)je.stateID=nt.stateID,je.directionalLength=nt.directionalLength,je.pointLength=nt.pointLength,je.spotLength=nt.spotLength,je.rectAreaLength=nt.rectAreaLength,je.hemiLength=nt.hemiLength,je.shadowsLength=nt.shadowsLength,at=!1;else{if(yt.shaderID!==void 0)return;at=!1}if(at){if(yt.shaderID){var Tt=Oh[yt.shaderID];xe.shader={name:z.type,uniforms:Ag(Tt.uniforms),vertexShader:Tt.vertexShader,fragmentShader:Tt.fragmentShader}}else xe.shader={name:z.type,uniforms:z.uniforms,vertexShader:z.vertexShader,fragmentShader:z.fragmentShader};z.onBeforeCompile(xe.shader,g),Vt=bt.getProgramCode(z,yt),it=bt.acquireProgram(z,xe.shader,yt,Vt),xe.program=it,z.program=it}var At=it.getAttributes();if(z.morphTargets){z.numSupportedMorphTargets=0;for(var ft=0;ft<g.maxMorphTargets;ft++)At["morphTarget"+ft]>=0&&z.numSupportedMorphTargets++}if(z.morphNormals){z.numSupportedMorphNormals=0;for(var ft=0;ft<g.maxMorphNormals;ft++)At["morphNormal"+ft]>=0&&z.numSupportedMorphNormals++}var Rt=xe.shader.uniforms;(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(xe.numClippingPlanes=We.numPlanes,xe.numIntersection=We.numIntersection,Rt.clippingPlanes=We.uniform),xe.fog=j,je===void 0&&(xe.lightsHash=je={}),je.stateID=nt.stateID,je.directionalLength=nt.directionalLength,je.pointLength=nt.pointLength,je.spotLength=nt.spotLength,je.rectAreaLength=nt.rectAreaLength,je.hemiLength=nt.hemiLength,je.shadowsLength=nt.shadowsLength,z.lights&&(Rt.ambientLightColor.value=Ce.state.ambient,Rt.lightProbe.value=Ce.state.probe,Rt.directionalLights.value=Ce.state.directional,Rt.spotLights.value=Ce.state.spot,Rt.rectAreaLights.value=Ce.state.rectArea,Rt.pointLights.value=Ce.state.point,Rt.hemisphereLights.value=Ce.state.hemi,Rt.directionalShadowMap.value=Ce.state.directionalShadowMap,Rt.directionalShadowMatrix.value=Ce.state.directionalShadowMatrix,Rt.spotShadowMap.value=Ce.state.spotShadowMap,Rt.spotShadowMatrix.value=Ce.state.spotShadowMatrix,Rt.pointShadowMap.value=Ce.state.pointShadowMap,Rt.pointShadowMatrix.value=Ce.state.pointShadowMatrix);var Jt=xe.program.getUniforms(),hi=Tu.seqWithValue(Jt.seq,Rt);xe.uniformsList=hi}function K(z,j,le,xe){ci.resetTextureUnits();var Ce=Nt.get(le),Ue=f.state.lights,je=Ce.lightsHash,nt=Ue.state.hash;if(Le&&(lt||z!==M)){var yt=z===M&&le.id===T;We.setState(le.clippingPlanes,le.clipIntersection,le.clipShadows,z,Ce,yt)}le.needsUpdate===!1&&(Ce.program===void 0||le.fog&&Ce.fog!==j||le.lights&&(je.stateID!==nt.stateID||je.directionalLength!==nt.directionalLength||je.pointLength!==nt.pointLength||je.spotLength!==nt.spotLength||je.rectAreaLength!==nt.rectAreaLength||je.hemiLength!==nt.hemiLength||je.shadowsLength!==nt.shadowsLength)||Ce.numClippingPlanes!==void 0&&(Ce.numClippingPlanes!==We.numPlanes||Ce.numIntersection!==We.numIntersection))&&(le.needsUpdate=!0),le.needsUpdate&&(W(le,j,xe),le.needsUpdate=!1);var Vt=!1,it=!1,at=!1,Tt=Ce.program,At=Tt.getUniforms(),ft=Ce.shader.uniforms;if(ut.useProgram(Tt.program)&&(Vt=!0,it=!0,at=!0),le.id!==T&&(T=le.id,it=!0),Vt||M!==z){if(At.setValue(Ke,"projectionMatrix",z.projectionMatrix),Et.logarithmicDepthBuffer&&At.setValue(Ke,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),M!==z&&(M=z,it=!0,at=!0),le.isShaderMaterial||le.isMeshPhongMaterial||le.isMeshStandardMaterial||le.envMap){var Rt=At.map.cameraPosition;Rt!==void 0&&Rt.setValue(Ke,De.setFromMatrixPosition(z.matrixWorld))}(le.isMeshPhongMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial||le.skinning)&&At.setValue(Ke,"viewMatrix",z.matrixWorldInverse)}if(le.skinning){At.setOptional(Ke,xe,"bindMatrix"),At.setOptional(Ke,xe,"bindMatrixInverse");var Jt=xe.skeleton;if(Jt){var hi=Jt.bones;if(Et.floatVertexTextures){if(Jt.boneTexture===void 0){var si=Math.sqrt(hi.length*4);si=tn.ceilPowerOfTwo(si),si=Math.max(si,4);var di=new Float32Array(si*si*4);di.set(Jt.boneMatrices);var $t=new tf(di,si,si,Ou,bg);$t.needsUpdate=!0,Jt.boneMatrices=di,Jt.boneTexture=$t,Jt.boneTextureSize=si}At.setValue(Ke,"boneTexture",Jt.boneTexture,ci),At.setValue(Ke,"boneTextureSize",Jt.boneTextureSize)}else At.setOptional(Ke,Jt,"boneMatrices")}}return it&&(At.setValue(Ke,"toneMappingExposure",g.toneMappingExposure),At.setValue(Ke,"toneMappingWhitePoint",g.toneMappingWhitePoint),le.lights&&Be(ft,at),j&&le.fog&&Y(ft,j),le.isMeshBasicMaterial?G(ft,le):le.isMeshLambertMaterial?(G(ft,le),ee(ft,le)):le.isMeshPhongMaterial?(G(ft,le),le.isMeshToonMaterial?J(ft,le):F(ft,le)):le.isMeshStandardMaterial?(G(ft,le),le.isMeshPhysicalMaterial?ce(ft,le):re(ft,le)):le.isMeshMatcapMaterial?(G(ft,le),ne(ft,le)):le.isMeshDepthMaterial?(G(ft,le),ye(ft,le)):le.isMeshDistanceMaterial?(G(ft,le),we(ft,le)):le.isMeshNormalMaterial?(G(ft,le),Ve(ft,le)):le.isLineBasicMaterial?(U(ft,le),le.isLineDashedMaterial&&ae(ft,le)):le.isPointsMaterial?Q(ft,le):le.isSpriteMaterial?se(ft,le):le.isShadowMaterial&&(ft.color.value.copy(le.color),ft.opacity.value=le.opacity),ft.ltc_1!==void 0&&(ft.ltc_1.value=gi.LTC_1),ft.ltc_2!==void 0&&(ft.ltc_2.value=gi.LTC_2),Tu.upload(Ke,Ce.uniformsList,ft,ci)),le.isShaderMaterial&&le.uniformsNeedUpdate===!0&&(Tu.upload(Ke,Ce.uniformsList,ft,ci),le.uniformsNeedUpdate=!1),le.isSpriteMaterial&&At.setValue(Ke,"center",xe.center),At.setValue(Ke,"modelViewMatrix",xe.modelViewMatrix),At.setValue(Ke,"normalMatrix",xe.normalMatrix),At.setValue(Ke,"modelMatrix",xe.matrixWorld),Tt}function G(z,j){z.opacity.value=j.opacity,j.color&&z.diffuse.value.copy(j.color),j.emissive&&z.emissive.value.copy(j.emissive).multiplyScalar(j.emissiveIntensity),j.map&&(z.map.value=j.map),j.alphaMap&&(z.alphaMap.value=j.alphaMap),j.specularMap&&(z.specularMap.value=j.specularMap),j.envMap&&(z.envMap.value=j.envMap,z.flipEnvMap.value=j.envMap.isCubeTexture?-1:1,z.reflectivity.value=j.reflectivity,z.refractionRatio.value=j.refractionRatio,z.maxMipLevel.value=Nt.get(j.envMap).__maxMipLevel),j.lightMap&&(z.lightMap.value=j.lightMap,z.lightMapIntensity.value=j.lightMapIntensity),j.aoMap&&(z.aoMap.value=j.aoMap,z.aoMapIntensity.value=j.aoMapIntensity);var le;j.map?le=j.map:j.specularMap?le=j.specularMap:j.displacementMap?le=j.displacementMap:j.normalMap?le=j.normalMap:j.bumpMap?le=j.bumpMap:j.roughnessMap?le=j.roughnessMap:j.metalnessMap?le=j.metalnessMap:j.alphaMap?le=j.alphaMap:j.emissiveMap&&(le=j.emissiveMap),le!==void 0&&(le.isWebGLRenderTarget&&(le=le.texture),le.matrixAutoUpdate===!0&&le.updateMatrix(),z.uvTransform.value.copy(le.matrix))}function U(z,j){z.diffuse.value.copy(j.color),z.opacity.value=j.opacity}function ae(z,j){z.dashSize.value=j.dashSize,z.totalSize.value=j.dashSize+j.gapSize,z.scale.value=j.scale}function Q(z,j){z.diffuse.value.copy(j.color),z.opacity.value=j.opacity,z.size.value=j.size*me,z.scale.value=$*.5,z.map.value=j.map,j.map!==null&&(j.map.matrixAutoUpdate===!0&&j.map.updateMatrix(),z.uvTransform.value.copy(j.map.matrix))}function se(z,j){z.diffuse.value.copy(j.color),z.opacity.value=j.opacity,z.rotation.value=j.rotation,z.map.value=j.map,j.map!==null&&(j.map.matrixAutoUpdate===!0&&j.map.updateMatrix(),z.uvTransform.value.copy(j.map.matrix))}function Y(z,j){z.fogColor.value.copy(j.color),j.isFog?(z.fogNear.value=j.near,z.fogFar.value=j.far):j.isFogExp2&&(z.fogDensity.value=j.density)}function ee(z,j){j.emissiveMap&&(z.emissiveMap.value=j.emissiveMap)}function F(z,j){z.specular.value.copy(j.specular),z.shininess.value=Math.max(j.shininess,1e-4),j.emissiveMap&&(z.emissiveMap.value=j.emissiveMap),j.bumpMap&&(z.bumpMap.value=j.bumpMap,z.bumpScale.value=j.bumpScale,j.side===Xr&&(z.bumpScale.value*=-1)),j.normalMap&&(z.normalMap.value=j.normalMap,z.normalScale.value.copy(j.normalScale),j.side===Xr&&z.normalScale.value.negate()),j.displacementMap&&(z.displacementMap.value=j.displacementMap,z.displacementScale.value=j.displacementScale,z.displacementBias.value=j.displacementBias)}function J(z,j){F(z,j),j.gradientMap&&(z.gradientMap.value=j.gradientMap)}function re(z,j){z.roughness.value=j.roughness,z.metalness.value=j.metalness,j.roughnessMap&&(z.roughnessMap.value=j.roughnessMap),j.metalnessMap&&(z.metalnessMap.value=j.metalnessMap),j.emissiveMap&&(z.emissiveMap.value=j.emissiveMap),j.bumpMap&&(z.bumpMap.value=j.bumpMap,z.bumpScale.value=j.bumpScale,j.side===Xr&&(z.bumpScale.value*=-1)),j.normalMap&&(z.normalMap.value=j.normalMap,z.normalScale.value.copy(j.normalScale),j.side===Xr&&z.normalScale.value.negate()),j.displacementMap&&(z.displacementMap.value=j.displacementMap,z.displacementScale.value=j.displacementScale,z.displacementBias.value=j.displacementBias),j.envMap&&(z.envMapIntensity.value=j.envMapIntensity)}function ce(z,j){re(z,j),z.reflectivity.value=j.reflectivity,z.clearCoat.value=j.clearCoat,z.clearCoatRoughness.value=j.clearCoatRoughness}function ne(z,j){j.matcap&&(z.matcap.value=j.matcap),j.bumpMap&&(z.bumpMap.value=j.bumpMap,z.bumpScale.value=j.bumpScale,j.side===Xr&&(z.bumpScale.value*=-1)),j.normalMap&&(z.normalMap.value=j.normalMap,z.normalScale.value.copy(j.normalScale),j.side===Xr&&z.normalScale.value.negate()),j.displacementMap&&(z.displacementMap.value=j.displacementMap,z.displacementScale.value=j.displacementScale,z.displacementBias.value=j.displacementBias)}function ye(z,j){j.displacementMap&&(z.displacementMap.value=j.displacementMap,z.displacementScale.value=j.displacementScale,z.displacementBias.value=j.displacementBias)}function we(z,j){j.displacementMap&&(z.displacementMap.value=j.displacementMap,z.displacementScale.value=j.displacementScale,z.displacementBias.value=j.displacementBias),z.referencePosition.value.copy(j.referencePosition),z.nearDistance.value=j.nearDistance,z.farDistance.value=j.farDistance}function Ve(z,j){j.bumpMap&&(z.bumpMap.value=j.bumpMap,z.bumpScale.value=j.bumpScale,j.side===Xr&&(z.bumpScale.value*=-1)),j.normalMap&&(z.normalMap.value=j.normalMap,z.normalScale.value.copy(j.normalScale),j.side===Xr&&z.normalScale.value.negate()),j.displacementMap&&(z.displacementMap.value=j.displacementMap,z.displacementScale.value=j.displacementScale,z.displacementBias.value=j.displacementBias)}function Be(z,j){z.ambientLightColor.needsUpdate=j,z.lightProbe.needsUpdate=j,z.directionalLights.needsUpdate=j,z.pointLights.needsUpdate=j,z.spotLights.needsUpdate=j,z.rectAreaLights.needsUpdate=j,z.hemisphereLights.needsUpdate=j}this.setFramebuffer=function(z){A=z},this.getRenderTarget=function(){return P},this.setRenderTarget=function(z,j,le){P=z,z&&Nt.get(z).__webglFramebuffer===void 0&&ci.setupRenderTarget(z);var xe=A,Ce=!1;if(z){var Ue=Nt.get(z).__webglFramebuffer;z.isWebGLRenderTargetCube?(xe=Ue[j||0],Ce=!0):z.isWebGLMultisampleRenderTarget?xe=Nt.get(z).__webglMultisampledFramebuffer:xe=Ue,O.copy(z.viewport),x.copy(z.scissor),Z=z.scissorTest}else O.copy(ue).multiplyScalar(me),x.copy(Se).multiplyScalar(me),Z=Te;if(w!==xe&&(Ke.bindFramebuffer(36160,xe),w=xe),ut.viewport(O),ut.scissor(x),ut.setScissorTest(Z),Ce){var je=Nt.get(z.texture);Ke.framebufferTexture2D(36160,36064,34069+(j||0),je.__webglTexture,le||0)}},this.readRenderTargetPixels=function(z,j,le,xe,Ce,Ue){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var je=Nt.get(z).__webglFramebuffer;if(je){var nt=!1;je!==w&&(Ke.bindFramebuffer(36160,je),nt=!0);try{var yt=z.texture,Vt=yt.format,it=yt.type;if(Vt!==Ou&&_e.convert(Vt)!==Ke.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(it!==uP&&_e.convert(it)!==Ke.getParameter(35738)&&!(it===bg&&(Et.isWebGL2||dt.get("OES_texture_float")||dt.get("WEBGL_color_buffer_float")))&&!(it===cP&&(Et.isWebGL2?dt.get("EXT_color_buffer_float"):dt.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ke.checkFramebufferStatus(36160)===36053?j>=0&&j<=z.width-xe&&le>=0&&le<=z.height-Ce&&Ke.readPixels(j,le,xe,Ce,_e.convert(Vt),_e.convert(it),Ue):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{nt&&Ke.bindFramebuffer(36160,w)}}},this.copyFramebufferToTexture=function(z,j,le){var xe=j.image.width,Ce=j.image.height,Ue=_e.convert(j.format);ci.setTexture2D(j,0),Ke.copyTexImage2D(3553,le||0,Ue,z.x,z.y,xe,Ce,0)},this.copyTextureToTexture=function(z,j,le,xe){var Ce=j.image.width,Ue=j.image.height,je=_e.convert(le.format),nt=_e.convert(le.type);ci.setTexture2D(le,0),j.isDataTexture?Ke.texSubImage2D(3553,xe||0,z.x,z.y,Ce,Ue,je,nt,j.image.data):Ke.texSubImage2D(3553,xe||0,z.x,z.y,je,nt,j.image)}}function gw(i,e){this.name="",this.color=new wi(i),this.density=e!==void 0?e:25e-5}Object.assign(gw.prototype,{isFogExp2:!0,clone:function(){return new gw(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function yw(i,e,t){this.name="",this.color=new wi(i),this.near=e!==void 0?e:1,this.far=t!==void 0?t:1e3}Object.assign(yw.prototype,{isFog:!0,clone:function(){return new yw(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function $v(){li.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}$v.prototype=Object.assign(Object.create(li.prototype),{constructor:$v,isScene:!0,copy:function(i,e){return li.prototype.copy.call(this,i,e),i.background!==null&&(this.background=i.background.clone()),i.fog!==null&&(this.fog=i.fog.clone()),i.overrideMaterial!==null&&(this.overrideMaterial=i.overrideMaterial.clone()),this.autoUpdate=i.autoUpdate,this.matrixAutoUpdate=i.matrixAutoUpdate,this},toJSON:function(i){var e=li.prototype.toJSON.call(this,i);return this.background!==null&&(e.object.background=this.background.toJSON(i)),this.fog!==null&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});function rf(i,e){this.array=i,this.stride=e,this.count=i!==void 0?i.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(rf.prototype,"needsUpdate",{set:function(i){i===!0&&this.version++}});Object.assign(rf.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(i){if(Array.isArray(i))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=i!==void 0?i.length/this.stride:0,this.array=i,this},setDynamic:function(i){return this.dynamic=i,this},copy:function(i){return this.array=new i.array.constructor(i.array),this.count=i.count,this.stride=i.stride,this.dynamic=i.dynamic,this},copyAt:function(i,e,t){i*=this.stride,t*=e.stride;for(var n=0,s=this.stride;n<s;n++)this.array[i+n]=e.array[t+n];return this},set:function(i,e){return e===void 0&&(e=0),this.array.set(i,e),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(i){return this.onUploadCallback=i,this}});function eb(i,e,t,n){this.data=i,this.itemSize=e,this.offset=t,this.normalized=n===!0}Object.defineProperties(eb.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(eb.prototype,{isInterleavedBufferAttribute:!0,setX:function(i,e){return this.data.array[i*this.data.stride+this.offset]=e,this},setY:function(i,e){return this.data.array[i*this.data.stride+this.offset+1]=e,this},setZ:function(i,e){return this.data.array[i*this.data.stride+this.offset+2]=e,this},setW:function(i,e){return this.data.array[i*this.data.stride+this.offset+3]=e,this},getX:function(i){return this.data.array[i*this.data.stride+this.offset]},getY:function(i){return this.data.array[i*this.data.stride+this.offset+1]},getZ:function(i){return this.data.array[i*this.data.stride+this.offset+2]},getW:function(i){return this.data.array[i*this.data.stride+this.offset+3]},setXY:function(i,e,t){return i=i*this.data.stride+this.offset,this.data.array[i+0]=e,this.data.array[i+1]=t,this},setXYZ:function(i,e,t,n){return i=i*this.data.stride+this.offset,this.data.array[i+0]=e,this.data.array[i+1]=t,this.data.array[i+2]=n,this},setXYZW:function(i,e,t,n,s){return i=i*this.data.stride+this.offset,this.data.array[i+0]=e,this.data.array[i+1]=t,this.data.array[i+2]=n,this.data.array[i+3]=s,this}});function nd(i){nn.call(this),this.type="SpriteMaterial",this.color=new wi(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(i)}nd.prototype=Object.create(nn.prototype);nd.prototype.constructor=nd;nd.prototype.isSpriteMaterial=!0;nd.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.color.copy(i.color),this.map=i.map,this.rotation=i.rotation,this.sizeAttenuation=i.sizeAttenuation,this};var ip;function vw(i){if(li.call(this),this.type="Sprite",ip===void 0){ip=new Zt;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new rf(e,5);ip.setIndex([0,1,2,0,2,3]),ip.addAttribute("position",new eb(t,3,0,!1)),ip.addAttribute("uv",new eb(t,2,3,!1))}this.geometry=ip,this.material=i!==void 0?i:new nd,this.center=new _t(.5,.5)}vw.prototype=Object.assign(Object.create(li.prototype),{constructor:vw,isSprite:!0,raycast:function(){var i=new Ae,e=new Ae,t=new Ae,n=new _t,s=new _t,r=new Fi,a=new Ae,o=new Ae,l=new Ae,h=new _t,c=new _t,f=new _t;function g(v,A,P,w,T,D){n.subVectors(v,P).addScalar(.5).multiply(w),T!==void 0?(s.x=D*n.x-T*n.y,s.y=T*n.x+D*n.y):s.copy(n),v.copy(A),v.x+=s.x,v.y+=s.y,v.applyMatrix4(r)}return function(A,P){e.setFromMatrixScale(this.matrixWorld),r.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),t.setFromMatrixPosition(this.modelViewMatrix);var w=this.material.rotation,T,D;w!==0&&(D=Math.cos(w),T=Math.sin(w));var M=this.center;g(a.set(-.5,-.5,0),t,M,e,T,D),g(o.set(.5,-.5,0),t,M,e,T,D),g(l.set(.5,.5,0),t,M,e,T,D),h.set(0,0),c.set(1,0),f.set(1,1);var B=A.ray.intersectTriangle(a,o,l,!1,i);if(!(B===null&&(g(o.set(-.5,.5,0),t,M,e,T,D),c.set(0,1),B=A.ray.intersectTriangle(a,l,o,!1,i),B===null))){var O=A.ray.origin.distanceTo(i);O<A.near||O>A.far||P.push({distance:O,point:i.clone(),uv:ca.getUV(i,a,o,l,h,c,f,new _t),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(i){return li.prototype.copy.call(this,i),i.center!==void 0&&this.center.copy(i.center),this}});function tb(){li.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}tb.prototype=Object.assign(Object.create(li.prototype),{constructor:tb,isLOD:!0,copy:function(i){li.prototype.copy.call(this,i,!1);for(var e=i.levels,t=0,n=e.length;t<n;t++){var s=e[t];this.addLevel(s.object.clone(),s.distance)}return this},addLevel:function(i,e){e===void 0&&(e=0),e=Math.abs(e);for(var t=this.levels,n=0;n<t.length&&!(e<t[n].distance);n++);return t.splice(n,0,{distance:e,object:i}),this.add(i),this},getObjectForDistance:function(i){for(var e=this.levels,t=1,n=e.length;t<n&&!(i<e[t].distance);t++);return e[t-1].object},raycast:function(){var i=new Ae;return function(t,n){i.setFromMatrixPosition(this.matrixWorld);var s=t.ray.origin.distanceTo(i);this.getObjectForDistance(s).raycast(t,n)}}(),update:function(){var i=new Ae,e=new Ae;return function(n){var s=this.levels;if(s.length>1){i.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=i.distanceTo(e);s[0].object.visible=!0;for(var a=1,o=s.length;a<o&&r>=s[a].distance;a++)s[a-1].object.visible=!1,s[a].object.visible=!0;for(;a<o;a++)s[a].object.visible=!1}}}(),toJSON:function(i){var e=li.prototype.toJSON.call(this,i);e.object.levels=[];for(var t=this.levels,n=0,s=t.length;n<s;n++){var r=t[n];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}});function ib(i,e){i&&i.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Ws.call(this,i,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Fi,this.bindMatrixInverse=new Fi}ib.prototype=Object.assign(Object.create(Ws.prototype),{constructor:ib,isSkinnedMesh:!0,bind:function(i,e){this.skeleton=i,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var i=new hs,e=this.geometry.attributes.skinWeight,t=0,n=e.count;t<n;t++){i.x=e.getX(t),i.y=e.getY(t),i.z=e.getZ(t),i.w=e.getW(t);var s=1/i.manhattanLength();s!==1/0?i.multiplyScalar(s):i.set(1,0,0,0),e.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(i){Ws.prototype.updateMatrixWorld.call(this,i),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function bw(i,e){if(i=i||[],this.bones=i.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),e===void 0)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var t=0,n=this.bones.length;t<n;t++)this.boneInverses.push(new Fi)}}Object.assign(bw.prototype,{calculateInverses:function(){this.boneInverses=[];for(var i=0,e=this.bones.length;i<e;i++){var t=new Fi;this.bones[i]&&t.getInverse(this.bones[i].matrixWorld),this.boneInverses.push(t)}},pose:function(){var i,e,t;for(e=0,t=this.bones.length;e<t;e++)i=this.bones[e],i&&i.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,t=this.bones.length;e<t;e++)i=this.bones[e],i&&(i.parent&&i.parent.isBone?(i.matrix.getInverse(i.parent.matrixWorld),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))},update:function(){var i=new Fi,e=new Fi;return function(){for(var n=this.bones,s=this.boneInverses,r=this.boneMatrices,a=this.boneTexture,o=0,l=n.length;o<l;o++){var h=n[o]?n[o].matrixWorld:e;i.multiplyMatrices(h,s[o]),i.toArray(r,o*16)}a!==void 0&&(a.needsUpdate=!0)}}(),clone:function(){return new bw(this.bones,this.boneInverses)},getBoneByName:function(i){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];if(n.name===i)return n}}});function UC(){li.call(this),this.type="Bone"}UC.prototype=Object.assign(Object.create(li.prototype),{constructor:UC,isBone:!0});function yn(i){nn.call(this),this.type="LineBasicMaterial",this.color=new wi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(i)}yn.prototype=Object.create(nn.prototype);yn.prototype.constructor=yn;yn.prototype.isLineBasicMaterial=!0;yn.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.color.copy(i.color),this.linewidth=i.linewidth,this.linecap=i.linecap,this.linejoin=i.linejoin,this};function rs(i,e,t){t===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),li.call(this),this.type="Line",this.geometry=i!==void 0?i:new Zt,this.material=e!==void 0?e:new yn({color:Math.random()*16777215})}rs.prototype=Object.assign(Object.create(li.prototype),{constructor:rs,isLine:!0,computeLineDistances:function(){var i=new Ae,e=new Ae;return function(){var n=this.geometry;if(n.isBufferGeometry)if(n.index===null){for(var s=n.attributes.position,r=[0],a=1,o=s.count;a<o;a++)i.fromBufferAttribute(s,a-1),e.fromBufferAttribute(s,a),r[a]=r[a-1],r[a]+=i.distanceTo(e);n.addAttribute("lineDistance",new ni(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var l=n.vertices,r=n.lineDistances;r[0]=0;for(var a=1,o=l.length;a<o;a++)r[a]=r[a-1],r[a]+=l[a-1].distanceTo(l[a])}return this}}(),raycast:function(){var i=new Fi,e=new zf,t=new Gh;return function(s,r){var a=s.linePrecision,o=this.geometry,l=this.matrixWorld;if(o.boundingSphere===null&&o.computeBoundingSphere(),t.copy(o.boundingSphere),t.applyMatrix4(l),t.radius+=a,s.ray.intersectsSphere(t)!==!1){i.getInverse(l),e.copy(s.ray).applyMatrix4(i);var h=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=h*h,f=new Ae,g=new Ae,v=new Ae,A=new Ae,P=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var w=o.index,T=o.attributes,D=T.position.array;if(w!==null)for(var M=w.array,B=0,O=M.length-1;B<O;B+=P){var x=M[B],Z=M[B+1];f.fromArray(D,x*3),g.fromArray(D,Z*3);var de=e.distanceSqToSegment(f,g,A,v);if(!(de>c)){A.applyMatrix4(this.matrixWorld);var $=s.ray.origin.distanceTo(A);$<s.near||$>s.far||r.push({distance:$,point:v.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this})}}else for(var B=0,O=D.length/3-1;B<O;B+=P){f.fromArray(D,3*B),g.fromArray(D,3*B+3);var de=e.distanceSqToSegment(f,g,A,v);if(!(de>c)){A.applyMatrix4(this.matrixWorld);var $=s.ray.origin.distanceTo(A);$<s.near||$>s.far||r.push({distance:$,point:v.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this})}}}else if(o.isGeometry)for(var me=o.vertices,ue=me.length,B=0;B<ue-1;B+=P){var de=e.distanceSqToSegment(me[B],me[B+1],A,v);if(!(de>c)){A.applyMatrix4(this.matrixWorld);var $=s.ray.origin.distanceTo(A);$<s.near||$>s.far||r.push({distance:$,point:v.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Cs(i,e){rs.call(this,i,e),this.type="LineSegments"}Cs.prototype=Object.assign(Object.create(rs.prototype),{constructor:Cs,isLineSegments:!0,computeLineDistances:function(){var i=new Ae,e=new Ae;return function(){var n=this.geometry;if(n.isBufferGeometry)if(n.index===null){for(var s=n.attributes.position,r=[],a=0,o=s.count;a<o;a+=2)i.fromBufferAttribute(s,a),e.fromBufferAttribute(s,a+1),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+i.distanceTo(e);n.addAttribute("lineDistance",new ni(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(var l=n.vertices,r=n.lineDistances,a=0,o=l.length;a<o;a+=2)i.copy(l[a]),e.copy(l[a+1]),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+i.distanceTo(e);return this}}()});function _w(i,e){rs.call(this,i,e),this.type="LineLoop"}_w.prototype=Object.assign(Object.create(rs.prototype),{constructor:_w,isLineLoop:!0});function sd(i){nn.call(this),this.type="PointsMaterial",this.color=new wi(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(i)}sd.prototype=Object.create(nn.prototype);sd.prototype.constructor=sd;sd.prototype.isPointsMaterial=!0;sd.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.color.copy(i.color),this.map=i.map,this.size=i.size,this.sizeAttenuation=i.sizeAttenuation,this.morphTargets=i.morphTargets,this};function Aw(i,e){li.call(this),this.type="Points",this.geometry=i!==void 0?i:new Zt,this.material=e!==void 0?e:new sd({color:Math.random()*16777215})}Aw.prototype=Object.assign(Object.create(li.prototype),{constructor:Aw,isPoints:!0,raycast:function(){var i=new Fi,e=new zf,t=new Gh;return function(s,r){var a=this,o=this.geometry,l=this.matrixWorld,h=s.params.Points.threshold;if(o.boundingSphere===null&&o.computeBoundingSphere(),t.copy(o.boundingSphere),t.applyMatrix4(l),t.radius+=h,s.ray.intersectsSphere(t)===!1)return;i.getInverse(l),e.copy(s.ray).applyMatrix4(i);var c=h/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,g=new Ae,v=new Ae;function A(de,$){var me=e.distanceSqToPoint(de);if(me<f){e.closestPointToPoint(de,v),v.applyMatrix4(l);var ue=s.ray.origin.distanceTo(v);if(ue<s.near||ue>s.far)return;r.push({distance:ue,distanceToRay:Math.sqrt(me),point:v.clone(),index:$,face:null,object:a})}}if(o.isBufferGeometry){var P=o.index,w=o.attributes,T=w.position.array;if(P!==null)for(var D=P.array,M=0,B=D.length;M<B;M++){var O=D[M];g.fromArray(T,O*3),A(g,O)}else for(var M=0,x=T.length/3;M<x;M++)g.fromArray(T,M*3),A(g,M)}else for(var Z=o.vertices,M=0,x=Z.length;M<x;M++)A(Z[M],M)}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function GC(i,e,t,n,s,r,a,o,l){vs.call(this,i,e,t,n,s,r,a,o,l),this.format=a!==void 0?a:$c,this.minFilter=r!==void 0?r:ga,this.magFilter=s!==void 0?s:ga,this.generateMipmaps=!1}GC.prototype=Object.assign(Object.create(vs.prototype),{constructor:GC,isVideoTexture:!0,update:function(){var i=this.image;i.readyState>=i.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function xg(i,e,t,n,s,r,a,o,l,h,c,f){vs.call(this,null,r,a,o,l,h,n,s,c,f),this.image={width:e,height:t},this.mipmaps=i,this.flipY=!1,this.generateMipmaps=!1}xg.prototype=Object.create(vs.prototype);xg.prototype.constructor=xg;xg.prototype.isCompressedTexture=!0;function nb(i,e,t,n,s,r,a,o,l){vs.call(this,i,e,t,n,s,r,a,o,l),this.needsUpdate=!0}nb.prototype=Object.create(vs.prototype);nb.prototype.constructor=nb;nb.prototype.isCanvasTexture=!0;function sb(i,e,t,n,s,r,a,o,l,h){if(h=h!==void 0?h:_p,h!==_p&&h!==_g)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&h===_p&&(t=Gv),t===void 0&&h===_g&&(t=Wv),vs.call(this,null,n,s,r,a,o,h,t,l),this.image={width:i,height:e},this.magFilter=a!==void 0?a:Zr,this.minFilter=o!==void 0?o:Zr,this.flipY=!1,this.generateMipmaps=!1}sb.prototype=Object.create(vs.prototype);sb.prototype.constructor=sb;sb.prototype.isDepthTexture=!0;function rb(i){Zt.call(this),this.type="WireframeGeometry";var e=[],t,n,s,r,a,o=[0,0],l={},h,c,f,g,v=["a","b","c"],A;if(i&&i.isGeometry){var P=i.faces;for(t=0,s=P.length;t<s;t++){var w=P[t];for(n=0;n<3;n++)c=w[v[n]],f=w[v[(n+1)%3]],o[0]=Math.min(c,f),o[1]=Math.max(c,f),g=o[0]+","+o[1],l[g]===void 0&&(l[g]={index1:o[0],index2:o[1]})}for(g in l)h=l[g],A=i.vertices[h.index1],e.push(A.x,A.y,A.z),A=i.vertices[h.index2],e.push(A.x,A.y,A.z)}else if(i&&i.isBufferGeometry){var T,D,M,B,O,x,Z,de;if(A=new Ae,i.index!==null){for(T=i.attributes.position,D=i.index,M=i.groups,M.length===0&&(M=[{start:0,count:D.count,materialIndex:0}]),r=0,a=M.length;r<a;++r)for(B=M[r],O=B.start,x=B.count,t=O,s=O+x;t<s;t+=3)for(n=0;n<3;n++)c=D.getX(t+n),f=D.getX(t+(n+1)%3),o[0]=Math.min(c,f),o[1]=Math.max(c,f),g=o[0]+","+o[1],l[g]===void 0&&(l[g]={index1:o[0],index2:o[1]});for(g in l)h=l[g],A.fromBufferAttribute(T,h.index1),e.push(A.x,A.y,A.z),A.fromBufferAttribute(T,h.index2),e.push(A.x,A.y,A.z)}else for(T=i.attributes.position,t=0,s=T.count/3;t<s;t++)for(n=0;n<3;n++)Z=3*t+n,A.fromBufferAttribute(T,Z),e.push(A.x,A.y,A.z),de=3*t+(n+1)%3,A.fromBufferAttribute(T,de),e.push(A.x,A.y,A.z)}this.addAttribute("position",new ni(e,3))}rb.prototype=Object.create(Zt.prototype);rb.prototype.constructor=rb;function ab(i,e,t){Gi.call(this),this.type="ParametricGeometry",this.parameters={func:i,slices:e,stacks:t},this.fromBufferGeometry(new Eg(i,e,t)),this.mergeVertices()}ab.prototype=Object.create(Gi.prototype);ab.prototype.constructor=ab;function Eg(i,e,t){Zt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:i,slices:e,stacks:t};var n=[],s=[],r=[],a=[],o=1e-5,l=new Ae,h=new Ae,c=new Ae,f=new Ae,g=new Ae,v,A;i.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var P=e+1;for(v=0;v<=t;v++){var w=v/t;for(A=0;A<=e;A++){var T=A/e;i(T,w,h),s.push(h.x,h.y,h.z),T-o>=0?(i(T-o,w,c),f.subVectors(h,c)):(i(T+o,w,c),f.subVectors(c,h)),w-o>=0?(i(T,w-o,c),g.subVectors(h,c)):(i(T,w+o,c),g.subVectors(c,h)),l.crossVectors(f,g).normalize(),r.push(l.x,l.y,l.z),a.push(T,w)}}for(v=0;v<t;v++)for(A=0;A<e;A++){var D=v*P+A,M=v*P+A+1,B=(v+1)*P+A+1,O=(v+1)*P+A;n.push(D,M,O),n.push(M,B,O)}this.setIndex(n),this.addAttribute("position",new ni(s,3)),this.addAttribute("normal",new ni(r,3)),this.addAttribute("uv",new ni(a,2))}Eg.prototype=Object.create(Zt.prototype);Eg.prototype.constructor=Eg;function ob(i,e,t,n){Gi.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:i,indices:e,radius:t,detail:n},this.fromBufferGeometry(new ao(i,e,t,n)),this.mergeVertices()}ob.prototype=Object.create(Gi.prototype);ob.prototype.constructor=ob;function ao(i,e,t,n){Zt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:i,indices:e,radius:t,detail:n},t=t||1,n=n||0;var s=[],r=[];a(n),l(t),h(),this.addAttribute("position",new ni(s,3)),this.addAttribute("normal",new ni(s.slice(),3)),this.addAttribute("uv",new ni(r,2)),n===0?this.computeVertexNormals():this.normalizeNormals();function a(T){for(var D=new Ae,M=new Ae,B=new Ae,O=0;O<e.length;O+=3)g(e[O+0],D),g(e[O+1],M),g(e[O+2],B),o(D,M,B,T)}function o(T,D,M,B){var O=Math.pow(2,B),x=[],Z,de;for(Z=0;Z<=O;Z++){x[Z]=[];var $=T.clone().lerp(M,Z/O),me=D.clone().lerp(M,Z/O),ue=O-Z;for(de=0;de<=ue;de++)de===0&&Z===O?x[Z][de]=$:x[Z][de]=$.clone().lerp(me,de/ue)}for(Z=0;Z<O;Z++)for(de=0;de<2*(O-Z)-1;de++){var Se=Math.floor(de/2);de%2===0?(f(x[Z][Se+1]),f(x[Z+1][Se]),f(x[Z][Se])):(f(x[Z][Se+1]),f(x[Z+1][Se+1]),f(x[Z+1][Se]))}}function l(T){for(var D=new Ae,M=0;M<s.length;M+=3)D.x=s[M+0],D.y=s[M+1],D.z=s[M+2],D.normalize().multiplyScalar(T),s[M+0]=D.x,s[M+1]=D.y,s[M+2]=D.z}function h(){for(var T=new Ae,D=0;D<s.length;D+=3){T.x=s[D+0],T.y=s[D+1],T.z=s[D+2];var M=P(T)/2/Math.PI+.5,B=w(T)/Math.PI+.5;r.push(M,1-B)}v(),c()}function c(){for(var T=0;T<r.length;T+=6){var D=r[T+0],M=r[T+2],B=r[T+4],O=Math.max(D,M,B),x=Math.min(D,M,B);O>.9&&x<.1&&(D<.2&&(r[T+0]+=1),M<.2&&(r[T+2]+=1),B<.2&&(r[T+4]+=1))}}function f(T){s.push(T.x,T.y,T.z)}function g(T,D){var M=T*3;D.x=i[M+0],D.y=i[M+1],D.z=i[M+2]}function v(){for(var T=new Ae,D=new Ae,M=new Ae,B=new Ae,O=new _t,x=new _t,Z=new _t,de=0,$=0;de<s.length;de+=9,$+=6){T.set(s[de+0],s[de+1],s[de+2]),D.set(s[de+3],s[de+4],s[de+5]),M.set(s[de+6],s[de+7],s[de+8]),O.set(r[$+0],r[$+1]),x.set(r[$+2],r[$+3]),Z.set(r[$+4],r[$+5]),B.copy(T).add(D).add(M).divideScalar(3);var me=P(B);A(O,$+0,T,me),A(x,$+2,D,me),A(Z,$+4,M,me)}}function A(T,D,M,B){B<0&&T.x===1&&(r[D]=T.x-1),M.x===0&&M.z===0&&(r[D]=B/2/Math.PI+.5)}function P(T){return Math.atan2(T.z,-T.x)}function w(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}ao.prototype=Object.create(Zt.prototype);ao.prototype.constructor=ao;function lb(i,e){Gi.call(this),this.type="TetrahedronGeometry",this.parameters={radius:i,detail:e},this.fromBufferGeometry(new Vg(i,e)),this.mergeVertices()}lb.prototype=Object.create(Gi.prototype);lb.prototype.constructor=lb;function Vg(i,e){var t=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];ao.call(this,t,n,i,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:i,detail:e}}Vg.prototype=Object.create(ao.prototype);Vg.prototype.constructor=Vg;function hb(i,e){Gi.call(this),this.type="OctahedronGeometry",this.parameters={radius:i,detail:e},this.fromBufferGeometry(new af(i,e)),this.mergeVertices()}hb.prototype=Object.create(Gi.prototype);hb.prototype.constructor=hb;function af(i,e){var t=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];ao.call(this,t,n,i,e),this.type="OctahedronBufferGeometry",this.parameters={radius:i,detail:e}}af.prototype=Object.create(ao.prototype);af.prototype.constructor=af;function ub(i,e){Gi.call(this),this.type="IcosahedronGeometry",this.parameters={radius:i,detail:e},this.fromBufferGeometry(new kg(i,e)),this.mergeVertices()}ub.prototype=Object.create(Gi.prototype);ub.prototype.constructor=ub;function kg(i,e){var t=(1+Math.sqrt(5))/2,n=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];ao.call(this,n,s,i,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:i,detail:e}}kg.prototype=Object.create(ao.prototype);kg.prototype.constructor=kg;function cb(i,e){Gi.call(this),this.type="DodecahedronGeometry",this.parameters={radius:i,detail:e},this.fromBufferGeometry(new Cg(i,e)),this.mergeVertices()}cb.prototype=Object.create(Gi.prototype);cb.prototype.constructor=cb;function Cg(i,e){var t=(1+Math.sqrt(5))/2,n=1/t,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-t,0,-n,t,0,n,-t,0,n,t,-n,-t,0,-n,t,0,n,-t,0,n,t,0,-t,0,-n,t,0,-n,-t,0,n,t,0,n],r=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];ao.call(this,s,r,i,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:i,detail:e}}Cg.prototype=Object.create(ao.prototype);Cg.prototype.constructor=Cg;function db(i,e,t,n,s,r){Gi.call(this),this.type="TubeGeometry",this.parameters={path:i,tubularSegments:e,radius:t,radialSegments:n,closed:s},r!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new of(i,e,t,n,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}db.prototype=Object.create(Gi.prototype);db.prototype.constructor=db;function of(i,e,t,n,s){Zt.call(this),this.type="TubeBufferGeometry",this.parameters={path:i,tubularSegments:e,radius:t,radialSegments:n,closed:s},e=e||64,t=t||1,n=n||8,s=s||!1;var r=i.computeFrenetFrames(e,s);this.tangents=r.tangents,this.normals=r.normals,this.binormals=r.binormals;var a=new Ae,o=new Ae,l=new _t,h=new Ae,c,f,g=[],v=[],A=[],P=[];w(),this.setIndex(P),this.addAttribute("position",new ni(g,3)),this.addAttribute("normal",new ni(v,3)),this.addAttribute("uv",new ni(A,2));function w(){for(c=0;c<e;c++)T(c);T(s===!1?e:0),M(),D()}function T(B){h=i.getPointAt(B/e,h);var O=r.normals[B],x=r.binormals[B];for(f=0;f<=n;f++){var Z=f/n*Math.PI*2,de=Math.sin(Z),$=-Math.cos(Z);o.x=$*O.x+de*x.x,o.y=$*O.y+de*x.y,o.z=$*O.z+de*x.z,o.normalize(),v.push(o.x,o.y,o.z),a.x=h.x+t*o.x,a.y=h.y+t*o.y,a.z=h.z+t*o.z,g.push(a.x,a.y,a.z)}}function D(){for(f=1;f<=e;f++)for(c=1;c<=n;c++){var B=(n+1)*(f-1)+(c-1),O=(n+1)*f+(c-1),x=(n+1)*f+c,Z=(n+1)*(f-1)+c;P.push(B,O,Z),P.push(O,x,Z)}}function M(){for(c=0;c<=e;c++)for(f=0;f<=n;f++)l.x=c/e,l.y=f/n,A.push(l.x,l.y)}}of.prototype=Object.create(Zt.prototype);of.prototype.constructor=of;of.prototype.toJSON=function(){var i=Zt.prototype.toJSON.call(this);return i.path=this.parameters.path.toJSON(),i};function pb(i,e,t,n,s,r,a){Gi.call(this),this.type="TorusKnotGeometry",this.parameters={radius:i,tube:e,tubularSegments:t,radialSegments:n,p:s,q:r},a!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Dg(i,e,t,n,s,r)),this.mergeVertices()}pb.prototype=Object.create(Gi.prototype);pb.prototype.constructor=pb;function Dg(i,e,t,n,s,r){Zt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:i,tube:e,tubularSegments:t,radialSegments:n,p:s,q:r},i=i||1,e=e||.4,t=Math.floor(t)||64,n=Math.floor(n)||8,s=s||2,r=r||3;var a=[],o=[],l=[],h=[],c,f,g=new Ae,v=new Ae,A=new Ae,P=new Ae,w=new Ae,T=new Ae,D=new Ae;for(c=0;c<=t;++c){var M=c/t*s*Math.PI*2;for(ue(M,s,r,i,A),ue(M+.01,s,r,i,P),T.subVectors(P,A),D.addVectors(P,A),w.crossVectors(T,D),D.crossVectors(w,T),w.normalize(),D.normalize(),f=0;f<=n;++f){var B=f/n*Math.PI*2,O=-e*Math.cos(B),x=e*Math.sin(B);g.x=A.x+(O*D.x+x*w.x),g.y=A.y+(O*D.y+x*w.y),g.z=A.z+(O*D.z+x*w.z),o.push(g.x,g.y,g.z),v.subVectors(g,A).normalize(),l.push(v.x,v.y,v.z),h.push(c/t),h.push(f/n)}}for(f=1;f<=t;f++)for(c=1;c<=n;c++){var Z=(n+1)*(f-1)+(c-1),de=(n+1)*f+(c-1),$=(n+1)*f+c,me=(n+1)*(f-1)+c;a.push(Z,de,me),a.push(de,$,me)}this.setIndex(a),this.addAttribute("position",new ni(o,3)),this.addAttribute("normal",new ni(l,3)),this.addAttribute("uv",new ni(h,2));function ue(Se,Te,Re,We,Le){var lt=Math.cos(Se),st=Math.sin(Se),De=Re/Te*Se,et=Math.cos(De);Le.x=We*(2+et)*.5*lt,Le.y=We*(2+et)*st*.5,Le.z=We*Math.sin(De)*.5}}Dg.prototype=Object.create(Zt.prototype);Dg.prototype.constructor=Dg;function fb(i,e,t,n,s){Gi.call(this),this.type="TorusGeometry",this.parameters={radius:i,tube:e,radialSegments:t,tubularSegments:n,arc:s},this.fromBufferGeometry(new Ig(i,e,t,n,s)),this.mergeVertices()}fb.prototype=Object.create(Gi.prototype);fb.prototype.constructor=fb;function Ig(i,e,t,n,s){Zt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:i,tube:e,radialSegments:t,tubularSegments:n,arc:s},i=i||1,e=e||.4,t=Math.floor(t)||8,n=Math.floor(n)||6,s=s||Math.PI*2;var r=[],a=[],o=[],l=[],h=new Ae,c=new Ae,f=new Ae,g,v;for(g=0;g<=t;g++)for(v=0;v<=n;v++){var A=v/n*s,P=g/t*Math.PI*2;c.x=(i+e*Math.cos(P))*Math.cos(A),c.y=(i+e*Math.cos(P))*Math.sin(A),c.z=e*Math.sin(P),a.push(c.x,c.y,c.z),h.x=i*Math.cos(A),h.y=i*Math.sin(A),f.subVectors(c,h).normalize(),o.push(f.x,f.y,f.z),l.push(v/n),l.push(g/t)}for(g=1;g<=t;g++)for(v=1;v<=n;v++){var w=(n+1)*g+v-1,T=(n+1)*(g-1)+v-1,D=(n+1)*(g-1)+v,M=(n+1)*g+v;r.push(w,T,M),r.push(T,D,M)}this.setIndex(r),this.addAttribute("position",new ni(a,3)),this.addAttribute("normal",new ni(o,3)),this.addAttribute("uv",new ni(l,2))}Ig.prototype=Object.create(Zt.prototype);Ig.prototype.constructor=Ig;var Vse={triangulate:function(i,e,t){t=t||2;var n=e&&e.length,s=n?e[0]*t:i.length,r=U3(i,0,s,t,!0),a=[];if(!r)return a;var o,l,h,c,f,g,v;if(n&&(r=Lse(i,e,r,t)),i.length>80*t){o=h=i[0],l=c=i[1];for(var A=t;A<s;A+=t)f=i[A],g=i[A+1],f<o&&(o=f),g<l&&(l=g),f>h&&(h=f),g>c&&(c=g);v=Math.max(h-o,c-l),v=v!==0?1/v:0}return Mg(r,a,t,o,l,v),a}};function U3(i,e,t,n,s){var r,a;if(s===Use(i,e,t,n)>0)for(r=e;r<t;r+=n)a=WC(r,i[r],i[r+1],a);else for(r=t-n;r>=e;r-=n)a=WC(r,i[r],i[r+1],a);return a&&_c(a,a.next)&&(Ng(a),a=a.next),a}function Lg(i,e){if(!i)return i;e||(e=i);var t=i,n;do if(n=!1,!t.steiner&&(_c(t,t.next)||da(t.prev,t,t.next)===0)){if(Ng(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Mg(i,e,t,n,s,r,a){if(i){!a&&r&&Rse(i,n,s,r);for(var o=i,l,h;i.prev!==i.next;){if(l=i.prev,h=i.next,r?Cse(i,n,s,r):kse(i)){e.push(l.i/t),e.push(i.i/t),e.push(h.i/t),Ng(i),i=h.next,o=h.next;continue}if(i=h,i===o){a?a===1?(i=Dse(i,e,t),Mg(i,e,t,n,s,r,2)):a===2&&Ise(i,e,t,n,s,r):Mg(Lg(i),e,t,n,s,r,1);break}}}}function kse(i){var e=i.prev,t=i,n=i.next;if(da(e,t,n)>=0)return!1;for(var s=i.next.next;s!==i.prev;){if(mb(e.x,e.y,t.x,t.y,n.x,n.y,s.x,s.y)&&da(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function Cse(i,e,t,n){var s=i.prev,r=i,a=i.next;if(da(s,r,a)>=0)return!1;for(var o=s.x<r.x?s.x<a.x?s.x:a.x:r.x<a.x?r.x:a.x,l=s.y<r.y?s.y<a.y?s.y:a.y:r.y<a.y?r.y:a.y,h=s.x>r.x?s.x>a.x?s.x:a.x:r.x>a.x?r.x:a.x,c=s.y>r.y?s.y>a.y?s.y:a.y:r.y>a.y?r.y:a.y,f=ww(o,l,e,t,n),g=ww(h,c,e,t,n),v=i.nextZ;v&&v.z<=g;){if(v!==i.prev&&v!==i.next&&mb(s.x,s.y,r.x,r.y,a.x,a.y,v.x,v.y)&&da(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(v=i.prevZ;v&&v.z>=f;){if(v!==i.prev&&v!==i.next&&mb(s.x,s.y,r.x,r.y,a.x,a.y,v.x,v.y)&&da(v.prev,v,v.next)>=0)return!1;v=v.prevZ}return!0}function Dse(i,e,t){var n=i;do{var s=n.prev,r=n.next.next;!_c(s,r)&&G3(s,n,n.next,r)&&Og(s,r)&&Og(r,s)&&(e.push(s.i/t),e.push(n.i/t),e.push(r.i/t),Ng(n),Ng(n.next),n=i=r),n=n.next}while(n!==i);return n}function Ise(i,e,t,n,s,r){var a=i;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&zse(a,o)){var l=W3(a,o);a=Lg(a,a.next),l=Lg(l,l.next),Mg(a,e,t,n,s,r),Mg(l,e,t,n,s,r);return}o=o.next}a=a.next}while(a!==i)}function Lse(i,e,t,n){var s=[],r,a,o,l,h;for(r=0,a=e.length;r<a;r++)o=e[r]*n,l=r<a-1?e[r+1]*n:i.length,h=U3(i,o,l,n,!1),h===h.next&&(h.steiner=!0),s.push(qse(h));for(s.sort(Mse),r=0;r<s.length;r++)Ose(s[r],t),t=Lg(t,t.next);return t}function Mse(i,e){return i.x-e.x}function Ose(i,e){if(e=Nse(i,e),e){var t=W3(e,i);Lg(t,t.next)}}function Nse(i,e){var t=e,n=i.x,s=i.y,r=-1/0,a;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){var o=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=n&&o>r){if(r=o,o===n){if(s===t.y)return t;if(s===t.next.y)return t.next}a=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!a)return null;if(n===r)return a.prev;var l=a,h=a.x,c=a.y,f=1/0,g;for(t=a.next;t!==l;)n>=t.x&&t.x>=h&&n!==t.x&&mb(s<c?n:r,s,h,c,s<c?r:n,s,t.x,t.y)&&(g=Math.abs(s-t.y)/(n-t.x),(g<f||g===f&&t.x>a.x)&&Og(t,i)&&(a=t,f=g)),t=t.next;return a}function Rse(i,e,t,n){var s=i;do s.z===null&&(s.z=ww(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,Bse(s)}function Bse(i){var e,t,n,s,r,a,o,l,h=1;do{for(t=i,i=null,r=null,a=0;t;){for(a++,n=t,o=0,e=0;e<h&&(o++,n=n.nextZ,!!n);e++);for(l=h;o>0||l>0&&n;)o!==0&&(l===0||!n||t.z<=n.z)?(s=t,t=t.nextZ,o--):(s=n,n=n.nextZ,l--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;t=n}r.nextZ=null,h*=2}while(a>1);return i}function ww(i,e,t,n,s){return i=32767*(i-t)*s,e=32767*(e-n)*s,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function qse(i){var e=i,t=i;do e.x<t.x&&(t=e),e=e.next;while(e!==i);return t}function mb(i,e,t,n,s,r,a,o){return(s-a)*(e-o)-(i-a)*(r-o)>=0&&(i-a)*(n-o)-(t-a)*(e-o)>=0&&(t-a)*(r-o)-(s-a)*(n-o)>=0}function zse(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Fse(i,e)&&Og(i,e)&&Og(e,i)&&Hse(i,e)}function da(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function _c(i,e){return i.x===e.x&&i.y===e.y}function G3(i,e,t,n){return _c(i,e)&&_c(t,n)||_c(i,n)&&_c(t,e)?!0:da(i,e,t)>0!=da(i,e,n)>0&&da(t,n,i)>0!=da(t,n,e)>0}function Fse(i,e){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&G3(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Og(i,e){return da(i.prev,i,i.next)<0?da(i,e,i.next)>=0&&da(i,i.prev,e)>=0:da(i,e,i.prev)<0||da(i,i.next,e)<0}function Hse(i,e){var t=i,n=!1,s=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function W3(i,e){var t=new Sw(i.i,i.x,i.y),n=new Sw(e.i,e.x,e.y),s=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function WC(i,e,t,n){var s=new Sw(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Ng(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Sw(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Use(i,e,t,n){for(var s=0,r=e,a=t-n;r<t;r+=n)s+=(i[a]-i[r])*(i[r+1]+i[a+1]),a=r;return s}var Eu={area:function(i){for(var e=i.length,t=0,n=e-1,s=0;s<e;n=s++)t+=i[n].x*i[s].y-i[s].x*i[n].y;return t*.5},isClockWise:function(i){return Eu.area(i)<0},triangulateShape:function(i,e){var t=[],n=[],s=[];KC(i),YC(t,i);var r=i.length;e.forEach(KC);for(var a=0;a<e.length;a++)n.push(r),r+=e[a].length,YC(t,e[a]);for(var o=Vse.triangulate(t,n),a=0;a<o.length;a+=3)s.push(o.slice(a,a+3));return s}};function KC(i){var e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function YC(i,e){for(var t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}function lf(i,e){Gi.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:i,options:e},this.fromBufferGeometry(new Kh(i,e)),this.mergeVertices()}lf.prototype=Object.create(Gi.prototype);lf.prototype.constructor=lf;lf.prototype.toJSON=function(){var i=Gi.prototype.toJSON.call(this),e=this.parameters.shapes,t=this.parameters.options;return K3(e,t,i)};function Kh(i,e){Zt.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:i,options:e},i=Array.isArray(i)?i:[i];for(var t=this,n=[],s=[],r=0,a=i.length;r<a;r++){var o=i[r];l(o)}this.addAttribute("position",new ni(n,3)),this.addAttribute("uv",new ni(s,2)),this.computeVertexNormals();function l(h){var c=[],f=e.curveSegments!==void 0?e.curveSegments:12,g=e.steps!==void 0?e.steps:1,v=e.depth!==void 0?e.depth:100,A=e.bevelEnabled!==void 0?e.bevelEnabled:!0,P=e.bevelThickness!==void 0?e.bevelThickness:6,w=e.bevelSize!==void 0?e.bevelSize:P-2,T=e.bevelOffset!==void 0?e.bevelOffset:0,D=e.bevelSegments!==void 0?e.bevelSegments:3,M=e.extrudePath,B=e.UVGenerator!==void 0?e.UVGenerator:Gse;e.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=e.amount);var O,x=!1,Z,de,$,me;M&&(O=M.getSpacedPoints(g),x=!0,A=!1,Z=M.computeFrenetFrames(g,!1),de=new Ae,$=new Ae,me=new Ae),A||(D=0,P=0,w=0,T=0);var ue,Se,Te,Re=h.extractPoints(f),We=Re.shape,Le=Re.holes,lt=!Eu.isClockWise(We);if(lt)for(We=We.reverse(),Se=0,Te=Le.length;Se<Te;Se++)ue=Le[Se],Eu.isClockWise(ue)&&(Le[Se]=ue.reverse());var st=Eu.triangulateShape(We,Le),De=We;for(Se=0,Te=Le.length;Se<Te;Se++)ue=Le[Se],We=We.concat(ue);function et(d,m,_){return m||console.error("THREE.ExtrudeGeometry: vec does not exist"),m.clone().multiplyScalar(_).add(d)}var Ke,Ct,dt,Et,ut,Wt=We.length,Nt,ci=st.length;function Yt(d,m,_){var S,k,I,L=d.x-m.x,N=d.y-m.y,q=_.x-d.x,W=_.y-d.y,K=L*L+N*N,G=L*W-N*q;if(Math.abs(G)>Number.EPSILON){var U=Math.sqrt(K),ae=Math.sqrt(q*q+W*W),Q=m.x-N/U,se=m.y+L/U,Y=_.x-W/ae,ee=_.y+q/ae,F=((Y-Q)*W-(ee-se)*q)/(L*W-N*q);S=Q+L*F-d.x,k=se+N*F-d.y;var J=S*S+k*k;if(J<=2)return new _t(S,k);I=Math.sqrt(J/2)}else{var re=!1;L>Number.EPSILON?q>Number.EPSILON&&(re=!0):L<-Number.EPSILON?q<-Number.EPSILON&&(re=!0):Math.sign(N)===Math.sign(W)&&(re=!0),re?(S=-N,k=L,I=Math.sqrt(K)):(S=L,k=N,I=Math.sqrt(K/2))}return new _t(S/I,k/I)}for(var Pe=[],pe=0,bt=De.length,wt=bt-1,Gt=pe+1;pe<bt;pe++,wt++,Gt++)wt===bt&&(wt=0),Gt===bt&&(Gt=0),Pe[pe]=Yt(De[pe],De[wt],De[Gt]);var Ft=[],V,te=Pe.concat();for(Se=0,Te=Le.length;Se<Te;Se++){for(ue=Le[Se],V=[],pe=0,bt=ue.length,wt=bt-1,Gt=pe+1;pe<bt;pe++,wt++,Gt++)wt===bt&&(wt=0),Gt===bt&&(Gt=0),V[pe]=Yt(ue[pe],ue[wt],ue[Gt]);Ft.push(V),te=te.concat(V)}for(Ke=0;Ke<D;Ke++){for(dt=Ke/D,Et=P*Math.cos(dt*Math.PI/2),Ct=w*Math.sin(dt*Math.PI/2)+T,pe=0,bt=De.length;pe<bt;pe++)ut=et(De[pe],Pe[pe],Ct),Xe(ut.x,ut.y,-Et);for(Se=0,Te=Le.length;Se<Te;Se++)for(ue=Le[Se],V=Ft[Se],pe=0,bt=ue.length;pe<bt;pe++)ut=et(ue[pe],V[pe],Ct),Xe(ut.x,ut.y,-Et)}for(Ct=w+T,pe=0;pe<Wt;pe++)ut=A?et(We[pe],te[pe],Ct):We[pe],x?($.copy(Z.normals[0]).multiplyScalar(ut.x),de.copy(Z.binormals[0]).multiplyScalar(ut.y),me.copy(O[0]).add($).add(de),Xe(me.x,me.y,me.z)):Xe(ut.x,ut.y,0);var fe;for(fe=1;fe<=g;fe++)for(pe=0;pe<Wt;pe++)ut=A?et(We[pe],te[pe],Ct):We[pe],x?($.copy(Z.normals[fe]).multiplyScalar(ut.x),de.copy(Z.binormals[fe]).multiplyScalar(ut.y),me.copy(O[fe]).add($).add(de),Xe(me.x,me.y,me.z)):Xe(ut.x,ut.y,v/g*fe);for(Ke=D-1;Ke>=0;Ke--){for(dt=Ke/D,Et=P*Math.cos(dt*Math.PI/2),Ct=w*Math.sin(dt*Math.PI/2)+T,pe=0,bt=De.length;pe<bt;pe++)ut=et(De[pe],Pe[pe],Ct),Xe(ut.x,ut.y,v+Et);for(Se=0,Te=Le.length;Se<Te;Se++)for(ue=Le[Se],V=Ft[Se],pe=0,bt=ue.length;pe<bt;pe++)ut=et(ue[pe],V[pe],Ct),x?Xe(ut.x,ut.y+O[g-1].y,O[g-1].x+Et):Xe(ut.x,ut.y,v+Et)}_e(),ke();function _e(){var d=n.length/3;if(A){var m=0,_=Wt*m;for(pe=0;pe<ci;pe++)Nt=st[pe],rt(Nt[2]+_,Nt[1]+_,Nt[0]+_);for(m=g+D*2,_=Wt*m,pe=0;pe<ci;pe++)Nt=st[pe],rt(Nt[0]+_,Nt[1]+_,Nt[2]+_)}else{for(pe=0;pe<ci;pe++)Nt=st[pe],rt(Nt[2],Nt[1],Nt[0]);for(pe=0;pe<ci;pe++)Nt=st[pe],rt(Nt[0]+Wt*g,Nt[1]+Wt*g,Nt[2]+Wt*g)}t.addGroup(d,n.length/3-d,0)}function ke(){var d=n.length/3,m=0;for($e(De,m),m+=De.length,Se=0,Te=Le.length;Se<Te;Se++)ue=Le[Se],$e(ue,m),m+=ue.length;t.addGroup(d,n.length/3-d,1)}function $e(d,m){var _,S;for(pe=d.length;--pe>=0;){_=pe,S=pe-1,S<0&&(S=d.length-1);var k=0,I=g+D*2;for(k=0;k<I;k++){var L=Wt*k,N=Wt*(k+1),q=m+_+L,W=m+S+L,K=m+S+N,G=m+_+N;Dn(q,W,K,G)}}}function Xe(d,m,_){c.push(d),c.push(m),c.push(_)}function rt(d,m,_){Xt(d),Xt(m),Xt(_);var S=n.length/3,k=B.generateTopUV(t,n,S-3,S-2,S-1);u(k[0]),u(k[1]),u(k[2])}function Dn(d,m,_,S){Xt(d),Xt(m),Xt(S),Xt(m),Xt(_),Xt(S);var k=n.length/3,I=B.generateSideWallUV(t,n,k-6,k-3,k-2,k-1);u(I[0]),u(I[1]),u(I[3]),u(I[1]),u(I[2]),u(I[3])}function Xt(d){n.push(c[d*3+0]),n.push(c[d*3+1]),n.push(c[d*3+2])}function u(d){s.push(d.x),s.push(d.y)}}}Kh.prototype=Object.create(Zt.prototype);Kh.prototype.constructor=Kh;Kh.prototype.toJSON=function(){var i=Zt.prototype.toJSON.call(this),e=this.parameters.shapes,t=this.parameters.options;return K3(e,t,i)};var Gse={generateTopUV:function(i,e,t,n,s){var r=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],h=e[s*3],c=e[s*3+1];return[new _t(r,a),new _t(o,l),new _t(h,c)]},generateSideWallUV:function(i,e,t,n,s,r){var a=e[t*3],o=e[t*3+1],l=e[t*3+2],h=e[n*3],c=e[n*3+1],f=e[n*3+2],g=e[s*3],v=e[s*3+1],A=e[s*3+2],P=e[r*3],w=e[r*3+1],T=e[r*3+2];return Math.abs(o-c)<.01?[new _t(a,1-l),new _t(h,1-f),new _t(g,1-A),new _t(P,1-T)]:[new _t(o,1-l),new _t(c,1-f),new _t(v,1-A),new _t(w,1-T)]}};function K3(i,e,t){if(t.shapes=[],Array.isArray(i))for(var n=0,s=i.length;n<s;n++){var r=i[n];t.shapes.push(r.uuid)}else t.shapes.push(i.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}function gb(i,e){Gi.call(this),this.type="TextGeometry",this.parameters={text:i,parameters:e},this.fromBufferGeometry(new Rg(i,e)),this.mergeVertices()}gb.prototype=Object.create(Gi.prototype);gb.prototype.constructor=gb;function Rg(i,e){e=e||{};var t=e.font;if(!(t&&t.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Gi;var n=t.generateShapes(i,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),Kh.call(this,n,e),this.type="TextBufferGeometry"}Rg.prototype=Object.create(Kh.prototype);Rg.prototype.constructor=Rg;function hf(i,e,t,n,s,r,a){Gi.call(this),this.type="SphereGeometry",this.parameters={radius:i,widthSegments:e,heightSegments:t,phiStart:n,phiLength:s,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new rd(i,e,t,n,s,r,a)),this.mergeVertices()}hf.prototype=Object.create(Gi.prototype);hf.prototype.constructor=hf;function rd(i,e,t,n,s,r,a){Zt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:i,widthSegments:e,heightSegments:t,phiStart:n,phiLength:s,thetaStart:r,thetaLength:a},i=i||1,e=Math.max(3,Math.floor(e)||8),t=Math.max(2,Math.floor(t)||6),n=n!==void 0?n:0,s=s!==void 0?s:Math.PI*2,r=r!==void 0?r:0,a=a!==void 0?a:Math.PI;var o=r+a,l,h,c=0,f=[],g=new Ae,v=new Ae,A=[],P=[],w=[],T=[];for(h=0;h<=t;h++){var D=[],M=h/t,B=h==0?.5/e:h==t?-.5/e:0;for(l=0;l<=e;l++){var O=l/e;g.x=-i*Math.cos(n+O*s)*Math.sin(r+M*a),g.y=i*Math.cos(r+M*a),g.z=i*Math.sin(n+O*s)*Math.sin(r+M*a),P.push(g.x,g.y,g.z),v.copy(g).normalize(),w.push(v.x,v.y,v.z),T.push(O+B,1-M),D.push(c++)}f.push(D)}for(h=0;h<t;h++)for(l=0;l<e;l++){var x=f[h][l+1],Z=f[h][l],de=f[h+1][l],$=f[h+1][l+1];(h!==0||r>0)&&A.push(x,Z,$),(h!==t-1||o<Math.PI)&&A.push(Z,de,$)}this.setIndex(A),this.addAttribute("position",new ni(P,3)),this.addAttribute("normal",new ni(w,3)),this.addAttribute("uv",new ni(T,2))}rd.prototype=Object.create(Zt.prototype);rd.prototype.constructor=rd;function yb(i,e,t,n,s,r){Gi.call(this),this.type="RingGeometry",this.parameters={innerRadius:i,outerRadius:e,thetaSegments:t,phiSegments:n,thetaStart:s,thetaLength:r},this.fromBufferGeometry(new Bg(i,e,t,n,s,r)),this.mergeVertices()}yb.prototype=Object.create(Gi.prototype);yb.prototype.constructor=yb;function Bg(i,e,t,n,s,r){Zt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:i,outerRadius:e,thetaSegments:t,phiSegments:n,thetaStart:s,thetaLength:r},i=i||.5,e=e||1,s=s!==void 0?s:0,r=r!==void 0?r:Math.PI*2,t=t!==void 0?Math.max(3,t):8,n=n!==void 0?Math.max(1,n):1;var a=[],o=[],l=[],h=[],c,f=i,g=(e-i)/n,v=new Ae,A=new _t,P,w;for(P=0;P<=n;P++){for(w=0;w<=t;w++)c=s+w/t*r,v.x=f*Math.cos(c),v.y=f*Math.sin(c),o.push(v.x,v.y,v.z),l.push(0,0,1),A.x=(v.x/e+1)/2,A.y=(v.y/e+1)/2,h.push(A.x,A.y);f+=g}for(P=0;P<n;P++){var T=P*(t+1);for(w=0;w<t;w++){c=w+T;var D=c,M=c+t+1,B=c+t+2,O=c+1;a.push(D,M,O),a.push(M,B,O)}}this.setIndex(a),this.addAttribute("position",new ni(o,3)),this.addAttribute("normal",new ni(l,3)),this.addAttribute("uv",new ni(h,2))}Bg.prototype=Object.create(Zt.prototype);Bg.prototype.constructor=Bg;function vb(i,e,t,n){Gi.call(this),this.type="LatheGeometry",this.parameters={points:i,segments:e,phiStart:t,phiLength:n},this.fromBufferGeometry(new qg(i,e,t,n)),this.mergeVertices()}vb.prototype=Object.create(Gi.prototype);vb.prototype.constructor=vb;function qg(i,e,t,n){Zt.call(this),this.type="LatheBufferGeometry",this.parameters={points:i,segments:e,phiStart:t,phiLength:n},e=Math.floor(e)||12,t=t||0,n=n||Math.PI*2,n=tn.clamp(n,0,Math.PI*2);var s=[],r=[],a=[],o,l=1/e,h=new Ae,c=new _t,f,g;for(f=0;f<=e;f++){var v=t+f*l*n,A=Math.sin(v),P=Math.cos(v);for(g=0;g<=i.length-1;g++)h.x=i[g].x*A,h.y=i[g].y,h.z=i[g].x*P,r.push(h.x,h.y,h.z),c.x=f/e,c.y=g/(i.length-1),a.push(c.x,c.y)}for(f=0;f<e;f++)for(g=0;g<i.length-1;g++){o=g+f*i.length;var w=o,T=o+i.length,D=o+i.length+1,M=o+1;s.push(w,T,M),s.push(T,D,M)}if(this.setIndex(s),this.addAttribute("position",new ni(r,3)),this.addAttribute("uv",new ni(a,2)),this.computeVertexNormals(),n===Math.PI*2){var B=this.attributes.normal.array,O=new Ae,x=new Ae,Z=new Ae;for(o=e*i.length*3,f=0,g=0;f<i.length;f++,g+=3)O.x=B[g+0],O.y=B[g+1],O.z=B[g+2],x.x=B[o+g+0],x.y=B[o+g+1],x.z=B[o+g+2],Z.addVectors(O,x).normalize(),B[g+0]=B[o+g+0]=Z.x,B[g+1]=B[o+g+1]=Z.y,B[g+2]=B[o+g+2]=Z.z}}qg.prototype=Object.create(Zt.prototype);qg.prototype.constructor=qg;function uf(i,e){Gi.call(this),this.type="ShapeGeometry",typeof e=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:i,curveSegments:e},this.fromBufferGeometry(new cf(i,e)),this.mergeVertices()}uf.prototype=Object.create(Gi.prototype);uf.prototype.constructor=uf;uf.prototype.toJSON=function(){var i=Gi.prototype.toJSON.call(this),e=this.parameters.shapes;return Y3(e,i)};function cf(i,e){Zt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:i,curveSegments:e},e=e||12;var t=[],n=[],s=[],r=[],a=0,o=0;if(Array.isArray(i)===!1)h(i);else for(var l=0;l<i.length;l++)h(i[l]),this.addGroup(a,o,l),a+=o,o=0;this.setIndex(t),this.addAttribute("position",new ni(n,3)),this.addAttribute("normal",new ni(s,3)),this.addAttribute("uv",new ni(r,2));function h(c){var f,g,v,A=n.length/3,P=c.extractPoints(e),w=P.shape,T=P.holes;for(Eu.isClockWise(w)===!1&&(w=w.reverse()),f=0,g=T.length;f<g;f++)v=T[f],Eu.isClockWise(v)===!0&&(T[f]=v.reverse());var D=Eu.triangulateShape(w,T);for(f=0,g=T.length;f<g;f++)v=T[f],w=w.concat(v);for(f=0,g=w.length;f<g;f++){var M=w[f];n.push(M.x,M.y,0),s.push(0,0,1),r.push(M.x,M.y)}for(f=0,g=D.length;f<g;f++){var B=D[f],O=B[0]+A,x=B[1]+A,Z=B[2]+A;t.push(O,x,Z),o+=3}}}cf.prototype=Object.create(Zt.prototype);cf.prototype.constructor=cf;cf.prototype.toJSON=function(){var i=Zt.prototype.toJSON.call(this),e=this.parameters.shapes;return Y3(e,i)};function Y3(i,e){if(e.shapes=[],Array.isArray(i))for(var t=0,n=i.length;t<n;t++){var s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}function bb(i,e){Zt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=e!==void 0?e:1;var t=[],n=Math.cos(tn.DEG2RAD*e),s=[0,0],r={},a,o,l,h=["a","b","c"],c;i.isBufferGeometry?(c=new Gi,c.fromBufferGeometry(i)):c=i.clone(),c.mergeVertices(),c.computeFaceNormals();for(var f=c.vertices,g=c.faces,v=0,A=g.length;v<A;v++)for(var P=g[v],w=0;w<3;w++)a=P[h[w]],o=P[h[(w+1)%3]],s[0]=Math.min(a,o),s[1]=Math.max(a,o),l=s[0]+","+s[1],r[l]===void 0?r[l]={index1:s[0],index2:s[1],face1:v,face2:void 0}:r[l].face2=v;for(l in r){var T=r[l];if(T.face2===void 0||g[T.face1].normal.dot(g[T.face2].normal)<=n){var D=f[T.index1];t.push(D.x,D.y,D.z),D=f[T.index2],t.push(D.x,D.y,D.z)}}this.addAttribute("position",new ni(t,3))}bb.prototype=Object.create(Zt.prototype);bb.prototype.constructor=bb;function df(i,e,t,n,s,r,a,o){Gi.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:i,radiusBottom:e,height:t,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Ru(i,e,t,n,s,r,a,o)),this.mergeVertices()}df.prototype=Object.create(Gi.prototype);df.prototype.constructor=df;function Ru(i,e,t,n,s,r,a,o){Zt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:i,radiusBottom:e,height:t,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:o};var l=this;i=i!==void 0?i:1,e=e!==void 0?e:1,t=t||1,n=Math.floor(n)||8,s=Math.floor(s)||1,r=r!==void 0?r:!1,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI*2;var h=[],c=[],f=[],g=[],v=0,A=[],P=t/2,w=0;T(),r===!1&&(i>0&&D(!0),e>0&&D(!1)),this.setIndex(h),this.addAttribute("position",new ni(c,3)),this.addAttribute("normal",new ni(f,3)),this.addAttribute("uv",new ni(g,2));function T(){var M,B,O=new Ae,x=new Ae,Z=0,de=(e-i)/t;for(B=0;B<=s;B++){var $=[],me=B/s,ue=me*(e-i)+i;for(M=0;M<=n;M++){var Se=M/n,Te=Se*o+a,Re=Math.sin(Te),We=Math.cos(Te);x.x=ue*Re,x.y=-me*t+P,x.z=ue*We,c.push(x.x,x.y,x.z),O.set(Re,de,We).normalize(),f.push(O.x,O.y,O.z),g.push(Se,1-me),$.push(v++)}A.push($)}for(M=0;M<n;M++)for(B=0;B<s;B++){var Le=A[B][M],lt=A[B+1][M],st=A[B+1][M+1],De=A[B][M+1];h.push(Le,lt,De),h.push(lt,st,De),Z+=6}l.addGroup(w,Z,0),w+=Z}function D(M){var B,O,x,Z=new _t,de=new Ae,$=0,me=M===!0?i:e,ue=M===!0?1:-1;for(O=v,B=1;B<=n;B++)c.push(0,P*ue,0),f.push(0,ue,0),g.push(.5,.5),v++;for(x=v,B=0;B<=n;B++){var Se=B/n,Te=Se*o+a,Re=Math.cos(Te),We=Math.sin(Te);de.x=me*We,de.y=P*ue,de.z=me*Re,c.push(de.x,de.y,de.z),f.push(0,ue,0),Z.x=Re*.5+.5,Z.y=We*.5*ue+.5,g.push(Z.x,Z.y),v++}for(B=0;B<n;B++){var Le=O+B,lt=x+B;M===!0?h.push(lt,lt+1,Le):h.push(lt+1,lt,Le),$+=3}l.addGroup(w,$,M===!0?1:2),w+=$}}Ru.prototype=Object.create(Zt.prototype);Ru.prototype.constructor=Ru;function _b(i,e,t,n,s,r,a){df.call(this,0,i,e,t,n,s,r,a),this.type="ConeGeometry",this.parameters={radius:i,height:e,radialSegments:t,heightSegments:n,openEnded:s,thetaStart:r,thetaLength:a}}_b.prototype=Object.create(df.prototype);_b.prototype.constructor=_b;function Ab(i,e,t,n,s,r,a){Ru.call(this,0,i,e,t,n,s,r,a),this.type="ConeBufferGeometry",this.parameters={radius:i,height:e,radialSegments:t,heightSegments:n,openEnded:s,thetaStart:r,thetaLength:a}}Ab.prototype=Object.create(Ru.prototype);Ab.prototype.constructor=Ab;function wb(i,e,t,n){Gi.call(this),this.type="CircleGeometry",this.parameters={radius:i,segments:e,thetaStart:t,thetaLength:n},this.fromBufferGeometry(new zg(i,e,t,n)),this.mergeVertices()}wb.prototype=Object.create(Gi.prototype);wb.prototype.constructor=wb;function zg(i,e,t,n){Zt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:i,segments:e,thetaStart:t,thetaLength:n},i=i||1,e=e!==void 0?Math.max(3,e):8,t=t!==void 0?t:0,n=n!==void 0?n:Math.PI*2;var s=[],r=[],a=[],o=[],l,h,c=new Ae,f=new _t;for(r.push(0,0,0),a.push(0,0,1),o.push(.5,.5),h=0,l=3;h<=e;h++,l+=3){var g=t+h/e*n;c.x=i*Math.cos(g),c.y=i*Math.sin(g),r.push(c.x,c.y,c.z),a.push(0,0,1),f.x=(r[l]/i+1)/2,f.y=(r[l+1]/i+1)/2,o.push(f.x,f.y)}for(l=1;l<=e;l++)s.push(l,l+1,0);this.setIndex(s),this.addAttribute("position",new ni(r,3)),this.addAttribute("normal",new ni(a,3)),this.addAttribute("uv",new ni(o,2))}zg.prototype=Object.create(Zt.prototype);zg.prototype.constructor=zg;var oa=Object.freeze({WireframeGeometry:rb,ParametricGeometry:ab,ParametricBufferGeometry:Eg,TetrahedronGeometry:lb,TetrahedronBufferGeometry:Vg,OctahedronGeometry:hb,OctahedronBufferGeometry:af,IcosahedronGeometry:ub,IcosahedronBufferGeometry:kg,DodecahedronGeometry:cb,DodecahedronBufferGeometry:Cg,PolyhedronGeometry:ob,PolyhedronBufferGeometry:ao,TubeGeometry:db,TubeBufferGeometry:of,TorusKnotGeometry:pb,TorusKnotBufferGeometry:Dg,TorusGeometry:fb,TorusBufferGeometry:Ig,TextGeometry:gb,TextBufferGeometry:Rg,SphereGeometry:hf,SphereBufferGeometry:rd,RingGeometry:yb,RingBufferGeometry:Bg,PlaneGeometry:Jv,PlaneBufferGeometry:sf,LatheGeometry:vb,LatheBufferGeometry:qg,ShapeGeometry:uf,ShapeBufferGeometry:cf,ExtrudeGeometry:lf,ExtrudeBufferGeometry:Kh,EdgesGeometry:bb,ConeGeometry:_b,ConeBufferGeometry:Ab,CylinderGeometry:df,CylinderBufferGeometry:Ru,CircleGeometry:wb,CircleBufferGeometry:zg,BoxGeometry:Qv,BoxBufferGeometry:nf});function pf(i){nn.call(this),this.type="ShadowMaterial",this.color=new wi(0),this.transparent=!0,this.setValues(i)}pf.prototype=Object.create(nn.prototype);pf.prototype.constructor=pf;pf.prototype.isShadowMaterial=!0;pf.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.color.copy(i.color),this};function Fg(i){ro.call(this,i),this.type="RawShaderMaterial"}Fg.prototype=Object.create(ro.prototype);Fg.prototype.constructor=Fg;Fg.prototype.isRawShaderMaterial=!0;function Yh(i){nn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new wi(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=y_,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}Yh.prototype=Object.create(nn.prototype);Yh.prototype.constructor=Yh;Yh.prototype.isMeshStandardMaterial=!0;Yh.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.defines={STANDARD:""},this.color.copy(i.color),this.roughness=i.roughness,this.metalness=i.metalness,this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.roughnessMap=i.roughnessMap,this.metalnessMap=i.metalnessMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.envMapIntensity=i.envMapIntensity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this};function ff(i){Yh.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(i)}ff.prototype=Object.create(Yh.prototype);ff.prototype.constructor=ff;ff.prototype.isMeshPhysicalMaterial=!0;ff.prototype.copy=function(i){return Yh.prototype.copy.call(this,i),this.defines={PHYSICAL:""},this.reflectivity=i.reflectivity,this.clearCoat=i.clearCoat,this.clearCoatRoughness=i.clearCoatRoughness,this};function Ql(i){nn.call(this),this.type="MeshPhongMaterial",this.color=new wi(16777215),this.specular=new wi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=y_,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=m_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}Ql.prototype=Object.create(nn.prototype);Ql.prototype.constructor=Ql;Ql.prototype.isMeshPhongMaterial=!0;Ql.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.color.copy(i.color),this.specular.copy(i.specular),this.shininess=i.shininess,this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.specularMap=i.specularMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.combine=i.combine,this.reflectivity=i.reflectivity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this};function mf(i){Ql.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(i)}mf.prototype=Object.create(Ql.prototype);mf.prototype.constructor=mf;mf.prototype.isMeshToonMaterial=!0;mf.prototype.copy=function(i){return Ql.prototype.copy.call(this,i),this.gradientMap=i.gradientMap,this};function gf(i){nn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=y_,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}gf.prototype=Object.create(nn.prototype);gf.prototype.constructor=gf;gf.prototype.isMeshNormalMaterial=!0;gf.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this};function yf(i){nn.call(this),this.type="MeshLambertMaterial",this.color=new wi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=m_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}yf.prototype=Object.create(nn.prototype);yf.prototype.constructor=yf;yf.prototype.isMeshLambertMaterial=!0;yf.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.color.copy(i.color),this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.specularMap=i.specularMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.combine=i.combine,this.reflectivity=i.reflectivity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this};function vf(i){nn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new wi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=y_,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(i)}vf.prototype=Object.create(nn.prototype);vf.prototype.constructor=vf;vf.prototype.isMeshMatcapMaterial=!0;vf.prototype.copy=function(i){return nn.prototype.copy.call(this,i),this.defines={MATCAP:""},this.color.copy(i.color),this.matcap=i.matcap,this.map=i.map,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.alphaMap=i.alphaMap,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this};function Fl(i){yn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(i)}Fl.prototype=Object.create(yn.prototype);Fl.prototype.constructor=Fl;Fl.prototype.isLineDashedMaterial=!0;Fl.prototype.copy=function(i){return yn.prototype.copy.call(this,i),this.scale=i.scale,this.dashSize=i.dashSize,this.gapSize=i.gapSize,this};var Wse=Object.freeze({ShadowMaterial:pf,SpriteMaterial:nd,RawShaderMaterial:Fg,ShaderMaterial:ro,PointsMaterial:sd,MeshPhysicalMaterial:ff,MeshStandardMaterial:Yh,MeshPhongMaterial:Ql,MeshToonMaterial:mf,MeshNormalMaterial:gf,MeshLambertMaterial:yf,MeshDepthMaterial:td,MeshDistanceMaterial:id,MeshBasicMaterial:ya,MeshMatcapMaterial:vf,LineDashedMaterial:Fl,LineBasicMaterial:yn,Material:nn}),Ir={arraySlice:function(i,e,t){return Ir.isTypedArray(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)},convertArray:function(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)},isTypedArray:function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},getKeyframeOrder:function(i){function e(r,a){return i[r]-i[a]}for(var t=i.length,n=new Array(t),s=0;s!==t;++s)n[s]=s;return n.sort(e),n},sortedArray:function(i,e,t){for(var n=i.length,s=new i.constructor(n),r=0,a=0;a!==n;++r)for(var o=t[r]*e,l=0;l!==e;++l)s[a++]=i[o+l];return s},flattenJSON:function(i,e,t,n){for(var s=1,r=i[0];r!==void 0&&r[n]===void 0;)r=i[s++];if(r!==void 0){var a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(e.push(r.time),t.push.apply(t,a)),r=i[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(e.push(r.time),a.toArray(t,t.length)),r=i[s++];while(r!==void 0);else do a=r[n],a!==void 0&&(e.push(r.time),t.push(a)),r=i[s++];while(r!==void 0)}}};function Io(i,e,t,n){this.parameterPositions=i,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new e.constructor(t),this.sampleValues=e,this.valueSize=t}Object.assign(Io.prototype,{evaluate:function(i){var e=this.parameterPositions,t=this._cachedIndex,n=e[t],s=e[t-1];e:{t:{var r;i:{n:if(!(i<n)){for(var a=t+2;;){if(n===void 0){if(i<s)break n;return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,i,s)}if(t===a)break;if(s=n,n=e[++t],i<n)break t}r=e.length;break i}if(!(i>=s)){var o=e[1];i<o&&(t=2,s=o);for(var a=t-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,i,n);if(t===a)break;if(n=s,s=e[--t-1],i>=s)break t}r=t,t=0;break i}break e}for(;t<r;){var l=t+r>>>1;i<e[l]?r=l:t=l+1}if(n=e[t],s=e[t-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,i,n);if(n===void 0)return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,s,i)}this._cachedIndex=t,this.intervalChanged_(t,s,n)}return this.interpolate_(t,s,i,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(i){for(var e=this.resultBuffer,t=this.sampleValues,n=this.valueSize,s=i*n,r=0;r!==n;++r)e[r]=t[s+r];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Io.prototype,{beforeStart_:Io.prototype.copySampleValue_,afterEnd_:Io.prototype.copySampleValue_});function Pw(i,e,t,n){Io.call(this,i,e,t,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}Pw.prototype=Object.assign(Object.create(Io.prototype),{constructor:Pw,DefaultSettings_:{endingStart:$p,endingEnd:$p},intervalChanged_:function(i,e,t){var n=this.parameterPositions,s=i-2,r=i+1,a=n[s],o=n[r];if(a===void 0)switch(this.getSettings_().endingStart){case dp:s=i,a=2*e-t;break;case Yv:s=n.length-2,a=e+n[s]-n[s+1];break;default:s=i,a=t}if(o===void 0)switch(this.getSettings_().endingEnd){case dp:r=i,o=2*t-e;break;case Yv:r=1,o=t+n[1]-n[0];break;default:r=i-1,o=e}var l=(t-e)*.5,h=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(o-t),this._offsetPrev=s*h,this._offsetNext=r*h},interpolate_:function(i,e,t,n){for(var s=this.resultBuffer,r=this.sampleValues,a=this.valueSize,o=i*a,l=o-a,h=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,g=this._weightNext,v=(t-e)/(n-e),A=v*v,P=A*v,w=-f*P+2*f*A-f*v,T=(1+f)*P+(-1.5-2*f)*A+(-.5+f)*v+1,D=(-1-g)*P+(1.5+g)*A+.5*v,M=g*P-g*A,B=0;B!==a;++B)s[B]=w*r[h+B]+T*r[l+B]+D*r[o+B]+M*r[c+B];return s}});function Sb(i,e,t,n){Io.call(this,i,e,t,n)}Sb.prototype=Object.assign(Object.create(Io.prototype),{constructor:Sb,interpolate_:function(i,e,t,n){for(var s=this.resultBuffer,r=this.sampleValues,a=this.valueSize,o=i*a,l=o-a,h=(t-e)/(n-e),c=1-h,f=0;f!==a;++f)s[f]=r[l+f]*c+r[o+f]*h;return s}});function Tw(i,e,t,n){Io.call(this,i,e,t,n)}Tw.prototype=Object.assign(Object.create(Io.prototype),{constructor:Tw,interpolate_:function(i){return this.copySampleValue_(i-1)}});function ta(i,e,t,n){if(i===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+i);this.name=i,this.times=Ir.convertArray(e,this.TimeBufferType),this.values=Ir.convertArray(t,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}Object.assign(ta,{toJSON:function(i){var e=i.constructor,t;if(e.toJSON!==void 0)t=e.toJSON(i);else{t={name:i.name,times:Ir.convertArray(i.times,Array),values:Ir.convertArray(i.values,Array)};var n=i.getInterpolation();n!==i.DefaultInterpolation&&(t.interpolation=n)}return t.type=i.ValueTypeName,t}});Object.assign(ta.prototype,{constructor:ta,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Qy,InterpolantFactoryMethodDiscrete:function(i){return new Tw(this.times,this.values,this.getValueSize(),i)},InterpolantFactoryMethodLinear:function(i){return new Sb(this.times,this.values,this.getValueSize(),i)},InterpolantFactoryMethodSmooth:function(i){return new Pw(this.times,this.values,this.getValueSize(),i)},setInterpolation:function(i){var e;switch(i){case Kv:e=this.InterpolantFactoryMethodDiscrete;break;case Qy:e=this.InterpolantFactoryMethodLinear;break;case KA:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){var t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(i!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Kv;case this.InterpolantFactoryMethodLinear:return Qy;case this.InterpolantFactoryMethodSmooth:return KA}},getValueSize:function(){return this.values.length/this.times.length},shift:function(i){if(i!==0)for(var e=this.times,t=0,n=e.length;t!==n;++t)e[t]+=i;return this},scale:function(i){if(i!==1)for(var e=this.times,t=0,n=e.length;t!==n;++t)e[t]*=i;return this},trim:function(i,e){for(var t=this.times,n=t.length,s=0,r=n-1;s!==n&&t[s]<i;)++s;for(;r!==-1&&t[r]>e;)--r;if(++r,s!==0||r!==n){s>=r&&(r=Math.max(r,1),s=r-1);var a=this.getValueSize();this.times=Ir.arraySlice(t,s,r),this.values=Ir.arraySlice(this.values,s*a,r*a)}return this},validate:function(){var i=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),i=!1);var t=this.times,n=this.values,s=t.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),i=!1);for(var r=null,a=0;a!==s;a++){var o=t[a];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),i=!1;break}if(r!==null&&r>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,r),i=!1;break}r=o}if(n!==void 0&&Ir.isTypedArray(n))for(var a=0,l=n.length;a!==l;++a){var h=n[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),i=!1;break}}return i},optimize:function(){for(var i=this.times,e=this.values,t=this.getValueSize(),n=this.getInterpolation()===KA,s=1,r=i.length-1,a=1;a<r;++a){var o=!1,l=i[a],h=i[a+1];if(l!==h&&(a!==1||l!==l[0]))if(n)o=!0;else for(var c=a*t,f=c-t,g=c+t,v=0;v!==t;++v){var A=e[c+v];if(A!==e[f+v]||A!==e[g+v]){o=!0;break}}if(o){if(a!==s){i[s]=i[a];for(var P=a*t,w=s*t,v=0;v!==t;++v)e[w+v]=e[P+v]}++s}}if(r>0){i[s]=i[r];for(var P=r*t,w=s*t,v=0;v!==t;++v)e[w+v]=e[P+v];++s}return s!==i.length&&(this.times=Ir.arraySlice(i,0,s),this.values=Ir.arraySlice(e,0,s*t)),this},clone:function(){var i=Ir.arraySlice(this.times,0),e=Ir.arraySlice(this.values,0),t=this.constructor,n=new t(this.name,i,e);return n.createInterpolant=this.createInterpolant,n}});function xw(i,e,t){ta.call(this,i,e,t)}xw.prototype=Object.assign(Object.create(ta.prototype),{constructor:xw,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Kv,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Ew(i,e,t,n){ta.call(this,i,e,t,n)}Ew.prototype=Object.assign(Object.create(ta.prototype),{constructor:Ew,ValueTypeName:"color"});function Hg(i,e,t,n){ta.call(this,i,e,t,n)}Hg.prototype=Object.assign(Object.create(ta.prototype),{constructor:Hg,ValueTypeName:"number"});function Vw(i,e,t,n){Io.call(this,i,e,t,n)}Vw.prototype=Object.assign(Object.create(Io.prototype),{constructor:Vw,interpolate_:function(i,e,t,n){for(var s=this.resultBuffer,r=this.sampleValues,a=this.valueSize,o=i*a,l=(t-e)/(n-e),h=o+a;o!==h;o+=4)wr.slerpFlat(s,0,r,o-a,r,o,l);return s}});function Pb(i,e,t,n){ta.call(this,i,e,t,n)}Pb.prototype=Object.assign(Object.create(ta.prototype),{constructor:Pb,ValueTypeName:"quaternion",DefaultInterpolation:Qy,InterpolantFactoryMethodLinear:function(i){return new Vw(this.times,this.values,this.getValueSize(),i)},InterpolantFactoryMethodSmooth:void 0});function kw(i,e,t,n){ta.call(this,i,e,t,n)}kw.prototype=Object.assign(Object.create(ta.prototype),{constructor:kw,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Kv,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Ug(i,e,t,n){ta.call(this,i,e,t,n)}Ug.prototype=Object.assign(Object.create(ta.prototype),{constructor:Ug,ValueTypeName:"vector"});function sl(i,e,t){this.name=i,this.tracks=t,this.duration=e!==void 0?e:-1,this.uuid=tn.generateUUID(),this.duration<0&&this.resetDuration()}function Kse(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hg;case"vector":case"vector2":case"vector3":case"vector4":return Ug;case"color":return Ew;case"quaternion":return Pb;case"bool":case"boolean":return xw;case"string":return kw}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function Yse(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=Kse(i.type);if(i.times===void 0){var t=[],n=[];Ir.flattenJSON(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}Object.assign(sl,{parse:function(i){for(var e=[],t=i.tracks,n=1/(i.fps||1),s=0,r=t.length;s!==r;++s)e.push(Yse(t[s]).scale(n));return new sl(i.name,i.duration,e)},toJSON:function(i){for(var e=[],t=i.tracks,n={name:i.name,duration:i.duration,tracks:e,uuid:i.uuid},s=0,r=t.length;s!==r;++s)e.push(ta.toJSON(t[s]));return n},CreateFromMorphTargetSequence:function(i,e,t,n){for(var s=e.length,r=[],a=0;a<s;a++){var o=[],l=[];o.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);var h=Ir.getKeyframeOrder(o);o=Ir.sortedArray(o,1,h),l=Ir.sortedArray(l,1,h),!n&&o[0]===0&&(o.push(s),l.push(l[0])),r.push(new Hg(".morphTargetInfluences["+e[a].name+"]",o,l).scale(1/t))}return new sl(i,-1,r)},findByName:function(i,e){var t=i;if(!Array.isArray(i)){var n=i;t=n.geometry&&n.geometry.animations||n.animations}for(var s=0;s<t.length;s++)if(t[s].name===e)return t[s];return null},CreateClipsFromMorphTargetSequences:function(i,e,t){for(var n={},s=/^([\w-]*?)([\d]+)$/,r=0,a=i.length;r<a;r++){var o=i[r],l=o.name.match(s);if(l&&l.length>1){var h=l[1],c=n[h];c||(n[h]=c=[]),c.push(o)}}var f=[];for(var h in n)f.push(sl.CreateFromMorphTargetSequence(h,n[h],e,t));return f},parseAnimation:function(i,e){if(!i)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var t=function(M,B,O,x,Z){if(O.length!==0){var de=[],$=[];Ir.flattenJSON(O,de,$,x),de.length!==0&&Z.push(new M(B,de,$))}},n=[],s=i.name||"default",r=i.length||-1,a=i.fps||30,o=i.hierarchy||[],l=0;l<o.length;l++){var h=o[l].keys;if(!(!h||h.length===0))if(h[0].morphTargets){for(var c={},f=0;f<h.length;f++)if(h[f].morphTargets)for(var g=0;g<h[f].morphTargets.length;g++)c[h[f].morphTargets[g]]=-1;for(var v in c){for(var A=[],P=[],g=0;g!==h[f].morphTargets.length;++g){var w=h[f];A.push(w.time),P.push(w.morphTarget===v?1:0)}n.push(new Hg(".morphTargetInfluence["+v+"]",A,P))}r=c.length*a}else{var T=".bones["+e[l].name+"]";t(Ug,T+".position",h,"pos",n),t(Pb,T+".quaternion",h,"rot",n),t(Ug,T+".scale",h,"scl",n)}}if(n.length===0)return null;var D=new sl(s,r,n);return D}});Object.assign(sl.prototype,{resetDuration:function(){for(var i=this.tracks,e=0,t=0,n=i.length;t!==n;++t){var s=this.tracks[t];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this},trim:function(){for(var i=0;i<this.tracks.length;i++)this.tracks[i].trim(0,this.duration);return this},validate:function(){for(var i=!0,e=0;e<this.tracks.length;e++)i=i&&this.tracks[e].validate();return i},optimize:function(){for(var i=0;i<this.tracks.length;i++)this.tracks[i].optimize();return this},clone:function(){for(var i=[],e=0;e<this.tracks.length;e++)i.push(this.tracks[e].clone());return new sl(this.name,this.duration,i)}});var bf={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};function j3(i,e,t){var n=this,s=!1,r=0,a=0,o=void 0;this.onStart=void 0,this.onLoad=i,this.onProgress=e,this.onError=t,this.itemStart=function(l){a++,s===!1&&n.onStart!==void 0&&n.onStart(l,r,a),s=!0},this.itemEnd=function(l){r++,n.onProgress!==void 0&&n.onProgress(l,r,a),r===a&&(s=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(l){n.onError!==void 0&&n.onError(l)},this.resolveURL=function(l){return o?o(l):l},this.setURLModifier=function(l){return o=l,this}}var ho=new j3,jo={};function Jh(i){this.manager=i!==void 0?i:ho}Object.assign(Jh.prototype,{load:function(i,e,t,n){i===void 0&&(i=""),this.path!==void 0&&(i=this.path+i),i=this.manager.resolveURL(i);var s=this,r=bf.get(i);if(r!==void 0)return s.manager.itemStart(i),setTimeout(function(){e&&e(r),s.manager.itemEnd(i)},0),r;if(jo[i]!==void 0){jo[i].push({onLoad:e,onProgress:t,onError:n});return}var a=/^data:(.*?)(;base64)?,(.*)$/,o=i.match(a);if(o){var l=o[1],h=!!o[2],c=o[3];c=decodeURIComponent(c),h&&(c=atob(c));try{var f,g=(this.responseType||"").toLowerCase();switch(g){case"arraybuffer":case"blob":for(var v=new Uint8Array(c.length),A=0;A<c.length;A++)v[A]=c.charCodeAt(A);g==="blob"?f=new Blob([v.buffer],{type:l}):f=v.buffer;break;case"document":var P=new DOMParser;f=P.parseFromString(c,l);break;case"json":f=JSON.parse(c);break;default:f=c;break}setTimeout(function(){e&&e(f),s.manager.itemEnd(i)},0)}catch(D){setTimeout(function(){n&&n(D),s.manager.itemError(i),s.manager.itemEnd(i)},0)}}else{jo[i]=[],jo[i].push({onLoad:e,onProgress:t,onError:n});var w=new XMLHttpRequest;w.open("GET",i,!0),w.addEventListener("load",function(D){var M=this.response;bf.add(i,M);var B=jo[i];if(delete jo[i],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var O=0,x=B.length;O<x;O++){var Z=B[O];Z.onLoad&&Z.onLoad(M)}s.manager.itemEnd(i)}else{for(var O=0,x=B.length;O<x;O++){var Z=B[O];Z.onError&&Z.onError(D)}s.manager.itemError(i),s.manager.itemEnd(i)}},!1),w.addEventListener("progress",function(D){for(var M=jo[i],B=0,O=M.length;B<O;B++){var x=M[B];x.onProgress&&x.onProgress(D)}},!1),w.addEventListener("error",function(D){var M=jo[i];delete jo[i];for(var B=0,O=M.length;B<O;B++){var x=M[B];x.onError&&x.onError(D)}s.manager.itemError(i),s.manager.itemEnd(i)},!1),w.addEventListener("abort",function(D){var M=jo[i];delete jo[i];for(var B=0,O=M.length;B<O;B++){var x=M[B];x.onError&&x.onError(D)}s.manager.itemError(i),s.manager.itemEnd(i)},!1),this.responseType!==void 0&&(w.responseType=this.responseType),this.withCredentials!==void 0&&(w.withCredentials=this.withCredentials),w.overrideMimeType&&w.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var T in this.requestHeader)w.setRequestHeader(T,this.requestHeader[T]);w.send(null)}return s.manager.itemStart(i),w},setPath:function(i){return this.path=i,this},setResponseType:function(i){return this.responseType=i,this},setWithCredentials:function(i){return this.withCredentials=i,this},setMimeType:function(i){return this.mimeType=i,this},setRequestHeader:function(i){return this.requestHeader=i,this}});function jse(i){this.manager=i!==void 0?i:ho}Object.assign(jse.prototype,{load:function(i,e,t,n){var s=this,r=new Jh(s.manager);r.setPath(s.path),r.load(i,function(a){e(s.parse(JSON.parse(a)))},t,n)},parse:function(i){for(var e=[],t=0;t<i.length;t++){var n=sl.parse(i[t]);e.push(n)}return e},setPath:function(i){return this.path=i,this}});function Xse(i){this.manager=i!==void 0?i:ho,this._parser=null}Object.assign(Xse.prototype,{load:function(i,e,t,n){var s=this,r=[],a=new xg;a.image=r;var o=new Jh(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer");function l(g){o.load(i[g],function(v){var A=s._parser(v,!0);r[g]={width:A.width,height:A.height,format:A.format,mipmaps:A.mipmaps},h+=1,h===6&&(A.mipmapCount===1&&(a.minFilter=ga),a.format=A.format,a.needsUpdate=!0,e&&e(a))},t,n)}if(Array.isArray(i))for(var h=0,c=0,f=i.length;c<f;++c)l(c);else o.load(i,function(g){var v=s._parser(g,!0);if(v.isCubemap)for(var A=v.mipmaps.length/v.mipmapCount,P=0;P<A;P++){r[P]={mipmaps:[]};for(var w=0;w<v.mipmapCount;w++)r[P].mipmaps.push(v.mipmaps[P*v.mipmapCount+w]),r[P].format=v.format,r[P].width=v.width,r[P].height=v.height}else a.image.width=v.width,a.image.height=v.height,a.mipmaps=v.mipmaps;v.mipmapCount===1&&(a.minFilter=ga),a.format=v.format,a.needsUpdate=!0,e&&e(a)},t,n);return a},setPath:function(i){return this.path=i,this}});function Qse(i){this.manager=i!==void 0?i:ho,this._parser=null}Object.assign(Qse.prototype,{load:function(i,e,t,n){var s=this,r=new tf,a=new Jh(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(i,function(o){var l=s._parser(o);l&&(l.image!==void 0?r.image=l.image:l.data!==void 0&&(r.image.width=l.width,r.image.height=l.height,r.image.data=l.data),r.wrapS=l.wrapS!==void 0?l.wrapS:Ra,r.wrapT=l.wrapT!==void 0?l.wrapT:Ra,r.magFilter=l.magFilter!==void 0?l.magFilter:ga,r.minFilter=l.minFilter!==void 0?l.minFilter:g_,r.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(r.format=l.format),l.type!==void 0&&(r.type=l.type),l.mipmaps!==void 0&&(r.mipmaps=l.mipmaps),l.mipmapCount===1&&(r.minFilter=ga),r.needsUpdate=!0,e&&e(r,l))},t,n),r},setPath:function(i){return this.path=i,this}});function v_(i){this.manager=i!==void 0?i:ho}Object.assign(v_.prototype,{crossOrigin:"anonymous",load:function(i,e,t,n){i===void 0&&(i=""),this.path!==void 0&&(i=this.path+i),i=this.manager.resolveURL(i);var s=this,r=bf.get(i);if(r!==void 0)return s.manager.itemStart(i),setTimeout(function(){e&&e(r),s.manager.itemEnd(i)},0),r;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),bf.add(i,this),e&&e(this),s.manager.itemEnd(i)}function l(h){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),n&&n(h),s.manager.itemError(i),s.manager.itemEnd(i)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),i.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(i),a.src=i,a},setCrossOrigin:function(i){return this.crossOrigin=i,this},setPath:function(i){return this.path=i,this}});function X3(i){this.manager=i!==void 0?i:ho}Object.assign(X3.prototype,{crossOrigin:"anonymous",load:function(i,e,t,n){var s=new Nu,r=new v_(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);var a=0;function o(h){r.load(i[h],function(c){s.images[h]=c,a++,a===6&&(s.needsUpdate=!0,e&&e(s))},void 0,n)}for(var l=0;l<i.length;++l)o(l);return s},setCrossOrigin:function(i){return this.crossOrigin=i,this},setPath:function(i){return this.path=i,this}});function b_(i){this.manager=i!==void 0?i:ho}Object.assign(b_.prototype,{crossOrigin:"anonymous",load:function(i,e,t,n){var s=new vs,r=new v_(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(i,function(a){s.image=a;var o=i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0;s.format=o?$c:Ou,s.needsUpdate=!0,e!==void 0&&e(s)},t,n),s},setCrossOrigin:function(i){return this.crossOrigin=i,this},setPath:function(i){return this.path=i,this}});function Ei(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Ei.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(i,e){var t=this.getUtoTmapping(i);return this.getPoint(t,e)},getPoints:function(i){i===void 0&&(i=5);for(var e=[],t=0;t<=i;t++)e.push(this.getPoint(t/i));return e},getSpacedPoints:function(i){i===void 0&&(i=5);for(var e=[],t=0;t<=i;t++)e.push(this.getPointAt(t/i));return e},getLength:function(){var i=this.getLengths();return i[i.length-1]},getLengths:function(i){if(i===void 0&&(i=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===i+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e=[],t,n=this.getPoint(0),s,r=0;for(e.push(0),s=1;s<=i;s++)t=this.getPoint(s/i),r+=t.distanceTo(n),e.push(r),n=t;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(i,e){var t=this.getLengths(),n=0,s=t.length,r;e?r=e:r=i*t[s-1];for(var a=0,o=s-1,l;a<=o;)if(n=Math.floor(a+(o-a)/2),l=t[n]-r,l<0)a=n+1;else if(l>0)o=n-1;else{o=n;break}if(n=o,t[n]===r)return n/(s-1);var h=t[n],c=t[n+1],f=c-h,g=(r-h)/f,v=(n+g)/(s-1);return v},getTangent:function(i){var e=1e-4,t=i-e,n=i+e;t<0&&(t=0),n>1&&(n=1);var s=this.getPoint(t),r=this.getPoint(n),a=r.clone().sub(s);return a.normalize()},getTangentAt:function(i){var e=this.getUtoTmapping(i);return this.getTangent(e)},computeFrenetFrames:function(i,e){var t=new Ae,n=[],s=[],r=[],a=new Ae,o=new Fi,l,h,c;for(l=0;l<=i;l++)h=l/i,n[l]=this.getTangentAt(h),n[l].normalize();s[0]=new Ae,r[0]=new Ae;var f=Number.MAX_VALUE,g=Math.abs(n[0].x),v=Math.abs(n[0].y),A=Math.abs(n[0].z);for(g<=f&&(f=g,t.set(1,0,0)),v<=f&&(f=v,t.set(0,1,0)),A<=f&&t.set(0,0,1),a.crossVectors(n[0],t).normalize(),s[0].crossVectors(n[0],a),r[0].crossVectors(n[0],s[0]),l=1;l<=i;l++)s[l]=s[l-1].clone(),r[l]=r[l-1].clone(),a.crossVectors(n[l-1],n[l]),a.length()>Number.EPSILON&&(a.normalize(),c=Math.acos(tn.clamp(n[l-1].dot(n[l]),-1,1)),s[l].applyMatrix4(o.makeRotationAxis(a,c))),r[l].crossVectors(n[l],s[l]);if(e===!0)for(c=Math.acos(tn.clamp(s[0].dot(s[i]),-1,1)),c/=i,n[0].dot(a.crossVectors(s[0],s[i]))>0&&(c=-c),l=1;l<=i;l++)s[l].applyMatrix4(o.makeRotationAxis(n[l],c*l)),r[l].crossVectors(n[l],s[l]);return{tangents:n,normals:s,binormals:r}},clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.arcLengthDivisions=i.arcLengthDivisions,this},toJSON:function(){var i={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return i.arcLengthDivisions=this.arcLengthDivisions,i.type=this.type,i},fromJSON:function(i){return this.arcLengthDivisions=i.arcLengthDivisions,this}});function Mo(i,e,t,n,s,r,a,o){Ei.call(this),this.type="EllipseCurve",this.aX=i||0,this.aY=e||0,this.xRadius=t||1,this.yRadius=n||1,this.aStartAngle=s||0,this.aEndAngle=r||2*Math.PI,this.aClockwise=a||!1,this.aRotation=o||0}Mo.prototype=Object.create(Ei.prototype);Mo.prototype.constructor=Mo;Mo.prototype.isEllipseCurve=!0;Mo.prototype.getPoint=function(i,e){for(var t=e||new _t,n=Math.PI*2,s=this.aEndAngle-this.aStartAngle,r=Math.abs(s)<Number.EPSILON;s<0;)s+=n;for(;s>n;)s-=n;s<Number.EPSILON&&(r?s=0:s=n),this.aClockwise===!0&&!r&&(s===n?s=-n:s=s-n);var a=this.aStartAngle+i*s,o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){var h=Math.cos(this.aRotation),c=Math.sin(this.aRotation),f=o-this.aX,g=l-this.aY;o=f*h-g*c+this.aX,l=f*c+g*h+this.aY}return t.set(o,l)};Mo.prototype.copy=function(i){return Ei.prototype.copy.call(this,i),this.aX=i.aX,this.aY=i.aY,this.xRadius=i.xRadius,this.yRadius=i.yRadius,this.aStartAngle=i.aStartAngle,this.aEndAngle=i.aEndAngle,this.aClockwise=i.aClockwise,this.aRotation=i.aRotation,this};Mo.prototype.toJSON=function(){var i=Ei.prototype.toJSON.call(this);return i.aX=this.aX,i.aY=this.aY,i.xRadius=this.xRadius,i.yRadius=this.yRadius,i.aStartAngle=this.aStartAngle,i.aEndAngle=this.aEndAngle,i.aClockwise=this.aClockwise,i.aRotation=this.aRotation,i};Mo.prototype.fromJSON=function(i){return Ei.prototype.fromJSON.call(this,i),this.aX=i.aX,this.aY=i.aY,this.xRadius=i.xRadius,this.yRadius=i.yRadius,this.aStartAngle=i.aStartAngle,this.aEndAngle=i.aEndAngle,this.aClockwise=i.aClockwise,this.aRotation=i.aRotation,this};function Gg(i,e,t,n,s,r){Mo.call(this,i,e,t,t,n,s,r),this.type="ArcCurve"}Gg.prototype=Object.create(Mo.prototype);Gg.prototype.constructor=Gg;Gg.prototype.isArcCurve=!0;function gP(){var i=0,e=0,t=0,n=0;function s(r,a,o,l){i=r,e=o,t=-3*r+3*a-2*o-l,n=2*r-2*a+o+l}return{initCatmullRom:function(r,a,o,l,h){s(a,o,h*(o-r),h*(l-a))},initNonuniformCatmullRom:function(r,a,o,l,h,c,f){var g=(a-r)/h-(o-r)/(h+c)+(o-a)/c,v=(o-a)/c-(l-a)/(c+f)+(l-o)/f;g*=c,v*=c,s(a,o,g,v)},calc:function(r){var a=r*r,o=a*r;return i+e*r+t*a+n*o}}}var Dy=new Ae,jA=new gP,XA=new gP,QA=new gP;function oo(i,e,t,n){Ei.call(this),this.type="CatmullRomCurve3",this.points=i||[],this.closed=e||!1,this.curveType=t||"centripetal",this.tension=n||.5}oo.prototype=Object.create(Ei.prototype);oo.prototype.constructor=oo;oo.prototype.isCatmullRomCurve3=!0;oo.prototype.getPoint=function(i,e){var t=e||new Ae,n=this.points,s=n.length,r=(s-(this.closed?0:1))*i,a=Math.floor(r),o=r-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:o===0&&a===s-1&&(a=s-2,o=1);var l,h,c,f;if(this.closed||a>0?l=n[(a-1)%s]:(Dy.subVectors(n[0],n[1]).add(n[0]),l=Dy),h=n[a%s],c=n[(a+1)%s],this.closed||a+2<s?f=n[(a+2)%s]:(Dy.subVectors(n[s-1],n[s-2]).add(n[s-1]),f=Dy),this.curveType==="centripetal"||this.curveType==="chordal"){var g=this.curveType==="chordal"?.5:.25,v=Math.pow(l.distanceToSquared(h),g),A=Math.pow(h.distanceToSquared(c),g),P=Math.pow(c.distanceToSquared(f),g);A<1e-4&&(A=1),v<1e-4&&(v=A),P<1e-4&&(P=A),jA.initNonuniformCatmullRom(l.x,h.x,c.x,f.x,v,A,P),XA.initNonuniformCatmullRom(l.y,h.y,c.y,f.y,v,A,P),QA.initNonuniformCatmullRom(l.z,h.z,c.z,f.z,v,A,P)}else this.curveType==="catmullrom"&&(jA.initCatmullRom(l.x,h.x,c.x,f.x,this.tension),XA.initCatmullRom(l.y,h.y,c.y,f.y,this.tension),QA.initCatmullRom(l.z,h.z,c.z,f.z,this.tension));return t.set(jA.calc(o),XA.calc(o),QA.calc(o)),t};oo.prototype.copy=function(i){Ei.prototype.copy.call(this,i),this.points=[];for(var e=0,t=i.points.length;e<t;e++){var n=i.points[e];this.points.push(n.clone())}return this.closed=i.closed,this.curveType=i.curveType,this.tension=i.tension,this};oo.prototype.toJSON=function(){var i=Ei.prototype.toJSON.call(this);i.points=[];for(var e=0,t=this.points.length;e<t;e++){var n=this.points[e];i.points.push(n.toArray())}return i.closed=this.closed,i.curveType=this.curveType,i.tension=this.tension,i};oo.prototype.fromJSON=function(i){Ei.prototype.fromJSON.call(this,i),this.points=[];for(var e=0,t=i.points.length;e<t;e++){var n=i.points[e];this.points.push(new Ae().fromArray(n))}return this.closed=i.closed,this.curveType=i.curveType,this.tension=i.tension,this};function jC(i,e,t,n,s){var r=(n-e)*.5,a=(s-t)*.5,o=i*i,l=i*o;return(2*t-2*n+r+a)*l+(-3*t+3*n-2*r-a)*o+r*i+t}function Jse(i,e){var t=1-i;return t*t*e}function Zse(i,e){return 2*(1-i)*i*e}function $se(i,e){return i*i*e}function Gm(i,e,t,n){return Jse(i,e)+Zse(i,t)+$se(i,n)}function ere(i,e){var t=1-i;return t*t*t*e}function tre(i,e){var t=1-i;return 3*t*t*i*e}function ire(i,e){return 3*(1-i)*i*i*e}function nre(i,e){return i*i*i*e}function Wm(i,e,t,n,s){return ere(i,e)+tre(i,t)+ire(i,n)+nre(i,s)}function Jl(i,e,t,n){Ei.call(this),this.type="CubicBezierCurve",this.v0=i||new _t,this.v1=e||new _t,this.v2=t||new _t,this.v3=n||new _t}Jl.prototype=Object.create(Ei.prototype);Jl.prototype.constructor=Jl;Jl.prototype.isCubicBezierCurve=!0;Jl.prototype.getPoint=function(i,e){var t=e||new _t,n=this.v0,s=this.v1,r=this.v2,a=this.v3;return t.set(Wm(i,n.x,s.x,r.x,a.x),Wm(i,n.y,s.y,r.y,a.y)),t};Jl.prototype.copy=function(i){return Ei.prototype.copy.call(this,i),this.v0.copy(i.v0),this.v1.copy(i.v1),this.v2.copy(i.v2),this.v3.copy(i.v3),this};Jl.prototype.toJSON=function(){var i=Ei.prototype.toJSON.call(this);return i.v0=this.v0.toArray(),i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i.v3=this.v3.toArray(),i};Jl.prototype.fromJSON=function(i){return Ei.prototype.fromJSON.call(this,i),this.v0.fromArray(i.v0),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this.v3.fromArray(i.v3),this};function jh(i,e,t,n){Ei.call(this),this.type="CubicBezierCurve3",this.v0=i||new Ae,this.v1=e||new Ae,this.v2=t||new Ae,this.v3=n||new Ae}jh.prototype=Object.create(Ei.prototype);jh.prototype.constructor=jh;jh.prototype.isCubicBezierCurve3=!0;jh.prototype.getPoint=function(i,e){var t=e||new Ae,n=this.v0,s=this.v1,r=this.v2,a=this.v3;return t.set(Wm(i,n.x,s.x,r.x,a.x),Wm(i,n.y,s.y,r.y,a.y),Wm(i,n.z,s.z,r.z,a.z)),t};jh.prototype.copy=function(i){return Ei.prototype.copy.call(this,i),this.v0.copy(i.v0),this.v1.copy(i.v1),this.v2.copy(i.v2),this.v3.copy(i.v3),this};jh.prototype.toJSON=function(){var i=Ei.prototype.toJSON.call(this);return i.v0=this.v0.toArray(),i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i.v3=this.v3.toArray(),i};jh.prototype.fromJSON=function(i){return Ei.prototype.fromJSON.call(this,i),this.v0.fromArray(i.v0),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this.v3.fromArray(i.v3),this};function lo(i,e){Ei.call(this),this.type="LineCurve",this.v1=i||new _t,this.v2=e||new _t}lo.prototype=Object.create(Ei.prototype);lo.prototype.constructor=lo;lo.prototype.isLineCurve=!0;lo.prototype.getPoint=function(i,e){var t=e||new _t;return i===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(i).add(this.v1)),t};lo.prototype.getPointAt=function(i,e){return this.getPoint(i,e)};lo.prototype.getTangent=function(){var i=this.v2.clone().sub(this.v1);return i.normalize()};lo.prototype.copy=function(i){return Ei.prototype.copy.call(this,i),this.v1.copy(i.v1),this.v2.copy(i.v2),this};lo.prototype.toJSON=function(){var i=Ei.prototype.toJSON.call(this);return i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i};lo.prototype.fromJSON=function(i){return Ei.prototype.fromJSON.call(this,i),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this};function Zl(i,e){Ei.call(this),this.type="LineCurve3",this.v1=i||new Ae,this.v2=e||new Ae}Zl.prototype=Object.create(Ei.prototype);Zl.prototype.constructor=Zl;Zl.prototype.isLineCurve3=!0;Zl.prototype.getPoint=function(i,e){var t=e||new Ae;return i===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(i).add(this.v1)),t};Zl.prototype.getPointAt=function(i,e){return this.getPoint(i,e)};Zl.prototype.copy=function(i){return Ei.prototype.copy.call(this,i),this.v1.copy(i.v1),this.v2.copy(i.v2),this};Zl.prototype.toJSON=function(){var i=Ei.prototype.toJSON.call(this);return i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i};Zl.prototype.fromJSON=function(i){return Ei.prototype.fromJSON.call(this,i),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this};function $l(i,e,t){Ei.call(this),this.type="QuadraticBezierCurve",this.v0=i||new _t,this.v1=e||new _t,this.v2=t||new _t}$l.prototype=Object.create(Ei.prototype);$l.prototype.constructor=$l;$l.prototype.isQuadraticBezierCurve=!0;$l.prototype.getPoint=function(i,e){var t=e||new _t,n=this.v0,s=this.v1,r=this.v2;return t.set(Gm(i,n.x,s.x,r.x),Gm(i,n.y,s.y,r.y)),t};$l.prototype.copy=function(i){return Ei.prototype.copy.call(this,i),this.v0.copy(i.v0),this.v1.copy(i.v1),this.v2.copy(i.v2),this};$l.prototype.toJSON=function(){var i=Ei.prototype.toJSON.call(this);return i.v0=this.v0.toArray(),i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i};$l.prototype.fromJSON=function(i){return Ei.prototype.fromJSON.call(this,i),this.v0.fromArray(i.v0),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this};function Xh(i,e,t){Ei.call(this),this.type="QuadraticBezierCurve3",this.v0=i||new Ae,this.v1=e||new Ae,this.v2=t||new Ae}Xh.prototype=Object.create(Ei.prototype);Xh.prototype.constructor=Xh;Xh.prototype.isQuadraticBezierCurve3=!0;Xh.prototype.getPoint=function(i,e){var t=e||new Ae,n=this.v0,s=this.v1,r=this.v2;return t.set(Gm(i,n.x,s.x,r.x),Gm(i,n.y,s.y,r.y),Gm(i,n.z,s.z,r.z)),t};Xh.prototype.copy=function(i){return Ei.prototype.copy.call(this,i),this.v0.copy(i.v0),this.v1.copy(i.v1),this.v2.copy(i.v2),this};Xh.prototype.toJSON=function(){var i=Ei.prototype.toJSON.call(this);return i.v0=this.v0.toArray(),i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i};Xh.prototype.fromJSON=function(i){return Ei.prototype.fromJSON.call(this,i),this.v0.fromArray(i.v0),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this};function eh(i){Ei.call(this),this.type="SplineCurve",this.points=i||[]}eh.prototype=Object.create(Ei.prototype);eh.prototype.constructor=eh;eh.prototype.isSplineCurve=!0;eh.prototype.getPoint=function(i,e){var t=e||new _t,n=this.points,s=(n.length-1)*i,r=Math.floor(s),a=s-r,o=n[r===0?r:r-1],l=n[r],h=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return t.set(jC(a,o.x,l.x,h.x,c.x),jC(a,o.y,l.y,h.y,c.y)),t};eh.prototype.copy=function(i){Ei.prototype.copy.call(this,i),this.points=[];for(var e=0,t=i.points.length;e<t;e++){var n=i.points[e];this.points.push(n.clone())}return this};eh.prototype.toJSON=function(){var i=Ei.prototype.toJSON.call(this);i.points=[];for(var e=0,t=this.points.length;e<t;e++){var n=this.points[e];i.points.push(n.toArray())}return i};eh.prototype.fromJSON=function(i){Ei.prototype.fromJSON.call(this,i),this.points=[];for(var e=0,t=i.points.length;e<t;e++){var n=i.points[e];this.points.push(new _t().fromArray(n))}return this};var Cw=Object.freeze({ArcCurve:Gg,CatmullRomCurve3:oo,CubicBezierCurve:Jl,CubicBezierCurve3:jh,EllipseCurve:Mo,LineCurve:lo,LineCurve3:Zl,QuadraticBezierCurve:$l,QuadraticBezierCurve3:Xh,SplineCurve:eh});function _u(){Ei.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}_u.prototype=Object.assign(Object.create(Ei.prototype),{constructor:_u,add:function(i){this.curves.push(i)},closePath:function(){var i=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);i.equals(e)||this.curves.push(new lo(e,i))},getPoint:function(i){for(var e=i*this.getLength(),t=this.getCurveLengths(),n=0;n<t.length;){if(t[n]>=e){var s=t[n]-e,r=this.curves[n],a=r.getLength(),o=a===0?0:1-s/a;return r.getPointAt(o)}n++}return null},getLength:function(){var i=this.getCurveLengths();return i[i.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var i=[],e=0,t=0,n=this.curves.length;t<n;t++)e+=this.curves[t].getLength(),i.push(e);return this.cacheLengths=i,i},getSpacedPoints:function(i){i===void 0&&(i=40);for(var e=[],t=0;t<=i;t++)e.push(this.getPoint(t/i));return this.autoClose&&e.push(e[0]),e},getPoints:function(i){i=i||12;for(var e=[],t,n=0,s=this.curves;n<s.length;n++)for(var r=s[n],a=r&&r.isEllipseCurve?i*2:r&&(r.isLineCurve||r.isLineCurve3)?1:r&&r.isSplineCurve?i*r.points.length:i,o=r.getPoints(a),l=0;l<o.length;l++){var h=o[l];t&&t.equals(h)||(e.push(h),t=h)}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(i){Ei.prototype.copy.call(this,i),this.curves=[];for(var e=0,t=i.curves.length;e<t;e++){var n=i.curves[e];this.curves.push(n.clone())}return this.autoClose=i.autoClose,this},toJSON:function(){var i=Ei.prototype.toJSON.call(this);i.autoClose=this.autoClose,i.curves=[];for(var e=0,t=this.curves.length;e<t;e++){var n=this.curves[e];i.curves.push(n.toJSON())}return i},fromJSON:function(i){Ei.prototype.fromJSON.call(this,i),this.autoClose=i.autoClose,this.curves=[];for(var e=0,t=i.curves.length;e<t;e++){var n=i.curves[e];this.curves.push(new Cw[n.type]().fromJSON(n))}return this}});function Hs(i){_u.call(this),this.type="Path",this.currentPoint=new _t,i&&this.setFromPoints(i)}Hs.prototype=Object.assign(Object.create(_u.prototype),{constructor:Hs,setFromPoints:function(i){this.moveTo(i[0].x,i[0].y);for(var e=1,t=i.length;e<t;e++)this.lineTo(i[e].x,i[e].y)},moveTo:function(i,e){this.currentPoint.set(i,e)},lineTo:function(i,e){var t=new lo(this.currentPoint.clone(),new _t(i,e));this.curves.push(t),this.currentPoint.set(i,e)},quadraticCurveTo:function(i,e,t,n){var s=new $l(this.currentPoint.clone(),new _t(i,e),new _t(t,n));this.curves.push(s),this.currentPoint.set(t,n)},bezierCurveTo:function(i,e,t,n,s,r){var a=new Jl(this.currentPoint.clone(),new _t(i,e),new _t(t,n),new _t(s,r));this.curves.push(a),this.currentPoint.set(s,r)},splineThru:function(i){var e=[this.currentPoint.clone()].concat(i),t=new eh(e);this.curves.push(t),this.currentPoint.copy(i[i.length-1])},arc:function(i,e,t,n,s,r){var a=this.currentPoint.x,o=this.currentPoint.y;this.absarc(i+a,e+o,t,n,s,r)},absarc:function(i,e,t,n,s,r){this.absellipse(i,e,t,t,n,s,r)},ellipse:function(i,e,t,n,s,r,a,o){var l=this.currentPoint.x,h=this.currentPoint.y;this.absellipse(i+l,e+h,t,n,s,r,a,o)},absellipse:function(i,e,t,n,s,r,a,o){var l=new Mo(i,e,t,n,s,r,a,o);if(this.curves.length>0){var h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(i){return _u.prototype.copy.call(this,i),this.currentPoint.copy(i.currentPoint),this},toJSON:function(){var i=_u.prototype.toJSON.call(this);return i.currentPoint=this.currentPoint.toArray(),i},fromJSON:function(i){return _u.prototype.fromJSON.call(this,i),this.currentPoint.fromArray(i.currentPoint),this}});function Nc(i){Hs.call(this,i),this.uuid=tn.generateUUID(),this.type="Shape",this.holes=[]}Nc.prototype=Object.assign(Object.create(Hs.prototype),{constructor:Nc,getPointsHoles:function(i){for(var e=[],t=0,n=this.holes.length;t<n;t++)e[t]=this.holes[t].getPoints(i);return e},extractPoints:function(i){return{shape:this.getPoints(i),holes:this.getPointsHoles(i)}},copy:function(i){Hs.prototype.copy.call(this,i),this.holes=[];for(var e=0,t=i.holes.length;e<t;e++){var n=i.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){var i=Hs.prototype.toJSON.call(this);i.uuid=this.uuid,i.holes=[];for(var e=0,t=this.holes.length;e<t;e++){var n=this.holes[e];i.holes.push(n.toJSON())}return i},fromJSON:function(i){Hs.prototype.fromJSON.call(this,i),this.uuid=i.uuid,this.holes=[];for(var e=0,t=i.holes.length;e<t;e++){var n=i.holes[e];this.holes.push(new Hs().fromJSON(n))}return this}});function Es(i,e){li.call(this),this.type="Light",this.color=new wi(i),this.intensity=e!==void 0?e:1,this.receiveShadow=void 0}Es.prototype=Object.assign(Object.create(li.prototype),{constructor:Es,isLight:!0,copy:function(i){return li.prototype.copy.call(this,i),this.color.copy(i.color),this.intensity=i.intensity,this},toJSON:function(i){var e=li.prototype.toJSON.call(this,i);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function Dw(i,e,t){Es.call(this,i,t),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(li.DefaultUp),this.updateMatrix(),this.groundColor=new wi(e)}Dw.prototype=Object.assign(Object.create(Es.prototype),{constructor:Dw,isHemisphereLight:!0,copy:function(i){return Es.prototype.copy.call(this,i),this.groundColor.copy(i.groundColor),this}});function Hf(i){this.camera=i,this.bias=0,this.radius=1,this.mapSize=new _t(512,512),this.map=null,this.matrix=new Fi}Object.assign(Hf.prototype,{copy:function(i){return this.camera=i.camera.clone(),this.bias=i.bias,this.radius=i.radius,this.mapSize.copy(i.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var i={};return this.bias!==0&&(i.bias=this.bias),this.radius!==1&&(i.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(i.mapSize=this.mapSize.toArray()),i.camera=this.camera.toJSON(!1).object,delete i.camera.matrix,i}});function Iw(){Hf.call(this,new ar(50,1,.5,500))}Iw.prototype=Object.assign(Object.create(Hf.prototype),{constructor:Iw,isSpotLightShadow:!0,update:function(i){var e=this.camera,t=tn.RAD2DEG*2*i.angle,n=this.mapSize.width/this.mapSize.height,s=i.distance||e.far;(t!==e.fov||n!==e.aspect||s!==e.far)&&(e.fov=t,e.aspect=n,e.far=s,e.updateProjectionMatrix())}});function Lw(i,e,t,n,s,r){Es.call(this,i,e),this.type="SpotLight",this.position.copy(li.DefaultUp),this.updateMatrix(),this.target=new li,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}}),this.distance=t!==void 0?t:0,this.angle=n!==void 0?n:Math.PI/3,this.penumbra=s!==void 0?s:0,this.decay=r!==void 0?r:1,this.shadow=new Iw}Lw.prototype=Object.assign(Object.create(Es.prototype),{constructor:Lw,isSpotLight:!0,copy:function(i){return Es.prototype.copy.call(this,i),this.distance=i.distance,this.angle=i.angle,this.penumbra=i.penumbra,this.decay=i.decay,this.target=i.target.clone(),this.shadow=i.shadow.clone(),this}});function Mw(i,e,t,n){Es.call(this,i,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(s){this.intensity=s/(4*Math.PI)}}),this.distance=t!==void 0?t:0,this.decay=n!==void 0?n:1,this.shadow=new Hf(new ar(90,1,.5,500))}Mw.prototype=Object.assign(Object.create(Es.prototype),{constructor:Mw,isPointLight:!0,copy:function(i){return Es.prototype.copy.call(this,i),this.distance=i.distance,this.decay=i.decay,this.shadow=i.shadow.clone(),this}});function Wg(i,e,t,n,s,r){Wh.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=i!==void 0?i:-1,this.right=e!==void 0?e:1,this.top=t!==void 0?t:1,this.bottom=n!==void 0?n:-1,this.near=s!==void 0?s:.1,this.far=r!==void 0?r:2e3,this.updateProjectionMatrix()}Wg.prototype=Object.assign(Object.create(Wh.prototype),{constructor:Wg,isOrthographicCamera:!0,copy:function(i,e){return Wh.prototype.copy.call(this,i,e),this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.near=i.near,this.far=i.far,this.zoom=i.zoom,this.view=i.view===null?null:Object.assign({},i.view),this},setViewOffset:function(i,e,t,n,s,r){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=n,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var i=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,n=(this.top+this.bottom)/2,s=t-i,r=t+i,a=n+e,o=n-e;if(this.view!==null&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),h=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,f=(this.top-this.bottom)/this.view.height;s+=c*(this.view.offsetX/l),r=s+c*(this.view.width/l),a-=f*(this.view.offsetY/h),o=a-f*(this.view.height/h)}this.projectionMatrix.makeOrthographic(s,r,a,o,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(i){var e=li.prototype.toJSON.call(this,i);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function Ow(){Hf.call(this,new Wg(-5,5,5,-5,.5,500))}Ow.prototype=Object.assign(Object.create(Hf.prototype),{constructor:Ow});function Nw(i,e){Es.call(this,i,e),this.type="DirectionalLight",this.position.copy(li.DefaultUp),this.updateMatrix(),this.target=new li,this.shadow=new Ow}Nw.prototype=Object.assign(Object.create(Es.prototype),{constructor:Nw,isDirectionalLight:!0,copy:function(i){return Es.prototype.copy.call(this,i),this.target=i.target.clone(),this.shadow=i.shadow.clone(),this}});function Rw(i,e){Es.call(this,i,e),this.type="AmbientLight",this.castShadow=void 0}Rw.prototype=Object.assign(Object.create(Es.prototype),{constructor:Rw,isAmbientLight:!0});function Bw(i,e,t,n){Es.call(this,i,e),this.type="RectAreaLight",this.width=t!==void 0?t:10,this.height=n!==void 0?n:10}Bw.prototype=Object.assign(Object.create(Es.prototype),{constructor:Bw,isRectAreaLight:!0,copy:function(i){return Es.prototype.copy.call(this,i),this.width=i.width,this.height=i.height,this},toJSON:function(i){var e=Es.prototype.toJSON.call(this,i);return e.object.width=this.width,e.object.height=this.height,e}});function yP(i){this.manager=i!==void 0?i:ho,this.textures={}}Object.assign(yP.prototype,{load:function(i,e,t,n){var s=this,r=new Jh(s.manager);r.setPath(s.path),r.load(i,function(a){e(s.parse(JSON.parse(a)))},t,n)},parse:function(i){var e=this.textures;function t(l){return e[l]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",l),e[l]}var n=new Wse[i.type];if(i.uuid!==void 0&&(n.uuid=i.uuid),i.name!==void 0&&(n.name=i.name),i.color!==void 0&&n.color.setHex(i.color),i.roughness!==void 0&&(n.roughness=i.roughness),i.metalness!==void 0&&(n.metalness=i.metalness),i.emissive!==void 0&&n.emissive.setHex(i.emissive),i.specular!==void 0&&n.specular.setHex(i.specular),i.shininess!==void 0&&(n.shininess=i.shininess),i.clearCoat!==void 0&&(n.clearCoat=i.clearCoat),i.clearCoatRoughness!==void 0&&(n.clearCoatRoughness=i.clearCoatRoughness),i.vertexColors!==void 0&&(n.vertexColors=i.vertexColors),i.fog!==void 0&&(n.fog=i.fog),i.flatShading!==void 0&&(n.flatShading=i.flatShading),i.blending!==void 0&&(n.blending=i.blending),i.combine!==void 0&&(n.combine=i.combine),i.side!==void 0&&(n.side=i.side),i.opacity!==void 0&&(n.opacity=i.opacity),i.transparent!==void 0&&(n.transparent=i.transparent),i.alphaTest!==void 0&&(n.alphaTest=i.alphaTest),i.depthTest!==void 0&&(n.depthTest=i.depthTest),i.depthWrite!==void 0&&(n.depthWrite=i.depthWrite),i.colorWrite!==void 0&&(n.colorWrite=i.colorWrite),i.wireframe!==void 0&&(n.wireframe=i.wireframe),i.wireframeLinewidth!==void 0&&(n.wireframeLinewidth=i.wireframeLinewidth),i.wireframeLinecap!==void 0&&(n.wireframeLinecap=i.wireframeLinecap),i.wireframeLinejoin!==void 0&&(n.wireframeLinejoin=i.wireframeLinejoin),i.rotation!==void 0&&(n.rotation=i.rotation),i.linewidth!==1&&(n.linewidth=i.linewidth),i.dashSize!==void 0&&(n.dashSize=i.dashSize),i.gapSize!==void 0&&(n.gapSize=i.gapSize),i.scale!==void 0&&(n.scale=i.scale),i.polygonOffset!==void 0&&(n.polygonOffset=i.polygonOffset),i.polygonOffsetFactor!==void 0&&(n.polygonOffsetFactor=i.polygonOffsetFactor),i.polygonOffsetUnits!==void 0&&(n.polygonOffsetUnits=i.polygonOffsetUnits),i.skinning!==void 0&&(n.skinning=i.skinning),i.morphTargets!==void 0&&(n.morphTargets=i.morphTargets),i.dithering!==void 0&&(n.dithering=i.dithering),i.visible!==void 0&&(n.visible=i.visible),i.userData!==void 0&&(n.userData=i.userData),i.uniforms!==void 0)for(var s in i.uniforms){var r=i.uniforms[s];switch(n.uniforms[s]={},r.type){case"t":n.uniforms[s].value=t(r.value);break;case"c":n.uniforms[s].value=new wi().setHex(r.value);break;case"v2":n.uniforms[s].value=new _t().fromArray(r.value);break;case"v3":n.uniforms[s].value=new Ae().fromArray(r.value);break;case"v4":n.uniforms[s].value=new hs().fromArray(r.value);break;case"m3":n.uniforms[s].value=new Nr().fromArray(r.value);case"m4":n.uniforms[s].value=new Fi().fromArray(r.value);break;default:n.uniforms[s].value=r.value}}if(i.defines!==void 0&&(n.defines=i.defines),i.vertexShader!==void 0&&(n.vertexShader=i.vertexShader),i.fragmentShader!==void 0&&(n.fragmentShader=i.fragmentShader),i.extensions!==void 0)for(var a in i.extensions)n.extensions[a]=i.extensions[a];if(i.shading!==void 0&&(n.flatShading=i.shading===1),i.size!==void 0&&(n.size=i.size),i.sizeAttenuation!==void 0&&(n.sizeAttenuation=i.sizeAttenuation),i.map!==void 0&&(n.map=t(i.map)),i.matcap!==void 0&&(n.matcap=t(i.matcap)),i.alphaMap!==void 0&&(n.alphaMap=t(i.alphaMap),n.transparent=!0),i.bumpMap!==void 0&&(n.bumpMap=t(i.bumpMap)),i.bumpScale!==void 0&&(n.bumpScale=i.bumpScale),i.normalMap!==void 0&&(n.normalMap=t(i.normalMap)),i.normalMapType!==void 0&&(n.normalMapType=i.normalMapType),i.normalScale!==void 0){var o=i.normalScale;Array.isArray(o)===!1&&(o=[o,o]),n.normalScale=new _t().fromArray(o)}return i.displacementMap!==void 0&&(n.displacementMap=t(i.displacementMap)),i.displacementScale!==void 0&&(n.displacementScale=i.displacementScale),i.displacementBias!==void 0&&(n.displacementBias=i.displacementBias),i.roughnessMap!==void 0&&(n.roughnessMap=t(i.roughnessMap)),i.metalnessMap!==void 0&&(n.metalnessMap=t(i.metalnessMap)),i.emissiveMap!==void 0&&(n.emissiveMap=t(i.emissiveMap)),i.emissiveIntensity!==void 0&&(n.emissiveIntensity=i.emissiveIntensity),i.specularMap!==void 0&&(n.specularMap=t(i.specularMap)),i.envMap!==void 0&&(n.envMap=t(i.envMap)),i.envMapIntensity!==void 0&&(n.envMapIntensity=i.envMapIntensity),i.reflectivity!==void 0&&(n.reflectivity=i.reflectivity),i.lightMap!==void 0&&(n.lightMap=t(i.lightMap)),i.lightMapIntensity!==void 0&&(n.lightMapIntensity=i.lightMapIntensity),i.aoMap!==void 0&&(n.aoMap=t(i.aoMap)),i.aoMapIntensity!==void 0&&(n.aoMapIntensity=i.aoMapIntensity),i.gradientMap!==void 0&&(n.gradientMap=t(i.gradientMap)),n},setPath:function(i){return this.path=i,this},setTextures:function(i){return this.textures=i,this}});var Q3={decodeText:function(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);for(var e="",t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);return decodeURIComponent(escape(e))},extractUrlBase:function(i){var e=i.lastIndexOf("/");return e===-1?"./":i.substr(0,e+1)}};function J3(i){this.manager=i!==void 0?i:ho}Object.assign(J3.prototype,{load:function(i,e,t,n){var s=this,r=new Jh(s.manager);r.setPath(s.path),r.load(i,function(a){e(s.parse(JSON.parse(a)))},t,n)},parse:function(i){var e=new Zt,t=i.data.index;if(t!==void 0){var n=new JA[t.type](t.array);e.setIndex(new fn(n,1))}var s=i.data.attributes;for(var r in s){var a=s[r],n=new JA[a.type](a.array),o=new fn(n,a.itemSize,a.normalized);a.name!==void 0&&(o.name=a.name),e.addAttribute(r,o)}var l=i.data.morphAttributes;if(l)for(var r in l){for(var h=l[r],c=[],f=0,g=h.length;f<g;f++){var a=h[f],n=new JA[a.type](a.array),o=new fn(n,a.itemSize,a.normalized);a.name!==void 0&&(o.name=a.name),c.push(o)}e.morphAttributes[r]=c}var v=i.data.groups||i.data.drawcalls||i.data.offsets;if(v!==void 0)for(var f=0,A=v.length;f!==A;++f){var P=v[f];e.addGroup(P.start,P.count,P.materialIndex)}var w=i.data.boundingSphere;if(w!==void 0){var T=new Ae;w.center!==void 0&&T.fromArray(w.center),e.boundingSphere=new Gh(T,w.radius)}return i.name&&(e.name=i.name),i.userData&&(e.userData=i.userData),e},setPath:function(i){return this.path=i,this}});var JA={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Z3(i){this.manager=i!==void 0?i:ho,this.resourcePath=""}Object.assign(Z3.prototype,{crossOrigin:"anonymous",load:function(i,e,t,n){var s=this,r=this.path===void 0?Q3.extractUrlBase(i):this.path;this.resourcePath=this.resourcePath||r;var a=new Jh(s.manager);a.setPath(this.path),a.load(i,function(o){var l=null;try{l=JSON.parse(o)}catch(c){n!==void 0&&n(c),console.error("THREE:ObjectLoader: Can't parse "+i+".",c.message);return}var h=l.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+i);return}s.parse(l,e)},t,n)},setPath:function(i){return this.path=i,this},setResourcePath:function(i){return this.resourcePath=i,this},setCrossOrigin:function(i){return this.crossOrigin=i,this},parse:function(i,e){var t=this.parseShape(i.shapes),n=this.parseGeometries(i.geometries,t),s=this.parseImages(i.images,function(){e!==void 0&&e(o)}),r=this.parseTextures(i.textures,s),a=this.parseMaterials(i.materials,r),o=this.parseObject(i.object,n,a);return i.animations&&(o.animations=this.parseAnimations(i.animations)),(i.images===void 0||i.images.length===0)&&e!==void 0&&e(o),o},parseShape:function(i){var e={};if(i!==void 0)for(var t=0,n=i.length;t<n;t++){var s=new Nc().fromJSON(i[t]);e[s.uuid]=s}return e},parseGeometries:function(i,e){var t={};if(i!==void 0)for(var n=new J3,s=0,r=i.length;s<r;s++){var a,o=i[s];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new oa[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new oa[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new oa[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new oa[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new oa[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new oa[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new oa[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new oa[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new oa[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new oa[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new oa[o.type](new Cw[o.path.type]().fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new oa[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new oa[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var f=[],l=0,h=o.shapes.length;l<h;l++){var c=e[o.shapes[l]];f.push(c)}a=new oa[o.type](f,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var f=[],l=0,h=o.shapes.length;l<h;l++){var c=e[o.shapes[l]];f.push(c)}var g=o.options.extrudePath;g!==void 0&&(o.options.extrudePath=new Cw[g.type]().fromJSON(g)),a=new oa[o.type](f,o.options);break;case"BufferGeometry":a=n.parse(o);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var v=new THREE.LegacyJSONLoader;a=v.parse(o,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}a.uuid=o.uuid,o.name!==void 0&&(a.name=o.name),a.isBufferGeometry===!0&&o.userData!==void 0&&(a.userData=o.userData),t[o.uuid]=a}return t},parseMaterials:function(i,e){var t={},n={};if(i!==void 0){var s=new yP;s.setTextures(e);for(var r=0,a=i.length;r<a;r++){var o=i[r];if(o.type==="MultiMaterial"){for(var l=[],h=0;h<o.materials.length;h++){var c=o.materials[h];t[c.uuid]===void 0&&(t[c.uuid]=s.parse(c)),l.push(t[c.uuid])}n[o.uuid]=l}else t[o.uuid]===void 0&&(t[o.uuid]=s.parse(o)),n[o.uuid]=t[o.uuid]}}return n},parseAnimations:function(i){for(var e=[],t=0;t<i.length;t++){var n=i[t],s=sl.parse(n);n.uuid!==void 0&&(s.uuid=n.uuid),e.push(s)}return e},parseImages:function(i,e){var t=this,n={};function s(P){return t.manager.itemStart(P),a.load(P,function(){t.manager.itemEnd(P)},void 0,function(){t.manager.itemError(P),t.manager.itemEnd(P)})}if(i!==void 0&&i.length>0){var r=new j3(e),a=new v_(r);a.setCrossOrigin(this.crossOrigin);for(var o=0,l=i.length;o<l;o++){var h=i[o],c=h.url;if(Array.isArray(c)){n[h.uuid]=[];for(var f=0,g=c.length;f<g;f++){var v=c[f],A=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(v)?v:t.resourcePath+v;n[h.uuid].push(s(A))}}else{var A=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:t.resourcePath+h.url;n[h.uuid]=s(A)}}}return n},parseTextures:function(i,e){function t(l,h){return typeof l=="number"?l:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l),h[l])}var n={};if(i!==void 0)for(var s=0,r=i.length;s<r;s++){var a=i[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),e[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var o;Array.isArray(e[a.image])?o=new Nu(e[a.image]):o=new vs(e[a.image]),o.needsUpdate=!0,o.uuid=a.uuid,a.name!==void 0&&(o.name=a.name),a.mapping!==void 0&&(o.mapping=t(a.mapping,sre)),a.offset!==void 0&&o.offset.fromArray(a.offset),a.repeat!==void 0&&o.repeat.fromArray(a.repeat),a.center!==void 0&&o.center.fromArray(a.center),a.rotation!==void 0&&(o.rotation=a.rotation),a.wrap!==void 0&&(o.wrapS=t(a.wrap[0],XC),o.wrapT=t(a.wrap[1],XC)),a.format!==void 0&&(o.format=a.format),a.type!==void 0&&(o.type=a.type),a.encoding!==void 0&&(o.encoding=a.encoding),a.minFilter!==void 0&&(o.minFilter=t(a.minFilter,QC)),a.magFilter!==void 0&&(o.magFilter=t(a.magFilter,QC)),a.anisotropy!==void 0&&(o.anisotropy=a.anisotropy),a.flipY!==void 0&&(o.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(o.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(o.unpackAlignment=a.unpackAlignment),n[a.uuid]=o}return n},parseObject:function(i,e,t){var n;function s(A){return e[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",A),e[A]}function r(A){if(A!==void 0){if(Array.isArray(A)){for(var P=[],w=0,T=A.length;w<T;w++){var D=A[w];t[D]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",D),P.push(t[D])}return P}return t[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),t[A]}}switch(i.type){case"Scene":n=new $v,i.background!==void 0&&Number.isInteger(i.background)&&(n.background=new wi(i.background)),i.fog!==void 0&&(i.fog.type==="Fog"?n.fog=new yw(i.fog.color,i.fog.near,i.fog.far):i.fog.type==="FogExp2"&&(n.fog=new gw(i.fog.color,i.fog.density)));break;case"PerspectiveCamera":n=new ar(i.fov,i.aspect,i.near,i.far),i.focus!==void 0&&(n.focus=i.focus),i.zoom!==void 0&&(n.zoom=i.zoom),i.filmGauge!==void 0&&(n.filmGauge=i.filmGauge),i.filmOffset!==void 0&&(n.filmOffset=i.filmOffset),i.view!==void 0&&(n.view=Object.assign({},i.view));break;case"OrthographicCamera":n=new Wg(i.left,i.right,i.top,i.bottom,i.near,i.far),i.zoom!==void 0&&(n.zoom=i.zoom),i.view!==void 0&&(n.view=Object.assign({},i.view));break;case"AmbientLight":n=new Rw(i.color,i.intensity);break;case"DirectionalLight":n=new Nw(i.color,i.intensity);break;case"PointLight":n=new Mw(i.color,i.intensity,i.distance,i.decay);break;case"RectAreaLight":n=new Bw(i.color,i.intensity,i.width,i.height);break;case"SpotLight":n=new Lw(i.color,i.intensity,i.distance,i.angle,i.penumbra,i.decay);break;case"HemisphereLight":n=new Dw(i.color,i.groundColor,i.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=s(i.geometry),o=r(i.material);a.bones&&a.bones.length>0?n=new ib(a,o):n=new Ws(a,o),i.drawMode!==void 0&&n.setDrawMode(i.drawMode);break;case"LOD":n=new tb;break;case"Line":n=new rs(s(i.geometry),r(i.material),i.mode);break;case"LineLoop":n=new _w(s(i.geometry),r(i.material));break;case"LineSegments":n=new Cs(s(i.geometry),r(i.material));break;case"PointCloud":case"Points":n=new Aw(s(i.geometry),r(i.material));break;case"Sprite":n=new vw(r(i.material));break;case"Group":n=new xu;break;default:n=new li}if(n.uuid=i.uuid,i.name!==void 0&&(n.name=i.name),i.matrix!==void 0?(n.matrix.fromArray(i.matrix),i.matrixAutoUpdate!==void 0&&(n.matrixAutoUpdate=i.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(i.position!==void 0&&n.position.fromArray(i.position),i.rotation!==void 0&&n.rotation.fromArray(i.rotation),i.quaternion!==void 0&&n.quaternion.fromArray(i.quaternion),i.scale!==void 0&&n.scale.fromArray(i.scale)),i.castShadow!==void 0&&(n.castShadow=i.castShadow),i.receiveShadow!==void 0&&(n.receiveShadow=i.receiveShadow),i.shadow&&(i.shadow.bias!==void 0&&(n.shadow.bias=i.shadow.bias),i.shadow.radius!==void 0&&(n.shadow.radius=i.shadow.radius),i.shadow.mapSize!==void 0&&n.shadow.mapSize.fromArray(i.shadow.mapSize),i.shadow.camera!==void 0&&(n.shadow.camera=this.parseObject(i.shadow.camera))),i.visible!==void 0&&(n.visible=i.visible),i.frustumCulled!==void 0&&(n.frustumCulled=i.frustumCulled),i.renderOrder!==void 0&&(n.renderOrder=i.renderOrder),i.userData!==void 0&&(n.userData=i.userData),i.layers!==void 0&&(n.layers.mask=i.layers),i.children!==void 0)for(var l=i.children,h=0;h<l.length;h++)n.add(this.parseObject(l[h],e,t));if(i.type==="LOD")for(var c=i.levels,f=0;f<c.length;f++){var g=c[f],v=n.getObjectByProperty("uuid",g.object);v!==void 0&&n.addLevel(v,g.distance)}return n}});var sre={UVMapping:sP,CubeReflectionMapping:rP,CubeRefractionMapping:ow,EquirectangularReflectionMapping:S3,EquirectangularRefractionMapping:lw,SphericalReflectionMapping:P3,CubeUVReflectionMapping:aP,CubeUVRefractionMapping:oP},XC={RepeatWrapping:bu,ClampToEdgeWrapping:Ra,MirroredRepeatWrapping:Zp},QC={NearestFilter:Zr,NearestMipMapNearestFilter:lP,NearestMipMapLinearFilter:hP,LinearFilter:ga,LinearMipMapNearestFilter:T3,LinearMipMapLinearFilter:g_};function JC(i){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=i!==void 0?i:ho,this.options=void 0}JC.prototype={constructor:JC,setOptions:function(e){return this.options=e,this},load:function(i,e,t,n){i===void 0&&(i=""),this.path!==void 0&&(i=this.path+i),i=this.manager.resolveURL(i);var s=this,r=bf.get(i);if(r!==void 0)return s.manager.itemStart(i),setTimeout(function(){e&&e(r),s.manager.itemEnd(i)},0),r;fetch(i).then(function(a){return a.blob()}).then(function(a){return s.options===void 0?createImageBitmap(a):createImageBitmap(a,s.options)}).then(function(a){bf.add(i,a),e&&e(a),s.manager.itemEnd(i)}).catch(function(a){n&&n(a),s.manager.itemError(i),s.manager.itemEnd(i)}),s.manager.itemStart(i)},setCrossOrigin:function(){return this},setPath:function(i){return this.path=i,this}};function $3(){this.type="ShapePath",this.color=new wi,this.subPaths=[],this.currentPath=null}Object.assign($3.prototype,{moveTo:function(i,e){this.currentPath=new Hs,this.subPaths.push(this.currentPath),this.currentPath.moveTo(i,e)},lineTo:function(i,e){this.currentPath.lineTo(i,e)},quadraticCurveTo:function(i,e,t,n){this.currentPath.quadraticCurveTo(i,e,t,n)},bezierCurveTo:function(i,e,t,n,s,r){this.currentPath.bezierCurveTo(i,e,t,n,s,r)},splineThru:function(i){this.currentPath.splineThru(i)},toShapes:function(i,e){function t(We){for(var Le=[],lt=0,st=We.length;lt<st;lt++){var De=We[lt],et=new Nc;et.curves=De.curves,Le.push(et)}return Le}function n(We,Le){for(var lt=Le.length,st=!1,De=lt-1,et=0;et<lt;De=et++){var Ke=Le[De],Ct=Le[et],dt=Ct.x-Ke.x,Et=Ct.y-Ke.y;if(Math.abs(Et)>Number.EPSILON){if(Et<0&&(Ke=Le[et],dt=-dt,Ct=Le[De],Et=-Et),We.y<Ke.y||We.y>Ct.y)continue;if(We.y===Ke.y){if(We.x===Ke.x)return!0}else{var ut=Et*(We.x-Ke.x)-dt*(We.y-Ke.y);if(ut===0)return!0;if(ut<0)continue;st=!st}}else{if(We.y!==Ke.y)continue;if(Ct.x<=We.x&&We.x<=Ke.x||Ke.x<=We.x&&We.x<=Ct.x)return!0}}return st}var s=Eu.isClockWise,r=this.subPaths;if(r.length===0)return[];if(e===!0)return t(r);var a,o,l,h=[];if(r.length===1)return o=r[0],l=new Nc,l.curves=o.curves,h.push(l),h;var c=!s(r[0].getPoints());c=i?!c:c;var f=[],g=[],v=[],A=0,P;g[A]=void 0,v[A]=[];for(var w=0,T=r.length;w<T;w++)o=r[w],P=o.getPoints(),a=s(P),a=i?!a:a,a?(!c&&g[A]&&A++,g[A]={s:new Nc,p:P},g[A].s.curves=o.curves,c&&A++,v[A]=[]):v[A].push({h:o,p:P[0]});if(!g[0])return t(r);if(g.length>1){for(var D=!1,M=[],B=0,O=g.length;B<O;B++)f[B]=[];for(var B=0,O=g.length;B<O;B++)for(var x=v[B],Z=0;Z<x.length;Z++){for(var de=x[Z],$=!0,me=0;me<g.length;me++)n(de.p,g[me].p)&&(B!==me&&M.push({froms:B,tos:me,hole:Z}),$?($=!1,f[me].push(de)):D=!0);$&&f[B].push(de)}M.length>0&&(D||(v=f))}for(var ue,w=0,Se=g.length;w<Se;w++){l=g[w].s,h.push(l),ue=v[w];for(var Te=0,Re=ue.length;Te<Re;Te++)l.holes.push(ue[Te].h)}return h}});function eO(i){this.type="Font",this.data=i}Object.assign(eO.prototype,{isFont:!0,generateShapes:function(i,e){e===void 0&&(e=100);for(var t=[],n=rre(i,e,this.data),s=0,r=n.length;s<r;s++)Array.prototype.push.apply(t,n[s].toShapes());return t}});function rre(i,e,t){for(var n=Array.from?Array.from(i):String(i).split(""),s=e/t.resolution,r=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,a=[],o=0,l=0,h=0;h<n.length;h++){var c=n[h];if(c===`
`)o=0,l-=r;else{var f=are(c,s,o,l,t);o+=f.offsetX,a.push(f.path)}}return a}function are(i,e,t,n,s){var r=s.glyphs[i]||s.glyphs["?"];if(r){var a=new $3,o,l,h,c,f,g,v,A;if(r.o)for(var P=r._cachedOutline||(r._cachedOutline=r.o.split(" ")),w=0,T=P.length;w<T;){var D=P[w++];switch(D){case"m":o=P[w++]*e+t,l=P[w++]*e+n,a.moveTo(o,l);break;case"l":o=P[w++]*e+t,l=P[w++]*e+n,a.lineTo(o,l);break;case"q":h=P[w++]*e+t,c=P[w++]*e+n,f=P[w++]*e+t,g=P[w++]*e+n,a.quadraticCurveTo(f,g,h,c);break;case"b":h=P[w++]*e+t,c=P[w++]*e+n,f=P[w++]*e+t,g=P[w++]*e+n,v=P[w++]*e+t,A=P[w++]*e+n,a.bezierCurveTo(f,g,v,A,h,c);break}}return{offsetX:r.ha*e,path:a}}}function ore(i){this.manager=i!==void 0?i:ho}Object.assign(ore.prototype,{load:function(i,e,t,n){var s=this,r=new Jh(this.manager);r.setPath(this.path),r.load(i,function(a){var o;try{o=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),o=JSON.parse(a.substring(65,a.length-2))}var l=s.parse(o);e&&e(l)},t,n)},parse:function(i){return new eO(i)},setPath:function(i){return this.path=i,this}});function Tb(){}Tb.Handlers={handlers:[],add:function(i,e){this.handlers.push(i,e)},get:function(i){for(var e=this.handlers,t=0,n=e.length;t<n;t+=2){var s=e[t],r=e[t+1];if(s.test(i))return r}return null}};Object.assign(Tb.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(i,e,t){for(var n=[],s=0;s<i.length;++s)n[s]=this.createMaterial(i[s],e,t);return n},createMaterial:function(){var i={NoBlending:Um,NormalBlending:bp,AdditiveBlending:nw,SubtractiveBlending:sw,MultiplyBlending:rw,CustomBlending:b3},e=new wi,t=new b_,n=new yP;return function(r,a,o){var l={};function h(v,A,P,w,T){var D=a+v,M=Tb.Handlers.get(D),B;M!==null?B=M.load(D):(t.setCrossOrigin(o),B=t.load(D)),A!==void 0&&(B.repeat.fromArray(A),A[0]!==1&&(B.wrapS=bu),A[1]!==1&&(B.wrapT=bu)),P!==void 0&&B.offset.fromArray(P),w!==void 0&&(w[0]==="repeat"&&(B.wrapS=bu),w[0]==="mirror"&&(B.wrapS=Zp),w[1]==="repeat"&&(B.wrapT=bu),w[1]==="mirror"&&(B.wrapT=Zp)),T!==void 0&&(B.anisotropy=T);var O=tn.generateUUID();return l[O]=B,O}var c={uuid:tn.generateUUID(),type:"MeshLambertMaterial"};for(var f in r){var g=r[f];switch(f){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=g;break;case"blending":c.blending=i[g];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",f,"is no longer supported.");break;case"colorDiffuse":c.color=e.fromArray(g).getHex();break;case"colorSpecular":c.specular=e.fromArray(g).getHex();break;case"colorEmissive":c.emissive=e.fromArray(g).getHex();break;case"specularCoef":c.shininess=g;break;case"shading":g.toLowerCase()==="basic"&&(c.type="MeshBasicMaterial"),g.toLowerCase()==="phong"&&(c.type="MeshPhongMaterial"),g.toLowerCase()==="standard"&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=h(g,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=h(g,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=h(g,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=h(g,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=h(g,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=g;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=h(g,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=g;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=h(g,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=h(g,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=h(g,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=h(g,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=Xr;break;case"doubleSided":c.side=Rf;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=g;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[f]=g;break;case"vertexColors":g===!0&&(c.vertexColors=Bf),g==="face"&&(c.vertexColors=v3);break;default:console.error("THREE.Loader.createMaterial: Unsupported",f,g);break}}return c.type==="MeshBasicMaterial"&&delete c.emissive,c.type!=="MeshPhongMaterial"&&delete c.specular,c.opacity<1&&(c.transparent=!0),n.setTextures(l),n.parse(c)}}()});var Iy,tO={getContext:function(){return Iy===void 0&&(Iy=new(window.AudioContext||window.webkitAudioContext)),Iy},setContext:function(i){Iy=i}};function iO(i){this.manager=i!==void 0?i:ho}Object.assign(iO.prototype,{load:function(i,e,t,n){var s=new Jh(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(i,function(r){var a=r.slice(0),o=tO.getContext();o.decodeAudioData(a,function(l){e(l)})},t,n)},setPath:function(i){return this.path=i,this}});function vP(){this.coefficients=[];for(var i=0;i<9;i++)this.coefficients.push(new Ae)}Object.assign(vP.prototype,{isSphericalHarmonics3:!0,set:function(i){for(var e=0;e<9;e++)this.coefficients[e].copy(i[e]);return this},zero:function(){for(var i=0;i<9;i++)this.coefficients[i].set(0,0,0);return this},getAt:function(i,e){var t=i.x,n=i.y,s=i.z,r=this.coefficients;return e=r[0]*.282095,e+=r[1]*.488603*n,e+=r[2]*.488603*s,e+=r[3]*.488603*t,e+=r[4]*1.092548*(t*n),e+=r[5]*1.092548*(n*s),e+=r[6]*.315392*(3*s*s-1),e+=r[7]*1.092548*(t*s),e+=r[8]*.546274*(t*t-n*n),e},getIrradianceAt:function(i,e){var t=i.x,n=i.y,s=i.z,r=this.coefficients;return e=r[0]*.886227,e+=r[1]*2*.511664*n,e+=r[2]*2*.511664*s,e+=r[3]*2*.511664*t,e+=r[4]*2*.429043*t*n,e+=r[5]*2*.429043*n*s,e+=r[6]*(.743125*s*s-.247708),e+=r[7]*2*.429043*t*s,e+=r[8]*.429043*(t*t-n*n),e},add:function(i){for(var e=0;e<9;e++)this.coefficients[e].add(i.coefficients[e]);return this},scale:function(i){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(i);return this},lerp:function(i,e){for(var t=0;t<9;t++)this.coefficients[t].lerp(i.coefficients[t],e);return this},equals:function(i){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(i.coefficients[e]))return!1;return!0},copy:function(i){return this.set(i.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(i){for(var e=this.coefficients,t=0;t<9;t++)e[t].fromArray(i,t*3);return this},toArray:function(){for(var i=[],e=this.coefficients,t=0;t<9;t++)e[t].toArray(i,t*3);return i}});Object.assign(vP,{getBasisAt:function(i,e){var t=i.x,n=i.y,s=i.z;e[0]=.282095,e[1]=.488603*n,e[2]=.488603*s,e[3]=.488603*t,e[4]=1.092548*t*n,e[5]=1.092548*n*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*t*s,e[8]=.546274*(t*t-n*n)}});function Wl(i,e){Es.call(this,void 0,e),this.sh=i!==void 0?i:new vP}Wl.prototype=Object.assign(Object.create(Es.prototype),{constructor:Wl,isLightProbe:!0,copy:function(i){return Es.prototype.copy.call(this,i),this.sh.copy(i.sh),this.intensity=i.intensity,this},toJSON:function(i){var e=Es.prototype.toJSON.call(this,i);return e}});function ZC(i,e,t){Wl.call(this,void 0,t);var n=new wi().set(i),s=new wi().set(e),r=new Ae(n.r,n.g,n.b),a=new Ae(s.r,s.g,s.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(a).multiplyScalar(o),this.sh.coefficients[1].copy(r).sub(a).multiplyScalar(l)}ZC.prototype=Object.assign(Object.create(Wl.prototype),{constructor:ZC,isHemisphereLightProbe:!0,copy:function(i){return Wl.prototype.copy.call(this,i),this},toJSON:function(i){var e=Wl.prototype.toJSON.call(this,i);return e}});function $C(i,e){Wl.call(this,void 0,e);var t=new wi().set(i);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}$C.prototype=Object.assign(Object.create(Wl.prototype),{constructor:$C,isAmbientLightProbe:!0,copy:function(i){return Wl.prototype.copy.call(this,i),this},toJSON:function(i){var e=Wl.prototype.toJSON.call(this,i);return e}});function lre(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ar,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ar,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(lre.prototype,{update:function(){var i,e,t,n,s,r,a,o,l=new Fi,h=new Fi;return function(f){var g=i!==this||e!==f.focus||t!==f.fov||n!==f.aspect*this.aspect||s!==f.near||r!==f.far||a!==f.zoom||o!==this.eyeSep;if(g){i=this,e=f.focus,t=f.fov,n=f.aspect*this.aspect,s=f.near,r=f.far,a=f.zoom;var v=f.projectionMatrix.clone();o=this.eyeSep/2;var A=o*s/e,P=s*Math.tan(tn.DEG2RAD*t*.5)/a,w,T;h.elements[12]=-o,l.elements[12]=o,w=-P*n+A,T=P*n+A,v.elements[0]=2*s/(T-w),v.elements[8]=(T+w)/(T-w),this.cameraL.projectionMatrix.copy(v),w=-P*n-A,T=P*n-A,v.elements[0]=2*s/(T-w),v.elements[8]=(T+w)/(T-w),this.cameraR.projectionMatrix.copy(v)}this.cameraL.matrixWorld.copy(f.matrixWorld).multiply(h),this.cameraR.matrixWorld.copy(f.matrixWorld).multiply(l)}}()});var np=90,sp=1;function xb(i,e,t,n){li.call(this),this.type="CubeCamera";var s=new ar(np,sp,i,e);s.up.set(0,-1,0),s.lookAt(new Ae(1,0,0)),this.add(s);var r=new ar(np,sp,i,e);r.up.set(0,-1,0),r.lookAt(new Ae(-1,0,0)),this.add(r);var a=new ar(np,sp,i,e);a.up.set(0,0,1),a.lookAt(new Ae(0,1,0)),this.add(a);var o=new ar(np,sp,i,e);o.up.set(0,0,-1),o.lookAt(new Ae(0,-1,0)),this.add(o);var l=new ar(np,sp,i,e);l.up.set(0,-1,0),l.lookAt(new Ae(0,0,1)),this.add(l);var h=new ar(np,sp,i,e);h.up.set(0,-1,0),h.lookAt(new Ae(0,0,-1)),this.add(h),n=n||{format:$c,magFilter:ga,minFilter:ga},this.renderTarget=new ef(t,t,n),this.renderTarget.texture.name="CubeCamera",this.update=function(c,f){this.parent===null&&this.updateMatrixWorld();var g=c.getRenderTarget(),v=this.renderTarget,A=v.texture.generateMipmaps;v.texture.generateMipmaps=!1,c.setRenderTarget(v,0),c.render(f,s),c.setRenderTarget(v,1),c.render(f,r),c.setRenderTarget(v,2),c.render(f,a),c.setRenderTarget(v,3),c.render(f,o),c.setRenderTarget(v,4),c.render(f,l),v.texture.generateMipmaps=A,c.setRenderTarget(v,5),c.render(f,h),c.setRenderTarget(g)},this.clear=function(c,f,g,v){for(var A=c.getRenderTarget(),P=this.renderTarget,w=0;w<6;w++)c.setRenderTarget(P,w),c.clear(f,g,v);c.setRenderTarget(A)}}xb.prototype=Object.create(li.prototype);xb.prototype.constructor=xb;function nO(i){this.autoStart=i!==void 0?i:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(nO.prototype,{start:function(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var i=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=(typeof performance>"u"?Date:performance).now();i=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=i}return i}});function eD(){li.call(this),this.type="AudioListener",this.context=tO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}eD.prototype=Object.assign(Object.create(li.prototype),{constructor:eD,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(i){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=i,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(i){return this.gain.gain.setTargetAtTime(i,this.context.currentTime,.01),this},updateMatrixWorld:function(){var i=new Ae,e=new wr,t=new Ae,n=new Ae,s=new nO;return function(a){li.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener,l=this.up;if(this.timeDelta=s.getDelta(),this.matrixWorld.decompose(i,e,t),n.set(0,0,-1).applyQuaternion(e),o.positionX){var h=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(i.x,h),o.positionY.linearRampToValueAtTime(i.y,h),o.positionZ.linearRampToValueAtTime(i.z,h),o.forwardX.linearRampToValueAtTime(n.x,h),o.forwardY.linearRampToValueAtTime(n.y,h),o.forwardZ.linearRampToValueAtTime(n.z,h),o.upX.linearRampToValueAtTime(l.x,h),o.upY.linearRampToValueAtTime(l.y,h),o.upZ.linearRampToValueAtTime(l.z,h)}else o.setPosition(i.x,i.y,i.z),o.setOrientation(n.x,n.y,n.z,l.x,l.y,l.z)}}()});function Kg(i){li.call(this),this.type="Audio",this.listener=i,this.context=i.context,this.gain=this.context.createGain(),this.gain.connect(i.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}Kg.prototype=Object.assign(Object.create(li.prototype),{constructor:Kg,getOutput:function(){return this.gain},setNodeSource:function(i){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=i,this.connect(),this},setMediaElementSource:function(i){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(i),this.connect(),this},setBuffer:function(i){return this.buffer=i,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}var i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,i.start(this.startTime,this.offset),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var i=1,e=this.filters.length;i<e;i++)this.filters[i-1].connect(this.filters[i]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var i=1,e=this.filters.length;i<e;i++)this.filters[i-1].disconnect(this.filters[i]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(i){return i||(i=[]),this.isPlaying===!0?(this.disconnect(),this.filters=i,this.connect()):this.filters=i,this},setDetune:function(i){if(this.detune=i,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(i){return this.setFilters(i?[i]:[])},setPlaybackRate:function(i){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=i,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(i){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=i,this.isPlaying===!0&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(i){return this.gain.gain.setTargetAtTime(i,this.context.currentTime,.01),this}});function tD(i){Kg.call(this,i),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}tD.prototype=Object.assign(Object.create(Kg.prototype),{constructor:tD,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(i){return this.panner.refDistance=i,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(i){return this.panner.rolloffFactor=i,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(i){return this.panner.distanceModel=i,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(i){return this.panner.maxDistance=i,this},setDirectionalCone:function(i,e,t){return this.panner.coneInnerAngle=i,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=t,this},updateMatrixWorld:function(){var i=new Ae,e=new wr,t=new Ae,n=new Ae;return function(r){if(li.prototype.updateMatrixWorld.call(this,r),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(i,e,t),n.set(0,0,1).applyQuaternion(e);var a=this.panner;if(a.positionX){var o=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(i.x,o),a.positionY.linearRampToValueAtTime(i.y,o),a.positionZ.linearRampToValueAtTime(i.z,o),a.orientationX.linearRampToValueAtTime(n.x,o),a.orientationY.linearRampToValueAtTime(n.y,o),a.orientationZ.linearRampToValueAtTime(n.z,o)}else a.setPosition(i.x,i.y,i.z),a.setOrientation(n.x,n.y,n.z)}}}()});function sO(i,e){this.analyser=i.context.createAnalyser(),this.analyser.fftSize=e!==void 0?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),i.getOutput().connect(this.analyser)}Object.assign(sO.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var i=0,e=this.getFrequencyData(),t=0;t<e.length;t++)i+=e[t];return i/e.length}});function rO(i,e,t){this.binding=i,this.valueSize=t;var n=Float64Array,s;switch(e){case"quaternion":s=this._slerp;break;case"string":case"bool":n=Array,s=this._select;break;default:s=this._lerp}this.buffer=new n(t*4),this._mixBufferRegion=s,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(rO.prototype,{accumulate:function(i,e){var t=this.buffer,n=this.valueSize,s=i*n+n,r=this.cumulativeWeight;if(r===0){for(var a=0;a!==n;++a)t[s+a]=t[a];r=e}else{r+=e;var o=e/r;this._mixBufferRegion(t,s,0,o,n)}this.cumulativeWeight=r},apply:function(i){var e=this.valueSize,t=this.buffer,n=i*e+e,s=this.cumulativeWeight,r=this.binding;if(this.cumulativeWeight=0,s<1){var a=e*3;this._mixBufferRegion(t,n,a,1-s,e)}for(var o=e,l=e+e;o!==l;++o)if(t[o]!==t[o+e]){r.setValue(t,n);break}},saveOriginalState:function(){var i=this.binding,e=this.buffer,t=this.valueSize,n=t*3;i.getValue(e,n);for(var s=t,r=n;s!==r;++s)e[s]=e[n+s%t];this.cumulativeWeight=0},restoreOriginalState:function(){var i=this.valueSize*3;this.binding.setValue(this.buffer,i)},_select:function(i,e,t,n,s){if(n>=.5)for(var r=0;r!==s;++r)i[e+r]=i[t+r]},_slerp:function(i,e,t,n){wr.slerpFlat(i,e,i,e,i,t,n)},_lerp:function(i,e,t,n,s){for(var r=1-n,a=0;a!==s;++a){var o=e+a;i[o]=i[o]*r+i[t+a]*n}}});var ZA="\\[\\]\\.:\\/";function aO(i,e,t){var n=t||va.parseTrackName(e);this._targetGroup=i,this._bindings=i.subscribe_(e,n)}Object.assign(aO.prototype,{getValue:function(i,e){this.bind();var t=this._targetGroup.nCachedObjects_,n=this._bindings[t];n!==void 0&&n.getValue(i,e)},setValue:function(i,e){for(var t=this._bindings,n=this._targetGroup.nCachedObjects_,s=t.length;n!==s;++n)t[n].setValue(i,e)},bind:function(){for(var i=this._bindings,e=this._targetGroup.nCachedObjects_,t=i.length;e!==t;++e)i[e].bind()},unbind:function(){for(var i=this._bindings,e=this._targetGroup.nCachedObjects_,t=i.length;e!==t;++e)i[e].unbind()}});function va(i,e,t){this.path=e,this.parsedPath=t||va.parseTrackName(e),this.node=va.findNode(i,this.parsedPath.nodeName)||i,this.rootNode=i}Object.assign(va,{Composite:aO,create:function(i,e,t){return i&&i.isAnimationObjectGroup?new va.Composite(i,e,t):new va(i,e,t)},sanitizeNodeName:function(){var i=new RegExp("["+ZA+"]","g");return function(t){return t.replace(/\s/g,"_").replace(i,"")}}(),parseTrackName:function(){var i="[^"+ZA+"]",e="[^"+ZA.replace("\\.","")+"]",t=/((?:WC+[\/:])*)/.source.replace("WC",i),n=/(WCOD+)?/.source.replace("WCOD",e),s=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",i),r=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",i),a=new RegExp("^"+t+n+s+r+"$"),o=["material","materials","bones"];return function(h){var c=a.exec(h);if(!c)throw new Error("PropertyBinding: Cannot parse trackName: "+h);var f={nodeName:c[2],objectName:c[3],objectIndex:c[4],propertyName:c[5],propertyIndex:c[6]},g=f.nodeName&&f.nodeName.lastIndexOf(".");if(g!==void 0&&g!==-1){var v=f.nodeName.substring(g+1);o.indexOf(v)!==-1&&(f.nodeName=f.nodeName.substring(0,g),f.objectName=v)}if(f.propertyName===null||f.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+h);return f}}(),findNode:function(i,e){if(!e||e===""||e==="root"||e==="."||e===-1||e===i.name||e===i.uuid)return i;if(i.skeleton){var t=i.skeleton.getBoneByName(e);if(t!==void 0)return t}if(i.children){var n=function(r){for(var a=0;a<r.length;a++){var o=r[a];if(o.name===e||o.uuid===e)return o;var l=n(o.children);if(l)return l}return null},s=n(i.children);if(s)return s}return null}});Object.assign(va.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,s=0,r=n.length;s!==r;++s)e[t++]=n[s]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,s=0,r=n.length;s!==r;++s)n[s]=e[t++]},function(e,t){for(var n=this.resolvedProperty,s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var i=this.node,e=this.parsedPath,t=e.objectName,n=e.propertyName,s=e.propertyIndex;if(i||(i=va.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=i),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!i){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(t){var r=e.objectIndex;switch(t){case"materials":if(!i.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!i.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}i=i.material.materials;break;case"bones":if(!i.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}i=i.skeleton.bones;for(var a=0;a<i.length;a++)if(i[a].name===r){r=a;break}break;default:if(i[t]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}i=i[t]}if(r!==void 0){if(i[r]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,i);return}i=i[r]}}var o=i[n];if(o===void 0){var l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",i);return}var h=this.Versioning.None;this.targetObject=i,i.needsUpdate!==void 0?h=this.Versioning.NeedsUpdate:i.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(s!==void 0){if(n==="morphTargetInfluences"){if(!i.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(i.geometry.isBufferGeometry){if(!i.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(i.geometry.morphAttributes.position[a].name===s){s=a;break}}else{if(!i.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(i.geometry.morphTargets[a].name===s){s=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][h]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(va.prototype,{_getValue_unbound:va.prototype.getValue,_setValue_unbound:va.prototype.setValue});function hre(){this.uuid=tn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var i={};this._indicesByUUID=i;for(var e=0,t=arguments.length;e!==t;++e)i[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}Object.assign(hre.prototype,{isAnimationObjectGroup:!0,add:function(){for(var i=this._objects,e=i.length,t=this.nCachedObjects_,n=this._indicesByUUID,s=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length,l=void 0,h=0,c=arguments.length;h!==c;++h){var f=arguments[h],g=f.uuid,v=n[g];if(v===void 0){v=e++,n[g]=v,i.push(f);for(var A=0,P=o;A!==P;++A)a[A].push(new va(f,s[A],r[A]))}else if(v<t){l=i[v];var w=--t,T=i[w];n[T.uuid]=v,i[v]=T,n[g]=w,i[w]=f;for(var A=0,P=o;A!==P;++A){var D=a[A],M=D[w],B=D[v];D[v]=M,B===void 0&&(B=new va(f,s[A],r[A])),D[w]=B}}else i[v]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=t},remove:function(){for(var i=this._objects,e=this.nCachedObjects_,t=this._indicesByUUID,n=this._bindings,s=n.length,r=0,a=arguments.length;r!==a;++r){var o=arguments[r],l=o.uuid,h=t[l];if(h!==void 0&&h>=e){var c=e++,f=i[c];t[f.uuid]=h,i[h]=f,t[l]=c,i[c]=o;for(var g=0,v=s;g!==v;++g){var A=n[g],P=A[c],w=A[h];A[h]=P,A[c]=w}}}this.nCachedObjects_=e},uncache:function(){for(var i=this._objects,e=i.length,t=this.nCachedObjects_,n=this._indicesByUUID,s=this._bindings,r=s.length,a=0,o=arguments.length;a!==o;++a){var l=arguments[a],h=l.uuid,c=n[h];if(c!==void 0)if(delete n[h],c<t){var f=--t,g=i[f],v=--e,A=i[v];n[g.uuid]=c,i[c]=g,n[A.uuid]=f,i[f]=A,i.pop();for(var P=0,w=r;P!==w;++P){var T=s[P],D=T[f],M=T[v];T[c]=D,T[f]=M,T.pop()}}else{var v=--e,A=i[v];n[A.uuid]=c,i[c]=A,i.pop();for(var P=0,w=r;P!==w;++P){var T=s[P];T[c]=T[v],T.pop()}}}this.nCachedObjects_=t},subscribe_:function(i,e){var t=this._bindingsIndicesByPath,n=t[i],s=this._bindings;if(n!==void 0)return s[n];var r=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,h=this.nCachedObjects_,c=new Array(l);n=s.length,t[i]=n,r.push(i),a.push(e),s.push(c);for(var f=h,g=o.length;f!==g;++f){var v=o[f];c[f]=new va(v,i,e)}return c},unsubscribe_:function(i){var e=this._bindingsIndicesByPath,t=e[i];if(t!==void 0){var n=this._paths,s=this._parsedPaths,r=this._bindings,a=r.length-1,o=r[a],l=i[a];e[l]=t,r[t]=o,r.pop(),s[t]=s[a],s.pop(),n[t]=n[a],n.pop()}}});function oO(i,e,t){this._mixer=i,this._clip=e,this._localRoot=t||null;for(var n=e.tracks,s=n.length,r=new Array(s),a={endingStart:$p,endingEnd:$p},o=0;o!==s;++o){var l=n[o].createInterpolant(null);r[o]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=r,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Gee,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(oO.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(i){return this._startTime=i,this},setLoop:function(i,e){return this.loop=i,this.repetitions=e,this},setEffectiveWeight:function(i){return this.weight=i,this._effectiveWeight=this.enabled?i:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(i){return this._scheduleFading(i,0,1)},fadeOut:function(i){return this._scheduleFading(i,1,0)},crossFadeFrom:function(i,e,t){if(i.fadeOut(e),this.fadeIn(e),t){var n=this._clip.duration,s=i._clip.duration,r=s/n,a=n/s;i.warp(1,r,e),this.warp(a,1,e)}return this},crossFadeTo:function(i,e,t){return i.crossFadeFrom(this,e,t)},stopFading:function(){var i=this._weightInterpolant;return i!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(i)),this},setEffectiveTimeScale:function(i){return this.timeScale=i,this._effectiveTimeScale=this.paused?0:i,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(i){return this.timeScale=this._clip.duration/i,this.stopWarping()},syncWith:function(i){return this.time=i.time,this.timeScale=i.timeScale,this.stopWarping()},halt:function(i){return this.warp(this._effectiveTimeScale,0,i)},warp:function(i,e,t){var n=this._mixer,s=n.time,r=this._timeScaleInterpolant,a=this.timeScale;r===null&&(r=n._lendControlInterpolant(),this._timeScaleInterpolant=r);var o=r.parameterPositions,l=r.sampleValues;return o[0]=s,o[1]=s+t,l[0]=i/a,l[1]=e/a,this},stopWarping:function(){var i=this._timeScaleInterpolant;return i!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(i)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(i,e,t,n){if(!this.enabled){this._updateWeight(i);return}var s=this._startTime;if(s!==null){var r=(i-s)*t;if(r<0||t===0)return;this._startTime=null,e=t*r}e*=this._updateTimeScale(i);var a=this._updateTime(e),o=this._updateWeight(i);if(o>0)for(var l=this._interpolants,h=this._propertyBindings,c=0,f=l.length;c!==f;++c)l[c].evaluate(a),h[c].accumulate(n,o)},_updateWeight:function(i){var e=0;if(this.enabled){e=this.weight;var t=this._weightInterpolant;if(t!==null){var n=t.evaluate(i)[0];e*=n,i>t.parameterPositions[1]&&(this.stopFading(),n===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(i){var e=0;if(!this.paused){e=this.timeScale;var t=this._timeScaleInterpolant;if(t!==null){var n=t.evaluate(i)[0];e*=n,i>t.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(i){var e=this.time+i,t=this._clip.duration,n=this.loop,s=this._loopCount,r=n===Wee;if(i===0)return s===-1?e:r&&(s&1)===1?t-e:e;if(n===Uee){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(e>=t)e=t;else if(e<0)e=0;else break e;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:i<0?-1:1})}}else{if(s===-1&&(i>=0?(s=0,this._setEndings(!0,this.repetitions===0,r)):this._setEndings(this.repetitions===0,!0,r)),e>=t||e<0){var a=Math.floor(e/t);e-=t*a,s+=Math.abs(a);var o=this.repetitions-s;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=i>0?t:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:i>0?1:-1});else{if(o===1){var l=i<0;this._setEndings(l,!l,r)}else this._setEndings(!1,!1,r);this._loopCount=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(r&&(s&1)===1)return this.time=e,t-e}return this.time=e,e},_setEndings:function(i,e,t){var n=this._interpolantSettings;t?(n.endingStart=dp,n.endingEnd=dp):(i?n.endingStart=this.zeroSlopeAtStart?dp:$p:n.endingStart=Yv,e?n.endingEnd=this.zeroSlopeAtEnd?dp:$p:n.endingEnd=Yv)},_scheduleFading:function(i,e,t){var n=this._mixer,s=n.time,r=this._weightInterpolant;r===null&&(r=n._lendControlInterpolant(),this._weightInterpolant=r);var a=r.parameterPositions,o=r.sampleValues;return a[0]=s,o[0]=e,a[1]=s+i,o[1]=t,this}});function iD(i){this._root=i,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}iD.prototype=Object.assign(Object.create(Hu.prototype),{constructor:iD,_bindAction:function(i,e){var t=i._localRoot||this._root,n=i._clip.tracks,s=n.length,r=i._propertyBindings,a=i._interpolants,o=t.uuid,l=this._bindingsByRootAndName,h=l[o];h===void 0&&(h={},l[o]=h);for(var c=0;c!==s;++c){var f=n[c],g=f.name,v=h[g];if(v!==void 0)r[c]=v;else{if(v=r[c],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,o,g));continue}var A=e&&e._propertyBindings[c].binding.parsedPath;v=new rO(va.create(t,g,A),f.ValueTypeName,f.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,o,g),r[c]=v}a[c].resultBuffer=v.buffer}},_activateAction:function(i){if(!this._isActiveAction(i)){if(i._cacheIndex===null){var e=(i._localRoot||this._root).uuid,t=i._clip.uuid,n=this._actionsByClip[t];this._bindAction(i,n&&n.knownActions[0]),this._addInactiveAction(i,t,e)}for(var s=i._propertyBindings,r=0,a=s.length;r!==a;++r){var o=s[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(i)}},_deactivateAction:function(i){if(this._isActiveAction(i)){for(var e=i._propertyBindings,t=0,n=e.length;t!==n;++t){var s=e[t];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(i)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var i=this;this.stats={actions:{get total(){return i._actions.length},get inUse(){return i._nActiveActions}},bindings:{get total(){return i._bindings.length},get inUse(){return i._nActiveBindings}},controlInterpolants:{get total(){return i._controlInterpolants.length},get inUse(){return i._nActiveControlInterpolants}}}},_isActiveAction:function(i){var e=i._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(i,e,t){var n=this._actions,s=this._actionsByClip,r=s[e];if(r===void 0)r={knownActions:[i],actionByRoot:{}},i._byClipCacheIndex=0,s[e]=r;else{var a=r.knownActions;i._byClipCacheIndex=a.length,a.push(i)}i._cacheIndex=n.length,n.push(i),r.actionByRoot[t]=i},_removeInactiveAction:function(i){var e=this._actions,t=e[e.length-1],n=i._cacheIndex;t._cacheIndex=n,e[n]=t,e.pop(),i._cacheIndex=null;var s=i._clip.uuid,r=this._actionsByClip,a=r[s],o=a.knownActions,l=o[o.length-1],h=i._byClipCacheIndex;l._byClipCacheIndex=h,o[h]=l,o.pop(),i._byClipCacheIndex=null;var c=a.actionByRoot,f=(i._localRoot||this._root).uuid;delete c[f],o.length===0&&delete r[s],this._removeInactiveBindingsForAction(i)},_removeInactiveBindingsForAction:function(i){for(var e=i._propertyBindings,t=0,n=e.length;t!==n;++t){var s=e[t];--s.referenceCount===0&&this._removeInactiveBinding(s)}},_lendAction:function(i){var e=this._actions,t=i._cacheIndex,n=this._nActiveActions++,s=e[n];i._cacheIndex=n,e[n]=i,s._cacheIndex=t,e[t]=s},_takeBackAction:function(i){var e=this._actions,t=i._cacheIndex,n=--this._nActiveActions,s=e[n];i._cacheIndex=n,e[n]=i,s._cacheIndex=t,e[t]=s},_addInactiveBinding:function(i,e,t){var n=this._bindingsByRootAndName,s=n[e],r=this._bindings;s===void 0&&(s={},n[e]=s),s[t]=i,i._cacheIndex=r.length,r.push(i)},_removeInactiveBinding:function(i){var e=this._bindings,t=i.binding,n=t.rootNode.uuid,s=t.path,r=this._bindingsByRootAndName,a=r[n],o=e[e.length-1],l=i._cacheIndex;o._cacheIndex=l,e[l]=o,e.pop(),delete a[s];e:{for(var h in a)break e;delete r[n]}},_lendBinding:function(i){var e=this._bindings,t=i._cacheIndex,n=this._nActiveBindings++,s=e[n];i._cacheIndex=n,e[n]=i,s._cacheIndex=t,e[t]=s},_takeBackBinding:function(i){var e=this._bindings,t=i._cacheIndex,n=--this._nActiveBindings,s=e[n];i._cacheIndex=n,e[n]=i,s._cacheIndex=t,e[t]=s},_lendControlInterpolant:function(){var i=this._controlInterpolants,e=this._nActiveControlInterpolants++,t=i[e];return t===void 0&&(t=new Sb(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),t.__cacheIndex=e,i[e]=t),t},_takeBackControlInterpolant:function(i){var e=this._controlInterpolants,t=i.__cacheIndex,n=--this._nActiveControlInterpolants,s=e[n];i.__cacheIndex=n,e[n]=i,s.__cacheIndex=t,e[t]=s},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(i,e){var t=e||this._root,n=t.uuid,s=typeof i=="string"?sl.findByName(t,i):i,r=s!==null?s.uuid:i,a=this._actionsByClip[r],o=null;if(a!==void 0){var l=a.actionByRoot[n];if(l!==void 0)return l;o=a.knownActions[0],s===null&&(s=o._clip)}if(s===null)return null;var h=new oO(this,s,e);return this._bindAction(h,o),this._addInactiveAction(h,r,n),h},existingAction:function(i,e){var t=e||this._root,n=t.uuid,s=typeof i=="string"?sl.findByName(t,i):i,r=s?s.uuid:i,a=this._actionsByClip[r];return a!==void 0&&a.actionByRoot[n]||null},stopAllAction:function(){var i=this._actions,e=this._nActiveActions,t=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var s=0;s!==e;++s)i[s].reset();for(var s=0;s!==n;++s)t[s].useCount=0;return this},update:function(i){i*=this.timeScale;for(var e=this._actions,t=this._nActiveActions,n=this.time+=i,s=Math.sign(i),r=this._accuIndex^=1,a=0;a!==t;++a){var o=e[a];o._update(n,i,s,r)}for(var l=this._bindings,h=this._nActiveBindings,a=0;a!==h;++a)l[a].apply(r);return this},getRoot:function(){return this._root},uncacheClip:function(i){var e=this._actions,t=i.uuid,n=this._actionsByClip,s=n[t];if(s!==void 0){for(var r=s.knownActions,a=0,o=r.length;a!==o;++a){var l=r[a];this._deactivateAction(l);var h=l._cacheIndex,c=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=h,e[h]=c,e.pop(),this._removeInactiveBindingsForAction(l)}delete n[t]}},uncacheRoot:function(i){var e=i.uuid,t=this._actionsByClip;for(var n in t){var s=t[n].actionByRoot,r=s[e];r!==void 0&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName,o=a[e];if(o!==void 0)for(var l in o){var h=o[l];h.restoreOriginalState(),this._removeInactiveBinding(h)}},uncacheAction:function(i,e){var t=this.existingAction(i,e);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}});function qw(i){typeof i=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),i=arguments[1]),this.value=i}qw.prototype.clone=function(){return new qw(this.value.clone===void 0?this.value:this.value.clone())};function nD(){Zt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}nD.prototype=Object.assign(Object.create(Zt.prototype),{constructor:nD,isInstancedBufferGeometry:!0,copy:function(i){return Zt.prototype.copy.call(this,i),this.maxInstancedCount=i.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)}});function sD(i,e,t){rf.call(this,i,e),this.meshPerAttribute=t||1}sD.prototype=Object.assign(Object.create(rf.prototype),{constructor:sD,isInstancedInterleavedBuffer:!0,copy:function(i){return rf.prototype.copy.call(this,i),this.meshPerAttribute=i.meshPerAttribute,this}});function rD(i,e,t,n){typeof t=="number"&&(n=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),fn.call(this,i,e,t),this.meshPerAttribute=n||1}rD.prototype=Object.assign(Object.create(fn.prototype),{constructor:rD,isInstancedBufferAttribute:!0,copy:function(i){return fn.prototype.copy.call(this,i),this.meshPerAttribute=i.meshPerAttribute,this}});function ure(i,e,t,n){this.ray=new zf(i,e),this.near=t||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function aD(i,e){return i.distance-e.distance}function zw(i,e,t,n){if(i.visible!==!1&&(i.raycast(e,t),n===!0))for(var s=i.children,r=0,a=s.length;r<a;r++)zw(s[r],e,t,!0)}Object.assign(ure.prototype,{linePrecision:1,set:function(i,e){this.ray.set(i,e)},setFromCamera:function(i,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(i.x,i.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(i.x,i.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(i,e,t){var n=t||[];return zw(i,this,n,e),n.sort(aD),n},intersectObjects:function(i,e,t){var n=t||[];if(Array.isArray(i)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var s=0,r=i.length;s<r;s++)zw(i[s],this,n,e);return n.sort(aD),n}});function cre(i,e,t){return this.radius=i!==void 0?i:1,this.phi=e!==void 0?e:0,this.theta=t!==void 0?t:0,this}Object.assign(cre.prototype,{set:function(i,e,t){return this.radius=i,this.phi=e,this.theta=t,this},clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.radius=i.radius,this.phi=i.phi,this.theta=i.theta,this},makeSafe:function(){var i=1e-6;return this.phi=Math.max(i,Math.min(Math.PI-i,this.phi)),this},setFromVector3:function(i){return this.setFromCartesianCoords(i.x,i.y,i.z)},setFromCartesianCoords:function(i,e,t){return this.radius=Math.sqrt(i*i+e*e+t*t),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(i,t),this.phi=Math.acos(tn.clamp(e/this.radius,-1,1))),this}});function dre(i,e,t){return this.radius=i!==void 0?i:1,this.theta=e!==void 0?e:0,this.y=t!==void 0?t:0,this}Object.assign(dre.prototype,{set:function(i,e,t){return this.radius=i,this.theta=e,this.y=t,this},clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.radius=i.radius,this.theta=i.theta,this.y=i.y,this},setFromVector3:function(i){return this.setFromCartesianCoords(i.x,i.y,i.z)},setFromCartesianCoords:function(i,e,t){return this.radius=Math.sqrt(i*i+t*t),this.theta=Math.atan2(i,t),this.y=e,this}});function lO(i,e){this.min=i!==void 0?i:new _t(1/0,1/0),this.max=e!==void 0?e:new _t(-1/0,-1/0)}Object.assign(lO.prototype,{set:function(i,e){return this.min.copy(i),this.max.copy(e),this},setFromPoints:function(i){this.makeEmpty();for(var e=0,t=i.length;e<t;e++)this.expandByPoint(i[e]);return this},setFromCenterAndSize:function(){var i=new _t;return function(t,n){var s=i.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.min.copy(i.min),this.max.copy(i.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(i){return i===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),i=new _t),this.isEmpty()?i.set(0,0):i.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(i){return i===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),i=new _t),this.isEmpty()?i.set(0,0):i.subVectors(this.max,this.min)},expandByPoint:function(i){return this.min.min(i),this.max.max(i),this},expandByVector:function(i){return this.min.sub(i),this.max.add(i),this},expandByScalar:function(i){return this.min.addScalar(-i),this.max.addScalar(i),this},containsPoint:function(i){return!(i.x<this.min.x||i.x>this.max.x||i.y<this.min.y||i.y>this.max.y)},containsBox:function(i){return this.min.x<=i.min.x&&i.max.x<=this.max.x&&this.min.y<=i.min.y&&i.max.y<=this.max.y},getParameter:function(i,e){return e===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new _t),e.set((i.x-this.min.x)/(this.max.x-this.min.x),(i.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(i){return!(i.max.x<this.min.x||i.min.x>this.max.x||i.max.y<this.min.y||i.min.y>this.max.y)},clampPoint:function(i,e){return e===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new _t),e.copy(i).clamp(this.min,this.max)},distanceToPoint:function(){var i=new _t;return function(t){var n=i.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(i){return this.min.max(i.min),this.max.min(i.max),this},union:function(i){return this.min.min(i.min),this.max.max(i.max),this},translate:function(i){return this.min.add(i),this.max.add(i),this},equals:function(i){return i.min.equals(this.min)&&i.max.equals(this.max)}});function hO(i,e){this.start=i!==void 0?i:new Ae,this.end=e!==void 0?e:new Ae}Object.assign(hO.prototype,{set:function(i,e){return this.start.copy(i),this.end.copy(e),this},clone:function(){return new this.constructor().copy(this)},copy:function(i){return this.start.copy(i.start),this.end.copy(i.end),this},getCenter:function(i){return i===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),i=new Ae),i.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(i){return i===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),i=new Ae),i.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(i,e){return e===void 0&&(console.warn("THREE.Line3: .at() target is now required"),e=new Ae),this.delta(e).multiplyScalar(i).add(this.start)},closestPointToPointParameter:function(){var i=new Ae,e=new Ae;return function(n,s){i.subVectors(n,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),a=e.dot(i),o=a/r;return s&&(o=tn.clamp(o,0,1)),o}}(),closestPointToPoint:function(i,e,t){var n=this.closestPointToPointParameter(i,e);return t===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),t=new Ae),this.delta(t).multiplyScalar(n).add(this.start)},applyMatrix4:function(i){return this.start.applyMatrix4(i),this.end.applyMatrix4(i),this},equals:function(i){return i.start.equals(this.start)&&i.end.equals(this.end)}});function Eb(i){li.call(this),this.material=i,this.render=function(){}}Eb.prototype=Object.create(li.prototype);Eb.prototype.constructor=Eb;Eb.prototype.isImmediateRenderObject=!0;function Vb(i,e,t,n){this.object=i,this.size=e!==void 0?e:1;var s=t!==void 0?t:16711680,r=n!==void 0?n:1,a=0,o=this.object.geometry;o&&o.isGeometry?a=o.faces.length*3:o&&o.isBufferGeometry&&(a=o.attributes.normal.count);var l=new Zt,h=new ni(a*2*3,3);l.addAttribute("position",h),Cs.call(this,l,new yn({color:s,linewidth:r})),this.matrixAutoUpdate=!1,this.update()}Vb.prototype=Object.create(Cs.prototype);Vb.prototype.constructor=Vb;Vb.prototype.update=function(){var i=new Ae,e=new Ae,t=new Nr;return function(){var s=["a","b","c"];this.object.updateMatrixWorld(!0),t.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var l=o.vertices,h=o.faces,c=0,f=0,g=h.length;f<g;f++)for(var v=h[f],A=0,P=v.vertexNormals.length;A<P;A++){var w=l[v[s[A]]],T=v.vertexNormals[A];i.copy(w).applyMatrix4(r),e.copy(T).applyMatrix3(t).normalize().multiplyScalar(this.size).add(i),a.setXYZ(c,i.x,i.y,i.z),c=c+1,a.setXYZ(c,e.x,e.y,e.z),c=c+1}else if(o&&o.isBufferGeometry)for(var D=o.attributes.position,M=o.attributes.normal,c=0,A=0,P=D.count;A<P;A++)i.set(D.getX(A),D.getY(A),D.getZ(A)).applyMatrix4(r),e.set(M.getX(A),M.getY(A),M.getZ(A)),e.applyMatrix3(t).normalize().multiplyScalar(this.size).add(i),a.setXYZ(c,i.x,i.y,i.z),c=c+1,a.setXYZ(c,e.x,e.y,e.z),c=c+1;a.needsUpdate=!0}}();function Yg(i,e){li.call(this),this.light=i,this.light.updateMatrixWorld(),this.matrix=i.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var t=new Zt,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,r=1,a=32;s<a;s++,r++){var o=s/a*Math.PI*2,l=r/a*Math.PI*2;n.push(Math.cos(o),Math.sin(o),1,Math.cos(l),Math.sin(l),1)}t.addAttribute("position",new ni(n,3));var h=new yn({fog:!1});this.cone=new Cs(t,h),this.add(this.cone),this.update()}Yg.prototype=Object.create(li.prototype);Yg.prototype.constructor=Yg;Yg.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};Yg.prototype.update=function(){var i=new Ae;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),i.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(i),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();function uO(i){var e=[];i&&i.isBone&&e.push(i);for(var t=0;t<i.children.length;t++)e.push.apply(e,uO(i.children[t]));return e}function jg(i){for(var e=uO(i),t=new Zt,n=[],s=[],r=new wi(0,0,1),a=new wi(0,1,0),o=0;o<e.length;o++){var l=e[o];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),s.push(r.r,r.g,r.b),s.push(a.r,a.g,a.b))}t.addAttribute("position",new ni(n,3)),t.addAttribute("color",new ni(s,3));var h=new yn({vertexColors:Bf,depthTest:!1,depthWrite:!1,transparent:!0});Cs.call(this,t,h),this.root=i,this.bones=e,this.matrix=i.matrixWorld,this.matrixAutoUpdate=!1}jg.prototype=Object.create(Cs.prototype);jg.prototype.constructor=jg;jg.prototype.updateMatrixWorld=function(){var i=new Ae,e=new Fi,t=new Fi;return function(s){var r=this.bones,a=this.geometry,o=a.getAttribute("position");t.getInverse(this.root.matrixWorld);for(var l=0,h=0;l<r.length;l++){var c=r[l];c.parent&&c.parent.isBone&&(e.multiplyMatrices(t,c.matrixWorld),i.setFromMatrixPosition(e),o.setXYZ(h,i.x,i.y,i.z),e.multiplyMatrices(t,c.parent.matrixWorld),i.setFromMatrixPosition(e),o.setXYZ(h+1,i.x,i.y,i.z),h+=2)}a.getAttribute("position").needsUpdate=!0,li.prototype.updateMatrixWorld.call(this,s)}}();function Xg(i,e,t){this.light=i,this.light.updateMatrixWorld(),this.color=t;var n=new rd(e,4,2),s=new ya({wireframe:!0,fog:!1});Ws.call(this,n,s),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}Xg.prototype=Object.create(Ws.prototype);Xg.prototype.constructor=Xg;Xg.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};Xg.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};function Qg(i,e){this.type="RectAreaLightHelper",this.light=i,this.color=e;var t=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],n=new Zt;n.addAttribute("position",new ni(t,3)),n.computeBoundingSphere();var s=new yn({fog:!1});rs.call(this,n,s);var r=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new Zt;a.addAttribute("position",new ni(r,3)),a.computeBoundingSphere(),this.add(new Ws(a,new ya({side:Xr,fog:!1}))),this.update()}Qg.prototype=Object.create(rs.prototype);Qg.prototype.constructor=Qg;Qg.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),this.color!==void 0)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var i=this.material.color,e=Math.max(i.r,i.g,i.b);e>1&&i.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}};Qg.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};function Jg(i,e,t){li.call(this),this.light=i,this.light.updateMatrixWorld(),this.matrix=i.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new af(e);n.rotateY(Math.PI*.5),this.material=new ya({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=Bf);var s=n.getAttribute("position"),r=new Float32Array(s.count*3);n.addAttribute("color",new fn(r,3)),this.add(new Ws(n,this.material)),this.update()}Jg.prototype=Object.create(li.prototype);Jg.prototype.constructor=Jg;Jg.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};Jg.prototype.update=function(){var i=new Ae,e=new wi,t=new wi;return function(){var s=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var r=s.geometry.getAttribute("color");e.copy(this.light.color),t.copy(this.light.groundColor);for(var a=0,o=r.count;a<o;a++){var l=a<o/2?e:t;r.setXYZ(a,l.r,l.g,l.b)}r.needsUpdate=!0}s.lookAt(i.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function Zg(i,e){this.lightProbe=i,this.size=e;var t={};t.GAMMA_OUTPUT="";var n=new ro({defines:t,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","	vNormal = normalize( normalMatrix * normal );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","	// matrix is assumed to be orthogonal","	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","	#ifdef GAMMA_OUTPUT","		return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","	#else","		return a;","	#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","	// normal is assumed to have unit length","	float x = normal.x, y = normal.y, z = normal.z;","	// band 0","	vec3 result = shCoefficients[ 0 ] * 0.886227;","	// band 1","	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","	// band 2","	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","	return result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","	vec3 normal = normalize( vNormal );","	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","	vec3 irradiance = shGetIrradianceAt( worldNormal, sh );","	vec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","	outgoingLight = linearToOutput( outgoingLight );","	gl_FragColor = vec4( outgoingLight, 1.0 );","}"].join(`
`)}),s=new rd(1,32,16);Ws.call(this,s,n),this.onBeforeRender()}Zg.prototype=Object.create(Ws.prototype);Zg.prototype.constructor=Zg;Zg.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};Zg.prototype.onBeforeRender=function(){return function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity}}();function Fw(i,e,t,n){i=i||10,e=e||10,t=new wi(t!==void 0?t:4473924),n=new wi(n!==void 0?n:8947848);for(var s=e/2,r=i/e,a=i/2,o=[],l=[],h=0,c=0,f=-a;h<=e;h++,f+=r){o.push(-a,0,f,a,0,f),o.push(f,0,-a,f,0,a);var g=h===s?t:n;g.toArray(l,c),c+=3,g.toArray(l,c),c+=3,g.toArray(l,c),c+=3,g.toArray(l,c),c+=3}var v=new Zt;v.addAttribute("position",new ni(o,3)),v.addAttribute("color",new ni(l,3));var A=new yn({vertexColors:Bf});Cs.call(this,v,A)}Fw.prototype=Object.assign(Object.create(Cs.prototype),{constructor:Fw,copy:function(i){return Cs.prototype.copy.call(this,i),this.geometry.copy(i.geometry),this.material.copy(i.material),this},clone:function(){return new this.constructor().copy(this)}});function Hw(i,e,t,n,s,r){i=i||10,e=e||16,t=t||8,n=n||64,s=new wi(s!==void 0?s:4473924),r=new wi(r!==void 0?r:8947848);var a=[],o=[],l,h,c,f,g,v,A;for(f=0;f<=e;f++)c=f/e*(Math.PI*2),l=Math.sin(c)*i,h=Math.cos(c)*i,a.push(0,0,0),a.push(l,0,h),A=f&1?s:r,o.push(A.r,A.g,A.b),o.push(A.r,A.g,A.b);for(f=0;f<=t;f++)for(A=f&1?s:r,v=i-i/t*f,g=0;g<n;g++)c=g/n*(Math.PI*2),l=Math.sin(c)*v,h=Math.cos(c)*v,a.push(l,0,h),o.push(A.r,A.g,A.b),c=(g+1)/n*(Math.PI*2),l=Math.sin(c)*v,h=Math.cos(c)*v,a.push(l,0,h),o.push(A.r,A.g,A.b);var P=new Zt;P.addAttribute("position",new ni(a,3)),P.addAttribute("color",new ni(o,3));var w=new yn({vertexColors:Bf});Cs.call(this,P,w)}Hw.prototype=Object.create(Cs.prototype);Hw.prototype.constructor=Hw;function $g(i,e,t,n){this.audio=i,this.range=e||1,this.divisionsInnerAngle=t||16,this.divisionsOuterAngle=n||2;var s=new Zt,r=this.divisionsInnerAngle+this.divisionsOuterAngle*2,a=new Float32Array((r*3+3)*3);s.addAttribute("position",new fn(a,3));var o=new yn({color:65280}),l=new yn({color:16776960});rs.call(this,s,[l,o]),this.update()}$g.prototype=Object.create(rs.prototype);$g.prototype.constructor=$g;$g.prototype.update=function(){var i=this.audio,e=this.range,t=this.divisionsInnerAngle,n=this.divisionsOuterAngle,s=tn.degToRad(i.panner.coneInnerAngle),r=tn.degToRad(i.panner.coneOuterAngle),a=s/2,o=r/2,l=0,h=0,c,f,g=this.geometry,v=g.attributes.position;g.clearGroups();function A(P,w,T,D){var M=(w-P)/T;for(v.setXYZ(l,0,0,0),h++,c=P;c<w;c+=M)f=l+h,v.setXYZ(f,Math.sin(c)*e,0,Math.cos(c)*e),v.setXYZ(f+1,Math.sin(Math.min(c+M,w))*e,0,Math.cos(Math.min(c+M,w))*e),v.setXYZ(f+2,0,0,0),h+=3;g.addGroup(l,h,D),l+=h,h=0}A(-o,-a,n,0),A(-a,a,t,1),A(a,o,n,0),v.needsUpdate=!0,s===r&&(this.material[0].visible=!1)};$g.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};function kb(i,e,t,n){this.object=i,this.size=e!==void 0?e:1;var s=t!==void 0?t:16776960,r=n!==void 0?n:1,a=0,o=this.object.geometry;o&&o.isGeometry?a=o.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Zt,h=new ni(a*2*3,3);l.addAttribute("position",h),Cs.call(this,l,new yn({color:s,linewidth:r})),this.matrixAutoUpdate=!1,this.update()}kb.prototype=Object.create(Cs.prototype);kb.prototype.constructor=kb;kb.prototype.update=function(){var i=new Ae,e=new Ae,t=new Nr;return function(){this.object.updateMatrixWorld(!0),t.getNormalMatrix(this.object.matrixWorld);for(var s=this.object.matrixWorld,r=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,l=a.faces,h=0,c=0,f=l.length;c<f;c++){var g=l[c],v=g.normal;i.copy(o[g.a]).add(o[g.b]).add(o[g.c]).divideScalar(3).applyMatrix4(s),e.copy(v).applyMatrix3(t).normalize().multiplyScalar(this.size).add(i),r.setXYZ(h,i.x,i.y,i.z),h=h+1,r.setXYZ(h,e.x,e.y,e.z),h=h+1}r.needsUpdate=!0}}();function e0(i,e,t){li.call(this),this.light=i,this.light.updateMatrixWorld(),this.matrix=i.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e===void 0&&(e=1);var n=new Zt;n.addAttribute("position",new ni([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var s=new yn({fog:!1});this.lightPlane=new rs(n,s),this.add(this.lightPlane),n=new Zt,n.addAttribute("position",new ni([0,0,0,0,0,1],3)),this.targetLine=new rs(n,s),this.add(this.targetLine),this.update()}e0.prototype=Object.create(li.prototype);e0.prototype.constructor=e0;e0.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};e0.prototype.update=function(){var i=new Ae,e=new Ae,t=new Ae;return function(){i.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),t.subVectors(e,i),this.lightPlane.lookAt(e),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=t.length()}}();function Cb(i){var e=new Zt,t=new yn({color:16777215,vertexColors:v3}),n=[],s=[],r={},a=new wi(16755200),o=new wi(16711680),l=new wi(43775),h=new wi(16777215),c=new wi(3355443);f("n1","n2",a),f("n2","n4",a),f("n4","n3",a),f("n3","n1",a),f("f1","f2",a),f("f2","f4",a),f("f4","f3",a),f("f3","f1",a),f("n1","f1",a),f("n2","f2",a),f("n3","f3",a),f("n4","f4",a),f("p","n1",o),f("p","n2",o),f("p","n3",o),f("p","n4",o),f("u1","u2",l),f("u2","u3",l),f("u3","u1",l),f("c","t",h),f("p","c",c),f("cn1","cn2",c),f("cn3","cn4",c),f("cf1","cf2",c),f("cf3","cf4",c);function f(v,A,P){g(v,P),g(A,P)}function g(v,A){n.push(0,0,0),s.push(A.r,A.g,A.b),r[v]===void 0&&(r[v]=[]),r[v].push(n.length/3-1)}e.addAttribute("position",new ni(n,3)),e.addAttribute("color",new ni(s,3)),Cs.call(this,e,t),this.camera=i,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=i.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=r,this.update()}Cb.prototype=Object.create(Cs.prototype);Cb.prototype.constructor=Cb;Cb.prototype.update=function(){var i,e,t=new Ae,n=new Wh;function s(r,a,o,l){t.set(a,o,l).unproject(n);var h=e[r];if(h!==void 0)for(var c=i.getAttribute("position"),f=0,g=h.length;f<g;f++)c.setXYZ(h[f],t.x,t.y,t.z)}return function(){i=this.geometry,e=this.pointMap;var a=1,o=1;n.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),s("c",0,0,-1),s("t",0,0,1),s("n1",-1,-1,-1),s("n2",a,-1,-1),s("n3",-1,o,-1),s("n4",a,o,-1),s("f1",-1,-1,1),s("f2",a,-1,1),s("f3",-1,o,1),s("f4",a,o,1),s("u1",a*.7,o*1.1,-1),s("u2",-1*.7,o*1.1,-1),s("u3",0,o*2,-1),s("cf1",-1,0,1),s("cf2",a,0,1),s("cf3",0,-1,1),s("cf4",0,o,1),s("cn1",-1,0,-1),s("cn2",a,0,-1),s("cn3",0,-1,-1),s("cn4",0,o,-1),i.getAttribute("position").needsUpdate=!0}}();function ad(i,e){this.object=i,e===void 0&&(e=16776960);var t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(8*3),s=new Zt;s.setIndex(new fn(t,1)),s.addAttribute("position",new fn(n,3)),Cs.call(this,s,new yn({color:e})),this.matrixAutoUpdate=!1,this.update()}ad.prototype=Object.create(Cs.prototype);ad.prototype.constructor=ad;ad.prototype.update=function(){var i=new zl;return function(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&i.setFromObject(this.object),!i.isEmpty()){var n=i.min,s=i.max,r=this.geometry.attributes.position,a=r.array;a[0]=s.x,a[1]=s.y,a[2]=s.z,a[3]=n.x,a[4]=s.y,a[5]=s.z,a[6]=n.x,a[7]=n.y,a[8]=s.z,a[9]=s.x,a[10]=n.y,a[11]=s.z,a[12]=s.x,a[13]=s.y,a[14]=n.z,a[15]=n.x,a[16]=s.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=s.x,a[22]=n.y,a[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();ad.prototype.setFromObject=function(i){return this.object=i,this.update(),this};ad.prototype.copy=function(i){return Cs.prototype.copy.call(this,i),this.object=i.object,this};ad.prototype.clone=function(){return new this.constructor().copy(this)};function Db(i,e){this.type="Box3Helper",this.box=i;var t=e!==void 0?e:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Zt;r.setIndex(new fn(n,1)),r.addAttribute("position",new ni(s,3)),Cs.call(this,r,new yn({color:t})),this.geometry.computeBoundingSphere()}Db.prototype=Object.create(Cs.prototype);Db.prototype.constructor=Db;Db.prototype.updateMatrixWorld=function(i){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),li.prototype.updateMatrixWorld.call(this,i))};function Ib(i,e,t){this.type="PlaneHelper",this.plane=i,this.size=e===void 0?1:e;var n=t!==void 0?t:16776960,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],r=new Zt;r.addAttribute("position",new ni(s,3)),r.computeBoundingSphere(),rs.call(this,r,new yn({color:n}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],o=new Zt;o.addAttribute("position",new ni(a,3)),o.computeBoundingSphere(),this.add(new Ws(o,new ya({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}Ib.prototype=Object.create(rs.prototype);Ib.prototype.constructor=Ib;Ib.prototype.updateMatrixWorld=function(i){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?Xr:v0,this.lookAt(this.plane.normal),li.prototype.updateMatrixWorld.call(this,i)};var Ly,$A;function Qr(i,e,t,n,s,r){li.call(this),i===void 0&&(i=new Ae(0,0,1)),e===void 0&&(e=new Ae(0,0,0)),t===void 0&&(t=1),n===void 0&&(n=16776960),s===void 0&&(s=.2*t),r===void 0&&(r=.2*s),Ly===void 0&&(Ly=new Zt,Ly.addAttribute("position",new ni([0,0,0,0,1,0],3)),$A=new Ru(0,.5,1,5,1),$A.translate(0,-.5,0)),this.position.copy(e),this.line=new rs(Ly,new yn({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ws($A,new ya({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(i),this.setLength(t,s,r)}Qr.prototype=Object.create(li.prototype);Qr.prototype.constructor=Qr;Qr.prototype.setDirection=function(){var i=new Ae,e;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(i.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(i,e))}}();Qr.prototype.setLength=function(i,e,t){e===void 0&&(e=.2*i),t===void 0&&(t=.2*e),this.line.scale.set(1,Math.max(0,i-e),1),this.line.updateMatrix(),this.cone.scale.set(t,e,t),this.cone.position.y=i,this.cone.updateMatrix()};Qr.prototype.setColor=function(i){this.line.material.color.copy(i),this.cone.material.color.copy(i)};Qr.prototype.copy=function(i){return li.prototype.copy.call(this,i,!1),this.line.copy(i.line),this.cone.copy(i.cone),this};Qr.prototype.clone=function(){return new this.constructor().copy(this)};function Uw(i){i=i||1;var e=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],t=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new Zt;n.addAttribute("position",new ni(e,3)),n.addAttribute("color",new ni(t,3));var s=new yn({vertexColors:Bf});Cs.call(this,n,s)}Uw.prototype=Object.create(Cs.prototype);Uw.prototype.constructor=Uw;Ei.create=function(i,e){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(Ei.prototype),i.prototype.constructor=i,i.prototype.getPoint=e,i};Object.assign(_u.prototype,{createPointsGeometry:function(i){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(i);return this.createGeometry(e)},createSpacedPointsGeometry:function(i){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(i);return this.createGeometry(e)},createGeometry:function(i){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Gi,t=0,n=i.length;t<n;t++){var s=i[t];e.vertices.push(new Ae(s.x,s.y,s.z||0))}return e}});Object.assign(Hs.prototype,{fromPoints:function(i){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)}});Object.create(oo.prototype);Object.create(oo.prototype);function cO(i){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),oo.call(this,i),this.type="catmullrom"}cO.prototype=Object.create(oo.prototype);Object.assign(cO.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Fw.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};jg.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Tb.prototype,{extractUrlBase:function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Q3.extractUrlBase(i)}});Object.assign(Z3.prototype,{setTexturePath:function(i){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(i)}});Object.assign(lO.prototype,{center:function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},size:function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)}});Object.assign(zl.prototype,{center:function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},isIntersectionSphere:function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},size:function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)}});hO.prototype.center=function(i){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(i)};Object.assign(tn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(i){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),tn.floorPowerOfTwo(i)},nextPowerOfTwo:function(i){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),tn.ceilPowerOfTwo(i)}});Object.assign(Nr.prototype,{flattenToArrayOffset:function(i,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)},multiplyVector3:function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(i){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(i)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Fi.prototype,{extractPosition:function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)},flattenToArrayOffset:function(i,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)},getPosition:function(){var i;return function(){return i===void 0&&(i=new Ae),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),i.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},multiplyVector4:function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)},crossVector:function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(i){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(i)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(i,e,t,n,s,r){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,e,n,t,s,r)}});Mh.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)};wr.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)};Object.assign(zf.prototype,{isIntersectionBox:function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},isIntersectionPlane:function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)},isIntersectionSphere:function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)}});Object.assign(ca.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(i,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,e)},midpoint:function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)},normal:function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)},plane:function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)}});Object.assign(ca,{barycoordFromPoint:function(i,e,t,n,s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ca.getBarycoord(i,e,t,n,s)},normal:function(i,e,t,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ca.getNormal(i,e,t,n)}});Object.assign(Nc.prototype,{extractAllPoints:function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)},extrude:function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new lf(this,i)},makeGeometry:function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new uf(this,i)}});Object.assign(_t.prototype,{fromAttribute:function(i,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)},distanceToManhattan:function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Ae.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)},getScaleFromMatrix:function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)},getColumnFromMatrix:function(i,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,i)},applyProjection:function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)},fromAttribute:function(i,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)},distanceToManhattan:function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(hs.prototype,{fromAttribute:function(i,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Gi.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});Object.assign(li.prototype,{getChildByName:function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(i,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,i)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}});Object.defineProperties(li.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(i){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=i}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(tb.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(bw.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});ib.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Ei.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(i){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=i}});ar.prototype.setLens=function(i,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(i)};Object.defineProperties(Es.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(i){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=i}},shadowCameraLeft:{set:function(i){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=i}},shadowCameraRight:{set:function(i){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=i}},shadowCameraTop:{set:function(i){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=i}},shadowCameraBottom:{set:function(i){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=i}},shadowCameraNear:{set:function(i){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=i}},shadowCameraFar:{set:function(i){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=i}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(i){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=i}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(i){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=i}},shadowMapHeight:{set:function(i){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=i}}});Object.defineProperties(fn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}});Object.assign(Zt.prototype,{addIndex:function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)},addDrawCall:function(i,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(Zt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.assign(Kh.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(qw.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(nn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new wi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===g3}}});Object.defineProperties(Ql.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ro.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(i){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=i}}});Object.assign(mP.prototype,{clearTarget:function(i,e,t,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(e,t,n)},animate:function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}});Object.defineProperties(mP.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=i}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=i}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(z3.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(ef.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}});Object.defineProperties(Uh.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=i}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=i}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=i}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=i}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(i){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=i}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(i){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=i}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(i){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=i}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(i){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=i}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(i){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=i}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(i){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=i}}});Object.defineProperties(H3.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}});Kg.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,t=new iO;return t.load(i,function(n){e.setBuffer(n)}),this};sO.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};xb.prototype.updateCubeMap=function(i,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,e)};ed.crossOrigin=void 0;ed.loadTexture=function(i,e,t,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var s=new b_;s.setCrossOrigin(this.crossOrigin);var r=s.load(i,t,void 0,n);return e&&(r.mapping=e),r};ed.loadTextureCube=function(i,e,t,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var s=new X3;s.setCrossOrigin(this.crossOrigin);var r=s.load(i,t,void 0,n);return e&&(r.mapping=e),r};ed.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ed.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const pre=i=>{_n.addListener(()=>{_n.reset(),i()}),_n.stageComplete(),self.phet.joist.launchCalled=!0};class en{constructor(e,t,n){this.value=e,this.derivative=t,this.secondDerivative=n}static polynomialEaseInValue(e,t){return Math.pow(t,e)}static polynomialEaseOutValue(e,t){return 1-Math.pow(1-t,e)}static polynomialEaseInOutValue(e,t){return t<=.5?.5*Math.pow(2*t,e):1-en.polynomialEaseInOutValue(e,1-t)}static polynomialEaseInDerivative(e,t){return e*Math.pow(t,e-1)}static polynomialEaseOutDerivative(e,t){return e*Math.pow(1-t,e-1)}static polynomialEaseInOutDerivative(e,t){return t<=.5?Math.pow(2,e-1)*e*Math.pow(t,e-1):en.polynomialEaseInOutDerivative(e,1-t)}static polynomialEaseInSecondDerivative(e,t){return(e-1)*e*Math.pow(t,e-2)}static polynomialEaseOutSecondDerivative(e,t){return-(e-1)*e*Math.pow(1-t,e-2)}static polynomialEaseInOutSecondDerivative(e,t){return t<=.5?Math.pow(2,e-1)*(e-1)*e*Math.pow(t,e-2):-en.polynomialEaseInOutSecondDerivative(e,1-t)}static polynomialEaseIn(e){return new en(en.polynomialEaseInValue.bind(null,e),en.polynomialEaseInDerivative.bind(null,e),en.polynomialEaseInSecondDerivative.bind(null,e))}static polynomialEaseOut(e){return new en(en.polynomialEaseOutValue.bind(null,e),en.polynomialEaseOutDerivative.bind(null,e),en.polynomialEaseOutSecondDerivative.bind(null,e))}static polynomialEaseInOut(e){return new en(en.polynomialEaseInOutValue.bind(null,e),en.polynomialEaseInOutDerivative.bind(null,e),en.polynomialEaseInOutSecondDerivative.bind(null,e))}}en.LINEAR=en.polynomialEaseIn(1);en.QUADRATIC_IN=en.polynomialEaseIn(2);en.QUADRATIC_OUT=en.polynomialEaseOut(2);en.QUADRATIC_IN_OUT=en.polynomialEaseInOut(2);en.CUBIC_IN=en.polynomialEaseIn(3);en.CUBIC_OUT=en.polynomialEaseOut(3);en.CUBIC_IN_OUT=en.polynomialEaseInOut(3);en.QUARTIC_IN=en.polynomialEaseIn(4);en.QUARTIC_OUT=en.polynomialEaseOut(4);en.QUARTIC_IN_OUT=en.polynomialEaseInOut(4);en.QUINTIC_IN=en.polynomialEaseIn(5);en.QUINTIC_OUT=en.polynomialEaseOut(5);en.QUINTIC_IN_OUT=en.polynomialEaseInOut(5);class Lh{constructor(e){this.startingValue=null,this.endingValue=null;const t=Ne()({setValue:null,getValue:null,property:null,object:null,attribute:null,to:null,delta:null,speed:null,from:null,easing:en.CUBIC_IN_OUT,blend:Lh.DEFAULT_BLEND,distance:Lh.DEFAULT_DISTANCE,add:Lh.DEFAULT_ADD},e);t.object&&(t.setValue=Lh.OBJECT_SET(t.object,t.attribute),t.getValue=Lh.OBJECT_GET(t.object,t.attribute)),t.property&&(t.setValue=Lh.PROPERTY_SET(t.property),t.getValue=Lh.PROPERTY_GET(t.property)),this.getValue=t.getValue,this.setValue=t.setValue,this.easing=t.easing,this.from=t.from,this.to=t.to,this.delta=t.delta,this.speed=t.speed,this.blend=t.blend,this.distance=t.distance,this.add=t.add}static DEFAULT_BLEND(e,t,n){if(n===0)return e;if(n===1)return t;if(typeof e=="number"&&typeof t=="number")return e+(t-e)*n;if(typeof e=="object"&&typeof t=="object"&&typeof e.blend=="function")return e.blend(t,n);throw new Error(`Blending not supported for: ${JSON.stringify(e)}, ${JSON.stringify(t)}, pass in a blend option`)}static DEFAULT_DISTANCE(e,t){if(typeof e=="number"&&typeof t=="number")return Math.abs(e-t);if(typeof e=="object"&&typeof t=="object"&&typeof e.distance=="function")return e.distance(t);throw new Error(`Distance (required for speed) by default not supported for: ${JSON.stringify(e)}, ${JSON.stringify(t)}, pass in a distance option`)}static DEFAULT_ADD(e,t){if(typeof e=="number"&&typeof t=="number")return e+t;if(typeof e=="object"&&typeof t=="object"&&typeof e.plus=="function")return e.plus(t);throw new Error(`Addition (required for delta) by default not supported for: ${JSON.stringify(e)}, ${JSON.stringify(t)}, pass in an add option`)}static OBJECT_SET(e,t){return function(n){e[t]=n}}static OBJECT_GET(e,t){return function(){return e[t]}}static PROPERTY_SET(e){return function(t){e.value=t}}static PROPERTY_GET(e){return function(){return e.value}}computeStartEnd(){this.startingValue=this.from!==null?this.from:this.getValue(),this.endingValue=this.to!==null?this.to:this.add(this.startingValue,this.delta)}update(e){this.setValue(this.blend(this.startingValue,this.endingValue,this.easing.value(e)))}hasPreferredDuration(){return this.speed!==null}getPreferredDuration(){return this.speed===null?null:this.speed*this.distance(this.startingValue,this.delta)}}class fre extends th{constructor(e){const t=Ne()({targets:null,duration:null,delay:0,stepEmitter:zn},e);super(t),this.length=0,this.remainingDelay=0,this.remainingAnimation=0,this.runningProperty=new Qt(!1),this.animatingProperty=new Qt(!1),this.startEmitter=new kn,this.beginEmitter=new kn,this.finishEmitter=new kn({parameters:[{valueType:"number"}]}),this.stopEmitter=new kn,this.endedEmitter=new kn({hasListenerOrderDependencies:!0}),this.updateEmitter=new kn,this.targets=(t.targets===null?[t]:t.targets).map(s=>new Lh(s)),this.duration=t.duration,this.delay=t.delay;const n=t.stepEmitter;if(n){const s=this.step.bind(this);this.runningProperty.link(r=>{r&&!n.hasListener(s)?n.addListener(s):!r&&n.hasListener(s)&&n.removeListener(s)}),this.disposeEmitter.addListener(()=>{n.hasListener(s)&&n.removeListener(s)})}}start(e){return this.runningProperty.value?this:(this.remainingDelay=this.delay,this.runningProperty.value=!0,this.startEmitter.emit(),this.step(e!==void 0?e:0),this)}stop(){return this.runningProperty.value?(this.runningProperty.value=!1,this.stopEmitter.emit(),this.endedEmitter.emit(),this):this}step(e){if(!this.runningProperty.value)return this;if(!this.animatingProperty.value){if(this.remainingDelay-=e,e=-this.remainingDelay,this.remainingDelay>0)return this;this.length=this.duration;for(let n=0;n<this.targets.length;n++){const s=this.targets[n];s.computeStartEnd(),this.length===null&&(this.length=s.getPreferredDuration())}this.remainingAnimation=this.length,this.animatingProperty.value=!0,this.beginEmitter.emit()}this.remainingAnimation-=e,e=-this.remainingAnimation;const t=this.length>0?Xn((this.length-this.remainingAnimation)/this.length,0,1):1;for(let n=0;n<this.targets.length;n++)this.targets[n].update(t);return this.updateEmitter.emit(),t===1&&(this.animatingProperty.value=!1,this.runningProperty.value=!1,this.finishEmitter.emit(e),this.endedEmitter.emit()),this}then(e){return this.finishEmitter.addListener(t=>e.start(t)),e}dispose(){this.runningProperty.dispose(),this.animatingProperty.dispose(),this.startEmitter.dispose(),this.beginEmitter.dispose(),this.finishEmitter.dispose(),this.stopEmitter.dispose(),this.endedEmitter.dispose(),this.updateEmitter.dispose(),super.dispose()}}const mre=new Fe(new He("SCENERY_PHET/a11y.info",{en:"Info"},R.OPT_OUT),R.OPT_OUT),gre="M13.68,0C6.12,0,0,6.12,0,13.68s6.12,13.68,13.68,13.68,13.68-6.12,13.68-13.68S21.23,0,13.68,0ZM12.12,6.74c.45-.45.98-.67,1.61-.67s1.15.22,1.6.67c.45.45.67.98.67,1.6,0,.66-.22,1.2-.67,1.63-.45.43-.98.65-1.6.65s-1.16-.22-1.61-.67c-.45-.45-.67-.98-.67-1.61s.22-1.15.67-1.6ZM16.84,21.29h-6.31v-2.22h1.56v-5.16h-1.56v-2.25h4.79v7.41h1.52v2.22Z",yre=new zt(gre);class vre extends tP{constructor(e){const t=Ne()({iconFill:"rgb( 41, 106, 163 )",baseColor:"rgb( 238, 238, 238 )",xMargin:10,yMargin:10,touchAreaDilation:10,accessibleName:mre},e);t.content=new bi(yre,{scale:1.45,fill:t.iconFill}),super(t)}}const bre={up:0,down:Math.PI,left:-Math.PI/2,right:Math.PI/2};class oD extends Lf{constructor(e){const t=Ne()({arrowDirection:"up",arrowSize:new ji(20,7),arrowPathOptions:{stroke:"black",lineWidth:3,lineCap:"round"},baseColor:"rgba( 200, 200, 200, 0.5 )",buttonAppearanceStrategy:rh.FlatAppearanceStrategy,cornerRadius:4},e);let n=null;t.stroke===void 0&&(n=new Rs(t.baseColor,{luminanceFactor:-.8}),t.stroke=n);let s=new zt().moveTo(0,0).lineTo(t.arrowSize.width/2,-t.arrowSize.height).lineTo(t.arrowSize.width,0);s=s.transformed(It.rotation2(bre[t.arrowDirection])),t.content=new bi(s,t.arrowPathOptions);const r=t.arrowDirection,a=t.cornerRadius;if(t.leftTopCornerRadius=r==="up"||r==="left"?a:0,t.rightTopCornerRadius=r==="up"||r==="right"?a:0,t.leftBottomCornerRadius=r==="down"||r==="left"?a:0,t.rightBottomCornerRadius=r==="down"||r==="right"?a:0,r==="up"||r==="down"){const o=t.mouseAreaYDilation/2||0,l=t.touchAreaYDilation/2||0;t.mouseAreaYDilation=o,t.touchAreaYDilation=l,t.mouseAreaYShift=r==="up"?-o:o,t.touchAreaYShift=r==="up"?-l:l}else{const o=t.mouseAreaXDilation/2||0,l=t.touchAreaXDilation/2||0;t.mouseAreaXDilation=o,t.touchAreaXDilation=l,t.mouseAreaXShift=r==="left"?-o:o,t.touchAreaXShift=r==="left"?-l:l}super(t),this.customStrokeProperty=n}dispose(){this.customStrokeProperty&&this.customStrokeProperty.dispose(),super.dispose()}}const _re=new ji(20,7);class Are extends Ge{constructor(e,t){let n=!1;const s=Ne()({orientation:"horizontal",fill:"white",stroke:"black",lineWidth:1,cornerRadius:4,defaultPageNumber:0,itemsPerPage:4,spacing:12,margin:6,alignBoxOptions:{phetioType:bM,phetioState:!0,visiblePropertyOptions:{phetioFeatured:!0}},buttonOptions:{xMargin:5,yMargin:5,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,baseColor:"rgba( 200, 200, 200, 0.5 )",disabledColor:K2.LIGHT_GRAY,lineWidth:1,arrowPathOptions:{stroke:"black",lineWidth:3},arrowSize:_re,enabledPropertyOptions:{phetioReadOnly:!0,phetioFeatured:!1},soundPlayer:$n.get("pushButton")},separatorsVisible:!1,separatorOptions:{stroke:"rgb( 180, 180, 180 )",lineWidth:.5,pickable:!1},animationEnabled:!0,animationOptions:{duration:.4,stepEmitter:zn,easing:en.CUBIC_IN_OUT},tandem:R.OPTIONAL,visiblePropertyOptions:{phetioFeatured:!0}},t);super(),this.isAnimatingProperty=new Qt(!1),this.animationEnabled=s.animationEnabled,this.items=e,this.itemsPerPage=s.itemsPerPage,this.defaultPageNumber=s.defaultPageNumber;const r=Ot.fromLayoutOrientation(s.orientation),a=new Bh,o=s.tandem.createTandem("items");this.carouselItemNodes=p0(e,o),this.alignBoxes=e.map((O,x)=>a.createBox(this.carouselItemNodes[x],Ut({tandem:O.tandemName?o.createTandem(O.tandemName):R.OPTIONAL},s.alignBoxOptions,O.alignBoxOptions))),this.scrollingNode=new wre(this,{children:this.alignBoxes,orientation:s.orientation,spacing:s.spacing,[`${r.opposite.coordinate}Margin`]:s.margin}),this.visibleAlignBoxesProperty=Dt.deriveAny(this.alignBoxes.map(O=>O.visibleProperty),()=>this.getVisibleAlignBoxes()),this.scrollingNode.childrenReorderedEmitter.addListener(()=>this.visibleAlignBoxesProperty.recomputeDerivation());const l=Ut({cornerRadius:s.cornerRadius},s.buttonOptions),h=s.separatorsVisible?new Ge({pickable:!1}):null,c=new Ge({children:s.separatorsVisible?[h,this.scrollingNode]:[this.scrollingNode]}),f=O=>Math.max(Math.ceil(O.length/s.itemsPerPage),1);this.numberOfPagesProperty=new Dt([this.visibleAlignBoxesProperty],O=>f(O),{isValidValue:O=>O>0});const g=f(this.alignBoxes);this.pageNumberProperty=new Ba(s.defaultPageNumber,{tandem:s.tandem.createTandem("pageNumberProperty"),numberType:"Integer",isValidValue:O=>O<this.numberOfPagesProperty.value&&O>=0,range:new qi(0,g-1),phetioFeatured:!0});const v=new Dt([this.numberOfPagesProperty],O=>O>1),A=new oD(Ut({arrowDirection:r===Ot.HORIZONTAL?"right":"down",tandem:s.tandem.createTandem("nextButton"),listener:()=>this.pageNumberProperty.set(this.pageNumberProperty.get()+1),enabledProperty:new Dt([this.pageNumberProperty,this.numberOfPagesProperty],(O,x)=>O<x-1),visibleProperty:v},l)),P=new oD(Ut({arrowDirection:r===Ot.HORIZONTAL?"left":"up",tandem:s.tandem.createTandem("previousButton"),listener:()=>this.pageNumberProperty.set(this.pageNumberProperty.get()-1),enabledProperty:new Dt([this.pageNumberProperty],O=>O>0),visibleProperty:v},l)),w=new Ge({children:[c]}),T=new xt({cornerRadius:s.cornerRadius,fill:s.fill}),D=new xt({cornerRadius:s.cornerRadius,stroke:s.stroke,pickable:!1});this.carouselConstraint=new Sre(this,T,D,w,P,A,c,this.alignBoxes,r,this.scrollingNode,this.itemsPerPage,s.margin,a,h,s.separatorOptions);let M=null;const B=new pt(0,0,0,0);Cn.multilink([this.pageNumberProperty,c.localBoundsProperty],(O,x)=>{if(O>=this.numberOfPagesProperty.value)return;M&&M.stop();const Z=this.visibleAlignBoxesProperty.value[O*s.itemsPerPage],de=Z?-Z[r.minSide]+s.margin:0,$=B===null||!B.equals(x);B.set(x),this.animationEnabled&&!Yl?.value&&n&&!$?(M=new fre(Ut({},s.animationOptions,{to:de,getValue:()=>c[r.coordinate],setValue:me=>{c[r.coordinate]=me}})),M.endedEmitter.addListener(()=>this.isAnimatingProperty.set(!1)),M.start(),this.isAnimatingProperty.value=!0):c[r.coordinate]=de}),this.visibleAlignBoxesProperty.link(()=>{this.pageNumberProperty.value=Math.min(this.pageNumberProperty.value,this.numberOfPagesProperty.value-1)}),s.children=[T,w,A,P,D],this.disposeCarousel=()=>{this.visibleAlignBoxesProperty.dispose(),this.pageNumberProperty.dispose(),this.alignBoxes.forEach(O=>{O.dispose()}),this.scrollingNode.dispose(),this.carouselConstraint.dispose(),this.carouselItemNodes.forEach(O=>O.dispose())},this.mutate(s),n=!0}dispose(){this.disposeCarousel(),super.dispose()}reset(e=!1){const t=this.animationEnabled;this.animationEnabled=e,this.pageNumberProperty.value=Math.min(this.defaultPageNumber,this.numberOfPagesProperty.value-1),this.animationEnabled=t}scrollToItemVisibleIndex(e){this.pageNumberProperty.set(this.itemVisibleIndexToPageNumber(e))}scrollToItem(e){this.scrollToAlignBox(this.getAlignBoxForItem(e))}scrollToAlignBox(e){const t=this.visibleAlignBoxesProperty.value.indexOf(e);t>=0&&this.scrollToItemVisibleIndex(t)}setItemVisible(e,t){this.getAlignBoxForItem(e).visible=t}getAlignBoxForItem(e){return this.alignBoxes[this.items.indexOf(e)]}getNodeForItem(e){return this.carouselItemNodes[this.items.indexOf(e)]}itemVisibleIndexToPageNumber(e){return Math.floor(e/this.itemsPerPage)}getVisibleAlignBoxes(){return ie.sortBy(this.alignBoxes.filter(e=>e.visible),e=>this.scrollingNode.children.indexOf(e))}}class wre extends sh{constructor(e,t){super(t),this.carousel=e}onIndexedNodeIOChildMoved(e){this.carousel.scrollToAlignBox(e)}}class Sre extends Oo{constructor(e,t,n,s,r,a,o,l,h,c,f,g,v,A,P){super(e),this.carousel=e,this.backgroundNode=t,this.foregroundNode=n,this.windowNode=s,this.previousButton=r,this.nextButton=a,this.scrollingNodeContainer=o,this.alignBoxes=l,this.orientation=h,this.scrollingNode=c,this.itemsPerPage=f,this.margin=g,this.alignGroup=v,this.separatorLayer=A,this.separatorOptions=P,[this.backgroundNode,this.foregroundNode,this.windowNode,this.previousButton,this.nextButton,this.scrollingNodeContainer,...this.alignBoxes].forEach(w=>this.addNode(w,!1)),this.separatorLayer&&this.scrollingNode.constraint.finishedLayoutEmitter.addListener(()=>{this.updateSeparators()}),this.updateLayout()}updateSeparators(){const e=this.carousel.getVisibleAlignBoxes(),t=e.length>=2?ie.range(1,e.length):[];this.separatorLayer.children=t.map(n=>{const s=(e[n-1][this.orientation.maxSide]+e[n][this.orientation.minSide])/2;return new tM(Ut({[`${this.orientation.coordinate}1`]:s,[`${this.orientation.coordinate}2`]:s,[`${this.orientation.opposite.coordinate}2`]:this.scrollingNode[this.orientation.opposite.size]},this.separatorOptions))})}computeClipArea(){const e=this.orientation,t=this.carousel.getVisibleAlignBoxes();if(t.length===0)return new ji(0,0);{const n=t[this.itemsPerPage-1]||t[t.length-1],s=new ji(n[e.maxSide]-t[0][e.minSide]+2*this.margin,this.scrollingNodeContainer.boundsProperty.value[e.opposite.size]);return this.orientation===Ot.HORIZONTAL?s:s.swapped()}}getBackgroundDimension(){let e,t;if(this.orientation===Ot.HORIZONTAL){const n=this.nextButton.visible?this.nextButton.width:0,s=this.previousButton.visible?this.previousButton.width:0;e=this.windowNode.width+n+s,t=this.windowNode.height}else{const n=this.nextButton.visible?this.nextButton.height:0,s=this.previousButton.visible?this.previousButton.height:0;e=this.windowNode.width,t=this.windowNode.height+n+s}return new ji(e,t)}layout(){super.layout();const e=this.orientation,n=this.alignGroup.getMaxSizeProperty(e.opposite).value+2*this.margin;this.nextButton[e.opposite.preferredSize]=n,this.previousButton[e.opposite.preferredSize]=n,this.nextButton[e.opposite.centerCoordinate]=this.backgroundNode[e.opposite.centerCoordinate],this.previousButton[e.opposite.centerCoordinate]=this.backgroundNode[e.opposite.centerCoordinate],this.windowNode[e.opposite.centerCoordinate]=this.backgroundNode[e.opposite.centerCoordinate],this.previousButton[e.minSide]=this.backgroundNode[e.minSide],this.nextButton[e.maxSide]=this.backgroundNode[e.maxSide],this.windowNode[e.centerCoordinate]=this.backgroundNode[e.centerCoordinate];const s=this.computeClipArea().toBounds();this.windowNode.clipArea=zt.bounds(s),this.windowNode.localBounds=s;const r=this.getBackgroundDimension();this.carousel.backgroundWidth=r.width,this.carousel.backgroundHeight=r.height;const a=r.toBounds();this.backgroundNode.rectBounds=a,this.foregroundNode.rectBounds=a,this.separatorLayer&&this.updateSeparators()}}class Pre extends Ge{constructor(e,t,n){const s=Ne()({interactive:!1,orientation:"horizontal",dotRadius:3,lineWidth:1,dotSpacing:10,dotTouchAreaDilation:4,dotMouseAreaDilation:4,currentPageFill:"black",currentPageStroke:null,pageFill:"rgb( 200, 200, 200 )",pageStroke:null,tandem:R.REQUIRED,tandemNameSuffix:"PageControl",visiblePropertyOptions:{phetioFeatured:!0}},n),r=new Fa({press:f=>{f.currentTarget instanceof lD&&(e.value=f.currentTarget.pageNumber)},tandem:s.tandem.createTandem("pressListener")}),a={lineWidth:s.lineWidth,mouseArea:s.dotMouseAreaDilation===0?null:zt.circle(0,0,s.dotRadius+s.dotMouseAreaDilation),touchArea:s.dotTouchAreaDilation===0?null:zt.circle(0,0,s.dotRadius+s.dotTouchAreaDilation),boundsMethod:"unstroked",cursor:s.interactive?"pointer":null,inputListeners:s.interactive?[r]:[]},o=new sh({orientation:s.orientation,spacing:s.dotSpacing});let l=[];o.boundsProperty.link(()=>{o.center=Oe.ZERO});const h=f=>{l.forEach(g=>{g.fill=f===g.pageNumber?s.currentPageFill:s.pageFill,g.stroke=f===g.pageNumber?s.currentPageStroke:s.pageStroke})};e.link(h);const c=f=>{l=ie.range(0,f).map(g=>new lD(g,s.dotRadius,a)),o.children=l,h(e.value)};t.link(c),s.children=[o],super(s),this.disposePageControl=()=>{r.dispose(),t.unlink(c),e.unlink(h)}}dispose(){this.disposePageControl(),super.dispose()}}class lD extends ma{constructor(e,t,n){super(t,n),this.pageNumber=e}}class Tre extends nh(Ge){constructor(e,t,n){const s=Ne()({itemNodeOptions:{align:"left",overColor:ct.grayColor(245),selectedColor:"yellow",xMargin:6,yMargin:2},carouselOptions:{buttonOptions:{arrowSize:new ji(20,4)},orientation:"vertical",spacing:0,margin:0,itemsPerPage:15,phetioVisiblePropertyInstrumented:!1,phetioEnabledPropertyInstrumented:!1},pageControlOptions:{interactive:!0},buttonOptions:{arrowDirection:"down",baseColor:"rgb( 218, 236, 255 )",xMargin:6,yMargin:4},openedSoundPlayer:$n.get("generalOpen"),closedSoundPlayer:$n.get("generalClose"),tandem:R.OPTIONAL},n);s.carouselOptions.itemsPerPage=Math.min(s.carouselOptions.itemsPerPage,t.length),s.carouselOptions.tandem=s.carouselOptions.tandem||s.tandem.createTandem("carousel"),s.buttonOptions.tandem=s.buttonOptions.tandem||s.tandem.createTandem("button"),super();const r=new Bh,a=p0(t,s.tandem.createTandem("items")),o=ie.map(t,(T,D)=>({createNode:()=>new xre(e,T,a[D],r,s.itemNodeOptions)})),l=[],h=new Are(o,s.carouselOptions);l.push(h);let c=null;h.numberOfPagesProperty.value>1&&(c=new Pre(h.pageNumberProperty,h.numberOfPagesProperty,Ut({orientation:s.carouselOptions.orientation},s.pageControlOptions)),l.push(c));const f=new _i({spacing:4,children:l}),g=new _M(e,t,a,Ut({listener:()=>{f.visible=!f.visible},widthSizable:s.widthSizable,localPreferredWidthProperty:this.localPreferredWidthProperty,localMinimumWidthProperty:this.localMinimumWidthProperty},s.buttonOptions)),v=new Ai({spacing:0,align:"left",children:[g,f]});s.children=[v],this.mutate(s);const A=()=>{f.visible=!1};e.link(A),f.visibleProperty.lazyLink(T=>{T?s.openedSoundPlayer.play():s.closedSoundPlayer.play()});const P={down:T=>{if(!phet.chipper.isFuzzEnabled()||ol.nextDouble()<.25){const D=T.trail;!D.containsNode(g)&&!D.containsNode(h)&&(!c||!D.containsNode(c))&&(f.visible=!1)}}};let w=null;f.visibleProperty.link(T=>{T?(w=this.getUniqueTrail().rootNode().getRootedDisplays()[0],w.addInputListener(P)):w&&w.hasInputListener(P)&&(w.removeInputListener(P),w=null)}),this.disposeCarouselComboBox=()=>{e.unlink(A),g.dispose(),c&&c.dispose(),h.dispose(),a.forEach(T=>T.dispose())}}dispose(){this.disposeCarouselComboBox(),super.dispose()}}class xre extends Ge{constructor(e,t,n,s,r){const a=Ne()({align:"left",xMargin:6,yMargin:2,overColor:ct.grayColor(245),selectedColor:"yellow",tandem:R.OPTIONAL},r),o=new jl(n,{xAlign:a.align,group:s}),l=new xt(0,0,1,1);o.boundsProperty.link(f=>{l.setRectBounds(f.dilatedXY(a.xMargin,a.yMargin))}),a.children=[l,o],super(a);const h=new Fa({press:()=>{e.value=t.value},tandem:a.tandem.createTandem("pressListener")});this.addInputListener(h);const c=new Cn([e,h.isOverProperty],(f,g)=>{f===t.value?l.fill=a.selectedColor:g?l.fill=a.overColor:l.fill="transparent"});this.disposeCarouselItemNode=()=>{c.dispose()}}dispose(){this.disposeCarouselItemNode(),super.dispose()}}class pc{constructor(e){this.data=[],this.interval=e,this.id=Math.random()}insert(e,t,n,s,r,a,o,l,h,c,f){this.data.push(new Ere(e,t,n,s,r,a,o,l,h,c,f))}getX(e){let t=(e/this.interval).toFixed(0);return t>this.data.length-1&&(t=this.data.length-1),this.data[t].x}getY(e){let t=(e/this.interval).toFixed(0);return t>this.data.length-1&&(t=this.data.length-1),this.data[t].y}getCen(e){let t=(e/this.interval).toFixed(0);return t>this.data.length-1&&(t=this.data.length-1),this.data[t].cen}getCor(e){let t=(e/this.interval).toFixed(0);return t>this.data.length-1&&(t=this.data.length-1),this.data[t].cor}getXI(e){let t=(e/this.interval).toFixed(0);return t>this.data.length-1&&(t=this.data.length-1),this.data[t].xI}getYI(e){let t=(e/this.interval).toFixed(0);return t>this.data.length-1&&(t=this.data.length-1),this.data[t].yI}getV_X(e){let t=(e/this.interval).toFixed(0);return t>this.data.length-1&&(t=this.data.length-1),this.data[t].v_x}getV_Y(e){let t=(e/this.interval).toFixed(0);return t>this.data.length-1&&(t=this.data.length-1),this.data[t].v_y}}class Ere{constructor(e,t,n,s,r,a,o,l,h,c,f){this.time=e,this.x=t,this.y=n,this.v_xI=s,this.v_yI=r,this.xI=a,this.yI=o,this.cor=l,this.cen=h,this.v_x=c,this.v_y=f}}function My(i,e,t,n,s){try{e[0]=n.xdot({x:i[0],y:i[1],v_x:i[2],v_y:i[3]})}catch{}try{e[1]=n.ydot({x:i[0],y:i[1],v_x:i[2],v_y:i[3]})}catch{}try{e[2]=n.v_xdot({x:i[0],y:i[1],v_x:i[2],v_y:i[3]})}catch{}try{e[3]=n.v_ydot({x:i[0],y:i[1],v_x:i[2],v_y:i[3]})}catch{}return e}function Oy(i,e,t,n){return e[0]=i[2],e[1]=i[3],e[2]=2*t*i[3]+t**2*i[0],e[3]=-2*t*i[2]+t**2*i[1],e}function Vre(i,e,t,n,s,r,a,o,l){let c=e/6,f=e*.5,g=new Array(4).fill(0),v=new Array(4).fill(0),A=new Array(4).fill(0),P=new Array(4).fill(0),w=new Array(4).fill(0);g=l?My(i,g,r,o):Oy(i,g,r);for(let T=0;T<4;T++)v[T]=i[T]+f*g[T];A=l?My(v,A,r,o):Oy(v,A,r);for(let T=0;T<4;T++)v[T]=i[T]+f*A[T];P=l?My(v,P,r,o):Oy(v,P,r);for(let T=0;T<4;T++)v[T]=i[T]+e*P[T],P[T]+=A[T];A=l?My(v,A,r,o):Oy(v,A,r);for(let T=0;T<4;T++)w[T]=i[T]+c*(g[T]+A[T]+2*P[T]);return w}function kre(i,e,t,n,s,r){let a=i*Math.cos(s)-e*Math.sin(s),o=i*Math.sin(s)+e*Math.cos(s),l=t*Math.cos(s)-n*Math.sin(s),h=t*Math.sin(s)+n*Math.cos(s),c=l-r*o,f=h+r*a;return[a,o,c,f]}function Cre(i,e){return Math.sqrt(i**2+e**2)}function Vm(i,e,t,n,s,r,a,o,l,h,c,f,g,v,A,P){let w=0,T;for(T=[t,n,s,r];w<10&&Cre(T[0],T[1])<=175;){let D=h*w,M,B,O,x,Z,de;T=Vre(T,e,a,o,l,h,P,c,f),[Z,de]=[T[0],T[1]],[M,B,O,x]=kre(T[0],T[1],T[2],T[3],D,h);let $=2*h*T[3]*(T[0]/Math.sqrt(T[0]**2+T[1]**2))-2*h*T[2]*(T[1]/Math.sqrt(T[0]**2+T[1]**2)),me=h**2*(T[0]/Math.sqrt(T[0]**2+T[1]**2))*T[0]+h**2*(T[1]/Math.sqrt(T[0]**2+T[1]**2))*T[1];v.insert(w,M,B,O,x,Z,de,$,me,T[2],T[3]),w+=e}return v}async function dO(i,e,t,n,s,r,a,o,l,h,c){let f="https://coriolis-force-default-rtdb.firebaseio.com/.json",g=new Date,v={cookie:document.cookie,name:i,time:g.toLocaleString()+" "+String(g.getMilliseconds()-10)+" ms",action:e,x0:t,y0:n,v0x:s,v0y:r,omega:a,XFunc:o,YFunc:l,VdotX:h,VdotY:c};await fetch(f,{method:"POST",body:JSON.stringify(v),headers:{"Content-Type":"application/json"}}).then(A=>A.json())}function Dre(i){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length;let s=0;for(;s<i;)e+=t.charAt(Math.floor(Math.random()*n)),s+=1;return e}class Ire{constructor(){this.frameCount=1,this.k=0,this.gravity=9.8,this.x=0,this.y=0,this.v_x=10,this.v_y=0,this.omega=.5,this.mass=1,this.timer=0,this.quadraticDrag=!0,this.graphLen=5,this.originalLen=0,this.graphUpdateInterval=.001,this.simSpeed=1,this.coriolisEq=!0,this.graphData=new pc(this.graphUpdateInterval),this.graphDataTest=new pc(this.graphUpdateInterval),this.showForceVectors=!0,this.showRefForceVectors=!0,this.showTestForceVectors=!0,this.showRefForceVectors=!0,this.showTestForceVectors=!0,this.trailForceVectors=!1,this.trailRefForceVectors=!1,this.trailTestForceVectors=!1,this.resetDisable=!1,this.kProp=new Mt(this.k),this.xProp=new Mt(this.x),this.yProp=new Mt(this.y),this.v_xProp=new Mt(this.v_x),this.v_yProp=new Mt(this.v_y),this.omegaProp=new Mt(this.omega),this.massProp=new Mt(this.mass),this.graphData=new pc(this.graphUpdateInterval),this.simSpeedProp=new Mt(this.simSpeed),this.showForceProp=new Mt(!this.showForceVectors),this.showRefForceProp=new Mt(!this.showRefForceVectors),this.showTestForceProp=new Mt(!this.showTestForceVectors),this.trailForceVectorsProp=new Mt(!this.trailForceVectors),this.trailRefForceVectorsProp=new Mt(!this.trailRefForceVectors),this.trailTestForceVectorsProp=new Mt(!this.trailTestForceVectors),this.resetDisableProb=new Mt(this.resetDisable),this.graphData=Vm(this.quadraticDrag,this.graphUpdateInterval,this.x,this.y,this.v_x,this.v_y,this.gravity,this.k,this.mass,this.omega,{},!1,this.graphLen,this.graphData,this.timer,this.coriolisEq),this.action="start",this.xProp.link(e=>{Math.sqrt(Math.pow(e,2)+Math.pow(this.yProp.value,2))>175?this.resetDisableProb.value=!0:this.resetDisableProb.value=!1}),this.yProp.link(e=>{Math.sqrt(Math.pow(e,2)+Math.pow(this.xProp.value,2))>175?this.resetDisableProb.value=!0:this.resetDisableProb.value=!1}),document.cookie||(document.cookie=`name=${this.name?this.name:"unknown"} id=${Dre(20)}`),new URL(window.location.href).searchParams.get("formula")==="true"?(this.xEQ="v_x",this.yEQ="v_y",this.v_xEQ="2\\cdot o\\cdot v_y+o^2\\cdot x",this.v_yEQ="-2\\cdot o\\cdot v_x+o^2\\cdot y",this.xFunc=evaluatex(this.xEQ,{k:this.k,m:this.mass,g:this.gravity,o:this.omega,p:Math.PI,e:Math.E},{latex:!0}),this.yFunc=evaluatex(this.yEQ,{k:this.k,m:this.mass,g:this.gravity,o:this.omega,p:Math.PI,e:Math.E},{latex:!0}),this.v_xFunc=evaluatex(this.v_xEQ,{k:this.k,m:this.mass,g:this.gravity,o:this.omega,p:Math.PI,e:Math.E},{latex:!0}),this.v_yFunc=evaluatex(this.v_yEQ,{k:this.k,m:this.mass,g:this.gravity,o:this.omega,p:Math.PI,e:Math.E},{latex:!0}),this.graphDataTest=Vm(this.quadraticDrag,this.graphUpdateInterval,this.x,this.y,this.v_x,this.v_y,this.gravity,this.k,this.mass,this.omega,{v_xdot:this.v_xFunc,v_yFunc:this.v_yEQ,xdot:this.xFunc,ydot:this.yFunc},!0,this.graphLen,this.graphData,this.timer,this.coriolisEq)):(this.xEQ="",this.yEQ="",this.v_xEQ="",this.v_yEQ="",this.graphDataTest=new pc(this.graphUpdateInterval),this.graphDataTest.insert(0,0,0,0,0,0,0)),this.graphData=Vm(this.quadraticDrag,this.graphUpdateInterval,this.x,this.y,this.v_x,this.v_y,this.gravity,this.k,this.mass,this.omega,{},!1,this.graphLen,this.graphData,this.timer),this.graphLen=this.graphData.data.length*this.graphUpdateInterval,this.graphLenTest=this.graphDataTest.data.length*this.graphUpdateInterval}reset(e=""){this.frameCount=0,this.k=this.kProp.value,this.x=this.xProp.value,this.y=this.yProp.value,this.v_x=this.v_xProp.value,this.v_y=this.v_yProp.value,this.omega=this.omegaProp.value,this.mass=this.massProp.value,this.timer=0,this.quadraticDrag=!0,this.graphLen=5,this.originalLen=0,this.graphUpdateInterval=.001,this.simSpeed=this.simSpeedProp.value,this.graphData=new pc(this.graphUpdateInterval),this.xEQ===""||this.yEQ===""||this.v_xEQ===""||this.v_yEQ===""?(this.graphDataTest=new pc(this.graphUpdateInterval),this.graphDataTest.insert(0,0,0,0,0,0,0)):(this.xFunc=evaluatex(this.xEQ,{k:this.k,m:this.mass,g:this.gravity,o:this.omega,p:Math.PI,e:Math.E},{latex:!0}),this.yFunc=evaluatex(this.yEQ,{k:this.k,m:this.mass,g:this.gravity,o:this.omega,p:Math.PI,e:Math.E},{latex:!0}),this.v_xFunc=evaluatex(this.v_xEQ,{k:this.k,m:this.mass,g:this.gravity,o:this.omega,p:Math.PI,e:Math.E},{latex:!0}),this.v_yFunc=evaluatex(this.v_yEQ,{k:this.k,m:this.mass,g:this.gravity,o:this.omega,p:Math.PI,e:Math.E},{latex:!0}),this.graphDataTest=new pc(this.graphUpdateInterval),this.graphDataTest=Vm(this.quadraticDrag,this.graphUpdateInterval,this.x,this.y,this.v_x,this.v_y,this.gravity,this.k,this.mass,this.omega,{v_xdot:this.v_xFunc,v_ydot:this.v_yFunc,xdot:this.xFunc,ydot:this.yFunc},!0,this.graphLen,this.graphDataTest,this.timer,this.coriolisEq)),this.graphData=Vm(this.quadraticDrag,this.graphUpdateInterval,this.x,this.y,this.v_x,this.v_y,this.gravity,this.k,this.mass,this.omega,{},!1,this.graphLen,this.graphData,this.timer,this.coriolisEq),this.graphLenTest=this.graphDataTest.data.length*this.graphUpdateInterval,this.graphLen=this.graphData.data.length*this.graphUpdateInterval,e!==""&&(e==="Start"&&(this.action=""),setTimeout(()=>dO(this.name,e,this.xProp.value,this.yProp.value,this.v_xProp.value,this.v_yProp.value,this.omegaProp.value,this.xEQ,this.yEQ,this.v_xEQ,this.v_yEQ),10))}step(e){}}class Ny extends Ge{constructor(e,t){t=Object.assign({inputType:"text",domElement:null,xdotElement:null,ydotElement:null,v_ydotElement:null,v_xdotElement:null,onlyLetters:!1,width:null,initialText:"",equation:null,verifyEq:null,dom:null,linkObj:null,focusedEq:null},t),super(t),this.valueSubmittedEmitter=new kn,this.writeToEquation=function(o){this.mathField.write(o)};const n=e;this.domElement=t.dom;const s=window.MathQuill.getInterface(2).MathField(n,{handlers:{edit:function(){t.model[t.equation]=s.latex().replaceAll("\\theta"," t").replaceAll("\\Omega"," o").replaceAll("\\pi"," p").replaceAll("\\e"," e"),t.model.validEqs=t.verifyEq(t,t.model),setTimeout(()=>dO(t.model.name,"Changed "+t.model.value_changed,t.model.xProp.value,t.model.yProp.value,t.model.v_xProp.value,t.model.v_yProp.value,t.model.omegaProp.value,t.model.xEQ,t.model.yEQ,t.model.v_xEQ,t.model.v_yEQ),10)}}});this.mathField=s,s.write(t.initialText);const r=new Ge;this.equationInputNode=n;const a=new Vr(n,{allowInput:!0});r.addChild(a),this.addChild(r),this.disable=()=>{this.mathField.blur()},window.addEventListener("pointerdown",o=>{s.blur()}),this.domElement=n}updateText(e){this.mathField&&this.mathField.latex(e)}getElementValue(){return this.mathField.latex()}}function e2(i,e,t,n,s,r,a){const o={top:s/35,right:30,bottom:s/11.666666666666666,left:60},l=s-o.left-o.right,h=s-o.top-o.bottom,c=d3.min(i.data,T=>T.cor),f=d3.max(i.data,T=>T.cor),g=d3.min(r.data,T=>T.cor),v=d3.max(r.data,T=>T.cor);let A,P;r.data.length>5?(A=d3.scaleLinear().domain([0,Math.max(e,a)]).range([o.left,l+o.left]),P=d3.scaleLinear().domain([Math.min(c,g),Math.max(f,v)]).range([h-o.bottom,o.bottom])):(A=d3.scaleLinear().domain([0,e]).range([o.left,l+o.left]),P=d3.scaleLinear().domain([c,f]).range([h-o.bottom,o.bottom]));const w=d3.select(`#${t}`).append("svg").attr("width",l+o.left+o.right).attr("height",h+o.top+o.bottom);return w.append("g").attr("transform",`translate(0,${h-o.bottom})`).call(d3.axisBottom(A).ticks(5)),w.append("g").attr("transform",`translate(${o.left},0)`).call(d3.axisLeft(P).ticks(5)),w.append("path").datum(i.data).attr("fill","none").attr("stroke","red").style("stroke-dasharray","3, 3").attr("stroke-width",1.5).attr("d",d3.line().x(function(T){return A(T.time)}).y(function(T){return P(T.cor)})),w.append("path").datum(r.data).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",d3.line().x(function(T){return A(T.time)}).y(function(T){return P(T.cor)})),w.append("text").attr("transform","rotate(-90)").attr("x",-(h/2)).attr("y",25).style("text-anchor","middle").style("font-size","15px").style("font-style","italic").text("Coriolis Force (N)").append("tspan"),w.append("text").attr("transform","translate("+(l+o.left+o.right)/2+","+h+")").style("text-anchor","middle").style("font-size","20px").text("t (s)").attr("y",15).attr("x",13),w.selectAll("dot").data([50,50]).enter().append("circle").attr("r",3.5).attr("cx",A(50)+o.left).attr("cy",P(50)).attr("fill","blue").attr("stroke","blue"),w.selectAll("dot").data([50,50]).enter().append("circle").attr("r",3.5).attr("cx",A(50)+o.left).attr("cy",P(50)).attr("fill","red").attr("stroke","red"),{node:w.node(),x:A,y:P}}function t2(i,e,t,n,s,r,a){const o={top:s/35,right:30,bottom:s/11.666666666666666,left:60},l=s-o.left-o.right,h=s-o.top-o.bottom,c=d3.min(i.data,T=>T.cen),f=d3.max(i.data,T=>T.cen),g=d3.min(r.data,T=>T.cen),v=d3.max(r.data,T=>T.cen);let A,P;r.data.length>5?(A=d3.scaleLinear().domain([0,Math.max(e,a)]).range([o.left,l+o.left]),P=d3.scaleLinear().domain([Math.min(c,g),Math.max(f,v)]).range([h-o.bottom,o.bottom])):(A=d3.scaleLinear().domain([0,e]).range([o.left,l+o.left]),P=d3.scaleLinear().domain([c,f]).range([h-o.bottom,o.bottom]));const w=d3.select(`#${t}`).append("svg").attr("width",l+o.left+o.right).attr("height",h+o.top+o.bottom);return w.append("g").attr("transform",`translate(0,${h-o.bottom})`).call(d3.axisBottom(A).ticks(5)),w.append("g").attr("transform",`translate(${o.left},0)`).call(d3.axisLeft(P).ticks(5)),w.append("path").datum(i.data).attr("fill","none").attr("stroke","red").style("stroke-dasharray","3, 3").attr("stroke-width",1.5).attr("d",d3.line().x(function(T){return A(T.time)}).y(function(T){return P(T.cen)})),w.append("path").datum(r.data).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",d3.line().x(function(T){return A(T.time)}).y(function(T){return P(T.cen)})),w.append("text").attr("transform","rotate(-90)").attr("x",-(h/2)).attr("y",25).style("text-anchor","middle").style("font-size","15px").style("font-style","italic").text("Centrifugal Force (N)"),w.append("text").attr("transform","translate("+(l+o.left+o.right)/2+","+h+")").style("text-anchor","middle").style("font-size","20px").text("t (s)").attr("y",15).attr("x",13),w.selectAll("dot").data([50,50]).enter().append("circle").attr("r",3.5).attr("cx",A(50)+o.left).attr("cy",P(50)).attr("fill","blue").attr("stroke","blue"),w.selectAll("dot").data([50,50]).enter().append("circle").attr("r",3.5).attr("cx",A(50)+o.left).attr("cy",P(50)).attr("fill","red").attr("stroke","red"),{node:w.node(),x:A,y:P}}function Ry(i,e){let t=Lre(i.xdotElement,e,i.equation),n=Mre(i.v_xdotElement,e,i.equation),s=Ore(i.ydotElement,e,i.equation),r=Nre(i.v_ydotElement,e,i.equation);return t&&n&&s&&r}function Lre(i,e,t){if(e.xEQ==="")return Object.hasOwn(i,"domElement")?i.domElement.classList.remove("error"):i.classList.remove("error"),!0;let n=e.v_x,s=e.v_y,r=e.x,a=e.y,o=e.k,l=e.mass,h=e.gravity,c=e.omega,f;try{f=globalThis.window.evaluatex(e.xEQ,{k:o,g:h,v_x:n,v_y:s,m:l,x:r,y:a,o:c},{latex:!0})({})}catch(g){return console.log(g),t!=="xEQ"?void 0:(Object.hasOwn(i,"domElement")?i.domElement.classList.add("error"):i.classList.add("error"),!1)}return Object.hasOwn(i,"domElement")?i.domElement.classList.remove("error"):i.classList.remove("error"),!0}function Mre(i,e,t){if(e.v_xEQ==="")return Object.hasOwn(i,"domElement")?i.domElement.classList.remove("error"):i.classList.remove("error"),!0;let n=e.x,s=e.y,r=e.k,a=e.mass,o=e.gravity,l=e.x,h=e.omega,c=e.y,f;try{f=globalThis.window.evaluatex(e.v_xEQ,{k:r,g:o,v_x:n,v_y:s,m:a,x:l,y:c,o:h},{latex:!0})({})}catch{return t!=="v_xEQ"?void 0:(Object.hasOwn(i,"domElement")?i.domElement.classList.add("error"):i.classList.add("error"),!1)}return Object.hasOwn(i,"domElement")?i.domElement.classList.remove("error"):i.classList.remove("error"),!0}function Ore(i,e,t){if(e.yEQ==="")return Object.hasOwn(i,"domElement")?i.domElement.classList.remove("error"):i.classList.remove("error"),!0;let n=e.x,s=e.y,r=e.k,a=e.mass,o=e.x,l=e.y,h=e.omega,c=e.gravity,f;try{f=globalThis.window.evaluatex(e.yEQ,{k:r,g:c,v_x:n,v_y:s,m:a,x:o,y:l,o:h},{latex:!0})({})}catch{return t!=="yEQ"?void 0:(Object.hasOwn(i,"domElement")?i.domElement.classList.add("error"):i.classList.add("error"),!1)}return Object.hasOwn(i,"domElement")?i.domElement.classList.remove("error"):i.classList.remove("error"),!0}function Nre(i,e,t){if(e.v_yEQ==="")return Object.hasOwn(i,"domElement")?i.domElement.classList.remove("error"):i.classList.remove("error"),!0;let n=e.x,s=e.y,r=e.k,a=e.x,o=e.y,l=e.omega,h=e.mass,c=e.gravity,f;try{f=globalThis.window.evaluatex(e.v_yEQ,{k:r,g:c,v_x:n,v_y:s,m:h,x:a,y:o,o:l},{latex:!0})({})}catch{return t!=="v_yEQ"?void 0:(Object.hasOwn(i,"domElement")?i.domElement.classList.add("error"):i.classList.add("error"),!1)}return Object.hasOwn(i,"domElement")?i.domElement.classList.remove("error"):i.classList.remove("error"),!0}const Rre=800;class Bre extends Ua{constructor(e){const t=new pi("Guide For Writing In The Equation Boxes",{maxWidth:Rre}),s=["<sub>Square root: <i>\\sqrt{expression}</i></sub>","<sub>N-th root: <i>\\nthroot{expression}</i></sub>","<sub>Fraction: Enter the numerator, then press <i>/</i> to move to the denominator.</sub>","<sub>Exponent: x^2 (Type <i>^</i> after the base value)</sub>","<sub>Subscript: x_1 (Type <i>_</i> after the base value)</sub>","<sub>Multiplication dot: Press <i>Shift + 8</i></sub>","<sub>Parentheses: () (Press <i>Shift + 9</i> for ( and <i>Shift + 0</i> for ))</sub>","<sub>Pi (π): <i>\\pi</i></sub>","<sub>Sum: <i>+</i></sub>","<sub>Subtraction: <i>-</i></sub>"].map(a=>new pi(a)),r=new Ai({children:s,align:"left",spacing:11});super(r,{title:t,xSpacing:30,tandem:e,phetioReadOnly:!0})}}class qre extends Rh{constructor(e,t){super(t);const n=new y0({listener:()=>{this.interruptSubtreeInput(),e.reset(),this.reset()},right:this.layoutBounds.maxX-10,bottom:this.layoutBounds.maxY-10});this.layoutBounds.maxX=1400,this.graphSize=this.layoutBounds.maxX/7;const s=document.createElement("div");document.body.appendChild(s);const r=document.createElement("div");document.body.appendChild(r);const a=document.createElement("div");document.body.appendChild(a);const o=document.createElement("div");document.body.appendChild(o),this.rootNode=new Ge;const l=new Do(this.rootNode);l.updateOnRequestAnimationFrame(),l.resizeOnWindowResize(),document.body.appendChild(l.domElement),s.id="staticSim-dist",this.refDistanceCenterGraph=e2(e.graphData,e.graphLen,"staticSim-dist","reference",this.graphSize,e.graphDataTest,e.graphLenTest),this.yScaleD=this.refDistanceCenterGraph.y,this.xScaleD=this.refDistanceCenterGraph.x,r.id="staticSim-tv",this.refTangentialVelocityGraph=t2(e.graphData,e.graphLen,"staticSim-tv","reference",this.graphSize,e.graphDataTest,e.graphLenTest),this.yScaleTv=this.refTangentialVelocityGraph.y,this.xScaleTv=this.refTangentialVelocityGraph.x,this.refDistanceCenterGraph.node.offsetWidth=250,this.refDistanceCenterGraph.node.offsetHeight=250,this.refDistanceCenterGraph=new Vr(this.refDistanceCenterGraph.node),this.refDistanceCenterGraph.element.children[9].setAttribute("cx",this.xScaleD(0)),this.refDistanceCenterGraph.element.children[9].setAttribute("cy",this.yScaleD(e.graphData.getCor(0))),e.graphDataTest.data.length>10&&(this.refDistanceCenterGraph.element.children[7].setAttribute("cx",this.xScaleD(0)),this.refDistanceCenterGraph.element.children[7].setAttribute("cy",this.yScaleD(e.graphDataTest.getCor(0)))),this.addChild(this.refDistanceCenterGraph),this.refDistanceCenterGraph.leftTop=new Oe(1050,50),this.refTangentialVelocityGraph.node.offsetWidth=250,this.refTangentialVelocityGraph.node.offsetHeight=250,this.refTangentialVelocityGraph=new Vr(this.refTangentialVelocityGraph.node),this.refTangentialVelocityGraph.element.children[9].setAttribute("cx",this.xScaleTv(0)),this.refTangentialVelocityGraph.element.children[9].setAttribute("cy",this.yScaleTv(e.graphData.getCen(0))),e.graphDataTest.data.length>10&&(this.refTangentialVelocityGraph.element.children[7].setAttribute("cx",this.xScaleTv(0)),this.refTangentialVelocityGraph.element.children[7].setAttribute("cy",this.yScaleTv(e.graphDataTest.getCen(0)))),this.addChild(this.refTangentialVelocityGraph),this.refTangentialVelocityGraph.leftTop=new Oe(1225,50);const h=new Mt(!1),c=new Mt(!1),f=new Mt(!1),g=new Mt(!1),v=new Mt(!1),A=new Mt(!1),P=new Mt(!1),w=new du(e.simSpeedProp,new qi(0,3)),T=new du(e.massProp,new qi(0,10)),D=new pi("<em>m</em>"),M=new pi("init. pos. (<em>x<sub>0</sub></em>)"),B=new pi("init. pos. (<em>y<sub>0</sub></em>)"),O=new pi("init. vel. (<em>v<sub>0x</sub></em>)"),x=new pi("init. vel. (<em>v<sub>0y</sub></em>)"),Z=new pi("ang. vel. (<em>Ω</em>)"),de=new Ai({align:"left",children:[M,new xt(0,0,0,T.height-D.height+7),B,new xt(0,0,0,T.height-D.height+7),O,new xt(0,0,0,T.height-D.height+7),x,new xt(0,0,0,T.height-D.height+7),Z]}),$=new Ai({align:"center",children:[new du(e.xProp,new qi(-175,175)),new xt(0,0,0,10),new du(e.yProp,new qi(-175,175)),new xt(0,0,0,10),new du(e.v_xProp,new qi(-100,100)),new xt(0,0,0,10),new du(e.v_yProp,new qi(-100,100)),new xt(0,0,0,10),new du(e.omegaProp,new qi(0,10))]});e.yProp.value=e.y;const me=13,ue=new Ai({children:[new lp(v,!1,!0,{radius:me,content:new kt("✎",{fontSize:120,maxWidth:15})}),new xt(0,0,0,w.height-D.height+6),new lp(A,!1,!0,{radius:me,content:new kt("✎",{fontSize:120,maxWidth:15})}),new xt(0,0,0,T.height-D.height+6),new lp(f,!1,!0,{radius:me,content:new kt("✎",{fontSize:120,maxWidth:15})}),new xt(0,0,0,w.height-D.height+6),new lp(g,!1,!0,{radius:me,content:new kt("✎",{fontSize:120,maxWidth:15})}),new xt(0,0,0,T.height-D.height+6),new lp(P,!1,!0,{radius:me,content:new kt("✎",{fontSize:120,maxWidth:15})})]}),Se=new kt(new Dt([e.xProp],$t=>String(Number($t).toFixed(2))),{fontSize:20}),Te=new kt(new Dt([e.yProp],$t=>String(Number($t).toFixed(2))),{fontSize:20}),Re=new Ai({align:"left",children:[new xt(0,0,70,0),Se,new xt(0,0,0,T.height-D.height+10),Te,new xt(0,0,0,T.height-D.height+10),new kt(new Dt([e.v_xProp],$t=>String(Number($t).toFixed(2))),{fontSize:20}),new xt(0,0,0,T.height-D.height+10),new kt(new Dt([e.v_yProp],$t=>String(Number($t).toFixed(2))),{fontSize:20}),new xt(0,0,0,T.height-D.height+10),new kt(new Dt([e.omegaProp],$t=>String(Number($t).toFixed(2))),{fontSize:20})]}),We=new Ai({align:"left",children:[new pi("<span style='font-family: Roman;'>m</span>"),new xt(0,0,0,T.height-D.height+10),new pi("<span style='font-family: Roman;'>m</span>"),new xt(0,0,0,T.height-D.height+10),new pi("<span style='font-family: Roman;'>m/s</span>"),new xt(0,0,0,T.height-D.height+10),new pi("<span style='font-family: Roman;'>m/s</span>"),new xt(0,0,0,T.height-D.height+10),new pi("<span style='font-family: Roman;'>rot/s</span>")]}),Le=new nl(new Ai({align:"center",children:[new pi("Constants"),new xt(0,0,350,15),new _i({align:"center",children:[de,new xt(0,0,12,0),$,new xt(0,0,12,0),ue,new xt(0,0,12,0),Re,new xt(0,0,12,0),We]})]}),{fill:new ct("#d3d3d3"),maxWidth:230}),lt=new nl(new Ai({align:"center",children:[new pi("Components"),new xt(0,0,350,20),new _i({align:"center",children:[new pi("simSpeed"),w,new kt(new Dt([e.simSpeedProp],$t=>String(Number($t).toFixed(2))),{fontSize:20}),new xt(0,0,20,50),n]})]}),{fill:new ct("#d3d3d3"),maxWidth:230}),st=document.createElement("span"),De=document.createElement("span"),et=document.createElement("span"),Ke=document.createElement("span");st.classList.add("my-mathquill-input"),De.classList.add("my-mathquill-input"),et.classList.add("my-mathquill-input"),Ke.classList.add("my-mathquill-input");const Ct=new Ny(st,{initialText:e.xEQ,model:e,equation:"xEQ",verifyEq:Ry,dom:st,focusedEq:this.focusedEq,xdotElement:st,ydotElement:De,v_ydotElement:Ke,v_xdotElement:et});this.xdotField=Ct;const dt=new Ny(De,{initialText:e.yEQ,model:e,equation:"yEQ",verifyEq:Ry,dom:De,focusedEq:this.focusedEq,xdotElement:st,ydotElement:De,v_ydotElement:Ke,v_xdotElement:et});this.ydotField=dt;const Et=new Ny(et,{initialText:e.v_xEQ,model:e,equation:"v_xEQ",verifyEq:Ry,dom:et,focusedEq:this.focusedEq,xdotElement:st,ydotElement:De,v_ydotElement:Ke,v_xdotElement:et});this.v_xdotField=Et;const ut=new Ny(Ke,{initialText:e.v_yEQ,model:e,equation:"v_yEQ",verifyEq:Ry,dom:Ke,focusedEq:this.focusedEq,xdotElement:st,ydotElement:De,v_ydotElement:Ke,v_xdotElement:et});this.v_ydotField=ut,this.focusedEq=[e.xEQ,Ct,Ct.writeToEquation];const Wt=[this.focusedEq],Nt=new _i({preferredWidth:30,children:[Ct]});Nt.addInputListener({down:function($t){Ct.mathField.focus(),Wt[0][0]=e.xEQ,Wt[0][1]=Ct}});const ci=new _i({preferredWidth:30,children:[dt]});ci.addInputListener({down:function($t){dt.mathField.focus(),Wt[0][0]=e.yEQ,Wt[0][1]=dt}}),this.ydotBox=ci;const Yt=new _i({preferredWidth:30,children:[Et]});Yt.addInputListener({down:function($t){Et.mathField.focus(),Wt[0][0]=e.v_xEQ,Wt[0][1]=Et}});const Pe=new _i({preferredWidth:30,children:[ut]});Pe.addInputListener({down:function($t){ut.mathField.focus(),Wt[0][0]=e.v_yEQ,Wt[0][1]=ut}}),this.addChild(lt),e.simSpeedProp.link($t=>e.simSpeed=$t),this.addChild(Le);const pe=document.createElement("span");pe.innerHTML='<span style="position: relative; font-family: sans-serif; font-style: italic;">x=<span style="position: absolute; top: -0.35em; left: 0.09em;">&middot;</span><span style="position: absolute; top: -0.3em; left: 0.55em; font-size: 0.9em;">′</span></span>',pe.style.fontSize=`${this.graphSize/9}px`;const bt=new Vr(pe),wt=document.createElement("span");wt.innerHTML='<span style="position: relative; font-family: sans-serif; font-style: italic;">y=<span style="position: absolute; top: -0.35em; left: 0.09em;">&middot;</span><span style="position: absolute; top: -0.3em; left: 0.55em; font-size: 0.9em;">′</span></span>',wt.style.fontSize=`${this.graphSize/9}px`;const Gt=new Vr(wt),Ft=document.createElement("span");Ft.innerHTML='<span style="position: relative; font-family: sans-serif; font-style: italic;">v<sub>x</sub>=<span style="position: absolute; top: -0.3em; left: 0.55em; font-size: 0.9em;">′</span></span>',Ft.style.fontSize=`${this.graphSize/9}px`;const V=new Vr(Ft),te=document.createElement("span");te.innerHTML='<span style="position: relative; font-family: sans-serif; font-style: italic;">v<sub>y</sub>=<span style="position: absolute; top: -0.3em; left: 0.55em; font-size: 0.9em;">′</span></span>',te.style.fontSize=`${this.graphSize/9}px`;const fe=new Vr(te),_e=document.createElement("span");_e.innerHTML='<span style="position: relative; font-family: sans-serif; font-style: italic;">x=<span style="position: absolute; top: -0.35em; left: 0.09em;">&middot;</span><span style="position: absolute; top: -0.3em; left: 0.55em; font-size: 0.9em;"></span></span>',_e.style.fontSize=`${this.graphSize/9}px`,new Vr(_e);const ke=document.createElement("span");ke.innerHTML='<span style="position: relative; font-family: sans-serif; font-style: italic;">y=<span style="position: absolute; top: -0.35em; left: 0.09em;">&middot;</span><span style="position: absolute; top: -0.3em; left: 0.55em; font-size: 0.9em;"></span></span>',ke.style.fontSize=`${this.graphSize/9}px`,new Vr(ke);const $e=document.createElement("span");$e.innerHTML='<span style="position: relative; font-family: sans-serif; font-style: italic;">v<sub>x</sub>=<span style="position: absolute; top: -0.3em; left: 0.55em; font-size: 0.9em;"></span></span>',$e.style.fontSize=`${this.graphSize/9}px`,new Vr($e);const Xe=document.createElement("span");Xe.innerHTML='<span style="position: relative; font-family: sans-serif; font-style: italic;">v<sub>y</sub>=<span style="position: absolute; top: -0.3em; left: 0.55em; font-size: 0.9em;"></span></span>',Xe.style.fontSize=`${this.graphSize/9}px`;const rt=new Co(e.showRefForceProp,!0,!1);e.showRefForceProp.lazyLink($t=>e.showRefForceVectors=!$t);const Dn=new Co(e.showTestForceProp,!0,!1);e.showTestForceProp.lazyLink($t=>e.showTestForceVectors=!$t);const Xt=new Co(e.trailRefForceVectorsProp,!0,!1);e.trailRefForceVectorsProp.lazyLink($t=>e.trailRefForceVectors=!$t);const u=new Co(e.trailTestForceVectorsProp,!0,!1);e.trailTestForceVectorsProp.lazyLink($t=>e.trailTestForceVectors=!$t);let d=new nl(new Ai({align:"center",children:[new pi("Vectors Visualization"),new xt(0,0,350,15),new _i({align:"center",children:[new pi("Show Reference Force Vectors?"),new xt(0,0,10,0),rt]}),new _i({children:[new xt(0,0,0,10)]}),new _i({align:"center",children:[new pi("Trail Reference Force Vectors?"),new xt(0,0,10,0),Xt]}),new _i({children:[new xt(0,0,0,10)]}),new _i({align:"center",children:[new pi("Show Test Force Vectors?"),new xt(0,0,60,0),Dn]}),new _i({children:[new xt(0,0,0,10)]}),new _i({align:"center",children:[new pi("Trail Test Force Vectors?"),new xt(0,0,60,0),u]})]}),{fill:new ct("#d3d3d3"),maxWidth:230});this.addChild(d);const m=new Bre(t&&t.tandem?t.tandem.createTandem("infoDialog"):void 0),_=new vre({listener:()=>m.show(),iconFill:"rgb( 50, 145, 184 )",scale:.6,touchAreaDilation:15,tandem:t?.tandem?.createTandem("infoButton")});let S=new nl(new Ai({align:"center",children:[new _i({align:"center",children:[new pi("Test Equations"),new xt(0,0,10,0),_]}),new xt(0,0,350,15),new _i({align:"center",children:[bt,Nt]}),new _i({children:[new xt(0,0,0,10)]}),new _i({align:"center",children:[Gt,ci]}),new _i({children:[new xt(0,0,0,10)]}),new _i({align:"center",children:[V,Yt]}),new _i({children:[new xt(0,0,0,10)]}),new _i({align:"center",children:[fe,Pe]})]}),{fill:new ct("#d3d3d3"),maxWidth:230});this.addChild(S);const k=new pi("Exceeded disc boundary",{font:new hr({size:14,weight:"bold"}),fill:"red"}),I=new nl(k,{fill:new ct("#ffdddd"),stroke:"red",cornerRadius:5,xMargin:10,yMargin:5});this.addChild(I),I.rightTop=new Oe(Le.right+200,Le.top+80),I.visible=!1,e.resetDisableProb.link($t=>{I.visible=$t,n.enabled=!$t,Se.fill=$t?"red":"black",Te.fill=$t?"red":"black"}),Le.leftTop=new Oe(10,Le.top+30),k.visible=!1,e.resetDisableProb.link($t=>{k.visible=$t,n.enabled=!$t}),S.leftTop=new Oe(10,Le.rightBottom.y+5),d.leftTop=new Oe(10,S.rightBottom.y+5),lt.leftTop=new Oe(d.leftBottom.x,d.leftBottom.y+5),h.lazyLink(()=>{e.massProp.value=Number(window.prompt("Enter value for mass:")),this.reset()}),c.lazyLink(()=>{e.kProp.value=Number(window.prompt("Enter value for k:")),this.reset()}),v.lazyLink(()=>{e.xProp.value=Number(window.prompt("Enter value for x:")),this.reset()}),A.lazyLink(()=>{e.yProp.value=Number(window.prompt("Enter value for y:")),this.reset()}),f.lazyLink(()=>{e.v_xProp.value=Number(window.prompt("Enter value for v_x:")),this.reset()}),g.lazyLink(()=>{e.v_yProp.value=Number(window.prompt("Enter value for v_y:")),this.reset()}),P.lazyLink(()=>{e.omegaProp.value=Number(window.prompt("Enter value for ω:")),this.reset()});const L=new ma(7,{fill:new ct("red")}),N=new pi("Reference");this.addChild(L),this.addChild(N),L.leftTop=new Oe(1100,10),N.leftTop=new Oe(1120,5);const q=new ma(7,{fill:new ct("blue")}),W=new pi("Test");this.addChild(q),this.addChild(W),q.leftTop=new Oe(1250,10),W.leftTop=new Oe(1270,5),this.model=e,this.iOffset=-200,this.refOffset=200;const K=new Ge,G=new Do(K);document.body.appendChild(G.domElement);const U=new $v,ae=new Wg(-this.layoutBounds.maxX/2,this.layoutBounds.maxX/2,-this.layoutBounds.maxY/2,this.layoutBounds.maxY/2);ae.position.set(0,0,0),ae.position.z=1;const Q=new hf(175,32,32),se=new ya({map:new b_().load("./6465863.jpg"),transparent:!0,alphaTest:.5,side:Rf}),Y=new Ws(Q,se);this.disk=Y,U.add(Y),Y.position.set(this.iOffset,0,0);const ee=new pi("Rotating Frame"),F=new pi("Inertial Frame");ee.leftTop=new Oe(420,60),F.leftTop=new Oe(850,60),this.addChild(ee),this.addChild(F);const J=new hf(10,32,32),re=new ya({color:16711680,transparent:!0,depthTest:!0}),ce=new Ws(J,re);this.puckIRef=ce,U.add(ce),ce.position.set(this.iOffset+this.model.x,this.model.y,0);const ne=new Ws(J,re);this.puckRefRef=ne,U.add(ne),ne.position.set(this.refOffset+this.model.x,this.model.y,0);const ye=new ya({color:255,transparent:!0,depthTest:!0}),we=new Ws(J,ye);this.puckITest=we,e.xEQ!==""&&e.yEQ!==""&&e.v_xEQ!==""&&e.v_yEQ!==""&&U.add(we),we.position.set(this.iOffset+this.model.x,this.model.y,0);const Ve=new Ws(J,ye);this.puckRefTest=Ve,e.xEQ!==""&&e.yEQ!==""&&e.v_xEQ!==""&&e.v_yEQ!==""&&U.add(Ve),Ve.position.set(this.refOffset+this.model.x,this.model.y,0);const Be=new Ws(Q,se);this.diskRef=Be,U.add(Be),Be.position.set(this.refOffset,0,0),this.pathRefRef=new Hs,this.pathRefRef.currentPoint=new _t(ne.position.x,ne.position.y);const z=[new _t(ne.position.x,ne.position.y)],j=new Zt().setFromPoints(z),le=new yn({color:16711680,transparent:!0});this.lineRefRef=new rs(j,le),U.add(this.lineRefRef),this.pathIRef=new Hs,this.pathIRef.currentPoint=new _t(ce.position.x,ce.position.y);const xe=[new _t(ce.position.x,ce.position.y)],Ce=new Zt().setFromPoints(xe),Ue=new yn({color:16711680,transparent:!0});this.lineIRef=new rs(Ce,Ue),U.add(this.lineIRef),this.pathRefTest=new Hs,this.pathRefTest.currentPoint=new _t(Ve.position.x,Ve.position.y);const je=new yn({color:255,transparent:!0});this.lineRefTest=new rs(j,je),this.pathITest=new Hs,this.pathITest.currentPoint=new _t(we.position.x,we.position.y);const nt=new yn({color:255,transparent:!0});this.lineITest=new rs(Ce,nt),this.maxRefCen=d3.max(this.model.graphData.data,$t=>Math.abs($t.cen)),this.refCenArrowDir=new Ae(0,0,0),this.refCenArrowDir.normalize();const yt=ce.position,Vt=50,it=16711935;this.refCenArrow=new Qr(this.refCenArrowDir,ce.position,50,it,10,20),this.maxRefCor=d3.max(this.model.graphData.data,$t=>Math.abs($t.cor)),this.refCorArrowDir=new Ae(0,0,0),this.refCorArrowDir.normalize(),this.refCorArrow=new Qr(this.refCorArrowDir,yt,Vt,"#027320",10,20),this.maxTestCen=d3.max(this.model.graphDataTest.data,$t=>Math.abs($t.cen)),this.testCenArrowDir=new Ae(0,0,0),this.testCenArrowDir.normalize();const at=ce.position;this.testCenArrow=new Qr(this.testCenArrowDir,we.position,50,it,10,20),this.maxTestCor=d3.max(this.model.graphDataTest.data,$t=>Math.abs($t.cor)),this.testCorArrowDir=new Ae(0,0,0),this.testCorArrowDir.normalize(),this.testCorArrow=new Qr(this.testCorArrowDir,at,Vt,it,10,20),this.arrowGroup=new xu,this.arrowGroup.add(this.refCenArrow),this.arrowGroup.add(this.refCorArrow),this.arrowGroup.add(this.testCenArrow),this.arrowGroup.add(this.testCorArrow),U.add(this.arrowGroup),this.scene=U,this.refCorArrow.line.material=new Fl({color:"#027320",linewidth:2,scale:15,dashSize:2,gapSize:1}),U.add(this.refCorArrow),U.add(this.refCenArrow),this.refCenArrow.position.x=-290,this.refCenArrow.position.y=250,this.refCorArrow.position.x=-100,this.refCorArrow.position.y=250,this.refCorArrow.rotation.z=Math.PI,this.refCenArrow.rotation.z=Math.PI;const Tt=new pi("Centrifugal Force");Tt.leftTop=new Oe(330,570);const At=new pi("Coriolis Force");At.leftTop=new Oe(540,570),this.addChild(Tt),this.addChild(At);const ft=new mP({alpha:!0,antialias:!0});ft.setClearColor(0,0),ft.setClearAlpha(0),ft.setSize(this.layoutBounds.maxX,this.layoutBounds.maxY),document.body.appendChild(ft.domElement);const Rt=new Vr(ft.domElement);this.domNode=Rt,this.domNode._container.style.position="",this.addChild(Rt),G.updateOnRequestAnimationFrame(()=>{ft.render(U,ae)}),this.passedStart=!1;const Jt=()=>{e.reset(),this.reset()};this.selectedRunProperty=new Mt("History");const hi=new Ge;let si=null;this.runHistory=[];function di($t){si&&(hi.removeChild(si),si.dispose());const Nn=[{value:"History",createNode:()=>new kt("History"),accessibleName:"History run"},...Array.isArray($t)&&typeof $t[0]=="object"?$t.map(Mi=>({value:`Run ${Mi.index+1}`,createNode:()=>new kt(`Run ${Mi.index+1}`),accessibleName:`Run ${Mi.index+1}`})):$t.map((Mi,cs)=>({value:Mi,createNode:()=>new kt(Mi),accessibleName:Mi}))];si=new Tre(this.selectedRunProperty,Nn,{scale:1.5}),hi.addChild(si)}this.addChild(hi),this.updateComboBox=di.bind(this),this.updateComboBox([]),this.selectedRunProperty.link($t=>{if($t.startsWith("Run ")){const Nn=parseInt($t.replace("Run ",""))-1,Mi=this.runHistory[Nn];Mi&&(this.model.xProp.value=Mi.x,this.model.yProp.value=Mi.y,this.model.v_xProp.value=Mi.v_x,this.model.v_yProp.value=Mi.v_y,this.model.omegaProp.value=Mi.omega,this.xdotLatex=Mi.xdotLatex,this.ydotLatex=Mi.ydotLatex,this.v_xdotLatex=Mi.v_xdotLatex,this.v_ydotLatex=Mi.v_ydotLatex,this.model.xEQ=Mi.xEQ,this.model.yEQ=Mi.yEQ,this.model.v_xEQ=Mi.v_xEQ,this.model.v_yEQ=Mi.v_yEQ,this.restoreRun())}}),hi.leftTop=new Oe(Le.rightCenter.x+10,Le.leftTop.y+10),this.pause=!1,Jt()}restoreRun(){this.model.x=this.model.xProp.value,this.model.y=this.model.yProp.value,this.model.v_x=this.model.v_xProp.value,this.model.v_y=this.model.v_yProp.value,this.model.omega=this.model.omegaProp.value,this.xdotField.updateText(this.xdotLatex),this.ydotField.updateText(this.ydotLatex),this.v_xdotField.updateText(this.v_xdotLatex),this.v_ydotField.updateText(this.v_ydotLatex),this.model.reset(),this.scene.remove(this.arrowGroup),this.arrowGroup=new xu,this.scene.add(this.arrowGroup),this.maxRefCen=d3.max(this.model.graphData.data,v=>Math.abs(v.cen)),this.maxRefCor=d3.max(this.model.graphData.data,v=>Math.abs(v.cor)),this.maxTestCen=d3.max(this.model.graphDataTest.data,v=>Math.abs(v.cen)),this.maxTestCor=d3.max(this.model.graphDataTest.data,v=>Math.abs(v.cor)),this.diskRef.rotation.z=0,this.puckRefRef.position.x=this.refOffset+this.model.x,this.puckRefRef.position.y=this.model.y*-1,this.puckIRef.position.x=this.iOffset+this.model.x,this.puckIRef.position.y=this.model.y*-1,this.pathRefRef=new Hs,this.pathRefRef.currentPoint=new _t(this.puckRefRef.position.x,this.puckRefRef.position.y);const e=[new _t(this.puckRefRef.position.x,this.puckRefRef.position.y)],t=new Zt().setFromPoints(e),n=new yn({color:16711680,transparent:!0});this.scene.remove(this.lineRefRef),this.lineRefRef=new rs(t,n),this.pathIRef=new Hs,this.pathIRef.currentPoint=new _t(this.puckIRef.position.x,this.puckIRef.position.y);const s=[new _t(this.puckIRef.position.x,this.puckIRef.position.y)],r=new Zt().setFromPoints(s),a=new yn({color:16711680,transparent:!0});this.scene.remove(this.lineIRef),this.lineIRef=new rs(r,a),this.model.xEQ!==""&&this.model.yEQ!==""&&this.model.v_xEQ!==""&&this.model.v_yEQ!==""?(this.scene.add(this.puckITest),this.scene.add(this.puckRefTest)):(this.scene.remove(this.puckITest),this.scene.remove(this.puckRefTest)),this.puckRefTest.position.x=this.refOffset+this.model.x,this.puckRefTest.position.y=this.model.y*-1,this.puckITest.position.x=this.iOffset+this.model.x,this.puckITest.position.y=this.model.y*-1,this.pathRefTest=new Hs,this.pathRefTest.currentPoint=new _t(this.puckRefTest.position.x,this.puckRefTest.position.y);const o=[new _t(this.puckRefTest.position.x,this.puckRefTest.position.y)],l=new Zt().setFromPoints(o),h=new yn({color:255,transparent:!0});this.scene.remove(this.lineRefTest),this.lineRefTest=new rs(l,h),this.pathITest=new Hs,this.pathITest.currentPoint=new _t(this.puckITest.position.x,this.puckITest.position.y);const c=[new _t(this.puckITest.position.x,this.puckITest.position.y)],f=new Zt().setFromPoints(c),g=new yn({color:255,transparent:!0});this.scene.remove(this.lineITest),this.lineITest=new rs(f,g),this.passedStart=!1,this.refDistanceCenterGraph.detach(),this.refDistanceCenterGraph=e2(this.model.graphData,this.model.graphLen,"staticSim-dist","reference",this.graphSize,this.model.graphDataTest,this.model.graphLenTest),this.yScaleD=this.refDistanceCenterGraph.y,this.xScaleD=this.refDistanceCenterGraph.x,this.refDistanceCenterGraph.node.offsetWidth=250,this.refDistanceCenterGraph.node.offsetHeight=250,this.refDistanceCenterGraph=new Vr(this.refDistanceCenterGraph.node),this.refDistanceCenterGraph._container.style.transformOrigin="left top 0px",this.refTangentialVelocityGraph.detach(),this.refTangentialVelocityGraph=t2(this.model.graphData,this.model.graphLen,"staticSim-tv","reference",this.graphSize,this.model.graphDataTest,this.model.graphLenTest),this.yScaleTv=this.refTangentialVelocityGraph.y,this.xScaleTv=this.refTangentialVelocityGraph.x,this.refTangentialVelocityGraph.node.offsetWidth=250,this.refTangentialVelocityGraph.node.offsetHeight=250,this.refTangentialVelocityGraph=new Vr(this.refTangentialVelocityGraph.node),this.refTangentialVelocityGraph._container.style.transformOrigin="left top 0px",this.refTangentialVelocityGraph.leftTop=new Oe(1225,50),this.refDistanceCenterGraph.leftTop=new Oe(1050,50),this.addChild(this.refDistanceCenterGraph),this.addChild(this.refTangentialVelocityGraph),this.refDistanceCenterGraph.element.children[9].setAttribute("cx",this.xScaleD(0)),this.refDistanceCenterGraph.element.children[9].setAttribute("cy",this.yScaleD(this.model.graphData.getCor(0))),this.model.graphDataTest.data.length>10&&(this.refDistanceCenterGraph.element.children[7].setAttribute("cx",this.xScaleD(0)),this.refDistanceCenterGraph.element.children[7].setAttribute("cy",this.yScaleD(this.model.graphDataTest.getCor(0)))),this.refTangentialVelocityGraph.element.children[9].setAttribute("cx",this.xScaleTv(0)),this.refTangentialVelocityGraph.element.children[9].setAttribute("cy",this.yScaleTv(this.model.graphData.getCen(0))),this.model.graphDataTest.data.length>10&&(this.refTangentialVelocityGraph.element.children[7].setAttribute("cx",this.xScaleTv(0)),this.refTangentialVelocityGraph.element.children[7].setAttribute("cy",this.yScaleTv(this.model.graphDataTest.getCen(0)))),this.model.timer=0}reset(){this.xdotLatex=this.xdotField.mathField.latex(),this.ydotLatex=this.ydotField.mathField.latex(),this.v_xdotLatex=this.v_xdotField.mathField.latex(),this.v_ydotLatex=this.v_ydotField.mathField.latex();const e={x:this.model.xProp.value,y:this.model.yProp.value,v_x:this.model.v_xProp.value,v_y:this.model.v_yProp.value,omega:this.model.omegaProp.value,xdotLatex:this.xdotLatex,ydotLatex:this.ydotLatex,v_xdotLatex:this.v_xdotLatex,v_ydotLatex:this.v_ydotLatex,xEQ:this.model.xEQ,yEQ:this.model.yEQ,v_xEQ:this.model.v_xEQ,v_yEQ:this.model.v_yEQ},t=this.runHistory[this.runHistory.length-1];if(!t||Object.keys(e).some(w=>t[w]!==e[w])){this.runHistory.push(e),this.updateComboBox(this.runHistory.map((T,D)=>({name:`Run ${D+1}`,index:D})));const w=this.runHistory.length;this.selectedRunProperty.value=`Run ${w}`}this.model.reset(),this.scene.remove(this.arrowGroup),this.arrowGroup=new xu,this.scene.add(this.arrowGroup),this.maxRefCen=d3.max(this.model.graphData.data,w=>Math.abs(w.cen)),this.maxRefCor=d3.max(this.model.graphData.data,w=>Math.abs(w.cor)),this.maxTestCen=d3.max(this.model.graphDataTest.data,w=>Math.abs(w.cen)),this.maxTestCor=d3.max(this.model.graphDataTest.data,w=>Math.abs(w.cor)),this.diskRef.rotation.z=0,this.puckRefRef.position.x=this.refOffset+this.model.x,this.puckRefRef.position.y=this.model.y*-1,this.puckIRef.position.x=this.iOffset+this.model.x,this.puckIRef.position.y=this.model.y*-1,this.pathRefRef=new Hs,this.pathRefRef.currentPoint=new _t(this.puckRefRef.position.x,this.puckRefRef.position.y);const s=[new _t(this.puckRefRef.position.x,this.puckRefRef.position.y)],r=new Zt().setFromPoints(s),a=new yn({color:16711680,transparent:!0});this.scene.remove(this.lineRefRef),this.lineRefRef=new rs(r,a),this.pathIRef=new Hs,this.pathIRef.currentPoint=new _t(this.puckIRef.position.x,this.puckIRef.position.y);const o=[new _t(this.puckIRef.position.x,this.puckIRef.position.y)],l=new Zt().setFromPoints(o),h=new yn({color:16711680,transparent:!0});this.scene.remove(this.lineIRef),this.lineIRef=new rs(l,h),this.model.xEQ!==""&&this.model.yEQ!==""&&this.model.v_xEQ!==""&&this.model.v_yEQ!==""?(this.scene.add(this.puckITest),this.scene.add(this.puckRefTest)):(this.scene.remove(this.puckITest),this.scene.remove(this.puckRefTest)),this.puckRefTest.position.x=this.refOffset+this.model.x,this.puckRefTest.position.y=this.model.y*-1,this.puckITest.position.x=this.iOffset+this.model.x,this.puckITest.position.y=this.model.y*-1,this.pathRefTest=new Hs,this.pathRefTest.currentPoint=new _t(this.puckRefTest.position.x,this.puckRefTest.position.y);const c=[new _t(this.puckRefTest.position.x,this.puckRefTest.position.y)],f=new Zt().setFromPoints(c),g=new yn({color:255,transparent:!0});this.scene.remove(this.lineRefTest),this.lineRefTest=new rs(f,g),this.pathITest=new Hs,this.pathITest.currentPoint=new _t(this.puckITest.position.x,this.puckITest.position.y);const v=[new _t(this.puckITest.position.x,this.puckITest.position.y)],A=new Zt().setFromPoints(v),P=new yn({color:255,transparent:!0});this.scene.remove(this.lineITest),this.lineITest=new rs(A,P),this.passedStart=!1,this.refDistanceCenterGraph.detach(),this.refDistanceCenterGraph=e2(this.model.graphData,this.model.graphLen,"staticSim-dist","reference",this.graphSize,this.model.graphDataTest,this.model.graphLenTest),this.yScaleD=this.refDistanceCenterGraph.y,this.xScaleD=this.refDistanceCenterGraph.x,this.refDistanceCenterGraph.node.offsetWidth=250,this.refDistanceCenterGraph.node.offsetHeight=250,this.refDistanceCenterGraph=new Vr(this.refDistanceCenterGraph.node),this.refDistanceCenterGraph._container.style.transformOrigin="left top 0px",this.refTangentialVelocityGraph.detach(),this.refTangentialVelocityGraph=t2(this.model.graphData,this.model.graphLen,"staticSim-tv","reference",this.graphSize,this.model.graphDataTest,this.model.graphLenTest),this.yScaleTv=this.refTangentialVelocityGraph.y,this.xScaleTv=this.refTangentialVelocityGraph.x,this.refTangentialVelocityGraph.node.offsetWidth=250,this.refTangentialVelocityGraph.node.offsetHeight=250,this.refTangentialVelocityGraph=new Vr(this.refTangentialVelocityGraph.node),this.refTangentialVelocityGraph._container.style.transformOrigin="left top 0px",this.refTangentialVelocityGraph.leftTop=new Oe(1225,50),this.refDistanceCenterGraph.leftTop=new Oe(1050,50),this.addChild(this.refDistanceCenterGraph),this.addChild(this.refTangentialVelocityGraph),this.refDistanceCenterGraph.element.children[9].setAttribute("cx",this.xScaleD(0)),this.refDistanceCenterGraph.element.children[9].setAttribute("cy",this.yScaleD(this.model.graphData.getCor(0))),this.model.graphDataTest.data.length>10&&(this.refDistanceCenterGraph.element.children[7].setAttribute("cx",this.xScaleD(0)),this.refDistanceCenterGraph.element.children[7].setAttribute("cy",this.yScaleD(this.model.graphDataTest.getCor(0)))),this.refTangentialVelocityGraph.element.children[9].setAttribute("cx",this.xScaleTv(0)),this.refTangentialVelocityGraph.element.children[9].setAttribute("cy",this.yScaleTv(this.model.graphData.getCen(0))),this.model.graphDataTest.data.length>10&&(this.refTangentialVelocityGraph.element.children[7].setAttribute("cx",this.xScaleTv(0)),this.refTangentialVelocityGraph.element.children[7].setAttribute("cy",this.yScaleTv(this.model.graphDataTest.getCen(0))))}step(e){if(!this.pause&&(document.hidden||(this.model.timer+=e*this.model.simSpeed),this.model.timer<=10)){this.model.trailRefForceVectors&&!this.model.trailTestForceVectors?(this.model.frameCount%50!==0&&(this.arrowGroup.remove(this.refCenArrow),this.arrowGroup.remove(this.refCorArrow)),this.arrowGroup.remove(this.testCenArrow),this.arrowGroup.remove(this.testCorArrow),this.model.frameCount++):this.model.trailTestForceVectors&&!this.model.trailRefForceVectors?(this.model.frameCount%50!==0&&(this.arrowGroup.remove(this.testCenArrow),this.arrowGroup.remove(this.testCorArrow)),this.arrowGroup.remove(this.refCenArrow),this.arrowGroup.remove(this.refCorArrow),this.model.frameCount++):this.model.trailTestForceVectors&&this.model.trailRefForceVectors?(this.model.frameCount%50!==0&&(this.arrowGroup.remove(this.testCenArrow),this.arrowGroup.remove(this.testCorArrow),this.arrowGroup.remove(this.refCenArrow),this.arrowGroup.remove(this.refCorArrow)),this.model.frameCount++):(this.arrowGroup.remove(this.refCenArrow),this.arrowGroup.remove(this.refCorArrow),this.arrowGroup.remove(this.testCenArrow),this.arrowGroup.remove(this.testCorArrow)),this.refCenArrowDir=new Ae(this.puckIRef.position.x-this.disk.position.x,this.puckIRef.position.y-this.disk.position.y,0);const t=Math.abs(this.model.graphData.getCen(this.model.timer)/this.maxRefCen);this.refCenArrowDir.normalize();const n=this.puckIRef.position,s=16711935;this.refCenArrow=new Qr(this.refCenArrowDir,n,t*50,s,t*20,t*10),this.refCorArrowDir=new Ae(this.model.graphData.getV_Y(this.model.timer),this.model.graphData.getV_X(this.model.timer),0),this.refCorArrowDir.normalize();const r=Math.abs(this.model.graphData.getCor(this.model.timer)/this.maxRefCor);this.refCorArrow=new Qr(this.refCorArrowDir,n,r*50,"#027320",r*20,r*10),this.refCorArrow.line.material=new Fl({color:"#027320",linewidth:2,scale:15,dashSize:2,gapSize:1}),this.refCorArrow.line.computeLineDistances(),this.testCenArrowDir=new Ae(this.puckITest.position.x-this.disk.position.x,this.puckITest.position.y-this.disk.position.y,0);const a=Math.abs(this.model.graphDataTest.getCen(this.model.timer)/this.maxTestCen);this.testCenArrowDir.normalize();const o=this.puckITest.position;this.testCenArrow=new Qr(this.testCenArrowDir,o,a*50,s,a*20,a*10),this.testCorArrowDir=new Ae(this.model.graphDataTest.getV_Y(this.model.timer),this.model.graphDataTest.getV_X(this.model.timer),0),this.testCorArrowDir.normalize();const l=Math.abs(this.model.graphDataTest.getCor(this.model.timer)/this.maxTestCor);this.testCorArrow=new Qr(this.testCorArrowDir,o,l*50,"#027320",l*20,l*10),this.testCorArrow.line.material=new Fl({color:"#027320",linewidth:2,scale:15,dashSize:2,gapSize:1}),this.model.showRefForceVectors&&(this.arrowGroup.add(this.refCorArrow),this.arrowGroup.add(this.refCenArrow)),this.model.showTestForceVectors&&(this.arrowGroup.add(this.testCorArrow),this.arrowGroup.add(this.testCenArrow));const h=(c,f)=>{(Math.sqrt(this.model.graphData.getX(this.model.timer)**2+this.model.graphData.getY(this.model.timer)**2)<=175||Math.sqrt(this.model.graphDataTest.getX(this.model.timer)**2+this.model.graphDataTest.getY(this.model.timer)**2)<=175&&this.model.graphDataTest.data.length>5)&&this.diskRef.rotateZ(e*this.model.omega*this.model.simSpeed*-1);const g=this.puckRefRef.position.x,v=this.puckRefRef.position.y,A=this.puckIRef.position.x,P=this.puckIRef.position.y,w=this.puckRefTest.position.x,T=this.puckRefTest.position.y,D=this.puckITest.position.x,M=this.puckITest.position.y;this.model.graphDataTest.getX(this.model.timer)!==0&&this.model.graphDataTest.getY(this.model.timer)!==0&&(this.puckITest.position.x=this.model.graphDataTest.getXI(this.model.timer)+this.iOffset,this.puckITest.position.y=this.model.graphDataTest.getYI(this.model.timer)*-1,this.pathITest.quadraticCurveTo(D,M,this.puckITest.position.x,this.puckITest.position.y),this.puckRefTest.position.x=this.model.graphDataTest.getX(this.model.timer)+this.refOffset,this.puckRefTest.position.y=this.model.graphDataTest.getY(this.model.timer)*-1,this.pathRefTest.quadraticCurveTo(w,T,this.puckRefTest.position.x,this.puckRefTest.position.y)),this.puckIRef.position.x=this.model.graphData.getXI(this.model.timer)+this.iOffset,this.puckIRef.position.y=this.model.graphData.getYI(this.model.timer)*-1,this.pathIRef.quadraticCurveTo(A,P,this.puckIRef.position.x,this.puckIRef.position.y),this.puckRefRef.position.x=this.model.graphData.getX(this.model.timer)+this.refOffset,this.puckRefRef.position.y=this.model.graphData.getY(this.model.timer)*-1,this.pathRefRef.quadraticCurveTo(g,v,this.puckRefRef.position.x,this.puckRefRef.position.y);const B=(Z,de,$)=>{const me=Z.getPoints(),ue=new Zt().setFromPoints(me);return this.scene.remove(de),de=new rs(ue,$),de.computeLineDistances(),this.scene.add(de),de},O=new yn({color:255,transparent:!0}),x=new Fl({color:16711680,linewidth:2,scale:.5,dashSize:3,gapSize:2,transparent:!1});this.model.graphDataTest.getX(this.model.timer)!==0&&this.model.graphDataTest.getY(this.model.timer)!==0&&(this.lineITest=B(this.pathITest,this.lineITest,O),this.lineRefTest=B(this.pathRefTest,this.lineRefTest,O)),this.lineIRef=B(this.pathIRef,this.lineIRef,x),this.lineRefRef=B(this.pathRefRef,this.lineRefRef,x)};Math.sqrt(this.model.graphData.getX(this.model.timer)**2+this.model.graphData.getY(this.model.timer)**2)<=175&&(this.refDistanceCenterGraph.element.children[9].setAttribute("cx",this.xScaleD(this.model.timer)),this.refDistanceCenterGraph.element.children[9].setAttribute("cy",this.yScaleD(this.model.graphData.getCor(this.model.timer))),this.refTangentialVelocityGraph.element.children[9].setAttribute("cx",this.xScaleTv(this.model.timer)),this.refTangentialVelocityGraph.element.children[9].setAttribute("cy",this.yScaleTv(this.model.graphData.getCen(this.model.timer)))),Math.sqrt(this.model.graphDataTest.getX(this.model.timer)**2+this.model.graphDataTest.getY(this.model.timer)**2)<=175&&this.model.xEQ!==""&&this.model.yEQ!==""&&this.model.v_xEQ!==""&&this.model.v_yEQ!==""&&(this.refDistanceCenterGraph.element.children[7].setAttribute("cx",this.xScaleD(this.model.timer)),this.refDistanceCenterGraph.element.children[7].setAttribute("cy",this.yScaleD(this.model.graphDataTest.getCor(this.model.timer))),this.refTangentialVelocityGraph.element.children[7].setAttribute("cx",this.xScaleTv(this.model.timer)),this.refTangentialVelocityGraph.element.children[7].setAttribute("cy",this.yScaleTv(this.model.graphDataTest.getCen(this.model.timer)))),h()}}}class zre extends dl{constructor(e){super(()=>new Ire,t=>new qre(t),e)}}pre(()=>{const i=new Cf("Coriolis Force"),e=[new zre({tandem:R.ROOT.createTandem("simScreen")})];new U$(i,e).start()});</script>
</head>

<body style="background-color: black">

</body>

</html>